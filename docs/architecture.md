# Architecure Document


## Open source attributes

- Jakarta EE / Spring
   - use CDI or Spring for injection of Skyve services
- XML meta-data driven
    - Declarative instead of procedural.
    - Data/Domain model, user interfaces, routing, menu, security
    - Static Validation
		- DomainGenerator.validate() does the whole metadata for a customer
		- For individual metadata files there are 2 levels of validation
			- Validate the file in isolation
				- ConvertibleMetaData implementations validate and convert themselves to their “runtime” equivalent.
					- ActionMetaData
					- BizletMetaData
					- CustomerMetaData
					- DocumentMetaData
					- ModuleMetadata
					- Router
					- ViewMetaData
			- Cross meta-data validation of a file taking into account its dependencies
				- ProvidedRepository provides 4 methods
					- validateCustomerForGenerateDomain()
					- validateDocumentForGenerateDomain()
					- validateModuleForGenerateDomain()
					- validateViewForGenerateDomain()
					- These cross meta-data validations use the runtime equivalents to validate against.
		- There is also ValidateMetaDataJob that can validate all customers asynchronously. This is fired one shot when skyve starts up.
- Regularly pen tested
- Declarative Role-based Security
    - more than page based
- Multi-tenant
- Overridable per customer
- Abstracted types and relations
- Wrangles hibernate usage
- No HTML
- No Javascript
- Spatial
    - Geometry is a primary type
    - Utilises database support where possible
    - Skyve Hibernate Dialects
    - Exposes API to search and manipulate gemoetries
- Content Management / Federated text search
    - Text extraction of attachments
    - Transactional content relations with data
    - Textual indexing of both data and content/files
    - Federated text search across data and content exposed in UI.
    - Implementations for Lucene and Elastic
- Database agnostic
    - Hibernate dialect extensions for MySQL/MariaDB/H2/PostgreSQL/SQLServer/Oracle
- Best practice normalised schemas
    - via Hibernate relations and domain generation that handles unidirectional and bidirectional
        - many to one aggregation/composition with joining or owning database relations
        - one to many composition with joining or owning database relations
        - many to many aggregation
        - one to one aggregation/composition
        - arc relationships (relate to anything)
        - Inheritance via joined, mapped or single table.
        - Hierarchical (tree) structures.
- Schema evolution
    - via Skyve Hibernate Dialect extensions that allow for length and type coercion
- Platform agnostic
    - via Java
- Internationalisation
    - Use keys in code and metadata
    - Browser integration
- Cloud or on-prem
- List Models
- Routing
    - through view metadata
    - selectable programmatically
- Interceptors
    - before and after of every event
    - chain them
    - declared in metadata per customer
- Reporting
    - Jasper
    - Freemarker
- Query definitions
    - A definition of a projected tabular set of results along with filter criteria where the expressions are relative to a defined driving document.
    - Simple/Complex filtering
    - Datastore or business tier sorting
    - Obey security restrictions
    - Non-persistent attribute projection and query engine knows how to retrieve
    - No instantiation unless absolutely necessary
        - Results are Maps that expose the domain interface, until real bean is required
    - Paging filtering sorting joining built in
        - inner or outer joins automatic based on metadata declaration
- Expressions
    - Binding
    - EL
- Import/Export
    - BizPort
        - Import/Export complete data graphs to spreadsheets
    - Quick Import
        - Simpler import/export
- Backup/Restore
    - Platform independent data/content backup and restore
        - Backup from SQLServer and restore to H2
- Caching
    - Declare caches and use them in code
    - Declare hibernate second level caches and assign to document metadata
    - Conversations cached
- Conversation state-based UIs
- Isomorphic rendering
- Project generation
- UI interpretation
- Multiple rendering pipelines
- Plugin architecture
- Drillable data intensive UIs
- Automatic web service generation with Swagger
- Scaffolding
- Responsive UIs
- SC, Faces, Vue, Flutter interpreted or generated UI
- Shaped data payloads
- Client and server-side events.
- Change tracking
- Defined lifecycle and callbacks for UI and domain events.
- Workflow
- SAIL
    - Generation from metadata
    - Selenese or Web Driver
- Plugable converters/validators
- Unit test generation
    - CRUD Domain testing
    - Action tests
    - Test data generation
    - Data store test data seeding.
- Background UI task
    - A ViewBackgroundTask is a short-running asynchronous process that can be kicked off via WebContext (no percent complete or interrupt method)
    - It is applicable to the UI and has access to and the ability to control the conversation caching in its execution via cacheConversation().
    - It continues to use the Persistence instance from the conversation with all the state as if it was another user gesture - same level 1 cache, same local UI mutations.
    - It’s execute method takes the current contextual bean and is never null - ie it has UI context.
    - The persistence is set as async for the thread so that aysnc timeouts are used during its execution similar to Jobs though.
- Push tech
- User Agent Sniffing in router
- JS API and inject
- XHTML off the reservation Page routing.
- Charting
    - Metadata definition
    - Programmatic charting
    - JS and server-side
- Jobs
    - A Job represents an asynchronous process that can be scheduled or run ad-hoc.
    - It is registered against a module and available to be scheduled through the UI.
    - Although job logging can be turned off for a Job, each run is generally logged.
    - The persistence is set as async for the thread so that aysnc timeouts are used during its execution.
- Skyve Script
- Security Integration
    - Database
    - OAuth
    - SAML 2.0
    - SPNEGO/Kerberos
    - OWASP
- Tags
- Flags
- Thumbnail framework
- Engineering
    - Proxy framework
    - Runtime compiling and in-memory class loading
- Maven plugin
- Javadoc
    - metadata comment integration
    - UML diagramming
- Tiered resource serving
- Error binding handling
