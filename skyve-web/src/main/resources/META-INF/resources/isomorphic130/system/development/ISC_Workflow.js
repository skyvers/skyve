/*

  SmartClient Ajax RIA system
  Version v13.0p_2023-11-09/LGPL Development Only (2023-11-09)

  Copyright 2000 and beyond Isomorphic Software, Inc. All rights reserved.
  "SmartClient" is a trademark of Isomorphic Software, Inc.

  LICENSE NOTICE
     INSTALLATION OR USE OF THIS SOFTWARE INDICATES YOUR ACCEPTANCE OF
     ISOMORPHIC SOFTWARE LICENSE TERMS. If you have received this file
     without an accompanying Isomorphic Software license file, please
     contact licensing@isomorphic.com for details. Unauthorized copying and
     use of this software is a violation of international copyright law.

  DEVELOPMENT ONLY - DO NOT DEPLOY
     This software is provided for evaluation, training, and development
     purposes only. It may include supplementary components that are not
     licensed for deployment. The separate DEPLOY package for this release
     contains SmartClient components that are licensed for deployment.

  PROPRIETARY & PROTECTED MATERIAL
     This software contains proprietary materials that are protected by
     contract and intellectual property law. You are expressly prohibited
     from attempting to reverse engineer this software or modify this
     software for human readability.

  CONTACT ISOMORPHIC
     For more information regarding license rights and restrictions, or to
     report possible license violations, please contact Isomorphic Software
     by email (licensing@isomorphic.com) or web (www.isomorphic.com).

*/

if(window.isc&&window.isc.module_Core&&!window.isc.module_Workflow){isc.module_Workflow=1;isc._moduleStart=isc._Workflow_start=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc._moduleEnd&&(!isc.Log||(isc.Log&&isc.Log.logIsDebugEnabled('loadTime')))){isc._pTM={message:'Workflow load/parse time: '+(isc._moduleStart-isc._moduleEnd)+'ms',category:'loadTime'};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,'loadTime');else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=[isc._pTM]}isc.definingFramework=true;isc.defineClass("ProcessElement");isc.A=isc.ProcessElement;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getTitle=function isc_c_ProcessElement_getTitle(){var _1=this.getInstanceProperty("typeTitle");if(!_1){_1=this.getClassName();if(_1.endsWith("Task"))_1=_1.substring(0,_1.length-4);_1=isc.DataSource.getAutoTitle(_1)}
return _1},isc.A.createInitPropertiesFromAction=function isc_c_ProcessElement_createInitPropertiesFromAction(_1,_2,_3){var _4=this.actionMapping,_5={};if(!_4)return null;if(_4.target){_5[_4.target]=_1.target}
if(_4.source){_5[_4.source]=_3&&_3.ID}
if(_1.mapping&&_4.paramMap){var _6=_1.mapping,_7=_4.paramMap,_8=[];for(var i=0;i<_1.mapping.length;i++){if(_6[i]&&_6[i]!="null"&&_7[i]){_8.add(_6[i]+":"+_7[i])}}
if(!_8.isEmpty())_5.mapping=_8}
return _5});isc.B._maxIndex=isc.C+2;isc.A=isc.ProcessElement.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.passThruOutput=true;isc.A.$2345=isc.$ag+"lastTask";isc.B.push(isc.A.isMockModeEnabled=function isc_ProcessElement_isMockModeEnabled(_1){return((_1&&_1.mockMode&&this.mockMode!=false)||this.mockMode)},isc.A.getEditorType=function isc_ProcessElement_getEditorType(){return this.editorType},isc.A.getElementDescription=function isc_ProcessElement_getElementDescription(){return this.description},isc.A.getSerializeableFields=function isc_ProcessElement_getSerializeableFields(){var _1=this.Super("getSerializeableFields",arguments);if(_1.description&&_1.description==this.getElementDescription()){delete _1.description}
return _1},isc.A.$195y=function isc_ProcessElement__resolveCriteriaExpressions(_1,_2,_3,_4){_1=isc.clone(_1);if(isc.DS.isAdvancedCriteria(_1)){this.$195z(_1,_2,_3,_4);if(_4.ruleScope){var _5=window[_4.ruleScope];if(!_5||_5.destroyed){this.logWarn("Attempt to resolve ruleScope references in taskInputExpression but ruleScope not found: "+_4.ruleScope)}else{_1=isc.DS.resolveDynamicCriteria(_1,_5.getRuleContext())}}}else{_1=this.$1950(_1,_2,_3,_4)}
return _1},isc.A.$195z=function isc_ProcessElement__resolveAdvancedCriteriaExpressions(_1,_2,_3,_4){var _5=_1.operator;if(_5=="and"||_5=="or"||_5=="not"){var _6=_1.criteria;if(!isc.isAn.Array(_6))_6=[_6];for(var i=0;i<_6.length;i++){this.$195z(_6[i],_2,_3,_4)}}if(_1.value!=null){var _5=_1.operator&&isc.DS.$57z[_1.operator],_8=_5&&_5.valueType=="valueSet";_1.value=this.$1951(_1.value,_2,_3,_4,_8)}},isc.A.$1950=function isc_ProcessElement__resolveObjectDynamicExpressions(_1,_2,_3,_4){var _5={};for(var _6 in _1){_5[_6]=this.$1951(_1[_6],_2,_3,_4,null,1)}
for(var _6 in _5){_5[_6]=this.$1951(_5[_6],_2,_3,_4,null,2)}
return _5},isc.A.$1951=function isc_ProcessElement__resolveDynamicExpression(_1,_2,_3,_4,_5,_6){if((_6==null||_6==1)&&isc.isA.String(_1)){if(_1.startsWith("\\$")){_1=_1.substring(1)}else if(_3&&_1.startsWith("$inputRecord")){if(_3){var _7=_1.replace("$inputRecord","state");_1=isc.Canvas.$70o(_7,null,{state:_3})}}else if(_2&&_1.startsWith("$input")){if(_2){var _7=_1.replace("$input","state");_1=isc.Canvas.$70o(_7,null,{state:_2})}}else if(_4&&_1.startsWith("$last")){_1=_1.substring(5);var _8;if(_1.startsWith("[")){var _9=_1.substring(1,_1.indexOf("]"));_1=_1.substring(_1.indexOf("]")+1);_8=_4.getLastTaskOutput(_9)}else{_8=_4.getLastTaskOutput()}
if(_1.startsWith(".")){var _7="state"+_1;if(_5&&isc.isAn.Array(_8)){var _10=[];for(var i=0;i<_8.length;i++){var _12=_8[i];_1=isc.Canvas.$70o(_7,null,{state:_12});if(_1!=null){_10.add(_1)}else{var _13=_7.substring(0,_7.lastIndexOf("."));if(!isc.Canvas.$1683(_13,null,{state:_12})){this.logWarn(this.getClassName()+" taskInputExpression path "+_7+" not found in previous task output")}}}
_1=_10}else{if(isc.isAn.Array(_8)){_8=_8[0]}
_1=isc.Canvas.$70o(_7,null,{state:_8});if(_1==null){var _13=_7.substring(0,_7.lastIndexOf("."));if(!isc.Canvas.$1683(_13,null,{state:_8})){this.logWarn(this.getClassName()+" taskInputExpression path "+_7+" not found in previous task output")}}}}else{_1=_8}}else if(_1.startsWith("$ruleScope.")||_1.startsWith("$scope.")){if(!_4.ruleScope){this.logWarn("Attempt to reference ruleScope in taskInputExpression but no ruleScope has been defined");_1=null}else{var _14=window[_4.ruleScope];if(!_14||_14.destroyed){this.logWarn("Attempt to reference ruleScope in taskInputExpression but ruleScope not found: "+_4.ruleScope);_1=null}else{var _7=_1.replace("$ruleScope","").replace("$scope","");if(_7.startsWith("."))_7=_7.substring(1);_1=_14.$1671(_7)}}}else if(_1=="$state"){_1=_4.state}else if(_1.startsWith("$state.")){var _7=_1.substring(1);_1=isc.Canvas.$70o(_7,null,{state:_4.state})}}else if((_6==null||_6==2)&&isc.isAn.Object(_1)&&_1.text){var _14=window[_4.ruleScope];if(!_14||_14.destroyed){this.logWarn("Attempt to resolve ruleScope references in textFormula but ruleScope not found: "+_4.ruleScope);_1=null}else{var _15=_4.getLastTaskOutput(),_16=_4.getLastTaskOutputSchema(null,true),_17=false;if(_15!=null&&_16){if(isc.isAn.Array(_15)){_15=_15[0]}
_14.provideRuleContext(this.$2345,_15,_16,null,true);_17=true}
if(_1.$2370==null){var _18=(_1.formulaVars?isc.ClassFactory.getClass("FormulaBuilder"):isc.ClassFactory.getClass("SummaryBuilder"));_1.$2370=_18.generateRuleScopeFunction(_1,_14.getID(),null,null,false)}
if(_1.$2370){var _19=_1,_20=_19.text;_1=null;if(_19.summaryVars){var _21=_19.summaryVars;for(var _22 in _21){var _23="#{"+_21[_22]+"}";_20=isc.FormulaBuilder.handleKeyExp(_20,_22,"escaped",_23);_20=isc.FormulaBuilder.handleKeyExp(_20,_22,"braced",_23)}
_19.text=_20}
var _24=_14.getRuleContext();_1=_19.$2370(_24)}
if(_17){_14.provideRuleContext(this.$2345,null,null,null,true)}}}
return _1},isc.A.objectReferencesLastTaskOutput=function isc_ProcessElement_objectReferencesLastTaskOutput(_1,_2){var _3;if(_2){for(var _4 in _1){var _5=_1[_4];if(isc.isA.String(_5)&&_5.startsWith("$last")){_3=true;break}}}
return _3},isc.A.updateGlobalIDReferences=function isc_ProcessElement_updateGlobalIDReferences(_1,_2){return false},isc.A.updateGlobalIDInValueProperty=function isc_ProcessElement_updateGlobalIDInValueProperty(_1,_2,_3){var _4=false;if(this[_1]){var _5=this[_1];if(isc.isA.String(_5)){var _6=_5.replace("$ruleScope."+_2+".","$ruleScope."+_3+".").replace("$scope."+_2+".","$scope."+_3+".")
if(_5!=_6){this[_1]=_6;_4=true}}}
return _4},isc.A.updateGlobalIDInValues=function isc_ProcessElement_updateGlobalIDInValues(_1,_2,_3){var _4=false;if(_1){for(var _5 in _1){var _6=_1[_5];if(_6!=null&&isc.isA.String(_6)){var _7=_6.replace("$ruleScope."+_2+".","$ruleScope."+_3+".").replace("$scope."+_2+".","$scope."+_3+".");if(_6!=_7){_1[_5]=_7;_4=true}}}}
return _4},isc.A.updateGlobalIDInCriteria=function isc_ProcessElement_updateGlobalIDInCriteria(_1,_2,_3){if(!_1)return false;var _4=[{pattern:new RegExp("^\\$ruleScope\\."+_2+"\\."),replacement:"$ruleScope."+_3+"."},{pattern:new RegExp("^\\$scope\\."+_2+"\\."),replacement:"$scope."+_3+"."}];return this.$2119(_1,_4)},isc.A.$2119=function isc_ProcessElement__replaceCriteriaValues(_1,_2){var _3=_1.operator,_4=false;if(_3=="and"||_3=="or"){var _5=_1.criteria;for(var i=0;i<_5.length;i++){if(this.$2119(_5[i],_2)){_4=true}}}else{for(var i=0;i<_2.length;i++){var _7=_2[i];if(_1.value!=null&&isc.isA.String(_1.value)){var _8=_1.value.replace(_7.pattern,_7.replacement);if(_1.value!=_8){_1.value=_8;_4=true}}}}
return _4},isc.A.updateLastElementBindingReferences=function isc_ProcessElement_updateLastElementBindingReferences(_1){return false},isc.A.updateLastElementInValueProperty=function isc_ProcessElement_updateLastElementInValueProperty(_1,_2){var _3=false;if(this[_1]){var _4=this[_1],_5=_4.replace("$last.","$last["+_2+"].");if(_4!=_5){this[_1]=_5;_3=true}}
return _3},isc.A.updateLastElementInValues=function isc_ProcessElement_updateLastElementInValues(_1,_2){var _3=false;if(_1){for(var _4 in _1){var _5=_1[_4],_6=_5.replace("$last.","$last["+_2+"].");if(_5!=_6){_1[_4]=_6;_3=true}}}
return _3},isc.A.updateLastElementInCriteria=function isc_ProcessElement_updateLastElementInCriteria(_1,_2){if(!_1)return false;var _3=[{pattern:new RegExp("^\\$last\\."),replacement:"$last["+_2+"]."}];var _4=this.$178b(_1,_3);return this.$2119(_1,_3)||_4},isc.A.$178b=function isc_ProcessElement__replaceCriteriaFieldName(_1,_2){var _3=_1.operator,_4=false;if(_3=="and"||_3=="or"){var _5=_1.criteria;for(var i=0;i<_5.length;i++){if(this.$2119(_5[i],_2)){_4=true}}}else{for(var i=0;i<_2.length;i++){var _7=_2[i];if(_1.value!=null){var _8=_1.fieldName.replace(_7.pattern,_7.replacement);if(_1.fieldName!=_8){_1.fieldName=_8;_4=true}}}}
return _4},isc.A.getDynamicValue=function isc_ProcessElement_getDynamicValue(_1,_2){if(_1){var _3=this.$1950({value:_1},null,null,_2);_1=_3.value}
return _1},isc.A.$2143=function isc_ProcessElement__getSummaryFunction(_1,_2,_3){if(this.$176p==null){this.$176p=isc.SummaryBuilder.generateRuleScopeFunction(_1,_2,_3)}
return this.$176p},isc.A.getTextFormulaValue=function isc_ProcessElement_getTextFormulaValue(_1,_2){var _3;if(_1){var _4=_1,_5=_4.text;if(_4.summaryVars){var _6=_4.summaryVars;for(var _7 in _6){var _8="#{"+_6[_7]+"}";_5=isc.FormulaBuilder.handleKeyExp(_5,_7,"escaped",_8);_5=isc.FormulaBuilder.handleKeyExp(_5,_7,"braced",_8)}
_4={text:_5}}
var _9,_10=false;if(_2.ruleScope){_9=window[_2.ruleScope];if(!_9||_9.destroyed){this.logWarn("Attempt to resolve ruleScope references in textFormula but ruleScope not found: "+_2.ruleScope)}else{var _11=_2.getLastTaskOutput(),_12=_2.getLastTaskOutputSchema(null,true);if(_11!=null&&_12){_9.provideRuleContext(this.$2345,_11,_12,null,true);_10=true}
var _13=this.$2143(_4,_2.ruleScope);if(_13){var _14=_9.getRuleContext();_3=_13(_14)}
if(_10){_9.provideRuleContext(this.$2345,null,null,null,true)}}}}
return _3});isc.B._maxIndex=isc.C+22;isc.ProcessElement.registerStringMethods({completeElement:"process",reset:""});isc.defineClass("ProcessSequence","ProcessElement");isc.ProcessSequence.addProperties({})
isc.defineClass("Task","ProcessElement");isc.A=isc.Task.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.editorType="TaskEditor";isc.B.push(isc.A.$1968=function isc_Task__resolveInputField(_1,_2){if(_1==null)return null;var _3;if(_1.startsWith("$"))_3=this.$1951(_1,null,null,_2);else _3=_2.getStateVariable(_1);return _3},isc.A.$1952=function isc_Task__writeOutputExpression(_1){var _2=this.outputExpression;if(!_2)return;if(_2.startsWith("$")){_2=_2.substring(1);var _3=_2;var _4;var _5=_3.indexOf(".");if(_5>0){_3=_3.substring(0,_5);_4=_3.substring(_5+1)}
var _6=isc.Canvas.getById(_3);if(_6){if(_4){if(!isc.isAn.Array(_1)){if(isc.isA.DynamicForm(_6)){_6.setFieldValue(_4,_1)}else if(isc.isA.ListGrid(_6)&&_6.canEdit){var _7=_6.getEditRow();if(_7!=null){_6.setEditValue(_7,_4,_1)}else{var _8=_6.getSelectedRecords();if(_8!=null&&_8.length==1){var _9=_6.getRecordIndex(_8[0]);_6.setEditValue(_9,_4,_1)}}}else{this.logWarn("outputExpression target is not a supported DBC or is not editable - ignored: "+_2)}}else{this.logWarn("Task output is not supported by outputExpression target - ignored: "+_2)}}else{if(_6.setValues){var _10=(isc.isAn.Array(_1)?_1[0]:_1);if(isc.isAn.Object(_10)){_6.setValues(_10)}else{this.logWarn("task output is not an object and cannot be written with outputExpression - ignored: "+_2)}}else if(_6.setData){if(isc.isAn.Array(_1)||isc.isAn.Object(_1)){if(!isc.isAn.Array(_1))_1=[_1];_6.setData(_1)}else{this.logWarn("task output is not an object and cannot be written with outputExpression - ignored: "+_2)}}else{this.logWarn("outputExpression target is not a supported DBC - ignored: "+_2)}}}else{this.logWarn("outputExpression DBC not found - ignored: "+_2)}}else{this.logWarn("Invalid outputExpression - ignored: "+_2)}},isc.A.updateLastElementBindingReferences=function isc_Task_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.updateLastElementInValueProperty("inputField",_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_Task_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.updateGlobalIDInValueProperty("inputField",_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("Process");isc.A=isc.Process;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$27q={};isc.A.decisionPlaceholderSelection="[placeholder]";isc.B.push(isc.A.loadProcess=function isc_c_Process_loadProcess(_1,_2){var _3=function(_9,_10,_11){var _4=_10&&isc.Class.evaluate(_10),_5;if(_4==null||_4.length==0){isc.logWarn("Unable to load process(es): "+_1+". These should be defined in  *.proc.xml files at the search path  specified by \"project.processes\".")}else{if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_4.length;i++){var p=isc.Class.evaluate(_4[i].source);if(p.ID!=_1[i])p.setID(_1[i]);if(i==0)_5=p}}
if(_2)this.fireCallback(_2,"process",[_5])};var _8=isc.isAn.Array(_1)?_1.join():_1;return isc.RPCManager.$226t({screenName:_8,type:"processes",structuredResponse:true},_3)},isc.A.getProcess=function isc_c_Process_getProcess(_1){return isc.Process.$27q[_1]});isc.B._maxIndex=isc.C+2;isc.A=isc.Process.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoStart=false;isc.A.$2346=isc.$ag+"lastTask";isc.B.push(isc.A.init=function isc_Process_init(){var _1=this.Super("init",arguments);this.cacheInstance();var _2=this.sequence||this.Sequence;if(_2){if(!this.sequences)this.sequences=[];this.sequences.addAt({_constructor:"ProcessSequence",elements:_2},0);delete this.sequence;delete this.Sequence}
if(this.autoStart)this.start();return _1},isc.A.destroy=function isc_Process_destroy(){if(this.elements)this.elements.callMethod("destroy");if(this.sequences)this.sequences.callMethod("destroy");if(this.ID)delete isc.Process.$27q[this.ID];this.Super("destroy",arguments)},isc.A.setID=function isc_Process_setID(_1){this.ID=_1;this.cacheInstance()},isc.A.cacheInstance=function isc_Process_cacheInstance(){if(this.ID){var _1=isc.Process.$27q;var _2=_1[this.ID];if(_2!=null&&_2.destroy){_2.destroy()}
_1[this.ID]=this}},isc.A.instantiateElements=function isc_Process_instantiateElements(){if(this.elements)this.elements=this.$1972(this.elements);if(this.sequences)this.sequences=this.$1972(this.sequences)},isc.A.$1972=function isc_Process__instantiateElements(_1){var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i];_2[i]=_4;if(isc.isAn.Object(_4)){if(_4._constructor&&!isc.isAn.Instance(_4)){_2[i]=isc.ClassFactory.newInstance(_4)}
if(_4.elements){_2[i].elements=this.$1972(_4.elements)}}}
return _2},isc.A.getElement=function isc_Process_getElement(_1){return this.$87g(this,_1)},isc.A.$87g=function isc_Process__searchElement(_1,_2){if(_1.sequences){for(var i=0;i<_1.sequences.length;i++){var s=_1.sequences[i];if(s.ID==_2){return s}else if(s.sequences||s.elements){var _5=this.$87g(s,_2);if(_5)return _5}}}
if(_1.elements){for(var i=0;i<_1.elements.length;i++){var e=_1.elements[i];if(e.ID==_2){return e}else if(e.sequences||e.elements){var _5=this.$87g(e,_2);if(_5)return _5}}}},isc.A.getAllElements=function isc_Process_getAllElements(_1,_2){if(!this.initializedElements){this.instantiateElements();this.initializedElements=true}
if(!_1)_1=this;if(!_2)_2=[];if(_1.sequences){for(var i=0;i<_1.sequences.length;i++){var s=_1.sequences[i];_2.add(s);if(s.sequences||s.elements){this.getAllElements(s,_2)}}}
if(_1.elements){for(var i=0;i<_1.elements.length;i++){var e=_1.elements[i];_2.add(e);if(e.sequences||e.elements){this.getAllElements(e,_2)}}}
return _2},isc.A.removeElement=function isc_Process_removeElement(_1){this.$197u(this,_1)},isc.A.$197u=function isc_Process__removeElement(_1,_2){if(_1.sequences){for(var i=0;i<_1.sequences.length;i++){var s=_1.sequences[i];if(s==_2){_1.sequences.removeAt(i);return true}
if(s.sequences||s.elements){if(this.$197u(s,_2))return true}}}
if(_1.elements){for(var i=0;i<_1.elements.length;i++){var e=_1.elements[i];if(e==_2){_1.elements.removeAt(i);return true}
if(e.sequences||e.elements){if(this.$197u(e,_2))return true}}}},isc.A.addElement=function isc_Process_addElement(_1,_2,_3){if(_2||_3){this.$1959(this,_1,_2,_3)}else{if(!this.elements)this.elements=[];this.elements.add(_1)}},isc.A.$1959=function isc_Process__addElement(_1,_2,_3,_4){if(_1.sequences){for(var i=0;i<_1.sequences.length;i++){var s=_1.sequences[i];if(_3&&s==_3){var _7=i+1;_1.sequences.add(_2,_7);return true}else if(_4&&s==_4){var _7=i;_1.sequences.add(_2,_7);return true}
if(s.sequences||s.elements){if(this.$1959(s,_2,_3,_4))return true}}}
if(_1.elements){for(var i=0;i<_1.elements.length;i++){var e=_1.elements[i];if(_3&&e==_3){var _7=i+1;_1.elements.add(_2,_7);return true}else if(_4&&e==_4){var _7=i;_1.elements.add(_2,_7);return true}
if(e.sequences||e.elements){if(this.$1959(e,_2,_3,_4))return true}}}},isc.A.setState=function isc_Process_setState(_1){this.state=_1},isc.A.start=function isc_Process_start(){if(!this.initializedElements){this.instantiateElements();this.$1953=this.startElement;this.initializedElements=true}
if(this.executionStack==null){if(this.logIsInfoEnabled("workflow")){this.logInfo("Start process","workflow")}else if(this.logIsDebugEnabled("workflow")){this.logDebug("Start process: "+this.echo(this),"workflow")}}
if(this.executionStack==null){this.executionStack=[]}
if(this.state==null)this.state={};while(this.$39n()){var _1=this.$87h();if(_1){this.$104r=true;var _2=this.getLastTaskOutputIterator(_1);while(_2.hasNext()){_2.next();if(!_1.executeElement(this)){_2.done();return}
if(_1.forceSingle){break}}
_2.done()}}
this.destroyLastTaskOutputSchema();this.handleFinished();if(this.logIsInfoEnabled("workflow")){this.logInfo("Process finished","workflow")}else if(this.logIsDebugEnabled("workflow")){this.logDebug("Process finished: "+this.echo(this),"workflow")}},isc.A.getLastTaskOutputIterator=function isc_Process_getLastTaskOutputIterator(_1){var _2=this.$2347(),_3=(_2?_2.value:null),_4=(isc.isAn.Array(_3)?_3:[_3]),_5=0,_6=_4.length;if((!_1.supportsMultipleInputRecords||_1.forceSingle)&&_4.length>0)
{_4=[_4[0]];_6=1}
return{hasNext:function(){return(_5<_6)},next:function(){if(_5<_6){if(_2&&_5>0){_2.value=_4[_5]}
return _4[_5++]}
return null},done:function(){if(_2&&_5>0){_2.value=_3}}}},isc.A.reset=function isc_Process_reset(_1){this.state=_1;this.executionStack=null;this.$1953=this.startElement;this.setLastTaskClass(null);this.$1954=null;this.$104r=false;var _2=this.getAllElements();for(var i=0;i<_2.length;i++){var _4=_2[i];if(_4.reset){_4.reset()}}},isc.A.handleFinished=function isc_Process_handleFinished(){if(this.finished){delete this.$1953;this.finished(this.state)}},isc.A.finished=function isc_Process_finished(){},isc.A.$39n=function isc_Process__next(_1){var _2=this.executionStack.last();if(_2==null){if(this.$223k){var _3=this.$223k;if(_3.completeElement){_3.completeElement(this)}
delete this.$223k}
if(this.$1953){var _4=this.$87i(this,this.$1953);if(_4==null){isc.logWarn("unable to find task '"+this.$1953+"' - process will be finished")}
return _4}else if(this.$104r){return null}else if(this.sequences&&this.sequences.length>0){this.executionStack.add({el:this,sIndex:0});return this.sequences[0]}else if(this.elements&&this.elements.length>0){this.executionStack.add({el:this,eIndex:0});return this.elements[0]}else if(!_1){isc.logWarn("There are neither sequences or elements. Nothing to execute.")}}else{var _3=null;if(_2.sIndex!=null){_3=_2.el.sequences[_2.sIndex]}else if(_2.eIndex!=null){_3=_2.el.elements[_2.eIndex]}
if(_3.completeElement){_3.completeElement(this)}
if(_3.getClassName)this.setLastTaskClass(_3.getClassName());if(_3.nextElement){this.executionStack=[];var _4=this.$87i(this,_3.nextElement);if(_4==null){isc.logWarn("unable to find task '"+_3.nextElement+"' - process will be finished")}
return _4}else{return this.$87j()}}},isc.A.$87i=function isc_Process__gotoElement(_1,_2){var _3={el:_1};this.executionStack.add(_3);if(_1.sequences){for(var i=0;i<_1.sequences.length;i++){var s=_1.sequences[i];_3.sIndex=i;if(s.ID==_2){return s}else if(s.sequences||s.elements){var _6=this.$87i(s,_2);if(_6)return _6}}}
delete _3.sIndex;if(_1.elements){for(var i=0;i<_1.elements.length;i++){var e=_1.elements[i];_3.eIndex=i;if(e.ID==_2){return e}else if(e.sequences||e.elements){var _6=this.$87i(e,_2);if(_6)return _6}}}
this.executionStack.removeAt(this.executionStack.length-1)},isc.A.$87j=function isc_Process__findNextElement(){var _1=this.executionStack.last();if(_1.eIndex!=null&&_1.el!=this){if(_1.eIndex==_1.el.elements.length-1){this.executionStack.removeAt(this.executionStack.length-1);if(_1.el==this){return}else{return this.$87j()}}else{_1.eIndex++;return _1.el.elements[_1.eIndex]}}},isc.A.$87h=function isc_Process__getFirstTask(_1){var _2=this.executionStack.last();var _3=null;if(_2.sIndex!=null){_3=_2.el.sequences[_2.sIndex]}else if(_2.eIndex!=null){_3=_2.el.elements[_2.eIndex]}
if(_3.sequences==null&&_3.elements==null){if(!_1)this.handleTraceElement(_3);return _3}
var _4={el:_3};this.executionStack.add(_4);if(_3.sequences){for(var i=0;i<_3.sequences.length;i++){_4.sIndex=i
var _6=this.$87h(_3.sequences[i]);if(_6){this.handleTraceElement(_6);return _6}}}
if(_3.elements){for(var i=0;i<_3.elements.length;i++){_4.eIndex=i
var _6=this.$87h(_3.elements[i]);if(_6){if(_4.eIndex==0)this.handleTraceElement(_4.el);this.handleTraceElement(_6);return _6}}}
this.executionStack.removeAt(this.executionStack.length-1)},isc.A.setNextElement=function isc_Process_setNextElement(_1){var _2=this.executionStack.last(),_3=null;if(_2.sIndex!=null){_3=_2.el.sequences[_2.sIndex]}else if(_2.eIndex!=null){_3=_2.el.elements[_2.eIndex]}
this.setLastTaskClass(_3.getClassName());this.executionStack=[];this.$1953=_1;this.$223k=_3},isc.A.setStateVariable=function isc_Process_setStateVariable(_1,_2){if(!this.state)this.state={};if(_1.indexOf(".")<0||this.state[_1]){this.state[_1]=_2}else{var _3=_1.split(".");var _4=this.state;for(var i=0;i<_3.length-1;i++){var _6=_4[_3[i]];if(_6==null){_4[_3[i]]={}
_6=_4[_3[i]]}
_4=_6}
_4[_3[i]]=_2}},isc.A.getStateVariable=function isc_Process_getStateVariable(_1){if(_1.indexOf(".")<0||this.state[_1]){return this.state[_1]}else{var _2=_1.split(".");var _3=this.state;for(var i=0;i<_2.length-1;i++){_3=_3[_2[i]];if(_3==null){isc.logWarn("Unable to get state variable: "+_1+" no such path")
return}}
return _3[_2[i]]}},isc.A.setLastTaskClass=function isc_Process_setLastTaskClass(_1){this.$1955=_1},isc.A.getLastTaskClass=function isc_Process_getLastTaskClass(){return this.$1955},isc.A.setTaskOutput=function isc_Process_setTaskOutput(_1,_2,_3){if(!_1)return;var _4=_1.getClassName().toLowerCase(),_5=_1.ID;_3=_3||_1;var _6={task:_1,value:_2,schemaTask:_3};if(!this.$1954)this.$1954={};this.$1954[_4]=_6;if(_5!=null)this.$1954[_5]=_6;if(_1.bindOutput){var _7=_1.bindOutput;if(_7.startsWith("$"))_7=_7.substring(1);this.setStateVariable(_7,_2)}},isc.A.passThruTaskOutput=function isc_Process_passThruTaskOutput(_1){var _2=this.$2347();this.setTaskOutput(_1,this.getLastTaskOutput(),_2&&_2.schemaTask)},isc.A.getLastTaskOutput=function isc_Process_getLastTaskOutput(_1){var _2=this.$2347(_1);return _2&&_2.value},isc.A.$2347=function isc_Process__getLastTaskOutput(_1){if(!this.$1954)return null;var _2=_1;if(!_1)_1=this.getLastTaskClass();if(!_1)return null;_1=_1.toLowerCase();if(_2)_2=_2.toLowerCase();var _3=this.$1954[_1];if(_2!=null&&_3==null&&!_2.endsWith("task")&&!_2.endsWith("gateway")){_1=_2+"task";_3=this.$1954[_1];if(_3==null){_1=_2+"gateway";_3=this.$1954[_1]}}
return _3},isc.A.getLastTaskOutputSchema=function isc_Process_getLastTaskOutputSchema(_1,_2){var _3=this.$2347(_1),_4=_3&&_3.schemaTask,_5=(_4&&_4.getOutputSchema?_4.getOutputSchema():null),_6=_5;if(_5&&_2){_6=isc.DS.get(this.$2346);if(!_6||_6.inheritsFrom!=_5.getID()){if(_6)_6.destroy();var _7;if(!_5.getID()){_7=[];var _8=_5.getFieldNames();for(var i=0;i<_8.length;i++){var _10=_8[i],_11=_5.getField(_10);_7.add(isc.clone(_11))}}
_6=isc.DS.create({ID:this.$2346,inheritsFrom:_5.getID(),fields:_7,clientOnly:true,addGlobalId:false})}}
return _6},isc.A.destroyLastTaskOutputSchema=function isc_Process_destroyLastTaskOutputSchema(){var _1=isc.DS.get(this.$2346);if(_1&&_1.destroy){_1.destroy()}},isc.A.handleTraceElement=function isc_Process_handleTraceElement(_1){if(isc.isA.Class(_1)&&(this.logIsInfoEnabled("workflow")||this.logIsDebugEnabled("workflow")))
{var _2=_1.getElementDescription(),_3=(this.traceElement?"Trace element: ":"Execute element: ")+_1._constructor+(_2?" '"+_2+"'":"");if(this.logIsDebugEnabled("workflow")){this.logDebug(_3+" - task detail: "+this.echo(_1),"workflow")}else{this.logInfo(_3,"workflow")}}
if(this.traceElement)this.traceElement(_1,this.traceContext)});isc.B._maxIndex=isc.C+35;isc.Process.registerStringMethods({finished:"state",traceElement:"element,context"});isc.defineClass("ServiceTask","Task");isc.A=isc.ServiceTask;isc.A.requiresDataSources=true;isc.A=isc.ServiceTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.operationType="fetch";isc.A.passThruOutput=false;isc.A.typeTitle="DataSource Fetch Data";isc.A.editorType="ServiceTaskEditor";isc.B.push(isc.A.executeElement=function isc_ServiceTask_executeElement(_1){var _2=this.dataSource;if(_2.getClassName==null||_2.getClassName()!="DataSource"){_2=isc.DataSource.get(_2)}
var _3=this.$1956(_1);if(this.operationType=="export"){var _4={exportAs:this.exportFormat,operationId:this.operationId};_2.exportData(_3,_4);return true}
var _5=isc.addProperties({},this.requestProperties,{operationId:this.operationId});_5.willHandleError=true;var _6=this,_7=this.operationType;_2.performDSOperation(_7,_3,function(_19,_20,_21){var _8=_19.results,_9=_21.operation;if(_19.isStructured&&(!_8||_8.status<0||(_8.status==null&&_19.status<0)))
{if(!isc.RPC.runDefaultErrorHandling(_19,_21,_6.errorFormatter)){_6.fail(_1);return}}
var _10=_20;if(isc.isAn.Array(_20)&&_20.length>0){if(_7=="fetch"){var _11=_2.getPrimaryKeyFieldName();if(_2.isAdvancedCriteria(_3)){var _12=_2.getFieldCriterion(_3,_11);if(_12&&_12.operator=="equals"){_10=_20[0]}}else if(_2.defaultTextMatchStyle=="equals"&&_3[_11]!=null){_10=_20[0]}}else if(_7!="custom"){_10=_20[0]}}
_1.setTaskOutput(_6,_10);if(!isc.isAn.Array(_20))_20=[_20];if(_20.length>0){var _13=[];if(_6.outputFieldList){_13.addList(_6.outputFieldList)}
if(_6.outputField)_13.add(_6.outputField);for(var i=0;i<_13.length;i++){var _15=_13[i];if(_15.startsWith("$")){var _16=_20.length==1?_20[0]:_20;_15=_15.substring(1);_1.setStateVariable(_15,_16)}else{var _17=_15;var _18=_17.lastIndexOf(".");if(_18>0){_17=_17.substring(_18+1)}
var _16=_20[0][_17];if(typeof _16!='undefined'){if(_20.length>1){_16=[_16];for(var i=1;i<_20.length;i++){_16.add(_20[i][_17])}}
_1.setStateVariable(_15,_16)}}};_6.$1952(_20)}
_1.start()},_5);return false},isc.A.$1956=function isc_ServiceTask__createRequestData(_1,_2){var _3;var _4={};if(this.inputFieldList){for(var i=0;i<this.inputFieldList.length;i++){var _6=this.inputFieldList[i];var _7=_6.lastIndexOf(".");if(_7>0){_6=_6.substring(_7+1)}
_4[_6]=_1.getStateVariable(this.inputFieldList[i])}}
if(this.inputField){var _6=this.inputField;if(!_2&&_6.startsWith("$")){_3=this.$1968(_6,_1)}
var _7=_6.lastIndexOf(".");if(_7>0){_6=_6.substring(_7+1)}
if(_3==null)_3=_1.getStateVariable(this.inputField);_4[_6]=_3}
var _8=null;if(this.operationType=="fetch"||this.operationType=="export"){if(this.criteria&&!_2){_8=this.$195y(this.criteria,_3,_4,_1)}else if(this.criteria){_8=this.criteria}
if(this.fixedCriteria){if(_8==null&&_4==null){_8=this.fixedCriteria}else{var _9=isc.clone(this.fixedCriteria);if(_4){_9=isc.DataSource.combineCriteria(_4,_9)}
if(_8){_9=isc.DataSource.combineCriteria(_8,_9)}
_8=_9}}}
if(_8==null){_8=(this.inputFieldList==null&&isc.isAn.Object(_3)?_3:_4)}
if(this.operationType!="fetch"&&this.operationType!="export"){if(this.values){_8=this.values;if(!_2){_8=this.$1950(this.values,_3,_4,_1)}}
if(this.fixedValues){for(var _6 in this.fixedValues){_8[_6]=this.fixedValues[_6]}}}
return _8},isc.A.fail=function isc_ServiceTask_fail(_1){if(!this.failureElement){this.logInfo("ServiceTask does not have a failureElement. Process is aborting.")}
if(this.failureElement=="next"){_1.start()}else{_1.setNextElement(this.failureElement)}},isc.A.errorFormatter=function isc_ServiceTask_errorFormatter(_1,_2,_3){if(_1=="VALIDATION_ERROR"){var _4=_2.errors,_5=["Server returned validation errors:<BR><UL>"];if(!isc.isAn.Array(_4))_4=[_4];for(var i=0;i<_4.length;i++){var _7=_4[i];for(var _8 in _7){var _9=_7[_8];_5.add("<LI><B>"+_8+":</B> ");if(!isc.isAn.Array(_9))_9=[_9];for(var j=0;j<_9.length;j++){var _11=_9[j];_5.add((j>0?"<BR>":"")+(isc.isAn.Object(_11)?_11.errorMessage:_11))}
_5.add("</LI>")}}
_5.add("</UL>");return _5.join("")}
return null},isc.A.getElementDescription=function isc_ServiceTask_getElementDescription(){if(!this.dataSource)return"";var _1=this.operationType.substring(0,1).toUpperCase()+this.operationType.substring(1);if(this.operationId)_1+=" ("+this.operationId+")";var _2=_1+" "+this.dataSource,_3=this.$1956({getStateVariable:function(_6){return _6}},true);if(this.operationType=="fetch"||this.operationType=="remove"||this.operationType=="export"){if(_3&&!isc.isAn.emptyObject(_3)){if(!isc.DS.isAdvancedCriteria(_3)){_3=isc.DS.convertCriteria(_3,(this.operationType=="remove"?"exact":null))}
var _4=isc.DecisionTask.$87n(_3);var _5=isc.DataSource.create({addGlobalId:false,fields:_4});_2+=" where <ul>"+isc.DataSource.getAdvancedCriteriaDescription(_3,_5,null,{prefix:"<li>",suffix:"</li>"})+"</ul>";_5.destroy()}else{_2=_1+" all "+this.dataSource+" records"}}else{_2+=" record"}
return _2},isc.A.getOutputSchema=function isc_ServiceTask_getOutputSchema(){var _1=this.dataSource;if(_1&&(_1.getClassName==null||_1.getClassName()!="DataSource")){_1=isc.DataSource.get(_1)}
return _1},isc.A.updateLastElementBindingReferences=function isc_ServiceTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);if(this.criteria&&(this.operationType=="fetch"||this.operationType=="export")){_2=this.updateLastElementInCriteria(this.criteria,_1)||_2}
if(this.values&&this.operationType!="fetch"&&this.operationType!="export"){_2=this.updateLastElementInValues(this.values,_1)||_2}
return _2},isc.A.updateGlobalIDReferences=function isc_ServiceTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.criteria&&(this.operationType=="fetch"||this.operationType=="export")){_3=this.updateGlobalIDInCriteria(this.criteria,_1,_2)||_3}
if(this.values&&this.operationType!="fetch"&&this.operationType!="export"){_3=this.updateGlobalIDInValues(this.values,_1,_2)||_3}
return _3});isc.B._maxIndex=isc.C+8;isc.defineClass("DSFetchTask","ServiceTask");isc.A=isc.DSFetchTask.getPrototype();isc.A.typeTitle="DataSource Fetch";isc.A.classDescription="Retrieve data from a DataSource which match specified criteria";isc.A.editorType="ServiceTaskEditor";isc.A.editorProperties={showOperationTypePicker:false};isc.A.operationType="fetch";isc.defineClass("DSAddTask","ServiceTask");isc.A=isc.DSAddTask.getPrototype();isc.A.typeTitle="DataSource Add";isc.A.classDescription="Add a new record";isc.A.editorType="DSAddTaskEditor";isc.A.editorProperties={showOperationTypePicker:false};isc.A.operationType="add";isc.defineClass("DSUpdateTask","ServiceTask");isc.A=isc.DSUpdateTask.getPrototype();isc.A.typeTitle="DataSource Update";isc.A.classDescription="Update an existing record";isc.A.editorType="DSUpdateTaskEditor";isc.A.editorProperties={showOperationTypePicker:false};isc.A.operationType="update";isc.defineClass("DSRemoveTask","ServiceTask");isc.A=isc.DSRemoveTask.getPrototype();isc.A.typeTitle="DataSource Remove";isc.A.classDescription="Remove an existing record";isc.A.editorType="ServiceTaskEditor";isc.A.editorProperties={showOperationTypePicker:false};isc.A.operationType="remove";isc.defineClass("ScriptTask","Task");isc.A=isc.ScriptTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.passThruOutput=false;isc.A.isAsync=false;isc.B.push(isc.A.getProcess=function isc_ScriptTask_getProcess(){return this._process},isc.A.getInputData=function isc_ScriptTask_getInputData(){return this.inputData},isc.A.setOutputData=function isc_ScriptTask_setOutputData(_1){this.$87l(this._process,null,_1)},isc.A.getInputRecord=function isc_ScriptTask_getInputRecord(){return this.inputRecord},isc.A.setOutputRecord=function isc_ScriptTask_setOutputRecord(_1){this.$87l(this._process,_1)},isc.A.executeElement=function isc_ScriptTask_executeElement(_1){var _2;var _3={};if(this.inputFieldList){for(var i=0;i<this.inputFieldList.length;i++){var _5=this.inputFieldList[i];var _6=_5.lastIndexOf(".");if(_6>0){_5=_5.substring(_6+1)}
var _7=_1.getStateVariable(this.inputFieldList[i]);_3[_5]=(!isc.isA.Class(_7)?isc.clone(_7):_7)}}
if(this.inputField){var _5=this.inputField;if(_5.startsWith("$")){var _7=this.$1968(_5,_1);_2=(!isc.isA.Class(_7)?isc.clone(_7):_7)}
var _6=_5.lastIndexOf(".");if(_6>0){_5=_5.substring(_6+1)}
if(_2==null){var _7=_1.getStateVariable(this.inputField);_2=(!isc.isA.Class(_7)?isc.clone(_7):_7)}
_3[_5]=_2}
this.inputData=_2;this.inputRecord=_3;this._process=_1;try{var _8=this.execute(_2,_3)}catch(e){isc.logWarn("Error while executing ScriptTask: "+e.toString())}
if(this.isAsync){return false}
if(typeof _8=='undefined'){return true}
this.$87m(_1,_8);return true},isc.A.$87m=function isc_ScriptTask__processTaskOutput(_1,_2){_1.setTaskOutput(this,_2);if(this.outputFieldList){for(var i=0;i<this.outputFieldList.length;i++){var _4=this.outputFieldList[i];var _5=_4.lastIndexOf(".");if(_5>0){_4=_4.substring(_5+1)}
var _6=_2[_4];if(typeof _6!='undefined'){_1.setStateVariable(this.outputFieldList[i],_6)}}}
if(this.outputField){if(this.outputFieldList==null){if(typeof _2!='undefined'){_1.setStateVariable(this.outputField,_2)}}else{var _4=this.outputField;var _5=_4.lastIndexOf(".");if(_5>0){_4=_4.substring(_5+1)}
var _6=_2[_4];if(typeof _6!='undefined'){_1.setStateVariable(this.outputField,_6)}}}
this.$1952(_2)},isc.A.$87l=function isc_ScriptTask__finishTask(_1,_2,_3){if(_2==null){this.$87m(_1,_3)}else{if(_3){var _4=this.outputField;var _5=_4.lastIndexOf(".");if(_5>0){_4=_4.substring(_5+1)}
_2[_4]=_3}
this.$87m(_1,_2)}
if(this.isAsync){_1.start()}},isc.A.getCustomDefaults=function isc_ScriptTask_getCustomDefaults(){return{execute:isc.Func.getBody(this.execute)}});isc.B._maxIndex=isc.C+9;isc.ScriptTask.registerStringMethods({execute:"input,inputRecord"});isc.defineClass("DecisionTask","ProcessElement");isc.A=isc.DecisionTask;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$90p=function isc_c_DecisionTask__processFieldsRecursivelyValuesOnly(_1){var _2=[];if(_1.fieldName){if(!_2.contains(_1.fieldName)){_2.add(_1.fieldName)}}else if(_1.criteria){for(var i=0;i<_1.criteria.length;i++){var _4=this.$90p(_1.criteria[i]);for(var j=0;j<_4.length;j++){if(!_2.contains(_4[j])){_2.add(_4[j])}}}}else{for(var _6 in _1){if(!_2.contains(_6)){_2.add(_6)}}}
return _2},isc.A.$87n=function isc_c_DecisionTask__processFieldsRecursively(_1){var _2=[];var _3=isc.DecisionTask.$90p(_1);for(var i=0;i<_3.length;i++){var _5=_3[i],_6=_5.split("."),_7=isc.DS.getAutoTitle(_6[_6.length-1]);_2.add({name:_5,title:_7})}
return _2});isc.B._maxIndex=isc.C+2;isc.A=isc.DecisionTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.typeTitle="Decision";isc.A.classDescription="Choose the next task based on criteria";isc.A.editorType="DecisionTaskEditor";isc.B.push(isc.A.executeElement=function isc_DecisionTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=_1.getLastTaskOutput();var _3=this.criteria;if(_3){_3=this.$195y(_3,_1.state,_1.state,_1)}
var _4=[];if(_1.state&&!isc.isAn.emptyObject(_1.state)){_4.add(_1.state)}
if(_2){_4.add({"$last":_2})}
if(_1.ruleScope){var _5=window[_1.ruleScope];if(_5&&!_5.destroyed){_4.add(_5.getRuleContext())}}
if(_3&&isc.DS.applyFilter(_4,_3).length==1){if(this.nextElement)_1.setNextElement(this.nextElement)}else{if(!this.failureElement){this.logInfo("DecisionTask does not have a failureElement. Process is aborting.")}
_1.setNextElement(this.failureElement)}
return true},isc.A.getElementDescription=function isc_DecisionTask_getElementDescription(){var _1="No criteria - always fail";if(this.criteria){var _2=isc.DecisionTask.$87n(this.criteria);var _3=isc.DataSource.create({addGlobalId:false,fields:_2});_1="when <ul>"+isc.DataSource.getAdvancedCriteriaDescription(this.criteria,_3,null,{prefix:"<li>",suffix:"</li>"})+"</ul>";_3.destroy()}
return _1},isc.A.getPlaceholders=function isc_DecisionTask_getPlaceholders(){return(this.failureElement==isc.Process.decisionPlaceholderSelection?["failureElement"]:null)},isc.A.setPlaceholderId=function isc_DecisionTask_setPlaceholderId(_1,_2){if(_1=="failureElement")this.failureElement=_2},isc.A.updateLastElementBindingReferences=function isc_DecisionTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.updateLastElementInCriteria(this.criteria,_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_DecisionTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.updateGlobalIDInCriteria(this.criteria,_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+6;isc.defineClass("XORGateway","DecisionTask");isc.defineClass("UserConfirmationTask","ProcessElement");isc.A=isc.UserConfirmationTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.typeTitle="Confirm with user";isc.A.classDescription="Choose the next task based on user confirmation";isc.A.editorType="UserConfirmationTaskEditor";isc.B.push(isc.A.executeElement=function isc_UserConfirmationTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.message,_1);var _3=this;isc.confirm(_2,function(_4){if(_4){if(_3.nextElement)_1.setNextElement(_3.nextElement)}else{if(!_3.failureElement){_3.logInfo("User Confirmation Gateway does not have a failureElement. Process is aborting.")}
_1.setNextElement(_3.failureElement)}
_1.start()});return false},isc.A.getElementDescription=function isc_UserConfirmationTask_getElementDescription(){var _1=(this.textFormula?this.textFormula.text:this.message)||"",_2=_1.split(" "),_3=_2.getRange(0,3).join(" ");if(_3.length>25)_3=_3.substring(0,25);if(_3!=_1)_3+=" ...";"Confirm with user: <br>"+_3},isc.A.getPlaceholders=function isc_UserConfirmationTask_getPlaceholders(){return(this.failureElement==isc.Process.decisionPlaceholderSelection?["failureElement"]:null)},isc.A.setPlaceholderId=function isc_UserConfirmationTask_setPlaceholderId(_1,_2){if(_1=="failureElement")this.failureElement=_2});isc.B._maxIndex=isc.C+4;isc.defineClass("UserConfirmationGateway","UserConfirmationTask");isc.defineClass("MultiDecisionTask","ProcessElement");isc.A=isc.MultiDecisionTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$1957=false;isc.A.typeTitle="Multi Decision";isc.A.classDescription="Choose multiple possible next tasks based on criteria";isc.A.editorType="MultiDecisionTaskEditor";isc.B.push(isc.A.executeElement=function isc_MultiDecisionTask_executeElement(_1){this.$197v();if(!this.decisionList)this.decisionList=[];var _2=_1.getLastTaskOutput();_1.passThruTaskOutput(this);for(var i=0;i<this.decisionList.length;i++){var _4=this.decisionList[i],_5=_4.criteria;if(_5){_5=this.$195y(_5,_1.state,_1.state,_1)}
var _6=isc.DecisionTask.$87n(_5);var _7=isc.DataSource.create({fields:_6});var _8=[];if(_1.state&&!isc.isAn.emptyObject(_1.state)){_8.add(_1.state)}
if(_2){_8.add({"$last":_2})}
if(_1.ruleScope){var _9=window[_1.ruleScope];if(_9&&!_9.destroyed){_8.add(_9.getRuleContext())}}
if(_7.applyFilter(_8,_5).length==1){_1.setNextElement(_4.targetTask);return true}}
if(this.defaultElement)_1.setNextElement(this.defaultElement);return true},isc.A.$197v=function isc_MultiDecisionTask__convertCriteriaMap(){if(!this.decisionList&&this.criteriaMap){var _1=[];for(var _2 in this.criteriaMap){_1.add({criteria:this.criteriaMap[_2],targetTask:_2})}
this.decisionList=_1}},isc.A.getElementDescription=function isc_MultiDecisionTask_getElementDescription(){this.$197v();var _1="Multi-branch";if((!this.decisionList||this.decisionList.length==0)&&this.defaultElement){_1="Go to "+this.defaultElement}
return _1},isc.A.dropElementReferences=function isc_MultiDecisionTask_dropElementReferences(_1){this.$197v();if(this.decisionList){var _2=[];for(var i=0;i<this.decisionList.length;i++){var _4=this.decisionList[i];if(_4.targetTask==_1)_2.add(_4)}
if(_2.length>0)this.decisionList.removeList(_2)}
if(this.defaultElement==_1)this.defaultElement=null},isc.A.updateElementReferences=function isc_MultiDecisionTask_updateElementReferences(_1,_2){this.$197v();if(this.decisionList){for(var i=0;i<this.decisionList.length;i++){var _4=this.decisionList[i];if(_4.targetTask==_1)_4.targetTask=_2}}
if(this.defaultElement==_1)this.defaultElement=_2},isc.A.getPlaceholders=function isc_MultiDecisionTask_getPlaceholders(){this.$197v();var _1=[];if(this.decisionList){for(var i=0;i<this.decisionList.length;i++){var _3=this.decisionList[i];if(_3.targetTask==isc.Process.decisionPlaceholderSelection){_1.add(""+i)}}}
if(this.defaultElement==isc.Process.decisionPlaceholderSelection){_1.add("defaultElement")}
return _1},isc.A.setPlaceholderId=function isc_MultiDecisionTask_setPlaceholderId(_1,_2){if(_1=="defaultElement"){this.defaultElement=_2}else{var _3=parseInt(_1);this.decisionList[_3].targetTask=_2}},isc.A.updateLastElementBindingReferences=function isc_MultiDecisionTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);if(this.decisionList){for(var i=0;i<this.decisionList.length;i++){var _4=this.decisionList[i],_5=_4.criteria;_2=this.updateLastElementInCriteria(this.criteria,_1)||_2}}
return _2},isc.A.updateGlobalIDReferences=function isc_MultiDecisionTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.decisionList){for(var i=0;i<this.decisionList.length;i++){var _5=this.decisionList[i],_6=_5.criteria;_3=this.updateGlobalIDInCriteria(_6,_1,_2)||_3}}
return _3});isc.B._maxIndex=isc.C+9;isc.defineClass("DecisionGateway","MultiDecisionTask");isc.DecisionGateway.addProperties({})
isc.defineClass("UserTask","Task");isc.A=isc.UserTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.passThruOutput=false;isc.A.editorType="UserTaskEditor";isc.B.push(isc.A.goToPrevious=function isc_UserTask_goToPrevious(){if(this.previousElement==null){isc.logWarn("PreviousElement is not set - unable to accomplish goToPrevious method.");return}
this._process.setNextElement(this.previousElement);this.completeEditing()},isc.A.cancelEditing=function isc_UserTask_cancelEditing(){if(this._process){if(this.wizard||this._process.wizard){if(this.targetFormValue){this.targetFormValue.hide()}else if(this.targetViewValue){this.targetViewValue.hide()}}
var _1=this._process
delete this._process;_1.setNextElement(this.cancelElement);_1.start()}},isc.A.completeEditing=function isc_UserTask_completeEditing(){if(this._process){var _1=this._process;delete this._process;if(this.wizard||_1.wizard){if(this.targetFormValue){this.targetFormValue.hide()}else if(this.targetViewValue){this.targetViewValue.hide()}}
var _2;if(this.targetVMValue){_2=this.targetVMValue.getValues()}else if(this.targetFormValue){_2=this.targetFormValue.getValues()}
if(_2!=null)_1.setTaskOutput(this,_2);if(this.outputField){_1.setStateVariable(this.outputField,_2)}else if(this.outputFieldList){for(var i=0;i<this.outputFieldList.length;i++){var _4=this.outputFieldList[i];var _5=_4.lastIndexOf(".");if(_5>0){_4=_4.substring(_5+1)}
var _6=_2[_4];if(typeof _6!='undefined'){_1.setStateVariable(this.outputFieldList[i],_6)}}}else if(this.inputField){_1.setStateVariable(this.inputField,_2)}
this.$1952(_2);_1.start()}},isc.A.executeElement=function isc_UserTask_executeElement(_1){this._process=_1;if(this.targetView&&isc.isA.String(this.targetView)){if(_1.getStateVariable(this.targetView)){this.targetViewValue=_1.getStateVariable(this.targetView)}else{this.targetViewValue=window[this.targetView];if(this.targetViewValue==null&&_1.views){for(var i=0;i<_1.views.length;i++){if(_1.views[i].ID==this.targetView){this.targetViewValue=isc[_1.views[i]._constructor].create(_1.views[i]);if(this._process.containerId){window[this._process.containerId].addMember(this.targetViewValue)}
break}}}
if(this.targetViewValue==null){this.targetViewValue=this.addAutoChild(this.targetView)}
if(this.targetViewValue==null){isc.logWarn("TargetView "+this.targetView+" was not found.")}}}else{if(this.targetView){this.targetViewValue=this.targetView}else if(this.inlineView){this.targetViewValue=isc[this.inlineView._constructor].create(this.inlineView);if(this._process.containerId){window[this._process.containerId].addMember(this.targetViewValue)}}}
if(this.targetVM&&isc.isA.String(this.targetVM)){if(_1.state[this.targetVM]){this.targetVMValue=_1.getStateVariable(this.targetVM)}else{this.targetVMValue=window[this.targetVM];if(this.targetVMValue==null){isc.logWarn("TargetVM "+this.targetVM+" was not found.")}}}else{this.targetVMValue=this.targetVM}
if(this.targetForm&&isc.isA.String(this.targetForm)){if(_1.state[this.targetForm]){this.targetFormValue=_1.getStateVariable(this.targetForm)}else{this.targetFormValue=window[this.targetForm];if(this.targetFormValue==null){isc.logWarn("TargetForm "+this.targetForm+" was not found.")}}}else{this.targetFormValue=this.targetForm}
if(this.targetFormValue==null&&isc.isA.DynamicForm(this.targetViewValue)){this.targetFormValue=this.targetViewValue}
if(this.targetViewValue==null){isc.logWarn("targetView, inlineView or targetForm should be set for UserTask");return true}
this.targetViewValue.showRecursively();var _3=null;if(this.inputField){if(this.inputField.startsWith("$")){_3=isc.clone(this.$1968(this.inputField,_1))}else{_3=isc.clone(_1.getStateVariable(this.inputField))}}else if(this.inputFieldList){_3={};for(var i=0;i<this.inputFieldList.length;i++){var _4=this.inputFieldList[i];var _5=_4.lastIndexOf(".");if(_5>0){_4=_4.substring(_5+1)}
_3[_4]=isc.clone(_1.getStateVariable(this.inputFieldList[i]))}}
if(this.targetVMValue){if(_3)this.targetVMValue.setValues(_3);this.targetVMValue.userTask=this}
if(this.targetFormValue){if(_3)this.targetFormValue.setValues(_3);this.targetFormValue.saveToServer=(this.saveToServer==true);this.targetFormValue.userTask=this}
if(this.targetViewValue){this.targetViewValue.userTask=this}
return false},isc.A.getElementDescription=function isc_UserTask_getElementDescription(){var _1={type:"[nothing]"};if(this.targetView){_1={type:"targetView",ID:(isc.isA.String(this.targetView)?this.targetView:null)}}else if(this.inlineView){_1={type:"inlineView"}}
return"Show "+(_1.ID?"'"+_1.ID+"' ":"")+_1.type+" and wait for input"});isc.B._maxIndex=isc.C+5;isc.defineClass("StateTask","Task");isc.A=isc.StateTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.passThruOutput=false;isc.A.editorType="StateTaskEditor";isc.B.push(isc.A.executeElement=function isc_StateTask_executeElement(_1){if(this.value==null&&this.inputField==null&&this.inputFieldList==null){isc.logWarn("StateTask: value, inputField or inputFieldList should be set.");return true}
if(this.value==null&&this.inputField==null){if(this.outputFieldList==null||this.outputFieldList.length!=this.inputFieldList.length){isc.logWarn("StateTask: outputFieldList should have same number of parameters as inputFieldList.");return}
if(this.type){isc.logWarn("StateTask: type cannot be used with multiple outputFields")}
for(var i=0;i<this.inputFieldList.lenght;i++){var _3=_1.getStateVariable(this.inputFieldList[i]);_1.setStateVariable(this.outputFieldList[i],_3)}
return true}
var _3=this.value||this.$1968(this.inputField,_1);_3=this.$104s(_3,this.type,_1);_1.setStateVariable(this.outputField,_3);_1.setTaskOutput(this,_3);return true},isc.A.$104s=function isc_StateTask__executePair(_1,_2,_3){if(_1==null){isc.logWarn("StateTask: value is null. Unable to convert to "+_2);this.fail(_3);return null}
if("string"==_2){return _1.toString()}else if("boolean"==_2){if("true"==_1)return true;if("false"==_1)return false;if(isc.isA.String(_1))return _1.length!=0;if(isc.isA.Number(_1))return _1!=0;return _1!=null}else if("decimal"==_2){var v=parseFloat(_1.toString());if(isNaN(v)){this.fail(_3);return null}
return v}else if("integer"==_2){var v=parseInt(_1.toString());if(isNaN(v)){this.fail(_3);return null}
return v}else if("record"==_2){if(isc.isAn.Object(_1)&&!isc.isAn.Array(_1)&&!isc.isAn.RegularExpression(_1)&&!isc.isAn.Date(_1))
{return _1}
return null}else if("array"==_2){if(isc.isAn.Array(_1))return _1;return[_1]}else{return _1}},isc.A.fail=function isc_StateTask_fail(_1){if(this.failureElement==null){isc.logInfo("There is no failureElement in stateTask")}else{_1.setNextElement(this.failureElement)}},isc.A.getElementDescription=function isc_StateTask_getElementDescription(){var _1="no-op";if(this.value!=null){_1="Set "+this.outputField+"="+this.value}else if(this.type!=null){_1="Set "+this.outputField+"="+this.inputField+" as "+this.type}else if(this.inputField||this.inputFieldList){_1="Copy "+(this.inputField?this.inputField:this.inputFieldList.join(","))+" to "+(this.outputField?this.outputField:this.outputFieldList.join(","))}
return _1});isc.B._maxIndex=isc.C+4;isc.defineClass("StartProcessTask","ScriptTask");isc.A=isc.StartProcessTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.isAsync=true;isc.B.push(isc.A.execute=function isc_StartProcessTask_execute(_1,_2){if(!this.process){this.logWarn("StartProcessTask with no process. Skipped");return}
var _3=this.process,_4=_3.finished,_5=this;_3.finished=function(_6){if(_4)_4(_6);_5.setOutputRecord(_6)}
this.isAsync=true;_3.setState(_2);_3.start()});isc.B._maxIndex=isc.C+1;isc.defineClass("EndProcessTask","ProcessElement");isc.A=isc.EndProcessTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.editorPlaceholder=true;isc.B.push(isc.A.executeElement=function isc_EndProcessTask_executeElement(_1){});isc.B._maxIndex=isc.C+1;isc.defineClass("ShowMessageTask","ProcessElement");isc.A=isc.ShowMessageTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.classDescription="Show a message in a modal dialog";isc.A.editorType="ShowMessageTaskEditor";isc.A.type="normal";isc.A.$207j={"normal":"","warning":"warning","error":"error"};isc.B.push(isc.A.executeElement=function isc_ShowMessageTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.type,_3=function(){_1.start()};var _4=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.message,_1);if(_2=="normal"){isc.say(_4,_3)}else if(_2=="warning"){isc.warn(_4,_3)}else if(_2=="error"){isc.Dialog.create({message:_4,icon:isc.Dialog.getInstanceProperty("errorIcon"),buttons:[isc.Button.create({title:"OK"})],buttonClick:function(_5,_6){_3();this.hide();this.destroy()}})}else{return true}
return false},isc.A.getElementDescription=function isc_ShowMessageTask_getElementDescription(){var _1=(this.textFormula?this.textFormula.text:this.message)||"",_2=_1.split(" "),_3=_2.getRange(0,3).join(" "),_4=this.type||"message";if(_3.length>25)_3=_3.substring(0,25);if(_3!=_1)_3+=" ...";return"Show "+this.$207j[_4]+" message: <br>"+_3});isc.B._maxIndex=isc.C+2;isc.defineClass("AskForValueTask","UserConfirmationTask");isc.A=isc.AskForValueTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.typeTitle="Ask for Value";isc.A.classDescription="Ask the user to input a value";isc.A.editorType="AskForValueTaskEditor";isc.B.push(isc.A.executeElement=function isc_AskForValueTask_executeElement(_1){var _2=(this.defaultValue?{defaultValue:this.defaultValue}:null);var _3=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.message,_1);var _4=this;isc.askForValue(_3,function(_5){if(_5){_1.setTaskOutput(_4,{value:_5,canceled:false});if(_4.nextElement)_1.setNextElement(_4.nextElement)}else{if(!_4.failureElement){_4.logInfo("Ask For Value Task does not have a failureElement. Process is aborting.")}
_1.setTaskOutput(_4,{canceled:true});if(_4.failureElement!="next"){_1.setNextElement(_4.failureElement)}}
_1.start()},_2);return false},isc.A.getOutputSchema=function isc_AskForValueTask_getOutputSchema(){if(!this.$214x){var _1=[{name:"value",title:"Value"},{name:isc.Canvas.$177r+"canceled",title:"[meta] canceled",type:"boolean",criteriaPath:"$last.canceled"}];this.$214x=isc.DS.create({addGlobalId:false,clientOnly:true,fields:_1})}
return this.$214x},isc.A.destroy=function isc_AskForValueTask_destroy(){if(this.$214x)this.$214x.destroy();this.Super("destroy",arguments)},isc.A.getElementDescription=function isc_AskForValueTask_getElementDescription(){var _1=(this.textFormula?this.textFormula.text:this.message)||"",_2=_1.split(" "),_3=_2.getRange(0,3).join(" ");if(_3.length>25)_3=_3.substring(0,25);if(_3!=_1)_3+=" ...";return"Ask for value: <br>"+_3});isc.B._maxIndex=isc.C+4;isc.defineClass("ShowNotificationTask","ProcessElement");isc.A=isc.ShowNotificationTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.classDescription="Show a message which fades out automatically";isc.A.editorType="ShowNotificationTaskEditor";isc.A.autoDismiss=true;isc.A.position="T";isc.A.notifyType="message";isc.A.$207k={"message":"","warn":" warning","error":" error"};isc.B.push(isc.A.executeElement=function isc_ShowNotificationTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.notifyType,_3={position:this.position};if(!this.autoDismiss){_3.duration=0;_3.canDismiss=true}
var _4=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.message,_1);isc.Notify.addMessage(_4,null,_2,_3);return true},isc.A.getElementDescription=function isc_ShowNotificationTask_getElementDescription(){var _1=(this.textFormula?this.textFormula.text:this.message)||"",_2=_1.split(" "),_3=_2.getRange(0,3).join(" "),_4=this.notifyType||"message";if(_3.length>25)_3=_3.substring(0,25);if(_3!=_1)_3+=" ...";return"Show"+this.$207k[_4]+" notification: <br>"+_3});isc.B._maxIndex=isc.C+2;isc.defineClass("StartTransactionTask","ProcessElement");isc.A=isc.StartTransactionTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.classDescription="Starts queuing all DataSource operations so they can be sent to the server all together as a transaction";isc.A.editorType=null;isc.B.push(isc.A.executeElement=function isc_StartTransactionTask_executeElement(_1){_1.passThruTaskOutput(this);isc.RPC.startQueue();return true},isc.A.getElementDescription=function isc_StartTransactionTask_getElementDescription(){return"Start queuing"});isc.B._maxIndex=isc.C+2;isc.defineClass("SendTransactionTask","ProcessElement");isc.A=isc.SendTransactionTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.classDescription="Sends any currently queued DataSource operations as a single transactional request to the server";isc.A.editorType=null;isc.B.push(isc.A.executeElement=function isc_SendTransactionTask_executeElement(_1){_1.passThruTaskOutput(this);isc.RPC.sendQueue();return true},isc.A.getElementDescription=function isc_SendTransactionTask_getElementDescription(){return"Send queue"});isc.B._maxIndex=isc.C+2;isc.defineClass("ComponentTask","ProcessElement");isc.A=isc.ComponentTask;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.actionMapping={target:"componentId"};isc.B.push(isc.A.isApplicableComponent=function isc_c_ComponentTask_isApplicableComponent(_1,_2){var _3=(_1&&_1.getClass?_1.getClass():_2&&isc.ClassFactory.getClass(_2));if(!_3)return false;var _4=this.getInstanceProperty("componentBaseClass"),_5=this.getInstanceProperty("componentRequiresDataSource")||false;_4=(isc.isAn.Array(_4)?_4:[_4]);for(var i=0;i<_4.length;i++){if(_3.isA(_4[i])&&(!_5||_1.dataSource)){if(_3.Class!="SectionHeader"||_4[i]!="Canvas"){return true}}}
return false});isc.B._maxIndex=isc.C+1;isc.A=isc.ComponentTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getComponentBaseClasses=function isc_ComponentTask_getComponentBaseClasses(){return(isc.isAn.Array(this.componentBaseClass)?this.componentBaseClass:[this.componentBaseClass])},isc.A.getTargetComponent=function isc_ComponentTask_getTargetComponent(_1,_2){var _3=this.componentId,_4;if(!_3){this.logWarn("ComponentTask with no componentId. Task skipped");return null}
if(isc.isA.Class(_3))return this.componentId;if(_3.startsWith("scLocator=//")||_3.startsWith("//")){_4=isc.AutoTest.getObject(_3);if(!_4){this.logWarn("Component not found for locator "+_3+". Task skipped");return null}}else{if(_1&&_1.screenComponent){_4=_1.screenComponent.getByLocalId(_3)}
if(!_4){_4=window[_3];if(!_4){this.logWarn("Component not found for ID "+_3+". Task skipped");return null}}
if(isc.isA.ClassObject(_4)){this.logWarn("Component ID "+_3+" resolved to a class object rather than a component instance. Task skipped");return null}}
if(_2)return _4;var _5=this.getComponentBaseClasses();for(var i=0;i<_5.length;i++){if(_4.isA(_5[i]))return _4}
this.logWarn("Component type '"+_4.getClassName()+"' is not supported for "+this.getClassName()+". Task skipped");return null},isc.A.getLocalComponent=function isc_ComponentTask_getLocalComponent(_1,_2){if(!_2)return null;if(isc.isA.Class(_2))return _2;var _3=window[_2];if(!_3){if(_1&&_1.screenComponent){_3=_1.screenComponent.getByLocalId(_2)}
if(!_3)return null}
return _3},isc.A.updateGlobalIDReferences=function isc_ComponentTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.componentId&&this.componentId==_1){this.componentId=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("SetTitleTask","ComponentTask");isc.A=isc.SetTitleTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["Tab","SectionStackSection","Window","Label","Button","FormItem"];isc.A.classDescription="Sets the title of a tab, section, window, label or form control";isc.A.editorType="SetTitleTaskEditor";isc.B.push(isc.A.executeElement=function isc_SetTitleTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1,true);if(!_2)return true;var _3=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.title,_1);if(isc.isA.Label(_2)){_2.setContents(_3)}else if(isc.isA.SectionStack(_2)){var _4=this.targetSectionName;if(!_4&&this.targetSectionTitle){var _5=_2.getSectionNames();for(var i=0;i<_5.length;i++){var _7=_2.getSectionHeader(_5[i]);if(_7&&_7.title==this.targetSectionTitle){_4=_5[i];break}}}
if(!_4){isc.logWarn("Target section not identified by targetSectionName or targetSectionTitle. Task skipped");return true}
_2.setSectionTitle(_4,_3)}else if(isc.isA.DynamicForm(_2)){var _8=this.targetFieldName;if(!_8){isc.logWarn("Target field not identified by targetFieldName. Task skipped");return true}
var _9=_2.getField(_8);if(!_9){isc.logWarn("Target field, "+_8+", not found. Task skipped");return true}
if(_9.setTitle){_9.setTitle(_3)}else{_9.title=_3;_9.redraw("title change")}}else if(isc.isA.TabSet(_2)){var _10=this.targetTabName;if(!_10){isc.logWarn("Target tab not identified by targetTabName. Task skipped");return true}
var _11=_2.getTab(_10);if(!_11){isc.logWarn("Target tab, "+_10+", not found. Task skipped");return true}
_2.setTabTitle(_11,_3)}else if(_2.setTitle){_2.setTitle(_3)}
return true},isc.A.getElementDescription=function isc_SetTitleTask_getElementDescription(){var _1=this.componentId,_2=this.targetSectionName||this.targetSectionTitle,_3=this.targetTabName,_4=this.targetFieldName;if(_2){_1+=", section "+_2}else if(_3){_1+=", "+(_3.toLowerCase().endsWith("tab")?"":"tab ")+_3}else if(_4){_1+=", field "+_4}
return"Set "+(_1?"'"+_1+"'":"")+"title"});isc.B._maxIndex=isc.C+2;isc.defineClass("ShowHideTask","ComponentTask");isc.A=isc.ShowHideTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["Canvas","Tab","SectionHeader"];isc.A.typeTitle="Show / Hide";isc.A.classDescription="Show or hide a component. When showing, reveals any hidden parents as well.";isc.A.editorType="ShowHideTaskEditor";isc.B.push(isc.A.executeElement=function isc_ShowHideTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.hide;if(isc.isA.String(_3))_3=(_3=="true");if(isc.isA.SectionStack(_2)){var _4=this.targetSectionName;if(!_4&&this.targetSectionTitle){var _5=_2.getSectionNames();for(var i=0;i<_5.length;i++){var _7=_2.getSectionHeader(_5[i]);if(_7&&_7.title==this.targetSectionTitle){_4=_5[i];break}}}
if(!_4){isc.logWarn("Target section not identified by targetSectionName or targetSectionTitle. Task skipped");return true}
if(_3){_2.hideSection(_4)}else{if(this.showRecursively!=false){_2.showRecursively()}
_2.showSection(_4);var _7=_2.getSectionHeader(_4);if(this.scrollIntoView!=false){this.$227e(_7)}
if(this.moveFocusToTarget){var _8=_7.items;if(_8&&_8.length>0){_2=_8[0]}else{_2=_7}
if(_2.focus){_2.delayCall("focus")}else{this.logWarn("moveFocusToTarget set but target does not support focus. Ignored.")}}}}else if(isc.isA.DynamicForm(_2)){var _9=this.targetFieldName;if(!_9){isc.logWarn("Target field not identified by targetFieldName. Task skipped");return true}
if(!_2.getField(_9)){isc.logWarn("Target field, "+_9+", not found. Task skipped");return true}
if(_3){_2.hideItem(_9)}else{if(this.showRecursively!=false){_2.showRecursively()}
_2.showItem(_9);if(this.scrollIntoView!=false){this.$227e(_2.getItem(_9))}
if(this.moveFocusToTarget){_2.delayCall("focusInItem",_9)}}}else if(isc.isA.TabSet(_2)){var _10=this.targetTabName;if(!_10){isc.logWarn("Target tab not identified by targetTabName. Task skipped");return true}
var _11=_2.getTab(_10);if(!_11){isc.logWarn("Target tab, "+_10+", not found. Task skipped");return true}
if(_3){_2.hideTab(_10)}else{if(this.showRecursively!=false){_2.showRecursively()}
_2.showTab(_10);_2=_2.getTabPane(_10)||_2;if(this.scrollIntoView!=false){this.$227e(_2)}
if(this.moveFocusToTarget){if(_2.focus){_2.delayCall("focus")}else{this.logWarn("moveFocusToTarget set but target does not support focus. Ignored.")}}}}else{if(_3){_2.hide()}else{if(this.showRecursively!=false){_2.showRecursively()}else{_2.show()}
if(this.scrollIntoView!=false){this.$227e(_2)}
if(this.moveFocusToTarget){if(_2.focus){_2.delayCall("focus")}else{this.logWarn("moveFocusToTarget set but target does not support focus. Ignored.")}}}}
return true},isc.A.$227e=function isc_ShowHideTask__scrollIntoView(_1){var _2=_1.eventTarget||_1.parentElement;if(_2==null)return;if(_1.getTop()+_1.getVisibleHeight()>_2.getViewportHeight()){_2.scrollTo(0,_1.getTop())}
this.$227e(_2)},isc.A.getEditorType=function isc_ShowHideTask_getEditorType(){return this.targetFieldName?"ShowHideFieldTaskEditor":this.editorType},isc.A.getElementDescription=function isc_ShowHideTask_getElementDescription(){var _1=this.hide;if(isc.isA.String(_1))_1=(_1=="true");var _2=(_1?"Hide":"Show"),_3=this.targetFieldName||this.targetSectionName||this.targetSectionTitle||this.targetTabName;return _2+" '"+this.componentId+(_3?"."+_3+"'":"'")},isc.A.getSerializeableFields=function isc_ShowHideTask_getSerializeableFields(){var _1=this.Super("getSerializeableFields",arguments);delete _1.hide;return _1},isc.A.getCustomDefaults=function isc_ShowHideTask_getCustomDefaults(){var _1=this.hide?"HideTask":"ShowTask";return{_constructor:_1}});isc.B._maxIndex=isc.C+6;isc.defineClass("ShowTask","ShowHideTask");isc.defineClass("HideTask","ShowHideTask");isc.A=isc.HideTask.getPrototype();isc.A.hide=true;isc.defineClass("FormSetValuesTask","ComponentTask");isc.A=isc.FormSetValuesTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.componentRequiresDataSource=true;isc.A.classDescription="Set form values";isc.A.editorType="FormSetValuesTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormSetValuesTask_executeElement(_1){_1.passThruTaskOutput(this);this.process=_1;var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=null;if(this.values){_3=this.$1950(this.values,null,null,_1)}
if(this.fixedValues){for(var _4 in this.fixedValues){_3[_4]=this.fixedValues[_4]}}
_2.setValues(_3);return true},isc.A.getElementDescription=function isc_FormSetValuesTask_getElementDescription(){return"Set '"+this.componentId+"' values"},isc.A.getOutputSchema=function isc_FormSetValuesTask_getOutputSchema(){var _1=this.getTargetComponent(this.process);if(!_1)return null;return _1.getDataSource()},isc.A.updateLastElementBindingReferences=function isc_FormSetValuesTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.updateLastElementInValues(this.values,_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_FormSetValuesTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.updateGlobalIDInValues(this.values,_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+5;isc.defineClass("FormSetFieldValueTask","ComponentTask");isc.A=isc.FormSetFieldValueTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.componentRequiresDataSource=true;isc.A.classDescription="Put a value into just one field of a form";isc.A.editorType="FormSetFieldValueTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormSetFieldValueTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.getDynamicValue(this.value,_1);_2.setValue(this.targetField,_3);return true},isc.A.getElementDescription=function isc_FormSetFieldValueTask_getElementDescription(){var _1=(this.targetField?"."+this.targetField:" field")
return"Set '"+this.componentId+_1+" value"},isc.A.updateLastElementBindingReferences=function isc_FormSetFieldValueTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.updateLastElementInValueProperty("value",_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_FormSetFieldValueTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.updateGlobalIDInValueProperty("value",_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("FormClearValuesTask","ComponentTask");isc.A=isc.FormClearValuesTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.classDescription="Clear form values and errors";isc.A.editorType="FormClearValuesTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormClearValuesTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;_2.clearValues();return true},isc.A.getElementDescription=function isc_FormClearValuesTask_getElementDescription(){return"Clear '"+this.componentId+"' values"});isc.B._maxIndex=isc.C+2;isc.defineClass("FormResetValuesTask","ComponentTask");isc.A=isc.FormResetValuesTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.classDescription="Reset values in a form to defaults";isc.A.editorType="FormResetValuesTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormResetValuesTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;_2.resetValues();return true},isc.A.getElementDescription=function isc_FormResetValuesTask_getElementDescription(){return"Reset '"+this.componentId+"' values"});isc.B._maxIndex=isc.C+2;isc.defineClass("FormValidateValuesTask","ComponentTask");isc.A=isc.FormValidateValuesTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.classDescription="Validate a form and show errors to user";isc.A.editorType="FormValidateValuesTaskEditor";isc.A.passThruOutput=false;isc.B.push(isc.A.executeElement=function isc_FormValidateValuesTask_executeElement(_1){this.process=_1;var _2=this,_3=this.getTargetComponent(_1);if(!_3)return true;var _4=_3.handleAsyncValidationReply;_3.addMethods({handleAsyncValidationReply:function(_8,_9,_10){_3.handleAsyncValidationReply=_4;if(_3.handleAsyncValidationReply){_3.handleAsyncValidationReply(_8,_9,_10)}
var _5={status:(_8==false?isc.RPCResponse.STATUS_VALIDATION_ERROR:isc.RPCResponse.STATUS_SUCCESS),errors:_3.getErrors()};_1.setTaskOutput(_2,_2.createOutput(_5));_1.start()}});var _6=_3.validate(),_7=_3.isPendingAsyncValidation();if(!_7){_3.handleAsyncValidationReply=_4;var _5={status:(_6==false?isc.RPCResponse.STATUS_VALIDATION_ERROR:isc.RPCResponse.STATUS_SUCCESS),errors:_3.getErrors()};_1.setTaskOutput(this,this.createOutput(_5))}else{}
return!_7},isc.A.createOutput=function isc_FormValidateValuesTask_createOutput(_1){var _2={valuesValid:true};if(_1.status==isc.RPCResponse.STATUS_VALIDATION_ERROR){_2.valuesValid=false;_2.errors=isc.DS.getSimpleErrors(_1)}
return _2},isc.A.getOutputSchema=function isc_FormValidateValuesTask_getOutputSchema(){if(!this.$214x){var _1=this.getTargetComponent(this.process);if(_1){var _2=[{name:isc.Canvas.$177r+"valuesValid",title:"[meta] valuesValid",type:"boolean",criteriaPath:"valuesValid"}];var _3=_1.getDataSource();if(_3){var _4=_3.getFieldNames();for(var i=0;i<_4.length;i++){var _6=_4[i],_7={name:_6,type:"text",multiple:true};_2.add(_7)}}
this.$214x=isc.DS.create({addGlobalId:false,clientOnly:true,criteriaBasePath:"errors",fields:_2})}}
return this.$214x},isc.A.destroy=function isc_FormValidateValuesTask_destroy(){if(this.$214x)this.$214x.destroy();this.Super("destroy",arguments)},isc.A.getElementDescription=function isc_FormValidateValuesTask_getElementDescription(){return"Validate '"+this.componentId+"' values"});isc.B._maxIndex=isc.C+5;isc.defineClass("FormSaveDataTask","ComponentTask");isc.A=isc.FormSaveDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.classDescription="Save changes made in a form (validates first)";isc.A.editorType="FormSaveDataTaskEditor";isc.A.boundNotifyMessage="${dsTitle} saved successfully";isc.A.unboundNotifyMessage="Saved successfully";isc.A.notifyPosition="T";isc.A.notifyType="message";isc.A.passThruOutput=false;isc.B.push(isc.A.executeElement=function isc_FormSaveDataTask_executeElement(_1){this.process=_1;var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=isc.addProperties({},this.requestProperties,{willHandleError:true});var _4=this;_2.saveData(function(_9,_10,_11){_9=_9||{};var _5=_9.results;if(_9.isStructured&&(!_5||_5.status<0||(_5.status==null&&_9.status<0)))
{if(!isc.RPC.runDefaultErrorHandling(_9,_11,_4.errorFormatter)){_1.setTaskOutput(_4,_4.createFailureOutput(_9));_4.fail(_1);return}}else{_1.setTaskOutput(_4,_9.data)}
if(_4.clearAfterSave||_4.clearAfterSave==null){_2.clearValues()}
if(_4.showNotification){var _6=_4.notifyMessage;if(!_6){_6=_4.getNotifyMessage()}
var _7=_4.notifyType,_8={position:_4.notifyPosition};isc.Notify.addMessage(_6,null,_7,_8)}
_1.start()},_3);if(_2.hasErrors()){_1.setTaskOutput(_4,{valuesValid:false,errors:_2.getErrors()});if(this.failureElement!="next"){_1.setNextElement(this.failureElement)}
return true}
return false},isc.A.fail=function isc_FormSaveDataTask_fail(_1){if(!this.failureElement){this.logInfo("FormSaveDataTask does not have a failureElement. Process is aborting.")}
if(this.failureElement=="next"){_1.start()}else{_1.setNextElement(this.failureElement)}},isc.A.errorFormatter=function isc_FormSaveDataTask_errorFormatter(_1,_2,_3){if(_1=="VALIDATION_ERROR"){var _4=_2.errors,_5=["Server returned validation errors:<BR><UL>"];if(!isc.isAn.Array(_4))_4=[_4];for(var i=0;i<_4.length;i++){var _7=_4[i];for(var _8 in _7){var _9=_7[_8];_5.add("<LI><B>"+_8+":</B> ");if(!isc.isAn.Array(_9))_9=[_9];for(var j=0;j<_9.length;j++){var _11=_9[j];_5.add((j>0?"<BR>":"")+(isc.isAn.Object(_11)?_11.errorMessage:_11))}
_5.add("</LI>")}}
_5.add("</UL>");return _5.join("")}
return null},isc.A.createFailureOutput=function isc_FormSaveDataTask_createFailureOutput(_1){var _2={valuesValid:true};if(_1.status==isc.RPCResponse.STATUS_VALIDATION_ERROR){_2.valuesValid=false;var _3=this.getTargetComponent(this.process);if(_3){_2.errors=isc.DS.getSimpleErrors(_1)}}
return _2},isc.A.getOutputSchema=function isc_FormSaveDataTask_getOutputSchema(){var _1=this.getTargetComponent(this.process);if(!_1)return null;return _1.getDataSource()},isc.A.getFailureSchema=function isc_FormSaveDataTask_getFailureSchema(){if(!this.$214z){var _1=this.getTargetComponent(this.process);if(_1){var _2=[{name:isc.Canvas.$177r+"valuesValid",title:"[meta] valuesValid",type:"boolean",criteriaPath:"valuesValid"}];var _3=_1.getDataSource();if(_3){var _4=_3.getFieldNames();for(var i=0;i<_4.length;i++){var _6=_4[i],_7={name:_6,type:"text",multiple:true};_2.add(_7)}}
this.$214z=isc.DS.create({addGlobalId:false,clientOnly:true,criteriaBasePath:"errors",fields:_2})}}
return this.$214z},isc.A.destroy=function isc_FormSaveDataTask_destroy(){if(this.$214z)this.$214z.destroy();this.Super("destroy",arguments)},isc.A.getNotifyMessage=function isc_FormSaveDataTask_getNotifyMessage(){var _1=this.getOutputSchema(),_2=(_1!=null?"boundNotifyMessage":"unboundNotifyMessage"),_3=this[_2];if(_1&&_3){var _4=_1.getTitle();if(_4){_3=_3.evalDynamicString(this,{dsTitle:_4})}}
return _3},isc.A.getElementDescription=function isc_FormSaveDataTask_getElementDescription(){return"Save '"+this.componentId+"' data"});isc.B._maxIndex=isc.C+9;isc.defineClass("FormEditNewRecordTask","ComponentTask");isc.A=isc.FormEditNewRecordTask;isc.A.actionMapping={target:"componentId",paramMap:["initialValues"]};isc.A=isc.FormEditNewRecordTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.classDescription="Start editing a new record";isc.A.editorType="FormEditNewRecordTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormEditNewRecordTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3;if(this.initialValues){_3=this.$1950(this.initialValues,null,null,_1)}
_2.editNewRecord(_3);return true},isc.A.getElementDescription=function isc_FormEditNewRecordTask_getElementDescription(){return"Edit '"+this.componentId+"' new record"},isc.A.updateLastElementBindingReferences=function isc_FormEditNewRecordTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.updateLastElementInValues(this.initialValues,_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_FormEditNewRecordTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.updateGlobalIDInValues(this.initialValues,_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("FormEditRecordTask","FormEditNewRecordTask");isc.A=isc.FormEditRecordTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.componentRequiresDataSource=true;isc.A.editorType="FormEditRecordTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormEditRecordTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.recordSourceComponent;if(!_3){this.logWarn("recordSourceComponent not specified on task. Task skipped.");return true}
var _4=this.getLocalComponent(_1,_3);if(!_4){this.logWarn("recordSourceComponent '"+_3+"' not found. Task skipped.");return true}
var _5=this.initialValues;if(isc.isA.ListGrid(_4)&&_4.anySelected()){_5=_4.getSelectedRecord()}else if(isc.isA.DynamicForm(_4)){_5=_4.getValues()}else if(isc.isA.ListGrid(_4)){_5=_4.getRecord(0)}else if(isc.isA.DetailViewer(_4)){_5=_4.data[0]}
_2.editRecord(_5);return true},isc.A.getElementDescription=function isc_FormEditRecordTask_getElementDescription(){var _1=(this.recordSourceComponent?"'"+this.recordSourceComponent+"'":"other");return"Edit '"+this.componentId+"' from "+_1+" record"},isc.A.updateGlobalIDReferences=function isc_FormEditRecordTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.recordSourceComponent&&this.recordSourceComponent==_1){this.recordSourceComponent=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+3;isc.defineClass("FormEditSelectedTask","ComponentTask");isc.A=isc.FormEditSelectedTask;isc.A.actionMapping={target:"componentId",source:"selectionComponentId"};isc.A=isc.FormEditSelectedTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.componentRequiresDataSource=true;isc.A.typeTitle="Edit Selected Record";isc.A.classDescription="Edit a record currently showing in some other component";isc.A.editorType="FormEditSelectedTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormEditSelectedTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.selectionComponentId;if(!_3){this.logWarn("selectionComponentId not specified on task. Task skipped.");return true}
var _4=this.getLocalComponent(_1,_3);if(!_4){this.logWarn("selectionComponent '"+_3+"' not found. Task skipped.");return true}
var _5=null;if(_4.getSelectedRecord){_5=_4.getSelectedRecord()}
_2.editRecord(_5);return true},isc.A.getElementDescription=function isc_FormEditSelectedTask_getElementDescription(){var _1=(this.selectionComponentId?"'"+this.selectionComponentId+"' selected":"selected");return"Edit '"+this.componentId+"' from "+_1+" record"},isc.A.updateGlobalIDReferences=function isc_FormEditSelectedTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.selectionComponentId&&this.selectionComponentId==_1){this.selectionComponentId=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+3;isc.defineClass("FormDisableFieldTask","ComponentTask");isc.A=isc.FormDisableFieldTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="DynamicForm";isc.A.typeTitle="Enable / Disable Field";isc.A.classDescription="Enable or disable a field of a form";isc.A.editorType="FormDisableFieldTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormDisableFieldTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.targetField;if(!_3){this.logWarn("targetField not specified on task. Task skipped.");return true}
var _4=this.disable;if(isc.isA.String(_4))_4=(_4=="true");var _5=_2.getField(_3);if(_5){_5.setDisabled(_4)}
return true},isc.A.getElementDescription=function isc_FormDisableFieldTask_getElementDescription(){var _1=this.disable;if(isc.isA.String(_1))_1=(_1=="true");var _2=(_1?"Disable":"Enable"),_3=(this.targetField?"."+this.targetField:"");return _2+" '"+this.componentId+_3+"'"});isc.B._maxIndex=isc.C+2;isc.defineClass("GridFetchDataTask","ComponentTask");isc.A=isc.GridFetchDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["ListGrid","TileGrid","DetailViewer","FacetChart"];isc.A.componentRequiresDataSource=true;isc.A.classDescription="Fetch data matching specified criteria or change the criteria currently applied";isc.A.editorType="GridFetchDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridFetchDataTask_executeElement(_1){this.process=_1;var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.criteria;if(_3&&this.$2289(_3)){_3=null}
if(_3){_3=this.$195y(_3,_1.state,_1.state,_1)}
var _4=this,_5=false;if(this.applyToImplicitCriteria){_2.setImplicitCriteria(_3,false);_2.refreshData(function(_6){_1.setTaskOutput(_4,_4.$237x(_2,_3,_6.data));_1.start()})}else{_5=!_2.willFetchData(_3);_2.fetchData(_3,function(_6){_1.setTaskOutput(_4,_4.$237x(_2,_3,_6.data));_1.start()},this.requestProperties)}
return _5},isc.A.$237x=function isc_GridFetchDataTask__getOutput(_1,_2,_3){if(!_3||_3.length==0){return null}
var _4=_1.getDataSource(),_5=_3[0];if(_4){_5=_3;if(_2){if(_4.isAdvancedCriteria(_2)){var _6=_4.getPrimaryKeyFieldName(),_7=_4.getFieldCriterion(_2,_6);if(_7&&_7.operator=="equals"){_5=_3[0]}}else if(_4.defaultTextMatchStyle=="equals"&&_2[_6]!=null){_5=_3[0]}}}
return _5},isc.A.getOutputSchema=function isc_GridFetchDataTask_getOutputSchema(){var _1=this.getTargetComponent(this.process);if(!_1)return null;var _2=_1.dataSource;if(_2&&(_2.getClassName==null||_2.getClassName()!="DataSource")){_2=isc.DataSource.get(_2)}
return _2},isc.A.getElementDescription=function isc_GridFetchDataTask_getElementDescription(){var _1=this.criteria,_2=this.$2289(_1),_3=(_2?"Clear criteria":"Fetch data")+" on '"+this.componentId+"'";if(!_2){if(!isc.DS.isAdvancedCriteria(_1)){_1=isc.DS.convertCriteria(_1)}
var _4=isc.DecisionTask.$87n(_1);var _5=isc.DataSource.create({addGlobalId:false,fields:_4});_3+=" where <ul>"+isc.DataSource.getAdvancedCriteriaDescription(_1,_5,null,{prefix:"<li>",suffix:"</li>"})+"</ul>";_5.destroy()}
return _3},isc.A.$2289=function isc_GridFetchDataTask__isEmptyCriteria(_1){return(!_1||isc.isAn.emptyObject(_1)||((!_1.fieldName&&!_1.criteria)||(!_1.fieldName&&isc.isAn.Array(_1.criteria)&&_1.criteria.length==0)))},isc.A.updateLastElementBindingReferences=function isc_GridFetchDataTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.updateLastElementInCriteria(this.criteria,_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_GridFetchDataTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.updateGlobalIDInCriteria(this.criteria,_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+7;isc.defineClass("FetchRelatedDataTask","ComponentTask");isc.A=isc.FetchRelatedDataTask;isc.A.actionMapping={target:"componentId",source:"recordSourceComponent"};isc.A=isc.FetchRelatedDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","DetailViewer","ListGrid","TileGrid","DetailViewer"];isc.A.componentRequiresDataSource=true;isc.A.classDescription="Fetch data related to a record shown in another component";isc.A.editorType="FetchRelatedDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_FetchRelatedDataTask_executeElement(_1){var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.recordSourceComponent;if(!_3){this.logWarn("recordSourceComponent not specified on task. Task skipped.");return true}
var _4=this.getLocalComponent(_1,_3);if(!_4){this.logWarn("recordSourceComponent '"+_3+"' not found. Task skipped.");return true}
var _5=this.dataSource||_4;var _6=null,_7=isc.isA.ListGrid(_4)||isc.isA.TileGrid(_4);if(_7&&_4.anySelected()){_6=_4.getSelectedRecord()}else if(isc.isA.DynamicForm(_4)){_6=_4.getValues()}else if(_7){_6=_4.getRecord(0)}else if(isc.isA.DetailViewer(_4)){_6=_4.data[0]}
if(!_6)return true;var _8=this;var _9=_2.fetchRelatedData(_6,_5,function(_11){var _10=(_11.data&&_11.data.length>0?_11.data[0]:null);_1.setTaskOutput(_8,_10);_1.start()},null,true);if(!_9){var _10=_2.getRecord(0);_1.setTaskOutput(_8,_10)}
return!_9},isc.A.getOutputSchema=function isc_FetchRelatedDataTask_getOutputSchema(){var _1=this.getTargetComponent(this.process);if(!_1)return null;var _2=_1.dataSource;if(_2&&(_2.getClassName==null||_2.getClassName()!="DataSource")){_2=isc.DataSource.get(_2)}
return _2},isc.A.getElementDescription=function isc_FetchRelatedDataTask_getElementDescription(){var _1=(this.recordSourceComponent?"in '"+this.recordSourceComponent+"'":"");return"Fetch '"+this.componentId+"' data from related record "+_1},isc.A.updateGlobalIDReferences=function isc_FetchRelatedDataTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.recordSourceComponent&&this.recordSourceComponent==_1){this.recordSourceComponent=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("GridRemoveSelectedDataTask","ComponentTask");isc.A=isc.GridRemoveSelectedDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["ListGrid","TileGrid"];isc.A.classDescription="Remove data that is selected in a grid";isc.A.editorType="GridRemoveSelectedDataTaskEditor";isc.A.refuseMultiRemoveMessage="Only one record may be removed at a time";isc.A.confirmationMessage="Delete ${dsTitle} ${recordTitle}?";isc.A.unboundConfirmationMessage="Delete record?";isc.A.multipleConfirmationMessage="Delete multiple ${dsPluralTitle}?";isc.A.unboundMultipleConfirmationMessage="Delete multiple records?";isc.B.push(isc.A.executeElement=function isc_GridRemoveSelectedDataTask_executeElement(_1){this._process=_1;_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=_2.getSelection().length;if(_3<=0)return true;var _4=(_3>1);if(_4&&this.allowMultiRecordRemove==false){isc.warn(this.refuseMultiRemoveMessage,function(){_1.setNextElement(null)});return}
if(this.showConfirmation){var _5=this.getMessage(_2),_6=this;isc.ask(_5,function(_7){if(_7){_6.removeSelectedData(_1,_2);return}
_1.setNextElement(null)},{buttons:[isc.Dialog.NO,isc.Dialog.YES],autoFocusButton:1})}else{this.removeSelectedData(_1,_2)}
return false},isc.A.getMessage=function isc_GridRemoveSelectedDataTask_getMessage(_1){var _2=_1.getDataSource(),_3=_1.getSelection().length,_4=(_3>1),_5=_1.getSelectedRecord(),_6=(_2!=null?(_4?"multipleConfirmationMessage":"confirmationMessage"):(_4?"unboundMultipleConfirmationMessage":"unboundConfirmationMessage")),_7=this[_6],_8={};if(_2){_8.dsTitle=_2.getTitle();_8.dsPluralTitle=_2.getPluralTitle()}
if(_5){_8.recordTitle=_5[_2.getTitleField()]}
return _7.evalDynamicString(this,_8)},isc.A.removeSelectedData=function isc_GridRemoveSelectedDataTask_removeSelectedData(_1,_2){var _3=isc.addProperties({},this.requestProperties,{willHandleError:true}),_4=this;_2.removeSelectedData(null,_3,function(_7){if(_7&&_7.length>0){for(var i=0;i<_7.length;i++){var _6=_7[i];if(_6.status<0){_4.fail(_1);return}}}
_1.start()})},isc.A.fail=function isc_GridRemoveSelectedDataTask_fail(_1){if(!this.failureElement){this.logInfo("GridRemoveSelectedDataTask does not have a failureElement. Process is aborting.")}
if(this.failureElement=="next"){_1.start()}else{_1.setNextElement(this.failureElement)}},isc.A.getDefaultRefuseMessage=function isc_GridRemoveSelectedDataTask_getDefaultRefuseMessage(){return this.getClass().getInstanceProperty("refuseMultiRemoveMessage")},isc.A.getDefaultMessage=function isc_GridRemoveSelectedDataTask_getDefaultMessage(){var _1=this.getTargetComponent(this._process),_2=_1&&_1.getDataSource(),_3=(_2!=null?"confirmationMessage":"unboundConfirmationMessage"),_4=this.getClass().getInstanceProperty(_3),_5={};if(_2){_5.dsTitle=_2.getTitle();_5.dsPluralTitle=_2.getPluralTitle()}
return _4.evalDynamicString(this,_5)},isc.A.getDefaultMultipleMessage=function isc_GridRemoveSelectedDataTask_getDefaultMultipleMessage(){var _1=this.getTargetComponent(this._process),_2=_1&&_1.getDataSource(),_3=(_2!=null?"multipleConfirmationMessage":"unboundMultipleConfirmationMessage"),_4=this.getClass().getInstanceProperty(_3),_5={};if(_2){_5.dsTitle=_2.getTitle();_5.dsPluralTitle=_2.getPluralTitle()}
return _4.evalDynamicString(this,_5)},isc.A.getElementDescription=function isc_GridRemoveSelectedDataTask_getElementDescription(){return"Remove '"+this.componentId+"' selected records"},isc.A.getSerializeableFields=function isc_GridRemoveSelectedDataTask_getSerializeableFields(){var _1=this.Super("getSerializeableFields",arguments);if(_1.allowMultiRecordRemove||(_1.refuseMultiRemoveMessage&&_1.refuseMultiRemoveMessage==this.getDefaultRefuseMessage()))
{delete _1.refuseMultiRemoveMessage}
var _2=this.getTargetComponent(this._process),_3=_2&&_2.getDataSource();if(_3){if(!_1.showConfirmation||(_1.confirmationMessage&&_1.confirmationMessage==this.getDefaultMessage()))
{delete _1.confirmationMessage}
if(!_1.showConfirmation||(_1.multipleConfirmationMessage&&_1.multipleConfirmationMessage==this.getDefaultMultipleMessage()))
{delete _1.multipleConfirmationMessage}
delete _1.unboundConfirmationMessage;delete _1.unboundMultipleConfirmationMessage}else{delete _1.confirmationMessage;delete _1.multipleConfirmationMessage;if(!_1.showConfirmation||(_1.unboundConfirmationMessage&&_1.unboundConfirmationMessage==this.getDefaultMessage()))
{delete _1.unboundConfirmationMessage}
if(!_1.showConfirmation||(_1.unboundMultipleConfirmationMessage&&_1.unboundMultipleConfirmationMessage==this.getDefaultMultipleMessage()))
{delete _1.unboundMultipleConfirmationMessage}}
return _1});isc.B._maxIndex=isc.C+9;isc.defineClass("GridViewSelectedDataTask","ComponentTask");isc.A=isc.GridViewSelectedDataTask;isc.A.actionMapping={target:"componentId",source:"selectionComponentId"};isc.A=isc.GridViewSelectedDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DetailViewer","DynamicForm","TileGrid"];isc.A.typeTitle="View Selected Data";isc.A.classDescription="View data already loaded in another grid, showing more fields";isc.A.editorType="GridViewSelectedDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridViewSelectedDataTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.selectionComponentId;if(!_3){this.logWarn("selectionComponentId not specified on task. Task skipped.");return true}
var _4=this.getLocalComponent(_1,_3);if(!_4){this.logWarn("selectionComponent '"+_3+"' not found. Task skipped.");return true}
if(_4.getSelection){_2.viewSelectedData(_4)}
return true},isc.A.getElementDescription=function isc_GridViewSelectedDataTask_getElementDescription(){var _1=(this.selectionComponentId?"'"+this.selectionComponentId+"' ":"");return"View "+_1+"selected data in '"+this.componentId+"'"},isc.A.updateGlobalIDReferences=function isc_GridViewSelectedDataTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.selectionComponentId&&this.selectionComponentId==_1){this.selectionComponentId=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+3;isc.defineClass("GridEditRecordTask","ComponentTask");isc.A=isc.GridEditRecordTask;isc.A.actionMapping={target:"componentId",paramMap:["initialValues"]};isc.A=isc.GridEditRecordTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="ListGrid";isc.A.classDescription="Edit an existing record in a grid or start editing a new one";isc.A.editorType="GridEditRecordTaskEditor";isc.A.supportsMultipleInputRecords=true;isc.B.push(isc.A.executeElement=function isc_GridEditRecordTask_executeElement(_1){_1.passThruTaskOutput(this);if(this.$237w==null){this.$237w=this.forceSingle}
var _2=this.getTargetComponent(_1);if(!_2)return true;if(this.criteria||this.editFirstRecord){var _3=this.criteria&&this.$195y(this.criteria,_1.state,_1.state,_1);_2.editExistingRecord(_3);this.forceSingle=true}else{var _4;if(this.initialValues){_4=this.$1950(this.initialValues,null,null,_1)}
_2.startEditingNew(_4);if(!_4||!this.objectReferencesLastTaskOutput(this.initialValues,_1)){this.forceSingle=true}}
return true},isc.A.completeElement=function isc_GridEditRecordTask_completeElement(_1){this.forceSingle=this.$237w;delete this.$237w},isc.A.getElementDescription=function isc_GridEditRecordTask_getElementDescription(){var _1=this.criteria,_2=this.editFirstRecord,_3="Edit "+(_1?"existing":(_2?"first":"new"))+" record";;if(_1){if(!isc.DS.isAdvancedCriteria(_1)){_1=isc.DS.convertCriteria(_1)}
var _4=isc.DecisionTask.$87n(_1);var _5=isc.DataSource.create({addGlobalId:false,fields:_4});_3+=" where <ul>"+isc.DataSource.getAdvancedCriteriaDescription(_1,_5,null,{prefix:"<li>",suffix:"</li>"})+"</ul>";_5.destroy()}
return _3},isc.A.updateLastElementBindingReferences=function isc_GridEditRecordTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.updateLastElementInValues(this.initialValues,_1)||_2;_2=this.updateLastElementInCriteria(this.criteria,_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_GridEditRecordTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.updateGlobalIDInValues(this.initialValues,_1,_2)||_3;_3=this.updateGlobalIDInCriteria(this.criteria,_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+5;isc.defineClass("GridSetEditValueTask","ComponentTask");isc.A=isc.GridSetEditValueTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="ListGrid";isc.A.componentRequiresDataSource=true;isc.A.classDescription="Set a value in an editable grid as if the user had made the edit";isc.A.editorType="GridSetEditValueTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridSetEditValueTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;if(this.targetField==null){this.logWarn("targetField not specified on task. Task skipped.");return true}
var _3=_2.getFieldNum(this.targetField);if(_3<0){this.logWarn("targetField not found to target grid. Task skipped.");return true}
var _4=_2.getEditRow(),_5=_4,_6=_1.getStateVariable("eventParams.recordNum");if(_6!=null){_5=_6}
if(_5==null){var _7=_2.getSelectedRecord();if(_7){_5=_2.getRecordIndex(_7)}}
if(_5==null){if(_2.getRecord(0)!=null){_5=0}}
var _8=this.getDynamicValue(this.value,_1);if(_5>=0){if(_5!=_4){_2.startEditing(_5,_3)}
if(_5>=0){var _9=_2.getEditFormItem(_3);if(_9)_9.clearValue();_2.setEditValue(_5,_3,_8)}}else{var _10={};_10[this.targetField]=_8;_2.startEditingNew(_10)}
return true},isc.A.getElementDescription=function isc_GridSetEditValueTask_getElementDescription(){var _1=(this.targetField?"."+this.targetField:"");return"Set '"+this.componentId+_1+"' edit value"},isc.A.updateLastElementBindingReferences=function isc_GridSetEditValueTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.updateLastElementInValueProperty("value",_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_GridSetEditValueTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.updateGlobalIDInValueProperty("value",_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("GridSaveAllEditsTask","ComponentTask");isc.A=isc.GridSaveAllEditsTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="ListGrid";isc.A.classDescription="Save all changes in a grid which has auto-saving disabled";isc.A.editorType="GridSaveAllEditsTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridSaveAllEditsTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;_2.endEditing();if(_2.hasChanges()){_2.saveAllEdits(null,function(){_1.start()});return false}
return true},isc.A.getElementDescription=function isc_GridSaveAllEditsTask_getElementDescription(){return"Save all '"+this.componentId+"' edits"});isc.B._maxIndex=isc.C+2;isc.defineClass("GridSelectRecordsTask","ComponentTask");isc.A=isc.GridSelectRecordsTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["ListGrid","TileGrid"];isc.A.componentRequiresDataSource=true;isc.A.classDescription="Select record(s) or clear selection and scroll selection into view (or reveal a hidden tree node)";isc.A.editorType="GridSelectRecordsTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridSelectRecordsTask_executeElement(_1){this.process=_1;var _2=this.getTargetComponent(_1);if(!_2)return true;var _3;if(!this.criteria){if(this.select!=false){if(this.selectMultiple){_2.selectAllRecords();_3=_2.getSelectedRecords()}else{_2.selectSingleRecord(0);_3=_2.getRecord(0)}}else{_3=_2.getSelectedRecords();_2.deselectAllRecords()}
if(this.scrollIntoView!=false){_2.scrollToRow(0)}}else{var _4=_2.getDataSource(),_5=(isc.isAn.Array(_2.data)?_2.data:(isc.isA.Tree(_2.data)?_2.data.getAllNodes():_2.data.getAllCachedRows())),_6=this.$195y(this.criteria,_1.state,_1.state,_1),_7;if(_4){_7=_4.applyFilter(_5,_6)}else{_7=isc.DS.applyFilter(_5,_6)}
var _8=_7.length;if(_8>0){_3=_7;if(this.select!=false){if(!this.keepExistingSelection&&!this.selectMultiple&&_8>0){_2.selectSingleRecord(_7[0]);_3=_7[0]}else{if(!this.keepExistingSelection){_2.deselectAllRecords()}
_2.selectRecords(_7)}}else{_2.deselectRecords(_7)}
if(this.scrollIntoView!=false){var _9=_7[0],_5=_2.data;if(isc.isA.Tree(_5)){var _10=_5.getParents(_9);if(_10){_5.openFolders(_10)}}
var _11=_2.getRecordIndex(_9);_2.scrollToRow(_11)}}else if(this.keepExistingSelection){_3=_2.getSelectedRecords()}}
_1.setTaskOutput(this,_3);return true},isc.A.getOutputSchema=function isc_GridSelectRecordsTask_getOutputSchema(){var _1=this.getTargetComponent(this.process);if(!_1)return null;var _2=_1.dataSource;if(_2&&(_2.getClassName==null||_2.getClassName()!="DataSource")){_2=isc.DataSource.get(_2)}
return _2},isc.A.getElementDescription=function isc_GridSelectRecordsTask_getElementDescription(){var _1=(this.componentId?"'"+this.componentId+"'":""),_2=(this.select!=false),_3=(this.selectMultiple!=false);if(isc.isA.String(_2))_2=(_2=="true");var _4=(!this.criteria?(_2&&!_3?"first ":"all "):""),_5=(_2&&!_3?"":"s");return(_2?"S":"Des")+"elect "+_4+_1+" record"+_5},isc.A.updateGlobalIDReferences=function isc_GridSelectRecordsTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.criteria){_3=this.updateGlobalIDInCriteria(this.criteria,_1,_2)||_3}
return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("GridTransferDataTask","ComponentTask");isc.A=isc.GridTransferDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["ListGrid","TileGrid"];isc.A.classDescription="Transfer selected records from one grid to another";isc.A.editorType="GridTransferDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridTransferDataTask_executeElement(_1){this.process=_1;var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.sourceComponent;if(!_3){this.logWarn("sourceComponent not specified on task. Task skipped.");return true}
var _4=this.getLocalComponent(_1,_3);if(!_4){this.logWarn("sourceComponent '"+_3+"' not found. Task skipped.");return true}
var _5=this;_2.transferSelectedData(_4,null,function(_7){var _6=(_7&&_7.length>0?_7[0]:null);_1.setTaskOutput(_5,_6);_1.start()});return false},isc.A.getOutputSchema=function isc_GridTransferDataTask_getOutputSchema(){var _1=this.getTargetComponent(this.process);if(!_1)return null;var _2=_1.dataSource;if(_2&&(_2.getClassName==null||_2.getClassName()!="DataSource")){_2=isc.DataSource.get(_2)}
return _2},isc.A.getElementDescription=function isc_GridTransferDataTask_getElementDescription(){var _1=(this.componentId?" to '"+this.componentId+"'":"");return"Transfer selected data from '"+this.sourceComponent+"'"+_1},isc.A.updateGlobalIDReferences=function isc_GridTransferDataTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.sourceComponent&&this.sourceComponent==_1){this.sourceComponent=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("GridExportDataTask","ComponentTask");isc.A=isc.GridExportDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["ListGrid","TileGrid","DetailViewer"];isc.A.componentRequiresDataSource=true;isc.A.typeTitle="Export Data (Server)";isc.A.classDescription="Export data currently shown in a grid";isc.A.editorType="GridExportDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridExportDataTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;_2.exportData(this.requestProperties,function(){_1.start()});return false},isc.A.getElementDescription=function isc_GridExportDataTask_getElementDescription(){return"Export '"+this.componentId+"' data (Server)"});isc.B._maxIndex=isc.C+2;isc.defineClass("GridExportClientDataTask","ComponentTask");isc.A=isc.GridExportClientDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["ListGrid","TileGrid","DetailViewer"];isc.A.typeTitle="Export Data (Client)";isc.A.classDescription="Export data currently shown in a grid keeping all grid-specific formatting";isc.A.editorType="GridExportClientDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridExportClientDataTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;_2.exportClientData(this.requestProperties,function(){_1.start()});return false},isc.A.getElementDescription=function isc_GridExportClientDataTask_getElementDescription(){return"Export '"+this.componentId+"' formatted data (Client)"});isc.B._maxIndex=isc.C+2;isc.defineClass("SetScreenDataTask","ComponentTask");isc.A=isc.SetScreenDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DataView","ScreenLoader"];isc.A.classDescription="Set Screen Inputs";isc.A.editorType="SetScreenDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_SetScreenDataTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1,true);if(!_2)return true;var _3,_4=this.dataContextBinding;if(_4){_3=isc.clone(_4);for(var _5 in _3){var _6=_3[_5];for(var _7 in _6){_6[_7]=this.getDynamicValue(_6[_7],_1)}}}
if(_3){if(isc.isA.ScreenLoader(_2)){_2.setDataContextBinding(_3)}else{_2.setDataContext(_3)}}
return true},isc.A.getElementDescription=function isc_SetScreenDataTask_getElementDescription(){var _1=this.componentId;return"Set Screen Inputs on '"+_1+"'"});isc.B._maxIndex=isc.C+2;isc.defineClass("GetPropertiesTask","ComponentTask");isc.A=isc.GetPropertiesTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["Canvas","FormItem"];isc.A.classDescription="Get properties of a component or form control";isc.A.editorType="GetPropertiesTaskEditor";isc.B.push(isc.A.executeElement=function isc_GetPropertiesTask_executeElement(_1){var _2=this.getTargetComponent(_1,true);if(!_2)return true;var _3=this.properties;if(!isc.isAn.Array(_3))_3=[_3];var _4={};for(var i=0;i<_3.length;i++){var _6=_3[i],_7,_8;try{_8=this.getPropertyValue(_2,_6)}catch(ex){_8=_7}
_4[_6]=_8}
_1.setTaskOutput(this,_4);return true},isc.A.getPropertyValue=function isc_GetPropertiesTask_getPropertyValue(_1,_2){var _3=this.getPropertyComponent(_1),_4=_3&&_3.getPropertyValue(_2);return _4},isc.A.getPropertyComponent=function isc_GetPropertiesTask_getPropertyComponent(_1){var _2;if(isc.isA.DynamicForm(_1)){var _3=this.targetFieldName;if(!_3){isc.logWarn("Target field not identified by targetFieldName. Task skipped");return null}
var _4=_1.getField(_3);if(!_4){isc.logWarn("Target field, "+_3+", not found. Task skipped");return null}
_2=_4}else{_2=_1}
return _2},isc.A.getOutputSchema=function isc_GetPropertiesTask_getOutputSchema(){if(!this.$214x){var _1=this.getTargetComponent(this.process,true);if(!_1)return null;var _2=this.getPropertyComponent(_1),_3=_2&&isc.DS.getNearestSchema(_2);if(_3){var _4=this.properties,_5=[];for(var i=0;i<_4.length;i++){var _7=_4[i],_8=_3.getField(_7);if(_8){_5.add(_8)}}
if(_5.length==0){}
if(_5.length>0){for(var i=0;i<_5.length;i++){var _8=_5[i];_5[i]={name:_8.name,title:_8.title,type:_8.type}}
this.$214x=isc.DS.create({addGlobalId:false,clientOnly:true,fields:_5})}}}
return this.$214x},isc.A.destroy=function isc_GetPropertiesTask_destroy(){if(this.$214x)this.$214x.destroy();this.Super("destroy",arguments)},isc.A.getElementDescription=function isc_GetPropertiesTask_getElementDescription(){var _1=this.componentId,_2=this.targetFieldName,_3=(this.properties?": "+this.properties.join(", "):"");if(_2){_1+=", field "+_2}
return"Get properties from '"+_1+"'"+_3});isc.B._maxIndex=isc.C+6;isc.defineClass("SetPropertiesTask","ComponentTask");isc.A=isc.SetPropertiesTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["Canvas","FormItem"];isc.A.classDescription="Set properties of a component or form control";isc.A.editorType="SetPropertiesTaskEditor";isc.B.push(isc.A.executeElement=function isc_SetPropertiesTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1,true);if(!_2)return true;var _3=this.getPropertyComponent(_2);if(!_3)return true;var _4=this.properties;if(!isc.isAn.Array(_4))_4=[_4];var _5={};for(var i=0;i<_4.length;i++){var _7=_4[i],_8=_7.name,_9=this.getDynamicValue(_7.value,_1);_5[_8]=_9}
try{_3.setProperties(_5)}catch(ex){}
return true},isc.A.getPropertyComponent=function isc_SetPropertiesTask_getPropertyComponent(_1){var _2=_1;if(isc.isA.DynamicForm(_1)){var _3=this.targetFieldName,_4=_3&&_1.getField(_3);if(_3&&_4){_2=_4}else if(_3){isc.logWarn("Target field, "+_3+", not found. Task skipped");return null}}else{_2=_1}
return _2},isc.A.getElementDescription=function isc_SetPropertiesTask_getElementDescription(){var _1=this.componentId,_2=this.targetFieldName,_3=(this.properties?": "+this.properties.getProperty("name").join(", "):"");if(_2){_1+=", field "+_2}
return"Set properties on '"+_1+"'"+_3});isc.B._maxIndex=isc.C+3;isc.defineClass("PrintCanvasTask","ComponentTask");isc.A=isc.PrintCanvasTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["Canvas"];isc.A.typeTitle="Print";isc.A.classDescription="Print canvas contents";isc.A.editorType="PrintCanvasTaskEditor";isc.B.push(isc.A.executeElement=function isc_PrintCanvasTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;isc.Canvas.showPrintPreview(_2,this.printProperties,this.printCanvasTask,function(){_1.start()});return false},isc.A.getElementDescription=function isc_PrintCanvasTask_getElementDescription(){return"Print '"+this.componentId+"'"});isc.B._maxIndex=isc.C+2;isc.defineClass("ShowNextToComponentTask","ComponentTask");isc.A=isc.ShowNextToComponentTask;isc.A.actionMapping={target:"componentId",source:"nextToComponentId",paramMap:[null,"side","canOcclude","skipAnimation"]};isc.A=isc.ShowNextToComponentTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="Canvas";isc.A.typeTitle="Show Next To";isc.A.classDescription="Show a component next to some other component";isc.A.editorType="ShowNextToComponentTaskEditor";isc.B.push(isc.A.executeElement=function isc_ShowNextToComponentTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.nextToComponentId;if(!_3){this.logWarn("nextToComponentId not specified on task. Task skipped.");return true}
var _4=this.getLocalComponent(_1,_3);if(!_4){this.logWarn("nextToComponentId '"+_3+"' not found. Task skipped.");return true}
_2.showNextTo(_4,this.side,this.canOcclue,this.skipAnimation);return true},isc.A.getElementDescription=function isc_ShowNextToComponentTask_getElementDescription(){var _1=(this.nextToComponentId?"'"+this.nextToComponentId+"'":"component");return"Show '"+this.componentId+"' next to "+_1},isc.A.updateGlobalIDReferences=function isc_ShowNextToComponentTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.nextToComponentId&&this.nextToComponentId==_1){this.nextToComponentId=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+3;isc.defineClass("NavigateSplitPaneTask","ComponentTask");isc.A=isc.NavigateSplitPaneTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["SplitPane","TriplePane"];isc.A.typeTitle="Go to Pane";isc.A.classDescription="Move to a particular pane of a SplitPane or TriplePane, updating data based on what's selected";isc.A.editorType="NavigateSplitPaneTaskEditor";isc.B.push(isc.A.executeElement=function isc_NavigateSplitPaneTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.getDynamicValue(this.title,_1);var _4=this.targetPane;_2.navigatePane(_4,_3);if(this.showRecursively!=false){if(_4==null){if(_2.$137t()){_4="list"}else{_4="detail"}}
if(_4){var _5=_2[_4+"Pane"];if(_5){_5.showRecursively()}}}
return true},isc.A.getElementDescription=function isc_NavigateSplitPaneTask_getElementDescription(){var _1=this.targetPane.substring(0,1).toUpperCase()+this.targetPane.substring(1);return"Navigate "+_1+" Pane of '"+this.componentId+"'"});isc.B._maxIndex=isc.C+2;isc.defineClass("AddScreenTask","ComponentTask");isc.A=isc.AddScreenTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["Layout","SectionStack","TabSet"];isc.A.classDescription="Add screen to component as a new member, section or tab";isc.A.editorType="AddScreenTaskEditor";isc.A.errorBorder="1px solid red";isc.A.errorText="Screen '${screenName}' could not be loaded";isc.A.errorTextColor="red";isc.A.errorScreenCrashed="Screen crashed on creation";isc.A.errorLabelDefaults={_constructor:isc.Label,width:"100%",height:"100%",align:"center"};isc.B.push(isc.A.executeElement=function isc_AddScreenTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1,true);if(!_2)return true;var _3=this.getTextFormulaValue(this.titleFormula,_1)||this.getDynamicValue(this.title,_1);var _4=this.resolveDataContextBinding(this.dataContextBinding,_1);if(isc.isA.TabSet(_2)){var _5={title:_3,canClose:this.canClose};_2.addTab(_5);_2.selectTab(_5);this.createScreen(this.screenName,_4,function(_8){_2.setTabPane(_5,_8)})}else if(isc.isA.SectionStack(_2)){_2.addSection({title:_3,canClose:this.canClose});var _6=_2.getSectionNames(),_7=_6[_6.length-1];this.createScreen(this.screenName,_4,function(_8){_2.setItems(_7,_8);_2.expandSection(_7)})}else{this.createScreen(this.screenName,_4,function(_8){_2.addMember(_8)})}
return true},isc.A.resolveDataContextBinding=function isc_AddScreenTask_resolveDataContextBinding(_1,_2){if(!_1)return null;var _3=isc.clone(_1);for(var _4 in _3){var _5=_3[_4];for(var _6 in _5){_5[_6]=this.getDynamicValue(_5[_6],_2)}}
return _3},isc.A.createScreen=function isc_AddScreenTask_createScreen(_1,_2,_3){var _4=this;isc.ScreenLoader.loadScreen(_1,function(_6){var _5;if(_6){_5=_4.createErrorScreen(_1,_6)}
if(!_5){try{_5=isc.ScreenLoader.createScreen(_1)}catch(ex){_5=_4.createErrorScreen(_1,_4.errorScreenCrashed)}
if(_2&&_5&&_5.setDataContext){_5.setDataContext(_2)}}
_4.fireCallback(_3,"screen",[_5])})},isc.A.createErrorScreen=function isc_AddScreenTask_createErrorScreen(_1,_2){var _3="<span style='color: "+this.errorTextColor+"'>"+this.errorText.evalDynamicString(this,{screenName:_1})+"<p>"+_2+"</span>";return this.createAutoChild("errorLabel",{contents:_3,border:this.errorBorder})},isc.A.getElementDescription=function isc_AddScreenTask_getElementDescription(){var _1=this.componentId,_2=this.screenName;return"Add screen "+(_2?"'"+_2+"'":"")+" to '"+_1+"'"});isc.B._maxIndex=isc.C+5;isc.defineClass("LogOutTask","ProcessElement");isc.A=isc.LogOutTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.classDescription="Logs the current user out of the application";isc.A.editorType=null;isc.B.push(isc.A.executeElement=function isc_LogOutTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=(isc.Auth?isc.Auth.logOutURL:null);if(!_2){isc.logWarn("logOutURL not specified on Auth class. Task skipped");return true}
isc.Auth.logOut();return true},isc.A.getElementDescription=function isc_LogOutTask_getElementDescription(){return"Log out the current user"});isc.B._maxIndex=isc.C+2;isc.defineClass("ResetPasswordTask","ProcessElement");isc.A=isc.ResetPasswordTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.classDescription="Sends the user to a screen to reset their password";isc.A.editorType=null;isc.B.push(isc.A.executeElement=function isc_ResetPasswordTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=(isc.Auth?isc.Auth.resetPasswordURL:null);if(!_2){isc.logWarn("resetPasswordURL not specified on Auth class. Task skipped");return true}
isc.Auth.resetPassword();return true},isc.A.getElementDescription=function isc_ResetPasswordTask_getElementDescription(){return"Reset user password"});isc.B._maxIndex=isc.C+2;isc.defineClass("SendEmailTask","ProcessElement");isc.A=isc.SendEmailTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.editorType="SendEmailTaskEditor";isc.A.mockModeNotifyMessage="Workflow Mock Mode - in live mode, would send Email<p>To: ${to}<br>Subject: ${subject}<br>Message: ${message}";isc.B.push(isc.A.executeElement=function isc_SendEmailTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getDynamicValue(this.to,_1),_3=this.getTextFormulaValue(this.subjectFormula,_1)||this.getDynamicValue(this.subject,_1),_4=this.getDynamicValue(this.message,_1);if(this.isMockModeEnabled(_1)){var _5=this.mockModeNotifyMessage.evalDynamicString(this,{to:_2,subject:_3,message:_4});isc.Notify.addMessage(_5);return true}
var _6=isc.DS.get("isc_sendEmail");if(!_6){this.logWarn("isc_sendEmail DataSource not found. Cannot send email.");return}
var _7=isc.addProperties({},this.requestProperties,{operationId:"email",willHandleError:true});var _8={to:_2,subject:_3,message:_4};var _9=this;_6.addData(_8,function(_11,_8,_12){_11=_11||{};var _10=_11.results;if(_11.isStructured&&(!_10||_10.status<0||(_10.status==null&&_11.status<0)))
{if(!isc.RPC.runDefaultErrorHandling(_11,_12,_9.errorFormatter)){_9.fail(_1);return}}
_1.start()},_7);return false},isc.A.fail=function isc_SendEmailTask_fail(_1){if(!this.failureElement){this.logInfo("SendEmailTask does not have a failureElement. Process is aborting.")}
if(this.failureElement=="next"){_1.start()}else{_1.setNextElement(this.failureElement)}},isc.A.getElementDescription=function isc_SendEmailTask_getElementDescription(){return(this.to?"Send email to "+this.to:"")});isc.B._maxIndex=isc.C+3;isc.defineClass("SendSMSTask","ProcessElement");isc.A=isc.SendSMSTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.editorType="SendSMSTaskEditor";isc.A.mockModeNotifyMessage="Workflow Mock Mode - in live mode, would send SMS<p>To: ${to}<br>Message: ${message}";isc.B.push(isc.A.executeElement=function isc_SendSMSTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getDynamicValue(this.to,_1),_3=this.getDynamicValue(this.message,_1);if(this.isMockModeEnabled(_1)){var _4=this.mockModeNotifyMessage.evalDynamicString(this,{to:_2,message:_3});isc.Notify.addMessage(_4);return true}
var _5=isc.DS.get("isc_sendSMS");if(!_5){this.logWarn("isc_sendSMS DataSource not found. Cannot send message.");return}
var _6=isc.addProperties({},this.requestProperties,{operationId:"sms",willHandleError:true});var _7={to:_2,message:_3};var _8=this;_5.addData(_7,function(_10,_7,_11){_10=_10||{};var _9=_10.results;if(_10.isStructured&&(!_9||_9.status<0||(_9.status==null&&_10.status<0)))
{if(!isc.RPC.runDefaultErrorHandling(_10,_11,_8.errorFormatter)){_8.fail(_1);return}}
_1.start()},_6);return false},isc.A.fail=function isc_SendSMSTask_fail(_1){if(!this.failureElement){this.logInfo("SendSMSTask does not have a failureElement. Process is aborting.")}
if(this.failureElement=="next"){_1.start()}else{_1.setNextElement(this.failureElement)}},isc.A.getElementDescription=function isc_SendSMSTask_getElementDescription(){return(this.to?"Send SMS to "+this.to:"")});isc.B._maxIndex=isc.C+3;isc.defineClass("SetSectionTitleTask","ComponentTask");isc.A=isc.SetSectionTitleTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="SectionStack";isc.A.classDescription="Sets the title of a section in a SectionStack";isc.A.editorType="SetSectionTitleTaskEditor";isc.B.push(isc.A.executeElement=function isc_SetSectionTitleTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.targetSectionName;if(!_3&&this.targetSectionTitle){var _4=_2.getSectionNames();for(var i=0;i<_4.length;i++){var _6=_2.getSectionHeader(_4[i]);if(_6&&_6.title==this.targetSectionTitle){_3=_4[i];break}}}
if(!_3){isc.logWarn("Target section not identified by targetSectionName or targetSectionTitle. Task skipped");return true}
var _7=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.title,_1);_2.setSectionTitle(_3,_7);return true},isc.A.getElementDescription=function isc_SetSectionTitleTask_getElementDescription(){return"Set '"+this.componentId+"' section title"});isc.B._maxIndex=isc.C+2;isc.defineClass("SetButtonTitleTask","ComponentTask");isc.A=isc.SetButtonTitleTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["Button","Window"];isc.A.classDescription="Sets the title of a button or window";isc.A.editorType="SetButtonTitleTaskEditor";isc.B.push(isc.A.executeElement=function isc_SetButtonTitleTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.title,_1);_2.setTitle(_3);return true},isc.A.getElementDescription=function isc_SetButtonTitleTask_getElementDescription(){var _1="Set '"+this.componentId+"' title";return _1});isc.B._maxIndex=isc.C+2;isc.defineClass("SetLabelTextTask","ComponentTask");isc.A=isc.SetLabelTextTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="Label";isc.A.classDescription="Sets the text of a label";isc.B.push(isc.A.executeElement=function isc_SetLabelTextTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.value,_1);_2.setContents(_3);return true},isc.A.getElementDescription=function isc_SetLabelTextTask_getElementDescription(){return"Set '"+this.componentId+"' text"});isc.B._maxIndex=isc.C+2;isc.defineClass("ShowComponentTask","ComponentTask");isc.A=isc.ShowComponentTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="Canvas";isc.A.typeTitle="Show";isc.A.classDescription="Show a currently hidden component";isc.A.editorType="ShowComponentTaskEditor";isc.B.push(isc.A.executeElement=function isc_ShowComponentTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;_2.show();return true},isc.A.getElementDescription=function isc_ShowComponentTask_getElementDescription(){return"Show "+this.componentId});isc.B._maxIndex=isc.C+2;isc.defineClass("HideComponentTask","ComponentTask");isc.A=isc.HideComponentTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="Canvas";isc.A.typeTitle="Hide";isc.A.classDescription="Hide a component";isc.A.editorType="HideComponentTaskEditor";isc.B.push(isc.A.executeElement=function isc_HideComponentTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;_2.hide();return true},isc.A.getElementDescription=function isc_HideComponentTask_getElementDescription(){return"Hide "+this.componentId});isc.B._maxIndex=isc.C+2;isc.defineClass("FormHideFieldTask","ComponentTask");isc.A=isc.FormHideFieldTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="DynamicForm";isc.A.typeTitle="Show / Hide Field";isc.A.classDescription="Show or hide a field of a form";isc.A.editorType="FormHideFieldTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormHideFieldTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.targetField;if(!_3){this.logWarn("targetField not specified on task. Task skipped.");return true}
var _4=this.hide;if(isc.isA.String(_4))_4=(_4=="true");if(_4)_2.hideItem(_3);else _2.showItem(_3);return true},isc.A.getElementDescription=function isc_FormHideFieldTask_getElementDescription(){var _1=this.hide;if(isc.isA.String(_1))_1=(_1=="true");var _2=(_1?"Hide":"Show");return _2+" '"+this.componentId+"."+this.targetField+"'"});isc.B._maxIndex=isc.C+2;isc.defineClass("NavigateListPaneTask","ComponentTask");isc.A=isc.NavigateListPaneTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="TriplePane";isc.A.classDescription="Navigate to the List pane in a TriplePane, using the selection in the Navigation pane to refresh the list, if applicable";isc.B.push(isc.A.executeElement=function isc_NavigateListPaneTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.getDynamicValue(this.title,_1);_2.navigateListPane(_3);return true},isc.A.getElementDescription=function isc_NavigateListPaneTask_getElementDescription(){return"Navigate '"+this.componentId+"' list pane"});isc.B._maxIndex=isc.C+2;isc.defineClass("NavigateDetailPaneTask","ComponentTask");isc.A=isc.NavigateDetailPaneTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["SplitPane","TriplePane"];isc.A.classDescription="Navigate to the Detail pane in a SplitPane or TriplePane, using the selection in the Navigation pane (for SplitPane) or List Pane (for TriplePane)";isc.B.push(isc.A.executeElement=function isc_NavigateDetailPaneTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.getDynamicValue(this.title,_1);_2.navigateDetailPane(_3);return true},isc.A.getElementDescription=function isc_NavigateDetailPaneTask_getElementDescription(){return"Navigate '"+this.componentId+"' detail pane"});isc.B._maxIndex=isc.C+2;isc.defineClass("GridStartEditingTask","GridEditRecordTask");isc.A=isc.GridStartEditingTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.executeElement=function isc_GridStartEditingTask_executeElement(_1){_1.passThruTaskOutput(this);var _2=this.getTargetComponent(_1);if(!_2)return true;var _3;if(this.initialValues){_3=this.$1950(this.initialValues,null,null,_1)}
_2.startEditingNew(_3);return true},isc.A.getElementDescription=function isc_GridStartEditingTask_getElementDescription(){return"Edit '"+this.componentId+"' new record"},isc.A.updateLastElementBindingReferences=function isc_GridStartEditingTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.updateLastElementInValues(this.initialValues,_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_GridStartEditingTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.updateGlobalIDInValues(this.initialValues,_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("GridFetchRelatedDataTask","ComponentTask");isc.A=isc.GridFetchRelatedDataTask;isc.A.actionMapping={target:"componentId",source:"recordSourceComponent"};isc.A=isc.GridFetchRelatedDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","DetailViewer","ListGrid","TileGrid","DetailViewer"];isc.A.componentRequiresDataSource=true;isc.A.classDescription="Fetch data related to a record shown in another component";isc.A.editorType="FetchRelatedDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridFetchRelatedDataTask_executeElement(_1){this.process=_1;var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.recordSourceComponent;if(!_3){this.logWarn("recordSourceComponent not specified on task. Task skipped.");return true}
var _4=this.getLocalComponent(_1,_3);if(!_4){this.logWarn("recordSourceComponent '"+_3+"' not found. Task skipped.");return true}
var _5=this.dataSource||_4;var _6=null,_7=isc.isA.ListGrid(_4)||isc.isA.TileGrid(_4);if(_7&&_4.anySelected()){_6=_4.getSelectedRecord()}else if(isc.isA.DynamicForm(_4)){_6=_4.getValues()}else if(_7){_6=_4.getRecord(0)}else if(isc.isA.DetailViewer(_4)){_6=_4.data[0]}
if(!_6)return true;var _8=this;var _9=_2.fetchRelatedData(_6,_5,function(_11){var _10=(_11.data&&_11.data.length>0?_11.data[0]:null);_1.setTaskOutput(_8,_10);_1.start()},null,true);if(!_9){var _10=_2.getRecord(0);_1.setTaskOutput(_8,_10)}
return!_9},isc.A.getOutputSchema=function isc_GridFetchRelatedDataTask_getOutputSchema(){var _1=this.getTargetComponent(this.process);if(!_1)return null;var _2=_1.dataSource;if(_2&&(_2.getClassName==null||_2.getClassName()!="DataSource")){_2=isc.DataSource.get(_2)}
return _2},isc.A.getElementDescription=function isc_GridFetchRelatedDataTask_getElementDescription(){var _1=(this.recordSourceComponent?"in '"+this.recordSourceComponent+"'":"");return"Fetch '"+this.componentId+"' data from related record "+_1},isc.A.updateGlobalIDReferences=function isc_GridFetchRelatedDataTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.recordSourceComponent&&this.recordSourceComponent==_1){this.recordSourceComponent=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+4;isc._nonDebugModules=(isc._nonDebugModules!=null?isc._nonDebugModules:[]);isc._nonDebugModules.push('Workflow');isc.checkForDebugAndNonDebugModules();isc._moduleEnd=isc._Workflow_end=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc.Log&&isc.Log.logIsInfoEnabled('loadTime'))isc.Log.logInfo('Workflow module init time: '+(isc._moduleEnd-isc._moduleStart)+'ms','loadTime');delete isc.definingFramework;if(isc.Page)isc.Page.handleEvent(null,"moduleLoaded",{moduleName:'Workflow',loadTime:(isc._moduleEnd-isc._moduleStart)});}else{if(window.isc&&isc.Log&&isc.Log.logWarn)isc.Log.logWarn("Duplicate load of module 'Workflow'.");}
