if(!window.SKYVE){window.SKYVE={}}SKYVE.Util=function(){var a=window.location+"";a=a.substring(0,a.lastIndexOf("/")+1);var b=function(d,e){if(e!=null){if(d.readyState){d.onreadystatechange=function(){if(d.readyState=="loaded"||d.readyState=="complete"){d.onreadystatechange=null;e()}}}else{d.onload=e}}var c=document.getElementsByTagName("HEAD");if(c[0]!=null){c[0].appendChild(d)}};return{customer:null,v:null,googleMapsV3ApiKey:null,ckEditorConfigFileUrl:null,mapCentre:null,mapZoom:1,CONTEXT_URL:a,allowedReportFormats:null,loadJS:function(d,e){var c=document.createElement("SCRIPT");c.type="text/javascript";c.src=d;b(c,e)},loadCSS:function(d,e){var c=document.createElement("LINK");c.type="text/css";c.rel="stylesheet";c.href=d;b(c,e)},geoLocate:function(c){if(navigator.geolocation){$(function(){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",msgs:[{summary:"GeoLocating",detail:"Please wait...",severity:"info"}]})});navigator.geolocation.getCurrentPosition(function(d){$(function(){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",msgs:[{summary:"GeoLocating",detail:"Done",severity:"info"}]})});c("POINT ("+d.coords.longitude+" "+d.coords.latitude+")")},function(d){$(function(){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",msgs:[{summary:"GeoLocating",detail:d.message,severity:"warn"}]})})},{enableHighAccuracy:true})}},setTouchCookie:function(){var d=false;if("maxTouchPoints" in navigator){d=navigator.maxTouchPoints>0}else{if("msMaxTouchPoints" in navigator){d=navigator.msMaxTouchPoints>0}else{var c=window.matchMedia&&matchMedia("(pointer:coarse)");if(c&&c.media==="(pointer:coarse)"){d=!!c.matches}else{if("orientation" in window){d=true}}}}if(d){document.cookie="touch=1; path=/"}else{document.cookie="touch=0; path=/"}},passwordStrength:{0:"Worst",1:"Bad",2:"Weak",3:"Good",4:"Strong"},progressBarPower:{0:"1%",1:"25%",2:"50%",3:"75%",4:"100%"},progressBarColour:{0:"#D73F40",1:"#DC6551",2:"#F2B84F",3:"#BDE952",4:"#3ba62f"}}}();SKYVE.GMap=function(){var b=null;var a=function(d){var c=null;if(d=="point"){c=[google.maps.drawing.OverlayType.MARKER]}else{if(d=="line"){c=[google.maps.drawing.OverlayType.POLYLINE]}else{if(d=="polygon"){c=[google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}else{if(d=="pointAndLine"){c=[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYLINE]}else{if(d=="pointAndPolygon"){c=[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}else{if(d=="lineAndPolygon"){c=[google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}else{c=[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}}}}}}return c};return{scatter:function(u,D,r,B){if(!b){b=new Wkt.Wkt()}var n=D.items;if(!n){return}if(B){for(var h in u._objects){var k=false;for(var w=0,s=n.length;w<s;w++){if(n[w].bizId===h){k=true;break}}if(!k){var A=u._objects[h];for(var w=0,s=A.overlays.length;w<s;w++){A.overlays[w].setMap(null);A.overlays[w]=null}delete A.overlays;delete u._objects[h]}}}else{for(var h in u._objects){var A=u._objects[h];for(var w=0,s=A.overlays.length;w<s;w++){A.overlays[w].setMap(null);A.overlays[w]=null}delete A.overlays;delete u._objects[h]}}for(var w=0,s=n.length;w<s;w++){var z=n[w];var E=u._objects[z.bizId];if(E){var t=(E.overlays.length==z.features.length);if(t){for(var v=0,q=E.overlays.length;v<q;v++){if(E.overlays[v].geometry!==z.features[v].geometry){t=false;break}}}if(!t){for(var v=0,q=E.overlays.length;v<q;v++){E.overlays[v].setMap(null);E.overlays[v]=null}delete E.overlays;delete u._objects[h];E=null}}if(!E){E={overlays:[]};for(var v=0,q=z.features.length;v<q;v++){var f=z.features[v];try{b.read(f.geometry)}catch(y){alert(f.geometry+" is invalid WKT.");continue}var d={editable:f.editable};if(f.strokeColour){d.strokeColor=f.strokeColour}if(f.fillColour){d.fillColor=f.fillColour}if(f.fillOpacity){d.fillOpacity=f.fillOpacity}if(f.iconRelativeFilePath){d.icon={url:SKYVE.Util.CONTEXT_URL+"resources?_n="+f.iconRelativeFilePath+"&_doc="+D._doc};if(f.iconAnchorX&&f.iconAnchorY){d.icon.anchor=new google.maps.Point(f.iconAnchorX,f.iconAnchorY);d.icon.origin=new google.maps.Point(0,0)}}var x=b.toObject(d);E.overlays.push(x);x.setMap(u.webmap);if(f.zoomable){x.bizId=z.bizId;x.geometry=f.geometry;x.fromTimestamp=z.fromTimestamp;x.toTimestamp=z.toTimestamp;x.mod=z.moduleName;x.doc=z.documentName;x.infoMarkup=z.infoMarkup;google.maps.event.addListener(x,"click",function(e){u.click(this,e)})}}u._objects[z.bizId]=E}}if(r){var g=new google.maps.LatLngBounds();var c=false;for(var p in u._objects){c=true;var E=u._objects[p];var C=E.overlays;for(var w=0,s=C.length;w<s;w++){var x=C[w];if(x.getPath){var o=x.getPath();for(var v=0,q=o.getLength();v<q;v++){g.extend(o.getAt(v))}}else{if(x.getPosition){g.extend(x.getPosition())}}}}if(c){if(g.getNorthEast().equals(g.getSouthWest())){if(u.webmap.getZoom()<15){u.webmap.setZoom(15)}if(x.getPosition!==undefined&&typeof x.getPosition==="function"){u.webmap.setCenter(g.getNorthEast())}}else{u.webmap.fitBounds(g)}}}},centre:function(){if(!b){b=new Wkt.Wkt()}var c=null;if(SKYVE.Util.mapCentre){try{b.read(SKYVE.Util.mapCentre);var f=b.components[0];c=new google.maps.LatLng(f.y,f.x)}catch(d){console.log(SKYVE.Util.mapCentre+" is malformed WKT Point format");SKYVE.Util.mapCentre=null;c=new google.maps.LatLng(0,0)}}else{c=new google.maps.LatLng(0,0)}return c},scatterValue:function(m,g){if(!b){b=new Wkt.Wkt()}if(!g){return}try{b.read(g)}catch(k){if(k.name==="WKTError"){alert("The WKT string is invalid.");return}}var j=b.toObject(m.webmap.defaults);if(b.type==="polygon"||b.type==="linestring"){}else{if(j.setEditable){j.setEditable(false)}}if(Wkt.isArray(j)){for(d in j){if(j.hasOwnProperty(d)&&(!Wkt.isArray(j[d]))){j[d].setMap(m.webmap);m._overlays.push(j[d])}}}else{j.setMap(m.webmap);m._overlays.push(j)}if(j.getBounds!==undefined&&typeof j.getBounds==="function"){m.webmap.fitBounds(j.getBounds())}else{if(j.getPath!==undefined&&typeof j.getPath==="function"){var f=new google.maps.LatLngBounds();var h=j.getPath();for(var d=0,c=h.getLength();d<c;d++){f.extend(h.getAt(d))}m.webmap.fitBounds(f)}else{if(m.webmap.getZoom()<15){m.webmap.setZoom(15)}if(j.getPosition!==undefined&&typeof j.getPosition==="function"){m.webmap.setCenter(j.getPosition())}}}},clear:function(e){for(var d=0,c=e._overlays.length;d<c;d++){e._overlays[d].setMap(null)}e._overlays.length=0},drawingTools:function(c){if(!b){b=new Wkt.Wkt()}c.webmap.drawingManager=new google.maps.drawing.DrawingManager({drawingControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM,drawingModes:a(c.drawingTools)}});c.webmap.drawingManager.setMap(c.webmap);google.maps.event.addListener(c.webmap.drawingManager,"overlaycomplete",function(e){SKYVE.GMap.clear(c);this.setDrawingMode(null);c._overlays.push(e.overlay);b.fromObject(e.overlay);var d=b.write();c.setFieldValue(d)})},geoLocator:function(d){if(navigator.geolocation){var c=document.createElement("DIV");c.style.backgroundColor="#fff";c.style.border="2px solid #fff";c.style.borderRadius="3px";c.style.boxShadow="0 2px 6px rgba(0,0,0,.3)";c.style.cursor="pointer";c.style.margin="10px";c.style.padding="5px";c.style.textAlign="center";c.title="Click to set your current position from your GPS";c.innerHTML='<i class="fa-solid fa-location-crosshairs"></i>';c.index=1;c.addEventListener("click",function(){navigator.geolocation.getCurrentPosition(function(e){SKYVE.GMap.clear(d);d.webmap.setDrawingMode(null);var e={lat:e.coords.latitude,lng:e.coords.longitude};var f=new google.maps.Marker({position:e,map:d.webmap});d._overlays.push(f);d.setFieldValue("POINT ("+e.coords.longitude+" "+e.coords.latitude+")");d.webmap.setZoom(15);d.webmap.setCenter(e)},function(e){alert(e.message)},{enableHighAccuracy:true})});d.webmap.geolocator=c;d.webmap.controls[google.maps.ControlPosition.LEFT].push(c)}},setDisabled:function(d,c){if(d.webmap){if(d.webmap.drawingManager){d.webmap.drawingManager.setOptions({drawingControl:(!c)})}if(d.webmap.geolocator){d.webmap.geolocator.style.display=c?"none":"block"}}},refreshControls:function(d){var c=document.createElement("DIV");c.style.backgroundColor="#fff";c.style.border="2px solid #fff";c.style.borderRadius="3px";c.style.boxShadow="0 2px 6px rgba(0,0,0,.3)";c.style.cursor="pointer";c.style.margin="10px";c.style.padding="5px";c.style.textAlign="center";c.title="Click to set the refresh rate of the map";c.innerHTML='<input type="number" min="0" max="500" step="1" value="'+d.refreshTime+'" size="3" /><input type="checkbox"'+(d._refreshRequired?" checked":"")+"><label>Refresh</label>";c.index=1;c.children[0].addEventListener("change",function(){d.refreshTime=this.value;if(d._refreshRequired){if(d._intervalId){clearInterval(d._intervalId)}d._intervalId=setInterval(d.rerender.bind(d),d.refreshTime*1000)}});c.children[1].addEventListener("click",function(){d._refreshRequired=this.checked;if(d._intervalId){clearInterval(d._intervalId);d._intervalId=null}if(d._refreshRequired){d.rerender();d._intervalId=setInterval(d.rerender.bind(d),d.refreshTime*1000)}});d.webmap.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(c)}}}();SKYVE.Leaflet=function(){var d=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/;var a=new RegExp("^"+d.source+"(\\s"+d.source+"){1,}");function b(l){var o=l.split(";");var w=o.pop();var t=(o.shift()||"").split("=").pop();var s=0;function h(x){var i=w.substring(s).match(x);if(!i){return null}else{s+=i[0].length;return i[0]}}function g(i){if(i&&t.match(/\d+/)){i.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+t}}}return i}function j(){h(/^\s*/)}function n(){j();var A=0;var y=[];var i=[y];var z=y;var x;while(x=h(/^(\()/)||h(/^(\))/)||h(/^(,)/)||h(a)){if(x==="("){i.push(z);z=[];i[i.length-1].push(z);A++}else{if(x===")"){if(z.length===0){return null}z=i.pop();if(!z){return null}A--;if(A===0){break}}else{if(x===","){z=[];i[i.length-1].push(z)}else{if(!x.split(/\s/g).some(isNaN)){Array.prototype.push.apply(z,x.split(/\s/g).map(parseFloat))}else{return null}}}}j()}if(A!==0){return null}return y}function r(){var x=[];var i;var y;while(y=h(a)||h(/^(,)/)){if(y===","){x.push(i);i=[]}else{if(!y.split(/\s/g).some(isNaN)){if(!i){i=[]}Array.prototype.push.apply(i,y.split(/\s/g).map(parseFloat))}}j()}if(i){x.push(i)}else{return null}return x.length?x:null}function q(){if(!h(/^(point(\sz)?)/i)){return null}j();if(!h(/^(\()/)){return null}var i=r();if(!i){return null}j();if(!h(/^(\))/)){return null}return{type:"Point",coordinates:i[0]}}function u(){if(!h(/^(multipoint)/i)){return null}j();var x=w.substring(w.indexOf("(")+1,w.length-1).replace(/\(/g,"").replace(/\)/g,"");w="MULTIPOINT ("+x+")";var i=n();if(!i){return null}j();return{type:"MultiPoint",coordinates:i}}function k(){if(!h(/^(multilinestring)/i)){return null}j();var i=n();if(!i){return null}j();return{type:"MultiLineString",coordinates:i}}function f(){if(!h(/^(linestring(\sz)?)/i)){return null}j();if(!h(/^(\()/)){return null}var i=r();if(!i){return null}if(!h(/^(\))/)){return null}return{type:"LineString",coordinates:i}}function m(){if(!h(/^(polygon(\sz)?)/i)){return null}j();var i=n();if(!i){return null}return{type:"Polygon",coordinates:i}}function v(){if(!h(/^(multipolygon)/i)){return null}j();var i=n();if(!i){return null}return{type:"MultiPolygon",coordinates:i}}function e(){var i=[];var x;if(!h(/^(geometrycollection)/i)){return null}j();if(!h(/^(\()/)){return null}while(x=p()){i.push(x);j();h(/^(,)/);j()}if(!h(/^(\))/)){return null}return{type:"GeometryCollection",geometries:i}}function p(){return q()||f()||m()||u()||k()||v()||e()}return g(p())}function c(e){if(e.type==="Feature"){e=e.geometry}function h(k){return k.join(" ")}function f(k){return k.map(h).join(", ")}function g(k){return k.map(f).map(i).join(", ")}function j(k){return k.map(g).map(i).join(", ")}function i(k){return"("+k+")"}switch(e.type){case"Point":return"POINT ("+h(e.coordinates)+")";case"LineString":return"LINESTRING ("+f(e.coordinates)+")";case"Polygon":return"POLYGON ("+g(e.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+f(e.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+j(e.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+g(e.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+e.geometries.map(c).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}return{scatter:function(u,D,r,B){var o=D.items;if(!o){return}if(B){for(var h in u._objects){var n=false;for(var w=0,s=o.length;w<s;w++){if(o[w].bizId===h){n=true;break}}if(!n){var A=u._objects[h];for(var w=0,s=A.overlays.length;w<s;w++){u.webmap.removeLayer(A.overlays[w]);A.overlays[w]=null}delete A.overlays;delete u._objects[h]}}}else{for(var h in u._objects){var A=u._objects[h];for(var w=0,s=A.overlays.length;w<s;w++){u.webmap.removeLayer(A.overlays[w]);A.overlays[w]=null}delete A.overlays;delete u._objects[h]}}for(var w=0,s=o.length;w<s;w++){var z=o[w];var E=u._objects[z.bizId];if(E){var t=(E.overlays.length==z.features.length);if(t){for(var v=0,q=E.overlays.length;v<q;v++){if(E.overlays[v].getLayers()[0].zoomData.geometry!==z.features[v].geometry){t=false;break}}}if(!t){for(var v=0,q=E.overlays.length;v<q;v++){u.webmap.removeLayer(E.overlays[v]);E.overlays[v]=null}delete E.overlays;delete u._objects[h];E=null}}if(!E){E={overlays:[]};for(var v=0,q=z.features.length;v<q;v++){var k=z.features[v];var f=b(k.geometry);f.properties={editable:k.editable};if(k.strokeColour){f.properties.color=k.strokeColour}if(k.fillColour){f.properties.fillColor=k.fillColour}if(k.fillOpacity){f.properties.fillOpacity=k.fillOpacity}if(k.iconRelativeFilePath){var y={iconUrl:"resources?_n="+k.iconRelativeFilePath+"&_doc="+D._doc};if(k.iconAnchorX&&k.iconAnchorY){y.iconAnchor=[k.iconAnchorX,k.iconAnchorY]}f.properties.icon=y}var x=L.geoJson(f,{pointToLayer:function(i,l){var j=i.properties;delete i.properties;if(j.icon){j.icon=L.icon(j.icon)}return L.marker(l,j)},style:function(j){var i=j.geometry.properties;delete j.geometry.properties;return i},onEachFeature:function(j,i){if(k.zoomable){i.zoomData={bizId:z.bizId,geometry:k.geometry,fromTimestamp:z.fromTimestamp,toTimestamp:z.toTimestamp,mod:z.moduleName,doc:z.documentName,infoMarkup:z.infoMarkup};i.bindPopup(function(l){return u.click(l)})}}});E.overlays.push(x);u.webmap.addLayer(x)}u._objects[z.bizId]=E}}if(r){var g=L.latLngBounds();var e=false;for(var p in u._objects){e=true;var E=u._objects[p];var C=E.overlays;for(var w=0,s=C.length;w<s;w++){var x=C[w];g.extend(x.getBounds())}}if(e){u.webmap.fitBounds(g,{maxZoom:15})}}},centre:function(){var f=null;if(SKYVE.Util.mapCentre){try{var g=b(SKYVE.Util.mapCentre);f=[g.coordinates[1],g.coordinates[0]]}catch(h){console.log(SKYVE.Util.mapCentre+" is malformed WKT Point format");SKYVE.Util.mapCentre=null;f=[0,0]}}else{f=[0,0]}return f},scatterValue:function(i,f){if(!f){return}var h=null;try{h=L.geoJson(b(f))}catch(g){console.log("The WKT string "+f+" is invalid.");return}h.addTo(i.webmap);i._overlays.push(h);i.webmap.fitBounds(h.getBounds(),{maxZoom:15})},clear:function(g){for(var f=0,e=g._overlays.length;f<e;f++){g.webmap.removeLayer(g._overlays[f])}g._overlays.length=0},drawingTools:function(f){var e=f.drawingTools;L.EditControl=L.Control.extend({options:{position:"topright"},onAdd:function(i){var g=L.DomUtil.create("div","leaflet-control leaflet-bar");var h=null;if((!e)||(e=="point")||(e=="pointAndLine")||(e=="pointAndPolygon")){h=L.DomUtil.create("a","",g);h.href="#";h.title="Create a new marker";h.innerHTML='<i class="fa-solid fa-location-dot"></i>';L.DomEvent.on(h,"click",L.DomEvent.stop).on(h,"click",function(){window.LAYER=f.webmap.editTools.startMarker.call(i.editTools)},this)}if((!e)||(e=="line")||(e=="pointAndLine")||(e=="lineAndPolygon")){h=L.DomUtil.create("a","",g);h.href="#";h.title="Create a new line";h.innerHTML='<i class="fa-solid fa-diagram-project"></i>';L.DomEvent.on(h,"click",L.DomEvent.stop).on(h,"click",function(){window.LAYER=f.webmap.editTools.startPolyline.call(i.editTools)},this)}if((!e)||(e=="polygon")||(e=="pointAndPolygon")||(e=="lineAndPolygon")){h=L.DomUtil.create("a","",g);h.href="#";h.title="Create a new rectangle";h.innerHTML='<i class="fa-solid fa-vector-square"></i>';L.DomEvent.on(h,"click",L.DomEvent.stop).on(h,"click",function(){window.LAYER=f.webmap.editTools.startRectangle.call(i.editTools)},this);h=L.DomUtil.create("a","",g);h.href="#";h.title="Create a new polygon";h.innerHTML='<i class="fa-solid fa-draw-polygon"></i>';L.DomEvent.on(h,"click",L.DomEvent.stop).on(h,"click",function(){window.LAYER=f.webmap.editTools.startPolygon.call(i.editTools)},this)}return g}});f.webmap.editControl=new L.EditControl();f.webmap.addControl(f.webmap.editControl);f.webmap.on("editable:drawing:commit",function(g){SKYVE.Leaflet.clear(f);g.layer.toggleEdit();f._overlays.push(g.layer);f.setFieldValue(c(g.layer.toGeoJSON(12)))})},geoLocator:function(e){if(navigator.geolocation){L.GeoControl=L.Control.extend({options:{position:"bottomleft"},onAdd:function(h){var f=L.DomUtil.create("div","leaflet-control leaflet-bar");var g=L.DomUtil.create("a","",f);g.href="#";g.title="Click to set your current position from your GPS";g.innerHTML='<i class="fa-solid fa-location-crosshairs"></i>';L.DomEvent.on(g,"click",L.DomEvent.stop).on(g,"click",function(){if(e.webmap.editTools.drawing()){e.webmap.editTools.commitDrawing()}navigator.geolocation.getCurrentPosition(function(i){SKYVE.Leaflet.clear(e);var k=[i.coords.latitude,i.coords.longitude];var j=L.marker(k);j.addTo(e.webmap);e._overlays.push(j);e.setFieldValue("POINT ("+i.coords.longitude+" "+i.coords.latitude+")");e.webmap.setZoom(15);e.webmap.panTo(k)},function(i){alert(i.message)},{enableHighAccuracy:true})},this);return f}});e.webmap.geoControl=new L.GeoControl();e.webmap.addControl(e.webmap.geoControl)}},setDisabled:function(f,e){if(f.webmap){if(f.webmap.editControl){f.webmap.editControl.getContainer().style.display=e?"none":"block"}if(f.webmap.geoControl){f.webmap.geoControl.getContainer().style.display=e?"none":"block"}}},refreshControls:function(e){L.GeoControl=L.Control.extend({options:{position:"bottomleft"},onAdd:function(g){var f=L.DomUtil.create("div","leaflet-control");f.innerHTML='<input type="number" min="0" max="500" step="1" value="'+e.refreshTime+'" size="3" /><input type="checkbox"'+(e._refreshRequired?" checked":"")+"><label>Refresh</label>";f.children[0].addEventListener("change",function(){e.refreshTime=this.value;if(e._refreshRequired){if(e._intervalId){clearInterval(e._intervalId)}e._intervalId=setInterval(e.rerender.bind(e),e.refreshTime*1000)}});f.children[1].addEventListener("click",function(){e._refreshRequired=this.checked;if(e._intervalId){clearInterval(e._intervalId);e._intervalId=null}if(e._refreshRequired){e.rerender();e._intervalId=setInterval(e.rerender.bind(e),e.refreshTime*1000)}});return f}});e.webmap.addControl(new L.GeoControl())}}}();SKYVE.PF=function(){var b=false;var a=function(){var c=sessionStorage.sessionHistory;if(c){c=JSON.parse(c)}else{c=[]}return c};return{getById:function(c){return $(PrimeFaces.escapeClientId(c))},getByIdEndsWith:function(c){return $('[id$="'+c+'"]')},contentOverlayOnShow:function(d,c){SKYVE.PF.getById(d+"_overlayiframe").attr("src",c)},contentOverlayOnHide:function(c){SKYVE.PF.getById(c+"_overlayiframe").attr("src","")},afterContentUpload:function(d,g,f,e){top.$('[id$="_'+d+'_hidden"]').val(g);var c="content?_n="+g+"&_doc="+f+"&_b="+d.replace(/\_/g,".");top.$('[id$="_'+d+'_link"]').attr("href",c).text(e).attr("onclick","return true");top.$('[id$="_'+d+'_image"]').attr("src",c);top.PF(d+"Overlay").hide()},clearContentImage:function(c){$('[id$="_'+c+'_hidden"]').val("");$('[id$="_'+c+'_image"]').attr("src","images/blank.gif")},clearContentLink:function(c){$('[id$="_'+c+'_hidden"]').val("");$('[id$="_'+c+'_link"]').attr("href","javascript:void(0)").text("<Empty>").attr("onclick","return false")},contentMarkupOnShow:function(f,e,d){var c=d+="&_id="+$('[id$="_'+e+'_hidden"]').val();SKYVE.PF.getById(f+"_markupiframe").attr("src",c)},contentMarkupOnHide:function(c){SKYVE.PF.getById(c+"_markupiframe").attr("src","")},afterMarkupApply:function(d,g,f,e){top.$('[id$="_'+d+'_hidden"]').val(g);var c="content?_n="+g+"&_doc="+f+"&_b="+d.replace(/\_/g,".");top.$('[id$="_'+d+'_link"]').attr("href",c).text(e).attr("onclick","return true");top.$('[id$="_'+d+'_image"]').attr("src",c);top.PF(d+"Markup").hide()},tabChange:function(d,e,f,c){sessionStorage["tab_"+d+"_"+e+"_"+f]=c;if(SKYVE.BizMap){SKYVE.BizMap.resizeAll()}if(SKYVE.BizMapPicker){SKYVE.BizMapPicker.resizeAll()}},getTextElement:function(c){return SKYVE.PF.getById(c)},getTextValue:function(c){return SKYVE.PF.getTextElement(c).val()},setTextValue:function(d,c){SKYVE.PF.getTextElement(d).val(c)},getPasswordElement:function(c){return SKYVE.PF.getById(c+"password")},getPasswordValue:function(c){return SKYVE.PF.getPasswordElement(c).val()},setPasswordValue:function(d,c){SKYVE.PF.getPasswordElement(d).val(c)},getComboElement:function(c){return SKYVE.PF.getById(c)},getLookupElement:function(c){return SKYVE.PF.getById(c)},getLookupValue:function(c){return SKYVE.PF.getById(c+"_hinput").val()},setLookupValue:function(d,c){SKYVE.PF.getById(d+"_hinput").val(c)},getLookupDescription:function(c){return SKYVE.PF.getById(c+"_input").val()},setLookupDescription:function(d,c){SKYVE.PF.getById(d+"_input").val(c)},getCheckboxElement:function(c){return SKYVE.PF.getById(c)},getCheckboxValue:function(d){var c=SKYVE.PF.getById(d+"_input").val();if(c=="0"){return null}else{if(c=="1"){return true}else{if(c=="2"){return false}else{return SKYVE.PF.getById(d+"_input").is(":checked")}}}},setCheckboxValue:function(g,c){SKYVE.PF.getById(g+"_input").prop("checked",c);var f=SKYVE.PF.getById(g);var e=f.find(".ui-chkbox-box");var d=e.find(".ui-chkbox-icon");if(c){e.addClass("ui-state-active");d.addClass("ui-icon ui-icon-check")}else{e.removeClass("ui-state-active");d.removeClass("ui-icon ui-icon-check")}},establishHistory:function(){var e=a();if(e.length==0){var c=window.location.href;if(c.match(/.*[\?|\&]a\=e.*/)||c.match(/.*[\?|\&]a\=e\&.*/)){var d=document.referrer;if((!d)||(d=="")||(d==c)){d=SKYVE.Util.CONTEXT_URL}e.push(d);sessionStorage.sessionHistory=JSON.stringify(e)}}},startHistory:function(c){sessionStorage.sessionHistory="[]";window.location.assign(c)},pushHistory:function(c){var d=a();d.push(window.location.href);sessionStorage.sessionHistory=JSON.stringify(d);if(c){window.location.assign(c)}},popHistory:function(e){var d=a();if(d.length>0){var c=d.pop();sessionStorage.sessionHistory=JSON.stringify(d);if(e){window.location.assign(c)}}},saveHistory:function(f,r,t){var d=a();var h=false;for(var o=0;o<d.length;o++){var e=d[o];var q=e.split(/\?|\&/);var m="m="+f;var s="d="+r;var l=false;var c=false;var p=false;var g=false;for(var n=0;n<q.length;n++){var k=q[n];if(k=="a=e"){l=true}else{if(k==m){c=true}else{if(k==s){p=true}else{if(k.startsWith("i=")){g=true}}}}}if(l&&c&&p&&g){e+="&i="+t;d[o]=e;h=true}}if(h){sessionStorage.sessionHistory=JSON.stringify(d)}if(window.history){if(history.replaceState){var e=window.location.href+"&i="+t;history.replaceState({},"",e)}}},toggleFilters:function(c){var f="hiddenFilter";var e=$('[id$="'+c+'"]');if(e!=null){var d=function(){var g=$(this);if(g.hasClass(f)){g.removeClass(f)}else{g.addClass(f)}};e.find(".ui-filter-column").each(d);e.find(".ui-column-customfilter").each(d)}},onPushMessage:function(e){var g=[];for(var f=0,d=e.length;f<d;f++){var c=e[f];if(c.type=="g"){g.push({severity:c.severity,summary:c.message})}else{if(c.type=="m"){PrimeFaces.showMessageInDialog({severity:c.severity,summary:"",detail:c.message,escape:false})}else{if(c.type=="r"){pushRerender()}else{if(c.type=="j"){window[c.method](c.argument)}}}}}if(g.length>0){PrimeFaces.cw("Growl","pushGrowl",{id:"pushGrowl",widgetVar:"pushGrowl",life:6000,sticky:false,msgs:g})}},gmap:function(c){if(b){setTimeout(function(){SKYVE.PF.gmap(c)},100)}else{if(window.google&&window.google.maps&&window.SKYVE.BizMapPicker){if(c.queryName||c.modelName){return SKYVE.BizMap.create(c)}return SKYVE.BizMapPicker.create(c)}else{b=true;SKYVE.Util.loadJS("wicket/wicket.js?v="+SKYVE.Util.v,function(){SKYVE.Util.loadJS("wicket/wicket-gmap3.js?v="+SKYVE.Util.v,function(){var d="https://maps.googleapis.com/maps/api/js?v=3&libraries=drawing";if(SKYVE.Util.googleMapsV3ApiKey){d+="&key="+SKYVE.Util.googleMapsV3ApiKey}SKYVE.Util.loadJS(d,function(){SKYVE.Util.loadJS("skyve/prime/skyve-gmap-min.js?v="+SKYVE.Util.v,function(){b=false;if(c.queryName||c.modelName){return SKYVE.BizMap.create(c)}return SKYVE.BizMapPicker.create(c)})})})})}}},leaflet:function(c){if(b){setTimeout(function(){SKYVE.PF.leaflet(c)},100)}else{if(window.L&&window.SKYVE.BizMapPicker){if(c.queryName||c.modelName){return SKYVE.BizMap.create(c)}return SKYVE.BizMapPicker.create(c)}else{b=true;SKYVE.Util.loadCSS("leaflet/leaflet.css?v="+SKYVE.Util.v,function(){SKYVE.Util.loadJS("leaflet/leaflet.js?v="+SKYVE.Util.v,function(){SKYVE.Util.loadJS("leaflet/Path.Drag.js?v="+SKYVE.Util.v,function(){SKYVE.Util.loadJS("leaflet/Leaflet.Editable.js?v="+SKYVE.Util.v,function(){SKYVE.Util.loadCSS("leaflet/leaflet.fullscreen.css?v="+SKYVE.Util.v,function(){SKYVE.Util.loadJS("leaflet/Leaflet.fullscreen.min.js?v="+SKYVE.Util.v,function(){SKYVE.Util.loadJS("skyve/prime/skyve-leaflet-min.js?v="+SKYVE.Util.v,function(){b=false;if(c.queryName||c.modelName){return SKYVE.BizMap.create(c)}return SKYVE.BizMapPicker.create(c)})})})})})})})}}},chartExtender:function(){if(!this.cfg.config.options){this.cfg.config.options={}}this.cfg.config.options.responsive=true;this.cfg.config.options.maintainAspectRatio=false},sidebar:function(f,e,d,g,c){$(function(){var l=$(window);var j=$("head");var h=$("body");var k=$("#"+f);var i=k.children(".inner");if($("#sidebarStyle"+c).length==0){$('<style id="sidebarStyle'+c+'">.sidebar'+c+"{background-color:white;font-size:0.9em;position:relative;width:"+e+";flex-grow:0;flex-shrink:0;transition:margin-right 0.5s ease,box-shadow 0.5s ease;}.sidebar"+c+" .toggle{text-decoration:none;transition:right 0.5s ease;-webkit-tap-highlight-color:rgba(255,255,255,0);border:0;display:none;position:absolute;top:calc(50% - 3.75em);right:calc("+g+"px - 3em);width:4em;height:7.5em;line-height:6.25em;text-align:center;z-index:10000;}.sidebar"+c+" .toggle:before{font-family:FontAwesome;font-size:1.1rem;font-style:normal;font-weight:normal;text-transform:none !important;content:'>';height:inherit;right:0;line-height:inherit;position:absolute;text-indent:0;top:0;width:inherit;color:#7f888f;margin-right:1.5em;margin-top:-0.5em;z-index:1;}.sidebar"+c+" .toggle:after{background:rgba(222,225,226,0.75);border-radius:0.375em;content:'';height:3em;right:2em;position:absolute;top:1em;width:3em;}.sidebar"+c+".inactive{margin-right:-"+g+"px;}.sidebar"+c+".inactive .toggle:before{content:'<';}@media screen and (max-width:"+d+"px){.sidebar"+c+"{box-shadow:0 0 5em 0 rgba(0,0,0,0.175);position:fixed;top:0;right:0;width:"+g+"px;height:100%;z-index:10000;}.sidebar"+c+".inactive{box-shadow:none;}.sidebar"+c+">.inner{position:absolute;top:0;right:0;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;}.sidebar"+c+" .toggle{display:flex;}}</style>").appendTo(j)}l.on("resize",function(){if(l.width()<=d){k.addClass("inactive")}else{k.removeClass("inactive")}});l.trigger("resize");$('<a href="#'+f+'" class="toggle"></a>').appendTo(k).on("click",function(m){m.preventDefault();m.stopPropagation();k.toggleClass("inactive")});window.setTimeout(function(){k.show()},100)})}}}();