{
"version":3,
"file":"../skyve-web/src/main/resources/META-INF/resources/skyve/prime/skyve-min.js",
"lineCount":57,
"mappings":"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",
"sources":["src/js/common/util.js","src/js/prime/pf.js"],
"sourcesContent":["// SKYVE namespace definition\nif (!window.SKYVE) {\n\twindow.SKYVE = {};\n}\n\nSKYVE.Util = (function () {\n\tconst context = `${window.location}`.substring(\n\t\t0,\n\t\t`${window.location}`.lastIndexOf(\"/\") + 1,\n\t);\n\n\t/**\n\t * Loads a resource (JS or CSS) and appends it to the document head.\n\t * @param {HTMLElement} node - the resource node to load.\n\t * @param {Function} callback - callback function to execute after loading.\n\t */\n\tconst load = function (node, callback) {\n\t\tif (callback !== null) {\n\t\t\tif (node.readyState) {\n\t\t\t\t// IE, incl. IE9\n\t\t\t\tnode.onreadystatechange = function () {\n\t\t\t\t\tif (node.readyState === \"loaded\" || node.readyState === \"complete\") {\n\t\t\t\t\t\tnode.onreadystatechange = null;\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t// Other browsers\n\t\t\t\tnode.onload = callback;\n\t\t\t}\n\t\t}\n\n\t\tconst headNode = document.getElementsByTagName(\"HEAD\")[0];\n\t\tif (headNode) {\n\t\t\theadNode.appendChild(node);\n\t\t}\n\t};\n\n\t// Public methods\n\treturn {\n\t\tcustomer: null,\n\t\tv: null,\n\t\tgoogleMapsV3ApiKey: null,\n\t\tckEditorConfigFileUrl: null,\n\t\tmapCentre: null,\n\t\tmapZoom: 1,\n\t\tCONTEXT_URL: context,\n\t\tallowedReportFormats: null,\n\n\t\t/**\n\t\t * Loads a JavaScript file.\n\t\t * @param {string} scriptPath - the path to the JavaScript file.\n\t\t * @param {Function} callback - callback function to execute after loading.\n\t\t */\n\t\tloadJS: function (scriptPath, callback) {\n\t\t\tconst scriptNode = document.createElement(\"SCRIPT\");\n\t\t\tscriptNode.type = \"text/javascript\";\n\t\t\tscriptNode.src = scriptPath;\n\t\t\tload(scriptNode, callback);\n\t\t},\n\n\t\t/**\n\t\t * Loads a CSS file.\n\t\t * @param {string} cssPath - the path to the CSS file.\n\t\t * @param {Function} callback - callback function to execute after loading.\n\t\t */\n\t\tloadCSS: function (cssPath, callback) {\n\t\t\tconst cssNode = document.createElement(\"LINK\");\n\t\t\tcssNode.type = \"text/css\";\n\t\t\tcssNode.rel = \"stylesheet\";\n\t\t\tcssNode.href = cssPath;\n\t\t\tload(cssNode, callback);\n\t\t},\n\n\t\t/**\n\t\t * Retrieves the current geolocation and executes a callback with the WKT string.\n\t\t * @param {Function} callback - callback function to execute with the WKT string.\n\t\t */\n\t\tgeoLocate: function (callback) {\n\t\t\tif (navigator.geolocation) {\n\t\t\t\t$(function () {\n\t\t\t\t\tPrimeFaces.cw(\"Growl\", \"growl\", {\n\t\t\t\t\t\tid: \"growl\",\n\t\t\t\t\t\twidgetVar: \"growl\",\n\t\t\t\t\t\tmsgs: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsummary: \"GeoLocating\",\n\t\t\t\t\t\t\t\tdetail: \"Please wait...\",\n\t\t\t\t\t\t\t\tseverity: \"info\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\tfunction (position) {\n\t\t\t\t\t\t$(function () {\n\t\t\t\t\t\t\tPrimeFaces.cw(\"Growl\", \"growl\", {\n\t\t\t\t\t\t\t\tid: \"growl\",\n\t\t\t\t\t\t\t\twidgetVar: \"growl\",\n\t\t\t\t\t\t\t\tmsgs: [\n\t\t\t\t\t\t\t\t\t{ summary: \"GeoLocating\", detail: \"Done\", severity: \"info\" },\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(\n\t\t\t\t\t\t\t`POINT (${position.coords.longitude} ${position.coords.latitude})`,\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (error) {\n\t\t\t\t\t\t$(function () {\n\t\t\t\t\t\t\tPrimeFaces.cw(\"Growl\", \"growl\", {\n\t\t\t\t\t\t\t\tid: \"growl\",\n\t\t\t\t\t\t\t\twidgetVar: \"growl\",\n\t\t\t\t\t\t\t\tmsgs: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsummary: \"GeoLocating\",\n\t\t\t\t\t\t\t\t\t\tdetail: error.message,\n\t\t\t\t\t\t\t\t\t\tseverity: \"warn\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t{ enableHighAccuracy: true },\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Sets a cookie indicating whether the device has a touch screen.\n\t\t */\n\t\tsetTouchCookie: function () {\n\t\t\tlet hasTouchScreen = false;\n\t\t\tif (\"maxTouchPoints\" in navigator) {\n\t\t\t\thasTouchScreen = navigator.maxTouchPoints > 0;\n\t\t\t} else if (\"msMaxTouchPoints\" in navigator) {\n\t\t\t\thasTouchScreen = navigator.msMaxTouchPoints > 0;\n\t\t\t} else {\n\t\t\t\tconst mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\n\t\t\t\tif (mQ && mQ.media === \"(pointer:coarse)\") {\n\t\t\t\t\thasTouchScreen = !!mQ.matches;\n\t\t\t\t} else if (\"orientation\" in window) {\n\t\t\t\t\thasTouchScreen = true; // deprecated, but good fallback\n\t\t\t\t}\n\t\t\t}\n\t\t\tdocument.cookie = `touch=${hasTouchScreen ? 1 : 0}; path=/`;\n\t\t},\n\n\t\t// Password strength estimation\n\t\tpasswordStrength: {\n\t\t\t0: \"Worst\",\n\t\t\t1: \"Bad\",\n\t\t\t2: \"Weak\",\n\t\t\t3: \"Good\",\n\t\t\t4: \"Strong\",\n\t\t},\n\t\tprogressBarPower: {\n\t\t\t0: \"1%\",\n\t\t\t1: \"25%\",\n\t\t\t2: \"50%\",\n\t\t\t3: \"75%\",\n\t\t\t4: \"100%\",\n\t\t},\n\t\tprogressBarColour: {\n\t\t\t0: \"#D73F40\",\n\t\t\t1: \"#DC6551\",\n\t\t\t2: \"#F2B84F\",\n\t\t\t3: \"#BDE952\",\n\t\t\t4: \"#3ba62f\",\n\t\t},\n\t};\n})();\n\nSKYVE.GMap = (function () {\n\tlet wkt = null;\n\n\t/**\n\t * Determines the drawing modes based on the specified drawing tools.\n\t * @param {string} drawingTools - the drawing tools specified on the geometryMap widget.\n\t * @returns {Array<google.maps.drawing.OverlayType>} - an array of drawing modes.\n\t */\n\tconst drawingModes = function (drawingTools) {\n\t\tlet result = null;\n\t\tswitch (drawingTools) {\n\t\t\tcase \"point\":\n\t\t\t\tresult = [google.maps.drawing.OverlayType.MARKER];\n\t\t\t\tbreak;\n\t\t\tcase \"line\":\n\t\t\t\tresult = [google.maps.drawing.OverlayType.POLYLINE];\n\t\t\t\tbreak;\n\t\t\tcase \"polygon\":\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYGON,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.RECTANGLE,\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tcase \"pointAndLine\":\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.MARKER,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYLINE,\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tcase \"pointAndPolygon\":\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.MARKER,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYGON,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.RECTANGLE,\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tcase \"lineAndPolygon\":\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYLINE,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYGON,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.RECTANGLE,\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.MARKER,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYLINE,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYGON,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.RECTANGLE,\n\t\t\t\t];\n\t\t}\n\t\treturn result;\n\t};\n\n\t// Public methods\n\treturn {\n\t\t/**\n\t\t * Scatters data points on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {Object} data - the response from the map servlet to scatter.\n\t\t * @param {boolean} fit - whether to fit the map bounds to the data.\n\t\t * @param {boolean} delta - whether to only remove or update if changed.\n\t\t */\n\t\tscatter: function (display, data, fit, delta) {\n\t\t\t// Instantiate WKT if it hasn't been already (at this point Wkt script is loaded)\n\t\t\tif (!wkt) {\n\t\t\t\twkt = new Wkt.Wkt();\n\t\t\t}\n\n\t\t\tconst items = data.items;\n\t\t\t// If there is no data, there is probably an error, so just bug out\n\t\t\tif (!items) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (delta) {\n\t\t\t\t// Remove overlays not present in the data\n\t\t\t\tfor (const bizId in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, bizId)) {\n\t\t\t\t\t\tlet found = false;\n\t\t\t\t\t\tfor (let i = 0, l = items.length; i < l; i++) {\n\t\t\t\t\t\t\tif (items[i].bizId === bizId) {\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t\tconst deletedObject = display._objects[bizId];\n\t\t\t\t\t\t\tfor (let i = 0, l = deletedObject.overlays.length; i < l; i++) {\n\t\t\t\t\t\t\t\tdeletedObject.overlays[i].setMap(null);\n\t\t\t\t\t\t\t\tdeletedObject.overlays[i] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdelete deletedObject.overlays;\n\t\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Remove all overlays\n\t\t\t\tfor (const bizId in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, bizId)) {\n\t\t\t\t\t\tconst deletedObject = display._objects[bizId];\n\t\t\t\t\t\tfor (let i = 0, l = deletedObject.overlays.length; i < l; i++) {\n\t\t\t\t\t\t\tdeletedObject.overlays[i].setMap(null);\n\t\t\t\t\t\t\tdeletedObject.overlays[i] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete deletedObject.overlays;\n\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add/update overlays from the data\n\t\t\tfor (let i = 0, l = items.length; i < l; i++) {\n\t\t\t\tconst item = items[i];\n\n\t\t\t\tlet object = display._objects[item.bizId];\n\t\t\t\tif (object) {\n\t\t\t\t\t// If the WKTs have changed, delete the overlay and recreate it\n\t\t\t\t\tlet same = object.overlays.length === item.features.length;\n\t\t\t\t\tif (same) {\n\t\t\t\t\t\tfor (let j = 0, m = object.overlays.length; j < m; j++) {\n\t\t\t\t\t\t\tif (object.overlays[j].geometry !== item.features[j].geometry) {\n\t\t\t\t\t\t\t\tsame = false;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!same) {\n\t\t\t\t\t\tfor (let j = 0, m = object.overlays.length; j < m; j++) {\n\t\t\t\t\t\t\tobject.overlays[j].setMap(null);\n\t\t\t\t\t\t\tobject.overlays[j] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete object.overlays;\n\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t\tobject = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!object) {\n\t\t\t\t\t// Object could have been nulled just above\n\t\t\t\t\tobject = { overlays: [] };\n\t\t\t\t\tfor (let j = 0, m = item.features.length; j < m; j++) {\n\t\t\t\t\t\tconst feature = item.features[j];\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Catch any malformed WKT strings\n\t\t\t\t\t\t\twkt.read(feature.geometry);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\talert(`${feature.geometry} is invalid WKT.`);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst props = { editable: feature.editable };\n\t\t\t\t\t\tif (feature.strokeColour) {\n\t\t\t\t\t\t\tprops.strokeColor = feature.strokeColour;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (feature.fillColour) {\n\t\t\t\t\t\t\tprops.fillColor = feature.fillColour;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (feature.fillOpacity) {\n\t\t\t\t\t\t\tprops.fillOpacity = feature.fillOpacity;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (feature.iconRelativeFilePath) {\n\t\t\t\t\t\t\tprops.icon = {\n\t\t\t\t\t\t\t\turl: `${SKYVE.Util.CONTEXT_URL}resources?_n=${feature.iconRelativeFilePath}&_doc=${data._doc}`,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (feature.iconAnchorX && feature.iconAnchorY) {\n\t\t\t\t\t\t\t\tprops.icon.anchor = new google.maps.Point(\n\t\t\t\t\t\t\t\t\tfeature.iconAnchorX,\n\t\t\t\t\t\t\t\t\tfeature.iconAnchorY,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tprops.icon.origin = new google.maps.Point(0, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst overlay = wkt.toObject(props);\n\t\t\t\t\t\tobject.overlays.push(overlay);\n\t\t\t\t\t\toverlay.setMap(display.webmap);\n\n\t\t\t\t\t\tif (feature.zoomable) {\n\t\t\t\t\t\t\t// Can show the info window for zooming\n\t\t\t\t\t\t\toverlay.bizId = item.bizId;\n\t\t\t\t\t\t\toverlay.geometry = feature.geometry;\n\t\t\t\t\t\t\toverlay.fromTimestamp = item.fromTimestamp;\n\t\t\t\t\t\t\toverlay.toTimestamp = item.toTimestamp;\n\t\t\t\t\t\t\toverlay.mod = item.moduleName;\n\t\t\t\t\t\t\toverlay.doc = item.documentName;\n\t\t\t\t\t\t\toverlay.infoMarkup = item.infoMarkup;\n\t\t\t\t\t\t\tgoogle.maps.event.addListener(overlay, \"click\", function (event) {\n\t\t\t\t\t\t\t\tdisplay.click(this, event);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdisplay._objects[item.bizId] = object;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (fit) {\n\t\t\t\tconst bounds = new google.maps.LatLngBounds();\n\t\t\t\tlet someOverlays = false;\n\t\t\t\tfor (const id in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, id)) {\n\t\t\t\t\t\tsomeOverlays = true;\n\t\t\t\t\t\tconst object = display._objects[id];\n\t\t\t\t\t\tconst overlays = object.overlays;\n\t\t\t\t\t\tfor (let i = 0, l = overlays.length; i < l; i++) {\n\t\t\t\t\t\t\tconst overlay = overlays[i];\n\t\t\t\t\t\t\tif (overlay.getPath) {\n\t\t\t\t\t\t\t\t// For polygons and polylines - fit the bounds to the vertices\n\t\t\t\t\t\t\t\tconst path = overlay.getPath();\n\t\t\t\t\t\t\t\tfor (let j = 0, m = path.getLength(); j < m; j++) {\n\t\t\t\t\t\t\t\t\tbounds.extend(path.getAt(j));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (overlay.getPosition) {\n\t\t\t\t\t\t\t\tbounds.extend(overlay.getPosition());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (someOverlays) {\n\t\t\t\t\t// Don't zoom in too far on only one marker\n\t\t\t\t\tif (bounds.getNorthEast().equals(bounds.getSouthWest())) {\n\t\t\t\t\t\tif (display.webmap.getZoom() < 15) {\n\t\t\t\t\t\t\tdisplay.webmap.setZoom(15);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\toverlay.getPosition !== undefined &&\n\t\t\t\t\t\t\ttypeof overlay.getPosition === \"function\"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tdisplay.webmap.setCenter(bounds.getNorthEast());\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdisplay.webmap.fitBounds(bounds);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Centers the map based on the configured map center.\n\t\t * @returns {google.maps.LatLng} - the center coordinates of the map.\n\t\t */\n\t\tcentre: function () {\n\t\t\t// Instantiate WKT if it hasn't been already (at this point Wkt script is loaded)\n\t\t\tif (!wkt) {\n\t\t\t\twkt = new Wkt.Wkt();\n\t\t\t}\n\n\t\t\tlet result = null;\n\t\t\tif (SKYVE.Util.mapCentre) {\n\t\t\t\ttry {\n\t\t\t\t\t// Catch any malformed WKT strings\n\t\t\t\t\twkt.read(SKYVE.Util.mapCentre);\n\t\t\t\t\tconst coord = wkt.components[0];\n\t\t\t\t\tresult = new google.maps.LatLng(coord.y, coord.x);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(`${SKYVE.Util.mapCentre} is malformed WKT Point format`);\n\t\t\t\t\tSKYVE.Util.mapCentre = null;\n\t\t\t\t\tresult = new google.maps.LatLng(0, 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult = new google.maps.LatLng(0, 0);\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * Displays a WKT string value on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {string} value - the WKT string value to display.\n\t\t */\n\t\tscatterValue: function (display, value) {\n\t\t\t// Instantiate WKT if it hasn't been already (at this point Wkt script is loaded)\n\t\t\tif (!wkt) {\n\t\t\t\twkt = new Wkt.Wkt();\n\t\t\t}\n\n\t\t\t// If no value is provided, return early\n\t\t\tif (!value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Catch any malformed WKT strings\n\t\t\t\twkt.read(value);\n\t\t\t} catch (e) {\n\t\t\t\tif (e.name === \"WKTError\") {\n\t\t\t\t\talert(\"The WKT string is invalid.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Convert the WKT to a Google Maps object\n\t\t\tconst obj = wkt.toObject(display.webmap.defaults);\n\n\t\t\t// Handle specific geometry types\n\t\t\tif (wkt.type !== \"polygon\" && wkt.type !== \"linestring\") {\n\t\t\t\tif (obj.setEditable) {\n\t\t\t\t\tobj.setEditable(false); // Disable editing for non-polygon/linestring geometries\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Handle multi-geometries (arrays) and single geometries\n\t\t\tif (Wkt.isArray(obj)) {\n\t\t\t\t// Iterate through multi-geometry objects\n\t\t\t\tfor (const key in obj) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(obj, key) &&\n\t\t\t\t\t\t!Wkt.isArray(obj[key])\n\t\t\t\t\t) {\n\t\t\t\t\t\tobj[key].setMap(display.webmap); // Add each geometry to the map\n\t\t\t\t\t\tdisplay._overlays.push(obj[key]); // Track the overlay\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tobj.setMap(display.webmap); // Add the single geometry to the map\n\t\t\t\tdisplay._overlays.push(obj); // Track the overlay\n\t\t\t}\n\n\t\t\t// Pan the map to the feature\n\t\t\tif (obj.getBounds !== undefined && typeof obj.getBounds === \"function\") {\n\t\t\t\t// For objects with defined bounds (e.g., rectangles, circles)\n\t\t\t\tdisplay.webmap.fitBounds(obj.getBounds());\n\t\t\t} else {\n\t\t\t\tif (obj.getPath !== undefined && typeof obj.getPath === \"function\") {\n\t\t\t\t\t// For polygons and polylines - fit the bounds to the vertices\n\t\t\t\t\tconst bounds = new google.maps.LatLngBounds();\n\t\t\t\t\tconst path = obj.getPath();\n\t\t\t\t\tfor (let i = 0, l = path.getLength(); i < l; i++) {\n\t\t\t\t\t\tbounds.extend(path.getAt(i));\n\t\t\t\t\t}\n\t\t\t\t\tdisplay.webmap.fitBounds(bounds);\n\t\t\t\t} else {\n\t\t\t\t\t// For points (markers)\n\t\t\t\t\tif (display.webmap.getZoom() < 15) {\n\t\t\t\t\t\tdisplay.webmap.setZoom(15); // Ensure a minimum zoom level\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\tobj.getPosition !== undefined &&\n\t\t\t\t\t\ttypeof obj.getPosition === \"function\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tdisplay.webmap.setCenter(obj.getPosition()); // Center the map on the marker\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Clears all overlays from the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tclear: function (display) {\n\t\t\t// Remove each overlay from the map\n\t\t\tfor (let i = 0, l = display._overlays.length; i < l; i++) {\n\t\t\t\tdisplay._overlays[i].setMap(null);\n\t\t\t}\n\t\t\t// Reset the overlays array\n\t\t\tdisplay._overlays.length = 0;\n\t\t},\n\n\t\t/**\n\t\t * Initializes drawing tools on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tdrawingTools: function (display) {\n\t\t\t// Instantiate WKT if it hasn't been already (at this point Wkt script is loaded)\n\t\t\tif (!wkt) {\n\t\t\t\twkt = new Wkt.Wkt();\n\t\t\t}\n\n\t\t\t// Initialize the drawing manager with the specified drawing modes\n\t\t\tdisplay.webmap.drawingManager = new google.maps.drawing.DrawingManager({\n\t\t\t\tdrawingControlOptions: {\n\t\t\t\t\tposition: google.maps.ControlPosition.LEFT_BOTTOM,\n\t\t\t\t\tdrawingModes: drawingModes(display.drawingTools), // Get the allowed drawing modes\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Add the drawing manager to the map\n\t\t\tdisplay.webmap.drawingManager.setMap(display.webmap);\n\n\t\t\t// Listen for the completion of a drawing operation\n\t\t\tgoogle.maps.event.addListener(\n\t\t\t\tdisplay.webmap.drawingManager,\n\t\t\t\t\"overlaycomplete\",\n\t\t\t\tfunction (event) {\n\t\t\t\t\t// Clear existing overlays from the map\n\t\t\t\t\tSKYVE.GMap.clear(display);\n\n\t\t\t\t\t// Set the drawing mode to \"pan\" (the hand) so users can immediately edit\n\t\t\t\t\tthis.setDrawingMode(null);\n\n\t\t\t\t\t// Add the new overlay to the map and track it\n\t\t\t\t\tdisplay._overlays.push(event.overlay);\n\n\t\t\t\t\t// Convert the overlay to a WKT string and update the field value\n\t\t\t\t\twkt.fromObject(event.overlay);\n\t\t\t\t\tconst wktValue = wkt.write();\n\t\t\t\t\tdisplay.setFieldValue(wktValue);\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Adds a geolocation control to the map, allowing users to set their current position.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tgeoLocator: function (display) {\n\t\t\tif (navigator.geolocation) {\n\t\t\t\t// Create a custom control for geolocation\n\t\t\t\tconst control = document.createElement(\"DIV\");\n\t\t\t\tObject.assign(control.style, {\n\t\t\t\t\tbackgroundColor: \"#fff\",\n\t\t\t\t\tborder: \"2px solid #fff\",\n\t\t\t\t\tborderRadius: \"3px\",\n\t\t\t\t\tboxShadow: \"0 2px 6px rgba(0,0,0,.3)\",\n\t\t\t\t\tcursor: \"pointer\",\n\t\t\t\t\tmargin: \"10px\",\n\t\t\t\t\tpadding: \"5px\",\n\t\t\t\t\ttextAlign: \"center\",\n\t\t\t\t});\n\t\t\t\tcontrol.title = \"Click to set your current position from your GPS\";\n\t\t\t\tcontrol.innerHTML = '<i class=\"fa-solid fa-location-crosshairs\"></i>';\n\t\t\t\tcontrol.index = 1;\n\n\t\t\t\t// Add a click event listener to the control\n\t\t\t\tcontrol.addEventListener(\"click\", function () {\n\t\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\t\tfunction (position) {\n\t\t\t\t\t\t\t// Clear existing overlays from the map\n\t\t\t\t\t\t\tSKYVE.GMap.clear(display);\n\n\t\t\t\t\t\t\t// Set the drawing mode to \"pan\" (the hand) so users can immediately edit\n\t\t\t\t\t\t\tdisplay.webmap.drawingManager.setDrawingMode(null);\n\n\t\t\t\t\t\t\t// Create a marker at the user's current position\n\t\t\t\t\t\t\tconst pos = {\n\t\t\t\t\t\t\t\tlat: position.coords.latitude,\n\t\t\t\t\t\t\t\tlng: position.coords.longitude,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tconst marker = new google.maps.Marker({\n\t\t\t\t\t\t\t\tposition: pos,\n\t\t\t\t\t\t\t\tmap: display.webmap,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Track the marker and update the field value with the WKT string\n\t\t\t\t\t\t\tdisplay._overlays.push(marker);\n\t\t\t\t\t\t\tdisplay.setFieldValue(`POINT (${pos.lng} ${pos.lat})`);\n\n\t\t\t\t\t\t\t// Zoom and center the map on the marker\n\t\t\t\t\t\t\tdisplay.webmap.setZoom(15);\n\t\t\t\t\t\t\tdisplay.webmap.setCenter(pos);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction (error) {\n\t\t\t\t\t\t\talert(error.message); // Handle geolocation errors\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ enableHighAccuracy: true },\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\t// Add the control to the map\n\t\t\t\tdisplay.webmap.geolocator = control;\n\t\t\t\tdisplay.webmap.controls[google.maps.ControlPosition.LEFT].push(control);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Enables or disables the drawing tools and geolocation control.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {boolean} disabled - whether to disable the controls.\n\t\t */\n\t\tsetDisabled: function (display, disabled) {\n\t\t\tif (display.webmap) {\n\t\t\t\t// Disable or enable the drawing manager\n\t\t\t\tif (display.webmap.drawingManager) {\n\t\t\t\t\tdisplay.webmap.drawingManager.setOptions({\n\t\t\t\t\t\tdrawingControl: !disabled,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Hide or show the geolocation control\n\t\t\t\tif (display.webmap.geolocator) {\n\t\t\t\t\tdisplay.webmap.geolocator.style.display = disabled ? \"none\" : \"block\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds refresh controls to the map, allowing users to set the refresh rate and toggle auto-refresh.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\trefreshControls: function (display) {\n\t\t\t// Create a custom control for refresh settings\n\t\t\tconst control = document.createElement(\"DIV\");\n\t\t\tObject.assign(control.style, {\n\t\t\t\tbackgroundColor: \"#fff\",\n\t\t\t\tborder: \"2px solid #fff\",\n\t\t\t\tborderRadius: \"3px\",\n\t\t\t\tboxShadow: \"0 2px 6px rgba(0,0,0,.3)\",\n\t\t\t\tcursor: \"pointer\",\n\t\t\t\tmargin: \"10px\",\n\t\t\t\tpadding: \"5px\",\n\t\t\t\ttextAlign: \"center\",\n\t\t\t});\n\t\t\tcontrol.title = \"Click to set the refresh rate of the map\";\n\t\t\tcontrol.innerHTML = `\n\t\t\t\t\t\t        <input type=\"number\" min=\"0\" max=\"500\" step=\"1\" value=\"${display.refreshTime}\" size=\"3\" />\n\t\t\t\t\t\t        <input type=\"checkbox\" ${display._refreshRequired ? \"checked\" : \"\"}><label>Refresh</label>\n\t\t\t\t\t\t    `;\n\t\t\tcontrol.index = 1;\n\n\t\t\t// Add event listener for the refresh time input\n\t\t\tcontrol.children[0].addEventListener(\"change\", function () {\n\t\t\t\tdisplay.refreshTime = Number(this.value); // Update the refresh time\n\t\t\t\tif (display._refreshRequired) {\n\t\t\t\t\tif (display._intervalId) {\n\t\t\t\t\t\tclearInterval(display._intervalId); // Clear the existing interval\n\t\t\t\t\t}\n\t\t\t\t\t// Set a new interval with the updated refresh time\n\t\t\t\t\tdisplay._intervalId = setInterval(\n\t\t\t\t\t\tdisplay.rerender.bind(display),\n\t\t\t\t\t\tdisplay.refreshTime * 1000,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add event listener for the refresh toggle checkbox\n\t\t\tcontrol.children[1].addEventListener(\"click\", function () {\n\t\t\t\tdisplay._refreshRequired = this.checked; // Update the refresh required flag\n\t\t\t\tif (display._intervalId) {\n\t\t\t\t\tclearInterval(display._intervalId); // Clear the existing interval\n\t\t\t\t\tdisplay._intervalId = null;\n\t\t\t\t}\n\t\t\t\tif (display._refreshRequired) {\n\t\t\t\t\tdisplay.rerender(); // Trigger an immediate rerender\n\t\t\t\t\t// Set a new interval with the current refresh time\n\t\t\t\t\tdisplay._intervalId = setInterval(\n\t\t\t\t\t\tdisplay.rerender.bind(display),\n\t\t\t\t\t\tdisplay.refreshTime * 1000,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add the control to the map\n\t\t\tdisplay.webmap.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(\n\t\t\t\tcontrol,\n\t\t\t);\n\t\t},\n\t};\n})();\n\nSKYVE.Leaflet = (function () {\n\tconst numberRegexp = /[-+]?([0-9]*\\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/;\n\tconst tuples = new RegExp(\n\t\t\"^\" + numberRegexp.source + \"(\\\\s\" + numberRegexp.source + \"){1,}\",\n\t); // Matches sequences like '100 100' or '100 100 100'\n\n\t/**\n\t * Parses a WKT string and returns a GeoJSON geometry object.\n\t * @param {string} input - the WKT geometry string to parse.\n\t * @returns {?Object} a GeoJSON geometry object, or null if parsing fails.\n\t */\n\tfunction parse(input) {\n\t\tconst parts = input.split(\";\");\n\t\tlet wktString = parts.pop(); // Extract the WKT string\n\t\tconst srid = (parts.shift() || \"\").split(\"=\").pop(); // Extract the SRID if present\n\n\t\tlet i = 0; // Current position in the WKT string\n\n\t\t/**\n\t\t * Matches a regular expression at the current position in the WKT string.\n\t\t * @param {RegExp} re - the regular expression to match.\n\t\t * @returns {?string} the matched string, or null if no match is found.\n\t\t */\n\t\tfunction $(re) {\n\t\t\tconst match = wktString.substring(i).match(re);\n\t\t\tif (!match) return null;\n\t\t\ti += match[0].length; // Advance the position\n\t\t\treturn match[0];\n\t\t}\n\n\t\t/**\n\t\t * Adds a CRS (Coordinate Reference System) to a GeoJSON object if an SRID is present.\n\t\t * @param {Object} obj - the GeoJSON object.\n\t\t * @returns {Object} the GeoJSON object with an optional CRS.\n\t\t */\n\t\tfunction crs(obj) {\n\t\t\tif (obj && srid.match(/\\d+/)) {\n\t\t\t\tobj.crs = {\n\t\t\t\t\ttype: \"name\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tname: `urn:ogc:def:crs:EPSG::${srid}`,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn obj;\n\t\t}\n\n\t\t/**\n\t\t * Skips whitespace in the WKT string.\n\t\t */\n\t\tfunction white() {\n\t\t\t$(/^\\s*/);\n\t\t}\n\n\t\t/**\n\t\t * Parses multi-coordinates (e.g., for polygons or multi-geometries).\n\t\t * @returns {?Array<Array<number>>} an array of coordinate rings, or null if parsing fails.\n\t\t */\n\t\tfunction multicoords() {\n\t\t\twhite();\n\t\t\tlet depth = 0; // Tracks nesting depth for parentheses\n\t\t\tconst rings = []; // Stores the parsed coordinate rings\n\t\t\tconst stack = [rings]; // Tracks the current context for nested coordinates\n\t\t\tlet pointer = rings; // Points to the current coordinate array\n\t\t\tlet elem;\n\n\t\t\t// Parse coordinates until the end of the WKT string\n\t\t\twhile (\n\t\t\t\t(elem =\n\t\t\t\t\t$(/^(\\()/) || // Match opening parenthesis\n\t\t\t\t\t$(/^(\\))/) || // Match closing parenthesis\n\t\t\t\t\t$(/^(,)/) || // Match comma separator\n\t\t\t\t\t$(tuples)) // Match coordinate tuples\n\t\t\t) {\n\t\t\t\tif (elem === \"(\") {\n\t\t\t\t\t// Start a new nested coordinate array\n\t\t\t\t\tstack.push(pointer);\n\t\t\t\t\tpointer = [];\n\t\t\t\t\tstack[stack.length - 1].push(pointer);\n\t\t\t\t\tdepth++;\n\t\t\t\t} else if (elem === \")\") {\n\t\t\t\t\t// End the current nested coordinate array\n\t\t\t\t\tif (pointer.length === 0) return null; // Handle empty rings\n\t\t\t\t\tpointer = stack.pop();\n\t\t\t\t\tif (!pointer) return null; // Handle malformed input\n\t\t\t\t\tdepth--;\n\t\t\t\t\tif (depth === 0) break; // Exit if we've closed all nested levels\n\t\t\t\t} else if (elem === \",\") {\n\t\t\t\t\t// Start a new coordinate array at the same nesting level\n\t\t\t\t\tpointer = [];\n\t\t\t\t\tstack[stack.length - 1].push(pointer);\n\t\t\t\t} else if (!elem.split(/\\s/g).some(isNaN)) {\n\t\t\t\t\t// Parse coordinate tuples (e.g., \"10 20\")\n\t\t\t\t\tArray.prototype.push.apply(\n\t\t\t\t\t\tpointer,\n\t\t\t\t\t\telem.split(/\\s/g).map(parseFloat),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn null; // Handle invalid coordinates\n\t\t\t\t}\n\t\t\t\twhite(); // Skip any whitespace\n\t\t\t}\n\n\t\t\tif (depth !== 0) return null; // Ensure all parentheses are closed\n\n\t\t\treturn rings;\n\t\t}\n\n\t\t/**\n\t\t * Parses coordinates from the WKT string.\n\t\t * @returns {?Array<Array<number>>} an array of coordinate arrays, or null if parsing fails.\n\t\t */\n\t\tfunction coords() {\n\t\t\tconst list = []; // Stores the parsed coordinate arrays\n\t\t\tlet item = []; // Stores the current coordinate array\n\t\t\tlet pt;\n\n\t\t\t// Parse coordinates until the end of the WKT string\n\t\t\twhile (\n\t\t\t\t(pt =\n\t\t\t\t\t$(tuples) || // Match coordinate tuples (e.g., \"10 20\")\n\t\t\t\t\t$(/^(,)/)) // Match comma separator\n\t\t\t) {\n\t\t\t\tif (pt === \",\") {\n\t\t\t\t\t// Start a new coordinate array\n\t\t\t\t\tlist.push(item);\n\t\t\t\t\titem = [];\n\t\t\t\t} else if (!pt.split(/\\s/g).some(isNaN)) {\n\t\t\t\t\t// Parse coordinate tuples (e.g., \"10 20\")\n\t\t\t\t\tif (!item) item = [];\n\t\t\t\t\tArray.prototype.push.apply(item, pt.split(/\\s/g).map(parseFloat));\n\t\t\t\t}\n\t\t\t\twhite(); // Skip any whitespace\n\t\t\t}\n\n\t\t\t// Add the last coordinate array to the list\n\t\t\tif (item) list.push(item);\n\t\t\telse return null; // Handle empty coordinates\n\n\t\t\treturn list.length ? list : null; // Return null if no coordinates were parsed\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT Point geometry and returns a GeoJSON Point object.\n\t\t * @returns {?Object} a GeoJSON Point object, or null if parsing fails.\n\t\t */\n\t\tfunction point() {\n\t\t\t// Match the \"POINT\" keyword (case-insensitive)\n\t\t\tif (!$(/^(point(\\sz)?)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Match the opening parenthesis\n\t\t\tif (!$(/^(\\()/)) return null;\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = coords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Match the closing parenthesis\n\t\t\tif (!$(/^(\\))/)) return null;\n\n\t\t\t// Return the GeoJSON Point object\n\t\t\treturn {\n\t\t\t\ttype: \"Point\",\n\t\t\t\tcoordinates: c[0], // Use the first coordinate array\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT MultiPoint geometry and returns a GeoJSON MultiPoint object.\n\t\t * @returns {?Object} a GeoJSON MultiPoint object, or null if parsing fails.\n\t\t */\n\t\tfunction multipoint() {\n\t\t\t// Match the \"MULTIPOINT\" keyword (case-insensitive)\n\t\t\tif (!$(/^(multipoint)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Reformat the coordinates to match the standard WKT format\n\t\t\tconst newCoordsFormat = wktString\n\t\t\t\t.substring(wktString.indexOf(\"(\") + 1, wktString.length - 1)\n\t\t\t\t.replace(/\\(/g, \"\")\n\t\t\t\t.replace(/\\)/g, \"\");\n\t\t\twktString = `MULTIPOINT (${newCoordsFormat})`;\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = multicoords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Return the GeoJSON MultiPoint object\n\t\t\treturn {\n\t\t\t\ttype: \"MultiPoint\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT MultiLineString geometry and returns a GeoJSON MultiLineString object.\n\t\t * @returns {?Object} a GeoJSON MultiLineString object, or null if parsing fails.\n\t\t */\n\t\tfunction multilinestring() {\n\t\t\t// Match the \"MULTILINESTRING\" keyword (case-insensitive)\n\t\t\tif (!$(/^(multilinestring)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = multicoords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Return the GeoJSON MultiLineString object\n\t\t\treturn {\n\t\t\t\ttype: \"MultiLineString\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT LineString geometry and returns a GeoJSON LineString object.\n\t\t * @returns {?Object} a GeoJSON LineString object, or null if parsing fails.\n\t\t */\n\t\tfunction linestring() {\n\t\t\t// Match the \"LINESTRING\" keyword (case-insensitive)\n\t\t\tif (!$(/^(linestring(\\sz)?)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Match the opening parenthesis\n\t\t\tif (!$(/^(\\()/)) return null;\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = coords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\n\t\t\t// Match the closing parenthesis\n\t\t\tif (!$(/^(\\))/)) return null;\n\n\t\t\t// Return the GeoJSON LineString object\n\t\t\treturn {\n\t\t\t\ttype: \"LineString\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT Polygon geometry and returns a GeoJSON Polygon object.\n\t\t * @returns {?Object} a GeoJSON Polygon object, or null if parsing fails.\n\t\t */\n\t\tfunction polygon() {\n\t\t\t// Match the \"POLYGON\" keyword (case-insensitive)\n\t\t\tif (!$(/^(polygon(\\sz)?)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = multicoords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\n\t\t\t// Return the GeoJSON Polygon object\n\t\t\treturn {\n\t\t\t\ttype: \"Polygon\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT MultiPolygon geometry and returns a GeoJSON MultiPolygon object.\n\t\t * @returns {?Object} a GeoJSON MultiPolygon object, or null if parsing fails.\n\t\t */\n\t\tfunction multipolygon() {\n\t\t\t// Match the \"MULTIPOLYGON\" keyword (case-insensitive)\n\t\t\tif (!$(/^(multipolygon)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = multicoords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\n\t\t\t// Return the GeoJSON MultiPolygon object\n\t\t\treturn {\n\t\t\t\ttype: \"MultiPolygon\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT GeometryCollection and returns a GeoJSON GeometryCollection object.\n\t\t * @returns {?Object} a GeoJSON GeometryCollection object, or null if parsing fails.\n\t\t */\n\t\tfunction geometrycollection() {\n\t\t\tconst geometries = []; // Stores the parsed geometries\n\t\t\tlet geometry;\n\n\t\t\t// Match the \"GEOMETRYCOLLECTION\" keyword (case-insensitive)\n\t\t\tif (!$(/^(geometrycollection)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Match the opening parenthesis\n\t\t\tif (!$(/^(\\()/)) return null;\n\n\t\t\t// Parse geometries until the end of the WKT string\n\t\t\twhile ((geometry = root())) {\n\t\t\t\tgeometries.push(geometry); // Add the parsed geometry to the collection\n\t\t\t\twhite(); // Skip any whitespace\n\t\t\t\t$(/^(,)/); // Match the comma separator\n\t\t\t\twhite(); // Skip any whitespace\n\t\t\t}\n\n\t\t\t// Match the closing parenthesis\n\t\t\tif (!$(/^(\\))/)) return null;\n\n\t\t\t// Return the GeoJSON GeometryCollection object\n\t\t\treturn {\n\t\t\t\ttype: \"GeometryCollection\",\n\t\t\t\tgeometries: geometries,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses the root geometry from the WKT string.\n\t\t * @returns {?Object} a GeoJSON geometry object, or null if parsing fails.\n\t\t */\n\t\tfunction root() {\n\t\t\treturn (\n\t\t\t\tpoint() || // Try parsing a Point\n\t\t\t\tlinestring() || // Try parsing a LineString\n\t\t\t\tpolygon() || // Try parsing a Polygon\n\t\t\t\tmultipoint() || // Try parsing a MultiPoint\n\t\t\t\tmultilinestring() || // Try parsing a MultiLineString\n\t\t\t\tmultipolygon() || // Try parsing a MultiPolygon\n\t\t\t\tgeometrycollection() // Try parsing a GeometryCollection\n\t\t\t);\n\t\t}\n\n\t\treturn crs(root());\n\t}\n\n\t/**\n\t * Converts a GeoJSON object into a WKT string.\n\t * @param {Object} gj - the GeoJSON object to convert.\n\t * @returns {string} the WKT representation of the GeoJSON object.\n\t * @throws {Error} if the input is not a valid GeoJSON Feature or geometry object.\n\t */\n\tfunction stringify(gj) {\n\t\t// Handle GeoJSON Feature objects by extracting the geometry\n\t\tif (gj.type === \"Feature\") {\n\t\t\tgj = gj.geometry;\n\t\t}\n\n\t\t/**\n\t\t * Converts a coordinate pair into a WKT string.\n\t\t * @param {Array<number>} c - the coordinate pair (e.g., [10, 20]).\n\t\t * @returns {string} the WKT representation of the coordinate pair.\n\t\t */\n\t\tfunction pairWKT(c) {\n\t\t\treturn c.join(\" \");\n\t\t}\n\n\t\t/**\n\t\t * Converts a ring of coordinates into a WKT string.\n\t\t * @param {Array<Array<number>>} r - the ring of coordinates.\n\t\t * @returns {string} the WKT representation of the ring.\n\t\t */\n\t\tfunction ringWKT(r) {\n\t\t\treturn r.map(pairWKT).join(\", \");\n\t\t}\n\n\t\t/**\n\t\t * Converts multiple rings of coordinates into a WKT string.\n\t\t * @param {Array<Array<Array<number>>>} r - the rings of coordinates.\n\t\t * @returns {string} the WKT representation of the rings.\n\t\t */\n\t\tfunction ringsWKT(r) {\n\t\t\treturn r.map(ringWKT).map(wrapParens).join(\", \");\n\t\t}\n\n\t\t/**\n\t\t * Converts multiple sets of rings into a WKT string.\n\t\t * @param {Array<Array<Array<Array<number>>>>} r - the sets of rings.\n\t\t * @returns {string} the WKT representation of the sets of rings.\n\t\t */\n\t\tfunction multiRingsWKT(r) {\n\t\t\treturn r.map(ringsWKT).map(wrapParens).join(\", \");\n\t\t}\n\n\t\t/**\n\t\t * Wraps a string in parentheses.\n\t\t * @param {string} s - the string to wrap.\n\t\t * @returns {string} the wrapped string.\n\t\t */\n\t\tfunction wrapParens(s) {\n\t\t\treturn `(${s})`;\n\t\t}\n\n\t\t// Convert the GeoJSON object to WKT based on its type\n\t\tswitch (gj.type) {\n\t\t\tcase \"Point\":\n\t\t\t\treturn `POINT (${pairWKT(gj.coordinates)})`;\n\t\t\tcase \"LineString\":\n\t\t\t\treturn `LINESTRING (${ringWKT(gj.coordinates)})`;\n\t\t\tcase \"Polygon\":\n\t\t\t\treturn `POLYGON (${ringsWKT(gj.coordinates)})`;\n\t\t\tcase \"MultiPoint\":\n\t\t\t\treturn `MULTIPOINT (${ringWKT(gj.coordinates)})`;\n\t\t\tcase \"MultiPolygon\":\n\t\t\t\treturn `MULTIPOLYGON (${multiRingsWKT(gj.coordinates)})`;\n\t\t\tcase \"MultiLineString\":\n\t\t\t\treturn `MULTILINESTRING (${ringsWKT(gj.coordinates)})`;\n\t\t\tcase \"GeometryCollection\":\n\t\t\t\treturn `GEOMETRYCOLLECTION (${gj.geometries.map(stringify).join(\", \")})`;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\"stringify requires a valid GeoJSON Feature or geometry object as input\",\n\t\t\t\t);\n\t\t}\n\t}\n\n\t// Public methods\n\treturn {\n\t\t/**\n\t\t * Scatters data points on the map, updating or removing overlays as needed.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {Object} data - the response from the map servlet to scatter.\n\t\t * @param {boolean} fit - whether to fit the map bounds to the data.\n\t\t * @param {boolean} delta - whether to only remove or update if changed.\n\t\t */\n\t\tscatter: function (display, data, fit, delta) {\n\t\t\tconst items = data.items;\n\n\t\t\t// If there is no data, there is probably an error, so just return early\n\t\t\tif (!items) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (delta) {\n\t\t\t\t// Remove overlays not present in the data\n\t\t\t\tfor (const bizId in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, bizId)) {\n\t\t\t\t\t\tlet found = false;\n\t\t\t\t\t\tfor (let i = 0, l = items.length; i < l; i++) {\n\t\t\t\t\t\t\tif (items[i].bizId === bizId) {\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t\tconst deletedObject = display._objects[bizId];\n\t\t\t\t\t\t\tfor (let i = 0, l = deletedObject.overlays.length; i < l; i++) {\n\t\t\t\t\t\t\t\tdisplay.webmap.removeLayer(deletedObject.overlays[i]);\n\t\t\t\t\t\t\t\tdeletedObject.overlays[i] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdelete deletedObject.overlays;\n\t\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Remove all overlays\n\t\t\t\tfor (const bizId in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, bizId)) {\n\t\t\t\t\t\tconst deletedObject = display._objects[bizId];\n\t\t\t\t\t\tfor (let i = 0, l = deletedObject.overlays.length; i < l; i++) {\n\t\t\t\t\t\t\tdisplay.webmap.removeLayer(deletedObject.overlays[i]);\n\t\t\t\t\t\t\tdeletedObject.overlays[i] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete deletedObject.overlays;\n\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add/update overlays from the data\n\t\t\tfor (let i = 0, l = items.length; i < l; i++) {\n\t\t\t\tconst item = items[i];\n\n\t\t\t\tlet object = display._objects[item.bizId];\n\t\t\t\tif (object) {\n\t\t\t\t\t// If the WKTs have changed, delete the overlay and recreate it\n\t\t\t\t\tlet same = object.overlays.length === item.features.length;\n\t\t\t\t\tif (same) {\n\t\t\t\t\t\tfor (let j = 0, m = object.overlays.length; j < m; j++) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tobject.overlays[j].getLayers()[0].zoomData.geometry !==\n\t\t\t\t\t\t\t\titem.features[j].geometry\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tsame = false;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!same) {\n\t\t\t\t\t\tfor (let j = 0, m = object.overlays.length; j < m; j++) {\n\t\t\t\t\t\t\tdisplay.webmap.removeLayer(object.overlays[j]);\n\t\t\t\t\t\t\tobject.overlays[j] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete object.overlays;\n\t\t\t\t\t\tdelete display._objects[item.bizId];\n\t\t\t\t\t\tobject = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!object) {\n\t\t\t\t\t// Object could have been nulled just above\n\t\t\t\t\tobject = { overlays: [] };\n\t\t\t\t\tfor (let j = 0, m = item.features.length; j < m; j++) {\n\t\t\t\t\t\tconst itemFeature = item.features[j];\n\n\t\t\t\t\t\tconst geometry = parse(itemFeature.geometry);\n\t\t\t\t\t\tgeometry.properties = { editable: itemFeature.editable };\n\t\t\t\t\t\tif (itemFeature.strokeColour) {\n\t\t\t\t\t\t\tgeometry.properties.color = itemFeature.strokeColour;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (itemFeature.fillColour) {\n\t\t\t\t\t\t\tgeometry.properties.fillColor = itemFeature.fillColour;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (itemFeature.fillOpacity) {\n\t\t\t\t\t\t\tgeometry.properties.fillOpacity = itemFeature.fillOpacity;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (itemFeature.iconRelativeFilePath) {\n\t\t\t\t\t\t\tconst icon = {\n\t\t\t\t\t\t\t\ticonUrl: `resources?_n=${itemFeature.iconRelativeFilePath}&_doc=${data._doc}`,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (itemFeature.iconAnchorX && itemFeature.iconAnchorY) {\n\t\t\t\t\t\t\t\ticon.iconAnchor = [\n\t\t\t\t\t\t\t\t\titemFeature.iconAnchorX,\n\t\t\t\t\t\t\t\t\titemFeature.iconAnchorY,\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgeometry.properties.icon = icon;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst overlay = L.geoJson(geometry, {\n\t\t\t\t\t\t\tpointToLayer(point, latlng) {\n\t\t\t\t\t\t\t\tconst properties = point.properties;\n\t\t\t\t\t\t\t\tdelete point.properties;\n\n\t\t\t\t\t\t\t\tif (properties.icon) {\n\t\t\t\t\t\t\t\t\tproperties.icon = L.icon(properties.icon);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn L.marker(latlng, properties);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstyle: function (feature) {\n\t\t\t\t\t\t\t\tconst properties = feature.geometry.properties;\n\t\t\t\t\t\t\t\tdelete feature.geometry.properties;\n\t\t\t\t\t\t\t\treturn properties;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonEachFeature: function (feature, layer) {\n\t\t\t\t\t\t\t\tif (itemFeature.zoomable) {\n\t\t\t\t\t\t\t\t\t// Can show the info window for zooming\n\t\t\t\t\t\t\t\t\tlayer.zoomData = {\n\t\t\t\t\t\t\t\t\t\tbizId: item.bizId,\n\t\t\t\t\t\t\t\t\t\tgeometry: itemFeature.geometry,\n\t\t\t\t\t\t\t\t\t\tfromTimestamp: item.fromTimestamp,\n\t\t\t\t\t\t\t\t\t\ttoTimestamp: item.toTimestamp,\n\t\t\t\t\t\t\t\t\t\tmod: item.moduleName,\n\t\t\t\t\t\t\t\t\t\tdoc: item.documentName,\n\t\t\t\t\t\t\t\t\t\tinfoMarkup: item.infoMarkup,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tlayer.bindPopup(function (layer) {\n\t\t\t\t\t\t\t\t\t\treturn display.click(layer);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\tobject.overlays.push(overlay);\n\t\t\t\t\t\tdisplay.webmap.addLayer(overlay);\n\t\t\t\t\t}\n\t\t\t\t\tdisplay._objects[item.bizId] = object;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (fit) {\n\t\t\t\tconst bounds = L.latLngBounds();\n\t\t\t\tlet someOverlays = false;\n\t\t\t\tfor (const id in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, id)) {\n\t\t\t\t\t\tsomeOverlays = true;\n\t\t\t\t\t\tconst object = display._objects[id];\n\t\t\t\t\t\tconst overlays = object.overlays;\n\t\t\t\t\t\tfor (let i = 0, l = overlays.length; i < l; i++) {\n\t\t\t\t\t\t\tconst overlay = overlays[i];\n\t\t\t\t\t\t\tbounds.extend(overlay.getBounds());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (someOverlays) {\n\t\t\t\t\t// Don't zoom in too far on only one marker\n\t\t\t\t\tdisplay.webmap.fitBounds(bounds, { maxZoom: 15 });\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Retrieves the center coordinates of the map based on the configured map center.\n\t\t * @returns {Array<number>} the center coordinates as [latitude, longitude], or [0, 0] if invalid.\n\t\t */\n\t\tcentre: function () {\n\t\t\tlet result = [0, 0]; // Default center coordinates\n\n\t\t\tif (SKYVE.Util.mapCentre) {\n\t\t\t\ttry {\n\t\t\t\t\t// Parse the WKT string to get the center coordinates\n\t\t\t\t\tconst centre = parse(SKYVE.Util.mapCentre);\n\t\t\t\t\tresult = [centre.coordinates[1], centre.coordinates[0]]; // [latitude, longitude]\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(`${SKYVE.Util.mapCentre} is malformed WKT Point format`);\n\t\t\t\t\tSKYVE.Util.mapCentre = null; // Reset the map center if invalid\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * Displays a WKT string value on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {string} value - the WKT string value to display.\n\t\t */\n\t\tscatterValue: function (display, value) {\n\t\t\t// If no value is provided, return early\n\t\t\tif (!value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet obj = null;\n\t\t\ttry {\n\t\t\t\t// Parse the WKT string and create a GeoJSON layer\n\t\t\t\tobj = L.geoJson(parse(value));\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(`The WKT string ${value} is invalid.`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Add the GeoJSON layer to the map and track it\n\t\t\tobj.addTo(display.webmap);\n\t\t\tdisplay._overlays.push(obj);\n\n\t\t\t// Pan the map to the feature\n\t\t\tdisplay.webmap.fitBounds(obj.getBounds(), { maxZoom: 15 });\n\t\t},\n\n\t\t/**\n\t\t * Clears all overlays from the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tclear: function (display) {\n\t\t\t// Remove each overlay from the map\n\t\t\tfor (let i = 0, l = display._overlays.length; i < l; i++) {\n\t\t\t\tdisplay.webmap.removeLayer(display._overlays[i]);\n\t\t\t}\n\t\t\t// Reset the overlays array\n\t\t\tdisplay._overlays.length = 0;\n\t\t},\n\n\t\t/**\n\t\t * Initializes drawing tools on the map based on the specified drawing tools.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tdrawingTools: function (display) {\n\t\t\tconst drawingTools = display.drawingTools;\n\n\t\t\t/**\n\t\t\t * Custom Leaflet control for drawing tools.\n\t\t\t */\n\t\t\tL.EditControl = L.Control.extend({\n\t\t\t\toptions: {\n\t\t\t\t\tposition: \"topright\", // Position of the control on the map\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t * Creates the control container and adds drawing tool buttons.\n\t\t\t\t * @param {L.Map} map - the Leaflet map instance.\n\t\t\t\t * @returns {HTMLElement} the control container.\n\t\t\t\t */\n\t\t\t\tonAdd: function (map) {\n\t\t\t\t\tconst container = L.DomUtil.create(\n\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\"leaflet-control leaflet-bar\",\n\t\t\t\t\t);\n\n\t\t\t\t\t// Add marker tool if enabled\n\t\t\t\t\tif (\n\t\t\t\t\t\t!drawingTools ||\n\t\t\t\t\t\tdrawingTools === \"point\" ||\n\t\t\t\t\t\tdrawingTools === \"pointAndLine\" ||\n\t\t\t\t\t\tdrawingTools === \"pointAndPolygon\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst markerLink = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\tmarkerLink.href = \"#\";\n\t\t\t\t\t\tmarkerLink.title = \"Create a new marker\";\n\t\t\t\t\t\tmarkerLink.innerHTML = '<i class=\"fa-solid fa-location-dot\"></i>';\n\t\t\t\t\t\tL.DomEvent.on(markerLink, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\tmarkerLink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\twindow.LAYER = display.webmap.editTools.startMarker.call(\n\t\t\t\t\t\t\t\t\tmap.editTools,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add polyline tool if enabled\n\t\t\t\t\tif (\n\t\t\t\t\t\t!drawingTools ||\n\t\t\t\t\t\tdrawingTools === \"line\" ||\n\t\t\t\t\t\tdrawingTools === \"pointAndLine\" ||\n\t\t\t\t\t\tdrawingTools === \"lineAndPolygon\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst polylineLink = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\tpolylineLink.href = \"#\";\n\t\t\t\t\t\tpolylineLink.title = \"Create a new line\";\n\t\t\t\t\t\tpolylineLink.innerHTML =\n\t\t\t\t\t\t\t'<i class=\"fa-solid fa-diagram-project\"></i>';\n\t\t\t\t\t\tL.DomEvent.on(polylineLink, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\tpolylineLink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\twindow.LAYER = display.webmap.editTools.startPolyline.call(\n\t\t\t\t\t\t\t\t\tmap.editTools,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add polygon and rectangle tools if enabled\n\t\t\t\t\tif (\n\t\t\t\t\t\t!drawingTools ||\n\t\t\t\t\t\tdrawingTools === \"polygon\" ||\n\t\t\t\t\t\tdrawingTools === \"pointAndPolygon\" ||\n\t\t\t\t\t\tdrawingTools === \"lineAndPolygon\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst rectangleLink = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\trectangleLink.href = \"#\";\n\t\t\t\t\t\trectangleLink.title = \"Create a new rectangle\";\n\t\t\t\t\t\trectangleLink.innerHTML =\n\t\t\t\t\t\t\t'<i class=\"fa-solid fa-vector-square\"></i>';\n\t\t\t\t\t\tL.DomEvent.on(rectangleLink, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\trectangleLink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\twindow.LAYER = display.webmap.editTools.startRectangle.call(\n\t\t\t\t\t\t\t\t\tmap.editTools,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst polygonLink = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\tpolygonLink.href = \"#\";\n\t\t\t\t\t\tpolygonLink.title = \"Create a new polygon\";\n\t\t\t\t\t\tpolygonLink.innerHTML = '<i class=\"fa-solid fa-draw-polygon\"></i>';\n\t\t\t\t\t\tL.DomEvent.on(polygonLink, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\tpolygonLink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\twindow.LAYER = display.webmap.editTools.startPolygon.call(\n\t\t\t\t\t\t\t\t\tmap.editTools,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn container;\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Add the drawing control to the map\n\t\t\tdisplay.webmap.editControl = new L.EditControl();\n\t\t\tdisplay.webmap.addControl(display.webmap.editControl);\n\n\t\t\t// Handle the completion of a drawing operation\n\t\t\tdisplay.webmap.on(\"editable:drawing:commit\", function (event) {\n\t\t\t\tSKYVE.Leaflet.clear(display); // Clear existing overlays\n\n\t\t\t\t// Stop editing mode so users can immediately edit\n\t\t\t\tevent.layer.toggleEdit();\n\n\t\t\t\t// Add the new overlay to the map and update the field value\n\t\t\t\tdisplay._overlays.push(event.layer);\n\t\t\t\tdisplay.setFieldValue(stringify(event.layer.toGeoJSON(12)));\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Adds a geolocation control to the map, allowing users to set their current position using GPS.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tgeoLocator: function (display) {\n\t\t\tif (navigator.geolocation) {\n\t\t\t\t/**\n\t\t\t\t * Custom Leaflet control for geolocation.\n\t\t\t\t */\n\t\t\t\tL.GeoControl = L.Control.extend({\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tposition: \"bottomleft\", // Position of the control on the map\n\t\t\t\t\t},\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Creates the control container and adds the geolocation button.\n\t\t\t\t\t * @param {L.Map} map - The Leaflet map instance.\n\t\t\t\t\t * @returns {HTMLElement} The control container.\n\t\t\t\t\t */\n\t\t\t\t\tonAdd: function (map) {\n\t\t\t\t\t\tconst container = L.DomUtil.create(\n\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\"leaflet-control leaflet-bar\",\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Create the geolocation button\n\t\t\t\t\t\tconst link = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\tlink.href = \"#\";\n\t\t\t\t\t\tlink.title = \"Click to set your current position from your GPS\";\n\t\t\t\t\t\tlink.innerHTML = '<i class=\"fa-solid fa-location-crosshairs\"></i>';\n\n\t\t\t\t\t\t// Add a click event listener to the button\n\t\t\t\t\t\tL.DomEvent.on(link, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\tlink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\t// Stop any active drawing\n\t\t\t\t\t\t\t\tif (display.webmap.editTools.drawing()) {\n\t\t\t\t\t\t\t\t\tdisplay.webmap.editTools.commitDrawing();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Get the user's current position\n\t\t\t\t\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\t\t\t\t\tfunction (position) {\n\t\t\t\t\t\t\t\t\t\t// Clear existing overlays from the map\n\t\t\t\t\t\t\t\t\t\tSKYVE.Leaflet.clear(display);\n\n\t\t\t\t\t\t\t\t\t\t// Create a marker at the user's current position\n\t\t\t\t\t\t\t\t\t\tconst latlng = [\n\t\t\t\t\t\t\t\t\t\t\tposition.coords.latitude,\n\t\t\t\t\t\t\t\t\t\t\tposition.coords.longitude,\n\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\tconst marker = L.marker(latlng);\n\t\t\t\t\t\t\t\t\t\tmarker.addTo(display.webmap);\n\n\t\t\t\t\t\t\t\t\t\t// Track the marker and update the field value with the WKT string\n\t\t\t\t\t\t\t\t\t\tdisplay._overlays.push(marker);\n\t\t\t\t\t\t\t\t\t\tdisplay.setFieldValue(\n\t\t\t\t\t\t\t\t\t\t\t`POINT (${position.coords.longitude} ${position.coords.latitude})`,\n\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t// Zoom and center the map on the marker\n\t\t\t\t\t\t\t\t\t\tdisplay.webmap.setZoom(15);\n\t\t\t\t\t\t\t\t\t\tdisplay.webmap.panTo(latlng);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfunction (error) {\n\t\t\t\t\t\t\t\t\t\talert(error.message); // Handle geolocation errors\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{ enableHighAccuracy: true }, // Enable high accuracy for GPS\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn container;\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\t// Add the geolocation control to the map\n\t\t\t\tdisplay.webmap.geoControl = new L.GeoControl();\n\t\t\t\tdisplay.webmap.addControl(display.webmap.geoControl);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Enables or disables the drawing and geolocation controls on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {boolean} disabled - whether to disable the controls.\n\t\t */\n\t\tsetDisabled: function (display, disabled) {\n\t\t\tif (display.webmap) {\n\t\t\t\t// Disable or enable the edit control (drawing tools)\n\t\t\t\tif (display.webmap.editControl) {\n\t\t\t\t\tdisplay.webmap.editControl.getContainer().style.display = disabled\n\t\t\t\t\t\t? \"none\"\n\t\t\t\t\t\t: \"block\";\n\t\t\t\t}\n\n\t\t\t\t// Disable or enable the geolocation control\n\t\t\t\tif (display.webmap.geoControl) {\n\t\t\t\t\tdisplay.webmap.geoControl.getContainer().style.display = disabled\n\t\t\t\t\t\t? \"none\"\n\t\t\t\t\t\t: \"block\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds refresh controls to the map, allowing users to set the refresh rate and toggle auto-refresh.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\trefreshControls: function (display) {\n\t\t\t/**\n\t\t\t * Custom Leaflet control for refresh settings.\n\t\t\t */\n\t\t\tL.GeoControl = L.Control.extend({\n\t\t\t\toptions: {\n\t\t\t\t\tposition: \"bottomleft\", // Position of the control on the map\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t * Creates the control container and adds refresh settings.\n\t\t\t\t * @param {L.Map} map - The Leaflet map instance.\n\t\t\t\t * @returns {HTMLElement} The control container.\n\t\t\t\t */\n\t\t\t\tonAdd: function (map) {\n\t\t\t\t\tconst container = L.DomUtil.create(\"div\", \"leaflet-control\");\n\n\t\t\t\t\t// Add the refresh time input and checkbox\n\t\t\t\t\tcontainer.innerHTML = `\n\t\t                <input type=\"number\" min=\"0\" max=\"500\" step=\"1\" value=\"${display.refreshTime}\" size=\"3\" />\n\t\t                <input type=\"checkbox\" ${display._refreshRequired ? \"checked\" : \"\"}><label>Refresh</label>\n\t\t            `;\n\n\t\t\t\t\t// Add event listener for the refresh time input\n\t\t\t\t\tcontainer.children[0].addEventListener(\"change\", function () {\n\t\t\t\t\t\tdisplay.refreshTime = Number(this.value); // Update the refresh time\n\t\t\t\t\t\tif (display._refreshRequired) {\n\t\t\t\t\t\t\tif (display._intervalId) {\n\t\t\t\t\t\t\t\tclearInterval(display._intervalId); // Clear the existing interval\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Set a new interval with the updated refresh time\n\t\t\t\t\t\t\tdisplay._intervalId = setInterval(\n\t\t\t\t\t\t\t\tdisplay.rerender.bind(display),\n\t\t\t\t\t\t\t\tdisplay.refreshTime * 1000,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Add event listener for the refresh toggle checkbox\n\t\t\t\t\tcontainer.children[1].addEventListener(\"click\", function () {\n\t\t\t\t\t\tdisplay._refreshRequired = this.checked; // Update the refresh required flag\n\t\t\t\t\t\tif (display._intervalId) {\n\t\t\t\t\t\t\tclearInterval(display._intervalId); // Clear the existing interval\n\t\t\t\t\t\t\tdisplay._intervalId = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (display._refreshRequired) {\n\t\t\t\t\t\t\tdisplay.rerender(); // Trigger an immediate rerender\n\t\t\t\t\t\t\t// Set a new interval with the current refresh time\n\t\t\t\t\t\t\tdisplay._intervalId = setInterval(\n\t\t\t\t\t\t\t\tdisplay.rerender.bind(display),\n\t\t\t\t\t\t\t\tdisplay.refreshTime * 1000,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn container;\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Add the refresh control to the map\n\t\t\tdisplay.webmap.addControl(new L.GeoControl());\n\t\t},\n\t};\n})();\n","SKYVE.PF = function() {\n\t// block multiple load attempts of google/leaflet maps JS libs.\n\tvar loadingMap = false;\n\t\n\tvar getSessionHistory = function() {\n\t\tvar result = sessionStorage.sessionHistory;\n\t\tif (result) {\n\t\t\tresult = JSON.parse(result);\n\t\t}\n\t\telse {\n\t\t\tresult = [];\n\t\t}\n\t\treturn result;\n\t};\n\n\t// public\n\treturn {\n\t\tgetById: function(id) {\n\t\t\treturn $(PrimeFaces.escapeClientId(id));\n\t\t},\n\t\t\n\t\tgetByIdEndsWith: function(id) {\n\t\t\treturn $('[id$=\"' + id + '\"]');\n\t\t},\n\t\t\n\t\tcontentOverlayOnShow: function(id, url) {\n\t\t\tSKYVE.PF.getById(id + '_overlayiframe').attr('src', url);\n\t\t},\n\t\t\n\t\tcontentOverlayOnHide: function(id) {\n\t\t\tSKYVE.PF.getById(id + '_overlayiframe').attr('src','')\n\t\t},\n\t\t\n\t\tafterContentUpload: function(binding, contentId, modoc, fileName) {\n\t\t\t// Cannot use window.parent here to support nested frames as the script is called from eval server side which is executed at the top window context.\n\t\t\ttop.$('[id$=\"_' + binding + '_hidden\"]').val(contentId);\n\t\t\tvar url = 'content?_n=' + contentId + '&_doc=' + modoc + '&_b=' + binding.replace(/\\_/g, '.');\n\t\t\ttop.$('[id$=\"_' + binding + '_link\"]').attr('href', url).text(fileName).attr('onclick', 'return true');\n\t\t\ttop.$('[id$=\"_' + binding + '_image\"]').attr('src', url);\n\t\t\ttop.PF(binding + 'Overlay').hide();\n\t\t},\n\n\t\tclearContentImage: function(binding) {\n\t\t\t$('[id$=\"_' + binding + '_hidden\"]').val('');\n\t\t\t$('[id$=\"_' + binding + '_image\"]').attr('src','images/blank.gif');\n\t\t},\n\t\t\n\t\tclearContentLink: function(binding) {\n\t\t\t$('[id$=\"_' + binding + '_hidden\"]').val('');\n\t\t\t$('[id$=\"_' + binding + '_link\"]').attr('href','javascript:void(0)').text('<Empty>').attr('onclick', 'return false');\n\t\t},\n\n\t\tcontentMarkupOnShow: function(id, binding, url) {\n\t\t\tvar finalUrl = url += '&_id=' + $('[id$=\"_' + binding + '_hidden\"]').val();\n\t\t\tSKYVE.PF.getById(id + '_markupiframe').attr('src', finalUrl);\n\t\t},\n\n\t\tcontentMarkupOnHide: function(id) {\n\t\t\tSKYVE.PF.getById(id + '_markupiframe').attr('src','')\n\t\t},\n\n\t\tafterMarkupApply: function(binding, contentId, modoc, fileName) {\n\t\t\t// Cannot use window.parent here to support nested frames as the script is called from eval server side which is executed at the top window context.\n\t\t\ttop.$('[id$=\"_' + binding + '_hidden\"]').val(contentId);\n\t\t\tvar url = 'content?_n=' + contentId + '&_doc=' + modoc + '&_b=' + binding.replace(/\\_/g, '.');\n\t\t\ttop.$('[id$=\"_' + binding + '_link\"]').attr('href', url).text(fileName).attr('onclick', 'return true');\n\t\t\ttop.$('[id$=\"_' + binding + '_image\"]').attr('src', url);\n\t\t\ttop.PF(binding + 'Markup').hide();\n\t\t},\n\n\t\ttabChange: function(moduleName, documentName, id, index) {\n\t\t\tsessionStorage['tab_' + moduleName + '_' + documentName + '_' + id] = index;\n\t\t\tif (SKYVE.BizMap) {\n\t\t\t\tSKYVE.BizMap.resizeAll();\n\t\t\t}\n\t\t\tif (SKYVE.BizMapPicker) {\n\t\t\t\tSKYVE.BizMapPicker.resizeAll();\n\t\t\t}\n\t\t},\n\t\t\n\t\tgetTextElement: function(id) {\n\t\t\treturn SKYVE.PF.getById(id);\n\t\t},\n\n\t\tgetTextValue: function(id) {\n\t\t\treturn SKYVE.PF.getTextElement(id).val();\n\t\t},\n\t\t\n\t\tsetTextValue: function(id, value) {\n\t\t\tSKYVE.PF.getTextElement(id).val(value);\n\t\t},\n\n\t\tgetPasswordElement: function(id) {\n\t\t\treturn SKYVE.PF.getById(id + 'password');\n\t\t},\n\t\t\n\t\tgetPasswordValue: function(id) {\n\t\t\treturn SKYVE.PF.getPasswordElement(id).val();\n\t\t},\n\t\t\n\t\tsetPasswordValue: function(id, value) {\n\t\t\tSKYVE.PF.getPasswordElement(id).val(value);\n\t\t},\n\n\t\t// for selecting values and getting the selected value, use the PF SelectOneMenu API through widgetVar\n\t\tgetComboElement: function(id) {\n\t\t\treturn SKYVE.PF.getById(id);\n\t\t},\n\n\t\t// to perform a lookup, use the AutoComplete API through widgetVar\n\t\tgetLookupElement: function(id) {\n\t\t\treturn SKYVE.PF.getById(id);\n\t\t},\n\t\t\n\t\tgetLookupValue: function(id) {\n\t\t\treturn SKYVE.PF.getById(id + '_hinput').val();\n\t\t},\n\t\t\n\t\tsetLookupValue: function(id, value) {\n\t\t\tSKYVE.PF.getById(id + '_hinput').val(value);\n\t\t},\n\t\t\n\t\tgetLookupDescription: function(id) {\n\t\t\treturn SKYVE.PF.getById(id + '_input').val();\n\t\t},\n\t\t\n\t\tsetLookupDescription: function(id, value) {\n\t\t\tSKYVE.PF.getById(id + '_input').val(value);\n\t\t},\n\t\t\n\t\tgetCheckboxElement: function(id) {\n\t\t\treturn SKYVE.PF.getById(id);\n\t\t},\n\t\t\n\t\tgetCheckboxValue: function(id) {\n\t\t\tvar value = SKYVE.PF.getById(id + '_input').val();\n\t\t\tif (value == '0') {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if (value == '1') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse if (value == '2') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn SKYVE.PF.getById(id + '_input').is(\":checked\");\n\t\t\t}\n\t\t},\n\t\t\n\t\tsetCheckboxValue: function(id, trueOrFalse) {\n\t\t\tSKYVE.PF.getById(id + '_input').prop('checked', trueOrFalse);\n\n\t\t\tvar outerDiv = SKYVE.PF.getById(id);\n\t\t\tvar innerDiv = outerDiv.find('.ui-chkbox-box');\n\t\t\tvar innerSpan = innerDiv.find('.ui-chkbox-icon')\n\t\t\tif (trueOrFalse) {\n\t\t\t\tinnerDiv.addClass('ui-state-active');\n\t\t\t\tinnerSpan.addClass('ui-icon ui-icon-check')\n\t\t\t}\n\t\t\telse {\n\t\t\t\tinnerDiv.removeClass('ui-state-active');\n\t\t\t\tinnerSpan.removeClass('ui-icon ui-icon-check')\n\t\t\t}\n\t\t},\n\n\t\t// Called in the <head/> of PF pages when cold navigation to existing page.\n\t\t// ie Not from menu of conversation navigation\n\t\testablishHistory: function() {\n\t\t\tvar sessionHistory = getSessionHistory();\n\t\t\tif (sessionHistory.length == 0) {\n\t\t\t\tvar url = window.location.href;\n\t\t\t\tif (url.match(/.*[\\?|\\&]a\\=e.*/) ||\n\t\t\t\t\t\turl.match(/.*[\\?|\\&]a\\=e\\&.*/)) {\n\t\t\t\t\tvar referrer = document.referrer;\n\t\t\t\t\tif ((! referrer) || (referrer == '') || (referrer == url)) {\n\t\t\t\t\t\treferrer = SKYVE.Util.CONTEXT_URL;\n\t\t\t\t\t}\n\t\t\t\t\tsessionHistory.push(referrer);\n\t\t\t\t\tsessionStorage.sessionHistory = JSON.stringify(sessionHistory);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//console.log('establish history ' + sessionStorage.sessionHistory);\n\t\t},\n\t\t\n\t\t// Called from the menu links to reset the history.\n\t\tstartHistory: function(url) {\n\t\t\tsessionStorage.sessionHistory = '[]';\n\t\t\twindow.location.assign(url);\n\t\t\t//console.log('start history ' + sessionStorage.sessionHistory);\n\t\t},\n\t\t\n\t\t// Called from New/Zoom In actions on DataGrids/ListGrids\n\t\tpushHistory: function(url) { // url is optional and browser wont change location if not defined\n\t\t\tvar sessionHistory = getSessionHistory();\n\t\t\tsessionHistory.push(window.location.href);\n\t\t\tsessionStorage.sessionHistory = JSON.stringify(sessionHistory);\n\t\t\tif (url) {\n\t\t\t\twindow.location.assign(url);\n\t\t\t}\n\t\t\t//console.log('push history ' + sessionStorage.sessionHistory);\n\t\t},\n\t\t\n\t\t// Called from OK, Delete and Cancel buttons on top-level edit views and\n\t\t// Zoom Out button on zoomed-in edit views.\n\t\tpopHistory: function(redirect) {\n\t\t\tvar sessionHistory = getSessionHistory();\n\t\t\tif (sessionHistory.length > 0) {\n\t\t\t\tvar url = sessionHistory.pop();\n\t\t\t\tsessionStorage.sessionHistory = JSON.stringify(sessionHistory);\n\t\t\t\tif (redirect) {\n\t\t\t\t\twindow.location.assign(url);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//console.log('pop history ' + sessionStorage.sessionHistory);\n\t\t},\n\t\t\n\t\t// Called from Save button and from action buttons\n\t\t// when a bean was not persistent and becomes persistent from the button push.\n\t\t// It replaces the \"new\" URL (no i param) with an \"edit\" URL through the history stack.\n\t\tsaveHistory: function(bizModule, bizDocument, bizId) {\n\t\t\tvar sessionHistory = getSessionHistory();\n\t\t\tvar historyChanged = false;\n\t\t\tfor (var i = 0; i < sessionHistory.length; i++) {\n\t\t\t\tvar url = sessionHistory[i];\n\t\t\t\t\n\t\t\t\t// NB can't just use indexOf() here - the entire URL parameter must match\n\t\t\t\tvar tokens = url.split(/\\?|\\&/);\n\t\t\t\tvar moduleParameterToken = 'm=' + bizModule;\n\t\t\t\tvar documentParameterToken = 'd=' + bizDocument;\n\t\t\t\tvar actionParameterFound = false;\n\t\t\t\tvar moduleParameterFound = false;\n\t\t\t\tvar documentParameterFound = false;\n\t\t\t\tvar bizIdParameterFound = false;\n\t\t\t\tfor (var j = 0; j < tokens.length; j++) {\n\t\t\t\t\tvar token = tokens[j];\n\t\t\t\t\tif (token == 'a=e') {\n\t\t\t\t\t\tactionParameterFound = true;\n\t\t\t\t\t}\n\t\t\t\t\telse if (token == moduleParameterToken) {\n\t\t\t\t\t\tmoduleParameterFound = true;\n\t\t\t\t\t}\n\t\t\t\t\telse if (token == documentParameterToken) {\n\t\t\t\t\t\tdocumentParameterFound = true;\n\t\t\t\t\t}\n\t\t\t\t\telse if (token.startsWith('i=')) {\n\t\t\t\t\t\tbizIdParameterFound = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (actionParameterFound && \n\t\t\t\t\t\tmoduleParameterFound && \n\t\t\t\t\t\tdocumentParameterFound &&\n\t\t\t\t\t\tbizIdParameterFound) {\n\t\t\t\t\turl += '&i=' + bizId;\n\t\t\t\t\tsessionHistory[i] = url;\n\t\t\t\t\thistoryChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (historyChanged) {\n\t\t\t\tsessionStorage.sessionHistory = JSON.stringify(sessionHistory);\n\t\t\t}\n\t\t\t\n\t\t\tif (window.history) {\n\t\t\t\tif (history.replaceState) {\n\t\t\t\t\tvar url = window.location.href + '&i=' + bizId;\n\t\t\t\t\thistory.replaceState({}, '', url);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//console.log('save history ' + sessionStorage.sessionHistory);\n\t\t},\n\t\t\n        toggleFilters: function(dataTableId) {\n            var hiddenClass = 'hiddenFilter';\n            // test for element that ends with the dataTableId as it may be in a naming container\n            var dataTable = $('[id$=\"' + dataTableId + '\"]');\n\t\t\tif (dataTable != null) {\n\t\t\t\tvar toggleClass = function() {\n                    var filter = $(this);\n                    if (filter.hasClass(hiddenClass)) {\n                        filter.removeClass(hiddenClass);\n                    } else {\n                        filter.addClass(hiddenClass);\n                    }\n\t\t\t\t};\n\t\t\t\tdataTable.find('.ui-filter-column').each(toggleClass);\n\t\t\t\tdataTable.find('.ui-column-customfilter').each(toggleClass);\n\t\t\t}\n\t\t},\n\t\t\n\t\tonPushMessage: function(pushMessage) {\n\t\t\tvar growls = [];\n\n\t\t\tfor (var i = 0, l = pushMessage.length; i < l; i++) {\n\t\t\t\tvar m = pushMessage[i];\n\t\t\t\tif (m.type == 'g') {\n\t\t\t\t\tgrowls.push({severity: m.severity, summary: m.message});\n\t\t\t\t}\n\t\t\t\telse if (m.type == 'm') {\n\t\t\t\t\tPrimeFaces.showMessageInDialog({severity: m.severity, summary: '', detail: m.message,escape: false});\n\t\t\t\t}\n\t\t\t\telse if (m.type == 'r') {\n\t\t\t\t\tpushRerender();\n\t\t\t\t}\n\t\t\t\telse if (m.type == 'j') {\n\t\t\t\t\twindow[m.method](m.argument);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (growls.length > 0) {\n\t\t\t\tPrimeFaces.cw('Growl', 'pushGrowl', {\n\t\t\t\t\tid: 'pushGrowl', \n\t\t\t\t\twidgetVar: 'pushGrowl',\n\t\t\t\t\tlife: 6000, \n\t\t\t\t\tsticky: false, \n\t\t\t\t\tmsgs: growls \n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\tgmap: function(options) {\n\t\t\tif (loadingMap) {\n\t\t\t\tsetTimeout(function() {SKYVE.PF.gmap(options)}, 100);\n\t\t\t}\n\t\t\telse if (window.google && window.google.maps && window.SKYVE.BizMapPicker) {\n\t\t\t\tif (options.queryName || options.modelName) {\n\t\t\t\t\treturn SKYVE.BizMap.create(options);\n\t\t\t\t}\n\t\t\t\treturn SKYVE.BizMapPicker.create(options);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tloadingMap = true;\n\n\t\t\t\tSKYVE.Util.loadJS('wicket/wicket.js?v=' + SKYVE.Util.v, function() {\n\t\t\t\t\tSKYVE.Util.loadJS('wicket/wicket-gmap3.js?v=' + SKYVE.Util.v, function() {\n\t\t\t\t\t\tvar url = 'https://maps.googleapis.com/maps/api/js?v=3&libraries=drawing';\n\t\t\t\t\t\tif (SKYVE.Util.googleMapsV3ApiKey) {\n\t\t\t\t\t\t\turl += '&key=' + SKYVE.Util.googleMapsV3ApiKey;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tSKYVE.Util.loadJS(url, function() {\n\t\t\t\t\t\t\tSKYVE.Util.loadJS('skyve/prime/skyve-gmap-min.js?v=' + SKYVE.Util.v, function() {\n\t\t\t\t\t\t\t\tloadingMap = false;\n\t\t\t\t\t\t\t\tif (options.queryName || options.modelName) {\n\t\t\t\t\t\t\t\t\treturn SKYVE.BizMap.create(options);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn SKYVE.BizMapPicker.create(options);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\tleaflet: function(options) {\n\t\t\tif (loadingMap) {\n\t\t\t\tsetTimeout(function() {SKYVE.PF.leaflet(options)}, 100);\n\t\t\t}\n\t\t\telse if (window.L && window.SKYVE.BizMapPicker) {\n\t\t\t\tif (options.queryName || options.modelName) {\n\t\t\t\t\treturn SKYVE.BizMap.create(options);\n\t\t\t\t}\n\t\t\t\treturn SKYVE.BizMapPicker.create(options);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tloadingMap = true;\n\n\t\t\t\tSKYVE.Util.loadCSS('leaflet/leaflet.css?v=' + SKYVE.Util.v, function() {\n\t\t\t\t\tSKYVE.Util.loadJS('leaflet/leaflet.js?v=' + SKYVE.Util.v, function() {\n\t\t\t\t\t\tSKYVE.Util.loadJS('leaflet/Path.Drag.js?v=' + SKYVE.Util.v, function() {\n\t\t\t\t\t\t\tSKYVE.Util.loadJS('leaflet/Leaflet.Editable.js?v=' + SKYVE.Util.v, function() {\n\t\t\t\t\t\t\t\tSKYVE.Util.loadCSS('leaflet/leaflet.fullscreen.css?v=' + SKYVE.Util.v, function() {\n\t\t\t\t\t\t\t\t\tSKYVE.Util.loadJS('leaflet/Leaflet.fullscreen.min.js?v=' + SKYVE.Util.v, function() {\n\t\t\t\t\t\t\t\t\t\tSKYVE.Util.loadJS('skyve/prime/skyve-leaflet-min.js?v=' + SKYVE.Util.v, function() {\n\t\t\t\t\t\t\t\t\t\t\tloadingMap = false;\n\t\t\t\t\t\t\t\t\t\t\tif (options.queryName || options.modelName) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn SKYVE.BizMap.create(options);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn SKYVE.BizMapPicker.create(options);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t// This is called by PF charts to lose the 2:1 aspect ratio.\n\t\tchartExtender: function() {\t\t\n\t\t\tif (! this.cfg.config.options) {\n\t\t\t\tthis.cfg.config.options = {};\n\t\t\t}\n\t\t\tthis.cfg.config.options.responsive = true;\n\t\t\tthis.cfg.config.options.maintainAspectRatio = false;\n\t\t},\n\t\t\t\t\t\n\t\tsidebar: function(widgetId, width, breakpoint, floatingWidth, viewSuffix) {\n\t\t\t$(function() {\n\t\t\t\tvar\twin = $(window);\n\t\t\t\tvar head = $('head');\n\t\t\t\tvar body = $('body');\n\t\t\t\tvar sidebar = $('#'+widgetId);\n\t\t\t\tvar sidebarInner = sidebar.children('.inner');\n\n\t\t\t\tif ($('#sidebarStyle' + viewSuffix).length == 0) { // DNE\n\t\t\t\t\t$('<style id=\"sidebarStyle' + viewSuffix + '\">.sidebar' + viewSuffix + '{background-color:white;font-size:0.9em;position:relative;width:' + width + ';flex-grow:0;flex-shrink:0;transition:margin-right 0.5s ease,box-shadow 0.5s ease;}' +\n\t\t\t\t\t\t'.sidebar' + viewSuffix + ' .toggle{text-decoration:none;transition:right 0.5s ease;-webkit-tap-highlight-color:rgba(255,255,255,0);border:0;display:none;position:absolute;top:calc(50% - 3.75em);right:calc(' + floatingWidth + 'px - 3em);width:4em;height:7.5em;line-height:6.25em;text-align:center;z-index:10000;}' + \n\t\t\t\t\t\t'.sidebar' + viewSuffix + ' .toggle:before{font-family:FontAwesome;font-size:1.1rem;font-style:normal;font-weight:normal;text-transform:none !important;content:\\'>\\';height:inherit;right:0;line-height:inherit;position:absolute;text-indent:0;top:0;width:inherit;color:#7f888f;margin-right:1.5em;margin-top:-0.5em;z-index:1;}' + \n\t\t\t\t\t\t'.sidebar' + viewSuffix + ' .toggle:after{background:rgba(222,225,226,0.75);border-radius:0.375em;content:\\'\\';height:3em;right:2em;position:absolute;top:1em;width:3em;}' +\n\t\t\t\t\t\t'.sidebar' + viewSuffix + '.inactive{margin-right:-' + floatingWidth + 'px;}.sidebar' + viewSuffix + '.inactive .toggle:before{content:\\'<\\';}' +\n\t\t\t\t\t\t'@media screen and (max-width:' + breakpoint + 'px){' +\n\t\t\t\t\t\t\t'.sidebar' + viewSuffix + '{box-shadow:0 0 5em 0 rgba(0,0,0,0.175);position:fixed;top:0;right:0;width:' + floatingWidth + 'px;height:100%;z-index:10000;}' +\n\t\t\t\t\t\t\t'.sidebar' + viewSuffix + '.inactive{box-shadow:none;}' +\n\t\t\t\t\t\t\t'.sidebar' + viewSuffix + '>.inner{position:absolute;top:0;right:0;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;}' +\n\t\t\t\t\t\t\t'.sidebar' + viewSuffix + ' .toggle{display:flex;}' +\n\t\t\t\t\t\t'}</style>').appendTo(head);\n\t\t\t\t}\n\t\t\t\twin.on('resize', function() {\n\t\t\t\t\tif (win.width() <= breakpoint) {\n\t\t\t\t\t\tsidebar.addClass('inactive');\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tsidebar.removeClass('inactive');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\twin.trigger('resize'); // initial setting\n\t\t\t\t\n\t\t\t\t// Toggle.\n\t\t\t\t$('<a href=\"#' + widgetId + '\" class=\"toggle\"></a>')\n\t\t\t\t\t.appendTo(sidebar)\n\t\t\t\t\t.on('click', function(event) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\tsidebar.toggleClass('inactive');\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t// Show the hidden sidebar once the transition is mostly over\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tsidebar.show();\n\t\t\t\t}, 100);\n\t\t\t});\n\t\t}\n\t};\n}();\n"],
"names":["window","SKYVE","Util","load","node","callback","readyState","onreadystatechange","node.onreadystatechange","onload","headNode","document","getElementsByTagName","appendChild","customer","v","googleMapsV3ApiKey","ckEditorConfigFileUrl","mapCentre","mapZoom","CONTEXT_URL","location","substring","context","lastIndexOf","allowedReportFormats","loadJS","scriptPath","scriptNode","createElement","type","src","loadCSS","cssPath","cssNode","rel","href","geoLocate","navigator","geolocation","$","PrimeFaces","cw","id","widgetVar","msgs","summary","detail","severity","getCurrentPosition","position","coords","longitude","latitude","error","message","enableHighAccuracy","setTouchCookie","hasTouchScreen","maxTouchPoints","msMaxTouchPoints","mQ","matchMedia","media","matches","cookie","passwordStrength","progressBarPower","progressBarColour","GMap","wkt","drawingModes","drawingTools","result","google","maps","drawing","OverlayType","MARKER","POLYLINE","POLYGON","RECTANGLE","scatter","display","data","fit","delta","Wkt","items","bizId","_objects","Object","prototype","hasOwnProperty","call","found","i","l","length","deletedObject","overlays","setMap","item","object","same","features","j","m","geometry","feature","read","e","alert","props","editable","strokeColour","strokeColor","fillColour","fillColor","fillOpacity","iconRelativeFilePath","icon","url","_doc","iconAnchorX","iconAnchorY","anchor","Point","origin","overlay","toObject","push","webmap","zoomable","fromTimestamp","toTimestamp","mod","moduleName","doc","documentName","infoMarkup","event","addListener","click","bounds","LatLngBounds","someOverlays","getPath","path","getLength","extend","getAt","getPosition","getNorthEast","equals","getSouthWest","getZoom","setZoom","undefined","setCenter","fitBounds","centre","coord","components","LatLng","y","x","console","log","scatterValue","value","name","obj","defaults","setEditable","isArray","key","_overlays","getBounds","clear","drawingManager","DrawingManager","drawingControlOptions","ControlPosition","LEFT_BOTTOM","setDrawingMode","fromObject","wktValue","write","setFieldValue","geoLocator","control","assign","style","backgroundColor","border","borderRadius","boxShadow","cursor","margin","padding","textAlign","title","innerHTML","index","addEventListener","pos","lat","lng","marker","Marker","map","geolocator","controls","LEFT","setDisabled","disabled","setOptions","drawingControl","refreshControls","refreshTime","_refreshRequired","children","Number","_intervalId","clearInterval","setInterval","rerender","bind","checked","Leaflet","parse","input","re","match","wktString","white","multicoords","depth","rings","stack","pointer","elem","tuples","pop","split","some","isNaN","Array","apply","parseFloat","list","pt","point","c","coordinates","multipoint","indexOf","replace","newCoordsFormat","multilinestring","linestring","geometrycollection","geometries","root","parts","srid","shift","crs","properties","stringify","gj","pairWKT","join","ringWKT","r","ringsWKT","wrapParens","s","Error","numberRegexp","RegExp","source","removeLayer","getLayers","zoomData","itemFeature","color","iconUrl","iconAnchor","L","geoJson","pointToLayer","latlng","onEachFeature","layer","bindPopup","addLayer","latLngBounds","maxZoom","addTo","EditControl","Control","options","onAdd","container","DomUtil","create","markerLink","DomEvent","on","stop","LAYER","editTools","startMarker","polylineLink","startPolyline","rectangleLink","startRectangle","polygonLink","startPolygon","editControl","addControl","toggleEdit","toGeoJSON","GeoControl","link","commitDrawing","panTo","geoControl","getContainer","PF","loadingMap","getSessionHistory","sessionStorage","sessionHistory","JSON","getById","escapeClientId","getByIdEndsWith","contentOverlayOnShow","attr","contentOverlayOnHide","afterContentUpload","binding","contentId","modoc","fileName","top","val","text","hide","clearContentImage","clearContentLink","contentMarkupOnShow","finalUrl","contentMarkupOnHide","afterMarkupApply","tabChange","BizMap","resizeAll","BizMapPicker","getTextElement","getTextValue","setTextValue","getPasswordElement","getPasswordValue","setPasswordValue","getComboElement","getLookupElement","getLookupValue","setLookupValue","getLookupDescription","setLookupDescription","getCheckboxElement","getCheckboxValue","is","setCheckboxValue","trueOrFalse","prop","innerDiv","outerDiv","find","innerSpan","addClass","removeClass","establishHistory","referrer","startHistory","pushHistory","popHistory","redirect","saveHistory","bizModule","bizDocument","historyChanged","tokens","moduleParameterToken","documentParameterToken","actionParameterFound","moduleParameterFound","documentParameterFound","bizIdParameterFound","token","startsWith","history","replaceState","toggleFilters","dataTableId","dataTable","toggleClass","filter","hasClass","hiddenClass","each","onPushMessage","pushMessage","growls","showMessageInDialog","escape","pushRerender","method","argument","life","sticky","gmap","setTimeout","queryName","modelName","leaflet","chartExtender","cfg","config","responsive","maintainAspectRatio","sidebar","widgetId","width","breakpoint","floatingWidth","viewSuffix","win","head","appendTo","trigger","preventDefault","stopPropagation","show"]
}
