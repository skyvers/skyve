{
"version":3,
"file":"../skyve-web/src/main/resources/META-INF/resources/skyve/desktop/skyve-gmap-min.js",
"lineCount":14,
"mappings":"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",
"sources":["src/js/desktop/skyve-gmap.js"],
"sourcesContent":["/**\n * Implements the BizMap UI component for Google Maps.\n * Extends Canvas from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizMap\", \"Canvas\");\n\nisc.BizMap.addClassMethods({\n\tloadingGMap: false,\n\n\t/**\n\t * Loads Google Maps API if not already loaded.\n\t * @param {Function} callback - function to execute after loading the API.\n\t */\n\tloadGMap: function (callback) {\n\t\tif (this.loadingGMap) {\n\t\t\tsetTimeout(() => this.loadGMap(callback), 100);\n\t\t} else if (window.google?.maps) {\n\t\t\tcallback();\n\t\t} else {\n\t\t\tthis.loadingGMap = true;\n\t\t\tSKYVE.Util.loadJS(`wicket/wicket.js?v=${SKYVE.Util.v}`, () => {\n\t\t\t\tSKYVE.Util.loadJS(`wicket/wicket-gmap3.js?v=${SKYVE.Util.v}`, () => {\n\t\t\t\t\tlet url =\n\t\t\t\t\t\t\"https://maps.googleapis.com/maps/api/js?v=3&libraries=drawing\";\n\t\t\t\t\tif (SKYVE.Util.googleMapsV3ApiKey) {\n\t\t\t\t\t\turl += `&key=${SKYVE.Util.googleMapsV3ApiKey}`;\n\t\t\t\t\t}\n\t\t\t\t\tSKYVE.Util.loadJS(url, () => {\n\t\t\t\t\t\tthis.loadingGMap = false;\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\tv: 0,\n\n\t/**\n\t * Initializes the BizMap instance.\n\t */\n\tinitialise: function () {\n\t\teval(`${isc.BizMap.id}.build()`);\n\t},\n});\n\nisc.BizMap.addMethods({\n\t/**\n\t * Initializes the map component with default settings.\n\t * @param {Object} config - configuration settings for the map.\n\t */\n\tinit: function (config) {\n\t\tthis._refreshRequired = true; // Set via the map UI\n\t\tthis._refreshing = false; // Stop multiple refreshes\n\t\tthis._zoomed = false; // We do not want refreshes when zoomed in\n\t\tthis.width = \"100%\";\n\t\tthis.height = \"100%\";\n\t\tthis.styleName = \"googleMapDivParent\";\n\t\tthis.ID = `bizMap${isc.BizMap.v++}`;\n\t\tthis.redrawOnResize = false;\n\t\tthis.Super(\"init\", arguments);\n\t\tthis._objects = {};\n\t\tthis._intervalId = null; // Interval to stop on refresh checkbox click\n\t},\n\n\t/**\n\t * Returns the inner HTML for the map container.\n\t * @returns {string} the HTML string for the map container.\n\t */\n\tgetInnerHTML: function () {\n\t\treturn `<div id=\"${this.ID}_map\" style=\"margin:0;padding:0;height:100%\">Loading Map...</div>`;\n\t},\n\n\t/**\n\t * Draws the map component, ensuring Google Maps API is loaded.\n\t */\n\tdraw: function () {\n\t\tif (window.google?.maps) {\n\t\t\tif (!this.isDrawn()) {\n\t\t\t\tthis.build();\n\t\t\t\treturn this.Super(\"draw\", arguments);\n\t\t\t}\n\t\t} else {\n\t\t\tisc.BizMap.id = this.ID;\n\t\t\tisc.BizMap.loadGMap(() => isc.BizMap.initialise());\n\t\t\treturn this.Super(\"draw\", arguments);\n\t\t}\n\t},\n\n\t/**\n\t * Sets the data source for the map.\n\t * @param {string} dataSourceID - the ID of the data source.\n\t */\n\tsetDataSource: function (dataSourceID) {\n\t\tif (window.google?.maps && this.webmap) {\n\t\t\tif (this._view) {\n\t\t\t\tthis._modelName = dataSourceID;\n\t\t\t\tthis._moduleName = null;\n\t\t\t\tthis._queryName = null;\n\t\t\t\tthis._geometryBinding = null;\n\n\t\t\t\tthis._view._grids[dataSourceID] ||= {};\n\t\t\t\tthis._view._grids[dataSourceID][this.getID()] = this;\n\t\t\t} else {\n\t\t\t\tconst underscoreIndex = dataSourceID.indexOf(\"_\");\n\t\t\t\tthis._moduleName = dataSourceID.substring(0, underscoreIndex);\n\t\t\t\tthis._queryName = dataSourceID.substring(underscoreIndex + 1);\n\t\t\t\tthis._geometryBinding = this._queryName.split(\"_\").pop();\n\t\t\t\tthis._queryName = this._queryName.split(\"_\")[0];\n\n\t\t\t\tthis._modelName = null;\n\t\t\t}\n\t\t\tthis._refresh(true);\n\t\t} else {\n\t\t\tthis.delayCall(\"setDataSource\", arguments, 100);\n\t\t}\n\t},\n\n\t/**\n\t * Builds the map.\n\t */\n\tbuild: function () {\n\t\tif (this.isDrawn()) {\n\t\t\tconst mapOptions = {\n\t\t\t\tzoom: this.webmap?.getZoom() || 1,\n\t\t\t\tcenter: this.webmap?.getCenter() || new google.maps.LatLng(0, 0),\n\t\t\t\tmapTypeId: this.webmap?.getMapTypeId() || eval(SKYVE.Util.mapLayers),\n\t\t\t};\n\n\t\t\tthis._objects = {}; // If we are building a new map, clear state\n\t\t\tthis.infoWindow = new google.maps.InfoWindow({ content: \"\" });\n\t\t\tthis.webmap = new google.maps.Map(\n\t\t\t\tdocument.getElementById(`${this.ID}_map`),\n\t\t\t\tmapOptions,\n\t\t\t);\n\n\t\t\tif (this.showRefresh) SKYVE.GMap.refreshControls(this);\n\n\t\t\tif (this.loading === \"lazy\") {\n\t\t\t\tthis.webmap.addListener(\"zoom_changed\", () => {\n\t\t\t\t\tif (!this._refreshing) this._refresh(false);\n\t\t\t\t});\n\t\t\t\tthis.webmap.addListener(\"dragend\", () => this._refresh(false));\n\t\t\t}\n\n\t\t\tthis._refresh(true);\n\n\t\t\tif (this._intervalId) {\n\t\t\t\tclearInterval(this._intervalId);\n\t\t\t\tthis._intervalId = null;\n\t\t\t}\n\n\t\t\tif (this.refreshTime > 0 && this._refreshRequired) {\n\t\t\t\tthis._intervalId = setInterval(\n\t\t\t\t\tthis.rerender.bind(this),\n\t\t\t\t\tthis.refreshTime * 1000,\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.delayCall(\"build\", null, 100);\n\t\t}\n\t},\n\n\t/**\n\t * Rerenders the map by refreshing it.\n\t */\n\trerender: function () {\n\t\tthis._refresh(false);\n\t},\n\n\t/**\n\t * Resumes map refresh operations.\n\t */\n\tresume: function () {\n\t\tthis._zoomed = false;\n\t},\n\n\t/**\n\t * Refreshes the map with new data.\n\t * @param {boolean} fit - whether to fit the refreshed data within view.\n\t */\n\t_refresh: function (fit) {\n\t\tif (\n\t\t\tthis._zoomed || // Operator is zoomed in\n\t\t\tthis._refreshing || // Already triggered a refresh\n\t\t\t!this.isDrawn() || // Widget is not drawn\n\t\t\t!this.isVisible() // Widget is not visible (from condition in UI or UI not displayed atm)\n\t\t)\n\t\t\treturn;\n\n\t\tthis._refreshing = true;\n\t\tlet url = `${SKYVE.Util.CONTEXT_URL}map?`;\n\n\t\tif (this._view) {\n\t\t\tif (this._modelName) {\n\t\t\t\tconst instance = this._view.gather(false);\n\t\t\t\turl += `_c=${instance._c}&_m=${this._modelName}`;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (this._queryName) {\n\t\t\turl += `_mod=${this._moduleName}&_q=${this._queryName}&_geo=${this._geometryBinding}`;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tlet extents = \"\";\n\t\tif (this.loading === \"lazy\" && this.webmap?.getBounds()) {\n\t\t\tconst bounds = this.webmap.getBounds();\n\t\t\tconst wkt = new Wkt.Wkt();\n\t\t\twkt.fromObject(bounds.getNorthEast());\n\t\t\textents = `&_ne=${wkt.write()}`;\n\t\t\twkt.fromObject(bounds.getSouthWest());\n\t\t\textents += `&_sw=${wkt.write()}`;\n\t\t}\n\n\t\tisc.RPCManager.sendRequest({\n\t\t\tshowPrompt: true,\n\t\t\tevalResult: true,\n\t\t\tactionURL: url + extents,\n\t\t\thttpMethod: \"GET\",\n\t\t\tcallback: (rpcResponse, data) => {\n\t\t\t\ttry {\n\t\t\t\t\tSKYVE.GMap.scatter(this, data, fit, true);\n\t\t\t\t} finally {\n\t\t\t\t\tthis._refreshing = false;\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t},\n\n\t/**\n\t * Handles click events on map overlays and displays an info window with a zoom button.\n\t *\n\t * @param {google.maps.OverlayView} overlay - the overlay that was clicked.\n\t * @param {google.maps.MapMouseEvent} event - the event that triggered the click.\n\t */\n\tclick: function (overlay, event) {\n\t\tlet contents = overlay.infoMarkup;\n\t\tcontents += `<br/><br/><input type=\"button\" value=\"Zoom\" onclick=\"${this.ID}.zoom(`;\n\n\t\tif (overlay.getPosition) {\n\t\t\tconst p = overlay.getPosition();\n\t\t\tcontents += `${p.lat()},${p.lng()},${p.lat()},${p.lng()},'${overlay.mod}','${overlay.doc}','${overlay.bizId}')\"/>`;\n\n\t\t\tthis.infoWindow.open(this.webmap, overlay);\n\t\t\tthis.infoWindow.setContent(contents);\n\t\t} else if (overlay.getPath) {\n\t\t\tconst bounds = new google.maps.LatLngBounds();\n\t\t\tconst path = overlay.getPath();\n\n\t\t\tfor (let k = 0, n = path.getLength(); k < n; k++) {\n\t\t\t\tbounds.extend(path.getAt(k));\n\t\t\t}\n\n\t\t\tconst ne = bounds.getNorthEast();\n\t\t\tconst sw = bounds.getSouthWest();\n\n\t\t\tcontents += `${ne.lat()},${sw.lng()},${sw.lat()},${ne.lng()},'${overlay.mod}','${overlay.doc}','${overlay.bizId}')\"/>`;\n\n\t\t\tthis.infoWindow.setPosition(event.latLng);\n\t\t\tthis.infoWindow.open(this.webmap);\n\t\t\tthis.infoWindow.setContent(contents);\n\t\t} else if (overlay.getBounds) {\n\t\t\tconst bounds = overlay.getBounds();\n\t\t\tconst ne = bounds.getNorthEast();\n\t\t\tconst sw = bounds.getSouthWest();\n\n\t\t\tcontents += `${ne.lat()},${sw.lng()},${sw.lat()},${ne.lng()},'${overlay.mod}','${overlay.doc}','${overlay.bizId}')\"/>`;\n\n\t\t\tthis.infoWindow.setPosition(event.latLng);\n\t\t\tthis.infoWindow.open(this.webmap);\n\t\t\tthis.infoWindow.setContent(contents);\n\t\t}\n\t},\n\n\t/**\n\t * Zooms into a specific region of the map and opens an editing window for a business document.\n\t *\n\t * @param {number} topLeftLat - latitude of the top-left corner.\n\t * @param {number} topLeftLng - longitude of the top-left corner.\n\t * @param {number} bottomRightLat - latitude of the bottom-right corner.\n\t * @param {number} bottomRightLng - longitude of the bottom-right corner.\n\t * @param {string} bizModule - the business module identifier.\n\t * @param {string} bizDocument - the business document identifier.\n\t * @param {string} bizId - the unique identifier of the business document.\n\t */\n\tzoom: function (\n\t\ttopLeftLat,\n\t\ttopLeftLng,\n\t\tbottomRightLat,\n\t\tbottomRightLng,\n\t\tbizModule,\n\t\tbizDocument,\n\t\tbizId,\n\t) {\n\t\tthis._zoomed = true; // Prevents unnecessary refreshes when zoomed in\n\n\t\tconst scale = Math.pow(2, this.webmap.getZoom());\n\t\tconst nw = new google.maps.LatLng(\n\t\t\tthis.webmap.getBounds().getNorthEast().lat(),\n\t\t\tthis.webmap.getBounds().getSouthWest().lng(),\n\t\t);\n\n\t\tconst worldCoordinateNW = this.webmap.getProjection().fromLatLngToPoint(nw);\n\t\tconst topLeftWorldCoordinate = this.webmap\n\t\t\t.getProjection()\n\t\t\t.fromLatLngToPoint(new google.maps.LatLng(topLeftLat, topLeftLng));\n\t\tconst bottomRightWorldCoordinate = this.webmap\n\t\t\t.getProjection()\n\t\t\t.fromLatLngToPoint(\n\t\t\t\tnew google.maps.LatLng(bottomRightLat, bottomRightLng),\n\t\t\t);\n\n\t\tconst pageRect = this.getPageRect();\n\t\tconst x =\n\t\t\tMath.floor((topLeftWorldCoordinate.x - worldCoordinateNW.x) * scale) +\n\t\t\tpageRect[0];\n\t\tconst y =\n\t\t\tMath.floor((topLeftWorldCoordinate.y - worldCoordinateNW.y) * scale) +\n\t\t\tpageRect[1];\n\t\tconst width =\n\t\t\tMath.floor((bottomRightWorldCoordinate.x - worldCoordinateNW.x) * scale) +\n\t\t\tpageRect[0] -\n\t\t\tx;\n\t\tconst height =\n\t\t\tMath.floor((bottomRightWorldCoordinate.y - worldCoordinateNW.y) * scale) +\n\t\t\tpageRect[1] -\n\t\t\ty;\n\n\t\tisc.BizUtil.getEditView(bizModule, bizDocument, (view) => {\n\t\t\tisc.WindowStack.popup([x, y, width, height], \"Edit\", true, [view]);\n\t\t\tview.editInstance(bizId, null, null);\n\t\t\tthis.infoWindow.close();\n\t\t});\n\t},\n});\n\n/**\n * Implements the BizMapPicker UI component.\n * Extends HTMLFlow from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizMapPicker\", \"HTMLFlow\");\n\nisc.BizMapPicker.addClassMethods({\n\tv: 0,\n\n\t/**\n\t * Initializes the BizMapPicker by building the map.\n\t */\n\tinitialise: function () {\n\t\teval(`${isc.BizMapPicker.id}.build()`);\n\t},\n});\n\nisc.BizMapPicker.addMethods({\n\t/**\n\t * Initializes the map picker component.\n\t * @param {Object} config - configuration object.\n\t */\n\tinit: function (config) {\n\t\tthis.width = \"100%\";\n\t\tthis.height = \"100%\";\n\t\tthis.styleName = \"googleMapDivParent\";\n\t\tthis.ID = `bizMapPicker${isc.BizMapPicker.v++}`;\n\t\tthis.contents = `<div id=\"${this.ID}_map\" style=\"margin:0;padding:0;height:100%\">Loading Map...</div>`;\n\t\tthis.Super(\"init\", arguments);\n\t\tthis._overlays = [];\n\t\tthis.field = config.field;\n\t\tthis.drawingTools = config.drawingTools;\n\n\t\tif (window.google && window.google.maps) {\n\t\t\tthis.build();\n\t\t} else {\n\t\t\tisc.BizMapPicker.id = this.ID;\n\t\t\tisc.BizMap.loadGMap(isc.BizMapPicker.initialise);\n\t\t}\n\t},\n\n\t/**\n\t * Enables or disables the map picker.\n\t * @param {boolean} disabled - whether to disable the component.\n\t */\n\tsetDisabled: function (disabled) {\n\t\tSKYVE.GMap.setDisabled(this, disabled);\n\t},\n\n\t/**\n\t * Maps the current field value onto the map.\n\t */\n\tmapIt: function () {\n\t\tconst value = this.field.getValue();\n\t\tSKYVE.GMap.scatterValue(this, value);\n\t},\n\n\t/**\n\t * Sets the field value from a Well-Known Text (WKT) representation.\n\t * @param {string} wktValue - the WKT value to set.\n\t */\n\tsetFieldValue: function (wktValue) {\n\t\tthis.field.setValueFromPicker(wktValue);\n\t},\n\n\t/**\n\t * Builds and initializes the Google Map.\n\t */\n\tbuild: function () {\n\t\tif (this.isDrawn()) {\n\t\t\tconst mapOptions = {\n\t\t\t\tzoom: SKYVE.Util.mapZoom,\n\t\t\t\tcenter: SKYVE.GMap.centre(),\n\t\t\t\tmapTypeId: eval(SKYVE.Util.mapLayers),\n\t\t\t\tmapTypeControlOptions: {\n\t\t\t\t\tstyle: google.maps.MapTypeControlStyle.DROPDOWN_MENU,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tthis.webmap = new google.maps.Map(\n\t\t\t\tdocument.getElementById(`${this.ID}_map`),\n\t\t\t\tmapOptions,\n\t\t\t);\n\n\t\t\tSKYVE.GMap.drawingTools(this);\n\t\t\tSKYVE.GMap.geoLocator(this);\n\t\t\tSKYVE.GMap.setDisabled(this, this.field.isDisabled());\n\t\t\tSKYVE.GMap.clear(this);\n\n\t\t\t// Delay `mapIt` call to ensure the map has fully initialized\n\t\t\tthis.delayCall(\"mapIt\", null, 100);\n\t\t} else {\n\t\t\tthis.delayCall(\"build\", null, 100);\n\t\t}\n\t},\n});\n"],
"names":["isc","ClassFactory","defineClass","BizMap","addClassMethods","loadingGMap","loadGMap","callback","setTimeout","window","google","maps","SKYVE","Util","loadJS","v","url","googleMapsV3ApiKey","initialise","eval","id","addMethods","init","config","_refreshRequired","_zoomed","_refreshing","height","width","styleName","ID","redrawOnResize","Super","arguments","_objects","_intervalId","getInnerHTML","draw","isDrawn","build","setDataSource","dataSourceID","webmap","_view","_modelName","_geometryBinding","_queryName","_moduleName","_grids","getID","underscoreIndex","indexOf","substring","split","pop","_refresh","delayCall","mapOptions","zoom","getZoom","center","getCenter","LatLng","mapTypeId","getMapTypeId","mapLayers","infoWindow","InfoWindow","content","Map","document","getElementById","showRefresh","GMap","refreshControls","loading","addListener","clearInterval","refreshTime","setInterval","rerender","bind","resume","fit","isVisible","CONTEXT_URL","instance","gather","_c","extents","getBounds","bounds","wkt","Wkt","fromObject","getNorthEast","write","getSouthWest","RPCManager","sendRequest","showPrompt","evalResult","actionURL","httpMethod","rpcResponse","data","scatter","click","overlay","event","contents","infoMarkup","getPosition","p","lat","lng","mod","doc","bizId","open","setContent","getPath","LatLngBounds","path","k","n","getLength","extend","getAt","ne","sw","setPosition","latLng","topLeftLat","topLeftLng","bottomRightLat","bottomRightLng","bizModule","bizDocument","scale","Math","pow","nw","worldCoordinateNW","getProjection","fromLatLngToPoint","topLeftWorldCoordinate","bottomRightWorldCoordinate","pageRect","getPageRect","x","floor","y","BizUtil","getEditView","view","WindowStack","popup","editInstance","close","BizMapPicker","_overlays","field","drawingTools","setDisabled","disabled","mapIt","value","getValue","scatterValue","setFieldValue","wktValue","setValueFromPicker","mapZoom","centre","mapTypeControlOptions","style","MapTypeControlStyle","DROPDOWN_MENU","geoLocator","isDisabled","clear"]
}
