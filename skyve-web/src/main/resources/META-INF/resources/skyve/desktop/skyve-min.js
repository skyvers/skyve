if(!window.SKYVE){window.SKYVE={}}SKYVE.Util=function(){var a=window.location+"";a=a.substring(0,a.lastIndexOf("/")+1);var b=function(d,e){if(e!=null){if(d.readyState){d.onreadystatechange=function(){if(d.readyState=="loaded"||d.readyState=="complete"){d.onreadystatechange=null;e()}}}else{d.onload=e}}var c=document.getElementsByTagName("HEAD");if(c[0]!=null){c[0].appendChild(d)}};return{customer:null,v:null,googleMapsV3ApiKey:null,ckEditorConfigFileUrl:null,mapCentre:null,mapZoom:1,CONTEXT_URL:a,allowedReportFormats:null,loadJS:function(d,e){var c=document.createElement("SCRIPT");c.type="text/javascript";c.src=d;b(c,e)},loadCSS:function(d,e){var c=document.createElement("LINK");c.type="text/css";c.rel="stylesheet";c.href=d;b(c,e)},geoLocate:function(c){if(navigator.geolocation){$(function(){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",msgs:[{summary:"GeoLocating",detail:"Please wait...",severity:"info"}]})});navigator.geolocation.getCurrentPosition(function(d){$(function(){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",msgs:[{summary:"GeoLocating",detail:"Done",severity:"info"}]})});c("POINT ("+d.coords.longitude+" "+d.coords.latitude+")")},function(d){$(function(){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",msgs:[{summary:"GeoLocating",detail:d.message,severity:"warn"}]})})},{enableHighAccuracy:true})}},setTouchCookie:function(){var d=false;if("maxTouchPoints" in navigator){d=navigator.maxTouchPoints>0}else{if("msMaxTouchPoints" in navigator){d=navigator.msMaxTouchPoints>0}else{var c=window.matchMedia&&matchMedia("(pointer:coarse)");if(c&&c.media==="(pointer:coarse)"){d=!!c.matches}else{if("orientation" in window){d=true}}}}if(d){document.cookie="touch=1; path=/"}else{document.cookie="touch=0; path=/"}}}}();SKYVE.GMap=function(){var b=null;var a=function(d){var c=null;if(d=="point"){c=[google.maps.drawing.OverlayType.MARKER]}else{if(d=="line"){c=[google.maps.drawing.OverlayType.POLYLINE]}else{if(d=="polygon"){c=[google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}else{if(d=="pointAndLine"){c=[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYLINE]}else{if(d=="pointAndPolygon"){c=[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}else{if(d=="lineAndPolygon"){c=[google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}else{c=[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}}}}}}return c};return{scatter:function(u,D,r,B){if(!b){b=new Wkt.Wkt()}var n=D.items;if(!n){return}if(B){for(var h in u._objects){var k=false;for(var w=0,s=n.length;w<s;w++){if(n[w].bizId===h){k=true;break}}if(!k){var A=u._objects[h];for(var w=0,s=A.overlays.length;w<s;w++){A.overlays[w].setMap(null);A.overlays[w]=null}delete A.overlays;delete u._objects[h]}}}else{for(var h in u._objects){var A=u._objects[h];for(var w=0,s=A.overlays.length;w<s;w++){A.overlays[w].setMap(null);A.overlays[w]=null}delete A.overlays;delete u._objects[h]}}for(var w=0,s=n.length;w<s;w++){var z=n[w];var E=u._objects[z.bizId];if(E){var t=(E.overlays.length==z.features.length);if(t){for(var v=0,q=E.overlays.length;v<q;v++){if(E.overlays[v].geometry!==z.features[v].geometry){t=false;break}}}if(!t){for(var v=0,q=E.overlays.length;v<q;v++){E.overlays[v].setMap(null);E.overlays[v]=null}delete E.overlays;delete u._objects[h];E=null}}if(!E){E={overlays:[]};for(var v=0,q=z.features.length;v<q;v++){var f=z.features[v];try{b.read(f.geometry)}catch(y){alert(f.geometry+" is invalid WKT.");continue}var d={editable:f.editable};if(f.strokeColour){d.strokeColor=f.strokeColour}if(f.fillColour){d.fillColor=f.fillColour}if(f.fillOpacity){d.fillOpacity=f.fillOpacity}if(f.iconRelativeFilePath){d.icon={url:SKYVE.Util.CONTEXT_URL+"resources?_n="+f.iconRelativeFilePath+"&_doc="+D._doc};if(f.iconAnchorX&&f.iconAnchorY){d.icon.anchor=new google.maps.Point(f.iconAnchorX,f.iconAnchorY);d.icon.origin=new google.maps.Point(0,0)}}var x=b.toObject(d);E.overlays.push(x);x.setMap(u.webmap);if(f.zoomable){x.bizId=z.bizId;x.geometry=f.geometry;x.fromTimestamp=z.fromTimestamp;x.toTimestamp=z.toTimestamp;x.mod=z.moduleName;x.doc=z.documentName;x.infoMarkup=z.infoMarkup;google.maps.event.addListener(x,"click",function(e){u.click(this,e)})}}u._objects[z.bizId]=E}}if(r){var g=new google.maps.LatLngBounds();var c=false;for(var p in u._objects){c=true;var E=u._objects[p];var C=E.overlays;for(var w=0,s=C.length;w<s;w++){var x=C[w];if(x.getPath){var o=x.getPath();for(var v=0,q=o.getLength();v<q;v++){g.extend(o.getAt(v))}}else{if(x.getPosition){g.extend(x.getPosition())}}}}if(c){if(g.getNorthEast().equals(g.getSouthWest())){if(u.webmap.getZoom()<15){u.webmap.setZoom(15)}if(x.getPosition!==undefined&&typeof x.getPosition==="function"){u.webmap.setCenter(g.getNorthEast())}}else{u.webmap.fitBounds(g)}}}},centre:function(){if(!b){b=new Wkt.Wkt()}var c=null;if(SKYVE.Util.mapCentre){try{b.read(SKYVE.Util.mapCentre);var f=b.components[0];c=new google.maps.LatLng(f.y,f.x)}catch(d){console.log(SKYVE.Util.mapCentre+" is malformed WKT Point format");SKYVE.Util.mapCentre=null;c=new google.maps.LatLng(0,0)}}else{c=new google.maps.LatLng(0,0)}return c},scatterValue:function(m,g){if(!b){b=new Wkt.Wkt()}if(!g){return}try{b.read(g)}catch(k){if(k.name==="WKTError"){alert("The WKT string is invalid.");return}}var j=b.toObject(m.webmap.defaults);if(b.type==="polygon"||b.type==="linestring"){}else{if(j.setEditable){j.setEditable(false)}}if(Wkt.isArray(j)){for(d in j){if(j.hasOwnProperty(d)&&(!Wkt.isArray(j[d]))){j[d].setMap(m.webmap);m._overlays.push(j[d])}}}else{j.setMap(m.webmap);m._overlays.push(j)}if(j.getBounds!==undefined&&typeof j.getBounds==="function"){m.webmap.fitBounds(j.getBounds())}else{if(j.getPath!==undefined&&typeof j.getPath==="function"){var f=new google.maps.LatLngBounds();var h=j.getPath();for(var d=0,c=h.getLength();d<c;d++){f.extend(h.getAt(d))}m.webmap.fitBounds(f)}else{if(m.webmap.getZoom()<15){m.webmap.setZoom(15)}if(j.getPosition!==undefined&&typeof j.getPosition==="function"){m.webmap.setCenter(j.getPosition())}}}},clear:function(e){for(var d=0,c=e._overlays.length;d<c;d++){e._overlays[d].setMap(null)}e._overlays.length=0},drawingTools:function(c){if(!b){b=new Wkt.Wkt()}c.webmap.drawingManager=new google.maps.drawing.DrawingManager({drawingControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM,drawingModes:a(c.drawingTools)}});c.webmap.drawingManager.setMap(c.webmap);google.maps.event.addListener(c.webmap.drawingManager,"overlaycomplete",function(e){SKYVE.GMap.clear(c);this.setDrawingMode(null);c._overlays.push(e.overlay);b.fromObject(e.overlay);var d=b.write();c.setFieldValue(d)})},geoLocator:function(d){if(navigator.geolocation){var c=document.createElement("DIV");c.style.backgroundColor="#fff";c.style.border="2px solid #fff";c.style.borderRadius="3px";c.style.boxShadow="0 2px 6px rgba(0,0,0,.3)";c.style.cursor="pointer";c.style.margin="10px";c.style.padding="5px";c.style.textAlign="center";c.title="Click to set your current position from your GPS";c.innerHTML='<i class="fa-solid fa-location-crosshairs"></i>';c.index=1;c.addEventListener("click",function(){navigator.geolocation.getCurrentPosition(function(e){SKYVE.GMap.clear(d);d.webmap.setDrawingMode(null);var e={lat:e.coords.latitude,lng:e.coords.longitude};var f=new google.maps.Marker({position:e,map:d.webmap});d._overlays.push(f);d.setFieldValue("POINT ("+e.coords.longitude+" "+e.coords.latitude+")");d.webmap.setZoom(15);d.webmap.setCenter(e)},function(e){alert(e.message)},{enableHighAccuracy:true})});d.webmap.geolocator=c;d.webmap.controls[google.maps.ControlPosition.LEFT].push(c)}},setDisabled:function(d,c){if(d.webmap){if(d.webmap.drawingManager){d.webmap.drawingManager.setOptions({drawingControl:(!c)})}if(d.webmap.geolocator){d.webmap.geolocator.style.display=c?"none":"block"}}},refreshControls:function(d){var c=document.createElement("DIV");c.style.backgroundColor="#fff";c.style.border="2px solid #fff";c.style.borderRadius="3px";c.style.boxShadow="0 2px 6px rgba(0,0,0,.3)";c.style.cursor="pointer";c.style.margin="10px";c.style.padding="5px";c.style.textAlign="center";c.title="Click to set the refresh rate of the map";c.innerHTML='<input type="number" min="0" max="500" step="1" value="'+d.refreshTime+'" size="3" /><input type="checkbox"'+(d._refreshRequired?" checked":"")+"><label>Refresh</label>";c.index=1;c.children[0].addEventListener("change",function(){d.refreshTime=this.value;if(d._refreshRequired){if(d._intervalId){clearInterval(d._intervalId)}d._intervalId=setInterval(d.rerender.bind(d),d.refreshTime*1000)}});c.children[1].addEventListener("click",function(){d._refreshRequired=this.checked;if(d._intervalId){clearInterval(d._intervalId);d._intervalId=null}if(d._refreshRequired){d.rerender();d._intervalId=setInterval(d.rerender.bind(d),d.refreshTime*1000)}});d.webmap.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(c)}}}();SKYVE.Leaflet=function(){var d=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/;var a=new RegExp("^"+d.source+"(\\s"+d.source+"){1,}");function b(l){var o=l.split(";");var w=o.pop();var t=(o.shift()||"").split("=").pop();var s=0;function h(x){var i=w.substring(s).match(x);if(!i){return null}else{s+=i[0].length;return i[0]}}function g(i){if(i&&t.match(/\d+/)){i.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+t}}}return i}function j(){h(/^\s*/)}function n(){j();var A=0;var y=[];var i=[y];var z=y;var x;while(x=h(/^(\()/)||h(/^(\))/)||h(/^(,)/)||h(a)){if(x==="("){i.push(z);z=[];i[i.length-1].push(z);A++}else{if(x===")"){if(z.length===0){return null}z=i.pop();if(!z){return null}A--;if(A===0){break}}else{if(x===","){z=[];i[i.length-1].push(z)}else{if(!x.split(/\s/g).some(isNaN)){Array.prototype.push.apply(z,x.split(/\s/g).map(parseFloat))}else{return null}}}}j()}if(A!==0){return null}return y}function r(){var x=[];var i;var y;while(y=h(a)||h(/^(,)/)){if(y===","){x.push(i);i=[]}else{if(!y.split(/\s/g).some(isNaN)){if(!i){i=[]}Array.prototype.push.apply(i,y.split(/\s/g).map(parseFloat))}}j()}if(i){x.push(i)}else{return null}return x.length?x:null}function q(){if(!h(/^(point(\sz)?)/i)){return null}j();if(!h(/^(\()/)){return null}var i=r();if(!i){return null}j();if(!h(/^(\))/)){return null}return{type:"Point",coordinates:i[0]}}function u(){if(!h(/^(multipoint)/i)){return null}j();var x=w.substring(w.indexOf("(")+1,w.length-1).replace(/\(/g,"").replace(/\)/g,"");w="MULTIPOINT ("+x+")";var i=n();if(!i){return null}j();return{type:"MultiPoint",coordinates:i}}function k(){if(!h(/^(multilinestring)/i)){return null}j();var i=n();if(!i){return null}j();return{type:"MultiLineString",coordinates:i}}function f(){if(!h(/^(linestring(\sz)?)/i)){return null}j();if(!h(/^(\()/)){return null}var i=r();if(!i){return null}if(!h(/^(\))/)){return null}return{type:"LineString",coordinates:i}}function m(){if(!h(/^(polygon(\sz)?)/i)){return null}j();var i=n();if(!i){return null}return{type:"Polygon",coordinates:i}}function v(){if(!h(/^(multipolygon)/i)){return null}j();var i=n();if(!i){return null}return{type:"MultiPolygon",coordinates:i}}function e(){var i=[];var x;if(!h(/^(geometrycollection)/i)){return null}j();if(!h(/^(\()/)){return null}while(x=p()){i.push(x);j();h(/^(,)/);j()}if(!h(/^(\))/)){return null}return{type:"GeometryCollection",geometries:i}}function p(){return q()||f()||m()||u()||k()||v()||e()}return g(p())}function c(e){if(e.type==="Feature"){e=e.geometry}function h(k){return k.join(" ")}function f(k){return k.map(h).join(", ")}function g(k){return k.map(f).map(i).join(", ")}function j(k){return k.map(g).map(i).join(", ")}function i(k){return"("+k+")"}switch(e.type){case"Point":return"POINT ("+h(e.coordinates)+")";case"LineString":return"LINESTRING ("+f(e.coordinates)+")";case"Polygon":return"POLYGON ("+g(e.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+f(e.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+j(e.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+g(e.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+e.geometries.map(c).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}return{scatter:function(u,D,r,B){var o=D.items;if(!o){return}if(B){for(var h in u._objects){var n=false;for(var w=0,s=o.length;w<s;w++){if(o[w].bizId===h){n=true;break}}if(!n){var A=u._objects[h];for(var w=0,s=A.overlays.length;w<s;w++){u.webmap.removeLayer(A.overlays[w]);A.overlays[w]=null}delete A.overlays;delete u._objects[h]}}}else{for(var h in u._objects){var A=u._objects[h];for(var w=0,s=A.overlays.length;w<s;w++){u.webmap.removeLayer(A.overlays[w]);A.overlays[w]=null}delete A.overlays;delete u._objects[h]}}for(var w=0,s=o.length;w<s;w++){var z=o[w];var E=u._objects[z.bizId];if(E){var t=(E.overlays.length==z.features.length);if(t){for(var v=0,q=E.overlays.length;v<q;v++){if(E.overlays[v].getLayers()[0].zoomData.geometry!==z.features[v].geometry){t=false;break}}}if(!t){for(var v=0,q=E.overlays.length;v<q;v++){u.webmap.removeLayer(E.overlays[v]);E.overlays[v]=null}delete E.overlays;delete u._objects[h];E=null}}if(!E){E={overlays:[]};for(var v=0,q=z.features.length;v<q;v++){var k=z.features[v];var f=b(k.geometry);f.properties={editable:k.editable};if(k.strokeColour){f.properties.color=k.strokeColour}if(k.fillColour){f.properties.fillColor=k.fillColour}if(k.fillOpacity){f.properties.fillOpacity=k.fillOpacity}if(k.iconRelativeFilePath){var y={iconUrl:"resources?_n="+k.iconRelativeFilePath+"&_doc="+D._doc};if(k.iconAnchorX&&k.iconAnchorY){y.iconAnchor=[k.iconAnchorX,k.iconAnchorY]}f.properties.icon=y}var x=L.geoJson(f,{pointToLayer:function(i,l){var j=i.properties;delete i.properties;if(j.icon){j.icon=L.icon(j.icon)}return L.marker(l,j)},style:function(j){var i=j.geometry.properties;delete j.geometry.properties;return i},onEachFeature:function(j,i){if(k.zoomable){i.zoomData={bizId:z.bizId,geometry:k.geometry,fromTimestamp:z.fromTimestamp,toTimestamp:z.toTimestamp,mod:z.moduleName,doc:z.documentName,infoMarkup:z.infoMarkup};i.bindPopup(function(l){return u.click(l)})}}});E.overlays.push(x);u.webmap.addLayer(x)}u._objects[z.bizId]=E}}if(r){var g=L.latLngBounds();var e=false;for(var p in u._objects){e=true;var E=u._objects[p];var C=E.overlays;for(var w=0,s=C.length;w<s;w++){var x=C[w];g.extend(x.getBounds())}}if(e){u.webmap.fitBounds(g,{maxZoom:15})}}},centre:function(){var f=null;if(SKYVE.Util.mapCentre){try{var g=b(SKYVE.Util.mapCentre);f=[g.coordinates[1],g.coordinates[0]]}catch(h){console.log(SKYVE.Util.mapCentre+" is malformed WKT Point format");SKYVE.Util.mapCentre=null;f=[0,0]}}else{f=[0,0]}return f},scatterValue:function(i,f){if(!f){return}var h=null;try{h=L.geoJson(b(f))}catch(g){console.log("The WKT string "+f+" is invalid.");return}h.addTo(i.webmap);i._overlays.push(h);i.webmap.fitBounds(h.getBounds(),{maxZoom:15})},clear:function(g){for(var f=0,e=g._overlays.length;f<e;f++){g.webmap.removeLayer(g._overlays[f])}g._overlays.length=0},drawingTools:function(f){var e=f.drawingTools;L.EditControl=L.Control.extend({options:{position:"topright"},onAdd:function(i){var g=L.DomUtil.create("div","leaflet-control leaflet-bar");var h=null;if((!e)||(e=="point")||(e=="pointAndLine")||(e=="pointAndPolygon")){h=L.DomUtil.create("a","",g);h.href="#";h.title="Create a new marker";h.innerHTML='<i class="fa-solid fa-location-dot"></i>';L.DomEvent.on(h,"click",L.DomEvent.stop).on(h,"click",function(){window.LAYER=f.webmap.editTools.startMarker.call(i.editTools)},this)}if((!e)||(e=="line")||(e=="pointAndLine")||(e=="lineAndPolygon")){h=L.DomUtil.create("a","",g);h.href="#";h.title="Create a new line";h.innerHTML='<i class="fa-solid fa-diagram-project"></i>';L.DomEvent.on(h,"click",L.DomEvent.stop).on(h,"click",function(){window.LAYER=f.webmap.editTools.startPolyline.call(i.editTools)},this)}if((!e)||(e=="polygon")||(e=="pointAndPolygon")||(e=="lineAndPolygon")){h=L.DomUtil.create("a","",g);h.href="#";h.title="Create a new rectangle";h.innerHTML='<i class="fa-solid fa-vector-square"></i>';L.DomEvent.on(h,"click",L.DomEvent.stop).on(h,"click",function(){window.LAYER=f.webmap.editTools.startRectangle.call(i.editTools)},this);h=L.DomUtil.create("a","",g);h.href="#";h.title="Create a new polygon";h.innerHTML='<i class="fa-solid fa-draw-polygon"></i>';L.DomEvent.on(h,"click",L.DomEvent.stop).on(h,"click",function(){window.LAYER=f.webmap.editTools.startPolygon.call(i.editTools)},this)}return g}});f.webmap.editControl=new L.EditControl();f.webmap.addControl(f.webmap.editControl);f.webmap.on("editable:drawing:commit",function(g){SKYVE.Leaflet.clear(f);g.layer.toggleEdit();f._overlays.push(g.layer);f.setFieldValue(c(g.layer.toGeoJSON(12)))})},geoLocator:function(e){if(navigator.geolocation){L.GeoControl=L.Control.extend({options:{position:"bottomleft"},onAdd:function(h){var f=L.DomUtil.create("div","leaflet-control leaflet-bar");var g=L.DomUtil.create("a","",f);g.href="#";g.title="Click to set your current position from your GPS";g.innerHTML='<i class="fa-solid fa-location-crosshairs"></i>';L.DomEvent.on(g,"click",L.DomEvent.stop).on(g,"click",function(){if(e.webmap.editTools.drawing()){e.webmap.editTools.commitDrawing()}navigator.geolocation.getCurrentPosition(function(i){SKYVE.Leaflet.clear(e);var k=[i.coords.latitude,i.coords.longitude];var j=L.marker(k);j.addTo(e.webmap);e._overlays.push(j);e.setFieldValue("POINT ("+i.coords.longitude+" "+i.coords.latitude+")");e.webmap.setZoom(15);e.webmap.panTo(k)},function(i){alert(i.message)},{enableHighAccuracy:true})},this);return f}});e.webmap.geoControl=new L.GeoControl();e.webmap.addControl(e.webmap.geoControl)}},setDisabled:function(f,e){if(f.webmap){if(f.webmap.editControl){f.webmap.editControl.getContainer().style.display=e?"none":"block"}if(f.webmap.geoControl){f.webmap.geoControl.getContainer().style.display=e?"none":"block"}}},refreshControls:function(e){L.GeoControl=L.Control.extend({options:{position:"bottomleft"},onAdd:function(g){var f=L.DomUtil.create("div","leaflet-control");f.innerHTML='<input type="number" min="0" max="500" step="1" value="'+e.refreshTime+'" size="3" /><input type="checkbox"'+(e._refreshRequired?" checked":"")+"><label>Refresh</label>";f.children[0].addEventListener("change",function(){e.refreshTime=this.value;if(e._refreshRequired){if(e._intervalId){clearInterval(e._intervalId)}e._intervalId=setInterval(e.rerender.bind(e),e.refreshTime*1000)}});f.children[1].addEventListener("click",function(){e._refreshRequired=this.checked;if(e._intervalId){clearInterval(e._intervalId);e._intervalId=null}if(e._refreshRequired){e.rerender();e._intervalId=setInterval(e.rerender.bind(e),e.refreshTime*1000)}});return f}});e.webmap.addControl(new L.GeoControl())}}}();isc.Offline.isOffline=function(){return false};isc.setAutoDraw(false);isc.RPCManager.fetchDataPrompt="Contacting Server...";isc.RPCManager.saveDataPrompt="Contacting Server...";isc.RPCManager.removeDataPrompt="Contacting Server...";isc.RPCManager.handleError=function(a,b){if(isc.isA.String(a.data)){isc.warn(a.data);return false}return this.Super("handleError",arguments)};isc.RPCManager.addClassMethods({loginRequired:function(b,a,c){window.location.assign(SKYVE.Util.CONTEXT_URL)}});Date.setShortDisplayFormat("toEuropeanShortDate");Date.setNormalDisplayFormat("toEuropeanShortDate");Date.setInputFormat("DMY");isc.ListGrid.addProperties({getFilterEditorType:function(d){if(d.filterEditorType!=null){return d.filterEditorType}var c=this.getDataSource();var a=d.type;var e=(a==this._$binary||a==this._$file||a==this._$imageFile);if(e&&d.editorType==null){if(d.filenameSuppressed||c&&c.getFilenameField&&c.getFilenameField(d.name)==null){return"StaticTextItem"}else{return"TextItem"}}var b=isc.addProperties({},d,{canEdit:d.canFilter!==false,length:null});if(b._constructor!=null){delete b._constructor}if(d.filterEditorType!=null){b.editorType=d.filterEditorType}isc.addProperties(b,d.filterEditorProperties);var a=isc.DynamicForm.getEditorType(b,this);return a}});isc.ResultSet.addMethods({skyveSetCriteria:isc.ResultSet.getPrototype().setCriteria,setCriteria:function(b){var a=this.skyveSetCriteria(b);if(b&&JSON.stringify(b).match(/"operator"\s*:\s*"geo/)){this.invalidateCache()}return a}});var resizeTimerEvent=null;isc.Page.setEvent("resize",function(){if(isc.WindowStack){if(resizeTimerEvent){isc.Timer.clearTimeout(resizeTimerEvent)}resizeTimerEvent=isc.Timer.setTimeout(isc.WindowStack.resize,50)}});isc.DataSource.addSearchOperator({ID:"geoEquals",title:"Equals",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:true,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"geoDisjoint",title:"Disjoint",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:true,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"geoIntersects",title:"Intersects",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:true,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"geoTouches",title:"Touches",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:true,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"geoCrosses",title:"Crosses",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:true,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"geoWithin",title:"Within",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:true,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"geoContains",title:"Contains",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:true,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"geoOverlaps",title:"Overlaps",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:true,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.defineClass("BizUtil");isc.BizUtil.addClassProperties({_modules:{},_unusedPickLists:[],COMPLETE_DATA_SOURCE:isc.RestDataSource.create({dataFormat:"json",jsonPrefix:"",jsonSuffix:"",dataURL:"smartcomplete",fields:[{name:"value",type:"text"}]})});isc.BizUtil.addClassMethods({_currentView:null,getCurrentView:function(){return isc.BizUtil._currentView},isNumeric:function(a){return(a=="integer")||(a=="float")||(a=="bizDecimal0")||(a=="bizDecimal1")||(a=="bizDecimal10")||(a=="bizDecimal2")||(a=="bizDecimal5")||(a=="bizDollarsAndCents")||(a=="bizIntegerPercentage")||(a=="bizIntegerSeparator")||(a=="bizTwoDecimalPlacesPercentage")||(a=="bizTimeDuration")},isTemporal:function(a){return(a=="date")||(a=="time")||(a=="datetime")||(a=="bizDate")||(a=="bizTime")||a.startsWith("DD_MM")||a.startsWith("MM_DD")||a.startsWith("MMM_DD")||a.startsWith("YYYY_MM")||a.startsWith("HH_MI")||a.startsWith("HH24_MI")},addFilterRequestParams:function(h,e,d){var a=d.gather(false);for(var f=0,c=e.length;f<c;f++){var b=e[f];var g=d.toDisplay(b.value,a);h[b.name]=g}},convertFilterCriteria:function(e){if(e){if(e.criteria){for(var c=0,a=e.criteria.length;c<a;c++){var d=e.criteria[c];isc.BizUtil.convertFilterCriteria(d)}}else{if(e.fieldName){var b=e.fieldName;if(b.startsWith("_display_")){e.fieldName=b.substring(9)}}else{for(var b in e){if(b.startsWith("_display_")){e[b.substring(9)]=e[b];delete e[b]}}}}}},completeFilterCriteria:function(f,d,e){var j=isc.addProperties({},f);if(j.operator){}else{j=isc.DataSource.convertCriteria(j,"substring")}j={_constructor:"AdvancedCriteria",operator:"and",criteria:[j]};var h=e.gather(false);for(var c=0,b=d.length;c<b;c++){var a=d[c];var g=e.toDisplay(a.value,h);j.criteria.add({fieldName:a.name,operator:a.operator,value:g})}return j},createImageButton:function(b,a,d,c){return isc.ToolStripButton.create({icon:b,iconAlign:"center",showDisabledIcon:a,showDownIcon:false,canHover:true,getHoverHTML:function(){return d},click:c})},createCodeMirror:function(b,c,a){SKYVE.Util.loadCSS("codemirror/codemirror.css?v="+SKYVE.Util.v,function(){SKYVE.Util.loadCSS("codemirror/base16-dark.css?v="+SKYVE.Util.v,function(){SKYVE.Util.loadJS("codemirror/codemirror.js?v="+SKYVE.Util.v,function(){SKYVE.Util.loadJS("codemirror/css/css.js?v="+SKYVE.Util.v,function(){SKYVE.Util.loadJS("codemirror/htmlmixed/htmlmixed.js?v="+SKYVE.Util.v,function(){SKYVE.Util.loadJS("codemirror/sql/sql.js?v="+SKYVE.Util.v,function(){SKYVE.Util.loadJS("codemirror/xml/xml.js?v="+SKYVE.Util.v,function(){var d=document.getElementsByName(c);var f=undefined;if(d&&d.length>0&&"textarea"===d[0].nodeName.toLowerCase()){f=d[0]}if(f){f.setAttribute("autocapitalize","off");f.setAttribute("spellcheck","false");var e=CodeMirror.fromTextArea(f,{mode:a,lineNumbers:true,theme:"base16-dark"});e.setSize(600,null);e.on("change",function(){e.save()})}})})})})})})})},createSplitButton:function(g,d,f,e,a,h,b,c){return isc.HLayout.create({align:"right",height:1,membersMargin:1,members:[isc.IButton.create({autoFit:true,title:g,icon:d,showDisabledIcon:f,canHover:true,getHoverHTML:function(){return e},click:a}),isc.MenuButton.create({title:null,width:26,alignMenuLeft:false,canHover:true,getHoverHTML:function(){return h},menu:isc.Menu.create({autoDraw:false,showShadow:true,shadowDepth:10,target:b,data:c})})]})},createUploadButton:function(b,a){return isc.BizUtil.createSplitButton("Upload",null,false,"Upload content",function(){var c=b.form._view.gather(false);var d=(a?"image":"content")+"Upload.xhtml?_n="+b.name.replaceAll("_",".")+"&_c="+c._c;if(b.form._view._b){d+="&_b="+b.form._view._b.replaceAll("_",".")}isc.WindowStack.popup(null,a?"Upload Image":"Upload Content",true,[isc.HTMLPane.create({contentsType:"page",contents:"Loading Page...",contentsURL:d})])},"Other Options",null,[{title:"Clear",icon:"icons/delete.png",click:function(c){b.setValue(null)}}])},getEditView:function(moduleName,documentName,onViewCreated){if(isc.BizUtil._modules[moduleName]){}else{isc.BizUtil._modules[moduleName]={};window[moduleName]={}}var view=null;var documentEntry=isc.BizUtil._modules[moduleName][documentName];if(documentEntry){view=documentEntry._unused.pop();if(view){}else{view=eval(moduleName+".create"+documentName+"()");view._moduleName=moduleName;view._documentName=documentName}isc.BizUtil._modules[moduleName][documentName]._used.push(view);onViewCreated(view)}else{isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,httpMethod:"GET",actionURL:SKYVE.Util.CONTEXT_URL+"smartgen?_mod="+moduleName+"&_doc="+documentName,callback:function(rpcResponse,data,rpcRequest){isc.BizUtil._modules[moduleName][documentName]={};isc.BizUtil._modules[moduleName][documentName]._used=[];isc.BizUtil._modules[moduleName][documentName]._unused=[];isc.BizUtil.getEditView(moduleName,documentName,onViewCreated)}})}},relinquishEditView:function(b){var a=isc.BizUtil._modules[b._moduleName][b._documentName];a._used.remove(b);a._unused.push(b)},getPickList:function(d,c,b){var a=isc.BizUtil._unusedPickLists.pop();if(a){}else{a=isc.BizListGrid.create({isPickList:true})}a.setLookup(d,c,b);return a},relinquishPickList:function(a){a.destroy()},createListGrid:function(){return isc.BizListGrid.create({margin:2})},createCalendar:function(){return isc.Calendar.create({width:"100%",height:"100%",scrollToWorkDay:true,data:[]})},createTreeGrid:function(){return isc.BizListGrid.create({margin:2,isTree:true})},createMap:function(){return isc.BizMap.create()},popupFrame:function(c,b,d,a){var e=window.open(c,b,"width="+d+",height="+a+",resizable=yes,scrollbars=no,toolbar=no,location=no,directories=no,status=yes,menubar=no,copyhistory=no");e.focus()},growl:function(b,a,c){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",life:(a?a:6000),sticky:(c?c:false),msgs:b})},onPushMessage:function(f){var a=[];var d=[];var g=false;for(var e=0,c=f.length;e<c;e++){var b=f[e];if(b.type=="g"){a.add({severity:b.severity,summary:b.message})}else{if(b.type=="m"){if(b.severity!="info"){g=true}d.add(b.message)}else{if(b.type=="r"){var h=isc.BizUtil.getCurrentView();if(h&&h.rerender){h.rerender()}}else{if(b.type=="j"){window[b.method](b.argument)}}}}}if(a.length>0){isc.BizUtil.growl(a)}if(d.length>0){var n=(d.length>1);var j=n?"<ul>":"";for(var e=0,c=d.length;e<c;e++){var k=d[e];if(n){j+="<li>"}j+=k;if(n){j+="</li>"}}if(n){j+="</ul>"}if(g){isc.warn(j)}else{isc.say(j)}}}});isc.addMethods(Date.prototype,{toHH24_MI:function(){return this.getHours().stringify()+":"+this.getMinutes().stringify()},toHH_MI:function(){var a=this.getHours();var b=a.stringify();var c=" AM";if(a==0){b="12"}else{if(a==12){c=" PM"}else{if(a>12){c=" PM";a-=12;b=a.stringify()}}}return b+":"+this.getMinutes().stringify()+c},toHH24_MI_SS:function(){return this.toHH24_MI()+":"+this.getSeconds().stringify()},toHH_MI_SS:function(){var a=this.toHH_MI();return a.substring(0,a.length-3)+":"+this.getSeconds().stringify()+a.substring(a.length-3)},toDD_MM_YYYY:function(){return this.getDate().stringify()+"/"+(this.getMonth()+1).stringify()+"/"+this.getFullYear().stringify()},toDD_MM_YYYY_HH24_MI:function(){return this.toDD_MM_YYYY()+" "+this.toHH24_MI()},toDD_MM_YYYY_HH_MI:function(){return this.toDD_MM_YYYY()+" "+this.toHH_MI()},toDD_MM_YYYY_HH24_MI_SS:function(){return this.toDD_MM_YYYY()+" "+this.toHH24_MI_SS()},toDD_MM_YYYY_HH_MI_SS:function(){return this.toDD_MM_YYYY()+" "+this.toHH_MI_SS()},toDD_MMM_YYYY:function(){var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return this.getDate().stringify()+"-"+a[this.getMonth()]+"-"+this.getFullYear().stringify()},toDD_MMM_YYYY_HH24_MI:function(){return this.toDD_MMM_YYYY()+" "+this.toHH24_MI()},toDD_MMM_YYYY_HH_MI:function(){return this.toDD_MMM_YYYY()+" "+this.toHH_MI()},toDD_MMM_YYYY_HH24_MI_SS:function(){return this.toDD_MMM_YYYY()+" "+this.toHH24_MI_SS()},toDD_MMM_YYYY_HH_MI_SS:function(){return this.toDD_MMM_YYYY()+" "+this.toHH_MI_SS()},toMM_DD_YYYY:function(){return(this.getMonth()+1).stringify()+"/"+this.getDate().stringify()+"/"+this.getFullYear().stringify()},toMM_DD_YYYY_HH24_MI:function(){return this.toMM_DD_YYYY()+" "+this.toHH24_MI()},toMM_DD_YYYY_HH_MI:function(){return this.toMM_DD_YYYY()+" "+this.toHH_MI()},toMM_DD_YYYY_HH24_MI_SS:function(){return this.toMM_DD_YYYY()+" "+this.toHH24_MI_SS()},toMM_DD_YYYY_HH_MI_SS:function(){return this.toMM_DD_YYYY()+" "+this.toHH_MI_SS()},toMMM_DD_YYYY:function(){var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return a[this.getMonth()]+"-"+this.getDate().stringify()+"-"+this.getFullYear().stringify()},toMMM_DD_YYYY_HH24_MI:function(){return this.toMMM_DD_YYYY()+" "+this.toHH24_MI()},toMMM_DD_YYYY_HH_MI:function(){return this.toMMM_DD_YYYY()+" "+this.toHH_MI()},toMMM_DD_YYYY_HH24_MI_SS:function(){return this.toMMM_DD_YYYY()+" "+this.toHH24_MI_SS()},toMMM_DD_YYYY_HH_MI_SS:function(){return this.toMMM_DD_YYYY()+" "+this.toHH_MI_SS()},toYYYY_MM_DD:function(){return this.getFullYear().stringify()+"/"+(this.getMonth()+1).stringify()+"/"+this.getDate().stringify()},toYYYY_MM_DD_HH24_MI:function(){return this.toYYYY_MM_DD()+" "+this.toHH24_MI()},toYYYY_MM_DD_HH_MI:function(){return this.toYYYY_MM_DD()+" "+this.toHH_MI()},toYYYY_MM_DD_HH24_MI_SS:function(){return this.toYYYY_MM_DD()+" "+this.toHH24_MI_SS()},toYYYY_MM_DD_HH_MI_SS:function(){return this.toYYYY_MM_DD()+" "+this.toHH_MI_SS()}});isc.ClassFactory.defineClass("BizDateItem","DateItem");isc.BizDateItem.addClassMethods({_replaceMonthWithOrdinal:function(b,c){var a=c.toLowerCase();if(a.startsWith("jan")){b=b.replaceAll(c,"1")}else{if(a.startsWith("feb")){b=b.replaceAll(c,"2")}else{if(a.startsWith("mar")){b=b.replaceAll(c,"3")}else{if(a.startsWith("apr")){b=b.replaceAll(c,"4")}else{if(a.startsWith("may")){b=b.replaceAll(c,"5")}else{if(a.startsWith("jun")){b=b.replaceAll(c,"6")}else{if(a.startsWith("jul")){b=b.replaceAll(c,"7")}else{if(a.startsWith("aug")){b=b.replaceAll(c,"8")}else{if(a.startsWith("sep")){b=b.replaceAll(c,"9")}else{if(a.startsWith("oct")){b=b.replaceAll(c,"10")}else{if(a.startsWith("nov")){b=b.replaceAll(c,"11")}else{if(a.startsWith("dec")){b=b.replaceAll(c,"12")}}}}}}}}}}}}return b},parseInput:function(d,c){if(isc.isA.Date(d)){return d}if(d){d=d.trim();if(c&&c.startsWith("toMMM")){var b=/^([A-Za-z]+)[^A-Za-z0-9]\d?\d.*$/.exec(d);if(b){d=this._replaceMonthWithOrdinal(d,b[1])}}else{var b=/^\d?\d[^A-Za-z0-9]([A-Za-z]+).*$/.exec(d);if(b){d=this._replaceMonthWithOrdinal(d,b[1])}}var a=/^\d{4}-\d\d-.*$/.test(d)?isc.DateUtil.parseSchemaDate(d):null;if(!a){if(c){if(c.startsWith("toMM")){a=isc.DateUtil.parseInput(d,"MDY",50,true)}else{if(c.startsWith("toYYYY")){a=isc.DateUtil.parseInput(d,"YMD",50,true)}else{a=isc.DateUtil.parseInput(d,"DMY",50,true)}}}else{a=isc.DateUtil.parseInput(d,"DMY",50,true)}if(!a){if(/^\d?\d[^A-Za-z0-9]\d?\d$/.test(d)){if(c){if(c.startsWith("toMM")){a=isc.DateUtil.parseInput(d+" "+Date.create().getFullYear().stringify(),"MDY",50,true)}else{if(c.startsWith("toYYYY")){a=isc.DateUtil.parseInput(Date.create().getFullYear().stringify()+" "+d,"YMD",50,true)}else{a=isc.DateUtil.parseInput(d+" "+Date.create().getFullYear().stringify(),"DMY",50,true)}}}else{a=isc.DateUtil.parseInput(d+" "+Date.create().getFullYear().stringify(),"DMY",50,true)}}}}return a}else{return null}},format:function(value,format){if(!isc.isA.Date(value)){return value}return eval("value."+format+"()")}});isc.BizDateItem.addProperties({enforceDate:true,changeOnBlur:true,changeOnKeypress:false,width:100,useTextField:true,showHint:true,showHintInField:true,hint:"DD MM(M) YY(YY)",textFieldProperties:{selectOnFocus:true},showPickerTimeItem:false,dateFormatter:"toDD_MM_YYYY",parseDate:function(a){return isc.BizDateItem.parseInput(a,this.dateFormatter)}});isc.BizDateItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Date(a)){a=isc.BizDateItem.parseInput(a,this.dateFormatter)}return isc.BizDateItem.format(a,this.dateFormatter)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizDateItem.parseInput(a,this.dateFormatter)}return a},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){if(isc.isA.String(a)){a=isc.BizDateItem.parseInput(a,this.dateFormatter)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizDate",inheritsFrom:"date",editorType:"BizDateItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MM_YYYY")}});isc.SimpleType.create({name:"DD_MM_YYYY",inheritsFrom:"bizDate"});isc.ClassFactory.defineClass("DD_MMM_YYYY_Item","BizDateItem");isc.DD_MMM_YYYY_Item.addProperties({dateFormatter:"toDD_MMM_YYYY"});isc.SimpleType.create({name:"DD_MMM_YYYY",inheritsFrom:"bizDate",editorType:"DD_MMM_YYYY_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MMM_YYYY")}});isc.ClassFactory.defineClass("MM_DD_YYYY_Item","BizDateItem");isc.MM_DD_YYYY_Item.addProperties({hint:"MM(M) DD YY(YY)",dateFormatter:"toMM_DD_YYYY"});isc.SimpleType.create({name:"MM_DD_YYYY",inheritsFrom:"bizDate",editorType:"MM_DD_YYYY_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toMM_DD_YYYY")}});isc.ClassFactory.defineClass("MMM_DD_YYYY_Item","BizDateItem");isc.MMM_DD_YYYY_Item.addProperties({hint:"MM(M) DD YY(YY)",dateFormatter:"toMMM_DD_YYYY"});isc.SimpleType.create({name:"MMM_DD_YYYY",inheritsFrom:"bizDate",editorType:"MMM_DD_YYYY_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toMMM_DD_YYYY")}});isc.ClassFactory.defineClass("YYYY_MM_DD_Item","BizDateItem");isc.YYYY_MM_DD_Item.addProperties({hint:"YY(YY) MM(M) DD",dateFormatter:"toYYYY_MM_DD"});isc.SimpleType.create({name:"YYYY_MM_DD",inheritsFrom:"bizDate",editorType:"YYYY_MM_DD_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toYYYY_MM_DD")}});isc.ClassFactory.defineClass("BizDateTimeItem","DateTimeItem");isc.BizDateTimeItem.addProperties({enforceDate:true,changeOnBlur:true,changeOnKeypress:false,width:200,useTextField:true,showHint:true,showHintInField:true,hint:"DD MM(M) YY(YY) HH:MI AM/PM",textFieldProperties:{selectOnFocus:true},showPickerTimeItem:true,pickerTimeItemProperties:{showSecondItem:false,use24HourTime:false},parseDate:function(a){return isc.BizDateItem.parseInput(a,this.dateFormatter)},dateFormatter:"toDD_MM_YYYY_HH_MI"});isc.BizDateTimeItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Date(a)){a=isc.BizDateItem.parseInput(a,this.dateFormatter)}return isc.BizDateItem.format(a,this.dateFormatter)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizDateItem.parseInput(a,this.dateFormatter)}return a},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){if(isc.isA.String(a)){a=isc.BizDateItem.parseInput(a,this.dateFormatter)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizDateTime",inheritsFrom:"dateTime",editorType:"BizDateTimeItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MM_YYYY_HH_MI")}});isc.SimpleType.create({name:"DD_MM_YYYY_HH_MI",inheritsFrom:"bizDateTime"});isc.ClassFactory.defineClass("DD_MM_YYYY_HH24_MI_Item","BizDateTimeItem");isc.DD_MM_YYYY_HH24_MI_Item.addProperties({dateFormatter:"toDD_MM_YYYY_HH24_MI",hint:"DD MM(M) YY(YY) HH(24):MI",pickerTimeItemProperties:{showSecondItem:false,use24HourTime:true}});isc.SimpleType.create({name:"DD_MM_YYYY_HH24_MI",inheritsFrom:"bizDateTime",editorType:"DD_MM_YYYY_HH24_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MM_YYYY_HH24_MI")}});isc.ClassFactory.defineClass("DD_MM_YYYY_HH_MI_SS_Item","BizDateTimeItem");isc.DD_MM_YYYY_HH_MI_SS_Item.addProperties({dateFormatter:"toDD_MM_YYYY_HH_MI_SS",hint:"DD MM(M) YY(YY) HH:MI(:SS) AM/PM",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:false}});isc.SimpleType.create({name:"DD_MM_YYYY_HH_MI_SS",inheritsFrom:"bizDateTime",editorType:"DD_MM_YYYY_HH_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MM_YYYY_HH_MI_SS")}});isc.ClassFactory.defineClass("DD_MM_YYYY_HH24_MI_SS_Item","BizDateTimeItem");isc.DD_MM_YYYY_HH24_MI_SS_Item.addProperties({dateFormatter:"toDD_MM_YYYY_HH24_MI_SS",hint:"DD MM(M) YY(YY) HH(24):MI(:SS)",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:true}});isc.SimpleType.create({name:"DD_MM_YYYY_HH24_MI_SS",inheritsFrom:"bizDateTime",editorType:"DD_MM_YYYY_HH24_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MM_YYYY_HH24_MI_SS")}});isc.ClassFactory.defineClass("DD_MMM_YYYY_HH_MI_Item","BizDateTimeItem");isc.DD_MMM_YYYY_HH_MI_Item.addProperties({dateFormatter:"toDD_MMM_YYYY_HH_MI",hint:"DD MM(M) YY(YY) HH:MI AM/PM",pickerTimeItemProperties:{showSecondItem:false,use24HourTime:false}});isc.SimpleType.create({name:"DD_MMM_YYYY_HH_MI",inheritsFrom:"bizDateTime",editorType:"DD_MMM_YYYY_HH_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MMM_YYYY_HH_MI")}});isc.ClassFactory.defineClass("DD_MMM_YYYY_HH24_MI_Item","BizDateTimeItem");isc.DD_MMM_YYYY_HH24_MI_Item.addProperties({dateFormatter:"toDD_MMM_YYYY_HH24_MI",hint:"DD MM(M) YY(YY) HH(24):MI",pickerTimeItemProperties:{showSecondItem:false,use24HourTime:true}});isc.SimpleType.create({name:"DD_MMM_YYYY_HH24_MI",inheritsFrom:"bizDateTime",editorType:"DD_MMM_YYYY_HH24_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MMM_YYYY_HH24_MI")}});isc.ClassFactory.defineClass("DD_MMM_YYYY_HH_MI_SS_Item","BizDateTimeItem");isc.DD_MMM_YYYY_HH_MI_SS_Item.addProperties({dateFormatter:"toDD_MMM_YYYY_HH_MI_SS",hint:"DD MM(M) YY(YY) HH:MI(:SS) AM/PM",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:false}});isc.SimpleType.create({name:"DD_MMM_YYYY_HH_MI_SS",inheritsFrom:"bizDateTime",editorType:"DD_MMM_YYYY_HH_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MMM_YYYY_HH_MI_SS")}});isc.ClassFactory.defineClass("DD_MMM_YYYY_HH24_MI_SS_Item","BizDateTimeItem");isc.DD_MMM_YYYY_HH24_MI_SS_Item.addProperties({dateFormatter:"toDD_MMM_YYYY_HH24_MI_SS",hint:"DD MM(M) YY(YY) HH(24):MI(:SS)",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:true}});isc.SimpleType.create({name:"DD_MMM_YYYY_HH24_MI_SS",inheritsFrom:"bizDateTime",editorType:"DD_MMM_YYYY_HH24_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MMM_YYYY_HH24_MI_SS")}});isc.ClassFactory.defineClass("MM_DD_YYYY_HH_MI_Item","BizDateTimeItem");isc.MM_DD_YYYY_HH_MI_Item.addProperties({dateFormatter:"toMM_DD_YYYY_HH_MI",hint:"MM(M) DD YY(YY) HH:MI AM/PM",pickerTimeItemProperties:{showSecondItem:false,use24HourTime:false}});isc.SimpleType.create({name:"MM_DD_YYYY_HH_MI",inheritsFrom:"bizDateTime",editorType:"MM_DD_YYYY_HH_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toMM_DD_YYYY_HH_MI")}});isc.ClassFactory.defineClass("MM_DD_YYYY_HH24_MI_Item","BizDateTimeItem");isc.MM_DD_YYYY_HH24_MI_Item.addProperties({dateFormatter:"toMM_DD_YYYY_HH24_MI",hint:"MM(M) DD YY(YY) HH(24):MI",pickerTimeItemProperties:{showSecondItem:false,use24HourTime:true}});isc.SimpleType.create({name:"MM_DD_YYYY_HH24_MI",inheritsFrom:"bizDateTime",editorType:"MM_DD_YYYY_HH24_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toMM_DD_YYYY_HH24_MI")}});isc.ClassFactory.defineClass("MM_DD_YYYY_HH_MI_SS_Item","BizDateTimeItem");isc.MM_DD_YYYY_HH_MI_SS_Item.addProperties({dateFormatter:"toMM_DD_YYYY_HH_MI_SS",hint:"MM(M) DD YY(YY) HH:MI(:SS) AM/PM",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:false}});isc.SimpleType.create({name:"MM_DD_YYYY_HH_MI_SS",inheritsFrom:"bizDateTime",editorType:"MM_DD_YYYY_HH_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toMM_DD_YYYY_HH_MI_SS")}});isc.ClassFactory.defineClass("MM_DD_YYYY_HH24_MI_SS_Item","BizDateTimeItem");isc.MM_DD_YYYY_HH24_MI_SS_Item.addProperties({hint:"MM(M) DD YY(YY) HH(24):MI(:SS)",dateFormatter:"toMM_DD_YYYY_HH24_MI_SS",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:true}});isc.SimpleType.create({name:"MM_DD_YYYY_HH24_MI_SS",inheritsFrom:"bizDateTime",editorType:"MM_DD_YYYY_HH24_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toMM_DD_YYYY_HH24_MI_SS")}});isc.ClassFactory.defineClass("MMM_DD_YYYY_HH_MI_Item","BizDateTimeItem");isc.MMM_DD_YYYY_HH_MI_Item.addProperties({dateFormatter:"toMMM_DD_YYYY_HH_MI",hint:"MM(M) DD YY(YY) HH:MI AM/PM",pickerTimeItemProperties:{showSecondItem:false,use24HourTime:false}});isc.SimpleType.create({name:"MMM_DD_YYYY_HH_MI",inheritsFrom:"bizDateTime",editorType:"MMM_DD_YYYY_HH_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toMMM_DD_YYYY_HH_MI")}});isc.ClassFactory.defineClass("MMM_DD_YYYY_HH24_MI_Item","BizDateTimeItem");isc.MMM_DD_YYYY_HH24_MI_Item.addProperties({dateFormatter:"toMMM_DD_YYYY_HH24_MI",hint:"MM(M) DD YY(YY) HH(24):MI",pickerTimeItemProperties:{showSecondItem:false,use24HourTime:true}});isc.SimpleType.create({name:"MMM_DD_YYYY_HH24_MI",inheritsFrom:"bizDateTime",editorType:"MMM_DD_YYYY_HH24_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toMMM_DD_YYYY_HH24_MI")}});isc.ClassFactory.defineClass("MMM_DD_YYYY_HH_MI_SS_Item","BizDateTimeItem");isc.MMM_DD_YYYY_HH_MI_SS_Item.addProperties({dateFormatter:"toMMM_DD_YYYY_HH_MI_SS",hint:"MM(M) DD YY(YY) HH(:MI(:SS) AM/PM",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:false}});isc.SimpleType.create({name:"MMM_DD_YYYY_HH_MI_SS",inheritsFrom:"bizDateTime",editorType:"MMM_DD_YYYY_HH_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toMMM_DD_YYYY_HH_MI_SS")}});isc.ClassFactory.defineClass("MMM_DD_YYYY_HH24_MI_SS_Item","BizDateTimeItem");isc.MMM_DD_YYYY_HH24_MI_SS_Item.addProperties({hint:"MM(M) DD YY(YY) HH(24):MI(:SS)",dateFormatter:"toMMM_DD_YYYY_HH24_MI_SS",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:true}});isc.SimpleType.create({name:"MMM_DD_YYYY_HH24_MI_SS",inheritsFrom:"bizDateTime",editorType:"MMM_DD_YYYY_HH24_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toMMM_DD_YYYY_HH24_MI_SS")}});isc.ClassFactory.defineClass("YYYY_MM_DD_HH_MI_Item","BizDateTimeItem");isc.YYYY_MM_DD_HH_MI_Item.addProperties({dateFormatter:"toYYYY_MM_DD_HH_MI",hint:"YY(YY) MM(M) DD HH:MI AM/PM",pickerTimeItemProperties:{showSecondItem:false,use24HourTime:false}});isc.SimpleType.create({name:"YYYY_MM_DD_HH_MI",inheritsFrom:"bizDateTime",editorType:"YYYY_MM_DD_HH_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toYYYY_MM_DD_HH_MI")}});isc.ClassFactory.defineClass("YYYY_MM_DD_HH24_MI_Item","BizDateTimeItem");isc.YYYY_MM_DD_HH24_MI_Item.addProperties({dateFormatter:"toYYYY_MM_DD_HH24_MI",hint:"YY(YY) MM(M) DD HH(24):MI",pickerTimeItemProperties:{showSecondItem:false,use24HourTime:true}});isc.SimpleType.create({name:"YYYY_MM_DD_HH24_MI",inheritsFrom:"bizDateTime",editorType:"YYYY_MM_DD_HH24_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toYYYY_MM_DD_HH24_MI")}});isc.ClassFactory.defineClass("YYYY_MM_DD_HH_MI_SS_Item","BizDateTimeItem");isc.YYYY_MM_DD_HH_MI_SS_Item.addProperties({dateFormatter:"toYYYY_MM_DD_HH_MI_SS",hint:"YY(YY) MM(M) DD HH:MI(:SS) AM/PM",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:false}});isc.SimpleType.create({name:"YYYY_MM_DD_HH_MI_SS",inheritsFrom:"bizDateTime",editorType:"YYYY_MM_DD_HH_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toYYYY_MM_DD_HH_MI_SS")}});isc.ClassFactory.defineClass("YYYY_MM_DD_HH24_MI_SS_Item","BizDateTimeItem");isc.YYYY_MM_DD_HH24_MI_SS_Item.addProperties({hint:"YY(YY) MM(M) DD HH(24):MI(:SS)",dateFormatter:"toYYYY_MM_DD_HH24_MI_SS",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:true}});isc.SimpleType.create({name:"YYYY_MM_DD_HH24_MI_SS",inheritsFrom:"bizDateTime",editorType:"YYYY_MM_DD_HH24_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toYYYY_MM_DD_HH24_MI_SS")}});isc.TimeItem.addMethods({init:function(){this.Super("init",arguments)}});isc.ClassFactory.defineClass("BizTimeItem","TimeItem");isc.BizTimeItem.addProperties({useTextField:true,use24HourTime:false,showHint:true,showHintInField:true,hint:"HH:MI am/pm",textFieldProperties:{selectOnFocus:true},displayFormat:"toShortTime",timeFormatter:"toShortTime"});isc.BizTimeItem.addMethods({setValue:function(a){if(isc.isA.String(a)){a=isc.Time.parseInput(a)}return this.Super("setValue",[a])},hasAdvancedCriteria:function(){return false}});isc.SimpleType.create({name:"bizTime",inheritsFrom:"time",editorType:"BizTimeItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.Time.toShortTime(c,"toShortTime",true)}});isc.SimpleType.create({name:"HH_MI",inheritsFrom:"bizTime"});isc.ClassFactory.defineClass("HH_MI_SS_Item","BizTimeItem");isc.HH_MI_SS_Item.addProperties({use24HourTime:false,hint:"HH:MI:SS am/pm",dateFormatter:"toTime",timeFormatter:"toTime"});isc.SimpleType.create({name:"HH_MI_SS",inheritsFrom:"bizTime",editorType:"HH_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.Time.toTime(c,"toTime",true)}});isc.ClassFactory.defineClass("HH24_MI_Item","BizTimeItem");isc.HH24_MI_Item.addProperties({use24HourTime:true,hint:"HH24:MI",dateFormatter:"toShortPadded24HourTime",timeFormatter:"toShortPadded24HourTime"});isc.SimpleType.create({name:"HH24_MI",inheritsFrom:"bizTime",editorType:"HH24_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.Time.toShortTime(c,"toShortPadded24HourTime",true)}});isc.ClassFactory.defineClass("HH24_MI_SS_Item","BizTimeItem");isc.HH24_MI_SS_Item.addProperties({use24HourTime:true,hint:"HH24:MI:SS",dateFormatter:"toPadded24HourTime",timeFormatter:"toPadded24HourTime"});isc.SimpleType.create({name:"HH24_MI_SS",inheritsFrom:"bizTime",editorType:"HH24_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.Time.toTime(c,"toPadded24HourTime",true)}});isc.ClassFactory.defineClass("BizDecimal2Item","TextItem");isc.BizDecimal2Item.addClassMethods({parseInput:function(b){if(isc.isA.Number(b)){return b}if(b){b=b.toString().trim(" ").replace(/\$|\,/g,"");if(isNaN(b)){return""}else{var a=parseFloat(b);if(a>=1000000000000000000){a=""}return a}}else{return""}},format:function(b,a){if(!isc.isA.Number(b)){return b}return b.toLocalizedString(a,".",",","-")}});isc.BizDecimal2Item.addProperties({changeOnBlur:true,changeOnKeypress:false,width:100,showHint:false,selectOnFocus:true,decimalPlaces:2});isc.BizDecimal2Item.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Number(a)){a=isc.BizDecimal2Item.parseInput(a)}return isc.BizDecimal2Item.format(a,this.decimalPlaces)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizDecimal2Item.parseInput(a)}return a},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){if(isc.isA.String(a)){a=isc.BizDecimal2Item.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizDecimal2",inheritsFrom:"float",editorType:"BizDecimal2Item",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDecimal2Item.format(c,2)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizDecimal5Item","BizDecimal2Item");isc.BizDecimal5Item.addProperties({decimalPlaces:5});isc.SimpleType.create({name:"bizDecimal5",inheritsFrom:"float",editorType:"BizDecimal5Item",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,value)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDecimal2Item.format(c,5)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizDecimal10Item","BizDecimal2Item");isc.BizDecimal10Item.addProperties({decimalPlaces:10});isc.SimpleType.create({name:"bizDecimal10",inheritsFrom:"float",editorType:"BizDecimal10Item",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDecimal2Item.format(c,10)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizDecimal0Item","BizDecimal2Item");isc.BizDecimal0Item.addProperties({decimalPlaces:0});isc.SimpleType.create({name:"bizDecimal0",inheritsFrom:"float",editorType:"BizDecimal0Item",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDecimal2Item.format(c,0)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizDecimal1Item","BizDecimal2Item");isc.BizDecimal1Item.addProperties({decimalPlaces:1});isc.SimpleType.create({name:"bizDecimal1",inheritsFrom:"float",editorType:"BizDecimal1Item",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDecimal2Item.format(c,1)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizDollarsAndCentsItem","BizDecimal2Item");isc.BizDollarsAndCentsItem.addProperties({showHint:true,showHintInField:true,hint:"(+/-)$$$$$.cc"});isc.SimpleType.create({name:"bizDollarsAndCents",inheritsFrom:"float",editorType:"BizDollarsAndCentsItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDollarsAndCentsItem.format(c,2)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizIntegerPercentageItem","TextItem");isc.BizIntegerPercentageItem.addClassMethods({parseInput:function(b){if(isc.isA.Number(b)){return b}if(b){b=b.toString().trim(" ").trim("%");if(isNaN(b)){return null}else{var a=Math.round(parseFloat(b))/100;if(a>=1000000000000000000){a=null}return a}}else{return null}},format:function(a){if(!isc.isA.Number(a)){return a}return(a*100).toLocalizedString(0,".",",","-")+"%"}});isc.BizIntegerPercentageItem.addProperties({changeOnBlur:true,changeOnKeypress:false,width:100,showHint:true,showHintInField:true,hint:"(+/-)99999",selectOnFocus:true});isc.BizIntegerPercentageItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Number(a)){a=isc.BizIntegerPercentageItem.parseInput(a)}return isc.BizIntegerPercentageItem.format(a)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizIntegerPercentageItem.parseInput(a)}return a},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){if(isc.isA.String(a)){a=isc.BizIntegerPercentageItem.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizIntegerPercentage",inheritsFrom:"integer",editorType:"BizIntegerPercentageItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizIntegerPercentageItem.format(c)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizSimplePercentageItem","BizIntegerPercentageItem");isc.BizSimplePercentageItem.addClassMethods({parseInput:function(b){if(isc.isA.Number(b)){return b}if(b){b=b.toString().trim(" ").trim("%");if(isNaN(b)){return null}else{var a=Math.round(parseFloat(b));if(a>=1000000000000000000){a=null}return a}}else{return null}},format:function(a){if(!isc.isA.Number(a)){return a}return a.toLocalizedString(0,".",",","-")+"%"}});isc.BizSimplePercentageItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Number(a)){a=isc.BizSimplePercentageItem.parseInput(a)}return isc.BizSimplePercentageItem.format(a)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizSimplePercentageItem.parseInput(a)}return a},setValue:function(a){if(isc.isA.String(a)){a=isc.BizSimplePercentageItem.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizSimplePercentage",inheritsFrom:"float",editorType:"BizSimplePercentageItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizSimplePercentageItem.format(c)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizIntegerSeparatorItem","TextItem");isc.BizIntegerSeparatorItem.addClassMethods({parseInput:function(b){if(isc.isA.Number(b)){return b}if(b){b=b.toString().replace(",","").replace(",","").replace(",","").replace(",","").replace(",","").replace(",","").trim(" ");if(isNaN(b)){return null}else{var a=Math.round(parseFloat(b));if(a>=1000000000000000000){a=null}return a}}else{return null}},format:function(a){if(!isc.isA.Number(a)){return a}return(a).toLocalizedString(0,".",",","-")}});isc.BizIntegerSeparatorItem.addProperties({changeOnBlur:true,changeOnKeypress:false,width:100,showHint:true,showHintInField:true,hint:"(+/-)99,999,999",selectOnFocus:true});isc.BizIntegerSeparatorItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Number(a)){a=isc.BizIntegerSeparatorItem.parseInput(a)}return isc.BizIntegerSeparatorItem.format(a)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizIntegerSeparatorItem.parseInput(a)}return a},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){if(isc.isA.String(a)){a=isc.BizIntegerSeparatorItem.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizIntegerSeparator",inheritsFrom:"integer",editorType:"BizIntegerSeparatorItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizIntegerSeparatorItem.format(c)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizTwoDecimalPlacesPercentageItem","BizIntegerPercentageItem");isc.BizTwoDecimalPlacesPercentageItem.addClassMethods({parseInput:function(b){if(isc.isA.Number(b)){return b}if(b){b=b.toString().trim(" ").trim("%");if(isNaN(b)){return null}else{var a=Math.round(parseFloat(b)*100)/10000;if(a>=1000000000000000000){a=null}return a}}else{return null}},format:function(a){if(!isc.isA.Number(a)){return a}return(a*100).toLocalizedString(2,".",",","-")+"%"}});isc.BizTwoDecimalPlacesPercentageItem.addProperties({hint:"(+/-)99999.99"});isc.BizTwoDecimalPlacesPercentageItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Number(a)){a=isc.BizTwoDecimalPlacesPercentageItem.parseInput(a)}return isc.BizTwoDecimalPlacesPercentageItem.format(a)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizTwoDecimalPlacesPercentageItem.parseInput(a)}return a},setValue:function(a){if(isc.isA.String(a)){a=isc.BizTwoDecimalPlacesPercentageItem.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizTwoDecimalPlacesPercentage",inheritsFrom:"float",editorType:"BizTwoDecimalPlacesPercentageItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizTwoDecimalPlacesPercentageItem.format(c)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizTimeDurationItem","TextItem");isc.BizTimeDurationItem.addClassMethods({parseInput:function(e){if(isc.isA.Number(e)){return e}if(e){var c=/^\s*\s*([-+]?\d+)\s*\.\s*(\d?\d)?\s*$/.exec(e);if(c){var a=parseFloat(c[1]+"."+(c[2]|0));if(a>=1000000000000000000){a=null}return a}c=/^\s*\s*([-+]?\d+)\s*\D?\s*(\d?\d)?\s*$/.exec(e);if(c){var b=parseInt(c[1]|0,10);var d=Math.min(parseInt(c[2]|0,10),59);if(b>=0){return b+(d/60)}return b-(d/60)}else{return null}}else{return null}},format:function(b){if(!isc.isA.Number(b)){return b}var d;var a;if(b>=0){a=Math.floor(b);d=b-a}else{a=Math.ceil(b);d=Math.abs(b-a)}var c=Math.round(d*60).toString();if(c=="60"){a=(b>=0)?(a+1):(a-1);c="00"}else{if(c.length==1){c="0"+c}}return a+":"+c}});isc.BizTimeDurationItem.addProperties({changeOnBlur:true,changeOnKeypress:false,width:100,showHint:true,showHintInField:true,hint:"(+/-)HHH:MM",selectOnFocus:true});isc.BizTimeDurationItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Number(a)){a=isc.BizTimeDurationItem.parseInput(a)}return isc.BizTimeDurationItem.format(a)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizTimeDurationItem.parseInput(a)}return a},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){if(isc.isA.String(a)){a=isc.BizTimeDurationItem.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizTimeDuration",inheritsFrom:"float",editorType:"BizTimeDurationItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizTimeDurationItem.format(c)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizContentLinkItem",isc.CanvasItem);isc.BizContentLinkItem.addProperties({height:25,width:"*",rowSpan:"*",endRow:false,startRow:false,canFocus:true,shouldSaveValue:true});isc.BizContentLinkItem.addMethods({init:function(a){this._link=isc.HTMLFlow.create({contents:"Empty",width:"100%"});if(a.editable){this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",members:[this._link,isc.LayoutSpacer.create({width:3}),isc.BizUtil.createUploadButton(this,false)]})}else{this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",members:[this._link]})}this.Super("init",arguments)},setValue:function(b){if((this.canvas!=null)&&(!this.userSetValue)){if(b){var a=SKYVE.Util.CONTEXT_URL+"content?_n="+b+"&_doc="+this.form._view._mod+"."+this.form._view._doc+"&_b="+this.name.replaceAll("_",".");this._link.setContents('<div style="line-height:25px;vertical-align:middle;">'+this.canvas.linkHTML(a,(this.value?this.value:"Content"),"_blank")+"</div>")}else{this._link.setContents('<div style="line-height:25px;vertical-align:middle;">&lt;Empty&gt;</div>')}}return this.Super("setValue",[b])}});isc.SimpleType.create({inheritsFrom:"canvas",name:"bizContentLink",editorType:"BizContentLinkItem"});isc.ClassFactory.defineClass("BizContentImageItem",isc.CanvasItem);isc.BizContentImageItem.addProperties({width:"*",rowSpan:"*",endRow:false,startRow:false,canFocus:true,shouldSaveValue:true});isc.BizContentImageItem.addMethods({init:function(a){this._img=isc.Img.create({width:(a.width?a.width:"100%"),height:(a.height?a.height:"100%"),imageType:"stretch",overflow:"hidden",isGroup:true,styleName:"bizhubRoundedBorder bizhubContentImgFit",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",showDisabled:false,showDown:false,showFocus:false,showFocused:false,showFocusedAsOver:false,showRollOver:false,src:"[SKIN]blank.gif"});if(a.editable){var b=isc.HLayout.create({width:1,height:(a.height?a.height:"100%"),defaultLayoutAlign:"center",members:[isc.BizUtil.createUploadButton(this,true)]});this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",members:[this._img,isc.LayoutSpacer.create({width:5}),b]})}else{this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",members:[this._img]})}this.Super("init",arguments)},setValue:function(b){if((this.canvas!=null)&&(!this.userSetValue)){if(b){var a=SKYVE.Util.CONTEXT_URL+"content?_n="+b+"&_doc="+this.form._view._mod+"."+this.form._view._doc+"&_b="+this.name.replaceAll("_",".")+"&_w="+(this._img.getWidth()-20)+"&_h="+(this._img.getHeight()-20);+this._img.setSrc(a)}else{this._img.setSrc("[SKIN]blank.gif")}}return this.Super("setValue",[b])}});isc.SimpleType.create({inheritsFrom:"canvas",name:"bizContentImage",editorType:"BizContentImageItem"});isc.ClassFactory.defineClass("BizLookupDescriptionItem",isc.CanvasItem);isc.BizLookupDescriptionItem.addProperties({height:20,width:"*",rowSpan:"*",endRow:false,startRow:false,canFocus:true,shouldSaveValue:true,fetchMissingValues:false,autoFetchData:false,canCreate:false,canUpdate:false,canPick:true,canEdit:true,canAdd:true,canClear:true});isc.BizLookupDescriptionItem.addMethods({init:function(a){var b=this;var c={name:"_combo",type:"comboBox",showTitle:false,width:"*",textAlign:a.textAlign,selectOnFocus:true,fetchMissingValues:false,autoFetchData:false,useClientFiltering:false,cachePickListResults:false,allowEmptyValue:a.allowEmptyValue,optionDataSource:a.optionDataSource,valueField:a.valueField,displayField:a.displayField,pickListFields:a.pickListFields,filterFields:a.filterFields,pickListProperties:{filterData:function(f,e,d){if(d){if(d.params){}else{d.params={}}}else{d={};d.params={}}d.params._c=b._view.gather(false)._c;if(b._view._b){d.params._b=b._view._b}d.params._cc="";this.Super("filterData",arguments)}},completeOnTab:true,textMatchStyle:"substring",getPickListFilterCriteria:function(){var d=this.Super("getPickListFilterCriteria",arguments);isc.BizUtil.convertFilterCriteria(d);if(a.params){d=isc.BizUtil.completeFilterCriteria(d,a.params,b._view)}return d},showPicker:function(){var d=this.getOptionDataSource();if(d){if(d.compareCriteria){d._drop=true}}this.Super("showPicker")},changed:function(e,d,f){if(this.getDisplayValue()==f){b.Super("setValue",null)}else{b.Super("setValue",[f]);if(f){b.bizPicked(b.form,b,f)}}},blur:function(e,d){if(b.getValue()==null){var f=d.getValue();if(f&&(f!="")){d.setValue("")}}},valueMap:{}};if(a.editable){this._form=isc.DynamicForm.create({writeFormTag:false,numCols:2,colWidths:["*",65],margin:0,cellPadding:0});this._splitButton=isc.BizUtil.createSplitButton("Pick",null,false,"Pick a record",function(){var d=isc.BizUtil.getPickList(b,a.params,b._view);d.setDataSource(a.optionDataSource);isc.WindowStack.popup(b.getPageRect(),"Pick",true,[d])},"Other Options",this._form,[{title:"Edit",icon:"icons/zoom.gif",click:function(d){b.zoom(false)},enableIf:function(e,f,d){return(b.canUpdate&&b.canEdit&&(b.getValue()!=null))}},{title:"New",icon:"icons/new.png",click:function(d){if(a&&a.params){var e={};isc.BizUtil.addFilterRequestParams(e,a.params,b._view);b.zoom(true,e)}else{b.zoom(true)}},enableIf:function(e,f,d){return b.canCreate&&b.canAdd}},{title:"Clear",icon:"icons/delete.png",click:function(d){b.setValue(null);b.bizCleared(b.form,b,null)},enableIf:function(e,f,d){return b.canClear}}]);this._form.setItems([c,{name:"_splitButton",showTitle:false,type:"canvas",canvas:this._splitButton,align:"right"}])}else{this._form=isc.DynamicForm.create({writeFormTag:false,numCols:1,colWidths:["*"]});this._form.setItems([c])}this.canvas=this._form;this.Super("init",arguments)},setValue:function(a){if(this.canvas!=null){if(this.userSetValue){this.bizPicked(this.form,this,a)}else{this._form.getItem("_combo").setValue(a)}}this.Super("setValue",[a])},focusInItem:function(){if(this._form){this._form.getItem("_combo").focusInItem()}},bizAdded:function(b,a,c){},bizEdited:function(b,a,c){},bizPicked:function(b,a,c){},bizCleared:function(b,a,c){},setValueMapFromEditView:function(a){this._setValueMap(a[this.name],a[this.name+"_"+this.displayField])},setValueMapFromPickList:function(a){this._setValueMap(a.bizId,a[this.displayField])},_setValueMap:function(a,b){if(a){var c={};c[a]=b?b:"<unknown>";this._form.getItem("_combo").setValueMap(c);this.setValueMap(c)}},enableDisablePick:function(){this._form.getItem("_combo").setDisabled(!this.canPick);if(this._splitButton){this._splitButton.getMember(0).setDisabled(!this.canPick)}},zoom:function(a,f){var d=this;var b=isc.DataSource.get(this.optionDataSource).modoc;var c=b.indexOf(".");var e=b.substring(c+1);b=b.substring(0,c);isc.BizUtil.getEditView(b,e,function(h){var j=(d._view._b)?d._view._b+"."+d.name:d.name;var i=d.getPageRect();if(a){var k=d.required;if(k){d.setRequired(false)}var g=d._view.gather(true);if(g){if(g._apply||d._view._vm.valuesHaveChanged()){delete g._apply;d._view.saveInstance(true,null,function(){d.setRequired(k);isc.WindowStack.popup(i,"New",false,[h]);h.newInstance(f,j,g._c,false)})}else{d.setRequired(k);isc.WindowStack.popup(i,"New",false,[h]);h.newInstance(f,j,g._c,false)}}else{isc.warn("You cannot zoom in until you fix the problems found")}}else{var g=d._view.gather(true);if(g){if(g._apply||d._view._vm.valuesHaveChanged()){delete g._apply;d._view.saveInstance(true,null,function(){isc.WindowStack.popup(i,"Edit",false,[h]);h.editInstance(d.getValue(),j,g._c,false)})}else{isc.WindowStack.popup(i,"Edit",false,[h]);h.editInstance(d.getValue(),j,g._c,false)}}else{isc.warn("You cannot zoom in until you fix the problems found")}}})}});isc.SimpleType.create({inheritsFrom:"comboBox",name:"bizLookupDescription",editorType:"BizLookupDescriptionItem"});isc.ClassFactory.defineClass("BizCompleteItem",isc.ComboBoxItem);isc.BizCompleteItem.addProperties({optionDataSource:isc.BizUtil.COMPLETE_DATA_SOURCE,showPickerIcon:true,fetchMissingValues:false,autoFetchData:false,useClientFiltering:false,cachePickListResults:false,textMatchStyle:"substring",valueField:"value",displayField:"value",selectOnFocus:true,completeOnTab:true});isc.BizCompleteItem.addMethods({init:function(a){var b=this;if(a._a=="constrain"){b.addUnknownValues=false}b.pickListProperties={filterData:function(e,d,c){if(c){if(c.params){}else{c.params={}}}else{c={};c.params={}}c.params._attr=a._b;c.params._a=a._a;c.params._c=b.form._view.gather(false)._c;if(b.form._view._b){c.params._b=b.form._view._b}this.Super("filterData",arguments)}};this.Super("init",arguments)}});isc.SimpleType.create({inheritsFrom:"comboBox",name:"bizComplete",editorType:"BizCompleteItem"});var CKEDITOR=null;isc.ClassFactory.defineClass("BizHTMLItem",isc.CanvasItem);isc.BizHTMLItem.addProperties({width:"*",height:"200px",rowSpan:"*",endRow:false,startRow:false,canFocus:true,shouldSaveValue:true});isc.BizHTMLItem.addMethods({init:function(a){this._pane=isc.HTMLPane.create({width:a.width,height:a.height,isGroup:true,styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",padding:10,contents:"Empty"});var b=this;this._editButton=isc.IButton.create({width:40,title:"Edit",canHover:true,getHoverHTML:function(){return"Edit the HTML"},click:function(c){if(CKEDITOR){this._show()}else{SKYVE.Util.loadJS("ckeditor/ckeditor.js",function(){b._editButton._show()})}},_show:function(){var c=b.form._view;var e=c.gather(false);var d=isc.Canvas.create({width:"100%",height:"100%",margin:5});d.setContents('<div style="width:100%;height:100%" id="_CKEditor"></div>');d.draw=function(){this.Super("draw");CKEDITOR.config.filebrowserImageBrowseUrl="pages/htmlEdit/browseImages.jsp?_doc="+c._mod+"."+c._doc+"&_id="+e.bizId,CKEDITOR.config.filebrowserBrowseUrl="pages/htmlEdit/browseDocuments.jsp?_doc="+c._mod+"."+c._doc+"&_id="+e.bizId,CKEDITOR.config.resize_enabled=false;CKEDITOR.config.skin="moono-lisa";CKEDITOR.config.autoUpdateElement=false;CKEDITOR.config.baseFloatZIndex=9000000;CKEDITOR.config.toolbar=[["Source","-","NewPage","Preview"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Print","SpellChecker","Scayt"],["Undo","Redo","-","Find","Replace","-","SelectAll","RemoveFormat"],"/",["Bold","Italic","Underline","Strike","-","Subscript","Superscript"],["NumberedList","BulletedList","-","Outdent","Indent","Blockquote","CreateDiv"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["Link","Unlink","Anchor"],["Image","Flash","Table","HorizontalRule","Smiley","SpecialChar","PageBreak"],"/",["Format","Font","FontSize"],["TextColor","BGColor"],["Maximize","ShowBlocks"]];if(a.mentionMarkers){var m=function(l,q){var i=b.form._view.gather(false);var p={params:{_attr:b.name,_a:"suggest",_c:i._c}};if(b.form._view._b){p.params._b=b.form._view._b}isc.BizUtil.COMPLETE_DATA_SOURCE.fetchData({value:l.marker+l.query},function(s){if((s)&&(s.data)){for(var t=0,r=s.data.length;t<r;t++){var u=s.data[t];u.id=t;u.name=u.value.substring(1)}q(s.data)}},p)};var o=a.mentionMarkers.split(",");var h=[];for(var k=0,g=o.length;k<g;k++){var f=o[k];if(f.length>1){var n=f.substring(0,1);var j=f.substring(1,2);h.add({feed:m,marker:n,minChars:0,pattern:new RegExp("\\"+n+"[^\\"+n+"\\"+j+"]*$"),cache:false,throttle:500})}else{h.add({feed:m,marker:f,minChars:0,cache:false,throttle:500})}}CKEDITOR.config.mentions=h}CKEDITOR.config.coreStyles_bold={element:"b",overrides:"strong"};CKEDITOR.config.coreStyles_italic={element:"i",overrides:"em"};b._editor=CKEDITOR.replace("_CKEditor",{customConfig:SKYVE.Util.ckEditorConfigFileUrl});b._editor.setData(b.getValue());return this};isc.WindowStack.popup(null,"Edit HTML",true,[d,isc.HLayout.create({membersMargin:5,margin:5,align:"right",members:[isc.IButton.create({width:60,title:"Apply",click:function(f){b.setValue(b._editor.getData());isc.WindowStack.popoff(false)}}),isc.IButton.create({width:60,title:"Cancel",click:function(f){isc.WindowStack.popoff(false)}})]})],420)}});this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",members:[this._pane,isc.LayoutSpacer.create({width:3}),this._editButton]});this.Super("init",arguments)},setValue:function(a){if((this.canvas!=null)&&(!this.userSetValue)){if(a){this._pane.setContents(a)}else{this._pane.setContents(" ")}}return this.Super("setValue",[a])}});isc.SimpleType.create({inheritsFrom:"canvas",name:"bizHTML",editorType:"BizHTMLItem"});isc.ClassFactory.defineClass("GeometryItem",isc.CanvasItem);isc.GeometryItem.addClassProperties({validOperators:["geoWithin","geoContains","geoOverlaps","geoDisjoint","geoIntersects","geoTouches","geoCrosses","geoEquals","isNull","notNull"]});isc.GeometryItem.addClassMethods({format:function(a){if(a){if(a.startsWith("POINT")){return"Point"}else{if(a.startsWith("LINESTRING")){return"Line"}else{if(a.startsWith("POLYGON")){return"Polygon"}}}}return""}});isc.GeometryItem.addProperties({showHint:false,width:100,operator:"geoWithin",validOperators:isc.GeometryItem.validOperators,shouldSaveValue:true});isc.GeometryItem.addMethods({createCanvas:function(){var b=this;var a=[{src:"icons/map.png",prompt:"Click to set or see the geometry on a map",click:function(f,e,d){var c=b.drawingTools?{field:b,drawingTools:b.drawingTools}:{field:b};isc.WindowStack.popup(e.getPageRect(),"Map",true,[isc.BizMapPicker.create(c)])}}];return isc.HLayout.create({height:1,width:"100%",members:[isc.DynamicForm.create({writeFormTag:false,numCols:1,width:"100%",margin:0,cellPadding:0,items:[{name:"value",type:"text",showTitle:false,width:"*",hint:this.hint,showHintInField:true,selectOnFocus:true,changed:function(d,c,e){b.storeValue(e,false)},icons:a}]})]})},showValue:function(a,d,c,b){b.canvas.getMember(0).setValue("value",a)},setHint:function(a){this.canvas.getMember(0).setHint(a)},setValueFromPicker:function(a){this.storeValue(a,true)}});isc.SimpleType.create({name:"geometry",inheritsFrom:"canvas",editorType:"GeometryItem",defaultOperator:"gWithin",validOperators:isc.GeometryItem.validOperators});isc.ClassFactory.defineClass("GeometryMapItem",isc.CanvasItem);isc.GeometryMapItem.addProperties({width:"*",rowSpan:"*",endRow:false,startRow:false,canFocus:false,shouldSaveValue:true});isc.GeometryMapItem.addMethods({createCanvas:function(){return isc.HLayout.create({defaultLayoutAlign:"center"})},showValue:function(b,c){if(!this._valueSetFromPicker){var a={field:this,width:(this.width?this.width:"100%"),height:(this.height?this.height:"100%")};if(this.drawingTools){a.drawingTools=this.drawingTools}this.canvas.setMembers([isc.BizMapPicker.create(a)])}},setDisabled:function(a){this.canvas.getMember(0).setDisabled(a)},setValueFromPicker:function(a){this._valueSetFromPicker=true;this.setValue(a);delete this._valueSetFromPicker;if(this.changed){this.changed(this.form,this,a)}}});isc.SimpleType.create({name:"geometryMap",inheritsFrom:"canvas",editorType:"GeometryMapItem",validOperators:isc.GeometryItem.validOperators});isc.ClassFactory.defineClass("WindowStack");isc.WindowStack.addClassProperties({_margin:0,_stack:[],_unused:[],popup:function(e,i,b,h,j,c,g){isc.WindowStack._margin+=50;var k=isc.WindowStack._unused.pop();var f=c||j;var d=c?c:(isc.Page.getWidth()-isc.WindowStack._margin);var a=j?j:(isc.Page.getHeight()-isc.WindowStack._margin);if(k){k.setTitle(i);k.sizeSet=f;if(h){k.addItems(h)}k.setWidth(d);k.setHeight(a);k.closeClick=function(){isc.WindowStack.popoff(g?true:false)}}else{k=isc.Window.create({headerIconDefaults:{src:"window/skyve_fav.png",width:16,height:16},autoCenter:true,isModal:true,showModalMask:true,showMinimizeButton:false,modalMaskOpacity:25,canDragReposition:true,canDragResize:true,showShadow:true,shadowSoftness:10,shadowOffset:0,title:i,items:h,width:d,height:a,sizeSet:f,closeClick:function(){isc.WindowStack.popoff(g?true:false)}})}k.setShowCloseButton(b);k._fromRect=e;isc.WindowStack._stack.push(k);k.show()},popoff:function(d){var g=isc.WindowStack.getOpener();var a=isc.WindowStack._stack.pop();if(a){isc.WindowStack._animateClose(a);var c=a.items;if(c){if(CKEDITOR&&CKEDITOR.instances._CKEditor){CKEDITOR.instances._CKEditor.destroy();c[0].destroy()}else{for(var e=0,b=c.length;e<b;e++){var f=c[e];if(f._vm){isc.BizUtil.relinquishEditView(f)}else{if(isc.isA.BizListGrid(f)){isc.BizUtil.relinquishPickList(f)}}}}a.removeItems(c)}isc.WindowStack._unused.push(a);isc.WindowStack._margin-=50;if(g){if(g.resume){g.resume()}if(d&&g.rerender){g.rerender()}}}},getOpener:function(){if(isc.WindowStack._stack.length<=1){return isc.BizUtil.getCurrentView()}return isc.WindowStack._stack[isc.WindowStack._stack.length-2].items[0]},resize:function(){var b=isc.Page.getWidth()-50;var d=isc.Page.getHeight()-50;for(var a=0;a<isc.WindowStack._stack.length;a++){var c=isc.WindowStack._stack[a];if(c.sizeSet){}else{c.setWidth(b);c.setHeight(d);b-=50;d-=50}}},_wireframe:isc.Canvas.create({border:"3px ridge #E1E1E1",backgroundColor:"whitesmoke",opacity:75,autoDraw:false}),_animateClosedDuration:400,_animateClose:function(c){if(c._fromRect){var d,a,e,b;d=c.getLeft();a=c.getTop();e=c.getVisibleWidth();b=c.getVisibleHeight();isc.WindowStack._wireframe.setRect([d,a,e,b]);isc.WindowStack._wireframe.show();isc.WindowStack._wireframe.bringToFront()}c.hide();if(c._fromRect){isc.WindowStack._wireframe.animateRect(c._fromRect[0],c._fromRect[1],c._fromRect[2],c._fromRect[3],"isc.WindowStack._wireframe.hide();",isc.WindowStack._animateClosedDuration)}}});isc.ClassFactory.defineClass("ReportDialog");isc.ReportDialog.addClassProperties({_pageFormats:{LETTER:{width:612,height:792},NOTE:{width:540,height:720},LEGAL:{width:612,height:1008},A0:{width:2380,height:3368},A1:{width:1684,height:2380},A2:{width:1190,height:1684},A3:{width:842,height:1190},A4:{width:595,height:842},A5:{width:421,height:595},A6:{width:297,height:421},A7:{width:210,height:297},A8:{width:148,height:210},A9:{width:105,height:148},A10:{width:74,height:105},B0:{width:2836,height:4008},B1:{width:2004,height:2836},B2:{width:1418,height:2004},B3:{width:1002,height:1418},B4:{width:709,height:1002},B5:{width:501,height:709},ARCH_E:{width:595,height:842},ARCH_D:{width:595,height:842},ARCH_C:{width:595,height:842},ARCH_B:{width:595,height:842},ARCH_A:{width:595,height:842},FLSA:{width:612,height:936},FLSE:{width:612,height:936},HALFLETTER:{width:396,height:612},"11x17":{width:792,height:1224},LEDGER:{width:1224,height:792}},_available:[{name:"title",title:"Available Columns",required:true},{name:"line",title:"Line",type:"integer",editorType:"spinner",editorProperties:{min:1,max:9,step:1,defaultValue:1,validators:[{type:"integerRange",min:1,max:9}]},width:50},{name:"width",title:"Width",type:"integer",editorType:"spinner",editorProperties:{min:1,max:9999,step:10,defaultValue:1,validators:[{type:"integerRange",min:1,max:9999}]},width:50}],_selected:[{name:"title",title:"Exported Columns",required:true},{name:"line",title:"Line",type:"integer",editorType:"spinner",editorProperties:{min:1,max:9,step:1,defaultValue:1,validators:[{type:"integerRange",min:1,max:9}]},width:50},{name:"width",title:"Width",type:"integer",editorType:"spinner",editorProperties:{min:1,max:9999,step:10,defaultValue:1,validators:[{type:"integerRange",min:1,max:9999}]},width:50}],_valuesManager:isc.ValuesManager.create()});isc.ReportDialog.addClassProperties({_columnList:isc.ListGrid.create({width:"100%",height:"100%",canDragRecordsOut:true,canAcceptDroppedRecords:true,dragDataAction:"move",alternateRecordStyles:true,autoFetchData:false,leaveScrollbarGap:false,showHeaderContextMenu:false,fields:isc.ReportDialog._available}),_selectedColumnList:isc.ListGrid.create({width:"100%",height:"100%",canDragRecordsOut:true,canAcceptDroppedRecords:true,dragDataAction:"move",canReorderRecords:true,canRemoveRecords:false,canEdit:true,editByCell:true,editEvent:"click",modalEditing:true,alternateRecordStyles:true,autoFetchData:false,preventDuplicates:true,leaveScrollbarGap:false,showHeaderContextMenu:false,fields:isc.ReportDialog._selected})});isc.ReportDialog.addClassProperties({_createJasperReportFormatPickList:function(c,g){var f={};var e={};for(var b=0,a=SKYVE.Util.allowedReportFormats.length;b<a;b++){var d=SKYVE.Util.allowedReportFormats[b];if(d=="pdf"){f[d]="PDF (Adobe Portable Document Format)";e[d]=d}else{if(d=="docx"){f[d]="DOCX (Word Document - Office 2007)";e[d]="rtf"}else{if(d=="xlsx"){f[d]="XLSX (Excel Document - Office 2007)";e[d]="xls"}else{if(d=="pptx"){f[d]="PPTX (Powerpoint Document - Office 2007)";e[d]=d}else{if(d=="xls"){f[d]="XLS (Excel - 98-2003)";e[d]=d}else{if(d=="rtf"){f[d]="RTF (Rich Text Format)";e[d]=d}else{if(d=="ods"){f[d]="ODS (Open Document Spreadsheet Format)";e[d]="oo"}else{if(d=="odt"){f[d]="ODT (Open Document Text Format)";e[d]="oo"}else{if(d=="html"){f[d]="HTML (Hyper Text Markup Language)";e[d]=d}else{if(d=="csv"){f[d]="CSV (Comma Separated Values)";e[d]=d}else{if(d=="xml"){f[d]="XML (JRXML Format)";e[d]=d}else{if(d=="txt"){f[d]="TXT (Text Format)";e[d]=d}else{f[d]=d;e[d]=d}}}}}}}}}}}}}return{name:"reportFormat",showTitle:false,type:"select",width:300,required:true,valueMap:f,imageURLPrefix:"reporting/",imageURLSuffix:".png",valueIcons:e,defaultValue:SKYVE.Util.allowedReportFormats[0],colSpan:c,change:g}},_createFreemarkerReportFormatPickList:function(){var f={};var e={};var b=null;for(var c=0,a=SKYVE.Util.allowedReportFormats.length;c<a;c++){var d=SKYVE.Util.allowedReportFormats[c];if(d=="pdf"){f[d]="PDF (Adobe Portable Document Format)";e[d]=d;if(b==null){b=d}}else{if(d=="csv"){f[d]="CSV (Comma Separated Values)";e[d]=d;if(b==null){b=d}}}}return{name:"reportFormat",showTitle:false,type:"select",width:300,required:true,valueMap:f,imageURLPrefix:"reporting/",imageURLSuffix:".png",valueIcons:e,defaultValue:b,colSpan:1}}});isc.ReportDialog.addClassProperties({_columnSelectorLayout:isc.HLayout.create({membersMargin:10,height:"100%",members:[isc.ReportDialog._columnList,isc.VLayout.create({layoutAlign:"center",membersMargin:10,height:100,members:[isc.IButton.create({title:null,icon:"reporting/arrow_right.png",iconWidth:24,iconHeight:24,iconAlign:"center",width:36,height:36,click:function(){isc.ReportDialog._selectedColumnList.transferSelectedData(isc.ReportDialog._columnList)},canHover:true,getHoverHTML:function(){return"Move the selected columns into the report"}}),isc.IButton.create({title:null,icon:"reporting/arrow_left.png",iconWidth:24,iconHeight:24,iconAlign:"center",width:36,height:36,click:function(){isc.ReportDialog._columnList.transferSelectedData(isc.ReportDialog._selectedColumnList)},canHover:true,getHoverHTML:function(){return"Move the selected columns out of the report"}})]}),isc.ReportDialog._selectedColumnList]}),_reportFormatForm:null,_pageFormatForm:isc.DynamicForm.create({valuesManager:isc.ReportDialog._valuesManager,numCols:10,padding:15,items:[{name:"format",title:"Format",type:"select",required:true,width:80,valueMap:["LETTER","NOTE","LEGAL","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","B0","B1","B2","B3","B4","B5","ARCH_E","ARCH_D","ARCH_C","ARCH_B","ARCH_A","FLSA","FLSE","HALFLETTER","11x17","LEDGER"],defaultValue:"A4",change:function(c,b,d,a){if(c.getItem("orientation").getValue()=="portrait"){c.getItem("width").setValue(isc.ReportDialog._pageFormats[d].width);c.getItem("height").setValue(isc.ReportDialog._pageFormats[d].height)}else{c.getItem("width").setValue(isc.ReportDialog._pageFormats[d].height);c.getItem("height").setValue(isc.ReportDialog._pageFormats[d].width)}}},{name:"orientation",title:"Orientation",type:"radioGroup",required:true,valueMap:{portrait:"Portrait",landscape:"Landscape"},defaultValue:"portrait",change:function(g,f,e,b){var a=g.getItem("width");var d=g.getItem("height");var c=a.getValue();a.setValue(d.getValue());d.setValue(c)}},{name:"width",title:"Width",type:"spinner",required:true,width:80,min:1,max:9999,step:1,defaultValue:isc.ReportDialog._pageFormats.A4.width,validators:[{type:"integerRange",min:1,max:9999}]},{name:"height",title:"Height",type:"spinner",required:true,width:80,min:1,max:9999,step:1,defaultValue:isc.ReportDialog._pageFormats.A4.height,validators:[{type:"integerRange",min:1,max:9999}]}]}),_marginsForm:isc.DynamicForm.create({valuesManager:isc.ReportDialog._valuesManager,numCols:8,padding:15,items:[{name:"top",title:"Top",type:"spinner",required:true,width:80,min:1,max:9999,step:1,defaultValue:20,validators:[{type:"integerRange",min:1,max:9999}]},{name:"bottom",title:"Bottom",type:"spinner",required:true,width:80,min:1,max:9999,step:1,defaultValue:20,validators:[{type:"integerRange",min:1,max:9999}]},{name:"left",title:"Left",type:"spinner",required:true,width:80,min:1,max:9999,step:1,defaultValue:20,validators:[{type:"integerRange",min:1,max:9999}]},{name:"right",title:"Right",type:"spinner",required:true,width:80,min:1,max:9999,step:1,defaultValue:20,validators:[{type:"integerRange",min:1,max:9999}]}]}),_submitForm:isc.DynamicForm.create({autoDraw:true,canSubmit:true,method:"POST",items:[{name:"values",type:"hidden"},{name:"_c",type:"hidden"}]}),_layout:null,_criteria:null,_tagId:null,_dataSourceID:null,_createReportPanel:function(a,b){return isc.HLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",membersMargin:5,margin:5,layoutAlign:"center",members:[isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",width:134,height:130,layoutAlign:"center",margin:0,membersMargin:10,members:[isc.HLayout.create({width:134,align:"center",members:[isc.Img.create({imageType:"normal",src:"reporting/reporting.png",height:96,layoutAlign:"center"})]}),isc.HLayout.create({width:134,align:"center",members:[a]})]}),b]})},_createExport:function(){if(isc.ReportDialog._exportLayout==null){var a=function(d,c,e,b){if((e=="pdf")||(e=="docx")||(e=="pptx")||(e=="rtf")||(e=="odt")){d.getItem("isPaginated").setValue(true);d.getItem("isPretty").setValue(true);d.getItem("showSummary").setValue(true)}else{if(e=="html"){d.getItem("isPaginated").setValue(false);d.getItem("isPretty").setValue(true);d.getItem("showSummary").setValue(true)}else{d.getItem("isPaginated").setValue(false);d.getItem("isPretty").setValue(false);d.getItem("showSummary").setValue(false)}}d.getItem("fileNameSuffix").setValue("."+e)};isc.ReportDialog._reportFormatForm=isc.DynamicForm.create({valuesManager:isc.ReportDialog._valuesManager,numCols:7,colWidths:[60,200,40,30,"*",60,"*"],padding:15,items:[isc.ReportDialog._createJasperReportFormatPickList(3,a),{name:"isPaginated",title:"Paginated Report",type:"checkbox",required:true},{name:"style",title:"Style",type:"radioGroup",vertical:true,required:true,rowSpan:2,valueMap:{tabular:"Tabular",columnar:"Columnar"},defaultValue:"tabular",change:function(d,c,e,b){if(e=="columnar"){isc.ReportDialog._columnList.hideField("line");isc.ReportDialog._columnList.hideField("width");isc.ReportDialog._selectedColumnList.hideField("line");isc.ReportDialog._selectedColumnList.hideField("width")}else{isc.ReportDialog._columnList.showField("line");isc.ReportDialog._columnList.showField("width");isc.ReportDialog._selectedColumnList.showField("line");isc.ReportDialog._selectedColumnList.showField("width")}}},{name:"fileNameNoSuffix",title:"Filename",type:"text",required:true,width:"100%",defaultValue:"export"},{name:"fileNameSuffix",showTitle:false,type:"staticText",startRow:false,endRow:false},{name:"isPretty",title:"Pixel Perfect",type:"checkbox",required:true},{type:"spacer"},{type:"spacer"},{type:"spacer"},{name:"showSummary",title:"Show Summary",type:"checkbox",required:true}]}),a(isc.ReportDialog._reportFormatForm,null,SKYVE.Util.allowedReportFormats[0],null);isc.ReportDialog._exportLayout=isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",height:"100%",width:"100%",autoDraw:true,margin:5,membersMargin:5,members:[isc.ReportDialog._createReportPanel(isc.IButton.create({title:"Generate",click:function(){if(isc.ReportDialog._valuesManager.validate()){var c=isc.ReportDialog._valuesManager.getValues();c.columns=isc.ReportDialog._selectedColumnList.getData();c.ds=isc.ReportDialog._dataSourceID;if(isc.ReportDialog._criteria){c.criteria=isc.ReportDialog._criteria}if(isc.ReportDialog._tagId){c.tagId=isc.ReportDialog._tagId}var d=isc.ReportDialog._reportFormatForm.getItem("reportFormat").getValue();var b=isc.ReportDialog._reportFormatForm.getItem("fileNameNoSuffix").getValue();isc.ReportDialog._submitForm.setValue("values",isc.JSON.encode(c,{prettyPrint:false}));if(isc.ReportDialog._c){isc.ReportDialog._submitForm.setValue("_c",isc.ReportDialog._c)}isc.ReportDialog._submitForm.setAction("export/"+b+"."+d);isc.ReportDialog._submitForm.setTarget((d==="html")?"_blank":"_self");isc.ReportDialog._submitForm.submitForm()}}}),isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",margin:0,membersMargin:5,members:[isc.VLayout.create({isGroup:true,groupTitle:"Report Format",styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",groupLabelStyleName:"bizhubBorderLabel",backgroundImage:"background.png",backgroundRepeat:"repeat",members:[isc.ReportDialog._reportFormatForm]}),isc.VLayout.create({isGroup:true,groupTitle:"Page Format",styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",groupLabelStyleName:"bizhubBorderLabel",backgroundImage:"background.png",backgroundRepeat:"repeat",members:[isc.ReportDialog._pageFormatForm]}),isc.VLayout.create({isGroup:true,groupTitle:"Margins",styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",groupLabelStyleName:"bizhubBorderLabel",backgroundImage:"background.png",backgroundRepeat:"repeat",members:[isc.ReportDialog._marginsForm]})]})),isc.ReportDialog._columnSelectorLayout]})}},popupExport:function(b,c,f,e,d,a){isc.ReportDialog._createExport();isc.ReportDialog._dataSourceID=b;isc.ReportDialog._c=c;isc.ReportDialog._criteria=f;isc.ReportDialog._tagId=e;isc.ReportDialog._columnList.setData(d);isc.ReportDialog._selectedColumnList.setData(a);isc.WindowStack.popup(null,"Reporting",true,[isc.ReportDialog._exportLayout])},popupReport:function(b,d){if(d&&d._f){var c=d._f;var a=isc.addProperties({},d);delete a._f;isc.ReportDialog._redirectToReport(b,a,c)}else{if(d&&d._e&&d._e=="Freemarker"){if(isc.ReportDialog._freemarkerReportLayout==null){isc.ReportDialog._freemarkerReportLayout=isc.ReportDialog._createReportPanel(isc.IButton.create({title:"View",ID:"_freemarkerReportViewButton",_view:null,_params:null,click:function(){var e=_freemarkerReportForm.getValue("reportFormat");isc.ReportDialog._redirectToReport(this._view,this._params,e)}}),isc.DynamicForm.create({ID:"_freemarkerReportForm",fields:[{type:"rowSpacer"},{type:"rowSpacer"},isc.ReportDialog._createFreemarkerReportFormatPickList()]}))}_freemarkerReportViewButton._view=b;_freemarkerReportViewButton._params=d;isc.WindowStack.popup(null,"Report",true,[isc.ReportDialog._freemarkerReportLayout],180,480)}else{if(isc.ReportDialog._jasperReportLayout==null){isc.ReportDialog._jasperReportLayout=isc.ReportDialog._createReportPanel(isc.IButton.create({title:"View",ID:"_jasperReportViewButton",_view:null,_params:null,click:function(){var e=_jasperReportForm.getValue("reportFormat");isc.ReportDialog._redirectToReport(this._view,this._params,e)}}),isc.DynamicForm.create({ID:"_jasperReportForm",fields:[{type:"rowSpacer"},{type:"rowSpacer"},isc.ReportDialog._createJasperReportFormatPickList(1,function(g,f,h,e){})]}))}_jasperReportViewButton._view=b;_jasperReportViewButton._params=d;isc.WindowStack.popup(null,"Report",true,[isc.ReportDialog._jasperReportLayout],180,480)}}},_redirectToReport:function(h,e,j){var l=h.gather(false);if(l){var g=l._c;var i=h._b;var k=l.bizId;var a;if(e&&e._n){a="report/"+e._n+"."+j+"?_f="+j+(g?"&_c="+g:"")+(i?"&_b="+i:"")+(k?"&_id="+k:"")}else{a="report/?_f="+j+(g?"&_c="+g:"")+(i?"&_b="+i:"")+(k?"&_id="+k:"")}if(e){for(var d in e){var f=e[d];a+="&"+d+"="+encodeURI(h.toDisplay(f,l)).replaceAll("?","%3F").replaceAll("&","%26")}}if(j==="html"){window.open(a,"report","location=0,status=0,scrollbars=1,resizable=1,width=800,height=600")}else{window.location=a}}}});isc.ClassFactory.defineClass("ChartDialog");isc.ChartDialog.addClassProperties({_valuesManager:isc.ValuesManager.create()});isc.ChartDialog.addClassProperties({_chartForm:isc.DynamicForm.create({valuesManager:isc.ChartDialog._valuesManager,numCols:6,colWidths:[100,120,80,"*",90,"*"],items:[{name:"type",type:"enum",title:"Chart Type",width:"*",valueMap:{line:"Line",lineArea:"Line Area",bar:"Bar",horizontalBar:"Horizontal Bar",radar:"Radar",pie:"Pie",doughnut:"Doughnut",polarArea:"Polar Area"},required:true},{name:"title",type:"text",width:"*",title:"Chart Title"},{name:"label",type:"text",width:"*",title:"Data Label"}]}),_categoryForm:isc.DynamicForm.create({valuesManager:isc.ChartDialog._valuesManager,numCols:7,colWidths:[100,"*",110,160,60,60,150],items:[{name:"categoryBinding",type:"select",title:"Category Field",width:"*",required:true,valueMap:[]},{name:"categoryBucket",type:"enum",title:"Category Bucket",width:"*",allowEmptyValue:true,valueMap:{NumericMultipleBucket:"Numeric Multiple",TextLengthBucket:"Text Length",TextStartsWithBucket:"Text Starts With",TemporalBucket:"Temporal"},redrawOnChange:true},{name:"numericMultiple",type:"spinner",width:"*",title:"Multiple",min:1,step:1,defaultValue:100,validators:[{type:"requiredIf",expression:"item.isVisible()"}],showIf:"form.getItem('categoryBucket').getValue() == 'NumericMultipleBucket'"},{name:"startsWithLength",type:"spinner",width:"*",title:"Length",min:1,step:1,defaultValue:1,validators:[{type:"requiredIf",expression:"item.isVisible()"}],showIf:"form.getItem('categoryBucket').getValue() == 'TextStartsWithBucket'"},{name:"startsWithCaseSensitive",type:"checkbox",allowEmptyValue:false,title:"Case Sensitive",showTitle:false,defaultValue:false,validators:[{type:"requiredIf",expression:"item.isVisible()"}],showIf:"form.getItem('categoryBucket').getValue() == 'TextStartsWithBucket'"},{name:"temporalBucketType",type:"enum",width:"*",title:"Type",colSpan:2,allowEmptyValue:false,valueMap:{day:"Day",dayMonthYear:"Day/Month/Year",hour:"Hour",hourDay:"Hour/Day",hourDayMonth:"Hour/Day/Month",minuteHour:"Minute/Hour",month:"Month",monthYear:"Month/Year",secondMinuteHour:"Second/Minute/Hour",year:"Year"},validators:[{type:"requiredIf",expression:"item.isVisible()"}],showIf:"form.getItem('categoryBucket').getValue() == 'TemporalBucket'"}]}),_valueForm:isc.DynamicForm.create({valuesManager:isc.ChartDialog._valuesManager,numCols:4,colWidths:[100,"*",105,100],items:[{name:"valueBinding",type:"select",title:"Value Field",startRow:true,width:"*",required:true,valueMap:[]},{name:"valueFunction",type:"enum",width:"*",title:"Value Function",valueMap:[null,"Count","Avg","Sum","Min","Max"]}]}),_topForm:isc.DynamicForm.create({valuesManager:isc.ChartDialog._valuesManager,numCols:8,colWidths:[30,40,60,40,130,40,100,130],items:[{name:"topOn",type:"checkbox",allowEmptyValue:false,showTitle:false,showLabel:false,defaultValue:false,redrawOnChange:true,change:function(d,c,e,b){if(e){d.getItem("top").enable();d.getItem("topBy").enable();d.getItem("topSort").enable();d.getItem("includeOthers").enable()}else{var a=d.getItem("top");if(!a.getValue()){a.setValue("10");a.clearErrors()}a.disable();d.getItem("topBy").disable();d.getItem("topSort").disable();d.getItem("includeOthers").disable()}}},{name:"top",type:"spinner",title:"Top",width:"*",required:true,disabled:true,min:1,max:9999,step:1,defaultValue:10},{name:"topBy",type:"radioGroup",title:"By",vertical:false,required:true,disabled:true,defaultValue:"category",valueMap:{category:"Category",value:"Value"}},{name:"topSort",type:"radioGroup",title:"Sort",vertical:false,required:true,disabled:true,defaultValue:"ascending",valueMap:{ascending:"Ascending",descending:"Descending"}},{name:"includeOthers",type:"checkbox",allowEmptyValue:false,title:"Include Others",showTitle:false,disabled:true,defaultValue:false}]}),_orderForm:isc.DynamicForm.create({valuesManager:isc.ChartDialog._valuesManager,numCols:5,colWidths:[30,40,130,40,"*"],items:[{name:"orderOn",type:"checkbox",allowEmptyValue:false,showTitle:false,showLabel:false,defaultValue:false,change:function(c,b,d,a){if(d){c.getItem("orderBy").enable();c.getItem("orderSort").enable()}else{c.getItem("orderBy").disable();c.getItem("orderSort").disable()}}},{name:"orderBy",type:"radioGroup",title:"By",vertical:false,required:true,disabled:true,defaultValue:"category",valueMap:{category:"Category",value:"Value"}},{name:"orderSort",type:"radioGroup",title:"Sort",vertical:false,disabled:true,defaultValue:"ascending",valueMap:{ascending:"Ascending",descending:"Descending"}}]}),_chart:null,_layout:null,_criteria:null,_tagId:null,_dataSource:null,_border:function(b,a){return isc.VLayout.create({isGroup:true,groupTitle:b,styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",padding:5,height:1,groupLabelBackgroundColor:"transparent",groupLabelStyleName:"bizhubBorderLabel",backgroundImage:"background.png",backgroundRepeat:"repeat",members:a})},_createChartPanel:function(a,b){return isc.HLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",membersMargin:5,margin:5,height:1,layoutAlign:"center",members:[isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",width:134,height:130,layoutAlign:"center",margin:0,membersMargin:10,members:[isc.HLayout.create({width:134,align:"center",members:[isc.Img.create({imageType:"normal",src:"reporting/reporting.png",height:96,layoutAlign:"center"})]}),isc.HLayout.create({width:134,align:"center",members:[a]})]}),b]})},_create:function(){if(isc.ChartDialog._layout==null){isc.ChartDialog._chart=isc.BizChart.create({});var a=isc.ChartDialog._border("Result",[isc.ChartDialog._chart]);a.setHeight("100%");var b=isc.ChartDialog._border("Chart",[isc.ChartDialog._chartForm,isc.ChartDialog._categoryForm,isc.ChartDialog._valueForm]);isc.ChartDialog._layout=isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",height:"100%",width:"100%",autoDraw:true,margin:5,membersMargin:5,members:[isc.ChartDialog._createChartPanel(isc.IButton.create({title:"Generate",click:function(){if(isc.ChartDialog._valuesManager.validate()){var i={};i.ds=isc.ChartDialog._dataSource.ID;if(isc.ChartDialog._criteria){i.criteria=isc.ChartDialog._criteria}if(isc.ChartDialog._tagId){i.tagId=isc.ChartDialog._tagId}i.t=isc.ChartDialog._valuesManager.getValue("type");i.b=isc.ChartDialog._valuesManager.getValues();var c=i.b.categoryBinding;var h=i.b.categoryBucket;if(h){var g=isc.ChartDialog._dataSource.getField(c);var d=g.type;if(isc.BizUtil.isNumeric(d)){if(h!="NumericMultipleBucket"){isc.ChartDialog._valuesManager.setErrors({categoryBinding:"Use a numeric bucket only with a number field",categoryBucket:"Use a numeric bucket only with a number field"},true);return true}}else{if(isc.BizUtil.isTemporal(d)){if(h!="TemporalBucket"){isc.ChartDialog._valuesManager.setErrors({categoryBinding:"Use a temporal bucket only with a date or time field",categoryBucket:"Use a temporal bucket only with a date or time field"},true);return true}}else{if(h=="TemporalBucket"){isc.ChartDialog._valuesManager.setErrors({categoryBinding:"Use a temporal bucket only with a date or time field",categoryBucket:"Use a temporal bucket only with a date or time field"},true);return true}else{if(h=="NumericMultipleBucket"){isc.ChartDialog._valuesManager.setErrors({categoryBinding:"Use a numeric bucket only with a number field",categoryBucket:"Use a numeric bucket only with a number field"},true);return true}}}}}var e=i.b.valueBinding;var f=i.b.valueFunction;var g=isc.ChartDialog._dataSource.getField(e);var d=g.type;if((d!="integer")&&(d!="float")&&(f!="Count")){isc.ChartDialog._valuesManager.setErrors({valueBinding:"Use the [Count] value function with a non-numeric field",valueFunction:"Use the [Count] value function with a non-numeric field"},true);return true}if(!i.b.label){i.b.label=(f?isc.ChartDialog._valueForm.getItem("valueFunction").getDisplayValue()+" ":"")+isc.ChartDialog._valueForm.getItem("valueBinding").getDisplayValue()+" by "+isc.ChartDialog._categoryForm.getItem("categoryBinding").getDisplayValue()}isc.ChartDialog._valuesManager.clearErrors(true);isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,actionURL:SKYVE.Util.CONTEXT_URL+"chart",httpMethod:"POST",params:i,callback:function(n,m,l){if(m.config){var k=null;if(isc.ChartDialog._chart&&isc.ChartDialog._chart.chartConfig){k=isc.ChartDialog._chart.chartConfig.type}var j=m.config.type;if(k!=j){isc.ChartDialog._destroyAndRecreate()}isc.ChartDialog._chart._update(m)}}})}}}),isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",margin:0,height:1,membersMargin:5,members:[b,isc.ChartDialog._border("Top",[isc.ChartDialog._topForm]),isc.ChartDialog._border("Order",[isc.ChartDialog._orderForm])]})),a]})}else{isc.ChartDialog._destroyAndRecreate()}},_destroyAndRecreate:function(){var a=null;if(isc.ChartDialog._chart){a=isc.ChartDialog._layout.getMember(1);a.removeMember(isc.ChartDialog._chart);if(isc.ChartDialog._chart.chart){isc.ChartDialog._chart.chart.destroy()}isc.ChartDialog._chart.destroy()}isc.ChartDialog._chart=isc.BizChart.create({});if(a){a.addMember(isc.ChartDialog._chart)}else{isc.ChartDialog._layout.addMember(isc.ChartDialog._border("Result",[isc.ChartDialog._chart]))}},popupChart:function(a,g,j,c,f){isc.ChartDialog._create();isc.ChartDialog._dataSource=a;isc.ChartDialog._c=g;isc.ChartDialog._criteria=j;isc.ChartDialog._tagId=c;var b={};var k=a.getFieldNames(true);for(var e=0,d=k.length;e<d;e++){if((k[e]!="bizTagged")&&(k[e]!="bizFlagComment")){var h=a.getField(k[e]);b[h.name]=h.title}}var h=isc.ChartDialog._categoryForm.getItem("categoryBinding");h.setValue("");h.setValueMap(b);h=isc.ChartDialog._valueForm.getItem("valueBinding");h.setValue("");h.setValueMap(b);isc.WindowStack.popup(null,"Charting",true,[isc.ChartDialog._layout])}});isc.defineClass("AdvancedFilter","VLayout");isc.AdvancedFilter.addProperties({width:"100%",height:1,overflow:"visible",membersMargin:2,margin:2,filterableComponent:null,filterableComponentConfig:null,toggleButton:null,_filterBuilder:null,_filterButtonDefaults:null});isc.AdvancedFilter.addMethods({initWidget:function(){this._filterButtonDefaults={_constructor:isc.IButton,autoFit:true,title:"Filter",icon:"icons/filter_add.png"};this.Super("initWidget",arguments);this.toggleButton=isc.ToolStripButton.create({icon:"icons/filter_add.png",actionType:"checkbox",showFocused:false,showDown:false,showSelectedIcon:false,selected:false,canHover:true,getHoverHTML:function(){if(this.selected){return"Use <b>simple</b> filtering"}else{return"Use <b>advanced</b> filtering"}}});var a=this;this._styleForm=isc.DynamicForm.create({numCols:2,width:200,items:[{name:"style",title:"Style",type:"radioGroup",vertical:false,required:true,valueMap:{radio:"Flat",bracket:"Nested",inline:"Inline"},defaultValue:"radio",changed:function(c,b,d){a.setDataSource(a._filterBuilder.getDataSource())}}]});this.addMember(this._styleForm);this.getStyle=function(){return this._styleForm.getValue("style")};this.setStyle=function(b){this._styleForm.setValue("style",b);this.setDataSource(this._filterBuilder.getDataSource())}},toggleButtonClick:function(){if(this.toggleButton.selected){this.filterableComponent.grid.setShowFilterEditor(false);this.filterableComponent.grid.filterData(this._filterBuilder.getCriteria());this.show()}else{this.filterableComponent.grid.setShowFilterEditor(true);this.filterableComponent.grid.setFilterEditorCriteria({});this.filterableComponent.grid.filterData({});this.hide()}},setDataSource:function(b){if(this._filterBuilder){this.removeMember(this._filterBuilder);this._filterBuilder.destroy();this._filterBuilder=null}else{this._filterButton=this.createAutoChild("_filterButton",{click:function(){this.creator.filterableComponent.grid.filterData(this.creator._filterBuilder.getCriteria(),null,{params:{_summary:this.creator.filterableComponent.summaryType}})}});this.addMember(this._filterButton)}var a=this._styleForm.getValue("style");if(a){}else{a="radio"}this._filterBuilder=isc.FilterBuilder.create({dataSource:b,topOperatorAppearance:a,allowEmpty:true});this.addMember(this._filterBuilder,1);if(this.toggleButton.selected){this.show()}else{this.hide()}},getCriteria:function(a){if(this._filterBuilder){return this._filterBuilder.getCriteria(a)}else{return null}},clearCriteria:function(){if(this._filterBuilder){this._filterBuilder.clearCriteria()}},setCriteria:function(a){if(this._filterBuilder){this._filterBuilder.setCriteria(a)}}});isc.ClassFactory.defineClass("BizGrid","VLayout");isc.BizGrid.addProperties({title:null,grid:null,_eventRowNum:null,_eventColumnNum:null,_eventRecord:null,_disabled:false,deleteSelectionItem:null,deleteSelectionButton:null,clearSelectionItem:null,aggregate:false,canCreate:false,canUpdate:false,canDelete:false,canAdd:true,canEdit:true,canZoom:true,canRemove:true,isRepeater:false,showColumnHeaders:true,showGrid:true});isc.BizGrid.addMethods({initWidget:function(a){if(a.title){this.isGroup=true;this.groupTitle="&nbsp;&nbsp;"+a.title+"&nbsp;&nbsp;";this.groupLabelStyleName="bizhubBorderLabel";this.groupBorderCSS="1px solid #bfbfbf";this.margin=1;this.padding=10;this.groupLabelBackgroundColor="transparent"}this.Super("initWidget",a);if(a.title){this.setStyleName("bizhubRoundedBorder")}var b=this;b.deleteSelectionItem={title:"Delete/Remove Selected",icon:"icons/delete.png",enableIf:function(d,e,c){return((!b._disabled)&&b.canDelete&&b.canRemove&&b.grid.anySelected())},click:function(){isc.ask("Do you want to delete/remove the selected rows?",function(e){if(e){var d={};if(b._b){d.params={}}else{d.params={_csrf:b._csrf}}if(b._view){var c=b._view.gather(false);d.params._c=c._c}b.grid.removeSelectedData(function(g,h,f){if(g){b._csrf=g.httpHeaders["x-csrf-token"]}b.grid.selectionChanged(null,false);b._eventRowNum=null;b._eventColumnNum=null;b._eventRecord=null;if(b._view){if(b._b){b._view._vm.setValue("_changed",true);b._view._vm.setValue("_apply",true)}if(b.bizRemoved){b.bizRemoved()}}},d)}})}};b.deleteSelectionButton=isc.BizUtil.createImageButton(b.deleteSelectionItem.icon,true,"<b>Delete/Remove</b> selected.",b.deleteSelectionItem.click);b.deleteSelectionButton.setDisabled(true);b.clearSelectionItem={title:"Deselect all",icon:"icons/clearSelection.png",click:function(){b.grid.deselectAllRecords();b._eventRowNum=null;b._eventColumnNum=null;b._eventRecord=null}}},refresh:function(){this.grid.refresh()}});isc.ClassFactory.defineClass("BizListGrid","BizGrid");isc.BizListGrid.addProperties({summaryType:"",tagId:null,_dataSource:null,_toolbar:null,_advancedFilter:null,_summaryGrid:null,_flagForm:null,_flagDialog:null,_newButton:null,_zoomButton:null,_popoutButton:null,_editButton:null,_pickButton:null,_chartButton:null,showAdd:true,showZoom:true,showEdit:true,showRemove:true,showDeselect:true,showExport:true,showChart:true,showFilter:true,showSummary:true,showSnap:true,showTag:true,autoPopulate:true,_lookup:null});isc.BizListGrid.addMethods({initWidget:function(c){this.Super("initWidget",arguments);var n=this;this._config=c;n._flagDialog=isc.Window.create({autoCenter:true,autoSize:true,isModal:true,showModalMask:true,canDragReposition:true,canDragResize:false,showShadow:true,shadowSoftness:10,shadowOffset:0,title:"Flag",headerIconDefaults:{src:"flag.gif",width:22,height:22},showMaximizeButton:false,showMinimizeButton:false,showHeaderIcon:true,items:[isc.DynamicForm.create({padding:0,margin:5,useAllDataSourceFields:false,numCols:2,items:[]})]});var g=function(){var r=n._advancedFilter.toggleButton.selected?n._advancedFilter.getCriteria():n.grid.getFilterEditorCriteria(true);isc.BizUtil.convertFilterCriteria(r);if(c&&c.params){r=isc.BizUtil.completeFilterCriteria(r,c.params,n._view)}return r};var k={title:"New",icon:"icons/new.png",enableIf:function(s,t,r){return((!n._disabled)&&n.canCreate&&n.canAdd)},click:function(){if(c){var r=false;if(c.contConv){r=c.contConv}if(r){var s=n._view.gather(false)._changed;if(s||n._view._vm.valuesHaveChanged()){isc.say("There are unsaved changes in the "+n._view._singular+".  Save your changes to the "+n._view._singular+" first.",null,{title:"Unsaved Changes!"});return}}var t={};if(c.params){isc.BizUtil.addFilterRequestParams(t,c.params,n._view)}n.zoom(true,r,t)}else{n.zoom(true,false)}}};n._zoomItem={title:"Zoom",icon:"icons/zoom.gif",enableIf:function(s,t,r){return(n.canZoom&&(!n.aggregate)&&n.grid.anySelected())},click:function(){if(c&&c.contConv){var r=n._view.gather(false)._changed;if(r||n._view._vm.valuesHaveChanged()){isc.say("There are unsaved changes in the "+n._view._singular+".  Save your changes to the "+n._view._singular+" first.",null,{title:"Unsaved Changes!"})}else{n.zoom(false,true)}}else{n.zoom(false,false)}}};var d={title:"Popout",icon:"icons/popout.png",enableIf:function(s,t,r){return(n.canZoom&&(!n.aggregate)&&(!(c&&c.contConv))&&n.grid.anySelected())},click:function(){var r="?a=e&m="+n._eventRecord.bizModule+"&d="+n._eventRecord.bizDocument+"&i="+n._eventRecord.bizId;window.open(r,"_blank").focus()}};var j={title:"Edit",icon:"icons/edit.png",enableIf:function(s,t,r){return((!n._disabled)&&n.canUpdate&&n.canEdit&&n.grid.anySelected())},click:function(){if(n.grid.anySelected()){if(n.grid.saveRequestProperties){}else{n.grid.saveRequestProperties={}}if(n.grid.saveRequestProperties.params){}else{n.grid.saveRequestProperties.params={}}n.grid.saveRequestProperties.params._csrf=n._csrf;if(n._view){var r=n._view.gather(false);if(c&&c.contConv){if(r._changed||n._view._vm.valuesHaveChanged()){isc.say("There are unsaved changes in the "+n._view._singular+".  Save your changes to the "+n._view._singular+" first.",null,{title:"Unsaved Changes!"})}else{n.grid.saveRequestProperties.params._cc=""}}n.grid.saveRequestProperties.params._c=r._c;n.grid.startEditing(n._eventRowNum,n._eventColNum)}else{delete n.grid.saveRequestProperties.params._c;n.grid.startEditing(n._eventRowNum,n._eventColNum)}}}};var b={title:"Pick",icon:"icons/select.png",enableIf:function(s,t,r){return !n._disabled},click:function(){n.pick(n._lookup)}};n._newButton=isc.BizUtil.createImageButton(k.icon,true,"<b>New</b> record.",k.click);n._zoomButton=isc.BizUtil.createImageButton(n._zoomItem.icon,true,"<b>Zoom</b> into record.",n._zoomItem.click);n._zoomButton.setDisabled(true);n._popoutButton=isc.BizUtil.createImageButton(d.icon,true,"<b>Popout</b> record.",d.click);n._popoutButton.setDisabled(true);n._editButton=isc.BizUtil.createImageButton(j.icon,true,"<b>Edit</b> a record inline.",j.click);n._editButton.setDisabled(true);n._pickButton=isc.BizUtil.createImageButton(b.icon,true,"<b>Pick</b> this record.",b.click);n._pickButton.setDisabled(true);var q={title:"Clear Filter",icon:"icons/filter_delete.png",click:function(){n.grid.setFilterEditorCriteria({});n._advancedFilter.clearCriteria();n.refresh()}};var m={title:"Refresh",icon:"icons/refresh.png",click:function(){n.refresh()}};var e=function(){var B=n._dataSource.getFieldNames(true);var y=[{name:"bizFlagComment",title:"Flag",line:1,width:100}];var u=[];var t=n.getFieldState();for(var v=0,s=B.length;v<s;v++){var z=B[v];if((z!="bizTagged")&&(z!="bizFlagComment")){var x=n._dataSource.getField(z);var A=n.grid.getField(z);var w=A?A.align:"center";if(t[v]&&((t[v].visible===undefined)||(t[v].visible==null)||(t[v].visible))){u.add({name:z,title:x.title,line:1,width:t[v].width,align:w})}else{y.add({name:z,title:x.title,line:1,width:100,align:w})}}}var r=g();isc.ReportDialog.popupExport(n._dataSource.ID,n._view?n._view.gather(false)._c:null,r,n.tagId,y,u)};var o={title:"Export Data...",icon:"icons/export.png",click:function(){var r=n.grid.getTotalRows();if(r>10000){isc.ask("There are "+r+" rows in this list to export which could take more than 1 minute!  Do you want to continue?",function(s){if(s){e()}})}else{if(r>1000){isc.ask("There are "+r+" rows to export which may take a few seconds.  Do you want to continue?",function(s){if(s){e()}})}else{e()}}}};var h=function(){var r=g();isc.ChartDialog.popupChart(n._dataSource,n._view?n._view.gather(false)._c:null,r,n.tagId,n._dataSource.fields)};var p={title:"Chart Data...",icon:"icons/chart.png",enableIf:function(s,t,r){return n._dataSource&&(!n._config.isTree)&&(!n._dataSource.ID.contains("__"))},click:function(){var r=n.grid.getTotalRows();if(r>10000){isc.ask("There are "+r+" rows in this list to chart which could take more than 1 minute!  Do you want to continue?",function(s){if(s){h()}})}else{if(r>1000){isc.ask("There are "+r+" rows to export which may take a few seconds.  Do you want to continue?",function(s){if(s){h()}})}else{h()}}}};n._chartButton=isc.BizUtil.createImageButton(p.icon,true,"<b>Chart</b> this data.",p.click);n._chartButton.setDisabled(true);var a=(c&&c.isPickList)?[b]:[];if(n.showAdd){a.add(k)}if(n.showZoom){a.add(n._zoomItem);a.add(d)}if(n.showEdit){a.add(j)}if(n.showRemove){a.add(this.deleteSelectionItem)}if(a.length>0){a.add({isSeparator:true})}if(n.showDeselect){a.add(this.clearSelectionItem)}if(n.showFilter){if(n._config.isTree){}else{a.add(q)}}a.add(m);if(n.showExport||n.showChart){a.add({isSeparator:true});if(n.showExport){a.add(o)}if(n.showChart){a.add(p)}}n._contextMenu=isc.Menu.create({showShadow:true,shadowDepth:10,data:a});n._advancedFilter=isc.AdvancedFilter.create({filterableComponent:n,filterableComponentConfig:c});n._advancedFilter.toggleButton.click=function(){n._advancedFilter.toggleButtonClick()};n._snapMenu=isc.Menu.create({showShadow:true,shadowDepth:10,canSelectParentItems:true,data:[]});n._snapMenuButton=isc.ToolStripMenuButton.create({autoFit:true,padding:3,title:"No Snapshot",menu:n._snapMenu,click:function(){var r={a:"L",d:n._dataSource.ID,_csrf:n._csrf};isc.RPCManager.sendRequest({showPrompt:false,evalResult:true,useSimpleHttp:true,httpMethod:"GET",params:r,actionURL:SKYVE.Util.CONTEXT_URL+"smartsnap",callback:function(s,w,x){if(s.status>=0){n._csrf=s.httpHeaders["x-csrf-token"];var t=[{title:"New Snapshot",icon:"icons/snap_add.png",click:function(){n._snapMenuButton._newSnap()}},{isSeparator:true},{title:"No Snapshot",click:function(){n._snapMenuButton._setSnap(null)}}];if(w){for(var y=0,u=w.length;y<u;y++){t.add({isSeparator:true});var v=w[y];var z=(n.snapId==v.bizId);var A={title:v.name,icon:"icons/snap.png",click:n._snapMenuButton.ID+"._setSnap('"+v.bizId+"','"+v.name+"','"+JSON.stringify(v.snapshot.criteria)+"','"+v.snapshot.advancedCriteriaStyle+"','"+v.snapshot.fieldState+"','"+v.snapshot.sortState+"','"+v.snapshot.groupState+"','"+v.snapshot.summaryType+"')",submenu:[{title:"Update Snapshot"+(z?"":" (Select the Snapshot first)"),icon:"icons/snap_edit.png",click:n._snapMenuButton.ID+"._updateSnap('"+v.bizId+"')",enabled:z},{title:"Delete Snapshot",icon:"icons/snap_delete.png",click:n._snapMenuButton.ID+"._deleteSnap('"+v.bizId+"')"}]};t.add(A)}}n._snapMenu.setData(t)}}});this.Super("click",arguments)}});n._snapMenuButton._newSnap=function(){isc.askForValue("Enter the new Snapshot name",function(r){if(r){isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:{a:"N",n:r,d:n._dataSource.ID,_csrf:n._csrf,s:{criteria:n._advancedFilter.toggleButton.selected?n._advancedFilter.getCriteria():n.grid.getFilterEditorCriteria(true),advancedCriteriaStyle:n._advancedFilter.getStyle(),fieldState:n.grid.getFieldState(),sortState:n.grid.getSortState(),groupState:n.grid.getGroupState(),summaryType:n.summaryType}},actionURL:SKYVE.Util.CONTEXT_URL+"smartsnap",callback:function(u,t,s){if(u.status>=0){n._csrf=u.httpHeaders["x-csrf-token"];n.snapId=t.bizId;n._snapMenuButton.setTitle(r)}}})}},{width:300})};n._snapMenuButton._setSnap=function(v,w,y,t,u,s,r,x){n.snapId=v;n._snapMenuButton.setTitle(w?w:"No Snapshot");y=y?JSON.parse(y):{};if(y.operator){n._advancedFilter.toggleButton.select();n._advancedFilter.toggleButtonClick();n._advancedFilter.setStyle(t?t:"radio");n.grid.setFilterEditorCriteria({});n._advancedFilter.setCriteria(y)}else{n._advancedFilter.clearCriteria();n._advancedFilter.toggleButton.deselect();n._advancedFilter.toggleButtonClick();n.grid.setFilterEditorCriteria({});n.grid.setFilterEditorCriteria(y);n.grid.setCriteria({});n.grid.setFilterEditorCriteria(y)}n.grid.setFieldState(u?u:null);n.grid.setSortState(s?s:null);n.grid.setGroupState(r?s:null);n.summaryType=x?x:"";n._summaryGrid.data[0].bizFlagComment=n.summaryType;n.refresh()};n._snapMenuButton._updateSnap=function(r){isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:{a:"U",i:r,_csrf:n._csrf,s:{criteria:n._advancedFilter.toggleButton.selected?n._advancedFilter.getCriteria():n.grid.getFilterEditorCriteria(true),advancedCriteriaStyle:n._advancedFilter.getStyle(),fieldState:n.grid.getFieldState(),sortState:n.grid.getSortState(),groupState:n.grid.getGroupState(),summaryType:n.summaryType}},actionURL:SKYVE.Util.CONTEXT_URL+"smartsnap",callback:function(u,t,s){if(u.status>=0){n._csrf=u.httpHeaders["x-csrf-token"]}}})};n._snapMenuButton._deleteSnap=function(r){isc.ask("Do you want to delete this Snapshot?",function(s){if(s){isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:{a:"D",i:r,_csrf:n._csrf},actionURL:SKYVE.Util.CONTEXT_URL+"smartsnap",callback:function(v,u,t){if(v.status>=0){n._csrf=v.httpHeaders["x-csrf-token"];if(n.snapId==r){n._snapMenuButton._setSnap(null)}}}})}})};n._clearSnap=function(){n.snapId=null;n._snapMenuButton.setTitle("No Snapshot")};n._tagsMenu=isc.Menu.create({showShadow:true,shadowDepth:10,canSelectParentItems:true,data:[]});n._tagsMenuButton=isc.ToolStripMenuButton.create({autoFit:true,padding:3,title:"No Tag",menu:n._tagsMenu,click:function(){var r={a:"L",ID:n._tagsMenuButton.ID,_csrf:n._csrf};if(n.tagId){r.t=n.tagId}isc.RPCManager.sendRequest({showPrompt:false,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:r,actionURL:SKYVE.Util.CONTEXT_URL+"smarttag",callback:function(u,t,s){if(u.status>=0){n._csrf=u.httpHeaders["x-csrf-token"];n._tagsMenu.setData(t)}}});this.Super("click",arguments)}});n._tagsMenuButton.newTag=function(){isc.askForValue("Enter the new tag name",function(r){if(r){isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:{a:"N",n:r,ID:n._tagsMenuButton.ID,_csrf:n._csrf},actionURL:SKYVE.Util.CONTEXT_URL+"smarttag",callback:function(u,t,s){if(u.status>=0){n._csrf=u.httpHeaders["x-csrf-token"];n.tagId=t.bizId;n._tagsMenuButton.setTitle(r);n.refresh()}}})}},{width:300})};n._tagsMenuButton.setTag=function(r,s){n.tagId=r;n._tagsMenuButton.setTitle(s);n.refresh()};n._tagsMenuButton.tagOp=function(r,t){if(t=="C"){isc.ask("Do you want to clear all tagged data from this tag?",function(u){if(u){i(r,t)}})}else{if(t=="D"){isc.ask("Do you want to delete this tag?",function(u){if(u){i(r,t)}})}else{if((t=="T")||(t=="U")){var s=n.grid.getTotalRows();if(s>10000){isc.ask("There are "+s+" rows in this list to "+((t=="U")?"un":"")+"tag which could take more than 1 minute!  Do you want to continue?",function(u){if(u){i(r,t)}})}else{if(s>1000){isc.ask("There are "+s+" rows to "+((t=="U")?"un":"")+"tag which may take a few seconds.  Do you want to continue?",function(u){if(u){i(r,t)}})}else{i(r,t)}}}else{i(r,t)}}}};var i=function(r,s){var t={a:s,t:r,_csrf:n._csrf};if(s=="T"||s=="U"){t.d=n._dataSource.ID;var u=g();t.c=u;if(n._view){t._c=n._view.gather(false)._c}}isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:t,actionURL:SKYVE.Util.CONTEXT_URL+"smarttag",callback:function(x,w,v){if(x.status>=0){n._csrf=x.httpHeaders["x-csrf-token"];if(s=="D"){n._tagsMenuButton.setTag(null,"No Tag")}n.refresh()}}})};var l=(c&&c.isPickList)?[n._pickButton]:[];if(n.showAdd){l.add(n._newButton)}if(n.showZoom){l.add(n._zoomButton);l.add(n._popoutButton)}if(n.showEdit){l.add(n._editButton)}if(n.showRemove){l.add(n.deleteSelectionButton)}if(l.length>0){l.add("separator")}if(n.showDeselect){l.add(isc.BizUtil.createImageButton(n.clearSelectionItem.icon,false,"<b>Deselect</b> all.",n.clearSelectionItem.click))}if(n.showFilter){if(n._config.isTree){}else{l.add(isc.BizUtil.createImageButton(q.icon,false,"<b>Clear filter</b> criteria.",q.click))}}l.add(isc.BizUtil.createImageButton(m.icon,false,"<b>Refresh</b> table data.",m.click));if(n.showFilter){if(n._config.isTree){}else{l.addList(["separator",n._advancedFilter.toggleButton])}}if(c&&c.isPickList){}else{if(n.showExport||n.showChart){l.add("separator");if(n.showExport){l.add(isc.BizUtil.createImageButton(o.icon,false,"<b>Export</b> table data.",o.click))}if(n.showChart){l.add(n._chartButton)}}if(n.showSnap){l.addList(["separator",isc.Label.create({width:60,contents:"Snapshot:"}),n._snapMenuButton])}if(n.showTag){l.addList(["separator",isc.Label.create({width:30,contents:"Tag:"}),n._tagsMenuButton])}}n._toolbar=isc.ToolStrip.create({membersMargin:2,layoutMargin:2,width:"100%",overflow:"hidden",members:l});n._summaryGrid=isc.ListGrid.create({editByCell:true,canEditCell:function(s,r){return(r==0)},rowClick:function(){this.selectRecord(0,false);return false},rowDoubleClick:function(){this.selectRecord(0,false);return false},rowContextClick:function(){this.selectRecord(0,false);return false},height:28,leaveScrollbarGap:true,autoFetchData:false,autoFitData:null,showHeader:false,showEmptyMessage:false,bodyOverflow:"hidden"});if(n._config.isRepeater){}else{n.addMember(n._toolbar);n.addMember(n._advancedFilter)}n.addMember(n.grid);if(n._config.isTree){}else{if(n._config.isRepeater){}else{n.addMember(n._summaryGrid);if(!n.showSummary){n.hideMember(n._summaryGrid)}}}n._flagForm=n._flagDialog.items[0];if(c&&c.name){var f=n._view._grids[c.name];if(f){}else{f={};n._view._grids[c.name]=f}f[n.getID()]=n}},hasDataSource:function(){return(this.grid!=null)},_createGrid:function(c,a,b){var d=this;var e={autoDraw:true,height:"*",minHeight:100,leaveScrollbarGap:true,autoFetchData:false,useAllDataSourceFields:true,showHeader:true,headerHeight:30,showFilterEditor:(d.showFilter&&(!d._config.isTree)&&(!d._config.isRepeater)&&(!d.aggregate)&&(!d._advancedFilter.toggleButton.selected)),canShowFilterEditor:false,filterByCell:false,selectionType:"single",alternateRecordStyles:true,canEdit:true,dataSource:d._dataSource,fields:a,editEvent:"none",neverValidate:false,validateByCell:true,saveByCell:false,validateOnChange:false,canHover:d._config.isRepeater?false:true,canReorderFields:false,autoSaveEdits:true,modalEditing:true,canFreezeFields:false,contextMenu:d._config.isRepeater?null:d._contextMenu,showRollOver:true,recordEnabledProperty:"_enabled",canExpandRecords:b,expansionMode:"details",rowClick:function(f,h,g){if(d.isRepeater){}else{if(f&&f.bizId){d._eventRecord=f;d._eventRowNum=h;d._eventColNum=g}}return this.Super("rowClick",arguments)},rowContextClick:function(f,h,g){if(d.isRepeater){}else{if(f&&f.bizId){this.deselectAllRecords();d._eventRecord=f;d._eventRowNum=h;d._eventColNum=g;this.selectSingleRecord(f);return true}}return false},rowDoubleClick:function(f,h,g){if(d.isRepeater){}else{if(f&&f.bizId){d._eventRecord=f;d._eventRowNum=h;d._eventColNum=g;if(c&&c.isPickList){d.pick(d._lookup)}else{if(d.showZoom&&d.canZoom&&(!d.aggregate)){if(d._view&&d._view._blurry){d._view._blurry=d._zoomItem}else{d._zoomItem.click()}}}}}return true},canSelectRecord:function(f){if(d.isRepeater){return false}return true},selectionChanged:function(f,h){if(this.anySelected()){var g=d.aggregate||(!d.canZoom);d._zoomButton.setDisabled(g);d._popoutButton.setDisabled(g||(c&&c.contConv));d._editButton.setDisabled(d._disabled||(!d.canUpdate)||(!d.canEdit));d._pickButton.setDisabled(d._disabled);d.deleteSelectionButton.setDisabled(d._disabled||(!d.canDelete)||(!d.canRemove))}else{d._zoomButton.setDisabled(true);d._popoutButton.setDisabled(true);d._editButton.setDisabled(true);d._pickButton.setDisabled(true);d.deleteSelectionButton.setDisabled(true)}d._newButton.setDisabled(d._disabled||(!d.canCreate)||(!d.canAdd))},selectionUpdated:function(g,f){if(d.selectedIdBinding){if(d.selectedIdTrackChanges){d._view._vm.setValue(d.selectedIdBinding,g?g.bizId:null)}else{var h=d._view._vm.valuesHaveChanged();d._view._vm.setValue(d.selectedIdBinding,g?g.bizId:null);if(h){}else{d._view._vm.rememberValues()}}}if(d.bizSelected){if(d.showZoom&&d.canZoom&&(!d.aggregate)){if(isc.RPCManager.requestsArePending()){if(d._view){d._view._blurry=null}}else{if(d._view){d._view._blurry=true}}d.delayCall("bizSelected",[],this.doubleClickDelay)}else{d.bizSelected()}}},editComplete:function(k,g,h,f,j,i){if(i.status>=0){d._csrf=i.httpHeaders["x-csrf-token"];if(d.bizEdited){d.bizEdited()}}},filterData:function(j,i,h){var f=j;if(f){}else{f={}}if(h){if(h.params){}else{h.params={}}}else{h={};h.params={}}if(d._csrf){h.params._csrf=d._csrf}if(c.isTree){}else{h.params._summary=d.summaryType}if(d.showTag){h.params._tagId=d.tagId}if(d._view){h.params._c=d._view.gather(false)._c;if(d._view._b){h.params._b=d._view._b}}if(c&&(c.contConv||c.isPickList)){h.params._cc=""}var g=d._advancedFilter.toggleButton.selected?d._advancedFilter.getCriteria():d.grid.getFilterEditorCriteria(true);if(g){}else{g={}}isc.BizUtil.convertFilterCriteria(f);if(c&&c.params){f=isc.BizUtil.completeFilterCriteria(g,c.params,d._view)}this.Super("filterData",[f,i,h]);if(d._advancedFilter.toggleButton.selected){}else{d.grid.setFilterEditorCriteria(g)}},dataProperties:{transformData:function(r,p){if(p.context&&(p.context.operationType=="fetch")&&(p.status==isc.RPCResponse.STATUS_SUCCESS)){d._csrf=p.httpHeaders["x-csrf-token"];var m=[{name:"bizFlagComment",type:"enum",valueMap:["","Count","Avg","Sum","Min","Max"],width:70,change:function(s,l,t,i){d.summaryType=t;d.grid.invalidateCache();d.grid.filterData(d._advancedFilter.toggleButton.selected?d._advancedFilter.getCriteria():d.grid.getFilterEditorCriteria(true))}}];var q=d._dataSource.getFieldNames(true);m.setLength(q.length-1);for(var j=0,g=q.length;j<g;j++){var o=q[j];if((o!="bizTagged")&&(o!="bizFlagComment")){var n=d._dataSource.getField(o);var k="float";var f=null;if((d.summaryType=="Min")||(d.summaryType=="Max")){k=n.type;if((k!="comboBox")&&(k!="enum")&&(k!="select")&&(k!="bizLookupDescription")&&(k!="boolean")){f=n.editorType}}m[j-1]={name:o,type:k,editorType:f,canEdit:false};if(k=="float"){m[j-1].formatCellValue=function(t,i,u,l,s){if(isc.isA.Boolean(t)){return null}return t}}}}d._summaryGrid.setFields(m);var h=r.pop();d._summaryGrid.setData([h]);d.grid.fieldStateChanged();d._summaryGrid.startEditing(0,0,true);d._summaryGrid.selectRecord(0,false)}return r}},canEditCell:function(g,f){return(!d._disabled)&&(f>(d.showTag?1:0))&&this.Super("canEditCell",arguments)},fieldStateChanged:function(){var f=d.getFieldState();if(d.showTag){f[1]={name:"bizFlagComment",width:f[0].width+f[1].width+(d.grid.canExpandRecords?32:0)}}else{f[1]={name:"bizFlagComment",width:f[1].width+(d.grid.canExpandRecords?32:0)}}f.removeAt(0);d._summaryGrid.setFieldState(f)},scrolled:function(){if(d._summaryGrid.body){d._summaryGrid.body.scrollTo(d.grid.body.getScrollLeft(),0)}},getCellCSSText:function(f,h,g){if(f){if(f.bizTagged){return"font-weight:bold;background-color:#B8D1EA;"}}return this.Super("getCellCSSText",arguments)}};if(c.isRepeater){e.showRollOver=false;e.showSelectedStyle=false;e.showEmptyMessage=false;e.baseStyle="";e.showHeader=true;if(c.showColumnHeaders){}else{e.showHeader=false}e.bodyBackgroundColor="white";if(c.showGrid){}else{e.border="none";e.bodyBackgroundColor="#F9F9F9"}}if(!d.autoPopulate){e.emptyMessage="No items shown. Filter the grid."}if(d.cellHeight){e.cellHeight=d.cellHeight}if(c.gridConfig){isc.addProperties(e,c.gridConfig)}if(c.isTree){e.folderIcon=null;e.loadOnDemand=true;e.dataProperties={openProperty:"_isOpen",isFolderProperty:"_isFolder",childrenProperty:"_children"};e.dataFetchMode="paged";d.grid=isc.TreeGrid.create(e)}else{d.grid=isc.ListGrid.create(e)}},setDisabled:function(a){this._disabled=a;if(this.grid){this.grid.selectionChanged()}},setLookup:function(c,b,a){this._lookup=c;this._config.params=b;this._view=a},refresh:function(){var a=this.grid.getVisibleRows()[0];this.grid.deselectAllRecords();this._eventRowNum=null;this._eventColumnNum=null;this._eventRecord=null;this.grid.invalidateCache();this.grid.filterData(this._advancedFilter.toggleButton.selected?this._advancedFilter.getCriteria():this.grid.getFilterEditorCriteria(true));this.grid.scrollToRow(a,"top")},rerender:function(){if(this.isPickList){this.refresh()}},setDataSource:function(e,c){var f=this;f._clearSnap();f._dataSource=isc.DataSource.get(e);f.canCreate=f._dataSource.canCreate;f.canUpdate=f._dataSource.canUpdate;f.canDelete=f._dataSource.canDelete;f.aggregate=f._dataSource.aggregate;if(f.aggregate){if(f._config.isRepeater){}else{f.hideMember(f._toolbar);if(f._config.isTree){}else{f.hideMember(f._summaryGrid)}}f.canCreate=false;f.canUpdate=false;f.canDelete=false}else{if(!f._config.isRepeater){f.showMember(f._toolbar);f._chartButton.setDisabled(f._config.isTree||f._dataSource.ID.contains("__"));if(!f._config.isTree){if((f.showSummary===undefined)||(f.showSummary==null)||f.showSummary){f.showMember(f._summaryGrid)}else{f.hideMember(f._summaryGrid)}}}}if(c){f.autoPopulate=true;if(c.autoPopulate!==undefined){f.autoPopulate=c.autoPopulate}}if(f._dataSource.cellHeight){f.cellHeight=f._dataSource.cellHeight}else{f.cellHeight=null}var d=[];if(f.isRepeater||f.aggregate){d.add({name:"bizTagged",hidden:true,canHide:false})}else{if(f.showTag){d.add({name:"bizTagged",width:38,align:"center",canHide:false,canSort:false,canToggle:false,canGroupBy:false,showHover:false,ignoreKeyboardClicks:true,recordClick:function(t,n,s,q,i,p,o,r){if(n){if(f.canUpdate&&f.canEdit){if(f.tagId){f._eventRecord=n;f._eventRowNum=s;f._eventColNum=i;if(n.bizTagged){n.bizTagged="UNTAG"}else{n.bizTagged="TAG"}f.grid.updateData(n,function(v,w,u){if(v.status>=0){f._csrf=v.httpHeaders["x-csrf-token"]}},{showPrompt:false,params:{_tagId:f.tagId,_csrf:f._csrf}})}else{isc.warn("Select or create a tag first from the tags menu in the list toolbar")}}}return false}})}else{d.add({name:"bizTagged",hidden:true,canHide:false})}}if(f.isRepeater||f.aggregate){d.add({name:"bizFlagComment",hidden:true,canHide:false})}else{d.add({name:"bizFlagComment",width:((!f.showTag)&&f.showSummary)?80:40,align:"center",canHide:false,ignoreKeyboardClicks:true,formatCellValue:function(p,i,q,n,o){if(p){return'<img src="images/flag.gif">'}else{return""}},recordClick:function(t,n,s,q,i,p,o,r){if(f.canUpdate&&f.canEdit){f._eventRecord=n;f._eventRowNum=s;f._eventColNum=i;f._flagForm.editRecord(n);f._flagDialog.show()}return false},hoverHTML:function(i,p,q,n,o){return i.bizFlagComment}})}var m=f._dataSource.getFieldNames(true);var g=false;var k=true;for(var b=0;b<m.length;b++){var j=m[b];if((j!="bizTagged")&&(j!="bizFlagComment")){var l=f._dataSource.getField(j);if(l.foreignKey){}else{var a={name:j,autoFitWidth:false,canToggle:false};if(k){a.treeField=true;k=false}if(l.canSave==false){a.canEdit=false}if((!g)&&l.detail){g=true}d.add(a)}}}f._advancedFilter.setDataSource(f._dataSource);f._flagForm.setDataSource(f._dataSource);f._flagForm.setFields([{name:"bizFlagComment",type:"richText",colSpan:2,height:175,validators:[{type:"lengthRange",min:0,max:1024,clientOnly:true}]},{type:"button",title:"Clear",width:100,align:"right",startRow:false,endRow:false,click:function(){var i=f._flagForm.getField("bizFlagComment");if(i.getValue()!=""){i.setValue("");f._flagForm.saveData(function(o,p,n){if(o.status>=0){f._csrf=o.httpHeaders["x-csrf-token"];f._flagForm.reset();f._flagDialog.hide()}},{params:{_csrf:f._csrf}})}}},{type:"button",title:"Flag",width:100,align:"left",startRow:false,endRow:true,click:function(){if(f._flagForm.validate(true)){f._flagForm.saveData(function(n,o,i){if(n.status>=0){f._csrf=n.httpHeaders["x-csrf-token"];f._flagForm.reset();f._flagDialog.hide()}},{params:{_csrf:f._csrf}})}}}]);if(f.grid){f.removeMember(f.grid);f.grid.destroy()}f._createGrid(f._config,d,g);if(f._config.isTree||f._config.isRepeater){f.addMember(f.grid)}else{f.addMember(f.grid,f.getMembers().length-1)}if(f.rootIdBinding){f.grid.getDataSource().getField("bizParentId").rootValue="_"+f._view._vm.getValue(f.rootIdBinding)}else{var h=f.grid.getDataSource().getField("bizParentId");if(h){h.rootValue=null}}if(f.autoPopulate){f.grid.filterData(f._advancedFilter.toggleButton.selected?f._advancedFilter.getCriteria():f.grid.getFilterEditorCriteria())}f.grid.selectionChanged(null,false);return f._dataSource.getTitle()},getFieldState:function(){var fieldState=eval(this.grid.getFieldState());for(var i=0,l=fieldState.length;i<l;i++){if(fieldState[i]=="bizTagged"){fieldState[i]={name:"bizTagged",width:38}}else{if(fieldState[i]=="bizFlagComment"){fieldState[i]={name:"bizFlagComment",width:this.showTag?40:80}}else{if(fieldState[i].width){continue}else{fieldState[i].width=this.grid.getFieldWidth(fieldState[i].name)}}}}if(this.grid.filterEditor){this.grid.filterEditor.setFieldState(fieldState)}return fieldState},zoom:function(h,d,e){var f=this;var c=null;var g=null;var i=null;if((!h)&&f._eventRecord){c=f._eventRecord.bizModule;g=f._eventRecord.bizDocument;i=f._eventRecord.bizId}else{var b=this.grid.dataSource.modoc.indexOf(".");c=this.grid.dataSource.modoc.substring(0,b);g=this.grid.dataSource.modoc.substring(b+1)}var a=f.grid.body.getPageRect();isc.BizUtil.getEditView(c,g,function(k){if(f._view){var j=f._view.gather(false);if(d){f._view._source=f._dataSource.ID.substring(f._dataSource.ID.lastIndexOf("_")+1);f._zoom(h,k,e,i,j._c,a)}else{if(j._apply||f._view._vm.valuesHaveChanged()){delete j._apply;f._view.saveInstance(true,null,function(){f._view._source=f._dataSource.ID.substring(f._dataSource.ID.lastIndexOf("_")+1);f._zoom(h,k,e,i,null,a)})}else{f._view._source=f._dataSource.ID.substring(f._dataSource.ID.lastIndexOf("_")+1);f._zoom(h,k,e,i,null,a)}}}else{f._zoom(h,k,e,i,null,a)}})},_zoom:function(a,b,g,f,c,d){if(a){isc.WindowStack.popup(d,"New",true,[b]);b.newInstance(g,null,c)}else{var e=[d[0],this.grid.body.getRowPageTop(this._eventRowNum),d[2],this.grid.body.getRowSize(this._eventRowNum)];isc.WindowStack.popup(e,"Edit",true,[b]);b.editInstance(f,null,c)}},pick:function(a){if(this._eventRecord){a.setValueMapFromPickList(this._eventRecord);a.setValue(this._eventRecord.bizId);a.bizPicked(a.form,a,this._eventRecord.bizId)}isc.WindowStack.popoff(false);if(this._eventRecord){if(a.changedForServer){a.changedForServer(a.form,a,this._eventRecord.bizId)}this._eventRecord=null}}});isc.ClassFactory.defineClass("BizDataGrid","BizGrid");isc.BizDataGrid.addProperties({_newButton:null,_zoomButton:null,_popoutButton:null,_editButton:null,showAdd:true,showZoom:true,showEdit:true,showRemove:true,showDeselect:true,_mod:null,_doc:null,_b:null,_ordinal:null});isc.BizDataGrid.addMethods({initWidget:function(a){this.Super("initWidget",arguments);var g=this;var d={title:"New",icon:"icons/new.png",enableIf:function(j,k,i){return((!g._disabled)&&g.canCreate&&g.canAdd)},click:function(){if(a.inline){g.add()}else{g.zoom(true)}}};g._zoomItem={title:"Zoom",icon:"icons/zoom.gif",click:function(){g.zoom(false)},enableIf:function(j,k,i){return(g.canZoom&&g.grid.anySelected())}};var c={title:"Edit",icon:"icons/edit.png",enableIf:function(j,k,i){return((!g._disabled)&&g.canUpdate&&g.canEdit&&g.grid.anySelected())},click:function(){if(g.grid.anySelected()){g.grid.startEditing(g._eventRowNum,g._eventColNum)}}};g._newButton=isc.BizUtil.createImageButton(d.icon,true,"<b>New</b> record.",d.click);g._zoomButton=isc.BizUtil.createImageButton(g._zoomItem.icon,true,"<b>Zoom</b> into record.",g._zoomItem.click);g._zoomButton.setDisabled(true);g._editButton=isc.BizUtil.createImageButton(c.icon,true,"<b>Edit</b> a record inline.",c.click);g._editButton.setDisabled(true);var e=[];if(a.editable){if(g.showAdd){e.add(d)}if(g.showZoom){e.add(g._zoomItem)}if(g.showEdit){e.add(c)}if(g.showRemove){e.add(this.deleteSelectionItem)}if(g.showDeselect){if(e.length>0){e.add({isSeparator:true})}e.add(this.clearSelectionItem)}}var b=isc.Menu.create({showShadow:true,shadowDepth:10,data:e});this._createGrid(a,this._fields,b);var f=g._view._grids[g._b];if(f){}else{f={};g._view._grids[g._b]=f}f[g.getID()]=g;if(a.editable){if(a.isRepeater){}else{var h=[];if(g.showAdd){h.add(g._newButton)}if(g.showZoom){h.add(g._zoomButton)}if(g.showEdit){h.add(g._editButton)}if(g.showRemove){h.add(g.deleteSelectionButton)}if(g.showDeselect){if(h.length>0){h.add("separator")}h.add(isc.BizUtil.createImageButton(g.clearSelectionItem.icon,false,"<b>Deselect</b> all.",g.clearSelectionItem.click))}if(h.length>0){g.addMember(isc.ToolStrip.create({membersMargin:2,layoutMargin:2,width:"100%",members:h}))}}}if(g.getMembersLength()==0){g.grid.setMinHeight(g.minHeight)}g.addMember(g.grid)},_createGrid:function(b,a,c){var d=this;var e=true;if(d.isRepeater){if(d.showColumnHeaders){}else{e=false}}var f={height:"*",minHeight:100,autoFetchData:false,showHeader:e,headerHeight:30,showFilterEditor:false,defaultFilterOperator:"iContains",showRollOver:(!d.isRepeater),showSelectedStyle:(!d.isRepeater),showEmptyMessage:(!d.isRepeater),baseStyle:d.isRepeater?"":null,border:d.isRepeater?(d.showGrid?null:"none"):null,bodyBackgroundColor:d.isRepeater?(d.showGrid?"white":"#F9F9F9"):"white",fields:d._fields,selectionType:"single",alternateRecordStyles:true,canEdit:d.canUpdate&&d.canEdit,editEvent:"none",neverValidate:false,validateByCell:true,saveByCell:false,validateOnChange:false,recordEnabledProperty:"_enabled",canHover:d.isRepeater?false:true,wrapCells:d.wordWrap?true:false,fixedRecordHeights:d.wordWrap?false:true,canReorderFields:false,canSort:(b._ordinal?false:true),canGroupBy:(b._ordinal?false:true),canReorderRecords:(b._ordinal?((b.canUpdate&&d.canEdit)?true:false):false),recordsDropped:function(j,h,i,g){this.reorderData()},reorderData:function(){if(b._ordinal){var j=this.getData();for(var h=0,g=j.length;h<g;h++){j[h][b._ordinal]=h+1}}},dragDataAction:"move",autoSaveEdits:true,modalEditing:true,canFreezeFields:false,contextMenu:d.isRepeater?null:c,showRollOver:true,rowClick:function(g,i,h){if(g&&g.bizId){d._eventRecord=g;d._eventRowNum=i;d._eventColNum=h}return this.Super("rowClick",arguments)},rowContextClick:function(g,i,h){if(g&&g.bizId){this.deselectAllRecords();d._eventRecord=g;d._eventRowNum=i;d._eventColNum=h;this.selectSingleRecord(g);return true}return false},rowDoubleClick:function(g,i,h){if(b.editable){if((!g)||g.isFolder){}else{d._eventRecord=g;d._eventRowNum=i;d._eventColNum=h;if(b.inline){if(d.canUpdate&&d.canEdit&&d.showEdit&&(!d._disabled)){this.startEditing(i,h,false)}}else{if(d.canZoom&&d.showZoom){if(d._view._blurry){d._view._blurry=d._zoomItem}else{d._zoomItem.click()}}}}}return this.Super("rowDoubleClick",arguments)},selectionChanged:function(g,h){if(this.anySelected()){d._zoomButton.setDisabled(!d.canZoom);d._editButton.setDisabled(d._disabled||(!d.canUpdate)||(!d.canEdit));d.deleteSelectionButton.setDisabled(d._disabled||(!d.canDelete)||(!d.canRemove))}else{d._zoomButton.setDisabled(true);d._editButton.setDisabled(true);d.deleteSelectionButton.setDisabled(true)}d._newButton.setDisabled(d._disabled||(!d.canCreate)||(!d.canAdd))},selectionUpdated:function(h,g){if(d.selectedIdBinding){if(d.selectedIdTrackChanges){d._view._vm.setValue(d.selectedIdBinding,h?h.bizId:null)}else{var i=d._view._vm.valuesHaveChanged();d._view._vm.setValue(d.selectedIdBinding,h?h.bizId:null);if(i){}else{d._view._vm.rememberValues()}}}if(d.bizSelected){if(d.showZoom&&d.canZoom&&b.editable){if(isc.RPCManager.requestsArePending()){d._view._blurry=null}else{d._view._blurry=true}d.delayCall("bizSelected",[],this.doubleClickDelay)}else{d.bizSelected()}}},canEditCell:function(h,g){return(!d._disabled)&&this.Super("canEditCell",arguments)},editComplete:function(k,h,i,g,j){d._view._vm.setValue("_changed",true);d._view._vm.setValue("_apply",true);if(d.bizEdited){d.bizEdited()}}};if(b.gridConfig){isc.addProperties(f,b.gridConfig)}d.grid=isc.ListGrid.create(f)},setDisabled:function(a){this._disabled=a;if(this.grid){this.grid.selectionChanged()}},zoom:function(a){var c=this;var b=(this._eventRecord?this._eventRecord.bizModule:this._mod);var d=(this._eventRecord?this._eventRecord.bizDocument:this._doc);isc.BizUtil.getEditView(b,d,function(f){var k=((c._view._b)?c._view._b+"."+c._b:c._b);var i=(a?null:c._eventRecord.bizId);var e=c._view.gather(true);if(e){var h=c.grid.body.getPageRect();var g=c.grid.body.getRowPageTop(c._eventRowNum);var j=c.grid.body.getRowSize(c._eventRowNum);if(e._apply||c._view._vm.valuesHaveChanged()){delete e._apply;c._view.saveInstance(true,null,function(){c._zoom(a,i,k,f,e._c,h,g,j)})}else{c._zoom(a,i,k,f,e._c,h,g,j)}}else{isc.warn("You cannot zoom in until you fix the problems found")}})},_zoom:function(h,d,i,g,f,b,c,a){if(h){isc.WindowStack.popup(b,"New",false,[g])}else{var e=[b[0],c,b[2],a];isc.WindowStack.popup(e,"Edit",false,[g])}g.editInstance(d,i,f,true)},add:function(){this.grid.startEditingNew({bizId:null})},remove:function(a){var b=this.grid.data;b.removeAt(b.findIndex("bizId",a));this.grid.deselectAllRecords();this._eventRowNum=null;this._eventColumnNum=null;this._eventRecord=null}});isc.defineClass("ListView");isc.ListView.addClassProperties({_heading:isc.HTMLFlow.create(),contents:isc.VLayout.create({width:"100%",height:"100%",overflow:"auto",membersMargin:2,layoutMargin:2,margin:2,rerender:function(){if(isc.ListView._grid&&isc.ListView._grid.isVisible()){isc.ListView._grid.refresh()}else{if(isc.ListView._calendar&&isc.ListView._calendar.isVisible()){isc.ListView._calendar.refresh()}else{if(isc.ListView._tree&&isc.ListView._tree.isVisible()){isc.ListView._tree.refresh()}else{if(isc.ListView._map&&isc.ListView._map.isVisible()){isc.ListView._map.rerender()}}}}},resume:function(){if(isc.ListView._grid&&isc.ListView._grid.isVisible()){}else{if(isc.ListView._calendar&&isc.ListView._calendar.isVisible()){}else{if(isc.ListView._tree&&isc.ListView._tree.isVisible()){}else{if(isc.ListView._map&&isc.ListView._map.isVisible()){isc.ListView._map.resume()}}}}}}),_grid:null,_calendar:null,_tree:null,_map:null,_portal:isc.PortalLayout.create({width:"100%",height:"100%",getDropPortlet:function(g,c,h,e){if(g.isA("TreeGrid")&&g.getID().endsWith("Tree")){var f=g.getDragData()[0];var i=isc.Portlet.create({title:f.desc,items:[]});if(f.ref=="edit"){isc.BizUtil.getEditView(g.data.root.name,f.name,function(k){i.addItem(k);k.newInstance(null,null,null,null,function(){k.hideMember(k._heading)})})}else{if(f.ref=="grid"){var a=isc.BizUtil.createListGrid();i.addItem(a);a.setDataSource(g.data.root.name+"_"+f.name,f.config)}else{if(f.ref=="cal"){var d=isc.BizUtil.createCalendar();i.addItem(d);d.setDataSource(g.data.root.name+"_"+f.name)}else{if(f.ref=="tree"){var j=isc.BizUtil.createTreeGrid();i.addItem(j);j.setDataSource(g.data.root.name+"_"+f.name,f.config)}else{if(f.ref=="map"){var b=isc.BizUtil.createMap();i.addItem(b);b.setDataSource(g.data.root.name+"_"+f.name)}else{alert("Menu ref of "+f.ref+"is unknown")}}}}}return i}else{return this.Super("getDropPortlet",arguments)}}}),_setHeading:function(d,b,c,f){var a="";if(b){a='<img style="width:32px;height:32px" src="resources?_doc='+f+"&_n="+b+"&v="+SKYVE.Util.v+'"/>'}else{if(c){a='<i style="padding-left:5px;font-size:28px;width:32px !important" class="titleBar bizhubFontIcon '+c+'"></i>'}}var e=isc.BizUtil.headerTemplate;e=e.replace("{icon}",a).replace("{title}",d).replace("{link}","");isc.ListView._heading.setContents(e)},setGridDataSource:function(ID,menuConfig){if(isc.ListView._grid){}else{isc.ListView._grid=isc.BizUtil.createListGrid();isc.ListView.contents.addMember(isc.ListView._grid)}if(isc.ListView._calendar){isc.ListView.contents.hideMember(isc.ListView._calendar)}if(isc.ListView._tree){isc.ListView.contents.hideMember(isc.ListView._tree)}if(isc.ListView._map){isc.ListView.contents.hideMember(isc.ListView._map)}isc.ListView.contents.hideMember(isc.ListView._portal);isc.ListView.contents.showMember(isc.ListView._grid);var ds=eval(ID);var title=isc.ListView._grid.setDataSource(ds,menuConfig);isc.ListView._setHeading(title,ds.icon,ds.fontIcon,ds.modoc)},setCalendarDataSource:function(ID,menuConfig){if(isc.ListView._calendar){}else{isc.ListView._calendar=isc.BizUtil.createCalendar();isc.ListView.contents.addMember(isc.ListView._calendar)}if(isc.ListView._grid){isc.ListView.contents.hideMember(isc.ListView._grid)}if(isc.ListView._tree){isc.ListView.contents.hideMember(isc.ListView._tree)}if(isc.ListView._map){isc.ListView.contents.hideMember(isc.ListView._map)}isc.ListView.contents.hideMember(isc.ListView._portal);isc.ListView.contents.showMember(isc.ListView._calendar);var ds=eval(ID);isc.ListView._calendar.setDataSource(ds);isc.ListView._setHeading("NOT IMPLEMENTED",ds.icon,ds.fontIcon,ds.modoc)},setTreeDataSource:function(ID,menuConfig){if(isc.ListView._tree){}else{isc.ListView._tree=isc.BizUtil.createTreeGrid();isc.ListView.contents.addMember(isc.ListView._tree)}if(isc.ListView._grid){isc.ListView.contents.hideMember(isc.ListView._grid)}if(isc.ListView._calendar){isc.ListView.contents.hideMember(isc.ListView._calendar)}if(isc.ListView._map){isc.ListView.contents.hideMember(isc.ListView._map)}isc.ListView.contents.hideMember(isc.ListView._portal);isc.ListView.contents.showMember(isc.ListView._tree);var ds=eval(ID);var title=isc.ListView._tree.setDataSource(ds,menuConfig);isc.ListView._setHeading(title,ds.icon,ds.fontIcon,ds.modoc)},setMapDataSource:function(a,b){if(isc.ListView._map){}else{isc.ListView._map=isc.BizUtil.createMap();isc.ListView.contents.addMember(isc.ListView._map)}if(isc.ListView._grid){isc.ListView.contents.hideMember(isc.ListView._grid)}if(isc.ListView._calendar){isc.ListView.contents.hideMember(isc.ListView._calendar)}if(isc.ListView._tree){isc.ListView.contents.hideMember(isc.ListView._tree)}isc.ListView.contents.hideMember(isc.ListView._portal);isc.ListView.contents.showMember(isc.ListView._map);isc.ListView._map.setDataSource(a);isc.ListView._setHeading("MAP","shared/icons/Home.png","fa-solid fa-globe fa-2x","")},showPortal:function(){if(isc.ListView._grid){isc.ListView.contents.hideMember(isc.ListView._grid)}if(isc.ListView._calendar){isc.ListView.contents.hideMember(isc.ListView._calendar)}if(isc.ListView._tree){isc.ListView.contents.hideMember(isc.ListView._tree)}if(isc.ListView._map){isc.ListView.contents.hideMember(isc.ListView._map)}isc.ListView.contents.showMember(isc.ListView._portal);isc.ListView._setHeading("DASHBOARD","shared/icons/Home.png","fa-solid fa-house fa-2x","")}});isc.ListView.contents.addMember(isc.ListView._heading);isc.ListView.contents.addMember(isc.ListView._portal);isc.ListView.contents.hideMember(isc.ListView._portal);isc.ClassFactory.defineClass("BizContainer","VLayout");isc.BizContainer.addMethods({initWidget:function(){this.backgroundImage="background.png";this.backgroundRepeat="repeat";this.Super("initWidget",arguments);this.contained=[]},addContained:function(a){this.contained.add(a);this.addMember(a)},removeContained:function(a){this.contained.remove(a);this.removeMember(a)}});isc.ClassFactory.defineClass("EditView","BizContainer");isc.EditView.addClassProperties({_DATA_SOURCE:isc.RestDataSource.create({dataFormat:"json",jsonPrefix:"",jsonSuffix:"",dataURL:"smartedit",sendExtraFields:false})});isc.EditView.addMethods({initWidget:function(){this.overflow="hidden";this.membersMargin=2;this.layoutMargin=2;this.margin=2;this._grids={};this._refreshedGrids={};this.Super("initWidget",arguments);this._heading=isc.HTMLFlow.create();this.addMember(this._heading);this._actionPanel=isc.ToolStrip.create({layoutMargin:2,membersMargin:5,width:"100%"});this.addMember(this._actionPanel);this._editPanel=isc.BizContainer.create({layoutMargin:2,membersMargin:10,overflow:"auto"});this.addMember(this._editPanel);var a=this;this._vm=isc.ValuesManager.create({dataSource:isc.EditView._DATA_SOURCE,handleHiddenValidationErrors:function(o){var e=[];for(var h in o){var q=o[h];var j=h.split("__");if(j.length==2){var p=j[0].lastIndexOf("_");if(p>-1){var k=j[0].substring(0,p);var d=a._grids[k];if(d){var n=parseInt(j[0].substring(p+1));if(isc.isA.Number(n)){for(var g in d){var b=d[g];if(b){if(b.grid){b.grid.setFieldError(n,j[1],q);b.grid.markForRedraw()}}}}}}}if(!e.contains(q)){e.add(q)}}if(e.length>0){var m="<ul>";for(var f=0,c=e.length;f<c;f++){m+="<li>"+e[f]+"</li>"}m+="</ul>";isc.warn(m,null,{title:"Problems"})}return false},saveEditorValues:function(c,b,e,d){d.oldValues=null;this.Super("saveEditorValues",arguments)}})},addContained:function(a){this._editPanel.addContained(a)},addEditAction:function(a){a.forCreate=false;this._actionPanel.addMember(a)},addCreateAction:function(a){a.forCreate=true;this._actionPanel.addMember(a)},addAction:function(a){a.forCreate=null;this._actionPanel.addMember(a)},toDisplay:function(expression,instance){if(expression){var tokens=expression.match(/\{[A-Za-z0-9._]+\}/g);if(tokens){for(var i=0;i<tokens.length;i++){var token=tokens[i];var binding=token.substring(1,token.length-1).replaceAll(".","_");var evaluation=eval("instance."+binding);if("undefined"===typeof(evaluation)){evaluation=""}else{if((evaluation==null)||(evaluation=="null")||(evaluation=="undefined")){evaluation=""}else{if(evaluation.toDateStamp){evaluation=evaluation.toDateStamp();evaluation=evaluation.substring(0,4)+"-"+evaluation.substring(4,6)+"-"+evaluation.substring(6,11)+":"+evaluation.substring(11,13)+":"+evaluation.substring(13,15)+".000"}else{if(evaluation.toString){evaluation=evaluation.toString()}}}}expression=expression.replace(token,evaluation)}}}return expression},rerender:function(){var a=this.gather(false);if(a){this._editInstance("ZoomOut",a.bizId,this._b,a._c,this._openedFromDataGrid)}},resume:function(){for(var b in this._grids){var d=this._grids[b];for(var a in d){var c=d[a];if(c.webmap){c.resume()}}}},newInstance:function(d,a,e,h,b){this._openedFromDataGrid=h;if(this._vm.members){this.hide();this._b=a;var g=this;var c={_mod:this._mod,_doc:this._doc,_ecnt:this._ecnt,_ccnt:this._ccnt};if(this._csrf){c._csrf=this._csrf}if(a){c._b=a}if(e){c._c=e}if(d){for(var f in d){var i=d[f];c[f]=i}}this._vm.fetchData(null,function(l,m,k){var j={};if(l.status>=0){g._csrf=l.httpHeaders["x-csrf-token"];g._vm.setSaveOperationType("add");j=m[0];g.scatter(j);if(h){g._b+="ElementById("+i.bizId+")"}if(b){b(m)}}else{if(l.status==-1){isc.warn(m,null,{title:"Problems"})}}g.show();g.refreshListGrids(true,true,j);if(g.opened){g.opened(m)}},{httpMethod:"POST",params:c,willHandleError:true})}},editInstance:function(c,e,b,d,a){this._saved=false;this._editInstance(null,c,e,b,d,a)},_editInstance:function(e,d,h,b,g,a){this._openedFromDataGrid=g;if(this._vm.members){this.hide();this._b=h;var f={bizId:d,_mod:this._mod,_doc:this._doc,_ecnt:this._ecnt,_ccnt:this._ccnt};if(this._csrf){f._csrf=this._csrf}if(e){f._a=e}if(h){f._b=h}if(b){f._c=b}if(this._source){f._s=this._source;this._source=null}var c=this;this._vm.fetchData(null,function(l,m,j){var i={};if(l.status>=0){c._csrf=l.httpHeaders["x-csrf-token"];i=m[0];c.scatter(i);if(g){if(c._b.endsWith(")")){}else{c._b+="ElementById("+i.bizId+")"}}if(a){a(m)}}else{if(l.status==-1){isc.warn(m,null,{title:"Problems"})}}if(e=="ZoomOut"){var k=c._vm.valuesHaveChanged();c._vm.setValue("_apply",true);if(k){}else{c._vm.rememberValues()}}else{if(d){}else{var k=c._vm.valuesHaveChanged();c._vm.setValue("_apply",true);if(k){}else{c._vm.rememberValues()}}}c.show();c.refreshListGrids(true,(!e),i);if(c.opened){c.opened(m)}},{httpMethod:"POST",params:f,willHandleError:true})}else{this._source=null}},rerenderAction:function(b,a){this._source=a;this.saveInstance(b,null);this._saved=true},rerenderBlurryAction:function(b,a){this.delayCall("_rerenderBlurryAction",[b,a],100)},_rerenderBlurryAction:function(c,b){this._source=b;var a=this;this.saveInstance(c,null,function(){if(a._blurry){var d=a._blurry;a._blurry=null;if(d.action){d.delayCall("action")}else{if(d.click){d.click()}}}});this._saved=true},saveInstance:function(g,e,b){var a=this.gather(g);if(a){var c=a._c;delete a._c;var f={_mod:this._mod,_doc:this._doc,_ecnt:this._ecnt,_ccnt:this._ccnt,bean:a,bizId:a.bizId,_c:c};if(this._csrf){f._csrf=this._csrf}if(e){f._a=e;if(e=="_PUSH"){e=null}}if(this._b){f._b=this._b}if(this._source){f._s=this._source;this._source=null}var d=this;this._vm.disableValidation=true;this._vm.saveData(function(q,j,m){if(q.status>=0){d._csrf=q.httpHeaders["x-csrf-token"];var l=null;var n=isc.WindowStack.getOpener();if(e=="ZoomOut"){var p=n.gather(false);p._c=j._c;var o=d._b;var k=o.lastIndexOf(".");if(k>=0){o=o.substring(k+1)}if(o.endsWith(")")){var k=o.lastIndexOf("ElementById");if(k>=0){o=o.substring(0,k)}}var i=n._b;if(i&&i.endsWith(")")){var k=i.lastIndexOf("ElementById");if(k>=0){i=i.substring(0,k)}}var h=p[o];n._source=o;if(isc.isAn.Array(h)){isc.WindowStack.popoff(true);n._source=null;return}else{p[o]=j.bizId;l=n._vm.getItem(o);if(l){if(a.bizId){l.bizEdited(l.form,l,j.bizId)}else{l.bizAdded(l.form,l,j.bizId)}}}n._vm.setValues(p);delete j._c;delete j._title}if(e){if(e=="Save"){d._saved=true;d.scatter(j);d.refreshListGrids(true,false,j)}else{if(l){if(a.bizId){if(l.bizEditedForServer){isc.WindowStack.popoff(false);l.bizEditedForServer(l.form,l,j.bizId);n._source=null}else{isc.WindowStack.popoff(true);n._source=null}}else{if(l.bizAddedForServer){isc.WindowStack.popoff(false);l.bizAddedForServer(l.form,l,j.bizId);n._source=null}else{isc.WindowStack.popoff(true);n._source=null}}}else{isc.WindowStack.popoff(true);n._source=null}}}else{d.scatter(j);d.refreshListGrids(true,false,j)}if(b){b(j)}}else{if(q.status==-1){isc.warn(j,null,{title:"Problems"})}}},{params:f,willHandleError:true});this._vm.disableValidation=false}else{this._source=null}},deleteInstance:function(f,b){var a=this.gather(f);if(a){var c=a._c;delete a._c;var e={_mod:this._mod,_doc:this._doc,_c:c};if(this._csrf){e._csrf=this._csrf}var d=this;isc.EditView._DATA_SOURCE.removeData(a,function(h,i,g){if(h.status>=0){d._csrf=h.httpHeaders["x-csrf-token"];isc.WindowStack.popoff(true);if(b){b(i)}}else{if(h.status==-1){isc.warn(i,null,{title:"Problems"})}}},{params:e,willHandleError:true})}},doAction:function(e,j,i,f,b,g,c){var k=this.gather(j);if(k){var a=k._c;delete k._c;var d={_mod:(f?f:this._mod),_doc:(b?b:this._doc),_ecnt:this._ecnt,_ccnt:this._ccnt,bean:k,bizId:(g?g:k.bizId),_c:a};if(this._csrf){d._csrf=this._csrf}if(e){d._a=e}if(this._b){d._b=this._b}if(i){d._g=i}var h=this;this._vm.disableValidation=true;this._vm.saveData(function(m,n,l){if(m.status>=0){h._csrf=m.httpHeaders["x-csrf-token"];h._saved=true;h.scatter(n);h.refreshListGrids(true,false,n);if(c){c(n)}if(n._redirectUrl){window.location.assign(n._redirectUrl)}}else{if(m.status==-1){isc.warn(n,null,{title:"Problems"})}}return true},{params:d,willHandleError:true});this._vm.disableValidation=false}},doBlurryAction:function(a,b){this.delayCall("_doBlurryAction",[a,b],100)},_doBlurryAction:function(b,c){var a=this;this.doAction(b,c,null,null,null,null,function(){if(a._blurry){var d=a._blurry;a._blurry=null;if(d.action){d.delayCall("action")}else{if(d.click){d.click()}}}})},scatter:function(Q){this._vm.clearErrors(true);this._vm.clearValues();var b="";if(Q.persisted){b='<a target="_top" href="?a=e&m='+this._mod+"&d="+this._doc+"&i="+Q.bizId+'" title="Link" class="dhtmlPageButton"><i class="fa-solid fa-2x fa-thumbtack"></i></a>'}var a=isc.BizUtil.headerTemplate;var e="";var w="";if(Q.created){if(this._editIcon){e='<img style="width:32px;height:32px" src="resources?_doc='+this._mod+"."+this._doc+"&_n="+this._editIcon+"&v="+SKYVE.Util.v+'"/>'}else{if(this._editFontIcon){e='<i style="padding-left:5px;font-size:28px;width:32px !important" class="titleBar bizhubFontIcon '+this._editFontIcon+'"></i>'}}if(this._editHelpFile){w="'resources?_doc"+this._mod+"."+this._doc+"&_n="+this._editHelpFile+"&v="+SKYVE.Util.v+"'"}else{if(this._editHelpURL){w="'"+this._editHelpURL+"'"}}}else{if(this._createIcon){e='<img style="width:32px;height:32px" src="resources?_doc='+this._mod+"."+this._doc+"&_n="+this._createIcon+"&v="+SKYVE.Util.v+'"/>'}else{if(this._createFontIcon){e='<i style="padding-left:5px;font-size:28px;width:32px !important" class="titleBar bizhubFontIcon '+this._createFontIcon+'"></i>'}}if(this._createHelpFile){w="'resources?_doc"+this._mod+"."+this._doc+"&_n="+this._createHelpFile+"&v="+SKYVE.Util.v+"'"}else{if(this._createHelpURL){w="'"+this._createHelpURL+"'"}}}a=a.replace("{icon}",e).replace("{title}",Q._title).replace("{link}",b).replace("{help}",w);this._heading.setContents(a);delete Q._title;var u=Q._valueMaps;delete Q._valueMaps;var g=Q._growls;delete Q._growls;var q=Q._messages;delete Q._messages;var A=[];this._processWidgets(this._editPanel,false,Q,u,A);this._vm.setValues(Q);for(var J=0,G=A.length;J<G;J++){A[J].rerender()}for(var o in this._grids){var O=Q[o];var x=this._grids[o];for(var P in x){var D=x[P];if(O&&isc.isAn.Array(O)){if(D._comparisonTree&&D._comparisonForm){D.setData(O)}else{if(D._candidateList&&D._memberList){var F=[];if(u){var K=u[o];if(K){for(var p in K){var E=K[p];var h=O.find("bizId",p);if(h){h.bizKey=E}else{F.push({bizId:p,bizKey:E})}}}}D.setData(F,O)}else{if(D.grid){var N=D.grid.fields;for(var I=0,H=N.length;I<H;I++){var z=N[I];var R=z.type;var t=R.contains("YYYY");var s=R.contains("HH");if(t||s){var f=z.name;for(var J=0,G=O.length;J<G;J++){var n=O[J];var E=n[f];if(E){if(t){n[f]=isc.DateUtil.parseSchemaDate(E)}else{if(s){n[f]=isc.Time.parseInput(E)}}}}}else{if(z.valueMap){if(u){var K=u[o+"_"+z.name];if(K){z.valueMap=K}}}}}if(D.selectedIdBinding){var M=D.grid.selectionUpdated;try{D.grid.selectionUpdated=null;D.grid.setData(O);var m=Q[D.selectedIdBinding];if(m){var y=O.findIndex("bizId",m);if(y>=0){D.grid.selectSingleRecord(y)}else{D.grid.deselectAllRecords()}}else{D.grid.deselectAllRecords()}}finally{D.grid.selectionUpdated=M}}else{D.grid.setData(O)}}}}}}}var v=isc.BizUtil.getCurrentView()==this;var B=this._actionPanel.getMembers();if(B.length==0){this._actionPanel.hide()}for(var J=0,G=B.length;J<G;J++){var r=B[J];if(Q.created&&(r.forCreate!=null)&&r.forCreate){this._showHide(r,this._actionPanel,Q,true);continue}else{if(Q.notCreated&&(r.forCreate!=null)&&(!r.forCreate)){this._showHide(r,this._actionPanel,Q,true);continue}}this._enableDisable(r,this._actionPanel,Q);if(r.actionName){if(this._b){this._showHide(r,this._actionPanel,Q,(r.type=="OK")||(r.type=="Save")||(r.type=="Cancel")||(r.type=="Delete")||((r.type=="Remove")&&((this._openedFromDataGrid===undefined)||(!this._openedFromDataGrid)||((!r._canDelete)&&Q.persisted))))}else{this._showHide(r,this._actionPanel,Q,(r.type=="ZoomOut")||(r.type=="Remove")||((!Q.persisted)&&(r.type=="Delete"))||(v&&(r.type=="Delete"))||(v&&(r.type=="OK"))||(v&&(r.type=="Cancel")))}}}if(g){isc.BizUtil.growl(g)}if(q){var d=false;var C=(q.length>1)?"<ul>":"";for(var J=0,G=q.length;J<G;J++){var c=q[J];if(c.severity!="info"){d=true}if(G>1){C+="<li>"}C+=c.summary;if(G>1){C+="</li>"}}if(q.length>1){C+="</ul>"}if(d){isc.warn(C)}else{isc.say(C)}}},refreshListGrids:function(i,g,h){if(i){this._refreshedGrids={}}for(var d in this._grids){var b=this._grids[d];for(var e in b){var a=b[e];if(this._refreshedGrids[e]){}else{if(a.isVisible()){if(a.webmap){if(g||(a.postRefreshConditionName===undefined)||this._evaluateConditionName(a.postRefreshConditionName,h)){a.rerender()}this._refreshedGrids[e]=true}else{if(a.rootIdBinding){if(a.hasDataSource()){if(g||(a.postRefreshConditionName===undefined)||this._evaluateConditionName(a.postRefreshConditionName,h)){var c=a.grid.getDataSource().getField("bizParentId").rootValue;var f="_"+a._view._vm.getValue(a.rootIdBinding);if(c!=f){a.setDataSource(a.dataSource)}else{if(a.autoPopulate){a.refresh()}}}}else{a.setDataSource(a.dataSource)}this._refreshedGrids[e]=true}else{if(a.dataSource){if(g||(a.postRefreshConditionName===undefined)||this._evaluateConditionName(a.postRefreshConditionName,h)){if(a.hasDataSource()){if(a.autoPopulate){a.refresh()}}else{a.setDataSource(a.dataSource)}}this._refreshedGrids[e]=true}}}}}}}},gather:function(b){var a=null;if(b){if(this._vm.validate()){a=this._gather()}}else{a=this._gather()}return a},_gather:function(){var p=this._vm.getValues();for(var j in this._grids){var g=p[j];if(isc.isAn.Array(g)&&(g.length>0)){if(g[0].properties){var o=this._grids[j];for(var b in o){p[j]=o[b].getData()}}else{var d=this._grids[j];for(var k in d){var a=d[k];var m=[];var h=a.grid;if(h){m=h.fields;h.reorderData();g=g.sortByProperty(a._ordinal,true)}if((a._candidateList&&a._memberList)||((m.length==1)&&(m[0].name=="bizId")&&(m[0].type=="enum"))){if(a._ordinal){a._memberList.reorderData();g=g.sortByProperty(a._ordinal,true)}var e=[];p[j]=e;for(var f=0,c=g.length;f<c;f++){var n=g[f];e.push(n.bizId)}}}}}}return p},_evaluateConditionName:function(c,b){var a=false;if(c){a=((c=="true")?true:((c=="false")?false:b[c]))}return a},_processWidgets:function(g,k,a,c,r){for(var s=0,p=g.contained.length;s<p;s++){var t=g.contained[s];this._enableDisable(t,g,a);var h=k||this._showHide(t,g,a,false);if(isc.isA.Function(t.addContained)){this._processWidgets(t,h,a,c,r)}if(isc.isA.Function(t.addBizTab)){var b=t.getSelectedTabNumber();for(var q=0,o=t.bizTabs.length;q<o;q++){var d=t.bizTabs[q];var f=h||this._showHide(d,t,a,false);this._enableDisable(d,t,a);this._processWidgets(d.pane,f,a,c,r)}var v=t.selectedTabIndexBinding;if(v){if((a[v]!==undefined)&&(a[v]!=null)){b=a[v]}}if((b!==undefined)&&(b!=null)){t.selectTab(b)}}if(isc.isA.Function(t.getItems)){if(h){if(this._vm.members&&this._vm.members.contains(t)){this._vm.removeMember(t)}}else{if((this._vm.members==null)||(!this._vm.members.contains(t))){this._vm.addMember(t)}}var n=t.items;for(var q=0,o=n.length;q<o;q++){var u=n[q];this._enableDisable(u,t,a);if(!this._showHide(u,t,a,false)){if(u.type=="bizLookupDescription"){u.setValueMapFromEditView(a)}else{if((u.type=="select")||(u.type=="enum")||(u.type=="comboBox")){if(u.optionDataSource){if(u.optionDataSource==isc.BizUtil.COMPLETE_DATA_SOURCE){var e={};e[a[u.name]]=a[u.name];u.setValueMap(e)}else{u.fetchData();var e={};e[a[u.name]]=a[u.name+"_"+u.displayField];u.setValueMap(e)}}else{if(c){var e=c[u.name];if(e){u.setValueMap(e)}}}}}}}}if(isc.isA.Function(t.rerender)){r.add(t)}}},_enableDisable:function(c,b,a){if(c.disablePickConditionName){c.canPick=!this._evaluateConditionName(c.disablePickConditionName,a);c.enableDisablePick()}if(c.disableAddConditionName){c.canAdd=!this._evaluateConditionName(c.disableAddConditionName,a)}if(c.disableZoomConditionName){c.canZoom=!this._evaluateConditionName(c.disableZoomConditionName,a)}if(c.disableEditConditionName){c.canEdit=!this._evaluateConditionName(c.disableEditConditionName,a)}if(c.disableRemoveConditionName){c.canRemove=!this._evaluateConditionName(c.disableRemoveConditionName,a)}if(c.disableClearConditionName){c.canClear=!this._evaluateConditionName(c.disableClearConditionName,a)}this._setDisabled(c,b,c.disabledConditionName,a)},_setDisabled:function(f,e,g,b){var d=this._evaluateConditionName(g,b);if(f.bizRequired&&f.setRequired&&f.isVisible&&f.isVisible()){f.setRequired(!d)}if(f.setDisabled){f.setDisabled(d)}else{if(f.enable&&f.disable){if(d){f.disable()}else{f.enable()}}else{if(e&&e.enableTab&&e.disableTab&&f.pane){var c=e.tabForPane(f.pane);var a=e.getTabNumber(c);if(a>=0){if(d){e.disableTab(c)}else{e.enableTab(c)}}}}}},setDisabled:function(c,d){var b=this._vm.getItem(c);if(b){var a=this.gather(false);this._setDisabled(b,null,d,a)}},toggleDisabled:function(b){var a=this._vm.getItem(b);if(a){this._setDisabled(a,null,a.isDisabled()?"false":"true",null)}},toggleVisibility:function(b){var a=this._vm.getItem(b);if(a){this._setInvisible(a,null,a.isVisible()?"true":"false",null)}},_showHide:function(d,c,b,a){return this._setInvisible(d,c,d.invisibleConditionName,b,a)},_setInvisible:function(f,d,c,b,a){var e=a||false;if(!e){e=this._evaluateConditionName(c,b)}if(f.bizRequired&&f.setRequired){if(e){f.setRequired(false)}else{if(f.isDisabled&&(!f.isDisabled())){f.setRequired(true)}}}if(f.show&&f.hide){if(e){f.hide()}else{f.show()}}else{if(d){if(e){d.hideMember(f)}else{d.showMember(f)}}}return e},setInvisible:function(d,b){var c=this._vm.getItem(d);if(c){var a=this.gather(false);this._setInvisible(c,null,b,a)}}});isc.ClassFactory.defineClass("BizButton","IButton");isc.BizButton.addMethods({initWidget:function(){this.autoFit=!(arguments[0].width||arguments[0].height);this.hasDisabledicon=false;if(this.displayName){this.title=this.displayName}else{this.title=null}if(this.tooltip){this.canHover=true;this.getHoverHTML=function(){return this.tooltip}}if(this.icon){this.showDisabledIcon=this.hasDisabledIcon}this.action=function(){if(this._view&&this._view._blurry){this._view._blurry=this;return}if(this.confirm){var a=this;isc.ask(this.confirm,function(b){if(b){a._action()}},{title:"Confirm"})}else{this._action()}},this._action=function(){var g=this.validate;if(g===undefined){g=true}if(this.type=="OK"){this._view.saveInstance(g,this.actionName)}else{if(this.type=="Save"){this._view.saveInstance(g,this.actionName,function(){isc.BizUtil.growl([{severity:"info",summary:"Saved",detail:"Changes Saved"}],3000)})}else{if(this.type=="Add"){}else{if(this.type=="ZoomOut"){var k=this._view.gather(false);var j=k._apply;var c=k._changed;if(j||c||this._view._vm.valuesHaveChanged()){this._view.saveInstance(g,this.actionName)}else{var h=isc.WindowStack.getOpener();isc.WindowStack.popoff(this._view._saved);h._source=null}}else{if(this.type=="Cancel"){var e=this;var c=this._view.gather(false)._changed;var h=isc.WindowStack.getOpener();if(c||this._view._vm.valuesHaveChanged()){isc.ask("There are unsaved changes in the "+this._view._singular+".  Do you wish to cancel?",function(m){if(m){isc.WindowStack.popoff(e._view._saved);h._source=null}},{title:"Discard Unsaved Changes?"})}else{isc.WindowStack.popoff(e._view._saved);h._source=null}}else{if(this.type=="Delete"){this._view.deleteInstance(g)}else{if(this.type=="Remove"){var i=this._view.gather(false).bizId;var f=this._view._b;f=f.substring(f.lastIndexOf(".")+1,f.lastIndexOf("ElementById"));var h=isc.WindowStack.getOpener();if(h){var l=h._grids[f];if(l){for(var d in l){var a=l[d];a.remove(i);if(a._view){if(a.bizRemoved){a.bizRemoved()}}}}h._vm.setValue("_apply",true)}isc.WindowStack.popoff(false)}else{if(this.type=="Report"){isc.ReportDialog.popupReport(this._view,this.params)}else{if(this.type=="BizExport"){var k=this._view.gather(false);if(k){var e=this;this._view.saveInstance(g,null,function(){window.location.assign("bizexport.xls?_n="+e.actionName+"&_doc="+e._view._mod+"."+e._view._doc+"&_c="+k._c+"&_ctim="+new Date().getTime())})}}else{if(this.type=="BizImport"){var k=this._view.gather(false);if(k){var e=this;this._view.saveInstance(g,null,function(){var m="bizImport.xhtml?_a="+e.actionName+"&_c="+k._c;if(e._view._b){m+="&_b="+e._view._b.replaceAll("_",".")}isc.WindowStack.popup(null,"BizPort Import",true,[isc.HTMLPane.create({contentsType:"page",contents:"Loading Page...",contentsURL:m})])})}}else{if(this.type=="Download"){this._view.doAction(this.actionName,g)}else{if(this.type=="Upload"){var k=this._view.gather(false);if(k){var e=this;this._view.saveInstance(g,null,function(){var m="fileUpload.xhtml?_a="+e.actionName+"&_c="+k._c;if(e._view._b){m+="&_b="+e._view._b.replaceAll("_",".")}isc.WindowStack.popup(null,"Upload",true,[isc.HTMLPane.create({contentsType:"page",contents:"Loading Page...",contentsURL:m})])})}}else{if(this.type=="Navigate"){}else{if(this.type=="Print"){var b={_mod:this._view._mod,_doc:this._view._doc};isc.ReportDialog.popupReport(this._view,b)}else{this._view.doAction(this.actionName,g)}}}}}}}}}}}}}}};this.Super("initWidget",arguments)}});isc.ClassFactory.defineClass("BizZoomIn","IButton");isc.BizZoomIn.addMethods({initWidget:function(){this.autoFit=!(arguments[0].width||arguments[0].height);this.hasDisabledicon=false;if(this.displayName){this.title=this.displayName}else{this.title=null}if(this.tooltip){this.canHover=true;this.getHoverHTML=function(){return this.tooltip}}if(this.icon){this.showDisabledIcon=this.hasDisabledIcon}this.action=function(){var c=this;var a=c._view.gather(true);if(a){var b=a[c.binding];if(b){isc.BizUtil.getEditView(a[c.binding+"_bizModule"],a[c.binding+"_bizDocument"],function(d){var f=(c._view._b)?c._view._b+"."+c.binding:c.binding;var e=c.getPageRect();if(a._apply||c._view._vm.valuesHaveChanged()){delete a._apply;c._view.saveInstance(true,null,function(){isc.WindowStack.popup(e,"Edit",false,[d]);d.editInstance(b,f,a._c,false)})}else{isc.WindowStack.popup(e,"Edit",false,[d]);d.editInstance(b,f,a._c,false)}})}else{isc.warn("You cannot zoom in to an empty reference")}}else{isc.warn("You cannot zoom in until you fix the problems found")}};this.Super("initWidget",arguments)}});isc.ClassFactory.defineClass("BizVBox","VLayout");isc.BizVBox.addMethods({initWidget:function(){this.contained=[];this.Super("initWidget",arguments)},addContained:function(a){this.contained.add(a);this.addMember(a)}});isc.ClassFactory.defineClass("BizHBox","HLayout");isc.BizHBox.addMethods({initWidget:function(){this.contained=[];this.Super("initWidget",arguments)},addContained:function(a){this.contained.add(a);this.addMember(a)}});isc.ClassFactory.defineClass("BizCollapsible","Window");isc.BizCollapsible.addMethods({initWidget:function(){var a=this;this.contained=[];this.canDragReposition=false;this.canDragResize=false;this.showCloseButton=false;this.animateMinimize=false;this.headerLabelProperties={width:"100%",click:function(){a.minimized?a.restore():a.minimize()}};this.Super("initWidget",arguments)},addContained:function(a){this.contained.add(a);this.addItem(a)}});isc.ClassFactory.defineClass("BizTabPane","TabSet");isc.BizTabPane.addMethods({initWidget:function(){this.tabs=[];this.bizTabs=[];this.destroyPanes=false;if(this.tabBarThickness){}else{this.tabBarThickness=30}this.Super("initWidget",arguments)},tabSelected:function(d,b,a,c){if(this._view.isVisible()){this._view.delayCall("refreshListGrids",[false,false,this._view.gather(false)],0)}},addBizTab:function(a){this.bizTabs.add(a);this.addTab({name:a.name,title:a.title,icon:a.icon,prompt:a.prompt,pane:a.pane,disabledConditionName:a.disabledConditionName,invisibleConditionName:a.invisibleConditionName,selectedConditionName:a.selectedConditionName})},showMember:function(c){var d=this.getTabNumber(c.name);if(d<0){var b=0;var a=parseInt(c.name);a--;while(a>=0){d=this.getTabNumber(""+a);if(d>=0){b=d+1;break}a--}this.addTab({name:c.name,title:c.title,pane:c.pane,disabledConditionName:c.disabledConditionName,invisibleConditionName:c.invisibleConditionName,selectedConditionName:c.selectedConditionName},b)}},hideMember:function(a){if(this.getTabNumber(a.name)>=0){this.removeTab(a.name)}}});isc.ClassFactory.defineClass("BizListMembership","HLayout");isc.BizListMembership.addMethods({initWidget:function(a){this.membersMargin=10;var c=this;this._candidateList=isc.ListGrid.create({width:"100%",height:"100%",minHeight:100,canDragRecordsOut:true,canAcceptDroppedRecords:true,dragDataAction:"move",recordDrop:function(g,d,f,e){this.Super("recordDrop",arguments);c._view._vm.setValue("_changed",true);c._view._vm.setValue("_apply",true);c.changed()},alternateRecordStyles:true,autoFetchData:false,leaveScrollbarGap:false,showHeaderContextMenu:false,fields:[{name:"bizKey",title:(this.candidatesHeading?this.candidatesHeading:"Candidates")}]});this._memberList=isc.ListGrid.create({width:"100%",height:"100%",minHeight:100,canDragRecordsOut:true,canAcceptDroppedRecords:true,dragDataAction:"move",canReorderRecords:a._ordinal?true:false,recordDrop:function(g,d,f,e){this.Super("recordDrop",arguments);if(e==this){this.reorderData()}c._view._vm.setValue("_changed",true);c._view._vm.setValue("_apply",true);c.changed()},reorderData:function(){if(a._ordinal){var f=this.getData();for(var e=0,d=f.length;e<d;e++){f[e][a._ordinal]=e+1}}},alternateRecordStyles:true,autoFetchData:false,leaveScrollbarGap:false,showHeaderContextMenu:false,fields:[{name:"bizKey",title:(this.membersHeading?this.membersHeading:"Members")}]});this.members=[this._candidateList,isc.VLayout.create({layoutAlign:"center",membersMargin:10,height:75,members:[isc.IButton.create({title:null,icon:"icons/memberAssign.png",iconWidth:24,iconHeight:24,iconAlign:"center",width:36,height:36,click:function(){c._memberList.transferSelectedData(c._candidateList);c._view._vm.setValue("_changed",true);c._view._vm.setValue("_apply",true);c.changed()},canHover:true,getHoverHTML:function(){return"Add the selected candidates."}}),isc.IButton.create({title:null,icon:"icons/memberUnassign.png",iconWidth:24,iconHeight:24,iconAlign:"center",width:36,height:36,click:function(){c._candidateList.transferSelectedData(c._memberList);c._view._vm.setValue("_changed",true);c._view._vm.setValue("_apply",true);c.changed()},canHover:true,getHoverHTML:function(){return"Remove the selected members."}})]}),this._memberList];this.Super("initWidget",arguments);var b=this._view._grids[this._b];if(b){}else{b={};this._view._grids[this._b]=b}b[this.getID()]=this},setData:function(b,a){this._candidateList.setData(b);this._memberList.setData(a)},changed:function(){}});isc.ClassFactory.defineClass("BizComparison","HLayout");isc.BizComparison.addMethods({initWidget:function(){this.canDragResize=true;this.resizeFrom=["L","R"];var c=this;this._comparisonTree=isc.TreeGrid.create({width:"50%",height:"100%",fields:[{name:"bizKey",title:"Document"},{name:"relationship",title:"Relationship"}],data:isc.Tree.create({modelType:"parent",idField:"bizId",parentIdField:"parent",data:[]}),selectionUpdated:function(e,d){if(e){c.setFormFields(e.properties)}},showOpenIcons:false,showDropIcons:false,showResizeBar:true});var a=function(f){if(f.type!="boolean"){if(this.diff_match_patch){var e=f;var h=f;if(f.name.startsWith("_old_")){e=this.getItem(f.name.substring(5))}else{h=this.getItem("_old_"+f.name)}var d=e.getDisplayValue();if(d){if(d.startsWith("<")){d=""}}else{d=""}var g=h.getDisplayValue();if(g){if(g.startsWith("<")){g=""}}else{g=""}var i=this.diff_match_patch.diff_main(g,d,false);this.diff_match_patch.diff_cleanupEfficiency(i);return this.diff_match_patch.diff_prettyHtml(i)}}return null};this._comparisonForm=isc.PropertySheet.create({width:"100%",height:"100%",numCols:c.editable?5:4,colWidths:c.editable?[150,"*",50,"*",30]:[150,"*","*",30],border:"1px solid #A7ABB4",titleHoverHTML:a,fields:[]});SKYVE.Util.loadJS("skyve/desktop/diff_match_patch.js?v="+SKYVE.Util.v,function(){c._comparisonForm.diff_match_patch=new diff_match_patch();c._comparisonForm.diff_match_patch.Diff_EditCost=4});this.members=[this._comparisonTree,isc.VLayout.create({overflow:"auto",members:[this._comparisonForm]})];this.Super("initWidget",arguments);var b=this._view._grids[this._b];if(b){}else{b={};this._view._grids[this._b]=b}b[this.getID()]=this},setData:function(a){this._comparisonTree.setData(isc.Tree.create({modelType:"parent",idField:"bizId",parentIdField:"parent",data:a}));this.setFormFields([])},setFormFields:function(j){var k=this;var g=[{type:"blurb",align:"center",colSpan:1,defaultValue:"Property",startRow:false,endRow:false,cellStyle:"propSheetTitle"},{type:"blurb",align:"center",colSpan:1,defaultValue:"New",startRow:false,endRow:false,cellStyle:"propSheetTitle"}];if(this.editable){g.add({title:"<<-",type:"button",click:"for (var i = 5; i < form.getFields().length - 4; i += 4) {var old = form.getField(i + 2).getValue();form.getField(i).setValue(old ? old : '')}",startRow:false,endRow:false,align:"center",cellStyle:"propSheetValue",titleStyle:null,textBoxStyle:null})}g.add({type:"blurb",align:"center",colSpan:1,defaultValue:"Old",startRow:false,endRow:false,cellStyle:"propSheetTitle"});g.add({type:"blurb",align:"center",colSpan:1,defaultValue:"Diff",startRow:false,endRow:false,cellStyle:"propSheetTitle"});for(var e=0;e<j.length;e++){var a=j[e].name;var n=j[e].title;var l=j[e].type;var b=j[e].editorType;var c=j[e].length;var d=j[e].valueMap;var h=j[e].required;var f=j[e].allowEmptyValue;var m={name:a,title:n,showTitle:true,type:l,width:"*",startRow:true,endRow:false,canEdit:this.editable,defaultValue:j[e].newValue};var o={name:"_old_"+a,showTitle:false,type:l,width:"*",startRow:false,endRow:false,canEdit:false,defaultValue:j[e].oldValue};if((l=="richText")||(b=="richText")){m.controlGroups=[];m.colSpan=1;o.controlGroups=[];o.colSpan=1}if(b){m.editorType=b;o.editorType=b}if(c){m.length=c;o.length=c}if(d){m.valueMap=d;o.valueMap=d}if(h){m.required=h}if(f){m.allowEmptyValue=f}g.add(m);if(this.editable){g.add({title:"<-",type:"button",click:"var old = form.getField('_old_"+a+"').getValue(); form.getField('"+a+"').setValue(old ? old : '')",align:"center",startRow:false,endRow:false,cellStyle:"propSheetValue",titleStyle:null,textBoxStyle:null})}g.add(o);g.add({title:"...",type:"button",click:"isc.say(form.titleHoverHTML(form.getField('"+a+"')),null,{title:'Diff'})",align:"center",startRow:false,endRow:false,cellStyle:"propSheetValue",titleStyle:null,textBoxStyle:null})}if(this.editable){g.add({type:"spacer",colSpan:5,cellStyle:null,titleStyle:null,textBoxStyle:null});g.add({title:"Apply Changes",type:"button",colSpan:4,startRow:false,endRow:true,align:"right",cellStyle:null,titleStyle:null,textBoxStyle:null,click:function(t,s){var p=t.getValues();var r=k._comparisonTree.getSelectedRecord().properties;for(var q=0;q<r.length;q++){var u=r[q];u.newValue=p[u.name]}isc.showPrompt('<span style="font-size:medium">Changes Applied</span>');isc.Timer.setTimeout("isc.clearPrompt()",500)}});g.add({type:"spacer",colSpan:5,cellStyle:null,titleStyle:null,textBoxStyle:null})}this._comparisonForm.setFields(g);this._comparisonForm.clearValues()},getData:function(){var a=this._getData(this._comparisonTree.getData().getRoot().children[0]);delete a._b;delete a._t;return a},_getData:function(h){var j={bizId:h.bizId,_b:h._b,_t:h._t};var f=h.properties;for(var e=0;e<f.length;e++){j[f[e].name]=f[e].newValue}var c=h.children;if(c){for(var e=0;e<c.length;e++){var d=this._getData(c[e]);var g=d._b;var a=d._t;delete d._b;delete d._t;var b=j[g];if(b){if(!isc.isAn.Array(b)){b=[b]}b.add(d)}else{if(a=="A"){j[g]=d}else{j[g]=[d]}}}}return j}});isc.ClassFactory.defineClass("BizDynamicImage","VLayout");isc.BizDynamicImage.addMethods({initWidget:function(){this.overflow="hidden";this.wZoom=100;this.hZoom=100;if(this.parameters){}this.members=[];var a=this;this.mouseWheelTimer=null;this.contextMenu=isc.Menu.create({showShadow:true,shadowDepth:10,data:[{title:"Size",icon:"icons/mag.png",submenu:[{title:"50%",click:function(){a._zoom(50)}},{title:"75%",click:function(){a._zoom(75)}},{title:"100%",click:function(){a._zoom(100)}},{title:"125%",click:function(){a._zoom(125)}},{title:"150%",click:function(){a._zoom(150)}},{title:"175%",click:function(){a._zoom(175)}},{title:"200%",click:function(){a._zoom(200)}},{title:"300%",click:function(){a._zoom(300)}},{title:"400%",click:function(){a._zoom(400)}},{title:"500%",click:function(){a._zoom(500)}}]},{title:"Enlarge",icon:"icons/magIn.png",click:function(){a._zoom(a.wZoom+10)}},{title:"Reduce",icon:"icons/magOut.png",click:function(){a._zoom(a.wZoom-10)}},{isSeparator:true},{title:"Open",icon:"zoom.gif",click:function(){a._open()}},{isSeparator:true},{title:"Refresh",icon:"refresh.png",click:function(){a.rerender()}}]});this.Super("initWidget",arguments)},_zoom:function(b,a){if(b>0){this.wZoom=b;this.hZoom=b;if(a){if(this.mouseWheelTimer){isc.Timer.clear(this.mouseWheelTimer)}this.mouseWheelTimer=isc.Timer.setTimeout(this.ID+".rerender()",250)}else{this.rerender()}}},_open:function(){var a=isc.BizDynamicImage.create({name:this.name,moduleDotDocument:this.moduleDotDocument,format:this.format,_view:this._view});isc.WindowStack.popup(null,"Image",true,[a]);a.rerender()},resized:function(){this.rerender()},rerender:function(){var j=this._view._vm.getValue("_c");if(j){}else{return}this.mouseWheelTimer=null;if(this.members&&(this.members.length==1)){this.removeMember(0);if(this._img){this._img.destroy()}}var a=this._view._b;var g=this._view._vm.getValue("bizId");var d=this.imageWidth?this.imageWidth:(this.getVisibleWidth()-20);var e=this.imageHeight?this.imageHeight:(this.getVisibleHeight()-20);var f=this;var i="dynamic."+this.format+"?_doc="+this.moduleDotDocument+"&_n="+this.name;if(this.imageWidth){i+="&_w="+this.imageWidth}if(this.imageHeight){i+="&_h="+this.imageHeight}i+="&_w="+d+"&_h="+e+"&_wz="+this.wZoom+"&_hz="+this.hZoom;if(j){i+="&_c="+j}if(a){i+="&_b="+a.replaceAll("_",".")}if(g){i+="&bizId="+g}i+="&_ts="+new Date().getTime();this._img=isc.Img.create({width:"100%",height:"100%",overflow:"hidden",imageWidth:Math.round(d*this.wZoom/100),imageHeight:Math.round(e*this.hZoom/100),imageType:"center",canDrag:true,cursor:"all-scroll",dragAppearance:"none",dragStart:function(){this.startScrollLeft=this.getScrollLeft();this.startScrollTop=this.getScrollTop()},dragMove:function(){this.scrollTo(this.startScrollLeft-isc.Event.lastEvent.x+isc.Event.mouseDownEvent.x,this.startScrollTop-isc.Event.lastEvent.y+isc.Event.mouseDownEvent.y)},mouseWheel:function(){var b=isc.EventHandler.getWheelDelta();f._zoom(Math.round(f.wZoom-(b*10)),true);return false},doubleClick:function(){f._open()},appImgDir:"../",src:i});if(this.members){this.addMember(this._img)}}});isc.ClassFactory.defineClass("BizImage","Img");isc.BizImage.addMethods({initWidget:function(){this.imageType="stretch";this.src="resources?_n="+this.file+"&_doc="+this.modoc+"&_b=null";this.Super("initWidget",arguments)}});isc.ClassFactory.defineClass("BizLabel","Label");isc.BizLabel.addMethods({initWidget:function(){this.autoFit=!(arguments[0].width||arguments[0].height);if(this.value){this.setContents(this.value)}if(this.textAlign){this.setAlign(this.textAlign)}this.Super("initWidget",arguments)}});isc.ClassFactory.defineClass("BizChart","Canvas");isc.BizChart.addClassMethods({loadingChartJS:false,loadChartJS:function(){if(isc.BizChart.loadingChartJS){setTimeout(function(){isc.BizChart.loadChartJS()},100)}else{if(!window.Chart){isc.BizChart.loadingChartJS=true;SKYVE.Util.loadJS("jakarta.faces.resource/moment/moment.js.xhtml?ln=primefaces&v="+SKYVE.Util.v,function(){SKYVE.Util.loadJS("jakarta.faces.resource/chartjs/chartjs.js.xhtml?ln=primefaces&v="+SKYVE.Util.v,function(){isc.BizChart.loadingChartJS=false})})}}},v:0});isc.BizChart.addMethods({init:function(a){if(!window.Chart){isc.BizChart.loadChartJS()}if(!a.width){this.width="100%"}if(!a.height){this.height="100%"}this.ID="bizChart"+isc.BizChart.v++;this.redrawOnResize=false;this._refreshing=false;this._resizeChartCalled=false;this.Super("init",arguments)},getInnerHTML:function(){return'<canvas id="'+this.ID+'_chart" />'},resized:function(){if(!this._resizeChartCalled){this.delayCall("_resizeChart",arguments,100)}this._resizeChartCalled=true},_resizeChart:function(){if(this.chart){var a=this.getWidth();var b=this.getHeight();var d=this.chart.canvas;d.parentNode.style.width=a+"px";d.parentNode.style.height=b+"px";d.width=a;d.height=b;d.style.width=a+"px";d.style.height=b+"px";this.chart.update();this._resizeChartCalled=false}else{this.delayCall("_resizeChart",arguments,100)}},setDataSource:function(a){if((window.Chart)&&this.isDrawn()){this._modelName=a;var b=this._view._grids[a];if(b){}else{b={};this._view._grids[a]=b}b[this.getID()]=this;this._refresh()}else{this.delayCall("setDataSource",arguments,100)}},rerender:function(){this._refresh()},_refresh:function(){if(this._refreshing){return}if(!this.isDrawn()){return}if(!this.isVisible()){return}var b=SKYVE.Util.CONTEXT_URL+"chart?";if(this._modelName){var a=this._view.gather(false);b+="_c="+a._c+"&t="+this.chartType+"&_m="+this._modelName}else{return}this._refreshing=true;var c=this;isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,actionURL:b,httpMethod:"GET",callback:function(f,e,d){try{c._update(e)}finally{c._refreshing=false}}})},_update:function(b){if(b.config){if(!this.chartConfig){this.chartConfig={}}this.chartConfig.type=b.config.type;this.chartConfig.data=b.config.data;this.chartConfig.options=b.config.options;if(!this.chartConfig.options){this.chartConfig.options={}}this.chartConfig.options.responsive=true;this.chartConfig.options.maintainAspectRatio=false;if(this.chart){this.chart.update()}else{if(!this.isDrawn()){this.draw()}var a=document.getElementById(this.ID+"_chart");this.chart=new Chart(a,this.chartConfig)}}}});isc.ClassFactory.defineClass("BizProgressBar","ProgressBar");isc.BizUtil.addClassProperties({headerTemplate:null,init:function(h,d,c,b){isc.BizUtil.headerTemplate=h;isc.HLayout.create({ID:"body",autoDraw:true,width:"100%",height:"100%",backgroundColor:"whitesmoke",padding:10,members:[isc.VLayout.create({ID:"lhsmenu",width:"30%",showResizeBar:true,backgroundColor:"white",border:"1px solid #c0c0c0",showShadow:true,shadowSoftness:10,shadowOffset:0,members:[isc.Img.create({imageType:"center",src:d,overflow:"clip-h",styleName:"logo",showDisabled:false,showDown:false,showFocus:false,showFocused:false,showFocusedAsOver:false,showRollOver:false}),isc.SectionStack.create({ID:"adminStack",width:"100%",visibilityMode:"mutex",animateSections:false,overflow:"hidden",headerHeight:30})]}),isc.VLayout.create({ID:"details",width:"100%",height:"100%",backgroundColor:"whitesmoke",border:"1px solid #c0c0c0",showShadow:true,shadowSoftness:10,shadowOffset:0})]});for(var e=0,a=c.length;e<a;e++){var f=c[e];var g=isc.TreeGrid.create({ID:f.name+"Tree",showHeader:false,showOpenIcons:false,showDropIcons:false,showConnectors:true,showRollOver:false,leaveScrollbarGap:false,nodeIcon:null,folderIcon:null,closedIconSuffix:"",canDragRecordsOut:true,dragDataAction:"copy",data:isc.Tree.create({modelType:"children",nameProperty:"desc",childrenProperty:"sub",root:f.root}),leafClick:function(k,i,j){if(i.ref=="link"){window.location=i.name}else{if(i.ref=="edit"){if(isc.BizUtil._currentView==isc.ListView.contents){details.hideMember(isc.ListView.contents)}else{if(isc.BizUtil._currentView){if(details.hasMember(isc.BizUtil._currentView)){details.hideMember(isc.BizUtil._currentView)}isc.BizUtil.relinquishEditView(isc.BizUtil._currentView)}}isc.BizUtil.getEditView(i.module?i.module:k.data.root.name,i.name,function(l){details.addMember(l);isc.BizUtil._currentView=l;l.newInstance()})}else{if(isc.BizUtil._currentView!=isc.ListView.contents){if(isc.BizUtil._currentView){if(details.hasMember(isc.BizUtil._currentView)){details.hideMember(isc.BizUtil._currentView)}isc.BizUtil.relinquishEditView(isc.BizUtil._currentView)}isc.BizUtil._currentView=isc.ListView.contents;details.showMember(isc.ListView.contents)}if(i.ref=="grid"){isc.ListView.setGridDataSource(k.data.root.name+"_"+i.name,i.config)}else{if(i.ref=="cal"){isc.ListView.setCalendarDataSource(k.data.root.name+"_"+i.name,i.config)}else{if(i.ref=="tree"){isc.ListView.setTreeDataSource(k.data.root.name+"_"+i.name,i.config)}else{if(i.ref=="map"){isc.ListView.setMapDataSource(k.data.root.name+"_"+i.name,i.config)}else{alert("Menu ref of "+i.ref+"is unknown")}}}}}}}});adminStack.addSection({title:f.title,expanded:f.open,items:[g]});g.getData().openAll()}for(var e=0,a=b.length;e<a;e++){var f=b[e];f.fields.add({name:"operator",type:"text",hidden:true});f.fields.add({name:"criteria",type:"text",hidden:true});f.fields.add({name:"bizId",primaryKey:true,hidden:true});f.fields.add({name:"bizLock",hidden:true});f.fields.addAt({name:"bizTagged",title:"Tag",type:"boolean",validOperators:["equals"]},0);f.fields.addAt({name:"bizFlagComment",title:"Flag",canFilter:SKYVE.Util.canFlag},1);isc.RestDataSource.create({ID:f.ID,dataFormat:"json",jsonPrefix:"",jsonSuffix:"",dataURL:"smartlist",operationBindings:[{operationType:"fetch",dataProtocol:"postParams"},{operationType:"update",dataProtocol:"postParams"},{operationType:"add",dataProtocol:"postParams"},{operationType:"remove",dataProtocol:"postParams"}],criteriaPolicy:"dropOnChange",title:f.title,modoc:f.modoc,icon:f.icon,fontIcon:f.fontIcon,aggregate:f.aggregate,canCreate:f.canCreate,canUpdate:f.canUpdate,canDelete:f.canDelete,cellHeight:f.cellHeight,fields:f.fields})}isc.BizUtil._currentView=isc.ListView.contents;details.addMember(isc.ListView.contents);details.hideMember(isc.ListView.contents);isc.RestDataSource.create({ID:"textSearch",dataFormat:"json",dataURL:"smartsearch",criteriaPolicy:"dropOnChange",fields:[{name:"icon",title:"Icon"},{name:"doc",title:"Document"},{name:"bizKey",title:"Desciption"},{name:"excerpt",title:"Excerpt"},{name:"score",title:"Score (%)",type:"integer"},{name:"data",type:"link",title:"Data",target:"_self"},{name:"content",type:"link",title:"Content",target:"_blank"}]});isc.DynamicForm.create({ID:"textSearchForm",margin:2,width:550,height:40,numCols:3,colWidths:[250,"*",100],items:[{name:"query",title:"Type and press search or enter",type:"text",keyPress:function(l,k,j,i){if((j=="Enter")&&k.validate(false)){l.form.doSearch()}},required:true,validators:[{clientOnly:true,type:"lengthRange",min:4,errorMessage:"At least 4 characters are required for a search"}]},{name:"searchBtn",startRow:false,title:"Search",type:"button",accessKey:"Enter",click:function(){this.form.doSearch()}},{name:"message",type:"blurb",startRow:true,colSpan:3}],doSearch:function(){if(this.validate()){var i=this.getItem("message");i.setValue("");textSearchResults.filterData(textSearchForm.getValuesAsCriteria())}}});isc.ListGrid.create({ID:"textSearchResults",width:"100%",height:"100%",alternateRecordStyles:true,dataSource:"textSearch",dataFetchMode:"basic",wrapCells:true,fixedRecordHeights:false,canEdit:false,canFreezeFields:false,canGroupBy:false,canPickFields:false,canSort:false,fields:[{name:"icon",align:"center",width:30},{name:"doc",width:"15%"},{name:"bizKey",width:"30%"},{name:"excerpt",width:"55%"},{name:"score",width:75},{name:"data",width:40,align:"center",linkText:"Data"},{name:"content",width:60,align:"center",linkText:"Content"}],dataProperties:{transformData:function(k,m){if(m.status>=0){var j=k.pop();var l=textSearchForm.getItem("message");var i="Query took "+j.time+" seconds.";if(j.suggestion){i+="  Did you mean <a href=\"#\" onclick=\"var q = textSearchForm.getItem('query'); q.setValue('"+j.suggestion+"'); q.focusInItem(); return false;\">"+j.suggestion+"</a>"}l.setValue(i)}}}})},popupSearch:function(){isc.WindowStack.popup(null,"Text Search",true,[textSearchForm,textSearchResults]);textSearchForm.focusInItem("query");textSearchForm.clearValues()},showPortal:function(){if(isc.BizUtil._currentView!=isc.ListView.contents){if(isc.BizUtil._currentView){if(details.hasMember(isc.BizUtil._currentView)){details.hideMember(isc.BizUtil._currentView)}isc.BizUtil.relinquishEditView(isc.BizUtil._currentView)}isc.BizUtil._currentView=isc.ListView.contents;details.showMember(isc.ListView.contents)}isc.ListView.showPortal()},showHelp:function(a){if(a){}else{if(isc.BizUtil._currentView==isc.ListView.contents){a="https://skyvers.github.io/skyve-user-guide/"}else{a="https://skyvers.github.io/skyve-user-guide/"}}isc.BizUtil.popupFrame(a,"Skyve Help",1024,768)}});