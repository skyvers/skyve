window.SKYVE||(window.SKYVE={});
SKYVE.Util=function(){const a=function(b,c){null!==c&&(b.readyState?b.onreadystatechange=function(){if("loaded"===b.readyState||"complete"===b.readyState)b.onreadystatechange=null,c()}:b.onload=c);const d=document.getElementsByTagName("HEAD")[0];d&&d.appendChild(b)};return{customer:null,v:null,googleMapsV3ApiKey:null,ckEditorConfigFileUrl:null,mapCentre:null,mapZoom:1,CONTEXT_URL:`${window.location}`.substring(0,`${window.location}`.lastIndexOf("/")+1),allowedReportFormats:null,loadJS:function(b,
c){const d=document.createElement("SCRIPT");d.type="text/javascript";d.src=b;a(d,c)},loadCSS:function(b,c){const d=document.createElement("LINK");d.type="text/css";d.rel="stylesheet";d.href=b;a(d,c)},geoLocate:function(b){navigator.geolocation&&($(function(){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",msgs:[{summary:"GeoLocating",detail:"Please wait...",severity:"info"}]})}),navigator.geolocation.getCurrentPosition(function(c){$(function(){PrimeFaces.cw("Growl","growl",{id:"growl",
widgetVar:"growl",msgs:[{summary:"GeoLocating",detail:"Done",severity:"info"}]})});b(`POINT (${c.coords.longitude} ${c.coords.latitude})`)},function(c){$(function(){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",msgs:[{summary:"GeoLocating",detail:c.message,severity:"warn"}]})})},{enableHighAccuracy:!0}))},setTouchCookie:function(){let b=!1;if("maxTouchPoints"in navigator)b=0<navigator.maxTouchPoints;else if("msMaxTouchPoints"in navigator)b=0<navigator.msMaxTouchPoints;else{const c=window.matchMedia&&
matchMedia("(pointer:coarse)");c&&"(pointer:coarse)"===c.media?b=!!c.matches:"orientation"in window&&(b=!0)}document.cookie=`touch=${b?1:0}; path=/`},passwordStrength:{0:"Worst",1:"Bad",2:"Weak",3:"Good",4:"Strong"},progressBarPower:{0:"1%",1:"25%",2:"50%",3:"75%",4:"100%"},progressBarColour:{0:"#D73F40",1:"#DC6551",2:"#F2B84F",3:"#BDE952",4:"#3ba62f"}}}();
SKYVE.GMap=function(){let a=null;const b=function(c){switch(c){case "point":c=[google.maps.drawing.OverlayType.MARKER];break;case "line":c=[google.maps.drawing.OverlayType.POLYLINE];break;case "polygon":c=[google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE];break;case "pointAndLine":c=[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYLINE];break;case "pointAndPolygon":c=[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYGON,
google.maps.drawing.OverlayType.RECTANGLE];break;case "lineAndPolygon":c=[google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE];break;default:c=[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}return c};return{scatter:function(c,d,e,f){a||=new Wkt.Wkt;var g=d.items;if(g){if(f)for(var h in c._objects){if(Object.prototype.hasOwnProperty.call(c._objects,
h)){var k=!1;for(let n=0,r=g.length;n<r;n++)if(g[n].bizId===h){k=!0;break}if(!k){k=c._objects[h];for(let n=0,r=k.overlays.length;n<r;n++)k.overlays[n].setMap(null),k.overlays[n]=null;delete k.overlays;delete c._objects[h]}}}else for(k in c._objects)if(Object.prototype.hasOwnProperty.call(c._objects,k)){h=c._objects[k];for(let n=0,r=h.overlays.length;n<r;n++)h.overlays[n].setMap(null),h.overlays[n]=null;delete h.overlays;delete c._objects[k]}for(let n=0,r=g.length;n<r;n++){h=g[n];if(k=c._objects[h.bizId]){if(f=
k.overlays.length===h.features.length)for(let u=0,v=k.overlays.length;u<v;u++)if(k.overlays[u].geometry!==h.features[u].geometry){f=!1;break}if(!f){for(let u=0,v=k.overlays.length;u<v;u++)k.overlays[u].setMap(null),k.overlays[u]=null;delete k.overlays;delete c._objects[bizId];k=null}}if(!k){k={overlays:[]};for(let u=0,v=h.features.length;u<v;u++){f=h.features[u];try{a.read(f.geometry)}catch(x){alert(`${f.geometry} is invalid WKT.`);continue}var l={editable:f.editable};f.strokeColour&&(l.strokeColor=
f.strokeColour);f.fillColour&&(l.fillColor=f.fillColour);f.fillOpacity&&(l.fillOpacity=f.fillOpacity);f.iconRelativeFilePath&&(l.icon={url:`${SKYVE.Util.CONTEXT_URL}resources?_n=${f.iconRelativeFilePath}&_doc=${d._doc}`},f.iconAnchorX&&f.iconAnchorY&&(l.icon.anchor=new google.maps.Point(f.iconAnchorX,f.iconAnchorY),l.icon.origin=new google.maps.Point(0,0)));l=a.toObject(l);k.overlays.push(l);l.setMap(c.webmap);f.zoomable&&(l.bizId=h.bizId,l.geometry=f.geometry,l.fromTimestamp=h.fromTimestamp,l.toTimestamp=
h.toTimestamp,l.mod=h.moduleName,l.doc=h.documentName,l.infoMarkup=h.infoMarkup,google.maps.event.addListener(l,"click",function(x){c.click(this,x)}))}c._objects[h.bizId]=k}}if(e){d=new google.maps.LatLngBounds;e=!1;for(const n in c._objects)if(Object.prototype.hasOwnProperty.call(c._objects,n)){e=!0;g=c._objects[n].overlays;for(let r=0,u=g.length;r<u;r++)if(h=g[r],h.getPath){h=h.getPath();for(let v=0,x=h.getLength();v<x;v++)d.extend(h.getAt(v))}else h.getPosition&&d.extend(h.getPosition())}e&&(d.getNorthEast().equals(d.getSouthWest())?
(15>c.webmap.getZoom()&&c.webmap.setZoom(15),void 0!==overlay.getPosition&&"function"===typeof overlay.getPosition&&c.webmap.setCenter(d.getNorthEast())):c.webmap.fitBounds(d))}}},centre:function(){a||=new Wkt.Wkt;let c=null;if(SKYVE.Util.mapCentre)try{a.read(SKYVE.Util.mapCentre);const d=a.components[0];c=new google.maps.LatLng(d.y,d.x)}catch(d){console.log(`${SKYVE.Util.mapCentre} is malformed WKT Point format`),SKYVE.Util.mapCentre=null,c=new google.maps.LatLng(0,0)}else c=new google.maps.LatLng(0,
0);return c},scatterValue:function(c,d){a||=new Wkt.Wkt;if(d){try{a.read(d)}catch(f){if("WKTError"===f.name){alert("The WKT string is invalid.");return}}d=a.toObject(c.webmap.defaults);"polygon"!==a.type&&"linestring"!==a.type&&d.setEditable&&d.setEditable(!1);if(Wkt.isArray(d))for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&!Wkt.isArray(d[e])&&(d[e].setMap(c.webmap),c._overlays.push(d[e]));else d.setMap(c.webmap),c._overlays.push(d);if(void 0!==d.getBounds&&"function"===typeof d.getBounds)c.webmap.fitBounds(d.getBounds());
else if(void 0!==d.getPath&&"function"===typeof d.getPath){e=new google.maps.LatLngBounds;d=d.getPath();for(let f=0,g=d.getLength();f<g;f++)e.extend(d.getAt(f));c.webmap.fitBounds(e)}else 15>c.webmap.getZoom()&&c.webmap.setZoom(15),void 0!==d.getPosition&&"function"===typeof d.getPosition&&c.webmap.setCenter(d.getPosition())}},clear:function(c){for(let d=0,e=c._overlays.length;d<e;d++)c._overlays[d].setMap(null);c._overlays.length=0},drawingTools:function(c){a||=new Wkt.Wkt;c.webmap.drawingManager=
new google.maps.drawing.DrawingManager({drawingControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM,drawingModes:b(c.drawingTools)}});c.webmap.drawingManager.setMap(c.webmap);google.maps.event.addListener(c.webmap.drawingManager,"overlaycomplete",function(d){SKYVE.GMap.clear(c);this.setDrawingMode(null);c._overlays.push(d.overlay);a.fromObject(d.overlay);d=a.write();c.setFieldValue(d)})},geoLocator:function(c){if(navigator.geolocation){const d=document.createElement("DIV");Object.assign(d.style,
{backgroundColor:"#fff",border:"2px solid #fff",borderRadius:"3px",boxShadow:"0 2px 6px rgba(0,0,0,.3)",cursor:"pointer",margin:"10px",padding:"5px",textAlign:"center"});d.title="Click to set your current position from your GPS";d.innerHTML='<i class="fa-solid fa-location-crosshairs"></i>';d.index=1;d.addEventListener("click",function(){navigator.geolocation.getCurrentPosition(function(e){SKYVE.GMap.clear(c);c.webmap.drawingManager.setDrawingMode(null);e={lat:e.coords.latitude,lng:e.coords.longitude};
const f=new google.maps.Marker({position:e,map:c.webmap});c._overlays.push(f);c.setFieldValue(`POINT (${e.lng} ${e.lat})`);c.webmap.setZoom(15);c.webmap.setCenter(e)},function(e){alert(e.message)},{enableHighAccuracy:!0})});c.webmap.geolocator=d;c.webmap.controls[google.maps.ControlPosition.LEFT].push(d)}},setDisabled:function(c,d){c.webmap&&(c.webmap.drawingManager&&c.webmap.drawingManager.setOptions({drawingControl:!d}),c.webmap.geolocator&&(c.webmap.geolocator.style.display=d?"none":"block"))},
refreshControls:function(c){const d=document.createElement("DIV");Object.assign(d.style,{backgroundColor:"#fff",border:"2px solid #fff",borderRadius:"3px",boxShadow:"0 2px 6px rgba(0,0,0,.3)",cursor:"pointer",margin:"10px",padding:"5px",textAlign:"center"});d.title="Click to set the refresh rate of the map";d.innerHTML=`
						        <input type="number" min="0" max="500" step="1" value="${c.refreshTime}" size="3" />
						        <input type="checkbox" ${c._refreshRequired?"checked":""}><label>Refresh</label>
						    `;d.index=1;d.children[0].addEventListener("change",function(){c.refreshTime=Number(this.value);c._refreshRequired&&(c._intervalId&&clearInterval(c._intervalId),c._intervalId=setInterval(c.rerender.bind(c),1E3*c.refreshTime))});d.children[1].addEventListener("click",function(){c._refreshRequired=this.checked;c._intervalId&&(clearInterval(c._intervalId),c._intervalId=null);c._refreshRequired&&(c.rerender(),c._intervalId=setInterval(c.rerender.bind(c),1E3*c.refreshTime))});c.webmap.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(d)}}}();
SKYVE.Leaflet=function(){function a(e){function f(p){p=m.substring(t).match(p);if(!p)return null;t+=p[0].length;return p[0]}function g(){f(/^\s*/)}function h(){g();let p=0;const w=[],y=[w];let z=w,A;for(;A=f(/^(\()/)||f(/^(\))/)||f(/^(,)/)||f(d);){if("("===A)y.push(z),z=[],y[y.length-1].push(z),p++;else if(")"===A){if(0===z.length)return null;z=y.pop();if(!z)return null;p--;if(0===p)break}else if(","===A)z=[],y[y.length-1].push(z);else{if(A.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(z,
A.split(/\s/g).map(parseFloat))}g()}return 0!==p?null:w}function k(){const p=[];let w=[],y;for(;y=f(d)||f(/^(,)/);)","===y?(p.push(w),w=[]):y.split(/\s/g).some(isNaN)||(w||=[],Array.prototype.push.apply(w,y.split(/\s/g).map(parseFloat))),g();if(w)p.push(w);else return null;return p.length?p:null}function l(){if(!f(/^(point(\sz)?)/i))return null;g();if(!f(/^(\()/))return null;const p=k();if(!p)return null;g();return f(/^(\))/)?{type:"Point",coordinates:p[0]}:null}function n(){if(!f(/^(multipoint)/i))return null;
g();m=`MULTIPOINT (${m.substring(m.indexOf("(")+1,m.length-1).replace(/\(/g,"").replace(/\)/g,"")})`;const p=h();if(!p)return null;g();return{type:"MultiPoint",coordinates:p}}function r(){if(!f(/^(multilinestring)/i))return null;g();const p=h();if(!p)return null;g();return{type:"MultiLineString",coordinates:p}}function u(){if(!f(/^(linestring(\sz)?)/i))return null;g();if(!f(/^(\()/))return null;const p=k();return p&&f(/^(\))/)?{type:"LineString",coordinates:p}:null}function v(){const p=[];let w;if(!f(/^(geometrycollection)/i))return null;
g();if(!f(/^(\()/))return null;for(;w=x();)p.push(w),g(),f(/^(,)/),g();return f(/^(\))/)?{type:"GeometryCollection",geometries:p}:null}function x(){var p;(p=l()||u())||(f(/^(polygon(\sz)?)/i)?(g(),p=(p=h())?{type:"Polygon",coordinates:p}:null):p=null);(p=p||n()||r())||(f(/^(multipolygon)/i)?(g(),p=(p=h())?{type:"MultiPolygon",coordinates:p}:null):p=null);return p||v()}e=e.split(";");let m=e.pop();const q=(e.shift()||"").split("=").pop();let t=0;return function(p){p&&q.match(/\d+/)&&(p.crs={type:"name",
properties:{name:`urn:ogc:def:crs:EPSG::${q}`}});return p}(x())}function b(e){function f(l){return l.join(" ")}function g(l){return l.map(f).join(", ")}function h(l){return l.map(g).map(k).join(", ")}function k(l){return`(${l})`}"Feature"===e.type&&(e=e.geometry);switch(e.type){case "Point":return`POINT (${f(e.coordinates)})`;case "LineString":return`LINESTRING (${g(e.coordinates)})`;case "Polygon":return`POLYGON (${h(e.coordinates)})`;case "MultiPoint":return`MULTIPOINT (${g(e.coordinates)})`;case "MultiPolygon":return`MULTIPOLYGON (${e.coordinates.map(h).map(k).join(", ")})`;
case "MultiLineString":return`MULTILINESTRING (${h(e.coordinates)})`;case "GeometryCollection":return`GEOMETRYCOLLECTION (${e.geometries.map(b).join(", ")})`;default:throw Error("stringify requires a valid GeoJSON Feature or geometry object as input");}}const c=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,d=new RegExp("^"+c.source+"(\\s"+c.source+"){1,}");return{scatter:function(e,f,g,h){var k=f.items;if(k){if(h)for(var l in e._objects){if(Object.prototype.hasOwnProperty.call(e._objects,l)){var n=
!1;for(let r=0,u=k.length;r<u;r++)if(k[r].bizId===l){n=!0;break}if(!n){n=e._objects[l];for(let r=0,u=n.overlays.length;r<u;r++)e.webmap.removeLayer(n.overlays[r]),n.overlays[r]=null;delete n.overlays;delete e._objects[l]}}}else for(n in e._objects)if(Object.prototype.hasOwnProperty.call(e._objects,n)){l=e._objects[n];for(let r=0,u=l.overlays.length;r<u;r++)e.webmap.removeLayer(l.overlays[r]),l.overlays[r]=null;delete l.overlays;delete e._objects[n]}for(let r=0,u=k.length;r<u;r++){const v=k[r];if(l=
e._objects[v.bizId]){if(n=l.overlays.length===v.features.length)for(let x=0,m=l.overlays.length;x<m;x++)if(l.overlays[x].getLayers()[0].zoomData.geometry!==v.features[x].geometry){n=!1;break}if(!n){for(let x=0,m=l.overlays.length;x<m;x++)e.webmap.removeLayer(l.overlays[x]),l.overlays[x]=null;delete l.overlays;delete e._objects[v.bizId];l=null}}if(!l){l={overlays:[]};for(let x=0,m=v.features.length;x<m;x++){const q=v.features[x];n=a(q.geometry);n.properties={editable:q.editable};q.strokeColour&&(n.properties.color=
q.strokeColour);q.fillColour&&(n.properties.fillColor=q.fillColour);q.fillOpacity&&(n.properties.fillOpacity=q.fillOpacity);q.iconRelativeFilePath&&(h={iconUrl:`resources?_n=${q.iconRelativeFilePath}&_doc=${f._doc}`},q.iconAnchorX&&q.iconAnchorY&&(h.iconAnchor=[q.iconAnchorX,q.iconAnchorY]),n.properties.icon=h);n=L.geoJson(n,{pointToLayer(t,p){const w=t.properties;delete t.properties;w.icon&&(w.icon=L.icon(w.icon));return L.marker(p,w)},style:function(t){const p=t.geometry.properties;delete t.geometry.properties;
return p},onEachFeature:function(t,p){q.zoomable&&(p.zoomData={bizId:v.bizId,geometry:q.geometry,fromTimestamp:v.fromTimestamp,toTimestamp:v.toTimestamp,mod:v.moduleName,doc:v.documentName,infoMarkup:v.infoMarkup},p.bindPopup(function(w){return e.click(w)}))}});l.overlays.push(n);e.webmap.addLayer(n)}e._objects[v.bizId]=l}}if(g){f=L.latLngBounds();g=!1;for(const r in e._objects)if(Object.prototype.hasOwnProperty.call(e._objects,r)){g=!0;k=e._objects[r].overlays;for(let u=0,v=k.length;u<v;u++)f.extend(k[u].getBounds())}g&&
e.webmap.fitBounds(f,{maxZoom:15})}}},centre:function(){let e=[0,0];if(SKYVE.Util.mapCentre)try{const f=a(SKYVE.Util.mapCentre);e=[f.coordinates[1],f.coordinates[0]]}catch(f){console.log(`${SKYVE.Util.mapCentre} is malformed WKT Point format`),SKYVE.Util.mapCentre=null}return e},scatterValue:function(e,f){if(f){var g=null;try{g=L.geoJson(a(f))}catch(h){console.log(`The WKT string ${f} is invalid.`);return}g.addTo(e.webmap);e._overlays.push(g);e.webmap.fitBounds(g.getBounds(),{maxZoom:15})}},clear:function(e){for(let f=
0,g=e._overlays.length;f<g;f++)e.webmap.removeLayer(e._overlays[f]);e._overlays.length=0},drawingTools:function(e){const f=e.drawingTools;L.EditControl=L.Control.extend({options:{position:"topright"},onAdd:function(g){const h=L.DomUtil.create("div","leaflet-control leaflet-bar");if(!f||"point"===f||"pointAndLine"===f||"pointAndPolygon"===f){var k=L.DomUtil.create("a","",h);k.href="#";k.title="Create a new marker";k.innerHTML='<i class="fa-solid fa-location-dot"></i>';L.DomEvent.on(k,"click",L.DomEvent.stop).on(k,
"click",function(){window.LAYER=e.webmap.editTools.startMarker.call(g.editTools)},this)}f&&"line"!==f&&"pointAndLine"!==f&&"lineAndPolygon"!==f||(k=L.DomUtil.create("a","",h),k.href="#",k.title="Create a new line",k.innerHTML='<i class="fa-solid fa-diagram-project"></i>',L.DomEvent.on(k,"click",L.DomEvent.stop).on(k,"click",function(){window.LAYER=e.webmap.editTools.startPolyline.call(g.editTools)},this));f&&"polygon"!==f&&"pointAndPolygon"!==f&&"lineAndPolygon"!==f||(k=L.DomUtil.create("a","",h),
k.href="#",k.title="Create a new rectangle",k.innerHTML='<i class="fa-solid fa-vector-square"></i>',L.DomEvent.on(k,"click",L.DomEvent.stop).on(k,"click",function(){window.LAYER=e.webmap.editTools.startRectangle.call(g.editTools)},this),k=L.DomUtil.create("a","",h),k.href="#",k.title="Create a new polygon",k.innerHTML='<i class="fa-solid fa-draw-polygon"></i>',L.DomEvent.on(k,"click",L.DomEvent.stop).on(k,"click",function(){window.LAYER=e.webmap.editTools.startPolygon.call(g.editTools)},this));return h}});
e.webmap.editControl=new L.EditControl;e.webmap.addControl(e.webmap.editControl);e.webmap.on("editable:drawing:commit",function(g){SKYVE.Leaflet.clear(e);g.layer.toggleEdit();e._overlays.push(g.layer);e.setFieldValue(b(g.layer.toGeoJSON(12)))})},geoLocator:function(e){navigator.geolocation&&(L.GeoControl=L.Control.extend({options:{position:"bottomleft"},onAdd:function(f){f=L.DomUtil.create("div","leaflet-control leaflet-bar");const g=L.DomUtil.create("a","",f);g.href="#";g.title="Click to set your current position from your GPS";
g.innerHTML='<i class="fa-solid fa-location-crosshairs"></i>';L.DomEvent.on(g,"click",L.DomEvent.stop).on(g,"click",function(){e.webmap.editTools.drawing()&&e.webmap.editTools.commitDrawing();navigator.geolocation.getCurrentPosition(function(h){SKYVE.Leaflet.clear(e);const k=[h.coords.latitude,h.coords.longitude],l=L.marker(k);l.addTo(e.webmap);e._overlays.push(l);e.setFieldValue(`POINT (${h.coords.longitude} ${h.coords.latitude})`);e.webmap.setZoom(15);e.webmap.panTo(k)},function(h){alert(h.message)},
{enableHighAccuracy:!0})},this);return f}}),e.webmap.geoControl=new L.GeoControl,e.webmap.addControl(e.webmap.geoControl))},setDisabled:function(e,f){e.webmap&&(e.webmap.editControl&&(e.webmap.editControl.getContainer().style.display=f?"none":"block"),e.webmap.geoControl&&(e.webmap.geoControl.getContainer().style.display=f?"none":"block"))},refreshControls:function(e){L.GeoControl=L.Control.extend({options:{position:"bottomleft"},onAdd:function(f){f=L.DomUtil.create("div","leaflet-control");f.innerHTML=
`
		                <input type="number" min="0" max="500" step="1" value="${e.refreshTime}" size="3" />
		                <input type="checkbox" ${e._refreshRequired?"checked":""}><label>Refresh</label>
		            `;f.children[0].addEventListener("change",function(){e.refreshTime=Number(this.value);e._refreshRequired&&(e._intervalId&&clearInterval(e._intervalId),e._intervalId=setInterval(e.rerender.bind(e),1E3*e.refreshTime))});f.children[1].addEventListener("click",function(){e._refreshRequired=this.checked;e._intervalId&&(clearInterval(e._intervalId),e._intervalId=null);e._refreshRequired&&(e.rerender(),e._intervalId=setInterval(e.rerender.bind(e),1E3*e.refreshTime))});return f}});e.webmap.addControl(new L.GeoControl)}}}();isc.Offline.isOffline=()=>!1;isc.setAutoDraw(!1);isc.RPCManager.fetchDataPrompt="Contacting Server...";isc.RPCManager.saveDataPrompt="Contacting Server...";isc.RPCManager.removeDataPrompt="Contacting Server...";isc.RPCManager.handleError=function(a,b){return"string"===typeof a.data?(isc.warn(a.data),!1):this.Super("handleError",arguments)};isc.RPCManager.addClassMethods({loginRequired:function(a,b,c){window.location.assign(SKYVE.Util.CONTEXT_URL)}});Date.setShortDisplayFormat("toEuropeanShortDate");
Date.setNormalDisplayFormat("toEuropeanShortDate");Date.setInputFormat("DMY");
isc.ListGrid.addProperties({getFilterEditorType:function(a){if(null!==a.filterEditorType)return a.filterEditorType;if((a.type===this._$binary||a.type===this._$file||a.type===this._$imageFile)&&null===a.editorType){var b=this.getDataSource();return a.filenameSuppressed||b&&b.getFilenameField&&null===b.getFilenameField(a.name)?"StaticTextItem":"TextItem"}b={...a,canEdit:!1!==a.canFilter,length:null};null!==b._constructor&&delete b._constructor;null!==a.filterEditorType&&(b.editorType=a.filterEditorType);
Object.assign(b,a.filterEditorProperties);return isc.DynamicForm.getEditorType(b,this)}});isc.ResultSet.addMethods({skyveSetCriteria:isc.ResultSet.getPrototype().setCriteria,hasSpatialOperator:function(a){return a?a.operator&&a.operator.startsWith("geo")?!0:a.criteria?a.criteria.some(b=>this.hasSpatialOperator(b)):!1:!1},setCriteria:function(a){const b=this.skyveSetCriteria(a);a&&this.hasSpatialOperator(a)&&this.invalidateCache();return b}});let resizeTimerEvent=null;
isc.Page.setEvent("resize",function(){isc.WindowStack&&(resizeTimerEvent&&clearTimeout(resizeTimerEvent),resizeTimerEvent=setTimeout(()=>{isc.WindowStack.resize()},50))});
const spatialOperators=[{ID:"geoEquals",title:"Equals",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:!0},{ID:"geoDisjoint",title:"Disjoint",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:!0},{ID:"geoIntersects",title:"Intersects",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:!0},{ID:"geoTouches",title:"Touches",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:!0},{ID:"geoCrosses",title:"Crosses",fieldTypes:["geometry"],valueType:"fieldType",
requiresServer:!0},{ID:"geoWithin",title:"Within",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:!0},{ID:"geoContains",title:"Contains",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:!0},{ID:"geoOverlaps",title:"Overlaps",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:!0}];spatialOperators.forEach(a=>{isc.DataSource.addSearchOperator({...a,condition:()=>!0,compareCriteria:()=>-1})});isc.defineClass("BizUtil");
isc.BizUtil.addClassProperties({_modules:{},_unusedPickLists:[],COMPLETE_DATA_SOURCE:isc.RestDataSource.create({dataFormat:"json",jsonPrefix:"",jsonSuffix:"",dataURL:"smartcomplete",fields:[{name:"value",type:"text"}]})});
isc.BizUtil.addClassMethods({_currentView:null,getCurrentView:function(){return isc.BizUtil._currentView},isNumeric:function(a){return"integer float bizDecimal0 bizDecimal1 bizDecimal10 bizDecimal2 bizDecimal5 bizDollarsAndCents bizIntegerPercentage bizIntegerSeparator bizTwoDecimalPlacesPercentage bizTimeDuration".split(" ").includes(a)},isTemporal:function(a){return"date time datetime bizDate bizTime DD_MM MM_DD MMM_DD YYYY_MM HH_MI HH24_MI".split(" ").some(b=>a.startsWith(b))},addFilterRequestParams:function(a,
b,c){const d=c.gather(!1);b.forEach(e=>{const f=c.toDisplay(e.value,d);a[e.name]=f})},convertFilterCriteria:function(a){a&&(a.criteria?a.criteria.forEach(b=>isc.BizUtil.convertFilterCriteria(b)):a.fieldName&&a.fieldName.startsWith("_display_")?a.fieldName=a.fieldName.substring(9):Object.keys(a).forEach(b=>{b.startsWith("_display_")&&(a[b.substring(9)]=a[b],delete a[b])}))},completeFilterCriteria:function(a,b,c){let d={...a};d.operator||(d=isc.DataSource.convertCriteria(d,"substring"));d={_constructor:"AdvancedCriteria",
operator:"and",criteria:[d]};const e=c.gather(!1);b.forEach(f=>{const g=c.toDisplay(f.value,e);d.criteria.push({fieldName:f.name,operator:f.operator,value:g})});return d},createImageButton:function(a,b,c,d,e){return isc.ToolStripButton.create({name:a,icon:b,iconAlign:"center",showDisabledIcon:c,showDownIcon:!1,canHover:!0,getHoverHTML:()=>d,click:e})},createCodeMirror:function(a,b,c){(async()=>{await SKYVE.Util.loadCSS(`codemirror/codemirror.css?v=${SKYVE.Util.v}`);await SKYVE.Util.loadCSS(`codemirror/base16-dark.css?v=${SKYVE.Util.v}`);
await SKYVE.Util.loadJS(`codemirror/codemirror.js?v=${SKYVE.Util.v}`);await SKYVE.Util.loadJS(`codemirror/css/css.js?v=${SKYVE.Util.v}`);await SKYVE.Util.loadJS(`codemirror/htmlmixed/htmlmixed.js?v=${SKYVE.Util.v}`);await SKYVE.Util.loadJS(`codemirror/sql/sql.js?v=${SKYVE.Util.v}`);await SKYVE.Util.loadJS(`codemirror/xml/xml.js?v=${SKYVE.Util.v}`);var d=document.getElementsByName(b);if(d=d&&0<d.length&&"textarea"===d[0].nodeName.toLowerCase()?d[0]:void 0){d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck",
"false");const e=CodeMirror.fromTextArea(d,{mode:c,lineNumbers:!0,theme:"base16-dark"});e.setSize(600,null);e.on("change",()=>e.save())}})()},createSplitButton:function(a,b,c,d,e,f,g,h){return isc.HLayout.create({align:"right",height:1,membersMargin:1,members:[isc.IButton.create({autoFit:!0,title:a,icon:b,showDisabledIcon:c,canHover:!0,getHoverHTML:()=>d,click:e}),isc.MenuButton.create({title:null,width:26,alignMenuLeft:!1,canHover:!0,getHoverHTML:()=>f,menu:isc.Menu.create({autoDraw:!1,showShadow:!0,
shadowDepth:10,target:g,data:h})})]})},createUploadButton:function(a,b,c){const d=[{title:"Clear",icon:"icons/delete.png",click:()=>a.setValue(null),enableIf:()=>null!==a.getValue()}];c&&d.push({title:"Mark Up",icon:"icons/edit.png",click:function(){var e=a.form._view.gather(!1);e=`imageMarkup.xhtml?_n=${a.name.replaceAll("_",".")}&_c=${e._c}&_id=${a.getValue()}`;a.form._view._b&&(e+=`&_b=${a.form._view._b.replaceAll("_",".")}`);isc.WindowStack.popup(null,"Mark Up Image",!0,[isc.HTMLPane.create({contentsType:"page",
contents:"Loading Page...",contentsURL:e})])},enableIf:()=>null!==a.getValue()});return isc.BizUtil.createSplitButton("Upload",null,!1,"Upload content",function(){var e=a.form._view.gather(!1);e=`${b?"image":"content"}Upload.xhtml?_n=${a.name.replaceAll("_",".")}&_c=${e._c}`;a.form._view._b&&(e+=`&_b=${a.form._view._b.replaceAll("_",".")}`);isc.WindowStack.popup(null,b?"Upload Image":"Upload Content",!0,[isc.HTMLPane.create({contentsType:"page",contents:"Loading Page...",contentsURL:e})])},"Other Options",
null,d)},getEditView:function(a,b,c){isc.BizUtil._modules[a]||(isc.BizUtil._modules[a]={},window[a]={});const d=isc.BizUtil._modules[a][b];if(d){const e=d._unused.pop()||eval(`${a}.create${b}()`);e._moduleName=a;e._documentName=b;d._used.push(e);c(e)}else isc.RPCManager.sendRequest({showPrompt:!0,evalResult:!0,httpMethod:"GET",actionURL:`${SKYVE.Util.CONTEXT_URL}smartgen?_mod=${a}&_doc=${b}`,callback:function(){isc.BizUtil._modules[a][b]={_used:[],_unused:[]};isc.BizUtil.getEditView(a,b,c)}})},relinquishEditView:function(a){const b=
isc.BizUtil._modules[a._moduleName][a._documentName];b._used.remove(a);b._unused.push(a)},getPickList:function(a,b,c){const d=isc.BizUtil._unusedPickLists.pop()||isc.BizListGrid.create({isPickList:!0});d.setLookup(a,b,c);return d},relinquishPickList:function(a){a.destroy()},createListGrid:function(){return isc.BizListGrid.create({margin:2})},createCalendar:function(){return isc.Calendar.create({width:"100%",height:"100%",scrollToWorkDay:!0,data:[]})},createTreeGrid:function(){return isc.BizListGrid.create({margin:2,
isTree:!0})},createMap:function(){return isc.BizMap.create()},popupFrame:function(a,b,c,d){window.open(a,b,`width=${c},height=${d},resizable=yes,scrollbars=no,toolbar=no,location=no,directories=no,status=yes,menubar=no,copyhistory=no`).focus()},growl:function(a,b,c){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",life:b||6E3,sticky:c||!1,msgs:a})},onPushMessage:function(a){const b=[],c=[];let d=!1;a.forEach(e=>{if("g"===e.type)b.push({severity:e.severity,summary:e.message});else if("m"===
e.type)"info"!==e.severity&&(d=!0),c.push(e.message);else if("r"===e.type)(e=isc.BizUtil.getCurrentView())&&e.rerender&&e.rerender();else if("j"===e.type)window[e.method](e.argument)});0<b.length&&isc.BizUtil.growl(b);0<c.length&&(a=1<c.length?`<ul>${c.map(e=>`<li>${e}</li>`).join("")}</ul>`:c[0],d?isc.warn(a):isc.say(a))}});isc.addMethods(Date.prototype,{toHH24_MI:function(){return`${this.getHours().stringify()}:${this.getMinutes().stringify()}`},toHH_MI:function(){let a=this.getHours(),b=" AM",c=a.stringify();0===a?c="12":12===a?b=" PM":12<a&&(b=" PM",c=(a-12).stringify());return`${c}:${this.getMinutes().stringify()}${b}`},toHH24_MI_SS:function(){return`${this.toHH24_MI()}:${this.getSeconds().stringify()}`},toHH_MI_SS:function(){const a=this.toHH_MI();return`${a.substring(0,a.length-3)}:${this.getSeconds().stringify()}${a.substring(a.length-
3)}`},toDD_MM_YYYY:function(){return`${this.getDate().stringify()}/${(this.getMonth()+1).stringify()}/${this.getFullYear().stringify()}`},toDD_MM_YYYY_HH24_MI:function(){return`${this.toDD_MM_YYYY()} ${this.toHH24_MI()}`},toDD_MM_YYYY_HH_MI:function(){return`${this.toDD_MM_YYYY()} ${this.toHH_MI()}`},toDD_MM_YYYY_HH24_MI_SS:function(){return`${this.toDD_MM_YYYY()} ${this.toHH24_MI_SS()}`},toDD_MM_YYYY_HH_MI_SS:function(){return`${this.toDD_MM_YYYY()} ${this.toHH_MI_SS()}`},toDD_MMM_YYYY:function(){return`${this.getDate().stringify()}-${"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[this.getMonth()]}-${this.getFullYear().stringify()}`},
toDD_MMM_YYYY_HH24_MI:function(){return`${this.toDD_MMM_YYYY()} ${this.toHH24_MI()}`},toDD_MMM_YYYY_HH_MI:function(){return`${this.toDD_MMM_YYYY()} ${this.toHH_MI()}`},toDD_MMM_YYYY_HH24_MI_SS:function(){return`${this.toDD_MMM_YYYY()} ${this.toHH24_MI_SS()}`},toDD_MMM_YYYY_HH_MI_SS:function(){return`${this.toDD_MMM_YYYY()} ${this.toHH_MI_SS()}`},toMM_DD_YYYY:function(){return`${(this.getMonth()+1).stringify()}/${this.getDate().stringify()}/${this.getFullYear().stringify()}`},toMM_DD_YYYY_HH24_MI:function(){return`${this.toMM_DD_YYYY()} ${this.toHH24_MI()}`},
toMM_DD_YYYY_HH_MI:function(){return`${this.toMM_DD_YYYY()} ${this.toHH_MI()}`},toMM_DD_YYYY_HH24_MI_SS:function(){return`${this.toMM_DD_YYYY()} ${this.toHH24_MI_SS()}`},toMM_DD_YYYY_HH_MI_SS:function(){return`${this.toMM_DD_YYYY()} ${this.toHH_MI_SS()}`},toMMM_DD_YYYY:function(){return`${"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[this.getMonth()]}-${this.getDate().stringify()}-${this.getFullYear().stringify()}`},toMMM_DD_YYYY_HH24_MI:function(){return`${this.toMMM_DD_YYYY()} ${this.toHH24_MI()}`},
toMMM_DD_YYYY_HH_MI:function(){return`${this.toMMM_DD_YYYY()} ${this.toHH_MI()}`},toMMM_DD_YYYY_HH24_MI_SS:function(){return`${this.toMMM_DD_YYYY()} ${this.toHH24_MI_SS()}`},toMMM_DD_YYYY_HH_MI_SS:function(){return`${this.toMMM_DD_YYYY()} ${this.toHH_MI_SS()}`},toYYYY_MM_DD:function(){return`${this.getFullYear().stringify()}/${(this.getMonth()+1).stringify()}/${this.getDate().stringify()}`},toYYYY_MM_DD_HH24_MI:function(){return`${this.toYYYY_MM_DD()} ${this.toHH24_MI()}`},toYYYY_MM_DD_HH_MI:function(){return`${this.toYYYY_MM_DD()} ${this.toHH_MI()}`},
toYYYY_MM_DD_HH24_MI_SS:function(){return`${this.toYYYY_MM_DD()} ${this.toHH24_MI_SS()}`},toYYYY_MM_DD_HH_MI_SS:function(){return`${this.toYYYY_MM_DD()} ${this.toHH_MI_SS()}`}});isc.ClassFactory.defineClass("BizDateItem","DateItem");
isc.BizDateItem.addClassMethods({_replaceMonthWithOrdinal:function(a,b){const c=b.toLowerCase(),d={jan:"1",feb:"2",mar:"3",apr:"4",may:"5",jun:"6",jul:"7",aug:"8",sep:"9",oct:"10",nov:"11",dec:"12"};for(const [e,f]of Object.entries(d))if(c.startsWith(e))return a.replaceAll(b,f);return a},parseInput:function(a,b){if(isc.isA.Date(a))return a;if(a){a=a.trim();if(b&&b.startsWith("toMMM")){var c=/^([A-Za-z]+)[^A-Za-z0-9]\d?\d.*$/.exec(a);c&&(a=this._replaceMonthWithOrdinal(a,c[1]))}else(c=/^\d?\d[^A-Za-z0-9]([A-Za-z]+).*$/.exec(a))&&
(a=this._replaceMonthWithOrdinal(a,c[1]));c=/^\d{4}-\d\d-.*$/.test(a)?isc.DateUtil.parseSchemaDate(a):null;c||(b=b?.startsWith("toMM")?"MDY":b?.startsWith("toYYYY")?"YMD":"DMY",c=isc.DateUtil.parseInput(a,b,50,!0),!c&&/^\d?\d[^A-Za-z0-9]\d?\d$/.test(a)&&(c=Date.create().getFullYear().stringify(),c=isc.DateUtil.parseInput("MDY"===b?`${a} ${c}`:"YMD"===b?`${c} ${a}`:`${a} ${c}`,b,50,!0)));return c}return null},format:function(a,b){return isc.isA.Date(a)?a[b]():a}});
isc.BizDateItem.addProperties({enforceDate:!0,changeOnBlur:!0,changeOnKeypress:!1,width:100,useTextField:!0,showHint:!0,showHintInField:!0,hint:"DD MM(M) YY(YY)",textFieldProperties:{selectOnFocus:!0},showPickerTimeItem:!1,dateFormatter:"toDD_MM_YYYY",parseDate:function(a){return isc.BizDateItem.parseInput(a,this.dateFormatter)}});
isc.BizDateItem.addMethods({mapValueToDisplay:function(a){if(null===a||void 0===a)return isc.emptyString;isc.isA.Date(a)||(a=isc.BizDateItem.parseInput(a,this.dateFormatter));return isc.BizDateItem.format(a,this.dateFormatter)},mapDisplayToValue:function(a){return a=isc.isAn.emptyString(a)?null:isc.BizDateItem.parseInput(a,this.dateFormatter)},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){"string"===typeof a&&
(a=isc.BizDateItem.parseInput(a,this.dateFormatter));return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizDate",inheritsFrom:"date",editorType:"BizDateItem",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toDD_MM_YYYY")}});isc.SimpleType.create({name:"DD_MM_YYYY",inheritsFrom:"bizDate"});
isc.ClassFactory.defineClass("DD_MMM_YYYY_Item","BizDateItem");isc.DD_MMM_YYYY_Item.addProperties({dateFormatter:"toDD_MMM_YYYY"});isc.SimpleType.create({name:"DD_MMM_YYYY",inheritsFrom:"bizDate",editorType:"DD_MMM_YYYY_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toDD_MMM_YYYY")}});isc.ClassFactory.defineClass("MM_DD_YYYY_Item","BizDateItem");isc.MM_DD_YYYY_Item.addProperties({hint:"MM(M) DD YY(YY)",dateFormatter:"toMM_DD_YYYY"});
isc.SimpleType.create({name:"MM_DD_YYYY",inheritsFrom:"bizDate",editorType:"MM_DD_YYYY_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toMM_DD_YYYY")}});isc.ClassFactory.defineClass("MMM_DD_YYYY_Item","BizDateItem");isc.MMM_DD_YYYY_Item.addProperties({hint:"MM(M) DD YY(YY)",dateFormatter:"toMMM_DD_YYYY"});
isc.SimpleType.create({name:"MMM_DD_YYYY",inheritsFrom:"bizDate",editorType:"MMM_DD_YYYY_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toMMM_DD_YYYY")}});isc.ClassFactory.defineClass("YYYY_MM_DD_Item","BizDateItem");isc.YYYY_MM_DD_Item.addProperties({hint:"YY(YY) MM(M) DD",dateFormatter:"toYYYY_MM_DD"});
isc.SimpleType.create({name:"YYYY_MM_DD",inheritsFrom:"bizDate",editorType:"YYYY_MM_DD_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toYYYY_MM_DD")}});isc.ClassFactory.defineClass("BizDateTimeItem","DateTimeItem");
isc.BizDateTimeItem.addProperties({enforceDate:!0,changeOnBlur:!0,changeOnKeypress:!1,width:200,useTextField:!0,showHint:!0,showHintInField:!0,hint:"DD MM(M) YY(YY) HH:MI AM/PM",textFieldProperties:{selectOnFocus:!0},showPickerTimeItem:!0,pickerTimeItemProperties:{showSecondItem:!1,use24HourTime:!1},dateFormatter:"toDD_MM_YYYY_HH_MI",parseDate:function(a){return isc.BizDateItem.parseInput(a,this.dateFormatter)}});
isc.BizDateTimeItem.addMethods({mapValueToDisplay:function(a){if(null==a)return isc.emptyString;isc.isA.Date(a)||(a=isc.BizDateItem.parseInput(a,this.dateFormatter));return isc.BizDateItem.format(a,this.dateFormatter)},mapDisplayToValue:function(a){return isc.isAn.emptyString(a)?null:isc.BizDateItem.parseInput(a,this.dateFormatter)},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){isc.isA.String(a)&&(a=isc.BizDateItem.parseInput(a,
this.dateFormatter));return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizDateTime",inheritsFrom:"dateTime",editorType:"BizDateTimeItem",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toDD_MM_YYYY_HH_MI")}});isc.SimpleType.create({name:"DD_MM_YYYY_HH_MI",inheritsFrom:"bizDateTime"});
isc.ClassFactory.defineClass("DD_MM_YYYY_HH24_MI_Item","BizDateTimeItem");isc.DD_MM_YYYY_HH24_MI_Item.addProperties({dateFormatter:"toDD_MM_YYYY_HH24_MI",hint:"DD MM(M) YY(YY) HH(24):MI",pickerTimeItemProperties:{showSecondItem:!1,use24HourTime:!0}});isc.SimpleType.create({name:"DD_MM_YYYY_HH24_MI",inheritsFrom:"bizDateTime",editorType:"DD_MM_YYYY_HH24_MI_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toDD_MM_YYYY_HH24_MI")}});
isc.ClassFactory.defineClass("DD_MM_YYYY_HH_MI_SS_Item","BizDateTimeItem");isc.DD_MM_YYYY_HH_MI_SS_Item.addProperties({dateFormatter:"toDD_MM_YYYY_HH_MI_SS",hint:"DD MM(M) YY(YY) HH:MI(:SS) AM/PM",pickerTimeItemProperties:{showSecondItem:!0,use24HourTime:!1}});isc.SimpleType.create({name:"DD_MM_YYYY_HH_MI_SS",inheritsFrom:"bizDateTime",editorType:"DD_MM_YYYY_HH_MI_SS_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toDD_MM_YYYY_HH_MI_SS")}});
isc.ClassFactory.defineClass("DD_MM_YYYY_HH24_MI_SS_Item","BizDateTimeItem");isc.DD_MM_YYYY_HH24_MI_SS_Item.addProperties({dateFormatter:"toDD_MM_YYYY_HH24_MI_SS",hint:"DD MM(M) YY(YY) HH(24):MI(:SS)",pickerTimeItemProperties:{showSecondItem:!0,use24HourTime:!0}});isc.SimpleType.create({name:"DD_MM_YYYY_HH24_MI_SS",inheritsFrom:"bizDateTime",editorType:"DD_MM_YYYY_HH24_MI_SS_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toDD_MM_YYYY_HH24_MI_SS")}});
isc.ClassFactory.defineClass("DD_MMM_YYYY_HH_MI_Item","BizDateTimeItem");isc.DD_MMM_YYYY_HH_MI_Item.addProperties({dateFormatter:"toDD_MMM_YYYY_HH_MI",hint:"DD MM(M) YY(YY) HH:MI AM/PM",pickerTimeItemProperties:{showSecondItem:!1,use24HourTime:!1}});isc.SimpleType.create({name:"DD_MMM_YYYY_HH_MI",inheritsFrom:"bizDateTime",editorType:"DD_MMM_YYYY_HH_MI_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toDD_MMM_YYYY_HH_MI")}});
isc.ClassFactory.defineClass("DD_MMM_YYYY_HH24_MI_Item","BizDateTimeItem");isc.DD_MMM_YYYY_HH24_MI_Item.addProperties({dateFormatter:"toDD_MMM_YYYY_HH24_MI",hint:"DD MM(M) YY(YY) HH(24):MI",pickerTimeItemProperties:{showSecondItem:!1,use24HourTime:!0}});isc.SimpleType.create({name:"DD_MMM_YYYY_HH24_MI",inheritsFrom:"bizDateTime",editorType:"DD_MMM_YYYY_HH24_MI_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toDD_MMM_YYYY_HH24_MI")}});
isc.ClassFactory.defineClass("DD_MMM_YYYY_HH_MI_SS_Item","BizDateTimeItem");isc.DD_MMM_YYYY_HH_MI_SS_Item.addProperties({dateFormatter:"toDD_MMM_YYYY_HH_MI_SS",hint:"DD MM(M) YY(YY) HH:MI(:SS) AM/PM",pickerTimeItemProperties:{showSecondItem:!0,use24HourTime:!1}});isc.SimpleType.create({name:"DD_MMM_YYYY_HH_MI_SS",inheritsFrom:"bizDateTime",editorType:"DD_MMM_YYYY_HH_MI_SS_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toDD_MMM_YYYY_HH_MI_SS")}});
isc.ClassFactory.defineClass("DD_MMM_YYYY_HH24_MI_SS_Item","BizDateTimeItem");isc.DD_MMM_YYYY_HH24_MI_SS_Item.addProperties({dateFormatter:"toDD_MMM_YYYY_HH24_MI_SS",hint:"DD MM(M) YY(YY) HH(24):MI(:SS)",pickerTimeItemProperties:{showSecondItem:!0,use24HourTime:!0}});isc.SimpleType.create({name:"DD_MMM_YYYY_HH24_MI_SS",inheritsFrom:"bizDateTime",editorType:"DD_MMM_YYYY_HH24_MI_SS_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toDD_MMM_YYYY_HH24_MI_SS")}});
isc.ClassFactory.defineClass("MM_DD_YYYY_HH_MI_Item","BizDateTimeItem");isc.MM_DD_YYYY_HH_MI_Item.addProperties({dateFormatter:"toMM_DD_YYYY_HH_MI",hint:"MM(M) DD YY(YY) HH:MI AM/PM",pickerTimeItemProperties:{showSecondItem:!1,use24HourTime:!1}});isc.SimpleType.create({name:"MM_DD_YYYY_HH_MI",inheritsFrom:"bizDateTime",editorType:"MM_DD_YYYY_HH_MI_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toMM_DD_YYYY_HH_MI")}});
isc.ClassFactory.defineClass("MM_DD_YYYY_HH24_MI_Item","BizDateTimeItem");isc.MM_DD_YYYY_HH24_MI_Item.addProperties({dateFormatter:"toMM_DD_YYYY_HH24_MI",hint:"MM(M) DD YY(YY) HH(24):MI",pickerTimeItemProperties:{showSecondItem:!1,use24HourTime:!0}});isc.SimpleType.create({name:"MM_DD_YYYY_HH24_MI",inheritsFrom:"bizDateTime",editorType:"MM_DD_YYYY_HH24_MI_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toMM_DD_YYYY_HH24_MI")}});
isc.ClassFactory.defineClass("MM_DD_YYYY_HH_MI_SS_Item","BizDateTimeItem");isc.MM_DD_YYYY_HH_MI_SS_Item.addProperties({dateFormatter:"toMM_DD_YYYY_HH_MI_SS",hint:"MM(M) DD YY(YY) HH:MI(:SS) AM/PM",pickerTimeItemProperties:{showSecondItem:!0,use24HourTime:!1}});isc.SimpleType.create({name:"MM_DD_YYYY_HH_MI_SS",inheritsFrom:"bizDateTime",editorType:"MM_DD_YYYY_HH_MI_SS_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toMM_DD_YYYY_HH_MI_SS")}});
isc.ClassFactory.defineClass("MM_DD_YYYY_HH24_MI_SS_Item","BizDateTimeItem");isc.MM_DD_YYYY_HH24_MI_SS_Item.addProperties({hint:"MM(M) DD YY(YY) HH(24):MI(:SS)",dateFormatter:"toMM_DD_YYYY_HH24_MI_SS",pickerTimeItemProperties:{showSecondItem:!0,use24HourTime:!0}});isc.SimpleType.create({name:"MM_DD_YYYY_HH24_MI_SS",inheritsFrom:"bizDateTime",editorType:"MM_DD_YYYY_HH24_MI_SS_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toMM_DD_YYYY_HH24_MI_SS")}});
isc.ClassFactory.defineClass("MMM_DD_YYYY_HH_MI_Item","BizDateTimeItem");isc.MMM_DD_YYYY_HH_MI_Item.addProperties({dateFormatter:"toMMM_DD_YYYY_HH_MI",hint:"MM(M) DD YY(YY) HH:MI AM/PM",pickerTimeItemProperties:{showSecondItem:!1,use24HourTime:!1}});isc.SimpleType.create({name:"MMM_DD_YYYY_HH_MI",inheritsFrom:"bizDateTime",editorType:"MMM_DD_YYYY_HH_MI_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toMMM_DD_YYYY_HH_MI")}});
isc.ClassFactory.defineClass("MMM_DD_YYYY_HH24_MI_Item","BizDateTimeItem");isc.MMM_DD_YYYY_HH24_MI_Item.addProperties({dateFormatter:"toMMM_DD_YYYY_HH24_MI",hint:"MM(M) DD YY(YY) HH(24):MI",pickerTimeItemProperties:{showSecondItem:!1,use24HourTime:!0}});isc.SimpleType.create({name:"MMM_DD_YYYY_HH24_MI",inheritsFrom:"bizDateTime",editorType:"MMM_DD_YYYY_HH24_MI_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toMMM_DD_YYYY_HH24_MI")}});
isc.ClassFactory.defineClass("MMM_DD_YYYY_HH_MI_SS_Item","BizDateTimeItem");isc.MMM_DD_YYYY_HH_MI_SS_Item.addProperties({dateFormatter:"toMMM_DD_YYYY_HH_MI_SS",hint:"MM(M) DD YY(YY) HH(:MI(:SS) AM/PM",pickerTimeItemProperties:{showSecondItem:!0,use24HourTime:!1}});isc.SimpleType.create({name:"MMM_DD_YYYY_HH_MI_SS",inheritsFrom:"bizDateTime",editorType:"MMM_DD_YYYY_HH_MI_SS_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toMMM_DD_YYYY_HH_MI_SS")}});
isc.ClassFactory.defineClass("MMM_DD_YYYY_HH24_MI_SS_Item","BizDateTimeItem");isc.MMM_DD_YYYY_HH24_MI_SS_Item.addProperties({hint:"MM(M) DD YY(YY) HH(24):MI(:SS)",dateFormatter:"toMMM_DD_YYYY_HH24_MI_SS",pickerTimeItemProperties:{showSecondItem:!0,use24HourTime:!0}});isc.SimpleType.create({name:"MMM_DD_YYYY_HH24_MI_SS",inheritsFrom:"bizDateTime",editorType:"MMM_DD_YYYY_HH24_MI_SS_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toMMM_DD_YYYY_HH24_MI_SS")}});
isc.ClassFactory.defineClass("YYYY_MM_DD_HH_MI_Item","BizDateTimeItem");isc.YYYY_MM_DD_HH_MI_Item.addProperties({dateFormatter:"toYYYY_MM_DD_HH_MI",hint:"YY(YY) MM(M) DD HH:MI AM/PM",pickerTimeItemProperties:{showSecondItem:!1,use24HourTime:!1}});isc.SimpleType.create({name:"YYYY_MM_DD_HH_MI",inheritsFrom:"bizDateTime",editorType:"YYYY_MM_DD_HH_MI_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toYYYY_MM_DD_HH_MI")}});
isc.ClassFactory.defineClass("YYYY_MM_DD_HH24_MI_Item","BizDateTimeItem");isc.YYYY_MM_DD_HH24_MI_Item.addProperties({dateFormatter:"toYYYY_MM_DD_HH24_MI",hint:"YY(YY) MM(M) DD HH(24):MI",pickerTimeItemProperties:{showSecondItem:!1,use24HourTime:!0}});isc.SimpleType.create({name:"YYYY_MM_DD_HH24_MI",inheritsFrom:"bizDateTime",editorType:"YYYY_MM_DD_HH24_MI_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toYYYY_MM_DD_HH24_MI")}});
isc.ClassFactory.defineClass("YYYY_MM_DD_HH_MI_SS_Item","BizDateTimeItem");isc.YYYY_MM_DD_HH_MI_SS_Item.addProperties({dateFormatter:"toYYYY_MM_DD_HH_MI_SS",hint:"YY(YY) MM(M) DD HH:MI(:SS) AM/PM",pickerTimeItemProperties:{showSecondItem:!0,use24HourTime:!1}});isc.SimpleType.create({name:"YYYY_MM_DD_HH_MI_SS",inheritsFrom:"bizDateTime",editorType:"YYYY_MM_DD_HH_MI_SS_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toYYYY_MM_DD_HH_MI_SS")}});
isc.ClassFactory.defineClass("YYYY_MM_DD_HH24_MI_SS_Item","BizDateTimeItem");isc.YYYY_MM_DD_HH24_MI_SS_Item.addProperties({hint:"YY(YY) MM(M) DD HH(24):MI(:SS)",dateFormatter:"toYYYY_MM_DD_HH24_MI_SS",pickerTimeItemProperties:{showSecondItem:!0,use24HourTime:!0}});isc.SimpleType.create({name:"YYYY_MM_DD_HH24_MI_SS",inheritsFrom:"bizDateTime",editorType:"YYYY_MM_DD_HH24_MI_SS_Item",shortDisplayFormatter:function(a,b,c,d){return isc.BizDateItem.format(a,"toYYYY_MM_DD_HH24_MI_SS")}});
isc.TimeItem.addMethods({init:function(){this.Super("init",arguments)}});isc.ClassFactory.defineClass("BizTimeItem","TimeItem");isc.BizTimeItem.addProperties({useTextField:!0,use24HourTime:!1,showHint:!0,showHintInField:!0,hint:"HH:MI am/pm",textFieldProperties:{selectOnFocus:!0},displayFormat:"toShortTime",timeFormatter:"toShortTime"});isc.BizTimeItem.addMethods({setValue:function(a){isc.isA.String(a)&&(a=isc.Time.parseInput(a));return this.Super("setValue",[a])},hasAdvancedCriteria:function(){return!1}});
isc.SimpleType.create({name:"bizTime",inheritsFrom:"time",editorType:"BizTimeItem",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.Time.toShortTime(a,"toShortTime",!0)}});isc.SimpleType.create({name:"HH_MI",inheritsFrom:"bizTime"});isc.ClassFactory.defineClass("HH_MI_SS_Item","BizTimeItem");
isc.HH_MI_SS_Item.addProperties({use24HourTime:!1,hint:"HH:MI:SS am/pm",dateFormatter:"toTime",timeFormatter:"toTime"});isc.SimpleType.create({name:"HH_MI_SS",inheritsFrom:"bizTime",editorType:"HH_MI_SS_Item",shortDisplayFormatter:function(a,b,c,d){return isc.Time.toTime(a,"toTime",!0)}});isc.ClassFactory.defineClass("HH24_MI_Item","BizTimeItem");isc.HH24_MI_Item.addProperties({use24HourTime:!0,hint:"HH24:MI",dateFormatter:"toShortPadded24HourTime",timeFormatter:"toShortPadded24HourTime"});
isc.SimpleType.create({name:"HH24_MI",inheritsFrom:"bizTime",editorType:"HH24_MI_Item",shortDisplayFormatter:function(a,b,c,d){return isc.Time.toShortTime(a,"toShortPadded24HourTime",!0)}});isc.ClassFactory.defineClass("HH24_MI_SS_Item","BizTimeItem");isc.HH24_MI_SS_Item.addProperties({use24HourTime:!0,hint:"HH24:MI:SS",dateFormatter:"toPadded24HourTime",timeFormatter:"toPadded24HourTime"});
isc.SimpleType.create({name:"HH24_MI_SS",inheritsFrom:"bizTime",editorType:"HH24_MI_SS_Item",shortDisplayFormatter:function(a,b,c,d){return isc.Time.toTime(a,"toPadded24HourTime",!0)}});isc.ClassFactory.defineClass("BizDecimal2Item","TextItem");
isc.BizDecimal2Item.addClassMethods({parseInput:function(a){if(isc.isA.Number(a))return a;if(a){a=a.toString().trim().replace(/\$|,/g,"");if(isNaN(a))return"";a=parseFloat(a);return 1E18<=a?"":a}return""},format:function(a,b){return isc.isA.Number(a)?a.toLocalizedString(b,".",",","-"):a}});isc.BizDecimal2Item.addProperties({changeOnBlur:!0,changeOnKeypress:!1,width:100,showHint:!1,selectOnFocus:!0,decimalPlaces:2});
isc.BizDecimal2Item.addMethods({mapValueToDisplay:function(a){if(null==a)return isc.emptyString;isc.isA.Number(a)||(a=isc.BizDecimal2Item.parseInput(a));return isc.BizDecimal2Item.format(a,this.decimalPlaces)},mapDisplayToValue:function(a){return isc.isAn.emptyString(a)?null:isc.BizDecimal2Item.parseInput(a)},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){isc.isA.String(a)&&(a=isc.BizDecimal2Item.parseInput(a));
return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizDecimal2",inheritsFrom:"float",editorType:"BizDecimal2Item",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizDecimal2Item.format(a,2)},validators:[{type:"custom",clientOnly:!0,condition:"(value == null) || isc.isA.Number(value)"}]});
isc.ClassFactory.defineClass("BizDecimal5Item","BizDecimal2Item");isc.BizDecimal5Item.addProperties({decimalPlaces:5});isc.SimpleType.create({name:"bizDecimal5",inheritsFrom:"float",editorType:"BizDecimal5Item",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizDecimal2Item.format(a,5)},validators:[{type:"custom",clientOnly:!0,condition:"(value == null) || isc.isA.Number(value)"}]});
isc.ClassFactory.defineClass("BizDecimal10Item","BizDecimal2Item");isc.BizDecimal10Item.addProperties({decimalPlaces:10});isc.SimpleType.create({name:"bizDecimal10",inheritsFrom:"float",editorType:"BizDecimal10Item",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizDecimal2Item.format(a,10)},validators:[{type:"custom",clientOnly:!0,condition:"(value == null) || isc.isA.Number(value)"}]});
isc.ClassFactory.defineClass("BizDecimal0Item","BizDecimal2Item");isc.BizDecimal0Item.addProperties({decimalPlaces:0});isc.SimpleType.create({name:"bizDecimal0",inheritsFrom:"float",editorType:"BizDecimal0Item",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizDecimal2Item.format(a,0)},validators:[{type:"custom",clientOnly:!0,condition:"(value == null) || isc.isA.Number(value)"}]});
isc.ClassFactory.defineClass("BizDecimal1Item","BizDecimal2Item");isc.BizDecimal1Item.addProperties({decimalPlaces:1});isc.SimpleType.create({name:"bizDecimal1",inheritsFrom:"float",editorType:"BizDecimal1Item",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizDecimal2Item.format(a,1)},validators:[{type:"custom",clientOnly:!0,condition:"(value == null) || isc.isA.Number(value)"}]});
isc.ClassFactory.defineClass("BizDollarsAndCentsItem","BizDecimal2Item");isc.BizDollarsAndCentsItem.addProperties({showHint:!0,showHintInField:!0,hint:"(+/-)$$$$$.cc"});
isc.SimpleType.create({name:"bizDollarsAndCents",inheritsFrom:"float",editorType:"BizDollarsAndCentsItem",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizDollarsAndCentsItem.format(a,2)},validators:[{type:"custom",clientOnly:!0,condition:"(value == null) || isc.isA.Number(value)"}]});
isc.ClassFactory.defineClass("BizIntegerPercentageItem","TextItem");isc.BizIntegerPercentageItem.addClassMethods({parseInput:function(a){if(isc.isA.Number(a))return a;if(a){a=a.toString().trim().trim("%");if(isNaN(a))return null;a=Math.round(parseFloat(a))/100;1E18<=a&&(a=null);return a}return null},format:function(a){return isc.isA.Number(a)?(100*a).toLocalizedString(0,".",",","-")+"%":a}});
isc.BizIntegerPercentageItem.addProperties({changeOnBlur:!0,changeOnKeypress:!1,width:100,showHint:!0,showHintInField:!0,hint:"(+/-)99999",selectOnFocus:!0});
isc.BizIntegerPercentageItem.addMethods({mapValueToDisplay:function(a){if(null==a)return isc.emptyString;isc.isA.Number(a)||(a=isc.BizIntegerPercentageItem.parseInput(a));return isc.BizIntegerPercentageItem.format(a)},mapDisplayToValue:function(a){return a=isc.isAn.emptyString(a)?null:isc.BizIntegerPercentageItem.parseInput(a)},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){isc.isA.String(a)&&(a=isc.BizIntegerPercentageItem.parseInput(a));
return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizIntegerPercentage",inheritsFrom:"integer",editorType:"BizIntegerPercentageItem",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizIntegerPercentageItem.format(a)},validators:[{type:"custom",clientOnly:!0,condition:"(value == null) || isc.isA.Number(value)"}]});
isc.ClassFactory.defineClass("BizSimplePercentageItem","BizIntegerPercentageItem");isc.BizSimplePercentageItem.addClassMethods({parseInput:function(a){if(isc.isA.Number(a))return a;if(a){a=a.toString().trim(" ").trim("%");if(isNaN(a))return null;a=Math.round(parseFloat(a));1E18<=a&&(a=null);return a}return null},format:function(a){return isc.isA.Number(a)?a.toLocalizedString(0,".",",","-")+"%":a}});
isc.BizSimplePercentageItem.addMethods({mapValueToDisplay:function(a){if(null==a)return isc.emptyString;isc.isA.Number(a)||(a=isc.BizSimplePercentageItem.parseInput(a));return isc.BizSimplePercentageItem.format(a)},mapDisplayToValue:function(a){return a=isc.isAn.emptyString(a)?null:isc.BizSimplePercentageItem.parseInput(a)},setValue:function(a){isc.isA.String(a)&&(a=isc.BizSimplePercentageItem.parseInput(a));return this.Super("setValue",[a])}});
isc.SimpleType.create({name:"bizSimplePercentage",inheritsFrom:"float",editorType:"BizSimplePercentageItem",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizSimplePercentageItem.format(a)},validators:[{type:"custom",clientOnly:!0,condition:"(value == null) || isc.isA.Number(value)"}]});
isc.ClassFactory.defineClass("BizIntegerSeparatorItem","TextItem");isc.BizIntegerSeparatorItem.addClassMethods({parseInput:function(a){if(isc.isA.Number(a))return a;if(a){a=a.toString().replace(/,/g,"").trim(" ");if(isNaN(a))return null;a=Math.round(parseFloat(a));1E18<=a&&(a=null);return a}return null},format:function(a){return isc.isA.Number(a)?a.toLocalizedString(0,".",",","-"):a}});
isc.BizIntegerSeparatorItem.addProperties({changeOnBlur:!0,changeOnKeypress:!1,width:100,showHint:!0,showHintInField:!0,hint:"(+/-)99,999,999",selectOnFocus:!0});
isc.BizIntegerSeparatorItem.addMethods({mapValueToDisplay:function(a){if(null==a)return isc.emptyString;isc.isA.Number(a)||(a=isc.BizIntegerSeparatorItem.parseInput(a));return isc.BizIntegerSeparatorItem.format(a)},mapDisplayToValue:function(a){return a=isc.isAn.emptyString(a)?null:isc.BizIntegerSeparatorItem.parseInput(a)},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){isc.isA.String(a)&&(a=isc.BizIntegerSeparatorItem.parseInput(a));
return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizIntegerSeparator",inheritsFrom:"integer",editorType:"BizIntegerSeparatorItem",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizIntegerSeparatorItem.format(a)},validators:[{type:"custom",clientOnly:!0,condition:"(value == null) || isc.isA.Number(value)"}]});
isc.ClassFactory.defineClass("BizTwoDecimalPlacesPercentageItem","BizIntegerPercentageItem");isc.BizTwoDecimalPlacesPercentageItem.addClassMethods({parseInput:function(a){if(isc.isA.Number(a))return a;if(a){a=a.toString().trim(" ").trim("%");if(isNaN(a))return null;a=Math.round(100*parseFloat(a))/1E4;1E18<=a&&(a=null);return a}return null},format:function(a){return isc.isA.Number(a)?(100*a).toLocalizedString(2,".",",","-")+"%":a}});isc.BizTwoDecimalPlacesPercentageItem.addProperties({hint:"(+/-)99999.99"});
isc.BizTwoDecimalPlacesPercentageItem.addMethods({mapValueToDisplay:function(a){if(null==a)return isc.emptyString;isc.isA.Number(a)||(a=isc.BizTwoDecimalPlacesPercentageItem.parseInput(a));return isc.BizTwoDecimalPlacesPercentageItem.format(a)},mapDisplayToValue:function(a){return a=isc.isAn.emptyString(a)?null:isc.BizTwoDecimalPlacesPercentageItem.parseInput(a)},setValue:function(a){isc.isA.String(a)&&(a=isc.BizTwoDecimalPlacesPercentageItem.parseInput(a));return this.Super("setValue",[a])}});
isc.SimpleType.create({name:"bizTwoDecimalPlacesPercentage",inheritsFrom:"float",editorType:"BizTwoDecimalPlacesPercentageItem",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizTwoDecimalPlacesPercentageItem.format(a)},validators:[{type:"custom",clientOnly:!0,condition:"(value == null) || isc.isA.Number(value)"}]});
isc.ClassFactory.defineClass("BizTimeDurationItem","TextItem");
isc.BizTimeDurationItem.addClassMethods({parseInput:function(a){if(isc.isA.Number(a))return a;if(a){var b=/^\s*\s*([-+]?\d+)\s*\.\s*(\d?\d)?\s*$/.exec(a);if(b)return b=parseFloat(b[1]+"."+(b[2]|0)),1E18<=b&&(b=null),b;if(b=/^\s*\s*([-+]?\d+)\s*\D?\s*(\d?\d)?\s*$/.exec(a))return a=parseInt(b[1]|0,10),b=Math.min(parseInt(b[2]|0,10),59),0<=a?a+b/60:a-b/60}return null},format:function(a){if(!isc.isA.Number(a))return a;let b;if(0<=a){b=Math.floor(a);var c=a-b}else b=Math.ceil(a),c=Math.abs(a-b);c=Math.round(60*
c).toString();"60"==c?(b=0<=a?b+1:b-1,c="00"):1==c.length&&(c="0"+c);return b+":"+c}});isc.BizTimeDurationItem.addProperties({changeOnBlur:!0,changeOnKeypress:!1,width:100,showHint:!0,showHintInField:!0,hint:"(+/-)HHH:MM",selectOnFocus:!0});
isc.BizTimeDurationItem.addMethods({mapValueToDisplay:function(a){if(null==a)return isc.emptyString;isc.isA.Number(a)||(a=isc.BizTimeDurationItem.parseInput(a));return isc.BizTimeDurationItem.format(a)},mapDisplayToValue:function(a){return a=isc.isAn.emptyString(a)?null:isc.BizTimeDurationItem.parseInput(a)},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){isc.isA.String(a)&&(a=isc.BizTimeDurationItem.parseInput(a));
return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizTimeDuration",inheritsFrom:"float",editorType:"BizTimeDurationItem",editFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},normalDisplayFormatter:function(a,b,c,d){return this.shortDisplayFormatter(a,b,c,d)},shortDisplayFormatter:function(a,b,c,d){return isc.BizTimeDurationItem.format(a)},validators:[{type:"custom",clientOnly:!0,condition:"(value == null) || isc.isA.Number(value)"}]});
isc.ClassFactory.defineClass("BizContentLinkItem",isc.CanvasItem);isc.BizContentLinkItem.addProperties({height:25,width:"*",rowSpan:"*",endRow:!1,startRow:!1,canFocus:!0,shouldSaveValue:!0});
isc.BizContentLinkItem.addMethods({init:function(a){this._link=isc.HTMLFlow.create({contents:"Empty",width:"100%"});this.canvas=a.editable?isc.HLayout.create({defaultLayoutAlign:"center",members:[this._link,isc.LayoutSpacer.create({width:3}),isc.BizUtil.createUploadButton(this,!1,!1)]}):isc.HLayout.create({defaultLayoutAlign:"center",members:[this._link]});this.Super("init",arguments)},setValue:function(a){if(null!=this.canvas&&!this.userSetValue)if(a){const b=SKYVE.Util.CONTEXT_URL+"content?_n="+
a+"&_doc="+this.form._view._mod+"."+this.form._view._doc+"&_b="+this.name.replaceAll("_",".");this._link.setContents('<div style="line-height:25px;vertical-align:middle;">'+this.canvas.linkHTML(b,this.value?this.value:"Content","_blank")+"</div>")}else this._link.setContents('<div style="line-height:25px;vertical-align:middle;">&lt;Empty&gt;</div>');return this.Super("setValue",[a])}});isc.SimpleType.create({inheritsFrom:"canvas",name:"bizContentLink",editorType:"BizContentLinkItem"});
isc.ClassFactory.defineClass("BizContentImageItem",isc.CanvasItem);isc.BizContentImageItem.addProperties({width:"*",rowSpan:"*",endRow:!1,startRow:!1,canFocus:!0,shouldSaveValue:!0});
isc.BizContentImageItem.addMethods({init:function(a){this._img=isc.Img.create({width:a.width?a.width:"100%",height:a.height?a.height:"100%",imageType:"stretch",overflow:"hidden",isGroup:!0,styleName:"bizhubRoundedBorder bizhubContentImgFit",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",showDisabled:!1,showDown:!1,showFocus:!1,showFocused:!1,showFocusedAsOver:!1,showRollOver:!1,src:"[SKIN]blank.gif",cursor:"pointer",click(b){b=this.src;b=b.replace(/&_w=\d*/,"").replace(/&_h=\d*/,
"");window.open(b,"_blank")}});if(a.editable){const b=isc.HLayout.create({width:1,height:a.height?a.height:"100%",defaultLayoutAlign:"center",members:[isc.BizUtil.createUploadButton(this,!0,a.showMarkup)]});this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",members:[this._img,isc.LayoutSpacer.create({width:5}),b]})}else this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",members:[this._img]});this.Super("init",arguments)},setValue:function(a){if(null!=this.canvas&&!this.userSetValue)if(a){const b=
SKYVE.Util.CONTEXT_URL+"content?_n="+a+"&_doc="+this.form._view._mod+"."+this.form._view._doc+"&_b="+this.name.replaceAll("_",".")+"&_w="+(this._img.getWidth()-20)+"&_h="+(this._img.getHeight()-20);this._img.setSrc(b)}else this._img.setSrc("[SKIN]blank.gif");return this.Super("setValue",[a])}});isc.SimpleType.create({inheritsFrom:"canvas",name:"bizContentImage",editorType:"BizContentImageItem"});isc.ClassFactory.defineClass("BizLookupDescriptionItem",isc.CanvasItem);
isc.BizLookupDescriptionItem.addProperties({height:20,width:"*",rowSpan:"*",endRow:!1,startRow:!1,canFocus:!0,shouldSaveValue:!0,fetchMissingValues:!1,autoFetchData:!1,canCreate:!1,canUpdate:!1,canPick:!0,canEdit:!0,canAdd:!0,canClear:!0});
isc.BizLookupDescriptionItem.addMethods({init:function(a){const b=this,c={name:"_combo",type:"comboBox",showTitle:!1,width:"*",textAlign:a.textAlign,selectOnFocus:!0,fetchMissingValues:!1,autoFetchData:!1,useClientFiltering:!1,cachePickListResults:!1,allowEmptyValue:a.allowEmptyValue,optionDataSource:a.optionDataSource,valueField:a.valueField,displayField:a.displayField,pickListFields:a.pickListFields,filterFields:a.filterFields,pickListProperties:{filterData:function(d,e,f){f?f.params||(f.params=
{}):f={params:{}};f.params._c=b._view.gather(!1)._c;b._view._b&&(f.params._b=b._view._b);f.params._cc="";this.Super("filterData",arguments)}},completeOnTab:!0,textMatchStyle:"substring",getPickListFilterCriteria:function(){let d=this.Super("getPickListFilterCriteria",arguments);isc.BizUtil.convertFilterCriteria(d);a.params&&(d=isc.BizUtil.completeFilterCriteria(d,a.params,b._view));return d},showPicker:function(){const d=this.getOptionDataSource();d&&d.compareCriteria&&(d._drop=!0);this.Super("showPicker")},
changed:function(d,e,f){this.getDisplayValue()==f?b.Super("setValue",null):(b.Super("setValue",[f]),f&&b.bizPicked(b.form,b,f))},blur:(d,e)=>{null==this.getValue()&&(d=e.getValue())&&""!=d&&e.setValue("")},valueMap:{}};a.editable?(this._form=isc.DynamicForm.create({writeFormTag:!1,numCols:2,colWidths:["*",65],margin:0,cellPadding:0}),this._splitButton=isc.BizUtil.createSplitButton("Pick",null,!1,"Pick a record",()=>{const d=isc.BizUtil.getPickList(this,a.params,this._view);d.setDataSource(a.optionDataSource);
isc.WindowStack.popup(this.getPageRect(),"Pick",!0,[d])},"Other Options",this._form,[{title:"Edit",icon:"icons/zoom.gif",click:d=>{this.zoom(!1)},enableIf:(d,e,f)=>this.canUpdate&&this.canEdit&&null!=this.getValue()},{title:"New",icon:"icons/new.png",click:d=>{d=a.params?isc.BizUtil.addFilterRequestParams({},a.params,this._view):{};this.zoom(!0,d)},enableIf:(d,e,f)=>this.canCreate&&this.canAdd},{title:"Clear",icon:"icons/delete.png",click:d=>{this.setValue(null);this.bizCleared(this.form,this,null)},
enableIf:(d,e,f)=>this.canClear}]),this._form.setItems([c,{name:"_splitButton",showTitle:!1,type:"canvas",canvas:this._splitButton,align:"right"}])):(this._form=isc.DynamicForm.create({writeFormTag:!1,numCols:1,colWidths:["*"]}),this._form.setItems([c]));this.canvas=this._form;this.Super("init",arguments)},setValue:function(a){null!=this.canvas&&(this.userSetValue?this.bizPicked(this.form,this,a):this._form.getItem("_combo").setValue(a));this.Super("setValue",[a])},focusInItem:function(){this._form&&
this._form.getItem("_combo").focusInItem()},bizAdded:function(a,b,c){},bizEdited:function(a,b,c){},bizPicked:function(a,b,c){},bizCleared:function(a,b,c){},setValueMapFromEditView:function(a){this._setValueMap(a[this.name],a[this.name+"_"+this.displayField])},setValueMapFromPickList:function(a){this._setValueMap(a.bizId,a[this.displayField])},_setValueMap:function(a,b){if(a){const c={};c[a]=b||"<unknown>";this._form.getItem("_combo").setValueMap(c);this._form.getItem("_combo").setValue(a)}},enableDisablePick:function(){this._form.getItem("_combo").setDisabled(!this.canPick);
this._splitButton&&this._splitButton.getMember(0).setDisabled(!this.canPick)},zoom:function(a,b){var c=isc.DataSource.get(this.optionDataSource).modoc;const d=c.indexOf("."),e=c.substring(d+1);c=c.substring(0,d);isc.BizUtil.getEditView(c,e,f=>{const g=this._view._b?`${this._view._b}.${this.name}`:this.name,h=this.getPageRect();if(a){const k=this.required;k&&this.setRequired(!1);const l=this._view.gather(!0);l?l._apply||this._view._vm.valuesHaveChanged()?(delete l._apply,this._view.saveInstance(!0,
null,()=>{this.setRequired(k);isc.WindowStack.popup(h,"New",!1,[f]);f.newInstance(b,g,l._c,!1)})):(this.setRequired(k),isc.WindowStack.popup(h,"New",!1,[f]),f.newInstance(b,g,l._c,!1)):isc.warn("You cannot zoom in until you fix the problems found")}else{const k=this._view.gather(!0);k?k._apply||this._view._vm.valuesHaveChanged()?(delete k._apply,this._view.saveInstance(!0,null,()=>{isc.WindowStack.popup(h,"Edit",!1,[f]);f.editInstance(this.getValue(),g,k._c,!1)})):(isc.WindowStack.popup(h,"Edit",
!1,[f]),f.editInstance(this.getValue(),g,k._c,!1)):isc.warn("You cannot zoom in until you fix the problems found")}})}});isc.SimpleType.create({inheritsFrom:"comboBox",name:"bizLookupDescription",editorType:"BizLookupDescriptionItem"});isc.ClassFactory.defineClass("BizCompleteItem",isc.ComboBoxItem);
isc.BizCompleteItem.addProperties({optionDataSource:isc.BizUtil.COMPLETE_DATA_SOURCE,showPickerIcon:!0,fetchMissingValues:!1,autoFetchData:!1,useClientFiltering:!1,cachePickListResults:!1,textMatchStyle:"substring",valueField:"value",displayField:"value",selectOnFocus:!0,completeOnTab:!0});
isc.BizCompleteItem.addMethods({init:function(a){const b=this;"constrain"===a._a&&(this.addUnknownValues=!1);this.pickListProperties={filterData:function(c,d,e){e||={};e.params||(e.params={});e.params._attr=a._b;e.params._a=a._a;e.params._c=b.form._view.gather(!1)._c;b.form._view._b&&(e.params._b=b.form._view._b);this.Super("filterData",arguments)}};this.Super("init",arguments)}});isc.SimpleType.create({inheritsFrom:"comboBox",name:"bizComplete",editorType:"BizCompleteItem"});var CKEDITOR=null;
isc.ClassFactory.defineClass("BizHTMLItem",isc.CanvasItem);isc.BizHTMLItem.addProperties({width:"*",height:"200px",rowSpan:"*",endRow:!1,startRow:!1,canFocus:!0,shouldSaveValue:!0});
isc.BizHTMLItem.addMethods({init:function(a){const b=this;this._pane=isc.HTMLPane.create({width:a.width,height:a.height,isGroup:!0,styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",padding:10,contents:"Empty"});this._editButton=isc.IButton.create({width:40,title:"Edit",canHover:!0,getHoverHTML(){return"Edit the HTML"},click:function(c){CKEDITOR?this._show():SKYVE.Util.loadJS("ckeditor/ckeditor.js",function(){b._editButton._show()})},
_show:()=>{const c=this.form._view,d=c.gather(!1),e=isc.Canvas.create({width:"100%",height:"100%",margin:5});e.setContents('<div style="width:100%;height:100%" id="_CKEditor"></div>');e.draw=function(){this.Super("draw");CKEDITOR.config.filebrowserImageBrowseUrl="pages/htmlEdit/browseImages.jsp?_doc="+c._mod+"."+c._doc+"&_id="+d.bizId;CKEDITOR.config.filebrowserBrowseUrl="pages/htmlEdit/browseDocuments.jsp?_doc="+c._mod+"."+c._doc+"&_id="+d.bizId;CKEDITOR.config.resize_enabled=!1;CKEDITOR.config.skin=
"moono-lisa";CKEDITOR.config.autoUpdateElement=!1;CKEDITOR.config.baseFloatZIndex=9E6;CKEDITOR.config.toolbar=[["Source","-","NewPage","Preview"],"Cut Copy Paste PasteText PasteFromWord - Print SpellChecker Scayt".split(" "),"Undo Redo - Find Replace - SelectAll RemoveFormat".split(" "),"/","Bold Italic Underline Strike - Subscript Superscript".split(" "),"NumberedList BulletedList - Outdent Indent Blockquote CreateDiv".split(" "),["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["Link",
"Unlink","Anchor"],"Image Flash Table HorizontalRule Smiley SpecialChar PageBreak".split(" "),"/",["Format","Font","FontSize"],["TextColor","BGColor"],["Maximize","ShowBlocks"]];if(a.mentionMarkers){const g=function(l,n){var r=b.form._view.gather(!1);r={params:{_attr:b.name,_a:"suggest",_c:r._c}};b.form._view._b&&(r.params._b=b.form._view._b);isc.BizUtil.COMPLETE_DATA_SOURCE.fetchData({value:l.marker+l.query},function(u){if(u&&u.data){for(let v=0,x=u.data.length;v<x;v++){const m=u.data[v];m.id=v;
m.name=m.value.substring(1)}n(u.data)}},r)},h=a.mentionMarkers.split(","),k=[];for(let l=0,n=h.length;l<n;l++){var f=h[l];if(1<f.length){const r=f.substring(0,1);f=f.substring(1,2);k.add({feed:g,marker:r,minChars:0,pattern:new RegExp("\\"+r+"[^\\"+r+"\\"+f+"]*$"),cache:!1,throttle:500})}else k.add({feed:g,marker:f,minChars:0,cache:!1,throttle:500})}CKEDITOR.config.mentions=k}CKEDITOR.config.coreStyles_bold={element:"b",overrides:"strong"};CKEDITOR.config.coreStyles_italic={element:"i",overrides:"em"};
b._editor=CKEDITOR.replace("_CKEditor",{customConfig:SKYVE.Util.ckEditorConfigFileUrl});b._editor.setData(b.getValue());return this};isc.WindowStack.popup(null,"Edit HTML",!0,[e,isc.HLayout.create({membersMargin:5,margin:5,align:"right",members:[isc.IButton.create({width:60,title:"Apply",click:f=>{this.setValue(this._editor.getData());isc.WindowStack.popoff(!1)}}),isc.IButton.create({width:60,title:"Cancel",click:function(f){isc.WindowStack.popoff(!1)}})]})],420)}});this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",
members:[this._pane,isc.LayoutSpacer.create({width:3}),this._editButton]});this.Super("init",arguments)},setValue:function(a){null==this.canvas||this.userSetValue||(a?this._pane.setContents(a):this._pane.setContents(" "));return this.Super("setValue",[a])}});isc.SimpleType.create({inheritsFrom:"canvas",name:"bizHTML",editorType:"BizHTMLItem"});isc.ClassFactory.defineClass("GeometryItem",isc.CanvasItem);isc.GeometryItem.addClassProperties({validOperators:"geoWithin geoContains geoOverlaps geoDisjoint geoIntersects geoTouches geoCrosses geoEquals isNull notNull".split(" ")});
isc.GeometryItem.addClassMethods({format:function(a){if(a){if(a.startsWith("POINT"))return"Point";if(a.startsWith("LINESTRING"))return"Line";if(a.startsWith("POLYGON"))return"Polygon"}return""}});isc.GeometryItem.addProperties({showHint:!1,width:100,operator:"geoWithin",validOperators:isc.GeometryItem.validOperators,shouldSaveValue:!0});
isc.GeometryItem.addMethods({createCanvas:function(){return isc.HLayout.create({height:1,width:"100%",members:[isc.DynamicForm.create({writeFormTag:!1,numCols:1,width:"100%",margin:0,cellPadding:0,items:[{name:"value",type:"text",showTitle:!1,width:"*",hint:this.hint,showHintInField:!0,selectOnFocus:!0,changed:(a,b,c)=>{this.storeValue(c,!1)},icons:[{src:"icons/map.png",prompt:"Click to set or see the geometry on a map",click:(a,b,c)=>{a=this.drawingTools?{field:this,drawingTools:this.drawingTools}:
{field:this};isc.WindowStack.popup(b.getPageRect(),"Map",!0,[isc.BizMapPicker.create(a)])}}]}]})]})},showValue:function(a,b,c,d){d.canvas.getMember(0).setValue("value",a)},setHint:function(a){this.canvas.getMember(0).setHint(a)},setValueFromPicker:function(a){this.storeValue(a,!0)}});isc.SimpleType.create({name:"geometry",inheritsFrom:"canvas",editorType:"GeometryItem",defaultOperator:"gWithin",validOperators:isc.GeometryItem.validOperators});isc.ClassFactory.defineClass("GeometryMapItem",isc.CanvasItem);
isc.GeometryMapItem.addProperties({width:"*",rowSpan:"*",endRow:!1,startRow:!1,canFocus:!1,shouldSaveValue:!0});
isc.GeometryMapItem.addMethods({createCanvas:function(){return isc.HLayout.create({defaultLayoutAlign:"center"})},showValue:function(a,b){this._valueSetFromPicker||(a={field:this,width:this.width||"100%",height:this.height||"100%"},this.drawingTools&&(a.drawingTools=this.drawingTools),this.canvas.setMembers([isc.BizMapPicker.create(a)]))},setDisabled:function(a){this.canvas.getMember(0).setDisabled(a)},setValueFromPicker:function(a){this._valueSetFromPicker=!0;this.setValue(a);delete this._valueSetFromPicker;
this.changed&&this.changed(this.form,this,a)}});isc.SimpleType.create({name:"geometryMap",inheritsFrom:"canvas",editorType:"GeometryMapItem",validOperators:isc.GeometryItem.validOperators});isc.ClassFactory.defineClass("WindowStack");
isc.WindowStack.addClassProperties({_margin:0,_stack:[],_unused:[],_index:0,popup:function(a,b,c,d,e,f,g){isc.WindowStack._margin+=50;let h=isc.WindowStack._unused.pop();const k=f||e;f=f||isc.Page.getWidth()-isc.WindowStack._margin;e=e||isc.Page.getHeight()-isc.WindowStack._margin;h?(h.setTitle(b),h.sizeSet=k,d&&h.addItems(d),h.setWidth(f),h.setHeight(e),h.closeClick=()=>{isc.WindowStack.popoff(g)}):h=isc.Window.create({ID:"Window"+isc.WindowStack._index++,headerIconDefaults:{src:"window/skyve_fav.png",
width:16,height:16},autoCenter:!0,isModal:!0,showModalMask:!0,showMinimizeButton:!1,modalMaskOpacity:25,canDragReposition:!0,canDragResize:!0,showShadow:!0,shadowSoftness:10,shadowOffset:0,title:b,items:d,width:f,height:e,sizeSet:k,closeClick:function(){isc.WindowStack.popoff(g)}});h.setShowCloseButton(c);h._fromRect=a;isc.WindowStack._stack.push(h);h.show()},popoff:function(a){const b=isc.WindowStack.getOpener(),c=isc.WindowStack._stack.pop();if(c){isc.WindowStack._animateClose(c);const d=c.items;
d&&(CKEDITOR&&CKEDITOR.instances._CKEditor?(CKEDITOR.instances._CKEditor.destroy(),d[0].destroy()):d.forEach(e=>{e._vm?isc.BizUtil.relinquishEditView(e):isc.isA.BizListGrid(e)&&isc.BizUtil.relinquishPickList(e)}),c.removeItems(d));isc.WindowStack._unused.push(c);isc.WindowStack._margin-=50;b&&(b.resume&&b.resume(),a&&b.rerender&&b.rerender())}},getOpener:function(){return 1>=isc.WindowStack._stack.length?isc.BizUtil.getCurrentView():isc.WindowStack._stack[isc.WindowStack._stack.length-2].items[0]},
resize:function(){let a=isc.Page.getWidth()-50,b=isc.Page.getHeight()-50;isc.WindowStack._stack.forEach(c=>{c.sizeSet||(c.setWidth(a),c.setHeight(b),a-=50,b-=50)})},_wireframe:isc.Canvas.create({border:"3px ridge #E1E1E1",backgroundColor:"whitesmoke",opacity:75,autoDraw:!1}),_animateClosedDuration:400,_animateClose:function(a){if(a._fromRect){const b=a.getLeft(),c=a.getTop(),d=a.getVisibleWidth(),e=a.getVisibleHeight();isc.WindowStack._wireframe.setRect([b,c,d,e]);isc.WindowStack._wireframe.show();
isc.WindowStack._wireframe.bringToFront()}a.hide();a._fromRect&&isc.WindowStack._wireframe.animateRect(a._fromRect[0],a._fromRect[1],a._fromRect[2],a._fromRect[3],"isc.WindowStack._wireframe.hide();",isc.WindowStack._animateClosedDuration)}});isc.ClassFactory.defineClass("ReportDialog");
isc.ReportDialog.addClassProperties({_pageFormats:{LETTER:{width:612,height:792},NOTE:{width:540,height:720},LEGAL:{width:612,height:1008},A0:{width:2380,height:3368},A1:{width:1684,height:2380},A2:{width:1190,height:1684},A3:{width:842,height:1190},A4:{width:595,height:842},A5:{width:421,height:595},A6:{width:297,height:421},A7:{width:210,height:297},A8:{width:148,height:210},A9:{width:105,height:148},A10:{width:74,height:105},B0:{width:2836,height:4008},B1:{width:2004,height:2836},B2:{width:1418,
height:2004},B3:{width:1002,height:1418},B4:{width:709,height:1002},B5:{width:501,height:709},ARCH_E:{width:595,height:842},ARCH_D:{width:595,height:842},ARCH_C:{width:595,height:842},ARCH_B:{width:595,height:842},ARCH_A:{width:595,height:842},FLSA:{width:612,height:936},FLSE:{width:612,height:936},HALFLETTER:{width:396,height:612},"11x17":{width:792,height:1224},LEDGER:{width:1224,height:792}},_available:[{name:"title",title:"Available Columns",required:!0},{name:"line",title:"Line",type:"integer",
editorType:"spinner",editorProperties:{min:1,max:9,step:1,defaultValue:1,validators:[{type:"integerRange",min:1,max:9}]},width:50},{name:"width",title:"Width",type:"integer",editorType:"spinner",editorProperties:{min:1,max:9999,step:10,defaultValue:1,validators:[{type:"integerRange",min:1,max:9999}]},width:50}],_selected:[{name:"title",title:"Exported Columns",required:!0},{name:"line",title:"Line",type:"integer",editorType:"spinner",editorProperties:{min:1,max:9,step:1,defaultValue:1,validators:[{type:"integerRange",
min:1,max:9}]},width:50},{name:"width",title:"Width",type:"integer",editorType:"spinner",editorProperties:{min:1,max:9999,step:10,defaultValue:1,validators:[{type:"integerRange",min:1,max:9999}]},width:50}],_valuesManager:isc.ValuesManager.create()});
isc.ReportDialog.addClassProperties({_columnList:isc.ListGrid.create({width:"100%",height:"100%",canDragRecordsOut:!0,canAcceptDroppedRecords:!0,dragDataAction:"move",alternateRecordStyles:!0,autoFetchData:!1,leaveScrollbarGap:!1,showHeaderContextMenu:!1,fields:isc.ReportDialog._available}),_selectedColumnList:isc.ListGrid.create({width:"100%",height:"100%",canDragRecordsOut:!0,canAcceptDroppedRecords:!0,dragDataAction:"move",canReorderRecords:!0,canRemoveRecords:!1,canEdit:!0,editByCell:!0,editEvent:"click",
modalEditing:!0,alternateRecordStyles:!0,autoFetchData:!1,preventDuplicates:!0,leaveScrollbarGap:!1,showHeaderContextMenu:!1,fields:isc.ReportDialog._selected})});
isc.ReportDialog.addClassProperties({_generateReportFormatMappings:function(a,b=[]){const c={pdf:{label:"PDF (Adobe Portable Document Format)",icon:"pdf"},docx:{label:"DOCX (Word Document - Office 2007)",icon:"rtf"},xlsx:{label:"XLSX (Excel Document - Office 2007)",icon:"xls"},pptx:{label:"PPTX (PowerPoint Document - Office 2007)",icon:"pptx"},xls:{label:"XLS (Excel - 98-2003)",icon:"xls"},rtf:{label:"RTF (Rich Text Format)",icon:"rtf"},ods:{label:"ODS (Open Document Spreadsheet Format)",icon:"oo"},
odt:{label:"ODT (Open Document Text Format)",icon:"oo"},html:{label:"HTML (HyperText Markup Language)",icon:"html"},csv:{label:"CSV (Comma Separated Values)",icon:"csv"},xml:{label:"XML (JRXML Format)",icon:"xml"},txt:{label:"TXT (Text Format)",icon:"txt"}},d={},e={};let f=b.length?null:a[0];a.forEach(g=>{c[g]?(d[g]=c[g].label,e[g]=c[g].icon):(d[g]=g,e[g]=g);!f&&b.includes(g)&&(f=g)});return{valueMap:d,valueIcons:e,defaultValue:f}},_createJasperReportFormatPickList:function(a,b){const {valueMap:c,
valueIcons:d,defaultValue:e}=this._generateReportFormatMappings(SKYVE.Util.allowedReportFormats);return{name:"reportFormat",showTitle:!1,type:"select",width:300,required:!0,valueMap:c,imageURLPrefix:"reporting/",imageURLSuffix:".png",valueIcons:d,defaultValue:e,colSpan:a,change:b}}});
isc.ReportDialog.addClassProperties({_columnSelectorLayout:isc.HLayout.create({membersMargin:10,height:"100%",members:[isc.ReportDialog._columnList,isc.VLayout.create({layoutAlign:"center",membersMargin:10,height:100,members:[isc.IButton.create({title:null,icon:"reporting/arrow_right.png",iconWidth:24,iconHeight:24,iconAlign:"center",width:36,height:36,click:function(){return isc.ReportDialog._selectedColumnList.transferSelectedData(isc.ReportDialog._columnList)},canHover:!0,getHoverHTML:function(){return"Move the selected columns into the report"}}),
isc.IButton.create({title:null,icon:"reporting/arrow_left.png",iconWidth:24,iconHeight:24,iconAlign:"center",width:36,height:36,click:function(){isc.ReportDialog._columnList.transferSelectedData(isc.ReportDialog._selectedColumnList)},canHover:!0,getHoverHTML:function(){return"Move the selected columns out of the report"}})]}),isc.ReportDialog._selectedColumnList]}),_reportFormatForm:null,_pageFormatForm:isc.DynamicForm.create({valuesManager:isc.ReportDialog._valuesManager,numCols:10,padding:15,items:[{name:"format",
title:"Format",type:"select",required:!0,width:80,valueMap:"LETTER NOTE LEGAL A0 A1 A2 A3 A4 A5 A6 A7 A8 A9 A10 B0 B1 B2 B3 B4 B5 ARCH_E ARCH_D ARCH_C ARCH_B ARCH_A FLSA FLSE HALFLETTER 11x17 LEDGER".split(" "),defaultValue:"A4",change:function(a,b,c,d){b=a.getItem("orientation").getValue();const {width:e,height:f}=isc.ReportDialog._pageFormats[c];a.getItem("width").setValue("portrait"===b?e:f);a.getItem("height").setValue("portrait"===b?f:e)}},{name:"orientation",title:"Orientation",type:"radioGroup",
required:!0,valueMap:{portrait:"Portrait",landscape:"Landscape"},defaultValue:"portrait",change:function(a,b,c,d){b=a.getItem("width");a=a.getItem("height");c=b.getValue();b.setValue(a.getValue());a.setValue(c)}},{name:"width",title:"Width",type:"spinner",required:!0,width:80,min:1,max:9999,step:1,defaultValue:isc.ReportDialog._pageFormats.A4.width,validators:[{type:"integerRange",min:1,max:9999}]},{name:"height",title:"Height",type:"spinner",required:!0,width:80,min:1,max:9999,step:1,defaultValue:isc.ReportDialog._pageFormats.A4.height,
validators:[{type:"integerRange",min:1,max:9999}]}]}),_marginsForm:isc.DynamicForm.create({valuesManager:isc.ReportDialog._valuesManager,numCols:8,padding:15,items:[{name:"top",title:"Top",type:"spinner",required:!0,width:80,min:1,max:9999,step:1,defaultValue:20,validators:[{type:"integerRange",min:1,max:9999}]},{name:"bottom",title:"Bottom",type:"spinner",required:!0,width:80,min:1,max:9999,step:1,defaultValue:20,validators:[{type:"integerRange",min:1,max:9999}]},{name:"left",title:"Left",type:"spinner",
required:!0,width:80,min:1,max:9999,step:1,defaultValue:20,validators:[{type:"integerRange",min:1,max:9999}]},{name:"right",title:"Right",type:"spinner",required:!0,width:80,min:1,max:9999,step:1,defaultValue:20,validators:[{type:"integerRange",min:1,max:9999}]}]}),_submitForm:isc.DynamicForm.create({autoDraw:!0,canSubmit:!0,method:"POST",items:[{name:"values",type:"hidden"},{name:"_c",type:"hidden"}]}),_layout:null,_criteria:null,_tagId:null,_dataSourceID:null,_createReportPanel:function(a,b){return isc.HLayout.create({backgroundImage:"background.png",
backgroundRepeat:"repeat",membersMargin:5,margin:5,layoutAlign:"center",members:[isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",width:134,height:130,layoutAlign:"center",margin:0,membersMargin:10,members:[isc.HLayout.create({width:134,align:"center",members:[isc.Img.create({imageType:"normal",src:"reporting/reporting.png",height:96,layoutAlign:"center"})]}),isc.HLayout.create({width:134,align:"center",members:[a]})]}),b]})},_createExport:function(){if(null==isc.ReportDialog._exportLayout){const a=
function(b,c,d,e){c=["pdf","docx","pptx","rtf","odt"].includes(d);e="html"===d;b.getItem("isPaginated").setValue(c);b.getItem("isPretty").setValue(c||e);b.getItem("showSummary").setValue(c||e);b.getItem("fileNameSuffix").setValue(`.${d}`)};isc.ReportDialog._reportFormatForm=isc.DynamicForm.create({valuesManager:isc.ReportDialog._valuesManager,numCols:7,colWidths:[60,200,40,30,"*",60,"*"],padding:15,items:[isc.ReportDialog._createJasperReportFormatPickList(3,a),{name:"isPaginated",title:"Paginated Report",
type:"checkbox",required:!0},{name:"style",title:"Style",type:"radioGroup",vertical:!0,required:!0,rowSpan:2,valueMap:{tabular:"Tabular",columnar:"Columnar"},defaultValue:"tabular",change:function(b,c,d,e){b="columnar"===d;isc.ReportDialog._columnList[b?"hideField":"showField"]("line");isc.ReportDialog._columnList[b?"hideField":"showField"]("width");isc.ReportDialog._selectedColumnList[b?"hideField":"showField"]("line");isc.ReportDialog._selectedColumnList[b?"hideField":"showField"]("width")}},{name:"fileNameNoSuffix",
title:"Filename",type:"text",required:!0,width:"100%",defaultValue:"export"},{name:"fileNameSuffix",showTitle:!1,type:"staticText",startRow:!1,endRow:!1},{name:"isPretty",title:"Pixel Perfect",type:"checkbox",required:!0},{type:"spacer"},{type:"spacer"},{type:"spacer"},{name:"showSummary",title:"Show Summary",type:"checkbox",required:!0}]});a(isc.ReportDialog._reportFormatForm,null,SKYVE.Util.allowedReportFormats[0],null);isc.ReportDialog._exportLayout=isc.VLayout.create({backgroundImage:"background.png",
backgroundRepeat:"repeat",height:"100%",width:"100%",autoDraw:!0,margin:5,membersMargin:5,members:[isc.ReportDialog._createReportPanel(isc.IButton.create({title:"Generate",click:function(){if(isc.ReportDialog._valuesManager.validate()){const b=isc.ReportDialog._valuesManager.getValues();b.columns=isc.ReportDialog._selectedColumnList.getData();b.ds=isc.ReportDialog._dataSourceID;isc.ReportDialog._criteria&&(b.criteria=isc.ReportDialog._criteria);isc.ReportDialog._tagId&&(b.tagId=isc.ReportDialog._tagId);
const c=isc.ReportDialog._reportFormatForm.getItem("reportFormat").getValue(),d=isc.ReportDialog._reportFormatForm.getItem("fileNameNoSuffix").getValue();isc.ReportDialog._submitForm.setValue("values",isc.JSON.encode(b,{prettyPrint:!1}));isc.ReportDialog._c&&isc.ReportDialog._submitForm.setValue("_c",isc.ReportDialog._c);isc.ReportDialog._submitForm.setAction(`export/${d}.${c}`);isc.ReportDialog._submitForm.setTarget("html"===c?"_blank":"_self");isc.ReportDialog._submitForm.submitForm()}}}),isc.VLayout.create({backgroundImage:"background.png",
backgroundRepeat:"repeat",margin:0,membersMargin:5,members:[isc.VLayout.create({isGroup:!0,groupTitle:"Report Format",styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",groupLabelStyleName:"bizhubBorderLabel",backgroundImage:"background.png",backgroundRepeat:"repeat",members:[isc.ReportDialog._reportFormatForm]}),isc.VLayout.create({isGroup:!0,groupTitle:"Page Format",styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",
margin:1,groupLabelBackgroundColor:"transparent",groupLabelStyleName:"bizhubBorderLabel",backgroundImage:"background.png",backgroundRepeat:"repeat",members:[isc.ReportDialog._pageFormatForm]}),isc.VLayout.create({isGroup:!0,groupTitle:"Margins",styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",groupLabelStyleName:"bizhubBorderLabel",backgroundImage:"background.png",backgroundRepeat:"repeat",members:[isc.ReportDialog._marginsForm]})]})),
isc.ReportDialog._columnSelectorLayout]})}},popupExport:function(a,b,c,d,e,f){isc.ReportDialog._createExport();isc.ReportDialog._dataSourceID=a;isc.ReportDialog._c=b;isc.ReportDialog._criteria=c;isc.ReportDialog._tagId=d;isc.ReportDialog._columnList.setData(e);isc.ReportDialog._selectedColumnList.setData(f);isc.WindowStack.popup(null,"Reporting",!0,[isc.ReportDialog._exportLayout])},popupReport:function(a,b){if(b&&b._f){const {_f:c,...d}=b;isc.ReportDialog._redirectToReport(a,d,c)}else b&&"Freemarker"===
b._e?(isc.ReportDialog._freemarkerReportLayout||(isc.ReportDialog._freemarkerReportLayout=isc.ReportDialog._createReportPanel(isc.IButton.create({title:"View",ID:"_freemarkerReportViewButton",_view:null,_params:null,click:function(){const c=_freemarkerReportForm.getValue("reportFormat");isc.ReportDialog._redirectToReport(this._view,this._params,c)}}),isc.DynamicForm.create({ID:"_freemarkerReportForm",fields:[{type:"rowSpacer"},{type:"rowSpacer"},isc.ReportDialog._createFreemarkerReportFormatPickList()]}))),
_freemarkerReportViewButton._view=a,_freemarkerReportViewButton._params=b,isc.WindowStack.popup(null,"Report",!0,[isc.ReportDialog._freemarkerReportLayout],180,480)):(isc.ReportDialog._jasperReportLayout||(isc.ReportDialog._jasperReportLayout=isc.ReportDialog._createReportPanel(isc.IButton.create({title:"View",ID:"_jasperReportViewButton",_view:null,_params:null,click:function(){const c=_jasperReportForm.getValue("reportFormat");isc.ReportDialog._redirectToReport(this._view,this._params,c)}}),isc.DynamicForm.create({ID:"_jasperReportForm",
fields:[{type:"rowSpacer"},{type:"rowSpacer"},isc.ReportDialog._createJasperReportFormatPickList(1,function(c,d,e,f){})]}))),_jasperReportViewButton._view=a,_jasperReportViewButton._params=b,isc.WindowStack.popup(null,"Report",!0,[isc.ReportDialog._jasperReportLayout],180,480))},_redirectToReport:function(a,b,c){const d=a.gather(!1);if(d){const {_c:e,_b:f,bizId:g}=d;let h;h=b&&b._n?`report/${b._n}.${c}?_f=${c}${e?`&_c=${e}`:""}${f?`&_b=${f}`:""}${g?`&_id=${g}`:""}`:`report/?_f=${c}${e?`&_c=${e}`:
""}${f?`&_b=${f}`:""}${g?`&_id=${g}`:""}`;b&&Object.keys(b).forEach(k=>{h+=`&${k}=${encodeURI(a.toDisplay(b[k],d)).replaceAll("?","%3F").replaceAll("&","%26")}`});"html"===c?window.open(h,"report","location=0,status=0,scrollbars=1,resizable=1,width=800,height=600"):window.location=h}}});isc.ClassFactory.defineClass("ChartDialog");isc.ChartDialog.addClassProperties({_valuesManager:isc.ValuesManager.create()});
isc.ChartDialog.addClassProperties({_chartForm:isc.DynamicForm.create({valuesManager:isc.ChartDialog._valuesManager,numCols:6,colWidths:[100,120,80,"*",90,"*"],items:[{name:"type",type:"enum",title:"Chart Type",width:"*",valueMap:{line:"Line",lineArea:"Line Area",bar:"Bar",horizontalBar:"Horizontal Bar",radar:"Radar",pie:"Pie",doughnut:"Doughnut",polarArea:"Polar Area"},required:!0},{name:"title",type:"text",width:"*",title:"Chart Title"},{name:"label",type:"text",width:"*",title:"Data Label"}]}),
_categoryForm:isc.DynamicForm.create({valuesManager:isc.ChartDialog._valuesManager,numCols:7,colWidths:[100,"*",110,160,60,60,150],items:[{name:"categoryBinding",type:"select",title:"Category Field",width:"*",required:!0,valueMap:[]},{name:"categoryBucket",type:"enum",title:"Category Bucket",width:"*",allowEmptyValue:!0,valueMap:{NumericMultipleBucket:"Numeric Multiple",TextLengthBucket:"Text Length",TextStartsWithBucket:"Text Starts With",TemporalBucket:"Temporal"},redrawOnChange:!0},{name:"numericMultiple",
type:"spinner",width:"*",title:"Multiple",min:1,step:1,defaultValue:100,validators:[{type:"requiredIf",expression:"item.isVisible()"}],showIf:"form.getItem('categoryBucket').getValue() == 'NumericMultipleBucket'"},{name:"startsWithLength",type:"spinner",width:"*",title:"Length",min:1,step:1,defaultValue:1,validators:[{type:"requiredIf",expression:"item.isVisible()"}],showIf:"form.getItem('categoryBucket').getValue() == 'TextStartsWithBucket'"},{name:"startsWithCaseSensitive",type:"checkbox",allowEmptyValue:!1,
title:"Case Sensitive",showTitle:!1,defaultValue:!1,validators:[{type:"requiredIf",expression:"item.isVisible()"}],showIf:"form.getItem('categoryBucket').getValue() == 'TextStartsWithBucket'"},{name:"temporalBucketType",type:"enum",width:"*",title:"Type",colSpan:2,allowEmptyValue:!1,valueMap:{day:"Day",dayMonthYear:"Day/Month/Year",hour:"Hour",hourDay:"Hour/Day",hourDayMonth:"Hour/Day/Month",minuteHour:"Minute/Hour",month:"Month",monthYear:"Month/Year",secondMinuteHour:"Second/Minute/Hour",year:"Year"},
validators:[{type:"requiredIf",expression:"item.isVisible()"}],showIf:"form.getItem('categoryBucket').getValue() == 'TemporalBucket'"}]}),_valueForm:isc.DynamicForm.create({valuesManager:isc.ChartDialog._valuesManager,numCols:4,colWidths:[100,"*",105,100],items:[{name:"valueBinding",type:"select",title:"Value Field",startRow:!0,width:"*",required:!0,valueMap:[]},{name:"valueFunction",type:"enum",width:"*",title:"Value Function",valueMap:[null,"Count","Avg","Sum","Min","Max"]}]}),_topForm:isc.DynamicForm.create({valuesManager:isc.ChartDialog._valuesManager,
numCols:8,colWidths:[30,40,60,40,130,40,100,130],items:[{name:"topOn",type:"checkbox",allowEmptyValue:!1,showTitle:!1,showLabel:!1,defaultValue:!1,redrawOnChange:!0,change:function(a,b,c,d){b=a.getItem("top");d=a.getItem("topBy");const e=a.getItem("topSort");a=a.getItem("includeOthers");c?(b.enable(),d.enable(),e.enable(),a.enable()):(b.getValue()||(b.setValue("10"),b.clearErrors()),b.disable(),d.disable(),e.disable(),a.disable())}},{name:"top",type:"spinner",title:"Top",width:"*",required:!0,disabled:!0,
min:1,max:9999,step:1,defaultValue:10},{name:"topBy",type:"radioGroup",title:"By",vertical:!1,required:!0,disabled:!0,defaultValue:"category",valueMap:{category:"Category",value:"Value"}},{name:"topSort",type:"radioGroup",title:"Sort",vertical:!1,required:!0,disabled:!0,defaultValue:"ascending",valueMap:{ascending:"Ascending",descending:"Descending"}},{name:"includeOthers",type:"checkbox",allowEmptyValue:!1,title:"Include Others",showTitle:!1,disabled:!0,defaultValue:!1}]}),_orderForm:isc.DynamicForm.create({valuesManager:isc.ChartDialog._valuesManager,
numCols:5,colWidths:[30,40,130,40,"*"],items:[{name:"orderOn",type:"checkbox",allowEmptyValue:!1,showTitle:!1,showLabel:!1,defaultValue:!1,change:function(a,b,c,d){b=a.getItem("orderBy");a=a.getItem("orderSort");c?(b.enable(),a.enable()):(b.disable(),a.disable())}},{name:"orderBy",type:"radioGroup",title:"By",vertical:!1,required:!0,disabled:!0,defaultValue:"category",valueMap:{category:"Category",value:"Value"}},{name:"orderSort",type:"radioGroup",title:"Sort",vertical:!1,disabled:!0,defaultValue:"ascending",
valueMap:{ascending:"Ascending",descending:"Descending"}}]}),_chart:null,_layout:null,_criteria:null,_tagId:null,_dataSource:null,_border:function(a,b){return isc.VLayout.create({isGroup:!0,groupTitle:a,styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",padding:5,height:1,groupLabelBackgroundColor:"transparent",groupLabelStyleName:"bizhubBorderLabel",backgroundImage:"background.png",backgroundRepeat:"repeat",members:b})},_createChartPanel:function(a,b){return isc.HLayout.create({backgroundImage:"background.png",
backgroundRepeat:"repeat",membersMargin:5,margin:5,height:1,layoutAlign:"center",members:[isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",width:134,height:130,layoutAlign:"center",margin:0,membersMargin:10,members:[isc.HLayout.create({width:134,align:"center",members:[isc.Img.create({imageType:"normal",src:"reporting/reporting.png",height:96,layoutAlign:"center"})]}),isc.HLayout.create({width:134,align:"center",members:[a]})]}),b]})},_create:function(){if(null===isc.ChartDialog._layout){isc.ChartDialog._chart=
isc.BizChart.create({});const a=isc.ChartDialog._border("Result",[isc.ChartDialog._chart]);a.setHeight("100%");const b=isc.ChartDialog._border("Chart",[isc.ChartDialog._chartForm,isc.ChartDialog._categoryForm,isc.ChartDialog._valueForm]);isc.ChartDialog._layout=isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",height:"100%",width:"100%",autoDraw:!0,margin:5,membersMargin:5,members:[isc.ChartDialog._createChartPanel(isc.IButton.create({title:"Generate",click(){if(isc.ChartDialog._valuesManager.validate()){const c=
{ds:isc.ChartDialog._dataSource.ID,t:isc.ChartDialog._valuesManager.getValue("type"),b:isc.ChartDialog._valuesManager.getValues()};isc.ChartDialog._criteria&&(c.criteria=isc.ChartDialog._criteria);isc.ChartDialog._tagId&&(c.tagId=isc.ChartDialog._tagId);validateCategoryBucket(c);validateValueFunction(c);c.b.label||(c.b.label=generateDataLabel(c));isc.ChartDialog._valuesManager.clearErrors(!0);isc.RPCManager.sendRequest({showPrompt:!0,evalResult:!0,actionURL:SKYVE.Util.CONTEXT_URL+"chart",httpMethod:"POST",
params:c,callback(d,e){e.config&&(isc.ChartDialog._chart?.chartConfig?.type!==e.config.type&&isc.ChartDialog._destroyAndRecreate(),isc.ChartDialog._chart._update(e))}})}}}),isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",margin:0,height:1,membersMargin:5,members:[b,isc.ChartDialog._border("Top",[isc.ChartDialog._topForm]),isc.ChartDialog._border("Order",[isc.ChartDialog._orderForm])]})),a]})}else isc.ChartDialog._destroyAndRecreate()},_destroyAndRecreate:function(){let a=
null;isc.ChartDialog._chart&&(a=isc.ChartDialog._layout.getMember(1),a.removeMember(isc.ChartDialog._chart),isc.ChartDialog._chart.chart&&isc.ChartDialog._chart.chart.destroy(),isc.ChartDialog._chart.destroy());isc.ChartDialog._chart=isc.BizChart.create({});a?a.addMember(isc.ChartDialog._chart):isc.ChartDialog._layout.addMember(isc.ChartDialog._border("Result",[isc.ChartDialog._chart]))},popupChart:function(a,b,c,d){isc.ChartDialog._create();isc.ChartDialog._dataSource=a;isc.ChartDialog._c=b;isc.ChartDialog._criteria=
c;isc.ChartDialog._tagId=d;a=createValueMap(a);b=isc.ChartDialog._categoryForm.getItem("categoryBinding");c=isc.ChartDialog._valueForm.getItem("valueBinding");b.setValue("");b.setValueMap(a);c.setValue("");c.setValueMap(a);isc.WindowStack.popup(null,"Charting",!0,[isc.ChartDialog._layout])}});createValueMap=function(a){const b={};a.getFieldNames(!0).forEach(c=>{"bizTagged"!==c&&"bizFlagComment"!==c&&(c=a.getField(c),b[c.name]=c.title)});return b};
validateCategoryBucket=function(a){const {categoryBinding:b,categoryBucket:c}=a.b;c&&(a=isc.ChartDialog._dataSource.getField(b),{type:a}=a,isc.BizUtil.isNumeric(a)?"NumericMultipleBucket"!==c&&setCategoryBucketErrors("Use a numeric bucket only with a number field"):isc.BizUtil.isTemporal(a)?"TemporalBucket"!==c&&setCategoryBucketErrors("Use a temporal bucket only with a date or time field"):("TemporalBucket"===c||"NumericMultipleBucket"===c)&&setCategoryBucketErrors("Use a temporal bucket only with a date or time field"))};
setCategoryBucketErrors=function(a){isc.ChartDialog._valuesManager.setErrors({categoryBinding:a,categoryBucket:a},!0)};validateValueFunction=function(a){const {valueBinding:b,valueFunction:c}=a.b;a=isc.ChartDialog._dataSource.getField(b);({type:a}=a);"integer"!==a&&"float"!==a&&"Count"!==c&&isc.ChartDialog._valuesManager.setErrors({valueBinding:"Use the [Count] value function with a non-numeric field",valueFunction:"Use the [Count] value function with a non-numeric field"},!0)};
generateDataLabel=function(a){({valueFunction:a}=a.b);a=a?isc.ChartDialog._valueForm.getItem("valueFunction").getDisplayValue():"";const b=isc.ChartDialog._valueForm.getItem("valueBinding").getDisplayValue(),c=isc.ChartDialog._categoryForm.getItem("categoryBinding").getDisplayValue();return`${a} ${b} by ${c}`};isc.defineClass("AdvancedFilter","VLayout");isc.AdvancedFilter.addProperties({width:"100%",height:1,overflow:"visible",membersMargin:2,margin:2,filterableComponent:null,filterableComponentConfig:null,toggleButton:null,_filterBuilder:null,_filterButtonDefaults:null});
isc.AdvancedFilter.addMethods({initWidget:function(){this._filterButtonDefaults={_constructor:isc.IButton,autoFit:!0,title:"Filter",icon:"icons/filter_add.png"};this.Super("initWidget",arguments);this.toggleButton=isc.ToolStripButton.create({icon:"icons/filter_add.png",actionType:"checkbox",showFocused:!1,showDown:!1,showSelectedIcon:!1,selected:!1,canHover:!0,getHoverHTML:function(){return this.selected?"Use <b>simple</b> filtering":"Use <b>advanced</b> filtering"}});this._styleForm=isc.DynamicForm.create({numCols:2,
width:200,items:[{name:"style",title:"Style",type:"radioGroup",vertical:!1,required:!0,valueMap:{radio:"Flat",bracket:"Nested",inline:"Inline"},defaultValue:"radio",changed:(a,b,c)=>{this.setDataSource(this._filterBuilder.getDataSource())}}]});this.addMember(this._styleForm)},getStyle:function(){return this._styleForm.getValue("style")},setStyle:function(a){this._styleForm.setValue("style",a);this.setDataSource(this._filterBuilder.getDataSource())},toggleButtonClick:function(){const {grid:a}=this.filterableComponent;
if(this.toggleButton.selected){const b=a.getFilterEditorCriteria;a.getFilterEditorCriteria=()=>null;a.setFilterEditorCriteria(isc.emptyObject);a.setShowFilterEditor(!1);a.getFilterEditorCriteria=b;a.filterData(this._filterBuilder.getCriteria());this.show()}else a.setShowFilterEditor(!0),a.setFilterEditorCriteria({}),a.filterData({}),this.hide()},setDataSource:function(a){this._filterBuilder?(this.removeMember(this._filterBuilder),this._filterBuilder.destroy(),this._filterBuilder=null):(this._filterButton=
this.createAutoChild("_filterButton",{click:()=>{this.filterableComponent.grid.filterData(this._filterBuilder.getCriteria(),null,{params:{_summary:this.filterableComponent.summaryType}})}}),this.addMember(this._filterButton));const b=this.getStyle()||"radio";this._filterBuilder=isc.FilterBuilder.create({dataSource:a,topOperatorAppearance:b,allowEmpty:!0});this.addMember(this._filterBuilder,1);this.toggleButton.selected?this.show():this.hide()},getCriteria:function(a){return this._filterBuilder?this._filterBuilder.getCriteria(a):
null},clearCriteria:function(){this._filterBuilder&&this._filterBuilder.clearCriteria()},setCriteria:function(a){this._filterBuilder&&this._filterBuilder.setCriteria(a)}});isc.ClassFactory.defineClass("BizGrid","VLayout");isc.BizGrid.addProperties({grid:null,_eventRowNum:null,_eventColumnNum:null,_eventRecord:null,_disabled:!1,deleteSelectionItem:null,deleteSelectionButton:null,clearSelectionItem:null,aggregate:!1,canCreate:!1,canUpdate:!1,canDelete:!1,canAdd:!0,canEdit:!0,canZoom:!0,canRemove:!0,isRepeater:!1,showColumnHeaders:!0,showGrid:!0});
isc.BizGrid.addMethods({initWidget:function(a){this.Super("initWidget",arguments);this.deleteSelectionItem={title:"Delete/Remove Selected",name:"deleteRemoveSelected",icon:"icons/delete.png",enableIf:()=>!this._disabled&&this.canDelete&&this.canRemove&&this.grid.anySelected(),click:()=>{isc.ask("Do you want to delete/remove the selected rows?",b=>{if(b){b={params:this._b?{}:{_csrf:this._csrf}};if(this._view){const c=this._view.gather(!1);b.params._c=c._c}this.grid.removeSelectedData((c,d,e)=>{c&&
(this._csrf=c.httpHeaders["x-csrf-token"]);this.grid.selectionChanged(null,!1);this._eventRecord=this._eventColumnNum=this._eventRowNum=null;this._view&&(this._b&&(this._view._vm.setValue("_changed",!0),this._view._vm.setValue("_apply",!0)),this.bizRemoved&&this.bizRemoved())},b)}})}};this.deleteSelectionButton=isc.BizUtil.createImageButton(this.deleteSelectionItem.name,this.deleteSelectionItem.icon,!0,"<b>Delete/Remove</b> selected.",this.deleteSelectionItem.click);this.deleteSelectionButton.setDisabled(!0);
this.clearSelectionItem={title:"Deselect all",icon:"icons/clearSelection.png",click:()=>{this.grid.deselectAllRecords();this._eventRecord=this._eventColumnNum=this._eventRowNum=null}}},refresh:function(){this.grid.refresh()}});isc.ClassFactory.defineClass("BizDataGrid","BizGrid");isc.BizDataGrid.addProperties({_newButton:null,_zoomButton:null,_popoutButton:null,_editButton:null,showAdd:!0,showZoom:!0,showEdit:!0,showRemove:!0,showDeselect:!0,_mod:null,_doc:null,_b:null,_ordinal:null});
isc.BizDataGrid.addMethods({initWidget(a){this.Super("initWidget",arguments);var b={title:"New",name:"new",icon:"icons/new.png",enableIf:()=>!this._disabled&&this.canCreate&&this.canAdd,click:()=>a.inline?this.add():this.zoom(!0)};this._zoomItem={title:"Zoom",name:"zoom",icon:"icons/zoom.gif",click:()=>this.zoom(!1),enableIf:()=>this.canZoom&&this.grid.anySelected()};const c={title:"Edit",name:"edit",icon:"icons/edit.png",enableIf:()=>!this._disabled&&this.canUpdate&&this.canEdit&&this.grid.anySelected(),
click:()=>{this.grid.anySelected()&&this.grid.startEditing(this._eventRowNum,this._eventColNum)}};this._newButton=isc.BizUtil.createImageButton(b.name,b.icon,!0,"<b>New</b> record.",b.click);this._zoomButton=isc.BizUtil.createImageButton(this._zoomItem.name,this._zoomItem.icon,!0,"<b>Zoom</b> into record.",this._zoomItem.click);this._zoomButton.setDisabled(!0);this._editButton=isc.BizUtil.createImageButton(c.name,c.icon,!0,"<b>Edit</b> a record inline.",c.click);this._editButton.setDisabled(!0);const d=
[];a.editable&&(this.showAdd&&d.push(b),this.showZoom&&d.push(this._zoomItem),this.showEdit&&d.push(c),this.showRemove&&d.push(this.deleteSelectionItem),this.showDeselect&&(0<d.length&&d.push({isSeparator:!0}),d.push(this.clearSelectionItem)));b=isc.Menu.create({showShadow:!0,shadowDepth:10,data:d});this._createGrid(a,this._fields,b);this._view._grids[this._b]||(this._view._grids[this._b]={});this._view._grids[this._b][this.getID()]=this;a.editable&&!a.isRepeater&&(b=[],this.showAdd&&b.push(this._newButton),
this.showZoom&&b.push(this._zoomButton),this.showEdit&&b.push(this._editButton),this.showRemove&&b.push(this.deleteSelectionButton),this.showDeselect&&(0<b.length&&b.push("separator"),b.push(isc.BizUtil.createImageButton(this.clearSelectionItem.icon,!1,"<b>Deselect</b> all.",this.clearSelectionItem.click))),0<b.length&&this.addMember(isc.ToolStrip.create({membersMargin:2,layoutMargin:2,width:"100%",members:b})));0===this.getMembersLength()&&this.grid.setMinHeight(this.minHeight);this.addMember(this.grid)},
_createGrid:function(a,b,c){const d=this;b={height:"*",minHeight:100,autoFetchData:!1,showHeader:!this.isRepeater||this.showColumnHeaders,headerHeight:30,showFilterEditor:!1,defaultFilterOperator:"iContains",showSelectedStyle:!this.isRepeater,showEmptyMessage:!this.isRepeater,baseStyle:this.isRepeater?"":null,border:this.isRepeater?this.showGrid?null:"none":null,bodyBackgroundColor:this.isRepeater?this.showGrid?"white":"#F9F9F9":"white",fields:b,selectionType:"single",alternateRecordStyles:!0,canEdit:this.canUpdate&&
this.canEdit,editEvent:"none",neverValidate:!1,validateByCell:!0,saveByCell:!1,validateOnChange:!1,recordEnabledProperty:"_enabled",canHover:!this.isRepeater,wrapCells:!!this.wordWrap,fixedRecordHeights:!this.wordWrap,canReorderFields:!1,canSort:!a._ordinal,canGroupBy:!a._ordinal,canReorderRecords:!!a._ordinal&&this.canUpdate&&this.canEdit,recordsDropped:function(e,f,g,h){this.reorderData()},reorderData:function(){a._ordinal&&this.getData().forEach((e,f)=>{e[a._ordinal]=f+1})},dragDataAction:"move",
autoSaveEdits:!0,modalEditing:!0,canFreezeFields:!1,contextMenu:this.isRepeater?null:c,showRollOver:!0,rowClick:function(e,f,g){e?.bizId&&(d._eventRecord=e,d._eventRowNum=f,d._eventColNum=g);return this.Super("rowClick",arguments)},rowContextClick:function(e,f,g){return e?.bizId?(this.deselectAllRecords(),d._eventRecord=e,d._eventRowNum=f,d._eventColNum=g,this.selectSingleRecord(e),!0):!1},rowDoubleClick:function(e){a.editable&&e&&!e.isFolder&&(d._eventRecord=e,a.inline?d.canUpdate&&d.canEdit&&d.showEdit&&
!d._disabled&&this.startEditing(d._eventRowNum,d._eventColNum,!1):d.canZoom&&d.showZoom&&(d._view._blurry?d._view._blurry=d._zoomItem:d._zoomItem.click()));return this.Super("rowDoubleClick",arguments)},selectionChanged:function(){const e=this.anySelected();d._zoomButton.setDisabled(!e||!d.canZoom);d._editButton.setDisabled(!e||d._disabled||!d.canUpdate||!d.canEdit);d.deleteSelectionButton.setDisabled(!e||d._disabled||!d.canDelete||!d.canRemove);d._newButton.setDisabled(d._disabled||!d.canCreate||
!d.canAdd)},selectionUpdated:function(e){if(d.selectedIdBinding){const f=d._view._vm.valuesHaveChanged();d._view._vm.setValue(d.selectedIdBinding,e?.bizId||null);f||d._view._vm.rememberValues()}d.bizSelected&&(d.showZoom&&d.canZoom&&a.editable?(isc.RPCManager.requestsArePending()?d._view._blurry=null:d._view._blurry=!0,d.delayCall("bizSelected",[],this.doubleClickDelay)):d.bizSelected())},canEditCell:function(e,f){return!d._disabled&&this.Super("canEditCell",arguments)},editComplete:(e,f,g,h,k)=>
{this._view._vm.setValue("_changed",!0);this._view._vm.setValue("_apply",!0);this.bizEdited&&this.bizEdited()}};a.gridConfig&&isc.addProperties(b,a.gridConfig);this.grid=isc.ListGrid.create(b)},setDisabled:function(a){this._disabled=a;this.grid&&this.grid.selectionChanged()},zoom:function(a){isc.BizUtil.getEditView(this._eventRecord?.bizModule||this._mod,this._eventRecord?.bizDocument||this._doc,b=>{const c=this._view._b?`${this._view._b}.${this._b}`:this._b,d=a?null:this._eventRecord.bizId,e=this._view.gather(!0);
if(e){const f=this.grid.body.getPageRect(),g=this.grid.body.getRowPageTop(this._eventRowNum),h=this.grid.body.getRowSize(this._eventRowNum);e._apply||this._view._vm.valuesHaveChanged()?(delete e._apply,this._view.saveInstance(!0,null,()=>{this._zoom(a,d,c,b,e._c,f,g,h)})):this._zoom(a,d,c,b,e._c,f,g,h)}else isc.warn("You cannot zoom in until you fix the problems found")})},_zoom:function(a,b,c,d,e,f,g,h){g=[f[0],g,f[2],h];isc.WindowStack.popup(a?f:g,a?"New":"Edit",!1,[d]);d.editInstance(b,c,e,!0)},
add:function(){this.grid.startEditingNew({bizId:null})},remove:function(a){const b=this.grid.data;b.removeAt(b.findIndex("bizId",a));this.grid.deselectAllRecords();this._eventRecord=this._eventColumnNum=this._eventRowNum=null}});isc.ClassFactory.defineClass("BizListGrid","BizGrid");isc.BizListGrid.addProperties({summaryType:"",tagId:null,_dataSource:null,_toolbar:null,_advancedFilter:null,_summaryGrid:null,_flagForm:null,_flagDialog:null,_newButton:null,_zoomButton:null,_popoutButton:null,_editButton:null,_pickButton:null,_chartButton:null,showAdd:!0,showZoom:!0,showEdit:!0,showRemove:!0,showDeselect:!0,showExport:!0,showChart:!0,showFilter:!0,showSummary:!0,showSnap:!0,showTag:!0,autoPopulate:!0,_lookup:null});
isc.BizListGrid.addMethods({initWidget:function(a){this.Super("initWidget",arguments);const b=this;this._config=a;this._flagDialog=isc.Window.create({autoCenter:!0,autoSize:!0,isModal:!0,showModalMask:!0,canDragReposition:!0,canDragResize:!1,showShadow:!0,shadowSoftness:10,shadowOffset:0,title:"Flag",headerIconDefaults:{src:"flag.gif",width:22,height:22},showMaximizeButton:!1,showMinimizeButton:!1,showHeaderIcon:!0,items:[isc.DynamicForm.create({padding:0,margin:5,useAllDataSourceFields:!1,numCols:2,
items:[]})]});const c=()=>{let m=this._advancedFilter.toggleButton.selected?this._advancedFilter.getCriteria():this.grid.getFilterEditorCriteria(!0);isc.BizUtil.convertFilterCriteria(m);a?.params&&(m=isc.BizUtil.completeFilterCriteria(m,a.params,this._view));return m};var d={title:"New",name:"new",icon:"icons/new.png",enableIf:(m,q,t)=>!this._disabled&&this.canCreate&&this.canAdd,click:()=>{if(a){let q=a.contConv||!1;if(q&&(this._view.gather(!1)._changed||this._view._vm.valuesHaveChanged()))isc.say(`There are unsaved changes in the ${this._view._singular}. Save your changes to the ${this._view._singular} first.`,
null,{title:"Unsaved Changes!"});else{var m={};a.params&&isc.BizUtil.addFilterRequestParams(m,a.params,this._view);this.zoom(!0,q,m)}}else this.zoom(!0,!1)}};this._zoomItem={title:"Zoom",name:"zoom",icon:"icons/zoom.gif",enableIf:(m,q,t)=>this.canZoom&&!this.aggregate&&this.grid.anySelected(),click:()=>{a&&a.contConv?this._view.gather(!1)._changed||this._view._vm.valuesHaveChanged()?isc.say(`There are unsaved changes in the ${this._view._singular}. Save your changes to the ${this._view._singular} first.`,
null,{title:"Unsaved Changes!"}):this.zoom(!1,!0):this.zoom(!1,!1)}};const e={title:"Popout",icon:"icons/popout.png",enableIf:(m,q,t)=>this.canZoom&&!this.aggregate&&!(a&&a.contConv)&&this.grid.anySelected(),click:()=>{window.open(`?a=e&m=${this._eventRecord.bizModule}&d=${this._eventRecord.bizDocument}&i=${this._eventRecord.bizId}`,"_blank").focus()}},f={title:"Edit",name:"edit",icon:"icons/edit.png",enableIf:(m,q,t)=>!this._disabled&&this.canUpdate&&this.canEdit&&this.grid.anySelected(),click:()=>
{if(this.grid.anySelected()){this.grid.saveRequestProperties=this.grid.saveRequestProperties||{};this.grid.saveRequestProperties.params=this.grid.saveRequestProperties.params||{};this.grid.saveRequestProperties.params._csrf=this._csrf;if(this._view){const m=this._view.gather(!1);a&&a.contConv&&(m._changed||this._view._vm.valuesHaveChanged()?isc.say(`There are unsaved changes in the ${this._view._singular}. Save your changes to the ${this._view._singular} first.`,null,{title:"Unsaved Changes!"}):this.grid.saveRequestProperties.params._cc=
"");this.grid.saveRequestProperties.params._c=m._c}else delete this.grid.saveRequestProperties.params._c;this.grid.startEditing(this._eventRowNum,this._eventColNum)}}};var g={title:"Pick",name:"pick",icon:"icons/select.png",enableIf:(m,q,t)=>!this._disabled,click:()=>{this.pick(this._lookup)}};const h=function(m,q,t,p){m=isc.BizUtil.createImageButton(m.name,m.icon,q,t,p);q||m.setDisabled(!0);return m};this._newButton=h(d,!0,"<b>New</b> record.",d.click);this._zoomButton=h(this._zoomItem,!0,"<b>Zoom</b> into record.",
this._zoomItem.click);this._popoutButton=h(e,!0,"<b>Popout</b> record.",e.click);this._editButton=h(f,!0,"<b>Edit</b> a record inline.",f.click);this._pickButton=h(g,!0,"<b>Pick</b> this record.",g.click);this._zoomButton.setDisabled(!0);this._popoutButton.setDisabled(!0);this._editButton.setDisabled(!0);this._pickButton.setDisabled(!0);var k={title:"Clear Filter",icon:"icons/filter_delete.png",click:()=>{this.clearFilter()}};const l={title:"Refresh",icon:"icons/refresh.png",click:()=>{this.refresh()}},
n=()=>{var m=this._dataSource.getFieldNames(!0);const q=[{name:"bizFlagComment",title:"Flag",line:1,width:100}],t=[],p=this.getFieldState();m.forEach((w,y)=>{if("bizTagged"!==w&&"bizFlagComment"!==w){const A=this._dataSource.getField(w);var z=this.grid.getField(w);z=z?z.align:"center";p[y]&&(void 0===p[y].visible||null===p[y].visible||p[y].visible)?t.push({name:w,title:A.title,line:1,width:p[y].width,align:z}):q.push({name:w,title:A.title,line:1,width:100,align:z})}});m=c();isc.ReportDialog.popupExport(this._dataSource.ID,
this._view?this._view.gather(!1)._c:null,m,this.tagId,q,t)},r={title:"Export Data...",icon:"icons/export.png",click:()=>{const m=this.grid.getTotalRows();1E4<m?isc.ask(`There are ${m} rows in this list to export which could take more than 1 minute! Do you want to continue?`,q=>{q&&n()}):1E3<m?isc.ask(`There are ${m} rows to export which may take a few seconds. Do you want to continue?`,q=>{q&&n()}):n()}},u=()=>{const m=c();isc.ChartDialog.popupChart(this._dataSource,this._view?this._view.gather(!1)._c:
null,m,this.tagId,this._dataSource.fields)},v={title:"Chart Data...",icon:"icons/chart.png",enableIf:(m,q,t)=>this._dataSource&&!this._config.isTree&&!this._dataSource.ID.includes("__"),click:()=>{const m=this.grid.getTotalRows();1E4<m?isc.ask(`There are ${m} rows in this list to chart which could take more than 1 minute!  Do you want to continue?`,q=>{q&&u()}):1E3<m?isc.ask(`There are ${m} rows to chart which may take a few seconds.  Do you want to continue?`,q=>{q&&u()}):u()}};this._chartButton=
h(v,!0,"<b>Chart</b> this data.",v.click);this._chartButton.setDisabled(!0);g=a&&a.isPickList?[g]:[];this.showAdd&&g.add(d);this.showZoom&&(g.add(this._zoomItem),g.add(e));this.showEdit&&g.add(f);this.showRemove&&g.add(this.deleteSelectionItem);0<g.length&&g.add({isSeparator:!0});this.showDeselect&&g.add(this.clearSelectionItem);this.showFilter&&(this._config.isTree||g.add(k));g.add(l);if(this.showExport||this.showChart)g.add({isSeparator:!0}),this.showExport&&g.add(r),this.showChart&&g.add(v);this._contextMenu=
isc.Menu.create({showShadow:!0,shadowDepth:10,data:g});this._advancedFilter=isc.AdvancedFilter.create({filterableComponent:this,filterableComponentConfig:a});this._advancedFilter.toggleButton.click=()=>{this._advancedFilter.toggleButtonClick()};this._snapMenu=isc.Menu.create({showShadow:!0,shadowDepth:10,canSelectParentItems:!0,data:[]});this._snapMenuButton=isc.ToolStripMenuButton.create({autoFit:!0,padding:3,title:"No Snapshot",menu:this._snapMenu,click:function(){isc.RPCManager.sendRequest({showPrompt:!1,
evalResult:!0,useSimpleHttp:!0,httpMethod:"GET",params:{a:"L",d:b._dataSource.ID,t:"sc",_csrf:b._csrf},actionURL:SKYVE.Util.CONTEXT_URL+"smartsnap",callback:function(m,q,t){if(0<=m.status){b._csrf=m.httpHeaders["x-csrf-token"];m=[{title:"New Snapshot",icon:"icons/snap_add.png",click:function(){b._snapMenuButton._newSnap()}},{isSeparator:!0},{title:"No Snapshot",click:function(){b._snapMenuButton._setSnap(null)}}];if(q)for(let p=0,w=q.length;p<w;p++){m.add({isSeparator:!0});t=q[p];const y=b.snapId==
t.bizId;t={title:t.name,icon:"icons/snap.png",click:b._snapMenuButton.ID+"._setSnap('"+t.bizId+"','"+t.name+"','"+JSON.stringify(t.snapshot.criteria)+"','"+t.snapshot.advancedCriteriaStyle+"','"+t.snapshot.fieldState+"','"+t.snapshot.sortState+"','"+t.snapshot.groupState+"','"+t.snapshot.summaryType+"')",submenu:[{title:"Update Snapshot"+(y?"":" (Select the Snapshot first)"),icon:"icons/snap_edit.png",click:b._snapMenuButton.ID+"._updateSnap('"+t.bizId+"')",enabled:y},{title:"Delete Snapshot",icon:"icons/snap_delete.png",
click:b._snapMenuButton.ID+"._deleteSnap('"+t.bizId+"')"}]};m.add(t)}b._snapMenu.setData(m)}}});this.Super("click",arguments)}});this._snapMenuButton._newSnap=()=>{isc.askForValue("Enter the new Snapshot name",m=>{if(m){const q={a:"N",n:m,d:this._dataSource.ID,t:"sc",_csrf:this._csrf,s:{criteria:this._advancedFilter.toggleButton.selected?this._advancedFilter.getCriteria():this.grid.getFilterEditorCriteria(!0),advancedCriteriaStyle:this._advancedFilter.getStyle(),fieldState:this.grid.getFieldState(),
sortState:this.grid.getSortState(),groupState:this.grid.getGroupState(),summaryType:this.summaryType}};isc.RPCManager.sendRequest({showPrompt:!0,evalResult:!0,useSimpleHttp:!0,httpMethod:"POST",params:q,actionURL:SKYVE.Util.CONTEXT_URL+"smartsnap",callback:(t,p,w)=>{0<=t.status&&(this._csrf=t.httpHeaders["x-csrf-token"],this.snapId=p.bizId,this._snapMenuButton.setTitle(m))}})}},{width:300})};this._snapMenuButton._setSnap=(m,q,t,p,w,y,z,A)=>{this.snapId=m;this._snapMenuButton.setTitle(q?q:"No Snapshot");
t=t?JSON.parse(t):{};t.operator?(this._advancedFilter.toggleButton.select(),this._advancedFilter.toggleButtonClick(),this._advancedFilter.setStyle(p?p:"radio"),this.grid.setFilterEditorCriteria({}),this._advancedFilter.setCriteria(t)):(this._advancedFilter.clearCriteria(),this._advancedFilter.toggleButton.deselect(),this._advancedFilter.toggleButtonClick(),this.grid.setFilterEditorCriteria({}),this.grid.setFilterEditorCriteria(t),this.grid.setCriteria({}),this.grid.setFilterEditorCriteria(t));this.grid.setFieldState(w||
null);this.grid.setSortState(y||null);this.grid.setGroupState(z||null);this.summaryType=A||"";this._summaryGrid.data[0].bizFlagComment=this.summaryType;this.refresh()};this._snapMenuButton._updateSnap=m=>{isc.RPCManager.sendRequest({showPrompt:!0,evalResult:!0,useSimpleHttp:!0,httpMethod:"POST",params:{a:"U",i:m,t:"sc",_csrf:this._csrf,s:{criteria:this._advancedFilter.toggleButton.selected?this._advancedFilter.getCriteria():this.grid.getFilterEditorCriteria(!0),advancedCriteriaStyle:this._advancedFilter.getStyle(),
fieldState:this.grid.getFieldState(),sortState:this.grid.getSortState(),groupState:this.grid.getGroupState(),summaryType:this.summaryType}},actionURL:SKYVE.Util.CONTEXT_URL+"smartsnap",callback:(q,t,p)=>{0<=q.status&&(this._csrf=q.httpHeaders["x-csrf-token"])}})};this._snapMenuButton._deleteSnap=m=>{isc.ask("Do you want to delete this Snapshot?",q=>{q&&isc.RPCManager.sendRequest({showPrompt:!0,evalResult:!0,useSimpleHttp:!0,httpMethod:"POST",params:{a:"D",i:m,_csrf:this._csrf},actionURL:SKYVE.Util.CONTEXT_URL+
"smartsnap",callback:(t,p,w)=>{0<=t.status&&(this._csrf=t.httpHeaders["x-csrf-token"],this.snapId===m&&this._snapMenuButton._setSnap(null))}})})};this._clearSnap=()=>{this.snapId=null;this._snapMenuButton.setTitle("No Snapshot")};this._tagsMenu=isc.Menu.create({showShadow:!0,shadowDepth:10,canSelectParentItems:!0,data:[]});this._tagsMenuButton=isc.ToolStripMenuButton.create({autoFit:!0,padding:3,title:"No Tag",menu:this._tagsMenu,click:function(){const m={a:"L",ID:b._tagsMenuButton.ID,_csrf:b._csrf};
b.tagId&&(m.t=b.tagId);isc.RPCManager.sendRequest({showPrompt:!1,evalResult:!0,useSimpleHttp:!0,httpMethod:"POST",params:m,actionURL:SKYVE.Util.CONTEXT_URL+"smarttag",callback:function(q,t,p){0<=q.status&&(b._csrf=q.httpHeaders["x-csrf-token"],b._tagsMenu.setData(t))}});this.Super("click",arguments)}});this._tagsMenuButton.newTag=()=>{isc.askForValue("Enter the new tag name",m=>{m&&isc.RPCManager.sendRequest({showPrompt:!0,evalResult:!0,useSimpleHttp:!0,httpMethod:"POST",params:{a:"N",n:m,ID:this._tagsMenuButton.ID,
_csrf:this._csrf},actionURL:SKYVE.Util.CONTEXT_URL+"smarttag",callback:(q,t)=>{0<=q.status&&(this._csrf=q.httpHeaders["x-csrf-token"],this.tagId=t.bizId,this._tagsMenuButton.setTitle(m),this.refresh())}})},{width:300})};this._tagsMenuButton.setTag=(m,q)=>{this.tagId=m;this._tagsMenuButton.setTitle(q);this.refresh()};this._tagsMenuButton.tagOp=(m,q)=>{const t=(p,w)=>{isc.ask(p,y=>{y&&w()})};switch(q){case "C":t("Do you want to clear all tagged data from this tag?",()=>x(m,q));break;case "D":t("Do you want to delete this tag?",
()=>x(m,q));break;case "T":case "U":const p=this.grid.getTotalRows();let w=`There are ${p} rows to ${"U"===q?"un":""}tag`;if(1E4<p)w+=" which could take more than 1 minute! Do you want to continue?";else if(1E3<p)w+=" which may take a few seconds. Do you want to continue?";else{x(m,q);break}t(w,()=>x(m,q));break;default:x(m,q)}};const x=(m,q)=>{m={a:q,t:m,_csrf:this._csrf};if(["T","U"].includes(q)){m.d=this._dataSource.ID;const t=c();m.c=t;this._view&&(m._c=this._view.gather(!1)._c)}isc.RPCManager.sendRequest({showPrompt:!0,
evalResult:!0,useSimpleHttp:!0,httpMethod:"POST",params:m,actionURL:SKYVE.Util.CONTEXT_URL+"smarttag",callback:(t,p)=>{0<=t.status&&(this._csrf=t.httpHeaders["x-csrf-token"],"D"===q&&this._tagsMenuButton.setTag(null,"No Tag"),this.refresh())}})};d=a&&a.isPickList?[b._pickButton]:[];this.showAdd&&d.add(this._newButton);this.showZoom&&(d.add(this._zoomButton),d.add(this._popoutButton));this.showEdit&&d.add(this._editButton);this.showRemove&&d.add(this.deleteSelectionButton);0<d.length&&d.add("separator");
this.showDeselect&&d.add(isc.BizUtil.createImageButton(this.clearSelectionItem.icon,!1,"<b>Deselect</b> all.",this.clearSelectionItem.click));this.showFilter&&(this._config.isTree||d.add(isc.BizUtil.createImageButton(k.icon,!1,"<b>Clear filter</b> criteria.",k.click)));d.add(isc.BizUtil.createImageButton(l.icon,!1,"<b>Refresh</b> table data.",l.click));this.showFilter&&(this._config.isTree||d.addList(["separator",this._advancedFilter.toggleButton]));if(!a||!a.isPickList){if(this.showExport||this.showChart)d.add("separator"),
this.showExport&&d.add(isc.BizUtil.createImageButton(r.icon,!1,"<b>Export</b> table data.",r.click)),this.showChart&&d.add(this._chartButton);this.showSnap&&d.addList(["separator",isc.Label.create({width:60,contents:"Snapshot:"}),this._snapMenuButton]);this.showTag&&d.addList(["separator",isc.Label.create({width:30,contents:"Tag:"}),this._tagsMenuButton])}this._toolbar=isc.ToolStrip.create({membersMargin:2,layoutMargin:2,width:"100%",overflow:"hidden",members:d});this._summaryGrid=isc.ListGrid.create({editByCell:!0,
canEditCell:function(m,q){return 0===q},rowClick:function(){this.selectRecord(0,!1);return!1},rowDoubleClick:function(){this.selectRecord(0,!1);return!1},rowContextClick:function(){this.selectRecord(0,!1);return!1},height:28,leaveScrollbarGap:!0,autoFetchData:!1,autoFitData:null,showHeader:!1,showEmptyMessage:!1,bodyOverflow:"hidden"});this._config.isRepeater||(this.addMember(this._toolbar),this.addMember(this._advancedFilter));this.addMember(this.grid);this._config.isTree||this._config.isRepeater||
(this.addMember(this._summaryGrid),this.showSummary||this.hideMember(this._summaryGrid));this._flagForm=this._flagDialog.items[0];a&&a.name&&(k=this._view._grids[a.name],k||(k={},this._view._grids[a.name]=k),k[this.getID()]=this)},hasDataSource:function(){return null!==this.grid},_createGrid:function(a,b,c){const d=this;b={autoDraw:!0,height:"*",minHeight:100,leaveScrollbarGap:!0,autoFetchData:!1,useAllDataSourceFields:!0,showHeader:!0,headerHeight:30,showFilterEditor:this.showFilter&&!this._config.isTree&&
!this._config.isRepeater&&!this.aggregate&&!this._advancedFilter.toggleButton.selected,canShowFilterEditor:!1,allowFilterOperators:!1,filterByCell:!1,selectionType:"single",alternateRecordStyles:!0,canEdit:!0,dataSource:this._dataSource,fields:b,editEvent:"none",neverValidate:!1,validateByCell:!0,saveByCell:!1,validateOnChange:!1,canHover:this._config.isRepeater?!1:!0,canReorderFields:!1,autoSaveEdits:!0,modalEditing:!0,canFreezeFields:!1,contextMenu:this._config.isRepeater?null:this._contextMenu,
showRollOver:!0,recordEnabledProperty:"_enabled",canExpandRecords:c,expansionMode:"details",rowClick:function(e,f,g){if(!d.isRepeater)return e&&e.bizId&&(d._eventRecord=e,d._eventRowNum=f,d._eventColNum=g),this.Super("rowClick",arguments)},rowContextClick:function(e,f,g){return d.isRepeater?!1:e&&e.bizId?(this.deselectAllRecords(),d._eventRecord=e,d._eventRowNum=f,d._eventColNum=g,this.selectSingleRecord(e),!0):!1},rowDoubleClick:(e,f,g)=>{if(this.isRepeater)return!0;e&&e.bizId&&(this._eventRecord=
e,this._eventRowNum=f,this._eventColNum=g,a&&a.isPickList?this.pick(this._lookup):this.showZoom&&this.canZoom&&!this.aggregate&&(this._view&&this._view._blurry?this._view._blurry=this._zoomItem:this._zoomItem.click()));return!0},canSelectRecord:e=>!this.isRepeater,selectionChanged:function(e,f){this.anySelected()?(e=d.aggregate||!d.canZoom,d._zoomButton.setDisabled(e),d._popoutButton.setDisabled(e||a&&a.contConv),d._editButton.setDisabled(d._disabled||!d.canUpdate||!d.canEdit),d._pickButton.setDisabled(d._disabled),
d.deleteSelectionButton.setDisabled(d._disabled||!d.canDelete||!d.canRemove)):(d._zoomButton.setDisabled(!0),d._popoutButton.setDisabled(!0),d._editButton.setDisabled(!0),d._pickButton.setDisabled(!0),d.deleteSelectionButton.setDisabled(!0));d._newButton.setDisabled(d._disabled||!d.canCreate||!d.canAdd)},selectionUpdated:(e,f)=>{this.selectedIdBinding&&(this.selectedIdTrackChanges?this._view._vm.setValue(this.selectedIdBinding,e?e.bizId:null):(f=this._view._vm.valuesHaveChanged(),this._view._vm.setValue(this.selectedIdBinding,
e?e.bizId:null),f||this._view._vm.rememberValues()));this.bizSelected&&(this.showZoom&&this.canZoom&&!this.aggregate?(isc.RPCManager.requestsArePending()?this._view&&(this._view._blurry=null):this._view&&(this._view._blurry=!0),this.delayCall("bizSelected",[],this.doubleClickDelay)):this.bizSelected())},editComplete:(e,f,g,h,k,l)=>{0<=l.status&&(this._csrf=l.httpHeaders["x-csrf-token"],this.bizEdited&&this.bizEdited())},filterData:function(e,f,g){e=e||{};g=g||{};g.params=g.params||{};d._csrf&&(g.params._csrf=
d._csrf);a.isTree||(g.params._summary=d.summaryType);d.showTag&&(g.params._tagId=d.tagId);d._view&&(g.params._c=d._view.gather(!1)._c,d._view._b&&(g.params._b=d._view._b));a&&(a.contConv||a.isPickList)&&(g.params._cc="");let h=d._advancedFilter.toggleButton.selected?d._advancedFilter.getCriteria():d.grid.getFilterEditorCriteria(!0);h||={};isc.BizUtil.convertFilterCriteria(e);a&&a.params&&(e=isc.BizUtil.completeFilterCriteria(h,a.params,d._view));this.Super("filterData",[e,f,g]);d._advancedFilter.toggleButton.selected||
d.grid.setFilterEditorCriteria(h)},dataProperties:{transformData:(e,f)=>{if("fetch"===f.context?.operationType&&f.status===isc.RPCResponse.STATUS_SUCCESS){this._csrf=f.httpHeaders["x-csrf-token"];const g=[{name:"bizFlagComment",type:"enum",valueMap:" Count Avg Sum Min Max".split(" "),width:70,change:(h,k,l)=>{this.summaryType=l;this.grid.invalidateCache();h=this._advancedFilter.toggleButton.selected?this._advancedFilter.getCriteria():this.grid.getFilterEditorCriteria(!0);this.grid.filterData(h)}}];
f=this._dataSource.getFieldNames(!0);g.length=f.length-1;f.forEach((h,k)=>{if("bizTagged"!==h&&"bizFlagComment"!==h){const l=this._dataSource.getField(h);let n="float",r=null;if("Min"===this.summaryType||"Max"===this.summaryType)n=l.type,["comboBox","enum","select","bizLookupDescription","boolean"].includes(n)||(r=l.editorType);g[k-1]={name:h,type:n,editorType:r,canEdit:!1,...("float"===n&&{formatCellValue:u=>isc.isA.Boolean(u)?null:u})}}});this._summaryGrid.setFields(g);f=e.pop();this._summaryGrid.setData([f]);
this.grid.fieldStateChanged();this._summaryGrid.startEditing(0,0,!0);this._summaryGrid.selectRecord(0,!1)}return e}},canEditCell:function(e,f){const g=d.showTag?1:0;return!d._disabled&&f>g&&this.Super("canEditCell",arguments)},fieldStateChanged:()=>{const e=this.getFieldState();e[1]=this.showTag?{name:"bizFlagComment",width:e[0].width+e[1].width+(this.grid.canExpandRecords?32:0)}:{name:"bizFlagComment",width:e[1].width+(this.grid.canExpandRecords?32:0)};e.removeAt(0);this._summaryGrid.setFieldState(e)},
scrolled:()=>{this._summaryGrid.body?.scrollTo(this.grid.body.getScrollLeft(),0)},getCellCSSText:function(e,f,g){return e?.bizTagged?"font-weight:bold;background-color:#B8D1EA;":this.Super("getCellCSSText",arguments)}};a.isRepeater&&Object.assign(b,{showRollOver:!1,showSelectedStyle:!1,showEmptyMessage:!1,baseStyle:"",showHeader:a.showColumnHeaders??!0,bodyBackgroundColor:"white",...(!a.showGrid&&{border:"none",bodyBackgroundColor:"#F9F9F9"})});this.autoPopulate||(b.emptyMessage="No items shown. Filter the grid.");
this.cellHeight&&(b.cellHeight=this.cellHeight);a.gridConfig&&Object.assign(b,a.gridConfig);this.grid=a.isTree?isc.TreeGrid.create({...b,folderIcon:null,loadOnDemand:!0,dataProperties:{openProperty:"_isOpen",isFolderProperty:"_isFolder",childrenProperty:"_children"},dataFetchMode:"paged"}):isc.ListGrid.create(b)},setDisabled:function(a){this._disabled=a;this.grid&&this.grid.selectionChanged()},setLookup:function(a,b,c){this._lookup=a;this._config.params=b;this._view=c},refresh:function(){const a=
this.grid.getVisibleRows()[0];this.grid.deselectAllRecords();this._eventRecord=this._eventColumnNum=this._eventRowNum=null;this.grid.invalidateCache();const b=this._advancedFilter.toggleButton.selected?this._advancedFilter.getCriteria():this.grid.getFilterEditorCriteria(!0);this.grid.filterData(b);this.grid.scrollToRow(a,"top")},rerender:function(){this.isPickList&&this.refresh()},setDataSource:function(a,b){this._clearSnap();this._dataSource=isc.DataSource.get(a);this.canCreate=this._dataSource.canCreate;
this.canUpdate=this._dataSource.canUpdate;this.canDelete=this._dataSource.canDelete;(this.aggregate=this._dataSource.aggregate)?(this._config.isRepeater||(this.hideMember(this._toolbar),this._config.isTree||this.hideMember(this._summaryGrid)),this.canDelete=this.canUpdate=this.canCreate=!1):this._config.isRepeater||(this.showMember(this._toolbar),this._chartButton.setDisabled(this._config.isTree||this._dataSource.ID.contains("__")),this._config.isTree||(void 0===this.showSummary||null===this.showSummary||
this.showSummary?this.showMember(this._summaryGrid):this.hideMember(this._summaryGrid)));b&&(this.autoPopulate=!0,void 0!==b.autoPopulate&&(this.autoPopulate=b.autoPopulate));this.cellHeight=this._dataSource.cellHeight||null;const c=[];this.isRepeater||this.aggregate?c.add({name:"bizTagged",hidden:!0,canHide:!1}):this.showTag?c.add({name:"bizTagged",width:38,align:"center",canHide:!1,canSort:!1,canToggle:!1,canGroupBy:!1,showHover:!1,ignoreKeyboardClicks:!0,recordClick:(f,g,h,k,l,n,r,u)=>{g&&this.canUpdate&&
this.canEdit&&(this.tagId?(this._eventRecord=g,this._eventRowNum=h,this._eventColNum=l,g.bizTagged=g.bizTagged?"UNTAG":"TAG",this.grid.updateData(g,(v,x,m)=>{0<=v.status&&(this._csrf=v.httpHeaders["x-csrf-token"])},{showPrompt:!1,params:{_tagId:this.tagId,_csrf:this._csrf}})):isc.warn("Select or create a tag first from the tags menu in the list toolbar"));return!1}}):c.add({name:"bizTagged",hidden:!0,canHide:!1});this.isRepeater||this.aggregate?c.add({name:"bizFlagComment",hidden:!0,canHide:!1}):
c.add({name:"bizFlagComment",width:!this.showTag&&this.showSummary?80:40,align:"center",canHide:!1,ignoreKeyboardClicks:!0,formatCellValue:(f,g)=>f?'<img src="images/flag.gif">':"",recordClick:(f,g,h,k,l,n,r,u)=>{this.canUpdate&&this.canEdit&&(this._eventRecord=g,this._eventRowNum=h,this._eventColNum=l,this._flagForm.editRecord(g),this._flagDialog.show());return!1},hoverHTML:function(f,g,h,k,l){return f.bizFlagComment}});let d=!1,e=!0;this._dataSource.getFieldNames(!0).forEach(f=>{if("bizTagged"!==
f&&"bizFlagComment"!==f){const g=this._dataSource.getField(f);g.foreignKey||(f={name:f,autoFitWidth:!1,canToggle:!1},e&&(f.treeField=!0,e=!1),!1===g.canSave&&(f.canEdit=!1),!d&&g.detail&&(d=!0),c.add(f))}});this._advancedFilter.setDataSource(this._dataSource);this._flagForm.setDataSource(this._dataSource);this._flagForm.setFields([{name:"bizFlagComment",type:"richText",colSpan:2,height:175,validators:[{type:"lengthRange",min:0,max:1024,clientOnly:!0}]},{type:"button",title:"Clear",width:100,align:"right",
startRow:!1,endRow:!1,click:()=>{const f=this._flagForm.getField("bizFlagComment");""!==f.getValue()&&(f.setValue(""),this._flagForm.saveData(g=>{0<=g.status&&(this._csrf=g.httpHeaders["x-csrf-token"],this._flagForm.reset(),this._flagDialog.hide())},{params:{_csrf:this._csrf}}))}},{type:"button",title:"Flag",width:100,align:"left",startRow:!1,endRow:!0,click:()=>{this._flagForm.validate(!0)&&this._flagForm.saveData(f=>{0<=f.status&&(this._csrf=f.httpHeaders["x-csrf-token"],this._flagForm.reset(),
this._flagDialog.hide())},{params:{_csrf:this._csrf}})}}]);this.grid&&(this.removeMember(this.grid),this.grid.destroy());this._createGrid(this._config,c,d);this._config.isTree||this._config.isRepeater?this.addMember(this.grid):this.addMember(this.grid,this.getMembers().length-1);if(this.rootIdBinding)this.grid.getDataSource().getField("bizParentId").rootValue="_"+this._view._vm.getValue(this.rootIdBinding);else if(a=this.grid.getDataSource().getField("bizParentId"))a.rootValue=null;this.autoPopulate&&
this.grid.filterData(this._advancedFilter.toggleButton.selected?this._advancedFilter.getCriteria():this.grid.getFilterEditorCriteria());this.grid.selectionChanged(null,!1);return this._dataSource.getTitle()},getFieldState:function(){return eval(this.grid.getFieldState()).map(a=>"bizTagged"===a?{name:"bizTagged",width:38}:"bizFlagComment"===a?{name:"bizFlagComment",width:this.showTag?40:80}:a.width?a:{...a,width:this.grid.getFieldWidth(a.name)})},zoom:function(a,b,c){const {grid:d,_eventRecord:e,_view:f,
_dataSource:g}=this;let h=null;var k=null;let l=null;!a&&e?(h=e.bizModule,k=e.bizDocument,l=e.bizId):(k=d.dataSource.modoc.indexOf("."),h=d.dataSource.modoc.substring(0,k),k=d.dataSource.modoc.substring(k+1));const n=d.body.getPageRect();isc.BizUtil.getEditView(h,k,r=>{if(f){const u=f.gather(!1);b?(f._source=g.ID.substring(g.ID.lastIndexOf("_")+1),this._zoom(a,r,c,l,u._c,n)):u._apply||f._vm.valuesHaveChanged()?(delete u._apply,f.saveInstance(!0,null,()=>{f._source=g.ID.substring(g.ID.lastIndexOf("_")+
1);this._zoom(a,r,c,l,null,n)})):(f._source=g.ID.substring(g.ID.lastIndexOf("_")+1),this._zoom(a,r,c,l,null,n))}else this._zoom(a,r,c,l,null,n)})},_zoom:function(a,b,c,d,e,f){a?(isc.WindowStack.popup(f,"New",!0,[b]),b.newInstance(c,null,e)):(a=[f[0],this.grid.body.getRowPageTop(this._eventRowNum),f[2],this.grid.body.getRowSize(this._eventRowNum)],isc.WindowStack.popup(a,"Edit",!0,[b]),b.editInstance(d,null,e))},pick:function(a){this._eventRecord&&(a.setValueMapFromPickList(this._eventRecord),a.setValue(this._eventRecord.bizId),
a.bizPicked(a.form,a,this._eventRecord.bizId));isc.WindowStack.popoff(!1);this._eventRecord&&(a.changedForServer&&a.changedForServer(a.form,a,this._eventRecord.bizId),this._eventRecord=null)}});isc.defineClass("ListView");
isc.ListView.addClassProperties({_heading:isc.HTMLFlow.create(),contents:isc.VLayout.create({width:"100%",height:"100%",overflow:"auto",membersMargin:2,layoutMargin:2,margin:2,rerender:function(){const a=["_grid","_calendar","_tree","_map"];for(const b of a)if(isc.ListView[b]?.isVisible()){isc.ListView[b].refresh?.();break}},resume:function(){const a=["_map"];for(const b of a)if(isc.ListView[b]?.isVisible()){isc.ListView[b].resume?.();break}}}),_grid:null,_calendar:null,_tree:null,_map:null,_portal:isc.PortalLayout.create({width:"100%",
height:"100%",getDropPortlet:function(a,b,c,d){if(a.isA("TreeGrid")&&a.getID().endsWith("Tree")){const f=a.getDragData()[0],g=isc.Portlet.create({title:f.desc,items:[]});var e={grid:isc.BizUtil.createListGrid,cal:isc.BizUtil.createCalendar,tree:isc.BizUtil.createTreeGrid,map:isc.BizUtil.createMap};"edit"===f.ref?isc.BizUtil.getEditView(a.data.root.name,f.name,h=>{g.addItem(h);h.newInstance(null,null,null,null,()=>h.hideMember(h._heading))}):e[f.ref]?(e=e[f.ref](),g.addItem(e),e.setDataSource(`${a.data.root.name}_${f.name}`,
f.config)):alert(`Menu ref of ${f.ref} is unknown`);return g}return this.Super("getDropPortlet",arguments)}}),_setHeading:function(a,b,c,d){a=isc.BizUtil.headerTemplate.replace("{icon}",b?`<img style="width:32px;height:32px" src="resources?_doc=${d}&_n=${b}&v=${SKYVE.Util.v}"/>`:c?`<i style="padding-left:5px;font-size:28px;width:32px !important" class="titleBar bizhubFontIcon ${c}"></i>`:"").replace("{title}",a).replace("{link}","");isc.ListView._heading.setContents(a)},setGridDataSource:function(a,
b){this._grid||(this._grid=isc.BizUtil.createListGrid(),this.contents.addMember(this._grid));this._calendar&&this.contents.hideMember(this._calendar);this._tree&&this.contents.hideMember(this._tree);this._map&&this.contents.hideMember(this._map);this.contents.hideMember(this._portal);this.contents.showMember(this._grid);a=this._getDataSource(a);b=this._grid.setDataSource(a,b);this._setHeading(b,a.icon,a.fontIcon,a.modoc)},setCalendarDataSource:function(a,b){this._calendar||(this._calendar=isc.BizUtil.createCalendar(),
this.contents.addMember(this._calendar));this._grid&&this.contents.hideMember(this._grid);this._tree&&this.contents.hideMember(this._tree);this._map&&this.contents.hideMember(this._map);this.contents.hideMember(this._portal);this.contents.showMember(this._calendar);a=this._getDataSource(a);this._calendar.setDataSource(a);this._setHeading("NOT IMPLEMENTED",a.icon,a.fontIcon,a.modoc)},setTreeDataSource:function(a,b){this._tree||(this._tree=isc.BizUtil.createTreeGrid(),this.contents.addMember(this._tree));
this._grid&&this.contents.hideMember(this._grid);this._calendar&&this.contents.hideMember(this._calendar);this._map&&this.contents.hideMember(this._map);this.contents.hideMember(this._portal);this.contents.showMember(this._tree);a=this._getDataSource(a);b=this._tree.setDataSource(a,b);this._setHeading(b,a.icon,a.fontIcon,a.modoc)},setMapDataSource:function(a,b){this._map||(this._map=isc.BizUtil.createMap(),this.contents.addMember(this._map));this._grid&&this.contents.hideMember(this._grid);this._calendar&&
this.contents.hideMember(this._calendar);this._tree&&this.contents.hideMember(this._tree);this.contents.hideMember(this._portal);this.contents.showMember(this._map);this._map.setDataSource(a);this._setHeading("MAP","shared/icons/Home.png","fa-solid fa-globe fa-2x","")},_initializeView:function(a,b){this[a]||(this[a]=b(),this.contents.addMember(this[a]));this.contents.hasMember(this._heading)||this.contents.addMember(this._heading);this.contents.hasMember(this._portal)||(this.contents.addMember(this._portal),
this.contents.hideMember(this._portal));["_grid","_calendar","_tree","_map","_portal"].forEach(c=>{c!==a&&this.contents.hideMember(this[c])});this.contents.showMember(this[a])},_updateView:function(a,b,c,d=""){a=this._getDataSource(a);b=this[c].setDataSource(a,b)||d;this._setHeading(b,a.icon,a.fontIcon,a.modoc)},_getDataSource:function(a){return"undefined"!==typeof window[a]?window[a]:null}});isc.ListView.contents.addMember(isc.ListView._heading);isc.ListView.contents.addMember(isc.ListView._portal);
isc.ListView.contents.hideMember(isc.ListView._portal);isc.ClassFactory.defineClass("BizContainer","VLayout");isc.BizContainer.addMethods({initWidget:function(){this.backgroundImage="background.png";this.backgroundRepeat="repeat";this.Super("initWidget",arguments);this.contained=[]},addContained:function(a){this.contained.add(a);this.addMember(a)},removeContained:function(a){this.contained.remove(a);this.removeMember(a)}});isc.ClassFactory.defineClass("EditView","BizContainer");
isc.EditView.addClassProperties({_DATA_SOURCE:isc.RestDataSource.create({dataFormat:"json",jsonPrefix:"",jsonSuffix:"",dataURL:"smartedit",sendExtraFields:!1})});
isc.EditView.addMethods({initWidget:function(){this.overflow="hidden";this.margin=this.layoutMargin=this.membersMargin=2;this._grids={};this._refreshedGrids={};this.Super("initWidget",arguments);this._heading=isc.HTMLFlow.create();this.addMember(this._heading);this._actionPanel=isc.ToolStrip.create({name:"actionPanel",layoutMargin:2,membersMargin:5,width:"100%"});this.addMember(this._actionPanel);this._editPanel=isc.BizContainer.create({layoutMargin:2,membersMargin:10,overflow:"auto"});this.addMember(this._editPanel);
this._vm=isc.ValuesManager.create({dataSource:isc.EditView._DATA_SOURCE,handleHiddenValidationErrors:a=>{const b=[];for(const e in a){const f=a[e],g=e.split("__");if(2===g.length){var c=g[0].lastIndexOf("_");if(-1<c){var d=g[0].substring(0,c);if(d=this._grids[d])if(c=parseInt(g[0].substring(c+1)),isc.isA.Number(c))for(const h in d){const k=d[h];k?.grid&&(k.grid.setFieldError(c,g[1],f),k.grid.markForRedraw())}}}b.contains(f)||b.add(f)}if(0<b.length){a="<ul>";for(const e of b)a+=`<li>${e}</li>`;isc.warn(a+
"</ul>",null,{title:"Problems"})}return!1},saveEditorValues:function(a,b,c,d){d.oldValues=null;this.Super("saveEditorValues",arguments)}})},addContained:function(a){this._editPanel.addContained(a)},addEditAction:function(a){a.forCreate=!1;this._actionPanel.addMember(a)},addCreateAction:function(a){a.forCreate=!0;this._actionPanel.addMember(a)},addAction:function(a){a.forCreate=null;this._actionPanel.addMember(a)},toDisplay:function(a,b){if(a){var c=a.match(/\{[A-Za-z0-9._]+\}/g);if(c)for(const d of c)c=
d.substring(1,d.length-1).split(".").reduce((e,f)=>e?.[f],b),"undefined"===typeof c?c="":null==c||"null"===c||"undefined"===c?c="":c.toDateStamp?(c=c.toDateStamp(),c=`${c.substring(0,4)}-${c.substring(4,6)}-${c.substring(6,11)}:${c.substring(11,13)}:${c.substring(13,15)}.000`):c.toString&&(c=c.toString()),a=a.replace(d,c)}return a},rerender:function(){const a=this.gather(!1);a&&this._editInstance("ZoomOut",a.bizId,this._b,a._c,this._openedFromDataGrid)},resume:function(){for(const a in this._grids){const b=
this._grids[a];for(const c in b){const d=b[c];d.webmap&&d.resume()}}},newInstance:function(a,b,c,d,e){this._openedFromDataGrid=d;if(this._vm.members){this.hide();this._b=b;const f={_mod:this._mod,_doc:this._doc,_ecnt:this._ecnt,_ccnt:this._ccnt};this._csrf&&(f._csrf=this._csrf);b&&(f._b=b);c&&(f._c=c);if(a)for(const g in a)f[g]=a[g];this._vm.fetchData(null,(g,h)=>{let k={};0<=g.status?(this._csrf=g.httpHeaders["x-csrf-token"],this._vm.setSaveOperationType("add"),k=h[0],this.scatter(k),d&&(this._b+=
`ElementById(${k.bizId})`),e&&e(h)):-1===g.status&&isc.warn(h,null,{title:"Problems"});this.show();this.refreshListGrids(!0,!0,k);this.opened&&this.opened(h)},{httpMethod:"POST",params:f,willHandleError:!0})}},editInstance:function(a,b,c,d,e){this._saved=!1;this._editInstance(null,a,b,c,d,e)},_editInstance:function(a,b,c,d,e,f){this._openedFromDataGrid=e;if(this._vm.members){this.hide();this._b=c;var g={bizId:b,_mod:this._mod,_doc:this._doc,_ecnt:this._ecnt,_ccnt:this._ccnt};this._csrf&&(g._csrf=
this._csrf);a&&(g._a=a);c&&(g._b=c);d&&(g._c=d);this._source&&(g._s=this._source,this._source=null);this._vm.fetchData(null,(h,k,l)=>{l={};0<=h.status?(this._csrf=h.httpHeaders["x-csrf-token"],l=k[0],e&&this._b&&!this._b.endsWith(")")&&(this._b+=`ElementById(${l.bizId})`),this.scatter(l),f&&f(k)):-1===h.status&&isc.warn(k,null,{title:"Problems"});"ZoomOut"!==a&&b||(h=this._vm.valuesHaveChanged(),this._vm.setValue("_apply",!0),h||this._vm.rememberValues());this.show();this.refreshListGrids(!0,!a,l);
this.opened&&this.opened(k)},{httpMethod:"POST",params:g,willHandleError:!0})}else this._source=null},rerenderAction:function(a,b){this._source=b;this.saveInstance(a,null);this._saved=!0},rerenderBlurryAction:function(a,b){this.delayCall("_rerenderBlurryAction",[a,b],100)},_rerenderBlurryAction:function(a,b){this._source=b;this.saveInstance(a,null,()=>{if(this._blurry){const c=this._blurry;this._blurry=null;c.action?c.delayCall("action"):c.click&&c.click()}});this._saved=!0},saveInstance:function(a,
b,c){const d=this.gather(a);d?(a=d._c,delete d._c,a={_mod:this._mod,_doc:this._doc,_ecnt:this._ecnt,_ccnt:this._ccnt,bean:d,bizId:d.bizId,_c:a},this._csrf&&(a._csrf=this._csrf),b&&(a._a=b,"_PUSH"===b&&(b=null)),this._b&&(a._b=this._b),this._source&&(a._s=this._source,this._source=null),this._vm.disableValidation=!0,this._vm.saveData((e,f)=>{if(0<=e.status){this._csrf=e.httpHeaders["x-csrf-token"];if("ZoomOut"===b){e=isc.WindowStack.getOpener();const h=e.gather(!1);h._c=f._c;var g=this._b;g.lastIndexOf(".");
if(g.endsWith(")")){const k=g.lastIndexOf("ElementById");if(0<=k){g=g.substring(0,k);if(isc.isAn.Array(h[g])){isc.WindowStack.popoff(!0);e._source=null;return}h[g]=f.bizId;(g=e._vm.getItem(g))&&(d.bizId?g.bizEdited(g.form,g,f.bizId):g.bizAdded(g.form,g,f.bizId))}}e._vm.setValues(h);delete f._c;delete f._title}if("Save"===b)this._saved=!0,this.scatter(f),this.refreshListGrids(!0,!1,f);else if(b){if(e=isc.WindowStack.getOpener())isc.WindowStack.popoff(!0),e._source=null}else this.scatter(f),this.refreshListGrids(!0,
!1,f);c&&c(f)}else-1===e.status&&isc.warn(f,null,{title:"Problems"})},{params:a,willHandleError:!0}),this._vm.disableValidation=!1):this._source=null},deleteInstance:function(a,b){if(a=this.gather(a)){var c=a._c;delete a._c;c={_mod:this._mod,_doc:this._doc,_c:c};this._csrf&&(c._csrf=this._csrf);isc.EditView._DATA_SOURCE.removeData(a,(d,e)=>{0<=d.status?(this._csrf=d.httpHeaders["x-csrf-token"],isc.WindowStack.popoff(!0),b&&b(e)):-1===d.status&&isc.warn(e,null,{title:"Problems"})},{params:c,willHandleError:!0})}},
doAction:function(a,b,c,d,e,f,g){if(b=this.gather(b)){var {_c:h,...k}=b;a={_mod:d||this._mod,_doc:e||this._doc,_ecnt:this._ecnt,_ccnt:this._ccnt,bean:k,bizId:f||b.bizId,_c:h,...(this._csrf&&{_csrf:this._csrf}),...(a&&{_a:a}),...(this._b&&{_b:this._b}),...(c&&{_g:c})};this._vm.disableValidation=!0;this._vm.saveData((l,n)=>{0<=l.status?(this._csrf=l.httpHeaders["x-csrf-token"],this._saved=!0,this.scatter(n),this.refreshListGrids(!0,!1,n),g&&g(n),n._redirectUrl&&window.location.assign(n._redirectUrl)):
-1===l.status&&isc.warn(n,null,{title:"Problems"});return!0},{params:a,willHandleError:!0});this._vm.disableValidation=!1}},doBlurryAction:function(a,b){this.delayCall("_doBlurryAction",[a,b],100)},_doBlurryAction:function(a,b){this.doAction(a,b,null,null,null,null,()=>{if(this._blurry){const c=this._blurry;this._blurry=null;c.action?c.delayCall("action"):c.click&&c.click()}})},scatter:function(a){this._vm.clearErrors(!0);this._vm.clearValues();var b="";a.persisted&&(b=`<a target="_top" href="?a=e&m=${this._mod}&d=${this._doc}&i=${a.bizId}" title="Link" class="dhtmlPageButton"><i class="fa-solid fa-2x fa-thumbtack"></i></a>`);
let c=isc.BizUtil.headerTemplate,d="",e="";a.created?(d=this._createIconMarkup(this._editIcon,this._editFontIcon),e=this._createHelpMarkup(this._editHelpFile,this._editHelpURL)):(d=this._createIconMarkup(this._createIcon,this._createFontIcon),e=this._createHelpMarkup(this._createHelpFile,this._createHelpURL));c=c.replace("{icon}",d).replace("{title}",a._title).replace("{link}",b).replace("{help}",e);this._heading.setContents(c);const {_title:f,_valueMaps:g,_growls:h,_messages:k,...l}=a;b=[];this._processWidgets(this._editPanel,
!1,l,g,b);this._vm.setValues(l);b.forEach(n=>n.rerender());Object.entries(this._grids).forEach(([n,r])=>{const u=l[n];Object.entries(r).forEach(([,v])=>{Array.isArray(u)&&(v._comparisonTree&&v._comparisonForm?v.setData(u):v._candidateList&&v._memberList?this._handleListMembership(u,g,n,v):v.grid&&this._handleDataGrid(u,g,n,v))})});b=isc.BizUtil.getCurrentView()===this;this._manageActionPanel(a,b);this._displayGrowlsAndMessages(h,k)},_createIconMarkup:function(a,b){return a?`<img style="width:32px;height:32px" src="resources?_doc=${this._mod}.${this._doc}&_n=${a}&v=${SKYVE.Util.v}"/>`:
b?`<i style="padding-left:5px;font-size:28px;width:32px !important" class="titleBar bizhubFontIcon ${b}"></i>`:""},_createHelpMarkup:function(a,b){return a?`'resources?_doc=${this._mod}.${this._doc}&_n=${a}&v=${SKYVE.Util.v}'`:b?`'${b}'`:""},_handleListMembership:function(a,b,c,d){const e=[];(b=b&&b[c])&&Object.entries(b).forEach(([f,g])=>{const h=a.find("bizId",f);h?h.bizKey=g:e.push({bizId:f,bizKey:g})});d.setData(e,a)},_handleDataGrid:function(a,b,c,d){d.grid.fields.forEach(e=>{const {type:f,name:g}=
e;var h=f.includes("YYYY");const k=f.includes("HH");h||k?this._processDateTimeFields(a,g,h,k):e.valueMap&&b&&(h=b[`${c}_${e.name}`])&&(e.valueMap=h)});d.selectedIdBinding?this._handleGridSelection(a,d):d.grid.setData(a)},_processDateTimeFields:function(a,b,c,d){a.forEach(e=>{const f=e[b];f&&(c?e[b]=isc.DateUtil.parseSchemaDate(f):d&&(e[b]=isc.Time.parseInput(f)))})},_handleGridSelection:function(a,b){const c=b.grid.selectionUpdated;try{b.grid.selectionUpdated=null;b.grid.setData(a);const d=a.findIndex("bizId",
values[b.selectedIdBinding]);0<=d?b.grid.selectSingleRecord(d):b.grid.deselectAllRecords()}finally{b.grid.selectionUpdated=c}},_manageActionPanel:function(a,b){const c=this._actionPanel.getMembers();0===c.length&&this._actionPanel.hide();c.forEach(d=>{a.created&&null!=d.forCreate&&d.forCreate||a.notCreated&&null!=d.forCreate&&!d.forCreate?this._showHide(d,this._actionPanel,a,!0):(this._enableDisable(d,this._actionPanel,a),d.actionName&&this._handleToolVisibility(d,a,b))})},_handleToolVisibility:function(a,
b,c){this._b?this._showHide(a,this._actionPanel,b,["OK","Save","Cancel","Delete"].includes(a.type)||"Remove"===a.type&&(void 0===this._openedFromDataGrid||!this._openedFromDataGrid||!a._canDelete&&b.persisted)):this._showHide(a,this._actionPanel,b,["ZoomOut","Remove"].includes(a.type)||!b.persisted&&"Delete"===a.type||c&&["Delete","OK","Cancel"].includes(a.type))},_displayGrowlsAndMessages:function(a,b){a&&isc.BizUtil.growl(a);b&&(a=1<b.length?`<ul>${b.map(c=>`<li>${c.summary}</li>`).join("")}</ul>`:
b[0].summary,b.some(c=>"info"!==c.severity)?isc.warn(a):isc.say(a))},refreshListGrids:function(a,b,c){a&&(this._refreshedGrids={});for(const d in this._grids){a=this._grids[d];for(const e in a){const f=a[e];if(!this._refreshedGrids[e]&&f.isVisible()&&(b||void 0===f.postRefreshConditionName||this._evaluateConditionName(f.postRefreshConditionName,c))){if(f.webmap)f.rerender();else if(f.rootIdBinding)if(f.hasDataSource()){const g=f.grid.getDataSource().getField("bizParentId").rootValue,h=`_${f._view._vm.getValue(f.rootIdBinding)}`;
g!==h?f.setDataSource(f.dataSource):f.autoPopulate&&f.refresh()}else f.setDataSource(f.dataSource);else f.dataSource&&(f.hasDataSource()?f.autoPopulate&&f.refresh():f.setDataSource(f.dataSource));this._refreshedGrids[e]=!0}}}},gather:function(a){return a&&!this._vm.validate()?null:this._gather()},_gather:function(){const a=this._vm.getValues();for(const c in this._grids){var b=a[c];if(Array.isArray(b)&&0<b.length)if(b[0].properties){b=this._grids[c];for(const d in b)a[c]=b[d].getData()}else{const d=
this._grids[c];for(const e in d){const f=d[e],g=f.grid;g&&(g.reorderData(),b=b.sortByProperty(f._ordinal,!0));if(f._candidateList&&f._memberList||1===g?.fields?.length&&"bizId"===g.fields[0].name&&"enum"===g.fields[0].type)f._ordinal&&(f._memberList.reorderData(),b=b.sortByProperty(f._ordinal,!0)),a[c]=b.map(h=>h.bizId)}}}return a},_evaluateConditionName:function(a,b){if(!a)return!1;switch(a){case "true":return!0;case "false":return!1;default:return!!b[a]}},_processWidgets:function(a,b,c,d,e){for(const g of a.contained){this._enableDisable(g,
a,c);const h=b||this._showHide(g,a,c,!1);isc.isA.Function(g.addContained)&&this._processWidgets(g,h,c,d,e);if(isc.isA.Function(g.addBizTab)){let k=g.getSelectedTabNumber();for(const l of g.bizTabs){var f=h||this._showHide(l,g,c,!1);this._enableDisable(l,g,c);this._processWidgets(l.pane,f,c,d,e)}f=c[g.selectedTabIndexBinding];void 0!==f&&null!=f&&(k=f);null!=k&&g.selectTab(k)}if(isc.isA.Function(g.getItems)){h?this._vm.members?.contains(g)&&this._vm.removeMember(g):this._vm.members&&this._vm.members.contains(g)||
this._vm.addMember(g);for(const k of g.items)this._enableDisable(k,g,c),this._showHide(k,g,c,!1)||("bizLookupDescription"===k.type?k.setValueMapFromEditView(c):["select","enum","comboBox"].includes(k.type)&&this._updateValueMap(k,c,d))}isc.isA.Function(g.rerender)&&e.add(g)}},_updateValueMap:function(a,b,c){let d={};a.optionDataSource?(a.optionDataSource===isc.BizUtil.COMPLETE_DATA_SOURCE?d[b[a.name]]=b[a.name]:(a.fetchData(),d[b[a.name]]=b[`${a.name}_${a.displayField}`]),a.setValueMap(d)):c&&c[a.name]&&
(d=c[a.name],a.setValueMap(d))},_enableDisable:function(a,b,c){const d=(e,f)=>{a[f]&&(a[e]=!this._evaluateConditionName(a[f],c))};d("canPick","disablePickConditionName");d("canAdd","disableAddConditionName");d("canZoom","disableZoomConditionName");d("canEdit","disableEditConditionName");d("canRemove","disableRemoveConditionName");d("canClear","disableClearConditionName");this._setDisabled(a,b,a.disabledConditionName,c)},_setDisabled:function(a,b,c,d){c=this._evaluateConditionName(c,d);a.bizRequired&&
a.setRequired&&a.isVisible&&a.isVisible()&&a.setRequired(!c);a.setDisabled?a.setDisabled(c):a.enable&&a.disable?c?a.disable():a.enable():b&&b.enableTab&&b.disableTab&&a.pane&&(a=b.tabForPane(a.pane),0<=b.getTabNumber(a)&&(c?b.disableTab(a):b.enableTab(a)))},setDisabled:function(a,b){if(a=this._vm.getItem(a)){var c=this.gather(!1);this._updateDisabledState(a,null,b,c)}},toggleDisabled:function(a){if(a=this._vm.getItem(a)){var b=a.isDisabled()?"false":"true";this._setDisabled(a,null,b,null)}},toggleVisibility:function(a){if(a=
this._vm.getItem(a)){var b=a.isVisible()?"true":"false";this._setInvisible(a,null,b,null)}},_showHide:function(a,b,c,d){return this._setInvisible(a,b,a.invisibleConditionName,c,d)},_setInvisible:function(a,b,c,d,e=!1){e||=this._evaluateConditionName(c,d);a.bizRequired&&a.setRequired&&(e?a.setRequired(!1):a.isDisabled&&!a.isDisabled()&&a.setRequired(!0));a.show&&a.hide?e?a.hide():a.show():b&&(e?b.hideMember(a):b.showMember(a));return e},setInvisible:function(a,b){if(a=this._vm.getItem(a)){var c=this.gather(!1);
this._setInvisible(a,null,b,c)}}});isc.ClassFactory.defineClass("BizButton","IButton");
isc.BizButton.addMethods({initWidget:function(){this.autoFit=!(arguments[0].width||arguments[0].height);this.hasDisabledIcon=!1;this.title=this.displayName||null;this.tooltip&&(this.canHover=!0,this.getHoverHTML=function(){return this.tooltip});this.icon&&(this.showDisabledIcon=this.hasDisabledIcon);this.action=function(){this._view&&this._view._blurry?this._view._blurry=this:this.confirm?isc.ask(this.confirm,a=>{a&&this._action()},{title:"Confirm"}):this._action()};this._action=function(){var a=
void 0===this.validate?!0:this.validate;let b,c;let d;switch(this.type){case "OK":this._view.saveInstance(a,this.actionName);break;case "Save":this._view.saveInstance(a,this.actionName,()=>{isc.BizUtil.growl([{severity:"info",summary:"Saved",detail:"Changes Saved"}],3E3)});break;case "Add":break;case "ZoomOut":b=this._view.gather(!1);const {_apply:g,_changed:h}=b;g||h||this._view._vm.valuesHaveChanged()?this._view.saveInstance(a,this.actionName):(c=isc.WindowStack.getOpener(),isc.WindowStack.popoff(this._view._saved),
c._source=null);break;case "Cancel":b=this._view.gather(!1);var {_changed:e}=b;c=isc.WindowStack.getOpener();e||this._view._vm.valuesHaveChanged()?isc.ask(`There are unsaved changes in the ${this._view._singular}. Do you wish to cancel?`,k=>{k&&(isc.WindowStack.popoff(this._view._saved),c._source=null)},{title:"Discard Unsaved Changes?"}):(isc.WindowStack.popoff(this._view._saved),c._source=null);break;case "Delete":this._view.deleteInstance(a);break;case "Remove":b=this._view.gather(!1);a=b.bizId;
var f=this._view._b.substring(this._view._b.lastIndexOf(".")+1,this._view._b.lastIndexOf("ElementById"));if(c=isc.WindowStack.getOpener()){if(f=c._grids[f])for(e in f){const k=f[e];k.remove(a);k.bizRemoved&&k.bizRemoved()}c._vm.setValue("_apply",!0)}isc.WindowStack.popoff(!1);break;case "Report":isc.ReportDialog.popupReport(this._view,this.params);break;case "BizExport":(b=this._view.gather(!1))&&this._view.saveInstance(a,null,()=>{window.location.assign(`bizexport.xls?_n=${this.actionName}&_doc=${this._view._mod}.${this._view._doc}&_c=${b._c}&_ctim=${(new Date).getTime()}`)});
break;case "BizImport":if(b=this._view.gather(!1))d=`bizImport.xhtml?_a=${this.actionName}&_c=${b._c}`,this._view._b&&(d+=`&_b=${this._view._b.replaceAll("_",".")}`),this._view.saveInstance(a,null,()=>{isc.WindowStack.popup(null,"BizPort Import",!0,[isc.HTMLPane.create({contentsType:"page",contents:"Loading Page...",contentsURL:d})])});break;case "Download":this._view.doAction(this.actionName,a);break;case "Upload":if(b=this._view.gather(!1))d=`fileUpload.xhtml?_a=${this.actionName}&_c=${b._c}`,this._view._b&&
(d+=`&_b=${this._view._b.replaceAll("_",".")}`),this._view.saveInstance(a,null,()=>{isc.WindowStack.popup(null,"Upload",!0,[isc.HTMLPane.create({contentsType:"page",contents:"Loading Page...",contentsURL:d})])});break;case "Navigate":break;case "Print":isc.ReportDialog.popupReport(this._view,{_mod:this._view._mod,_doc:this._view._doc});break;default:this._view.doAction(this.actionName,a)}};this.Super("initWidget",arguments)}});isc.ClassFactory.defineClass("BizZoomIn","IButton");
isc.BizZoomIn.addMethods({initWidget:function(){this.autoFit=!(arguments[0].width||arguments[0].height);this.hasDisabledIcon=!1;this.title=this.displayName||null;this.tooltip&&(this.canHover=!0,this.getHoverHTML=function(){return this.tooltip});this.icon&&(this.showDisabledIcon=this.hasDisabledIcon);this.action=()=>{const a=this._view.gather(!0);if(a){const b=a[this.binding];b?isc.BizUtil.getEditView(a[this.binding+"_bizModule"],a[this.binding+"_bizDocument"],c=>{const d=this._view._b?`${this._view._b}.${this.binding}`:
this.binding,e=this.getPageRect();a._apply||this._view._vm.valuesHaveChanged()?(delete a._apply,this._view.saveInstance(!0,null,()=>{isc.WindowStack.popup(e,"Edit",!1,[c]);c.editInstance(b,d,a._c,!1)})):(isc.WindowStack.popup(e,"Edit",!1,[c]),c.editInstance(b,d,a._c,!1))}):isc.warn("You cannot zoom in to an empty reference")}else isc.warn("You cannot zoom in until you fix the problems found")};this.Super("initWidget",arguments)}});isc.ClassFactory.defineClass("BizVBox","VLayout");
isc.BizVBox.addMethods({initWidget:function(){this.contained=[];this.Super("initWidget",arguments)},addContained:function(a){this.contained.add(a);this.addMember(a)}});isc.ClassFactory.defineClass("BizHBox","HLayout");isc.BizHBox.addMethods({initWidget:function(){this.contained=[];this.Super("initWidget",arguments)},addContained:function(a){this.contained.add(a);this.addMember(a)}});isc.ClassFactory.defineClass("BizCollapsible","VLayout");
isc.BizCollapsible.addMethods({initWidget:function(a){this.contained=[];this.minimized=a.minimized;this.Super("initWidget",{width:"100%",height:"100%"});const b=this;this.guts=isc.Window.create({title:a.title,autoDraw:!0,autoSize:!0,height:"100%",canDragReposition:!1,canDragResize:!1,showCloseButton:!1,animateMinimize:!1,headerLabelProperties:{width:"100%",click:()=>{this.guts.minimized?this.guts.restore():this.guts.minimize()}},restore:function(){b._view.isVisible()&&b._view.delayCall("refreshListGrids",
[!1,!1,b._view.gather(!1)]);b.setProperty("maxHeight",1E4);this.Super("restore",arguments)},minimize:function(){b.setHeight(30);b.setProperty("maxHeight",30);this.Super("minimize",arguments)}});this.addMember(this.guts);this._resizeTimer=null},draw:function(){this.guts&&this.guts.setWidth(this.getWidth());return this.Super("draw",arguments)},resized:function(){this.guts&&(this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(()=>{this._resize()},100));this.Super("resized",
arguments)},_resize:function(){this._resizeTimer=null;this.guts.setWidth(this.getWidth())},addContained:function(a){this.contained.add(a);this.guts.addItem(a);this.minimized&&this.guts.minimize()}});isc.ClassFactory.defineClass("BizTabPane","TabSet");
isc.BizTabPane.addMethods({initWidget:function(){this.tabs=[];this.bizTabs=[];this.destroyPanes=!1;this.tabBarThickness=this.tabBarThickness||30;this.Super("initWidget",arguments)},tabSelected:function(a,b,c,d){this._view.isVisible()&&this._view.delayCall("refreshListGrids",[!1,!1,this._view.gather(!1)])},addBizTab:function(a){this.bizTabs.add(a);this.addTab({name:a.name,title:a.title,icon:a.icon,prompt:a.prompt,pane:a.pane,disabledConditionName:a.disabledConditionName,invisibleConditionName:a.invisibleConditionName,
selectedConditionName:a.selectedConditionName})},showMember:function(a){let b=this.getTabNumber(a.name);if(0>b){let c=0,d=parseInt(a.name,10)-1;for(;0<=d;){b=this.getTabNumber(String(d));if(0<=b){c=b+1;break}d--}this.addTab({name:a.name,title:a.title,pane:a.pane,disabledConditionName:a.disabledConditionName,invisibleConditionName:a.invisibleConditionName,selectedConditionName:a.selectedConditionName},c)}},hideMember:function(a){0<=this.getTabNumber(a.name)&&this.removeTab(a.name)}});
isc.ClassFactory.defineClass("BizListMembership","HLayout");
isc.BizListMembership.addMethods({initWidget:function(a){this.membersMargin=10;const b=this;this._candidateList=isc.ListGrid.create({width:"100%",height:"100%",minHeight:100,canDragRecordsOut:!0,canAcceptDroppedRecords:!0,dragDataAction:"move",recordDrop:function(d,e,f,g){this.Super("recordDrop",arguments);b._view._vm.setValue("_changed",!0);b._view._vm.setValue("_apply",!0);b.changed()},alternateRecordStyles:!0,autoFetchData:!1,leaveScrollbarGap:!1,showHeaderContextMenu:!1,fields:[{name:"bizKey",
title:this.candidatesHeading?this.candidatesHeading:"Candidates"}]});this._memberList=isc.ListGrid.create({width:"100%",height:"100%",minHeight:100,canDragRecordsOut:!0,canAcceptDroppedRecords:!0,dragDataAction:"move",canReorderRecords:a._ordinal?!0:!1,recordDrop:function(d,e,f,g){this.Super("recordDrop",arguments);g===this&&this.reorderData();b._view._vm.setValue("_changed",!0);b._view._vm.setValue("_apply",!0);b.changed()},reorderData:function(){if(a._ordinal){const d=this.getData();for(let e=0,
f=d.length;e<f;e++)d[e][a._ordinal]=e+1}},alternateRecordStyles:!0,autoFetchData:!1,leaveScrollbarGap:!1,showHeaderContextMenu:!1,fields:[{name:"bizKey",title:this.membersHeading?this.membersHeading:"Members"}]});this.members=[this._candidateList,isc.VLayout.create({layoutAlign:"center",membersMargin:10,height:75,members:[isc.IButton.create({title:null,icon:"icons/memberAssign.png",iconWidth:24,iconHeight:24,iconAlign:"center",width:36,height:36,click:()=>{this._memberList.transferSelectedData(this._candidateList);
this._view._vm.setValue("_changed",!0);this._view._vm.setValue("_apply",!0);this.changed()},canHover:!0,getHoverHTML:function(){return"Add the selected candidates."}}),isc.IButton.create({title:null,icon:"icons/memberUnassign.png",iconWidth:24,iconHeight:24,iconAlign:"center",width:36,height:36,click:()=>{this._candidateList.transferSelectedData(this._memberList);this._view._vm.setValue("_changed",!0);this._view._vm.setValue("_apply",!0);this.changed()},canHover:!0,getHoverHTML:function(){return"Remove the selected members."}})]}),
this._memberList];this.Super("initWidget",arguments);let c=this._view._grids[this._b];c||(c={},this._view._grids[this._b]=c);c[this.getID()]=this},setData:function(a,b){this._candidateList.setData(a);this._memberList.setData(b)},changed:function(){}});isc.ClassFactory.defineClass("BizComparison","HLayout");
isc.BizComparison.addMethods({initWidget:function(){this.canDragResize=!0;this.resizeFrom=["L","R"];this._comparisonTree=isc.TreeGrid.create({width:"50%",height:"100%",fields:[{name:"bizKey",title:"Document"},{name:"relationship",title:"Relationship"}],data:isc.Tree.create({modelType:"parent",idField:"bizId",parentIdField:"parent",data:[]}),selectionUpdated:(b,c)=>{b&&this.setFormFields(b.properties)},showOpenIcons:!1,showDropIcons:!1,showResizeBar:!0});this._comparisonForm=isc.PropertySheet.create({width:"100%",
height:"100%",numCols:this.editable?5:4,colWidths:this.editable?[150,"*",50,"*",30]:[150,"*","*",30],border:"1px solid #A7ABB4",titleHoverHTML:function(b){if("boolean"!==b.type&&this.diff_match_patch){let d=b;var c=b;b.name.startsWith("_old_")?d=this.getItem(b.name.substring(5)):c=this.getItem("_old_"+b.name);b=d.getDisplayValue();c=c.getDisplayValue();b?.startsWith("<")&&(b="");c?.startsWith("<")&&(c="");c=this.diff_match_patch.diff_main(c,b,!1);this.diff_match_patch.diff_cleanupEfficiency(c);return this.diff_match_patch.diff_prettyHtml(c)}return null},
fields:[]});SKYVE.Util.loadJS("skyve/desktop/diff_match_patch.js?v="+SKYVE.Util.v,()=>{this._comparisonForm.diff_match_patch=new diff_match_patch;this._comparisonForm.diff_match_patch.Diff_EditCost=4});this.members=[this._comparisonTree,isc.VLayout.create({overflow:"auto",members:[this._comparisonForm]})];this.Super("initWidget",arguments);let a=this._view._grids[this._b];a||(a={},this._view._grids[this._b]=a);a[this.getID()]=this},setData:function(a){this._comparisonTree.setData(isc.Tree.create({modelType:"parent",
idField:"bizId",parentIdField:"parent",data:a}));this.setFormFields([])},setFormFields:function(a){const b=[{type:"blurb",align:"center",colSpan:1,defaultValue:"Property",startRow:!1,endRow:!1,cellStyle:"propSheetTitle"},{type:"blurb",align:"center",colSpan:1,defaultValue:"New",startRow:!1,endRow:!1,cellStyle:"propSheetTitle"}];this.editable&&b.push({title:"<<-",type:"button",click(){for(let c=5;c<form.getFields().length-4;c+=4){const d=form.getField(c+2).getValue();form.getField(c).setValue(d?d:
"")}},startRow:!1,endRow:!1,align:"center",cellStyle:"propSheetValue"});b.push({type:"blurb",align:"center",colSpan:1,defaultValue:"Old",startRow:!1,endRow:!1,cellStyle:"propSheetTitle"},{type:"blurb",align:"center",colSpan:1,defaultValue:"Diff",startRow:!1,endRow:!1,cellStyle:"propSheetTitle"});a.forEach(c=>{const {name:d,title:e,type:f,editorType:g,length:h,valueMap:k,required:l,allowEmptyValue:n}=c,r={name:d,title:e,showTitle:!0,type:f,width:"*",startRow:!0,endRow:!1,canEdit:this.editable,defaultValue:c.newValue};
c={name:"_old_"+d,showTitle:!1,type:f,width:"*",startRow:!1,endRow:!1,canEdit:!1,defaultValue:c.oldValue};if("richText"===f||"richText"===g)r.controlGroups=[],r.colSpan=1,c.controlGroups=[],c.colSpan=1;g&&(r.editorType=g,c.editorType=g);h&&(r.length=h,c.length=h);k&&(r.valueMap=k,c.valueMap=k);l&&(r.required=l);n&&(r.allowEmptyValue=n);b.push(r);this.editable&&b.push({title:"<-",type:"button",click(){const u=form.getField("_old_"+d).getValue();form.getField(d).setValue(u?u:"")},align:"center",startRow:!1,
endRow:!1,cellStyle:"propSheetValue"});b.push(c);b.push({title:"...",type:"button",click:function(){isc.say(this.form.titleHoverHTML(this.form.getField(d)),null,{title:"Diff"})},align:"center",startRow:!1,endRow:!1,cellStyle:"propSheetValue"})});this.editable&&b.push({type:"spacer",colSpan:5},{title:"Apply Changes",type:"button",colSpan:4,startRow:!1,endRow:!0,align:"right",click:function(c,d){const e=c.getValues();this._comparisonTree.getSelectedRecord().properties.forEach(f=>{f.newValue=e[f.name]});
isc.showPrompt('<span style="font-size:medium">Changes Applied</span>');setTimeout(()=>{isc.clearPrompt()},500)}},{type:"spacer",colSpan:5});this._comparisonForm.setFields(b);this._comparisonForm.clearValues()},getData:function(){const a=this._getData(this._comparisonTree.getData().getRoot().children[0]);delete a._b;delete a._t;return a},_getData:function(a){const b={bizId:a.bizId,_b:a._b,_t:a._t};a.properties.forEach(c=>{b[c.name]=c.newValue});(a=a.children)&&a.forEach(c=>{c=this._getData(c);const d=
c._b;delete c._b;delete c._t;const e=b[d];e?(Array.isArray(e)||(b[d]=[e]),b[d].push(c)):b[d]=[c]});return b}});isc.ClassFactory.defineClass("BizDynamicImage","VLayout");
isc.BizDynamicImage.addMethods({initWidget(){this.overflow="hidden";this.hZoom=this.wZoom=100;this.members=[];this.mouseWheelTimer=null;this.contextMenu=isc.Menu.create({showShadow:!0,shadowDepth:10,data:this._createContextMenuData()});this.Super("initWidget",arguments)},_createContextMenuData:function(){return[{title:"Size",icon:"icons/mag.png",submenu:[50,75,100,125,150,175,200,300,400,500].map(a=>({title:`${a}%`,click:()=>this._zoom(a)}))},{title:"Enlarge",icon:"icons/magIn.png",click:()=>this._zoom(this.wZoom+
10)},{title:"Reduce",icon:"icons/magOut.png",click:()=>this._zoom(this.wZoom-10)},{isSeparator:!0},{title:"Open",icon:"zoom.gif",click:()=>this._open()},{isSeparator:!0},{title:"Refresh",icon:"refresh.png",click:()=>this.rerender()}]},_zoom:function(a,b=!1){0<a&&(this.hZoom=this.wZoom=a,b?(this.mouseWheelTimer&&clearTimeout(this.mouseWheelTimer),this.mouseWheelTimer=setTimeout(()=>{this.rerender()},250)):this.rerender())},_open:function(){const a=isc.BizDynamicImage.create({name:this.name,moduleDotDocument:this.moduleDotDocument,
format:this.format,_view:this._view});isc.WindowStack.popup(null,"Image",!0,[a]);a.rerender()},resized:function(){this.rerender()},rerender:function(){var a=this._view._vm.getValue("_c");if(a){this.mouseWheelTimer=null;this._clearExistingImage();var b=this._view._b,{width:c,height:d}=this._calculateImageDimensions();a=this._generateImageSrc(c,d,a,b);this._img=this._createImageElement(c,d,a);this.members&&this.addMember(this._img)}},_clearExistingImage:function(){this.members&&1===this.members.length&&
(this.removeMember(0),this._img&&this._img.destroy())},_calculateImageDimensions:function(){const a=this.imageWidth?this.imageWidth:this.getVisibleWidth()-20,b=this.imageHeight?this.imageHeight:this.getVisibleHeight()-20;return{width:a,height:b}},_generateImageSrc:function(a,b,c,d){let e=`dynamic.${this.format}?_doc=${this.moduleDotDocument}&_n=${this.name}`;this.imageWidth&&(e+=`&_w=${this.imageWidth}`);this.imageHeight&&(e+=`&_h=${this.imageHeight}`);e+=`&_w=${a}&_h=${b}&_wz=${this.wZoom}&_hz=${this.hZoom}`;
c&&(e+=`&_c=${c}`);d&&(e+=`&_b=${d.replaceAll("_",".")}`);return e+=`&_ts=${(new Date).getTime()}`},_createImageElement:function(a,b,c){return isc.Img.create({width:"100%",height:"100%",overflow:"hidden",imageWidth:Math.round(a*this.wZoom/100),imageHeight:Math.round(b*this.hZoom/100),imageType:"center",canDrag:!0,cursor:"all-scroll",dragAppearance:"none",dragStart:function(){this.startScrollLeft=this.getScrollLeft();this.startScrollTop=this.getScrollTop()},dragMove:function(){this.scrollTo(this.startScrollLeft-
isc.Event.lastEvent.x+isc.Event.mouseDownEvent.x,this.startScrollTop-isc.Event.lastEvent.y+isc.Event.mouseDownEvent.y)},mouseWheel:()=>{const d=isc.EventHandler.getWheelDelta();this._zoom(Math.round(this.wZoom-10*d),!0);return!1},doubleClick:()=>this._open(),appImgDir:"../",src:c})}});isc.ClassFactory.defineClass("BizImage","Img");isc.BizImage.addMethods({initWidget:function(){this.imageType="stretch";this.src=`resources?_n=${this.file}&_doc=${this.modoc}&_b=null`;this.Super("initWidget",arguments)}});
isc.ClassFactory.defineClass("BizLabel","Label");isc.BizLabel.addMethods({initWidget:function(){this.autoFit=!(arguments[0].width||arguments[0].height);this.value&&this.setContents(this.value);this.textAlign&&this.setAlign(this.textAlign);this.Super("initWidget",arguments)}});isc.ClassFactory.defineClass("BizChart","Canvas");
isc.BizChart.addClassMethods({loadingChartJS:!1,loadChartJS:function(){isc.BizChart.loadingChartJS?setTimeout(()=>isc.BizChart.loadChartJS(),100):window.Chart||(isc.BizChart.loadingChartJS=!0,SKYVE.Util.loadJS(`jakarta.faces.resource/moment/moment.js.xhtml?ln=primefaces&v=${SKYVE.Util.v}`,()=>{SKYVE.Util.loadJS(`jakarta.faces.resource/chartjs/chartjs.js.xhtml?ln=primefaces&v=${SKYVE.Util.v}`,()=>{isc.BizChart.loadingChartJS=!1})}))},v:0});
isc.BizChart.addMethods({init:function(a){window.Chart||isc.BizChart.loadChartJS();a.width||(this.width="100%");a.height||(this.height="100%");this.ID=`bizChart${isc.BizChart.v++}`;this._resizeChartCalled=this._refreshing=this.redrawOnResize=!1;this.Super("init",arguments)},getInnerHTML:function(){return`<canvas id="${this.ID}_chart" />`},resized:function(){this._resizeChartCalled||this.delayCall("_resizeChart",arguments,100);this._resizeChartCalled=!0},_resizeChart:function(){if(this.chart){const a=
this.getWidth(),b=this.getHeight(),c=this.chart.canvas;c.parentNode.style.width=`${a}px`;c.parentNode.style.height=`${b}px`;c.width=a;c.height=b;c.style.width=`${a}px`;c.style.height=`${b}px`;this.chart.update();this._resizeChartCalled=!1}else this.delayCall("_resizeChart",arguments,100)},setDataSource:function(a){if(window.Chart&&this.isDrawn()){this._modelName=a;const b=this._view._grids[a]||{};this._view._grids[a]=b;b[this.getID()]=this;this._refresh()}else this.delayCall("setDataSource",arguments,
100)},rerender:function(){this._refresh()},_refresh:function(){if(!this._refreshing&&this.isDrawn()&&this.isVisible()){var a=`${SKYVE.Util.CONTEXT_URL}chart?`;if(this._modelName){var b=this._view.gather(!1);a=`${a}_c=${b._c}&t=${this.chartType}&_m=${this._modelName}`;this._refreshing=!0;isc.RPCManager.sendRequest({showPrompt:!0,evalResult:!0,actionURL:a,httpMethod:"GET",callback:(c,d)=>{try{this._update(d)}finally{this._refreshing=!1}}})}}},_update:function(a){a.config&&(this.chartConfig=this.chartConfig||
{},this.chartConfig.type=a.config.type,this.chartConfig.data=a.config.data,this.chartConfig.options=a.config.options||{},this.chartConfig.options.responsive=!0,this.chartConfig.options.maintainAspectRatio=!1,this.chart?this.chart.update():(this.isDrawn()||this.draw(),a=document.getElementById(`${this.ID}_chart`),this.chart=new Chart(a,this.chartConfig)))}});isc.ClassFactory.defineClass("BizProgressBar","ProgressBar");isc.BizUtil.addClassProperties({headerTemplate:null,init:function(a,b,c,d){isc.BizUtil.headerTemplate=a;this.createBodyLayout(b);this.createMenuSections(c);this.createDataSources(d);this.addListViewToDetails();this.createTextSearchComponents()},createBodyLayout:function(a){isc.HLayout.create({ID:"body",autoDraw:!0,width:"100%",height:"100%",backgroundColor:"whitesmoke",padding:10,members:[this.createLeftMenuPanel(a),this.createRightDetailsPanel()]})},createLeftMenuPanel:function(a){return isc.VLayout.create({ID:"lhsmenu",
width:"30%",showResizeBar:!0,backgroundColor:"white",border:"1px solid #c0c0c0",showShadow:!0,shadowSoftness:10,shadowOffset:0,members:[isc.Img.create({imageType:"center",src:a,overflow:"clip-h",styleName:"logo",showDisabled:!1,showDown:!1,showFocus:!1,showFocused:!1,showFocusedAsOver:!1,showRollOver:!1}),isc.SectionStack.create({ID:"adminStack",width:"100%",visibilityMode:"mutex",animateSections:!1,overflow:"hidden",headerHeight:30})]})},createRightDetailsPanel:function(){return isc.VLayout.create({ID:"details",
width:"100%",height:"100%",backgroundColor:"whitesmoke",border:"1px solid #c0c0c0",showShadow:!0,shadowSoftness:10,shadowOffset:0})},createMenuSections:function(a){const b=isc.Canvas.getById("adminStack");a.forEach(c=>{const d=this.createMenuTreeGrid(c);b.addSection({title:c.title,expanded:c.open,items:[d]});d.getData().openAll()})},createMenuTreeGrid:function(a){return isc.TreeGrid.create({ID:`${a.name}Tree`,showHeader:!1,showOpenIcons:!1,showDropIcons:!1,showConnectors:!0,showRollOver:!1,leaveScrollbarGap:!1,
nodeIcon:null,folderIcon:null,closedIconSuffix:"",canDragRecordsOut:!0,dragDataAction:"copy",data:isc.Tree.create({modelType:"children",nameProperty:"desc",childrenProperty:"sub",root:a.root}),leafClick:(b,c,d)=>this.handleMenuItemClick(b,c,d)})},handleMenuItemClick:function(a,b,c){c=isc.Canvas.getById("details");"link"===b.ref?window.location=b.name:"edit"===b.ref?this.handleEditView(b,a,c):this.handleListView(b,a,c)},handleEditView:function(a,b,c){isc.BizUtil._currentView===isc.ListView.contents?
c.hideMember(isc.ListView.contents):isc.BizUtil._currentView&&(c.hasMember(isc.BizUtil._currentView)&&c.hideMember(isc.BizUtil._currentView),isc.BizUtil.relinquishEditView(isc.BizUtil._currentView));isc.BizUtil.getEditView(a.module?a.module:b.data.root.name,a.name,d=>{c.addMember(d);isc.BizUtil._currentView=d;d.newInstance()})},handleListView:function(a,b,c){isc.BizUtil._currentView!==isc.ListView.contents&&(isc.BizUtil._currentView&&(c.hasMember(isc.BizUtil._currentView)&&c.hideMember(isc.BizUtil._currentView),
isc.BizUtil.relinquishEditView(isc.BizUtil._currentView)),isc.BizUtil._currentView=isc.ListView.contents,c.showMember(isc.ListView.contents));b=`${b.data.root.name}_${a.name}`;switch(a.ref){case "grid":isc.ListView.setGridDataSource(b,a.config);break;case "cal":isc.ListView.setCalendarDataSource(b,a.config);break;case "tree":isc.ListView.setTreeDataSource(b,a.config);break;case "map":isc.ListView.setMapDataSource(b,a.config);break;default:alert(`Menu ref of ${a.ref} is unknown`)}},createDataSources:function(a){a.forEach(b=>
{b.fields.add({name:"operator",type:"text",hidden:!0});b.fields.add({name:"criteria",type:"text",hidden:!0});b.fields.add({name:"bizId",primaryKey:!0,hidden:!0});b.fields.add({name:"bizLock",hidden:!0});b.fields.addAt({name:"bizTagged",title:"Tag",type:"boolean",validOperators:["equals"]},0);b.fields.addAt({name:"bizFlagComment",title:"Flag",canFilter:SKYVE.Util.canFlag},1);isc.RestDataSource.create({ID:b.ID,dataFormat:"json",jsonPrefix:"",jsonSuffix:"",dataURL:"smartlist",operationBindings:[{operationType:"fetch",
dataProtocol:"postParams"},{operationType:"update",dataProtocol:"postParams"},{operationType:"add",dataProtocol:"postParams"},{operationType:"remove",dataProtocol:"postParams"}],criteriaPolicy:"dropOnChange",title:b.title,modoc:b.modoc,icon:b.icon,fontIcon:b.fontIcon,aggregate:b.aggregate,canCreate:b.canCreate,canUpdate:b.canUpdate,canDelete:b.canDelete,cellHeight:b.cellHeight,fields:b.fields})})},addListViewToDetails:function(){const a=isc.Canvas.getById("details");isc.BizUtil._currentView=isc.ListView.contents;
a.addMember(isc.ListView.contents);a.hideMember(isc.ListView.contents)},createTextSearchComponents:function(){isc.RestDataSource.create({ID:"textSearch",dataFormat:"json",dataURL:"smartsearch",criteriaPolicy:"dropOnChange",fields:[{name:"icon",title:"Icon"},{name:"doc",title:"Document"},{name:"bizKey",title:"Description"},{name:"excerpt",title:"Excerpt"},{name:"score",title:"Score (%)",type:"integer"},{name:"data",type:"link",title:"Data",target:"_self"},{name:"content",type:"link",title:"Content",
target:"_blank"}]});isc.DynamicForm.create({ID:"textSearchForm",margin:2,width:550,height:40,numCols:3,colWidths:[250,"*",100],items:[{name:"query",title:"Type and press search or enter",type:"text",keyPress:function(a,b,c){"Enter"===c&&b.validate(!1)&&a.form.doSearch()},required:!0,validators:[{clientOnly:!0,type:"lengthRange",min:4,errorMessage:"At least 4 characters are required for a search"}]},{name:"searchBtn",startRow:!1,title:"Search",type:"button",accessKey:"Enter",click:function(){this.form.doSearch()}},
{name:"message",type:"blurb",startRow:!0,colSpan:3}],doSearch:function(){this.validate()&&(this.getItem("message").setValue(""),textSearchResults.filterData(textSearchForm.getValuesAsCriteria()))}});isc.ListGrid.create({ID:"textSearchResults",width:"100%",height:"100%",alternateRecordStyles:!0,dataSource:"textSearch",dataFetchMode:"basic",wrapCells:!0,fixedRecordHeights:!1,canEdit:!1,canFreezeFields:!1,canGroupBy:!1,canPickFields:!1,canSort:!1,fields:[{name:"icon",align:"center",width:30},{name:"doc",
width:"15%"},{name:"bizKey",width:"30%"},{name:"excerpt",width:"55%"},{name:"score",width:75},{name:"data",width:40,align:"center",linkText:"Data"},{name:"content",width:60,align:"center",linkText:"Content"}],dataProperties:{transformData:function(a,b){if(0<=b.status){a=a.pop();b=textSearchForm.getItem("message");let c=`Query took ${a.time} seconds.`;a.suggestion&&(c+=`  Did you mean <a href="#" onclick="var q = textSearchForm.getItem('query'); q.setValue('${a.suggestion}'); q.focusInItem(); return false;">${a.suggestion}</a>`);
b.setValue(c)}}}})},popupSearch:function(){isc.WindowStack.popup(null,"Text Search",!0,[textSearchForm,textSearchResults]);textSearchForm.focusInItem("query");textSearchForm.clearValues()},showPortal:function(){const a=isc.Canvas.getById("details");isc.BizUtil._currentView!==isc.ListView.contents&&(isc.BizUtil._currentView&&(a.hasMember(isc.BizUtil._currentView)&&a.hideMember(isc.BizUtil._currentView),isc.BizUtil.relinquishEditView(isc.BizUtil._currentView)),isc.BizUtil._currentView=isc.ListView.contents,
a.showMember(isc.ListView.contents));isc.ListView.showPortal()},showHelp:function(a){isc.BizUtil.popupFrame(a||"https://skyvers.github.io/skyve-user-guide/","Skyve Help",1024,768)}});
//# sourceMappingURL=skyve-min.js.map