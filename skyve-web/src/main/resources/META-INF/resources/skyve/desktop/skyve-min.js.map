{
"version":3,
"file":"../skyve-web/src/main/resources/META-INF/resources/skyve/desktop/skyve-min.js",
"lineCount":395,
"mappings":"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",
"sources":["src/js/common/util.js","src/js/desktop/util.js","src/js/desktop/types.js","src/js/desktop/windowStack.js","src/js/desktop/reporting.js","src/js/desktop/charting.js","src/js/desktop/advancedFilter.js","src/js/desktop/datagrid.js","src/js/desktop/listgrid.js","src/js/desktop/header.js","src/js/desktop/listview.js","src/js/desktop/editView.js","src/js/desktop/harness.js"],
"sourcesContent":["// SKYVE namespace definition\nif (!window.SKYVE) {\n\twindow.SKYVE = {};\n}\n\nSKYVE.Util = (function () {\n\tconst context = `${window.location}`.substring(\n\t\t0,\n\t\t`${window.location}`.lastIndexOf(\"/\") + 1,\n\t);\n\n\t/**\n\t * Loads a resource (JS or CSS) and appends it to the document head.\n\t * @param {HTMLElement} node - the resource node to load.\n\t * @param {Function} callback - callback function to execute after loading.\n\t */\n\tconst load = function (node, callback) {\n\t\tif (callback !== null) {\n\t\t\tif (node.readyState) {\n\t\t\t\t// IE, incl. IE9\n\t\t\t\tnode.onreadystatechange = function () {\n\t\t\t\t\tif (node.readyState === \"loaded\" || node.readyState === \"complete\") {\n\t\t\t\t\t\tnode.onreadystatechange = null;\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t// Other browsers\n\t\t\t\tnode.onload = callback;\n\t\t\t}\n\t\t}\n\n\t\tconst headNode = document.getElementsByTagName(\"HEAD\")[0];\n\t\tif (headNode) {\n\t\t\theadNode.appendChild(node);\n\t\t}\n\t};\n\n\t// Public methods\n\treturn {\n\t\tcustomer: null,\n\t\tv: null,\n\t\tgoogleMapsV3ApiKey: null,\n\t\tckEditorConfigFileUrl: null,\n\t\tmapCentre: null,\n\t\tmapZoom: 1,\n\t\tCONTEXT_URL: context,\n\t\tallowedReportFormats: null,\n\n\t\t/**\n\t\t * Loads a JavaScript file.\n\t\t * @param {string} scriptPath - the path to the JavaScript file.\n\t\t * @param {Function} callback - callback function to execute after loading.\n\t\t */\n\t\tloadJS: function (scriptPath, callback) {\n\t\t\tconst scriptNode = document.createElement(\"SCRIPT\");\n\t\t\tscriptNode.type = \"text/javascript\";\n\t\t\tscriptNode.src = scriptPath;\n\t\t\tload(scriptNode, callback);\n\t\t},\n\n\t\t/**\n\t\t * Loads a CSS file.\n\t\t * @param {string} cssPath - the path to the CSS file.\n\t\t * @param {Function} callback - callback function to execute after loading.\n\t\t */\n\t\tloadCSS: function (cssPath, callback) {\n\t\t\tconst cssNode = document.createElement(\"LINK\");\n\t\t\tcssNode.type = \"text/css\";\n\t\t\tcssNode.rel = \"stylesheet\";\n\t\t\tcssNode.href = cssPath;\n\t\t\tload(cssNode, callback);\n\t\t},\n\n\t\t/**\n\t\t * Retrieves the current geolocation and executes a callback with the WKT string.\n\t\t * @param {Function} callback - callback function to execute with the WKT string.\n\t\t */\n\t\tgeoLocate: function (callback) {\n\t\t\tif (navigator.geolocation) {\n\t\t\t\t$(function () {\n\t\t\t\t\tPrimeFaces.cw(\"Growl\", \"growl\", {\n\t\t\t\t\t\tid: \"growl\",\n\t\t\t\t\t\twidgetVar: \"growl\",\n\t\t\t\t\t\tmsgs: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsummary: \"GeoLocating\",\n\t\t\t\t\t\t\t\tdetail: \"Please wait...\",\n\t\t\t\t\t\t\t\tseverity: \"info\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\tfunction (position) {\n\t\t\t\t\t\t$(function () {\n\t\t\t\t\t\t\tPrimeFaces.cw(\"Growl\", \"growl\", {\n\t\t\t\t\t\t\t\tid: \"growl\",\n\t\t\t\t\t\t\t\twidgetVar: \"growl\",\n\t\t\t\t\t\t\t\tmsgs: [\n\t\t\t\t\t\t\t\t\t{ summary: \"GeoLocating\", detail: \"Done\", severity: \"info\" },\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(\n\t\t\t\t\t\t\t`POINT (${position.coords.longitude} ${position.coords.latitude})`,\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (error) {\n\t\t\t\t\t\t$(function () {\n\t\t\t\t\t\t\tPrimeFaces.cw(\"Growl\", \"growl\", {\n\t\t\t\t\t\t\t\tid: \"growl\",\n\t\t\t\t\t\t\t\twidgetVar: \"growl\",\n\t\t\t\t\t\t\t\tmsgs: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsummary: \"GeoLocating\",\n\t\t\t\t\t\t\t\t\t\tdetail: error.message,\n\t\t\t\t\t\t\t\t\t\tseverity: \"warn\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t{ enableHighAccuracy: true },\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Sets a cookie indicating whether the device has a touch screen.\n\t\t */\n\t\tsetTouchCookie: function () {\n\t\t\tlet hasTouchScreen = false;\n\t\t\tif (\"maxTouchPoints\" in navigator) {\n\t\t\t\thasTouchScreen = navigator.maxTouchPoints > 0;\n\t\t\t} else if (\"msMaxTouchPoints\" in navigator) {\n\t\t\t\thasTouchScreen = navigator.msMaxTouchPoints > 0;\n\t\t\t} else {\n\t\t\t\tconst mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\n\t\t\t\tif (mQ && mQ.media === \"(pointer:coarse)\") {\n\t\t\t\t\thasTouchScreen = !!mQ.matches;\n\t\t\t\t} else if (\"orientation\" in window) {\n\t\t\t\t\thasTouchScreen = true; // deprecated, but good fallback\n\t\t\t\t}\n\t\t\t}\n\t\t\tdocument.cookie = `touch=${hasTouchScreen ? 1 : 0}; path=/`;\n\t\t},\n\n\t\t// Password strength estimation\n\t\tpasswordStrength: {\n\t\t\t0: \"Worst\",\n\t\t\t1: \"Bad\",\n\t\t\t2: \"Weak\",\n\t\t\t3: \"Good\",\n\t\t\t4: \"Strong\",\n\t\t},\n\t\tprogressBarPower: {\n\t\t\t0: \"1%\",\n\t\t\t1: \"25%\",\n\t\t\t2: \"50%\",\n\t\t\t3: \"75%\",\n\t\t\t4: \"100%\",\n\t\t},\n\t\tprogressBarColour: {\n\t\t\t0: \"#D73F40\",\n\t\t\t1: \"#DC6551\",\n\t\t\t2: \"#F2B84F\",\n\t\t\t3: \"#BDE952\",\n\t\t\t4: \"#3ba62f\",\n\t\t},\n\t};\n})();\n\nSKYVE.GMap = (function () {\n\tlet wkt = null;\n\n\t/**\n\t * Determines the drawing modes based on the specified drawing tools.\n\t * @param {string} drawingTools - the drawing tools specified on the geometryMap widget.\n\t * @returns {Array<google.maps.drawing.OverlayType>} - an array of drawing modes.\n\t */\n\tconst drawingModes = function (drawingTools) {\n\t\tlet result = null;\n\t\tswitch (drawingTools) {\n\t\t\tcase \"point\":\n\t\t\t\tresult = [google.maps.drawing.OverlayType.MARKER];\n\t\t\t\tbreak;\n\t\t\tcase \"line\":\n\t\t\t\tresult = [google.maps.drawing.OverlayType.POLYLINE];\n\t\t\t\tbreak;\n\t\t\tcase \"polygon\":\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYGON,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.RECTANGLE,\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tcase \"pointAndLine\":\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.MARKER,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYLINE,\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tcase \"pointAndPolygon\":\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.MARKER,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYGON,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.RECTANGLE,\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tcase \"lineAndPolygon\":\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYLINE,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYGON,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.RECTANGLE,\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.MARKER,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYLINE,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYGON,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.RECTANGLE,\n\t\t\t\t];\n\t\t}\n\t\treturn result;\n\t};\n\n\t// Public methods\n\treturn {\n\t\t/**\n\t\t * Scatters data points on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {Object} data - the response from the map servlet to scatter.\n\t\t * @param {boolean} fit - whether to fit the map bounds to the data.\n\t\t * @param {boolean} delta - whether to only remove or update if changed.\n\t\t */\n\t\tscatter: function (display, data, fit, delta) {\n\t\t\t// Instantiate WKT if it hasn't been already (at this point Wkt script is loaded)\n\t\t\tif (!wkt) {\n\t\t\t\twkt = new Wkt.Wkt();\n\t\t\t}\n\n\t\t\tconst items = data.items;\n\t\t\t// If there is no data, there is probably an error, so just bug out\n\t\t\tif (!items) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (delta) {\n\t\t\t\t// Remove overlays not present in the data\n\t\t\t\tfor (const bizId in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, bizId)) {\n\t\t\t\t\t\tlet found = false;\n\t\t\t\t\t\tfor (let i = 0, l = items.length; i < l; i++) {\n\t\t\t\t\t\t\tif (items[i].bizId === bizId) {\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t\tconst deletedObject = display._objects[bizId];\n\t\t\t\t\t\t\tfor (let i = 0, l = deletedObject.overlays.length; i < l; i++) {\n\t\t\t\t\t\t\t\tdeletedObject.overlays[i].setMap(null);\n\t\t\t\t\t\t\t\tdeletedObject.overlays[i] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdelete deletedObject.overlays;\n\t\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Remove all overlays\n\t\t\t\tfor (const bizId in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, bizId)) {\n\t\t\t\t\t\tconst deletedObject = display._objects[bizId];\n\t\t\t\t\t\tfor (let i = 0, l = deletedObject.overlays.length; i < l; i++) {\n\t\t\t\t\t\t\tdeletedObject.overlays[i].setMap(null);\n\t\t\t\t\t\t\tdeletedObject.overlays[i] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete deletedObject.overlays;\n\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add/update overlays from the data\n\t\t\tfor (let i = 0, l = items.length; i < l; i++) {\n\t\t\t\tconst item = items[i];\n\n\t\t\t\tlet object = display._objects[item.bizId];\n\t\t\t\tif (object) {\n\t\t\t\t\t// If the WKTs have changed, delete the overlay and recreate it\n\t\t\t\t\tlet same = object.overlays.length === item.features.length;\n\t\t\t\t\tif (same) {\n\t\t\t\t\t\tfor (let j = 0, m = object.overlays.length; j < m; j++) {\n\t\t\t\t\t\t\tif (object.overlays[j].geometry !== item.features[j].geometry) {\n\t\t\t\t\t\t\t\tsame = false;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!same) {\n\t\t\t\t\t\tfor (let j = 0, m = object.overlays.length; j < m; j++) {\n\t\t\t\t\t\t\tobject.overlays[j].setMap(null);\n\t\t\t\t\t\t\tobject.overlays[j] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete object.overlays;\n\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t\tobject = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!object) {\n\t\t\t\t\t// Object could have been nulled just above\n\t\t\t\t\tobject = { overlays: [] };\n\t\t\t\t\tfor (let j = 0, m = item.features.length; j < m; j++) {\n\t\t\t\t\t\tconst feature = item.features[j];\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Catch any malformed WKT strings\n\t\t\t\t\t\t\twkt.read(feature.geometry);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\talert(`${feature.geometry} is invalid WKT.`);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst props = { editable: feature.editable };\n\t\t\t\t\t\tif (feature.strokeColour) {\n\t\t\t\t\t\t\tprops.strokeColor = feature.strokeColour;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (feature.fillColour) {\n\t\t\t\t\t\t\tprops.fillColor = feature.fillColour;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (feature.fillOpacity) {\n\t\t\t\t\t\t\tprops.fillOpacity = feature.fillOpacity;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (feature.iconRelativeFilePath) {\n\t\t\t\t\t\t\tprops.icon = {\n\t\t\t\t\t\t\t\turl: `${SKYVE.Util.CONTEXT_URL}resources?_n=${feature.iconRelativeFilePath}&_doc=${data._doc}`,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (feature.iconAnchorX && feature.iconAnchorY) {\n\t\t\t\t\t\t\t\tprops.icon.anchor = new google.maps.Point(\n\t\t\t\t\t\t\t\t\tfeature.iconAnchorX,\n\t\t\t\t\t\t\t\t\tfeature.iconAnchorY,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tprops.icon.origin = new google.maps.Point(0, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst overlay = wkt.toObject(props);\n\t\t\t\t\t\tobject.overlays.push(overlay);\n\t\t\t\t\t\toverlay.setMap(display.webmap);\n\n\t\t\t\t\t\tif (feature.zoomable) {\n\t\t\t\t\t\t\t// Can show the info window for zooming\n\t\t\t\t\t\t\toverlay.bizId = item.bizId;\n\t\t\t\t\t\t\toverlay.geometry = feature.geometry;\n\t\t\t\t\t\t\toverlay.fromTimestamp = item.fromTimestamp;\n\t\t\t\t\t\t\toverlay.toTimestamp = item.toTimestamp;\n\t\t\t\t\t\t\toverlay.mod = item.moduleName;\n\t\t\t\t\t\t\toverlay.doc = item.documentName;\n\t\t\t\t\t\t\toverlay.infoMarkup = item.infoMarkup;\n\t\t\t\t\t\t\tgoogle.maps.event.addListener(overlay, \"click\", function (event) {\n\t\t\t\t\t\t\t\tdisplay.click(this, event);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdisplay._objects[item.bizId] = object;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (fit) {\n\t\t\t\tconst bounds = new google.maps.LatLngBounds();\n\t\t\t\tlet someOverlays = false;\n\t\t\t\tfor (const id in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, id)) {\n\t\t\t\t\t\tsomeOverlays = true;\n\t\t\t\t\t\tconst object = display._objects[id];\n\t\t\t\t\t\tconst overlays = object.overlays;\n\t\t\t\t\t\tfor (let i = 0, l = overlays.length; i < l; i++) {\n\t\t\t\t\t\t\tconst overlay = overlays[i];\n\t\t\t\t\t\t\tif (overlay.getPath) {\n\t\t\t\t\t\t\t\t// For polygons and polylines - fit the bounds to the vertices\n\t\t\t\t\t\t\t\tconst path = overlay.getPath();\n\t\t\t\t\t\t\t\tfor (let j = 0, m = path.getLength(); j < m; j++) {\n\t\t\t\t\t\t\t\t\tbounds.extend(path.getAt(j));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (overlay.getPosition) {\n\t\t\t\t\t\t\t\tbounds.extend(overlay.getPosition());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (someOverlays) {\n\t\t\t\t\t// Don't zoom in too far on only one marker\n\t\t\t\t\tif (bounds.getNorthEast().equals(bounds.getSouthWest())) {\n\t\t\t\t\t\tif (display.webmap.getZoom() < 15) {\n\t\t\t\t\t\t\tdisplay.webmap.setZoom(15);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\toverlay.getPosition !== undefined &&\n\t\t\t\t\t\t\ttypeof overlay.getPosition === \"function\"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tdisplay.webmap.setCenter(bounds.getNorthEast());\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdisplay.webmap.fitBounds(bounds);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Centers the map based on the configured map center.\n\t\t * @returns {google.maps.LatLng} - the center coordinates of the map.\n\t\t */\n\t\tcentre: function () {\n\t\t\t// Instantiate WKT if it hasn't been already (at this point Wkt script is loaded)\n\t\t\tif (!wkt) {\n\t\t\t\twkt = new Wkt.Wkt();\n\t\t\t}\n\n\t\t\tlet result = null;\n\t\t\tif (SKYVE.Util.mapCentre) {\n\t\t\t\ttry {\n\t\t\t\t\t// Catch any malformed WKT strings\n\t\t\t\t\twkt.read(SKYVE.Util.mapCentre);\n\t\t\t\t\tconst coord = wkt.components[0];\n\t\t\t\t\tresult = new google.maps.LatLng(coord.y, coord.x);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(`${SKYVE.Util.mapCentre} is malformed WKT Point format`);\n\t\t\t\t\tSKYVE.Util.mapCentre = null;\n\t\t\t\t\tresult = new google.maps.LatLng(0, 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult = new google.maps.LatLng(0, 0);\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * Displays a WKT string value on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {string} value - the WKT string value to display.\n\t\t */\n\t\tscatterValue: function (display, value) {\n\t\t\t// Instantiate WKT if it hasn't been already (at this point Wkt script is loaded)\n\t\t\tif (!wkt) {\n\t\t\t\twkt = new Wkt.Wkt();\n\t\t\t}\n\n\t\t\t// If no value is provided, return early\n\t\t\tif (!value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Catch any malformed WKT strings\n\t\t\t\twkt.read(value);\n\t\t\t} catch (e) {\n\t\t\t\tif (e.name === \"WKTError\") {\n\t\t\t\t\talert(\"The WKT string is invalid.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Convert the WKT to a Google Maps object\n\t\t\tconst obj = wkt.toObject(display.webmap.defaults);\n\n\t\t\t// Handle specific geometry types\n\t\t\tif (wkt.type !== \"polygon\" && wkt.type !== \"linestring\") {\n\t\t\t\tif (obj.setEditable) {\n\t\t\t\t\tobj.setEditable(false); // Disable editing for non-polygon/linestring geometries\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Handle multi-geometries (arrays) and single geometries\n\t\t\tif (Wkt.isArray(obj)) {\n\t\t\t\t// Iterate through multi-geometry objects\n\t\t\t\tfor (const key in obj) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(obj, key) &&\n\t\t\t\t\t\t!Wkt.isArray(obj[key])\n\t\t\t\t\t) {\n\t\t\t\t\t\tobj[key].setMap(display.webmap); // Add each geometry to the map\n\t\t\t\t\t\tdisplay._overlays.push(obj[key]); // Track the overlay\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tobj.setMap(display.webmap); // Add the single geometry to the map\n\t\t\t\tdisplay._overlays.push(obj); // Track the overlay\n\t\t\t}\n\n\t\t\t// Pan the map to the feature\n\t\t\tif (obj.getBounds !== undefined && typeof obj.getBounds === \"function\") {\n\t\t\t\t// For objects with defined bounds (e.g., rectangles, circles)\n\t\t\t\tdisplay.webmap.fitBounds(obj.getBounds());\n\t\t\t} else {\n\t\t\t\tif (obj.getPath !== undefined && typeof obj.getPath === \"function\") {\n\t\t\t\t\t// For polygons and polylines - fit the bounds to the vertices\n\t\t\t\t\tconst bounds = new google.maps.LatLngBounds();\n\t\t\t\t\tconst path = obj.getPath();\n\t\t\t\t\tfor (let i = 0, l = path.getLength(); i < l; i++) {\n\t\t\t\t\t\tbounds.extend(path.getAt(i));\n\t\t\t\t\t}\n\t\t\t\t\tdisplay.webmap.fitBounds(bounds);\n\t\t\t\t} else {\n\t\t\t\t\t// For points (markers)\n\t\t\t\t\tif (display.webmap.getZoom() < 15) {\n\t\t\t\t\t\tdisplay.webmap.setZoom(15); // Ensure a minimum zoom level\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\tobj.getPosition !== undefined &&\n\t\t\t\t\t\ttypeof obj.getPosition === \"function\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tdisplay.webmap.setCenter(obj.getPosition()); // Center the map on the marker\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Clears all overlays from the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tclear: function (display) {\n\t\t\t// Remove each overlay from the map\n\t\t\tfor (let i = 0, l = display._overlays.length; i < l; i++) {\n\t\t\t\tdisplay._overlays[i].setMap(null);\n\t\t\t}\n\t\t\t// Reset the overlays array\n\t\t\tdisplay._overlays.length = 0;\n\t\t},\n\n\t\t/**\n\t\t * Initializes drawing tools on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tdrawingTools: function (display) {\n\t\t\t// Instantiate WKT if it hasn't been already (at this point Wkt script is loaded)\n\t\t\tif (!wkt) {\n\t\t\t\twkt = new Wkt.Wkt();\n\t\t\t}\n\n\t\t\t// Initialize the drawing manager with the specified drawing modes\n\t\t\tdisplay.webmap.drawingManager = new google.maps.drawing.DrawingManager({\n\t\t\t\tdrawingControlOptions: {\n\t\t\t\t\tposition: google.maps.ControlPosition.LEFT_BOTTOM,\n\t\t\t\t\tdrawingModes: drawingModes(display.drawingTools), // Get the allowed drawing modes\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Add the drawing manager to the map\n\t\t\tdisplay.webmap.drawingManager.setMap(display.webmap);\n\n\t\t\t// Listen for the completion of a drawing operation\n\t\t\tgoogle.maps.event.addListener(\n\t\t\t\tdisplay.webmap.drawingManager,\n\t\t\t\t\"overlaycomplete\",\n\t\t\t\tfunction (event) {\n\t\t\t\t\t// Clear existing overlays from the map\n\t\t\t\t\tSKYVE.GMap.clear(display);\n\n\t\t\t\t\t// Set the drawing mode to \"pan\" (the hand) so users can immediately edit\n\t\t\t\t\tthis.setDrawingMode(null);\n\n\t\t\t\t\t// Add the new overlay to the map and track it\n\t\t\t\t\tdisplay._overlays.push(event.overlay);\n\n\t\t\t\t\t// Convert the overlay to a WKT string and update the field value\n\t\t\t\t\twkt.fromObject(event.overlay);\n\t\t\t\t\tconst wktValue = wkt.write();\n\t\t\t\t\tdisplay.setFieldValue(wktValue);\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Adds a geolocation control to the map, allowing users to set their current position.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tgeoLocator: function (display) {\n\t\t\tif (navigator.geolocation) {\n\t\t\t\t// Create a custom control for geolocation\n\t\t\t\tconst control = document.createElement(\"DIV\");\n\t\t\t\tObject.assign(control.style, {\n\t\t\t\t\tbackgroundColor: \"#fff\",\n\t\t\t\t\tborder: \"2px solid #fff\",\n\t\t\t\t\tborderRadius: \"3px\",\n\t\t\t\t\tboxShadow: \"0 2px 6px rgba(0,0,0,.3)\",\n\t\t\t\t\tcursor: \"pointer\",\n\t\t\t\t\tmargin: \"10px\",\n\t\t\t\t\tpadding: \"5px\",\n\t\t\t\t\ttextAlign: \"center\",\n\t\t\t\t});\n\t\t\t\tcontrol.title = \"Click to set your current position from your GPS\";\n\t\t\t\tcontrol.innerHTML = '<i class=\"fa-solid fa-location-crosshairs\"></i>';\n\t\t\t\tcontrol.index = 1;\n\n\t\t\t\t// Add a click event listener to the control\n\t\t\t\tcontrol.addEventListener(\"click\", function () {\n\t\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\t\tfunction (position) {\n\t\t\t\t\t\t\t// Clear existing overlays from the map\n\t\t\t\t\t\t\tSKYVE.GMap.clear(display);\n\n\t\t\t\t\t\t\t// Set the drawing mode to \"pan\" (the hand) so users can immediately edit\n\t\t\t\t\t\t\tdisplay.webmap.drawingManager.setDrawingMode(null);\n\n\t\t\t\t\t\t\t// Create a marker at the user's current position\n\t\t\t\t\t\t\tconst pos = {\n\t\t\t\t\t\t\t\tlat: position.coords.latitude,\n\t\t\t\t\t\t\t\tlng: position.coords.longitude,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tconst marker = new google.maps.Marker({\n\t\t\t\t\t\t\t\tposition: pos,\n\t\t\t\t\t\t\t\tmap: display.webmap,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Track the marker and update the field value with the WKT string\n\t\t\t\t\t\t\tdisplay._overlays.push(marker);\n\t\t\t\t\t\t\tdisplay.setFieldValue(`POINT (${pos.lng} ${pos.lat})`);\n\n\t\t\t\t\t\t\t// Zoom and center the map on the marker\n\t\t\t\t\t\t\tdisplay.webmap.setZoom(15);\n\t\t\t\t\t\t\tdisplay.webmap.setCenter(pos);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction (error) {\n\t\t\t\t\t\t\talert(error.message); // Handle geolocation errors\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ enableHighAccuracy: true },\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\t// Add the control to the map\n\t\t\t\tdisplay.webmap.geolocator = control;\n\t\t\t\tdisplay.webmap.controls[google.maps.ControlPosition.LEFT].push(control);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Enables or disables the drawing tools and geolocation control.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {boolean} disabled - whether to disable the controls.\n\t\t */\n\t\tsetDisabled: function (display, disabled) {\n\t\t\tif (display.webmap) {\n\t\t\t\t// Disable or enable the drawing manager\n\t\t\t\tif (display.webmap.drawingManager) {\n\t\t\t\t\tdisplay.webmap.drawingManager.setOptions({\n\t\t\t\t\t\tdrawingControl: !disabled,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Hide or show the geolocation control\n\t\t\t\tif (display.webmap.geolocator) {\n\t\t\t\t\tdisplay.webmap.geolocator.style.display = disabled ? \"none\" : \"block\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds refresh controls to the map, allowing users to set the refresh rate and toggle auto-refresh.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\trefreshControls: function (display) {\n\t\t\t// Create a custom control for refresh settings\n\t\t\tconst control = document.createElement(\"DIV\");\n\t\t\tObject.assign(control.style, {\n\t\t\t\tbackgroundColor: \"#fff\",\n\t\t\t\tborder: \"2px solid #fff\",\n\t\t\t\tborderRadius: \"3px\",\n\t\t\t\tboxShadow: \"0 2px 6px rgba(0,0,0,.3)\",\n\t\t\t\tcursor: \"pointer\",\n\t\t\t\tmargin: \"10px\",\n\t\t\t\tpadding: \"5px\",\n\t\t\t\ttextAlign: \"center\",\n\t\t\t});\n\t\t\tcontrol.title = \"Click to set the refresh rate of the map\";\n\t\t\tcontrol.innerHTML = `\n\t\t\t\t\t\t        <input type=\"number\" min=\"0\" max=\"500\" step=\"1\" value=\"${display.refreshTime}\" size=\"3\" />\n\t\t\t\t\t\t        <input type=\"checkbox\" ${display._refreshRequired ? \"checked\" : \"\"}><label>Refresh</label>\n\t\t\t\t\t\t    `;\n\t\t\tcontrol.index = 1;\n\n\t\t\t// Add event listener for the refresh time input\n\t\t\tcontrol.children[0].addEventListener(\"change\", function () {\n\t\t\t\tdisplay.refreshTime = Number(this.value); // Update the refresh time\n\t\t\t\tif (display._refreshRequired) {\n\t\t\t\t\tif (display._intervalId) {\n\t\t\t\t\t\tclearInterval(display._intervalId); // Clear the existing interval\n\t\t\t\t\t}\n\t\t\t\t\t// Set a new interval with the updated refresh time\n\t\t\t\t\tdisplay._intervalId = setInterval(\n\t\t\t\t\t\tdisplay.rerender.bind(display),\n\t\t\t\t\t\tdisplay.refreshTime * 1000,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add event listener for the refresh toggle checkbox\n\t\t\tcontrol.children[1].addEventListener(\"click\", function () {\n\t\t\t\tdisplay._refreshRequired = this.checked; // Update the refresh required flag\n\t\t\t\tif (display._intervalId) {\n\t\t\t\t\tclearInterval(display._intervalId); // Clear the existing interval\n\t\t\t\t\tdisplay._intervalId = null;\n\t\t\t\t}\n\t\t\t\tif (display._refreshRequired) {\n\t\t\t\t\tdisplay.rerender(); // Trigger an immediate rerender\n\t\t\t\t\t// Set a new interval with the current refresh time\n\t\t\t\t\tdisplay._intervalId = setInterval(\n\t\t\t\t\t\tdisplay.rerender.bind(display),\n\t\t\t\t\t\tdisplay.refreshTime * 1000,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add the control to the map\n\t\t\tdisplay.webmap.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(\n\t\t\t\tcontrol,\n\t\t\t);\n\t\t},\n\t};\n})();\n\nSKYVE.Leaflet = (function () {\n\tconst numberRegexp = /[-+]?([0-9]*\\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/;\n\tconst tuples = new RegExp(\n\t\t\"^\" + numberRegexp.source + \"(\\\\s\" + numberRegexp.source + \"){1,}\",\n\t); // Matches sequences like '100 100' or '100 100 100'\n\n\t/**\n\t * Parses a WKT string and returns a GeoJSON geometry object.\n\t * @param {string} input - the WKT geometry string to parse.\n\t * @returns {?Object} a GeoJSON geometry object, or null if parsing fails.\n\t */\n\tfunction parse(input) {\n\t\tconst parts = input.split(\";\");\n\t\tlet wktString = parts.pop(); // Extract the WKT string\n\t\tconst srid = (parts.shift() || \"\").split(\"=\").pop(); // Extract the SRID if present\n\n\t\tlet i = 0; // Current position in the WKT string\n\n\t\t/**\n\t\t * Matches a regular expression at the current position in the WKT string.\n\t\t * @param {RegExp} re - the regular expression to match.\n\t\t * @returns {?string} the matched string, or null if no match is found.\n\t\t */\n\t\tfunction $(re) {\n\t\t\tconst match = wktString.substring(i).match(re);\n\t\t\tif (!match) return null;\n\t\t\ti += match[0].length; // Advance the position\n\t\t\treturn match[0];\n\t\t}\n\n\t\t/**\n\t\t * Adds a CRS (Coordinate Reference System) to a GeoJSON object if an SRID is present.\n\t\t * @param {Object} obj - the GeoJSON object.\n\t\t * @returns {Object} the GeoJSON object with an optional CRS.\n\t\t */\n\t\tfunction crs(obj) {\n\t\t\tif (obj && srid.match(/\\d+/)) {\n\t\t\t\tobj.crs = {\n\t\t\t\t\ttype: \"name\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tname: `urn:ogc:def:crs:EPSG::${srid}`,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn obj;\n\t\t}\n\n\t\t/**\n\t\t * Skips whitespace in the WKT string.\n\t\t */\n\t\tfunction white() {\n\t\t\t$(/^\\s*/);\n\t\t}\n\n\t\t/**\n\t\t * Parses multi-coordinates (e.g., for polygons or multi-geometries).\n\t\t * @returns {?Array<Array<number>>} an array of coordinate rings, or null if parsing fails.\n\t\t */\n\t\tfunction multicoords() {\n\t\t\twhite();\n\t\t\tlet depth = 0; // Tracks nesting depth for parentheses\n\t\t\tconst rings = []; // Stores the parsed coordinate rings\n\t\t\tconst stack = [rings]; // Tracks the current context for nested coordinates\n\t\t\tlet pointer = rings; // Points to the current coordinate array\n\t\t\tlet elem;\n\n\t\t\t// Parse coordinates until the end of the WKT string\n\t\t\twhile (\n\t\t\t\t(elem =\n\t\t\t\t\t$(/^(\\()/) || // Match opening parenthesis\n\t\t\t\t\t$(/^(\\))/) || // Match closing parenthesis\n\t\t\t\t\t$(/^(,)/) || // Match comma separator\n\t\t\t\t\t$(tuples)) // Match coordinate tuples\n\t\t\t) {\n\t\t\t\tif (elem === \"(\") {\n\t\t\t\t\t// Start a new nested coordinate array\n\t\t\t\t\tstack.push(pointer);\n\t\t\t\t\tpointer = [];\n\t\t\t\t\tstack[stack.length - 1].push(pointer);\n\t\t\t\t\tdepth++;\n\t\t\t\t} else if (elem === \")\") {\n\t\t\t\t\t// End the current nested coordinate array\n\t\t\t\t\tif (pointer.length === 0) return null; // Handle empty rings\n\t\t\t\t\tpointer = stack.pop();\n\t\t\t\t\tif (!pointer) return null; // Handle malformed input\n\t\t\t\t\tdepth--;\n\t\t\t\t\tif (depth === 0) break; // Exit if we've closed all nested levels\n\t\t\t\t} else if (elem === \",\") {\n\t\t\t\t\t// Start a new coordinate array at the same nesting level\n\t\t\t\t\tpointer = [];\n\t\t\t\t\tstack[stack.length - 1].push(pointer);\n\t\t\t\t} else if (!elem.split(/\\s/g).some(isNaN)) {\n\t\t\t\t\t// Parse coordinate tuples (e.g., \"10 20\")\n\t\t\t\t\tArray.prototype.push.apply(\n\t\t\t\t\t\tpointer,\n\t\t\t\t\t\telem.split(/\\s/g).map(parseFloat),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn null; // Handle invalid coordinates\n\t\t\t\t}\n\t\t\t\twhite(); // Skip any whitespace\n\t\t\t}\n\n\t\t\tif (depth !== 0) return null; // Ensure all parentheses are closed\n\n\t\t\treturn rings;\n\t\t}\n\n\t\t/**\n\t\t * Parses coordinates from the WKT string.\n\t\t * @returns {?Array<Array<number>>} an array of coordinate arrays, or null if parsing fails.\n\t\t */\n\t\tfunction coords() {\n\t\t\tconst list = []; // Stores the parsed coordinate arrays\n\t\t\tlet item = []; // Stores the current coordinate array\n\t\t\tlet pt;\n\n\t\t\t// Parse coordinates until the end of the WKT string\n\t\t\twhile (\n\t\t\t\t(pt =\n\t\t\t\t\t$(tuples) || // Match coordinate tuples (e.g., \"10 20\")\n\t\t\t\t\t$(/^(,)/)) // Match comma separator\n\t\t\t) {\n\t\t\t\tif (pt === \",\") {\n\t\t\t\t\t// Start a new coordinate array\n\t\t\t\t\tlist.push(item);\n\t\t\t\t\titem = [];\n\t\t\t\t} else if (!pt.split(/\\s/g).some(isNaN)) {\n\t\t\t\t\t// Parse coordinate tuples (e.g., \"10 20\")\n\t\t\t\t\tif (!item) item = [];\n\t\t\t\t\tArray.prototype.push.apply(item, pt.split(/\\s/g).map(parseFloat));\n\t\t\t\t}\n\t\t\t\twhite(); // Skip any whitespace\n\t\t\t}\n\n\t\t\t// Add the last coordinate array to the list\n\t\t\tif (item) list.push(item);\n\t\t\telse return null; // Handle empty coordinates\n\n\t\t\treturn list.length ? list : null; // Return null if no coordinates were parsed\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT Point geometry and returns a GeoJSON Point object.\n\t\t * @returns {?Object} a GeoJSON Point object, or null if parsing fails.\n\t\t */\n\t\tfunction point() {\n\t\t\t// Match the \"POINT\" keyword (case-insensitive)\n\t\t\tif (!$(/^(point(\\sz)?)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Match the opening parenthesis\n\t\t\tif (!$(/^(\\()/)) return null;\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = coords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Match the closing parenthesis\n\t\t\tif (!$(/^(\\))/)) return null;\n\n\t\t\t// Return the GeoJSON Point object\n\t\t\treturn {\n\t\t\t\ttype: \"Point\",\n\t\t\t\tcoordinates: c[0], // Use the first coordinate array\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT MultiPoint geometry and returns a GeoJSON MultiPoint object.\n\t\t * @returns {?Object} a GeoJSON MultiPoint object, or null if parsing fails.\n\t\t */\n\t\tfunction multipoint() {\n\t\t\t// Match the \"MULTIPOINT\" keyword (case-insensitive)\n\t\t\tif (!$(/^(multipoint)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Reformat the coordinates to match the standard WKT format\n\t\t\tconst newCoordsFormat = wktString\n\t\t\t\t.substring(wktString.indexOf(\"(\") + 1, wktString.length - 1)\n\t\t\t\t.replace(/\\(/g, \"\")\n\t\t\t\t.replace(/\\)/g, \"\");\n\t\t\twktString = `MULTIPOINT (${newCoordsFormat})`;\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = multicoords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Return the GeoJSON MultiPoint object\n\t\t\treturn {\n\t\t\t\ttype: \"MultiPoint\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT MultiLineString geometry and returns a GeoJSON MultiLineString object.\n\t\t * @returns {?Object} a GeoJSON MultiLineString object, or null if parsing fails.\n\t\t */\n\t\tfunction multilinestring() {\n\t\t\t// Match the \"MULTILINESTRING\" keyword (case-insensitive)\n\t\t\tif (!$(/^(multilinestring)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = multicoords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Return the GeoJSON MultiLineString object\n\t\t\treturn {\n\t\t\t\ttype: \"MultiLineString\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT LineString geometry and returns a GeoJSON LineString object.\n\t\t * @returns {?Object} a GeoJSON LineString object, or null if parsing fails.\n\t\t */\n\t\tfunction linestring() {\n\t\t\t// Match the \"LINESTRING\" keyword (case-insensitive)\n\t\t\tif (!$(/^(linestring(\\sz)?)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Match the opening parenthesis\n\t\t\tif (!$(/^(\\()/)) return null;\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = coords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\n\t\t\t// Match the closing parenthesis\n\t\t\tif (!$(/^(\\))/)) return null;\n\n\t\t\t// Return the GeoJSON LineString object\n\t\t\treturn {\n\t\t\t\ttype: \"LineString\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT Polygon geometry and returns a GeoJSON Polygon object.\n\t\t * @returns {?Object} a GeoJSON Polygon object, or null if parsing fails.\n\t\t */\n\t\tfunction polygon() {\n\t\t\t// Match the \"POLYGON\" keyword (case-insensitive)\n\t\t\tif (!$(/^(polygon(\\sz)?)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = multicoords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\n\t\t\t// Return the GeoJSON Polygon object\n\t\t\treturn {\n\t\t\t\ttype: \"Polygon\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT MultiPolygon geometry and returns a GeoJSON MultiPolygon object.\n\t\t * @returns {?Object} a GeoJSON MultiPolygon object, or null if parsing fails.\n\t\t */\n\t\tfunction multipolygon() {\n\t\t\t// Match the \"MULTIPOLYGON\" keyword (case-insensitive)\n\t\t\tif (!$(/^(multipolygon)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = multicoords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\n\t\t\t// Return the GeoJSON MultiPolygon object\n\t\t\treturn {\n\t\t\t\ttype: \"MultiPolygon\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT GeometryCollection and returns a GeoJSON GeometryCollection object.\n\t\t * @returns {?Object} a GeoJSON GeometryCollection object, or null if parsing fails.\n\t\t */\n\t\tfunction geometrycollection() {\n\t\t\tconst geometries = []; // Stores the parsed geometries\n\t\t\tlet geometry;\n\n\t\t\t// Match the \"GEOMETRYCOLLECTION\" keyword (case-insensitive)\n\t\t\tif (!$(/^(geometrycollection)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Match the opening parenthesis\n\t\t\tif (!$(/^(\\()/)) return null;\n\n\t\t\t// Parse geometries until the end of the WKT string\n\t\t\twhile ((geometry = root())) {\n\t\t\t\tgeometries.push(geometry); // Add the parsed geometry to the collection\n\t\t\t\twhite(); // Skip any whitespace\n\t\t\t\t$(/^(,)/); // Match the comma separator\n\t\t\t\twhite(); // Skip any whitespace\n\t\t\t}\n\n\t\t\t// Match the closing parenthesis\n\t\t\tif (!$(/^(\\))/)) return null;\n\n\t\t\t// Return the GeoJSON GeometryCollection object\n\t\t\treturn {\n\t\t\t\ttype: \"GeometryCollection\",\n\t\t\t\tgeometries: geometries,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses the root geometry from the WKT string.\n\t\t * @returns {?Object} a GeoJSON geometry object, or null if parsing fails.\n\t\t */\n\t\tfunction root() {\n\t\t\treturn (\n\t\t\t\tpoint() || // Try parsing a Point\n\t\t\t\tlinestring() || // Try parsing a LineString\n\t\t\t\tpolygon() || // Try parsing a Polygon\n\t\t\t\tmultipoint() || // Try parsing a MultiPoint\n\t\t\t\tmultilinestring() || // Try parsing a MultiLineString\n\t\t\t\tmultipolygon() || // Try parsing a MultiPolygon\n\t\t\t\tgeometrycollection() // Try parsing a GeometryCollection\n\t\t\t);\n\t\t}\n\n\t\treturn crs(root());\n\t}\n\n\t/**\n\t * Converts a GeoJSON object into a WKT string.\n\t * @param {Object} gj - the GeoJSON object to convert.\n\t * @returns {string} the WKT representation of the GeoJSON object.\n\t * @throws {Error} if the input is not a valid GeoJSON Feature or geometry object.\n\t */\n\tfunction stringify(gj) {\n\t\t// Handle GeoJSON Feature objects by extracting the geometry\n\t\tif (gj.type === \"Feature\") {\n\t\t\tgj = gj.geometry;\n\t\t}\n\n\t\t/**\n\t\t * Converts a coordinate pair into a WKT string.\n\t\t * @param {Array<number>} c - the coordinate pair (e.g., [10, 20]).\n\t\t * @returns {string} the WKT representation of the coordinate pair.\n\t\t */\n\t\tfunction pairWKT(c) {\n\t\t\treturn c.join(\" \");\n\t\t}\n\n\t\t/**\n\t\t * Converts a ring of coordinates into a WKT string.\n\t\t * @param {Array<Array<number>>} r - the ring of coordinates.\n\t\t * @returns {string} the WKT representation of the ring.\n\t\t */\n\t\tfunction ringWKT(r) {\n\t\t\treturn r.map(pairWKT).join(\", \");\n\t\t}\n\n\t\t/**\n\t\t * Converts multiple rings of coordinates into a WKT string.\n\t\t * @param {Array<Array<Array<number>>>} r - the rings of coordinates.\n\t\t * @returns {string} the WKT representation of the rings.\n\t\t */\n\t\tfunction ringsWKT(r) {\n\t\t\treturn r.map(ringWKT).map(wrapParens).join(\", \");\n\t\t}\n\n\t\t/**\n\t\t * Converts multiple sets of rings into a WKT string.\n\t\t * @param {Array<Array<Array<Array<number>>>>} r - the sets of rings.\n\t\t * @returns {string} the WKT representation of the sets of rings.\n\t\t */\n\t\tfunction multiRingsWKT(r) {\n\t\t\treturn r.map(ringsWKT).map(wrapParens).join(\", \");\n\t\t}\n\n\t\t/**\n\t\t * Wraps a string in parentheses.\n\t\t * @param {string} s - the string to wrap.\n\t\t * @returns {string} the wrapped string.\n\t\t */\n\t\tfunction wrapParens(s) {\n\t\t\treturn `(${s})`;\n\t\t}\n\n\t\t// Convert the GeoJSON object to WKT based on its type\n\t\tswitch (gj.type) {\n\t\t\tcase \"Point\":\n\t\t\t\treturn `POINT (${pairWKT(gj.coordinates)})`;\n\t\t\tcase \"LineString\":\n\t\t\t\treturn `LINESTRING (${ringWKT(gj.coordinates)})`;\n\t\t\tcase \"Polygon\":\n\t\t\t\treturn `POLYGON (${ringsWKT(gj.coordinates)})`;\n\t\t\tcase \"MultiPoint\":\n\t\t\t\treturn `MULTIPOINT (${ringWKT(gj.coordinates)})`;\n\t\t\tcase \"MultiPolygon\":\n\t\t\t\treturn `MULTIPOLYGON (${multiRingsWKT(gj.coordinates)})`;\n\t\t\tcase \"MultiLineString\":\n\t\t\t\treturn `MULTILINESTRING (${ringsWKT(gj.coordinates)})`;\n\t\t\tcase \"GeometryCollection\":\n\t\t\t\treturn `GEOMETRYCOLLECTION (${gj.geometries.map(stringify).join(\", \")})`;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\"stringify requires a valid GeoJSON Feature or geometry object as input\",\n\t\t\t\t);\n\t\t}\n\t}\n\n\t// Public methods\n\treturn {\n\t\t/**\n\t\t * Scatters data points on the map, updating or removing overlays as needed.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {Object} data - the response from the map servlet to scatter.\n\t\t * @param {boolean} fit - whether to fit the map bounds to the data.\n\t\t * @param {boolean} delta - whether to only remove or update if changed.\n\t\t */\n\t\tscatter: function (display, data, fit, delta) {\n\t\t\tconst items = data.items;\n\n\t\t\t// If there is no data, there is probably an error, so just return early\n\t\t\tif (!items) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (delta) {\n\t\t\t\t// Remove overlays not present in the data\n\t\t\t\tfor (const bizId in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, bizId)) {\n\t\t\t\t\t\tlet found = false;\n\t\t\t\t\t\tfor (let i = 0, l = items.length; i < l; i++) {\n\t\t\t\t\t\t\tif (items[i].bizId === bizId) {\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t\tconst deletedObject = display._objects[bizId];\n\t\t\t\t\t\t\tfor (let i = 0, l = deletedObject.overlays.length; i < l; i++) {\n\t\t\t\t\t\t\t\tdisplay.webmap.removeLayer(deletedObject.overlays[i]);\n\t\t\t\t\t\t\t\tdeletedObject.overlays[i] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdelete deletedObject.overlays;\n\t\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Remove all overlays\n\t\t\t\tfor (const bizId in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, bizId)) {\n\t\t\t\t\t\tconst deletedObject = display._objects[bizId];\n\t\t\t\t\t\tfor (let i = 0, l = deletedObject.overlays.length; i < l; i++) {\n\t\t\t\t\t\t\tdisplay.webmap.removeLayer(deletedObject.overlays[i]);\n\t\t\t\t\t\t\tdeletedObject.overlays[i] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete deletedObject.overlays;\n\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add/update overlays from the data\n\t\t\tfor (let i = 0, l = items.length; i < l; i++) {\n\t\t\t\tconst item = items[i];\n\n\t\t\t\tlet object = display._objects[item.bizId];\n\t\t\t\tif (object) {\n\t\t\t\t\t// If the WKTs have changed, delete the overlay and recreate it\n\t\t\t\t\tlet same = object.overlays.length === item.features.length;\n\t\t\t\t\tif (same) {\n\t\t\t\t\t\tfor (let j = 0, m = object.overlays.length; j < m; j++) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tobject.overlays[j].getLayers()[0].zoomData.geometry !==\n\t\t\t\t\t\t\t\titem.features[j].geometry\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tsame = false;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!same) {\n\t\t\t\t\t\tfor (let j = 0, m = object.overlays.length; j < m; j++) {\n\t\t\t\t\t\t\tdisplay.webmap.removeLayer(object.overlays[j]);\n\t\t\t\t\t\t\tobject.overlays[j] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete object.overlays;\n\t\t\t\t\t\tdelete display._objects[item.bizId];\n\t\t\t\t\t\tobject = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!object) {\n\t\t\t\t\t// Object could have been nulled just above\n\t\t\t\t\tobject = { overlays: [] };\n\t\t\t\t\tfor (let j = 0, m = item.features.length; j < m; j++) {\n\t\t\t\t\t\tconst itemFeature = item.features[j];\n\n\t\t\t\t\t\tconst geometry = parse(itemFeature.geometry);\n\t\t\t\t\t\tgeometry.properties = { editable: itemFeature.editable };\n\t\t\t\t\t\tif (itemFeature.strokeColour) {\n\t\t\t\t\t\t\tgeometry.properties.color = itemFeature.strokeColour;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (itemFeature.fillColour) {\n\t\t\t\t\t\t\tgeometry.properties.fillColor = itemFeature.fillColour;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (itemFeature.fillOpacity) {\n\t\t\t\t\t\t\tgeometry.properties.fillOpacity = itemFeature.fillOpacity;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (itemFeature.iconRelativeFilePath) {\n\t\t\t\t\t\t\tconst icon = {\n\t\t\t\t\t\t\t\ticonUrl: `resources?_n=${itemFeature.iconRelativeFilePath}&_doc=${data._doc}`,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (itemFeature.iconAnchorX && itemFeature.iconAnchorY) {\n\t\t\t\t\t\t\t\ticon.iconAnchor = [\n\t\t\t\t\t\t\t\t\titemFeature.iconAnchorX,\n\t\t\t\t\t\t\t\t\titemFeature.iconAnchorY,\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgeometry.properties.icon = icon;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst overlay = L.geoJson(geometry, {\n\t\t\t\t\t\t\tpointToLayer(point, latlng) {\n\t\t\t\t\t\t\t\tconst properties = point.properties;\n\t\t\t\t\t\t\t\tdelete point.properties;\n\n\t\t\t\t\t\t\t\tif (properties.icon) {\n\t\t\t\t\t\t\t\t\tproperties.icon = L.icon(properties.icon);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn L.marker(latlng, properties);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstyle: function (feature) {\n\t\t\t\t\t\t\t\tconst properties = feature.geometry.properties;\n\t\t\t\t\t\t\t\tdelete feature.geometry.properties;\n\t\t\t\t\t\t\t\treturn properties;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonEachFeature: function (feature, layer) {\n\t\t\t\t\t\t\t\tif (itemFeature.zoomable) {\n\t\t\t\t\t\t\t\t\t// Can show the info window for zooming\n\t\t\t\t\t\t\t\t\tlayer.zoomData = {\n\t\t\t\t\t\t\t\t\t\tbizId: item.bizId,\n\t\t\t\t\t\t\t\t\t\tgeometry: itemFeature.geometry,\n\t\t\t\t\t\t\t\t\t\tfromTimestamp: item.fromTimestamp,\n\t\t\t\t\t\t\t\t\t\ttoTimestamp: item.toTimestamp,\n\t\t\t\t\t\t\t\t\t\tmod: item.moduleName,\n\t\t\t\t\t\t\t\t\t\tdoc: item.documentName,\n\t\t\t\t\t\t\t\t\t\tinfoMarkup: item.infoMarkup,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tlayer.bindPopup(function (layer) {\n\t\t\t\t\t\t\t\t\t\treturn display.click(layer);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\tobject.overlays.push(overlay);\n\t\t\t\t\t\tdisplay.webmap.addLayer(overlay);\n\t\t\t\t\t}\n\t\t\t\t\tdisplay._objects[item.bizId] = object;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (fit) {\n\t\t\t\tconst bounds = L.latLngBounds();\n\t\t\t\tlet someOverlays = false;\n\t\t\t\tfor (const id in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, id)) {\n\t\t\t\t\t\tsomeOverlays = true;\n\t\t\t\t\t\tconst object = display._objects[id];\n\t\t\t\t\t\tconst overlays = object.overlays;\n\t\t\t\t\t\tfor (let i = 0, l = overlays.length; i < l; i++) {\n\t\t\t\t\t\t\tconst overlay = overlays[i];\n\t\t\t\t\t\t\tbounds.extend(overlay.getBounds());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (someOverlays) {\n\t\t\t\t\t// Don't zoom in too far on only one marker\n\t\t\t\t\tdisplay.webmap.fitBounds(bounds, { maxZoom: 15 });\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Retrieves the center coordinates of the map based on the configured map center.\n\t\t * @returns {Array<number>} the center coordinates as [latitude, longitude], or [0, 0] if invalid.\n\t\t */\n\t\tcentre: function () {\n\t\t\tlet result = [0, 0]; // Default center coordinates\n\n\t\t\tif (SKYVE.Util.mapCentre) {\n\t\t\t\ttry {\n\t\t\t\t\t// Parse the WKT string to get the center coordinates\n\t\t\t\t\tconst centre = parse(SKYVE.Util.mapCentre);\n\t\t\t\t\tresult = [centre.coordinates[1], centre.coordinates[0]]; // [latitude, longitude]\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(`${SKYVE.Util.mapCentre} is malformed WKT Point format`);\n\t\t\t\t\tSKYVE.Util.mapCentre = null; // Reset the map center if invalid\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * Displays a WKT string value on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {string} value - the WKT string value to display.\n\t\t */\n\t\tscatterValue: function (display, value) {\n\t\t\t// If no value is provided, return early\n\t\t\tif (!value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet obj = null;\n\t\t\ttry {\n\t\t\t\t// Parse the WKT string and create a GeoJSON layer\n\t\t\t\tobj = L.geoJson(parse(value));\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(`The WKT string ${value} is invalid.`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Add the GeoJSON layer to the map and track it\n\t\t\tobj.addTo(display.webmap);\n\t\t\tdisplay._overlays.push(obj);\n\n\t\t\t// Pan the map to the feature\n\t\t\tdisplay.webmap.fitBounds(obj.getBounds(), { maxZoom: 15 });\n\t\t},\n\n\t\t/**\n\t\t * Clears all overlays from the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tclear: function (display) {\n\t\t\t// Remove each overlay from the map\n\t\t\tfor (let i = 0, l = display._overlays.length; i < l; i++) {\n\t\t\t\tdisplay.webmap.removeLayer(display._overlays[i]);\n\t\t\t}\n\t\t\t// Reset the overlays array\n\t\t\tdisplay._overlays.length = 0;\n\t\t},\n\n\t\t/**\n\t\t * Initializes drawing tools on the map based on the specified drawing tools.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tdrawingTools: function (display) {\n\t\t\tconst drawingTools = display.drawingTools;\n\n\t\t\t/**\n\t\t\t * Custom Leaflet control for drawing tools.\n\t\t\t */\n\t\t\tL.EditControl = L.Control.extend({\n\t\t\t\toptions: {\n\t\t\t\t\tposition: \"topright\", // Position of the control on the map\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t * Creates the control container and adds drawing tool buttons.\n\t\t\t\t * @param {L.Map} map - the Leaflet map instance.\n\t\t\t\t * @returns {HTMLElement} the control container.\n\t\t\t\t */\n\t\t\t\tonAdd: function (map) {\n\t\t\t\t\tconst container = L.DomUtil.create(\n\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\"leaflet-control leaflet-bar\",\n\t\t\t\t\t);\n\n\t\t\t\t\t// Add marker tool if enabled\n\t\t\t\t\tif (\n\t\t\t\t\t\t!drawingTools ||\n\t\t\t\t\t\tdrawingTools === \"point\" ||\n\t\t\t\t\t\tdrawingTools === \"pointAndLine\" ||\n\t\t\t\t\t\tdrawingTools === \"pointAndPolygon\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst markerLink = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\tmarkerLink.href = \"#\";\n\t\t\t\t\t\tmarkerLink.title = \"Create a new marker\";\n\t\t\t\t\t\tmarkerLink.innerHTML = '<i class=\"fa-solid fa-location-dot\"></i>';\n\t\t\t\t\t\tL.DomEvent.on(markerLink, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\tmarkerLink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\twindow.LAYER = display.webmap.editTools.startMarker.call(\n\t\t\t\t\t\t\t\t\tmap.editTools,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add polyline tool if enabled\n\t\t\t\t\tif (\n\t\t\t\t\t\t!drawingTools ||\n\t\t\t\t\t\tdrawingTools === \"line\" ||\n\t\t\t\t\t\tdrawingTools === \"pointAndLine\" ||\n\t\t\t\t\t\tdrawingTools === \"lineAndPolygon\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst polylineLink = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\tpolylineLink.href = \"#\";\n\t\t\t\t\t\tpolylineLink.title = \"Create a new line\";\n\t\t\t\t\t\tpolylineLink.innerHTML =\n\t\t\t\t\t\t\t'<i class=\"fa-solid fa-diagram-project\"></i>';\n\t\t\t\t\t\tL.DomEvent.on(polylineLink, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\tpolylineLink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\twindow.LAYER = display.webmap.editTools.startPolyline.call(\n\t\t\t\t\t\t\t\t\tmap.editTools,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add polygon and rectangle tools if enabled\n\t\t\t\t\tif (\n\t\t\t\t\t\t!drawingTools ||\n\t\t\t\t\t\tdrawingTools === \"polygon\" ||\n\t\t\t\t\t\tdrawingTools === \"pointAndPolygon\" ||\n\t\t\t\t\t\tdrawingTools === \"lineAndPolygon\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst rectangleLink = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\trectangleLink.href = \"#\";\n\t\t\t\t\t\trectangleLink.title = \"Create a new rectangle\";\n\t\t\t\t\t\trectangleLink.innerHTML =\n\t\t\t\t\t\t\t'<i class=\"fa-solid fa-vector-square\"></i>';\n\t\t\t\t\t\tL.DomEvent.on(rectangleLink, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\trectangleLink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\twindow.LAYER = display.webmap.editTools.startRectangle.call(\n\t\t\t\t\t\t\t\t\tmap.editTools,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst polygonLink = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\tpolygonLink.href = \"#\";\n\t\t\t\t\t\tpolygonLink.title = \"Create a new polygon\";\n\t\t\t\t\t\tpolygonLink.innerHTML = '<i class=\"fa-solid fa-draw-polygon\"></i>';\n\t\t\t\t\t\tL.DomEvent.on(polygonLink, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\tpolygonLink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\twindow.LAYER = display.webmap.editTools.startPolygon.call(\n\t\t\t\t\t\t\t\t\tmap.editTools,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn container;\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Add the drawing control to the map\n\t\t\tdisplay.webmap.editControl = new L.EditControl();\n\t\t\tdisplay.webmap.addControl(display.webmap.editControl);\n\n\t\t\t// Handle the completion of a drawing operation\n\t\t\tdisplay.webmap.on(\"editable:drawing:commit\", function (event) {\n\t\t\t\tSKYVE.Leaflet.clear(display); // Clear existing overlays\n\n\t\t\t\t// Stop editing mode so users can immediately edit\n\t\t\t\tevent.layer.toggleEdit();\n\n\t\t\t\t// Add the new overlay to the map and update the field value\n\t\t\t\tdisplay._overlays.push(event.layer);\n\t\t\t\tdisplay.setFieldValue(stringify(event.layer.toGeoJSON(12)));\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Adds a geolocation control to the map, allowing users to set their current position using GPS.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tgeoLocator: function (display) {\n\t\t\tif (navigator.geolocation) {\n\t\t\t\t/**\n\t\t\t\t * Custom Leaflet control for geolocation.\n\t\t\t\t */\n\t\t\t\tL.GeoControl = L.Control.extend({\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tposition: \"bottomleft\", // Position of the control on the map\n\t\t\t\t\t},\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Creates the control container and adds the geolocation button.\n\t\t\t\t\t * @param {L.Map} map - The Leaflet map instance.\n\t\t\t\t\t * @returns {HTMLElement} The control container.\n\t\t\t\t\t */\n\t\t\t\t\tonAdd: function (map) {\n\t\t\t\t\t\tconst container = L.DomUtil.create(\n\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\"leaflet-control leaflet-bar\",\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Create the geolocation button\n\t\t\t\t\t\tconst link = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\tlink.href = \"#\";\n\t\t\t\t\t\tlink.title = \"Click to set your current position from your GPS\";\n\t\t\t\t\t\tlink.innerHTML = '<i class=\"fa-solid fa-location-crosshairs\"></i>';\n\n\t\t\t\t\t\t// Add a click event listener to the button\n\t\t\t\t\t\tL.DomEvent.on(link, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\tlink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\t// Stop any active drawing\n\t\t\t\t\t\t\t\tif (display.webmap.editTools.drawing()) {\n\t\t\t\t\t\t\t\t\tdisplay.webmap.editTools.commitDrawing();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Get the user's current position\n\t\t\t\t\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\t\t\t\t\tfunction (position) {\n\t\t\t\t\t\t\t\t\t\t// Clear existing overlays from the map\n\t\t\t\t\t\t\t\t\t\tSKYVE.Leaflet.clear(display);\n\n\t\t\t\t\t\t\t\t\t\t// Create a marker at the user's current position\n\t\t\t\t\t\t\t\t\t\tconst latlng = [\n\t\t\t\t\t\t\t\t\t\t\tposition.coords.latitude,\n\t\t\t\t\t\t\t\t\t\t\tposition.coords.longitude,\n\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\tconst marker = L.marker(latlng);\n\t\t\t\t\t\t\t\t\t\tmarker.addTo(display.webmap);\n\n\t\t\t\t\t\t\t\t\t\t// Track the marker and update the field value with the WKT string\n\t\t\t\t\t\t\t\t\t\tdisplay._overlays.push(marker);\n\t\t\t\t\t\t\t\t\t\tdisplay.setFieldValue(\n\t\t\t\t\t\t\t\t\t\t\t`POINT (${position.coords.longitude} ${position.coords.latitude})`,\n\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t// Zoom and center the map on the marker\n\t\t\t\t\t\t\t\t\t\tdisplay.webmap.setZoom(15);\n\t\t\t\t\t\t\t\t\t\tdisplay.webmap.panTo(latlng);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfunction (error) {\n\t\t\t\t\t\t\t\t\t\talert(error.message); // Handle geolocation errors\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{ enableHighAccuracy: true }, // Enable high accuracy for GPS\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn container;\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\t// Add the geolocation control to the map\n\t\t\t\tdisplay.webmap.geoControl = new L.GeoControl();\n\t\t\t\tdisplay.webmap.addControl(display.webmap.geoControl);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Enables or disables the drawing and geolocation controls on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {boolean} disabled - whether to disable the controls.\n\t\t */\n\t\tsetDisabled: function (display, disabled) {\n\t\t\tif (display.webmap) {\n\t\t\t\t// Disable or enable the edit control (drawing tools)\n\t\t\t\tif (display.webmap.editControl) {\n\t\t\t\t\tdisplay.webmap.editControl.getContainer().style.display = disabled\n\t\t\t\t\t\t? \"none\"\n\t\t\t\t\t\t: \"block\";\n\t\t\t\t}\n\n\t\t\t\t// Disable or enable the geolocation control\n\t\t\t\tif (display.webmap.geoControl) {\n\t\t\t\t\tdisplay.webmap.geoControl.getContainer().style.display = disabled\n\t\t\t\t\t\t? \"none\"\n\t\t\t\t\t\t: \"block\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds refresh controls to the map, allowing users to set the refresh rate and toggle auto-refresh.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\trefreshControls: function (display) {\n\t\t\t/**\n\t\t\t * Custom Leaflet control for refresh settings.\n\t\t\t */\n\t\t\tL.GeoControl = L.Control.extend({\n\t\t\t\toptions: {\n\t\t\t\t\tposition: \"bottomleft\", // Position of the control on the map\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t * Creates the control container and adds refresh settings.\n\t\t\t\t * @param {L.Map} map - The Leaflet map instance.\n\t\t\t\t * @returns {HTMLElement} The control container.\n\t\t\t\t */\n\t\t\t\tonAdd: function (map) {\n\t\t\t\t\tconst container = L.DomUtil.create(\"div\", \"leaflet-control\");\n\n\t\t\t\t\t// Add the refresh time input and checkbox\n\t\t\t\t\tcontainer.innerHTML = `\n\t\t                <input type=\"number\" min=\"0\" max=\"500\" step=\"1\" value=\"${display.refreshTime}\" size=\"3\" />\n\t\t                <input type=\"checkbox\" ${display._refreshRequired ? \"checked\" : \"\"}><label>Refresh</label>\n\t\t            `;\n\n\t\t\t\t\t// Add event listener for the refresh time input\n\t\t\t\t\tcontainer.children[0].addEventListener(\"change\", function () {\n\t\t\t\t\t\tdisplay.refreshTime = Number(this.value); // Update the refresh time\n\t\t\t\t\t\tif (display._refreshRequired) {\n\t\t\t\t\t\t\tif (display._intervalId) {\n\t\t\t\t\t\t\t\tclearInterval(display._intervalId); // Clear the existing interval\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Set a new interval with the updated refresh time\n\t\t\t\t\t\t\tdisplay._intervalId = setInterval(\n\t\t\t\t\t\t\t\tdisplay.rerender.bind(display),\n\t\t\t\t\t\t\t\tdisplay.refreshTime * 1000,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Add event listener for the refresh toggle checkbox\n\t\t\t\t\tcontainer.children[1].addEventListener(\"click\", function () {\n\t\t\t\t\t\tdisplay._refreshRequired = this.checked; // Update the refresh required flag\n\t\t\t\t\t\tif (display._intervalId) {\n\t\t\t\t\t\t\tclearInterval(display._intervalId); // Clear the existing interval\n\t\t\t\t\t\t\tdisplay._intervalId = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (display._refreshRequired) {\n\t\t\t\t\t\t\tdisplay.rerender(); // Trigger an immediate rerender\n\t\t\t\t\t\t\t// Set a new interval with the current refresh time\n\t\t\t\t\t\t\tdisplay._intervalId = setInterval(\n\t\t\t\t\t\t\t\tdisplay.rerender.bind(display),\n\t\t\t\t\t\t\t\tdisplay.refreshTime * 1000,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn container;\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Add the refresh control to the map\n\t\t\tdisplay.webmap.addControl(new L.GeoControl());\n\t\t},\n\t};\n})();\n","/**\n * Override the `isOffline` method to ensure saving works correctly in Chrome when offline.\n * @returns {boolean} - always returns `false`.\n */\nisc.Offline.isOffline = () => false;\n\nisc.setAutoDraw(false);\nisc.RPCManager.fetchDataPrompt = \"Contacting Server...\";\nisc.RPCManager.saveDataPrompt = \"Contacting Server...\";\nisc.RPCManager.removeDataPrompt = \"Contacting Server...\";\n\n/**\n * Handles RPC errors.\n * @param {Object} response - the RPC response object.\n * @param {Object} request - the RPC request object.\n * @returns {boolean} - returns `false` if the error is handled, otherwise delegates to the superclass.\n */\nisc.RPCManager.handleError = function (response, request) {\n\tif (typeof response.data === \"string\") {\n\t\tisc.warn(response.data);\n\t\treturn false;\n\t}\n\treturn this.Super(\"handleError\", arguments);\n};\n\nisc.RPCManager.addClassMethods({\n\t/**\n\t * Redirects to the login page.\n\t * @param {number} transactionNum - the transaction number.\n\t * @param {Object} rpcRequest - the RPC request object.\n\t * @param {Object} rpcResponse - the RPC response object.\n\t */\n\tloginRequired: function (transactionNum, rpcRequest, rpcResponse) {\n\t\twindow.location.assign(SKYVE.Util.CONTEXT_URL);\n\t},\n});\n\nDate.setShortDisplayFormat(\"toEuropeanShortDate\");\nDate.setNormalDisplayFormat(\"toEuropeanShortDate\");\nDate.setInputFormat(\"DMY\");\n\n/**\n * Extends ListGrid to provide custom filter editor types.\n */\nisc.ListGrid.addProperties({\n\t/**\n\t * Determines the filter editor type for a given field.\n\t * @param {Object} field - the field configuration object.\n\t * @returns {string} - the filter editor type.\n\t */\n\tgetFilterEditorType: function (field) {\n\t\tif (field.filterEditorType !== null) return field.filterEditorType;\n\n\t\tconst isFileType =\n\t\t\tfield.type === this._$binary ||\n\t\t\tfield.type === this._$file ||\n\t\t\tfield.type === this._$imageFile;\n\n\t\tif (isFileType && field.editorType === null) {\n\t\t\tconst ds = this.getDataSource();\n\t\t\tif (\n\t\t\t\tfield.filenameSuppressed ||\n\t\t\t\t(ds && ds.getFilenameField && ds.getFilenameField(field.name) === null)\n\t\t\t) {\n\t\t\t\treturn \"StaticTextItem\";\n\t\t\t} else {\n\t\t\t\treturn \"TextItem\";\n\t\t\t}\n\t\t}\n\n\t\tconst filterEditorConfig = {\n\t\t\t...field,\n\t\t\tcanEdit: field.canFilter !== false,\n\t\t\tlength: null,\n\t\t};\n\t\tif (filterEditorConfig._constructor !== null)\n\t\t\tdelete filterEditorConfig._constructor;\n\t\tif (field.filterEditorType !== null)\n\t\t\tfilterEditorConfig.editorType = field.filterEditorType;\n\t\tObject.assign(filterEditorConfig, field.filterEditorProperties);\n\t\treturn isc.DynamicForm.getEditorType(filterEditorConfig, this);\n\t},\n});\n\n/**\n * Extends ResultSet to handle spatial operators.\n */\nisc.ResultSet.addMethods({\n\tskyveSetCriteria: isc.ResultSet.getPrototype().setCriteria,\n\n\t/**\n\t * Checks if criteria contains any spatial operators\n\t * @param {Object} criteria - The criteria to check\n\t * @returns {boolean} - True if criteria contains spatial operators\n\t */\n\thasSpatialOperator: function (criteria) {\n\t\tif (!criteria) return false;\n\n\t\t// Check if this criteria has a spatial operator\n\t\tif (criteria.operator && criteria.operator.startsWith(\"geo\")) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Recursively check nested criteria\n\t\tif (criteria.criteria) {\n\t\t\treturn criteria.criteria.some((c) => this.hasSpatialOperator(c));\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Sets criteria and forces a fetch for spatial operators.\n\t * @param {Object} newCriteria - the new criteria to set.\n\t * @returns {Object} - the result of the original `setCriteria` method.\n\t */\n\tsetCriteria: function (newCriteria) {\n\t\tconst result = this.skyveSetCriteria(newCriteria);\n\t\tif (newCriteria && this.hasSpatialOperator(newCriteria)) {\n\t\t\tthis.invalidateCache();\n\t\t}\n\t\treturn result;\n\t},\n});\n\nlet resizeTimerEvent = null;\n\n/**\n * Handles page resize events to resize the window stack.\n */\nisc.Page.setEvent(\"resize\", function () {\n\tif (isc.WindowStack) {\n\t\tif (resizeTimerEvent) {\n\t\t\tclearTimeout(resizeTimerEvent);\n\t\t}\n\t\tresizeTimerEvent = setTimeout(() => {\n\t\t\tisc.WindowStack.resize();\n\t\t}, 50);\n\t}\n});\n\n/**\n * Adds search operators for spatial queries.\n */\nconst spatialOperators = [\n\t{\n\t\tID: \"geoEquals\",\n\t\ttitle: \"Equals\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoDisjoint\",\n\t\ttitle: \"Disjoint\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoIntersects\",\n\t\ttitle: \"Intersects\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoTouches\",\n\t\ttitle: \"Touches\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoCrosses\",\n\t\ttitle: \"Crosses\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoWithin\",\n\t\ttitle: \"Within\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoContains\",\n\t\ttitle: \"Contains\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoOverlaps\",\n\t\ttitle: \"Overlaps\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n];\n\nspatialOperators.forEach((operator) => {\n\tisc.DataSource.addSearchOperator({\n\t\t...operator,\n\t\tcondition: () => true,\n\t\tcompareCriteria: () => -1,\n\t});\n});\n\n/**\n * Utility class for business-related operations.\n */\nisc.defineClass(\"BizUtil\");\n\nisc.BizUtil.addClassProperties({\n\t_modules: {}, // Map of modules loaded -> views -> used & unused views\n\t_unusedPickLists: [], // List of picklists to use (for pick views)\n\n\t// Data source for the \"previous values\" mechanism on text fields\n\tCOMPLETE_DATA_SOURCE: isc.RestDataSource.create({\n\t\tdataFormat: \"json\",\n\t\tjsonPrefix: \"\",\n\t\tjsonSuffix: \"\",\n\t\tdataURL: \"smartcomplete\",\n\t\tfields: [{ name: \"value\", type: \"text\" }],\n\t}),\n});\n\nisc.BizUtil.addClassMethods({\n\t_currentView: null, // The view currently displayed\n\n\t/**\n\t * Gets the current view.\n\t * @returns {Object} - The current view.\n\t */\n\tgetCurrentView: function () {\n\t\treturn isc.BizUtil._currentView;\n\t},\n\n\t/**\n\t * Checks if a field type is numeric.\n\t * @param {string} type - the field type.\n\t * @returns {boolean} - true if the field type is numeric.\n\t */\n\tisNumeric: function (type) {\n\t\tconst numericTypes = [\n\t\t\t\"integer\",\n\t\t\t\"float\",\n\t\t\t\"bizDecimal0\",\n\t\t\t\"bizDecimal1\",\n\t\t\t\"bizDecimal10\",\n\t\t\t\"bizDecimal2\",\n\t\t\t\"bizDecimal5\",\n\t\t\t\"bizDollarsAndCents\",\n\t\t\t\"bizIntegerPercentage\",\n\t\t\t\"bizIntegerSeparator\",\n\t\t\t\"bizTwoDecimalPlacesPercentage\",\n\t\t\t\"bizTimeDuration\",\n\t\t];\n\t\treturn numericTypes.includes(type);\n\t},\n\n\t/**\n\t * Checks if a field type is temporal.\n\t * @param {string} type - the field type.\n\t * @returns {boolean} - true if the field type is temporal.\n\t */\n\tisTemporal: function (type) {\n\t\tconst temporalTypes = [\n\t\t\t\"date\",\n\t\t\t\"time\",\n\t\t\t\"datetime\",\n\t\t\t\"bizDate\",\n\t\t\t\"bizTime\",\n\t\t\t\"DD_MM\",\n\t\t\t\"MM_DD\",\n\t\t\t\"MMM_DD\",\n\t\t\t\"YYYY_MM\",\n\t\t\t\"HH_MI\",\n\t\t\t\"HH24_MI\",\n\t\t];\n\t\treturn temporalTypes.some((temporalType) => type.startsWith(temporalType));\n\t},\n\n\t/**\n\t * Adds filter request parameters.\n\t * @param {Object} requestParams - the request parameters to populate.\n\t * @param {Array} filterParams - the filter parameters.\n\t * @param {Object} view - the associated view.\n\t */\n\taddFilterRequestParams: function (requestParams, filterParams, view) {\n\t\tconst instance = view.gather(false);\n\t\tfilterParams.forEach((filterParam) => {\n\t\t\tconst value = view.toDisplay(filterParam.value, instance);\n\t\t\trequestParams[filterParam.name] = value;\n\t\t});\n\t},\n\n\t/**\n\t * Converts filter criteria by renaming `_display_*` fields.\n\t * @param {Object} criteria - the criteria to convert.\n\t */\n\tconvertFilterCriteria: function (criteria) {\n\t\tif (criteria) {\n\t\t\tif (criteria.criteria) {\n\t\t\t\tcriteria.criteria.forEach((criterion) =>\n\t\t\t\t\tisc.BizUtil.convertFilterCriteria(criterion),\n\t\t\t\t);\n\t\t\t} else if (\n\t\t\t\tcriteria.fieldName &&\n\t\t\t\tcriteria.fieldName.startsWith(\"_display_\")\n\t\t\t) {\n\t\t\t\tcriteria.fieldName = criteria.fieldName.substring(9);\n\t\t\t} else {\n\t\t\t\tObject.keys(criteria).forEach((propertyName) => {\n\t\t\t\t\tif (propertyName.startsWith(\"_display_\")) {\n\t\t\t\t\t\tcriteria[propertyName.substring(9)] = criteria[propertyName];\n\t\t\t\t\t\tdelete criteria[propertyName];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Completes filter criteria by adding extra criteria from filterParams.\n\t * @param {Object} criteria - the base criteria.\n\t * @param {Array} filterParams - the filter parameters.\n\t * @param {Object} view - the associated view.\n\t * @returns {Object} - the completed criteria.\n\t */\n\tcompleteFilterCriteria: function (criteria, filterParams, view) {\n\t\tlet result = { ...criteria };\n\t\tif (!result.operator) {\n\t\t\tresult = isc.DataSource.convertCriteria(result, \"substring\");\n\t\t}\n\t\tresult = {\n\t\t\t_constructor: \"AdvancedCriteria\",\n\t\t\toperator: \"and\",\n\t\t\tcriteria: [result],\n\t\t};\n\n\t\tconst instance = view.gather(false);\n\t\tfilterParams.forEach((filterParam) => {\n\t\t\tconst value = view.toDisplay(filterParam.value, instance);\n\t\t\tresult.criteria.push({\n\t\t\t\tfieldName: filterParam.name,\n\t\t\t\toperator: filterParam.operator,\n\t\t\t\tvalue,\n\t\t\t});\n\t\t});\n\n\t\treturn result;\n\t},\n\n\t/**\n\t * Creates an image button.\n\t * @param {string} name - the button name (used for locator purposes).\n\t * @param {string} icon - the icon path.\n\t * @param {boolean} hasDisabledIcon - whether the button has a disabled icon.\n\t * @param {string} tooltip - the button tooltip.\n\t * @param {Function} click - the click handler.\n\t * @returns {Object} - the created button.\n\t */\n\tcreateImageButton: function (name, icon, hasDisabledIcon, tooltip, click) {\n\t\treturn isc.ToolStripButton.create({\n\t\t\tname,\n\t\t\ticon,\n\t\t\ticonAlign: \"center\",\n\t\t\tshowDisabledIcon: hasDisabledIcon,\n\t\t\tshowDownIcon: false,\n\t\t\tcanHover: true,\n\t\t\tgetHoverHTML: () => tooltip,\n\t\t\tclick,\n\t\t});\n\t},\n\n\t/**\n\t * Creates a CodeMirror editor for syntax highlighting.\n\t * @param {string} scVar - the smart client variable.\n\t * @param {string} binding - the binding for the text area.\n\t * @param {string} languageMimeType - the language mime type for syntax highlighting.\n\t *\n\t * @see https://codemirror.net/LICENSE\n\t */\n\tcreateCodeMirror: function (scVar, binding, languageMimeType) {\n\t\tconst loadResources = async () => {\n\t\t\tawait SKYVE.Util.loadCSS(`codemirror/codemirror.css?v=${SKYVE.Util.v}`);\n\t\t\tawait SKYVE.Util.loadCSS(`codemirror/base16-dark.css?v=${SKYVE.Util.v}`);\n\t\t\tawait SKYVE.Util.loadJS(`codemirror/codemirror.js?v=${SKYVE.Util.v}`);\n\t\t\tawait SKYVE.Util.loadJS(`codemirror/css/css.js?v=${SKYVE.Util.v}`);\n\t\t\tawait SKYVE.Util.loadJS(\n\t\t\t\t`codemirror/htmlmixed/htmlmixed.js?v=${SKYVE.Util.v}`,\n\t\t\t);\n\t\t\tawait SKYVE.Util.loadJS(`codemirror/sql/sql.js?v=${SKYVE.Util.v}`);\n\t\t\tawait SKYVE.Util.loadJS(`codemirror/xml/xml.js?v=${SKYVE.Util.v}`);\n\n\t\t\tconst templates = document.getElementsByName(binding);\n\t\t\tconst templateElement =\n\t\t\t\ttemplates &&\n\t\t\t\ttemplates.length > 0 &&\n\t\t\t\ttemplates[0].nodeName.toLowerCase() === \"textarea\"\n\t\t\t\t\t? templates[0]\n\t\t\t\t\t: undefined;\n\n\t\t\tif (templateElement) {\n\t\t\t\ttemplateElement.setAttribute(\"autocapitalize\", \"off\");\n\t\t\t\ttemplateElement.setAttribute(\"spellcheck\", \"false\");\n\n\t\t\t\tconst editor = CodeMirror.fromTextArea(templateElement, {\n\t\t\t\t\tmode: languageMimeType,\n\t\t\t\t\tlineNumbers: true,\n\t\t\t\t\ttheme: \"base16-dark\",\n\t\t\t\t});\n\t\t\t\teditor.setSize(600, null);\n\t\t\t\teditor.on(\"change\", () => editor.save());\n\t\t\t}\n\t\t};\n\n\t\tloadResources();\n\t},\n\n\t/**\n\t * Creates a split button.\n\t * @param {string} buttonTitle - the title of the main button.\n\t * @param {string} buttonIcon - the icon for the main button.\n\t * @param {boolean} buttonHasDisabledIcon - whether the main button has a disabled icon.\n\t * @param {string} buttonTooltip - the tooltip for the main button.\n\t * @param {Function} buttonClick - the click handler for the main button.\n\t * @param {string} splitTooltip - the tooltip for the split button.\n\t * @param {Object} splitTarget - the target for the split button.\n\t * @param {Array} splitItems - the menu items for the split button.\n\t * @returns {Object} - the created split button.\n\t */\n\tcreateSplitButton: function (\n\t\tbuttonTitle,\n\t\tbuttonIcon,\n\t\tbuttonHasDisabledIcon,\n\t\tbuttonTooltip,\n\t\tbuttonClick,\n\t\tsplitTooltip,\n\t\tsplitTarget,\n\t\tsplitItems,\n\t) {\n\t\treturn isc.HLayout.create({\n\t\t\talign: \"right\",\n\t\t\theight: 1,\n\t\t\tmembersMargin: 1,\n\t\t\tmembers: [\n\t\t\t\tisc.IButton.create({\n\t\t\t\t\tautoFit: true,\n\t\t\t\t\ttitle: buttonTitle,\n\t\t\t\t\ticon: buttonIcon,\n\t\t\t\t\tshowDisabledIcon: buttonHasDisabledIcon,\n\t\t\t\t\tcanHover: true,\n\t\t\t\t\tgetHoverHTML: () => buttonTooltip,\n\t\t\t\t\tclick: buttonClick,\n\t\t\t\t}),\n\t\t\t\tisc.MenuButton.create({\n\t\t\t\t\ttitle: null,\n\t\t\t\t\twidth: 26,\n\t\t\t\t\talignMenuLeft: false,\n\t\t\t\t\tcanHover: true,\n\t\t\t\t\tgetHoverHTML: () => splitTooltip,\n\t\t\t\t\tmenu: isc.Menu.create({\n\t\t\t\t\t\tautoDraw: false,\n\t\t\t\t\t\tshowShadow: true,\n\t\t\t\t\t\tshadowDepth: 10,\n\t\t\t\t\t\ttarget: splitTarget,\n\t\t\t\t\t\tdata: splitItems,\n\t\t\t\t\t}),\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t},\n\n\t/**\n\t * Creates an upload button.\n\t * @param {Object} contentFormItem - the form item for the upload.\n\t * @param {boolean} image - whether the upload is for an image.\n\t * @param {boolean} showMarkup - whether markup is enabled.\n\t * @returns {Object} - the created upload button.\n\t */\n\tcreateUploadButton: function (contentFormItem, image, showMarkup) {\n\t\tconst menu = [\n\t\t\t{\n\t\t\t\ttitle: \"Clear\",\n\t\t\t\ticon: \"icons/delete.png\",\n\t\t\t\tclick: () => contentFormItem.setValue(null),\n\t\t\t\tenableIf: () => contentFormItem.getValue() !== null,\n\t\t\t},\n\t\t];\n\n\t\tif (showMarkup) {\n\t\t\tmenu.push({\n\t\t\t\ttitle: \"Mark Up\",\n\t\t\t\ticon: \"icons/edit.png\",\n\t\t\t\tclick: function () {\n\t\t\t\t\tconst instance = contentFormItem.form._view.gather(false);\n\t\t\t\t\tlet url = `imageMarkup.xhtml?_n=${contentFormItem.name.replaceAll(\n\t\t\t\t\t\t\"_\",\n\t\t\t\t\t\t\".\",\n\t\t\t\t\t)}&_c=${instance._c}&_id=${contentFormItem.getValue()}`;\n\t\t\t\t\tif (contentFormItem.form._view._b) {\n\t\t\t\t\t\turl += `&_b=${contentFormItem.form._view._b.replaceAll(\"_\", \".\")}`;\n\t\t\t\t\t}\n\t\t\t\t\tisc.WindowStack.popup(null, \"Mark Up Image\", true, [\n\t\t\t\t\t\tisc.HTMLPane.create({\n\t\t\t\t\t\t\tcontentsType: \"page\",\n\t\t\t\t\t\t\tcontents: \"Loading Page...\",\n\t\t\t\t\t\t\tcontentsURL: url,\n\t\t\t\t\t\t}),\n\t\t\t\t\t]);\n\t\t\t\t},\n\t\t\t\tenableIf: () => contentFormItem.getValue() !== null,\n\t\t\t});\n\t\t}\n\n\t\treturn isc.BizUtil.createSplitButton(\n\t\t\t\"Upload\",\n\t\t\tnull,\n\t\t\tfalse,\n\t\t\t\"Upload content\",\n\t\t\tfunction () {\n\t\t\t\tconst instance = contentFormItem.form._view.gather(false);\n\t\t\t\tlet url = `${\n\t\t\t\t\timage ? \"image\" : \"content\"\n\t\t\t\t}Upload.xhtml?_n=${contentFormItem.name.replaceAll(\"_\", \".\")}&_c=${\n\t\t\t\t\tinstance._c\n\t\t\t\t}`;\n\t\t\t\tif (contentFormItem.form._view._b) {\n\t\t\t\t\turl += `&_b=${contentFormItem.form._view._b.replaceAll(\"_\", \".\")}`;\n\t\t\t\t}\n\t\t\t\tisc.WindowStack.popup(\n\t\t\t\t\tnull,\n\t\t\t\t\timage ? \"Upload Image\" : \"Upload Content\",\n\t\t\t\t\ttrue,\n\t\t\t\t\t[\n\t\t\t\t\t\tisc.HTMLPane.create({\n\t\t\t\t\t\t\tcontentsType: \"page\",\n\t\t\t\t\t\t\tcontents: \"Loading Page...\",\n\t\t\t\t\t\t\tcontentsURL: url,\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t);\n\t\t\t},\n\t\t\t\"Other Options\",\n\t\t\tnull,\n\t\t\tmenu,\n\t\t);\n\t},\n\n\t/**\n\t * Gets an edit view for a module and document.\n\t * @param {string} moduleName - the module name.\n\t * @param {string} documentName - the document name.\n\t * @param {Function} onViewCreated - the callback when the view is created.\n\t */\n\tgetEditView: function (moduleName, documentName, onViewCreated) {\n\t\tif (!isc.BizUtil._modules[moduleName]) {\n\t\t\tisc.BizUtil._modules[moduleName] = {};\n\t\t\twindow[moduleName] = {};\n\t\t}\n\n\t\tconst documentEntry = isc.BizUtil._modules[moduleName][documentName];\n\t\tif (documentEntry) {\n\t\t\tconst view =\n\t\t\t\tdocumentEntry._unused.pop() ||\n\t\t\t\teval(`${moduleName}.create${documentName}()`);\n\t\t\tview._moduleName = moduleName;\n\t\t\tview._documentName = documentName;\n\t\t\tdocumentEntry._used.push(view);\n\t\t\tonViewCreated(view);\n\t\t} else {\n\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\tshowPrompt: true,\n\t\t\t\tevalResult: true,\n\t\t\t\thttpMethod: \"GET\",\n\t\t\t\tactionURL: `${SKYVE.Util.CONTEXT_URL}smartgen?_mod=${moduleName}&_doc=${documentName}`,\n\t\t\t\tcallback: function () {\n\t\t\t\t\tisc.BizUtil._modules[moduleName][documentName] = {\n\t\t\t\t\t\t_used: [],\n\t\t\t\t\t\t_unused: [],\n\t\t\t\t\t};\n\t\t\t\t\tisc.BizUtil.getEditView(moduleName, documentName, onViewCreated);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Relinquishes an edit view.\n\t * @param {Object} view - the view to relinquish.\n\t */\n\trelinquishEditView: function (view) {\n\t\tconst documentEntry =\n\t\t\tisc.BizUtil._modules[view._moduleName][view._documentName];\n\t\tdocumentEntry._used.remove(view);\n\t\tdocumentEntry._unused.push(view);\n\t},\n\n\t/**\n\t * Gets a pick list.\n\t * @param {Object} lookupDescription - the lookup description.\n\t * @param {Array} filterParams - the filter parameters.\n\t * @param {Object} view - the associated view.\n\t * @returns {Object} - the pick list.\n\t */\n\tgetPickList: function (lookupDescription, filterParams, view) {\n\t\tconst result =\n\t\t\tisc.BizUtil._unusedPickLists.pop() ||\n\t\t\tisc.BizListGrid.create({ isPickList: true });\n\t\tresult.setLookup(lookupDescription, filterParams, view);\n\t\treturn result;\n\t},\n\n\t/**\n\t * Relinquishes a pick list.\n\t * TODO - Why arent the fields defined when I used a cached BizListGrid?\n\t * @param {Object} pickList - the pick list to relinquish.\n\t */\n\trelinquishPickList: function (pickList) {\n\t\tpickList.destroy();\n\t},\n\n\t/**\n\t * Creates a list grid.\n\t * @returns {Object} - the created list grid.\n\t */\n\tcreateListGrid: function () {\n\t\treturn isc.BizListGrid.create({ margin: 2 });\n\t},\n\n\t/**\n\t * Creates a calendar.\n\t * @returns {Object} - the created calendar.\n\t */\n\tcreateCalendar: function () {\n\t\treturn isc.Calendar.create({\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tscrollToWorkDay: true,\n\t\t\tdata: [],\n\t\t});\n\t},\n\n\t/**\n\t * Creates a tree grid.\n\t * @returns {Object} - the created tree grid.\n\t */\n\tcreateTreeGrid: function () {\n\t\treturn isc.BizListGrid.create({ margin: 2, isTree: true });\n\t},\n\n\t/**\n\t * Creates a map.\n\t * @returns {Object} - the created map.\n\t */\n\tcreateMap: function () {\n\t\treturn isc.BizMap.create();\n\t},\n\n\t/**\n\t * Opens a popup frame.\n\t * @param {string} url - the URL to open.\n\t * @param {string} name - the name of the popup.\n\t * @param {number} width - the width of the popup.\n\t * @param {number} height - the height of the popup.\n\t */\n\tpopupFrame: function (url, name, width, height) {\n\t\tconst win = window.open(\n\t\t\turl,\n\t\t\tname,\n\t\t\t`width=${width},height=${height},resizable=yes,scrollbars=no,toolbar=no,location=no,directories=no,status=yes,menubar=no,copyhistory=no`,\n\t\t);\n\t\twin.focus();\n\t},\n\n\t/**\n\t * Displays growl notifications.\n\t * @param {Array} msgs - the messages to display.\n\t * @param {number} life - the duration of the notification.\n\t * @param {boolean} sticky - whether the notification is sticky.\n\t */\n\tgrowl: function (msgs, life, sticky) {\n\t\tPrimeFaces.cw(\"Growl\", \"growl\", {\n\t\t\tid: \"growl\",\n\t\t\twidgetVar: \"growl\",\n\t\t\tlife: life || 6000,\n\t\t\tsticky: sticky || false,\n\t\t\tmsgs,\n\t\t});\n\t},\n\n\t/**\n\t * Handles push messages.\n\t * @param {Array} pushMessage - the push messages to handle.\n\t */\n\tonPushMessage: function (pushMessage) {\n\t\tconst growls = [];\n\t\tconst messages = [];\n\t\tlet warn = false;\n\n\t\tpushMessage.forEach((m) => {\n\t\t\tif (m.type === \"g\") {\n\t\t\t\tgrowls.push({ severity: m.severity, summary: m.message });\n\t\t\t} else if (m.type === \"m\") {\n\t\t\t\tif (m.severity !== \"info\") warn = true;\n\t\t\t\tmessages.push(m.message);\n\t\t\t} else if (m.type === \"r\") {\n\t\t\t\tconst view = isc.BizUtil.getCurrentView();\n\t\t\t\tif (view && view.rerender) view.rerender();\n\t\t\t} else if (m.type === \"j\") {\n\t\t\t\twindow[m.method](m.argument);\n\t\t\t}\n\t\t});\n\n\t\tif (growls.length > 0) isc.BizUtil.growl(growls);\n\t\tif (messages.length > 0) {\n\t\t\tconst markup =\n\t\t\t\tmessages.length > 1\n\t\t\t\t\t? `<ul>${messages.map((msg) => `<li>${msg}</li>`).join(\"\")}</ul>`\n\t\t\t\t\t: messages[0];\n\t\t\tif (warn) isc.warn(markup);\n\t\t\telse isc.say(markup);\n\t\t}\n\t},\n});\n","// Define our extra date and time formats\nisc.addMethods(Date.prototype, {\n\t/**\n\t * Formats the date as \"HH:MM\" in 24-hour format.\n\t * @returns {string} - the formatted time string.\n\t */\n\ttoHH24_MI: function () {\n\t\treturn `${this.getHours().stringify()}:${this.getMinutes().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"HH:MM AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted time string.\n\t */\n\ttoHH_MI: function () {\n\t\tlet hours = this.getHours();\n\t\tlet ampm = \" AM\";\n\t\tlet hoursString = hours.stringify();\n\n\t\tif (hours === 0) {\n\t\t\thoursString = \"12\";\n\t\t} else if (hours === 12) {\n\t\t\tampm = \" PM\";\n\t\t} else if (hours > 12) {\n\t\t\tampm = \" PM\";\n\t\t\thours -= 12;\n\t\t\thoursString = hours.stringify();\n\t\t}\n\n\t\treturn `${hoursString}:${this.getMinutes().stringify()}${ampm}`;\n\t},\n\n\t/**\n\t * Formats the date as \"HH:MM:SS\" in 24-hour format.\n\t * @returns {string} - the formatted time string.\n\t */\n\ttoHH24_MI_SS: function () {\n\t\treturn `${this.toHH24_MI()}:${this.getSeconds().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"HH:MM:SS AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted time string.\n\t */\n\ttoHH_MI_SS: function () {\n\t\tconst time = this.toHH_MI();\n\t\treturn `${time.substring(0, time.length - 3)}:${this.getSeconds().stringify()}${time.substring(time.length - 3)}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD/MM/YYYY\".\n\t * @returns {string} - the formatted date string.\n\t */\n\ttoDD_MM_YYYY: function () {\n\t\treturn `${this.getDate().stringify()}/${(this.getMonth() + 1).stringify()}/${this.getFullYear().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD/MM/YYYY HH:MM\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MM_YYYY_HH24_MI: function () {\n\t\treturn `${this.toDD_MM_YYYY()} ${this.toHH24_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD/MM/YYYY HH:MM AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MM_YYYY_HH_MI: function () {\n\t\treturn `${this.toDD_MM_YYYY()} ${this.toHH_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD/MM/YYYY HH:MM:SS\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MM_YYYY_HH24_MI_SS: function () {\n\t\treturn `${this.toDD_MM_YYYY()} ${this.toHH24_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD/MM/YYYY HH:MM:SS AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MM_YYYY_HH_MI_SS: function () {\n\t\treturn `${this.toDD_MM_YYYY()} ${this.toHH_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD-MMM-YYYY\".\n\t * @returns {string} - the formatted date string.\n\t */\n\ttoDD_MMM_YYYY: function () {\n\t\tconst shortMonthNames = [\n\t\t\t\"Jan\",\n\t\t\t\"Feb\",\n\t\t\t\"Mar\",\n\t\t\t\"Apr\",\n\t\t\t\"May\",\n\t\t\t\"Jun\",\n\t\t\t\"Jul\",\n\t\t\t\"Aug\",\n\t\t\t\"Sep\",\n\t\t\t\"Oct\",\n\t\t\t\"Nov\",\n\t\t\t\"Dec\",\n\t\t];\n\t\treturn `${this.getDate().stringify()}-${shortMonthNames[this.getMonth()]}-${this.getFullYear().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD-MMM-YYYY HH:MM\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MMM_YYYY_HH24_MI: function () {\n\t\treturn `${this.toDD_MMM_YYYY()} ${this.toHH24_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD-MMM-YYYY HH:MM AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MMM_YYYY_HH_MI: function () {\n\t\treturn `${this.toDD_MMM_YYYY()} ${this.toHH_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD-MMM-YYYY HH:MM:SS\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MMM_YYYY_HH24_MI_SS: function () {\n\t\treturn `${this.toDD_MMM_YYYY()} ${this.toHH24_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD-MMM-YYYY HH:MM:SS AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MMM_YYYY_HH_MI_SS: function () {\n\t\treturn `${this.toDD_MMM_YYYY()} ${this.toHH_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MM/DD/YYYY\".\n\t * @returns {string} - the formatted date string.\n\t */\n\ttoMM_DD_YYYY: function () {\n\t\treturn `${(this.getMonth() + 1).stringify()}/${this.getDate().stringify()}/${this.getFullYear().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MM/DD/YYYY HH:MM\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMM_DD_YYYY_HH24_MI: function () {\n\t\treturn `${this.toMM_DD_YYYY()} ${this.toHH24_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MM/DD/YYYY HH:MM AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMM_DD_YYYY_HH_MI: function () {\n\t\treturn `${this.toMM_DD_YYYY()} ${this.toHH_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MM/DD/YYYY HH:MM:SS\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMM_DD_YYYY_HH24_MI_SS: function () {\n\t\treturn `${this.toMM_DD_YYYY()} ${this.toHH24_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MM/DD/YYYY HH:MM:SS AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMM_DD_YYYY_HH_MI_SS: function () {\n\t\treturn `${this.toMM_DD_YYYY()} ${this.toHH_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MMM-DD-YYYY\".\n\t * @returns {string} - the formatted date string.\n\t */\n\ttoMMM_DD_YYYY: function () {\n\t\tconst shortMonthNames = [\n\t\t\t\"Jan\",\n\t\t\t\"Feb\",\n\t\t\t\"Mar\",\n\t\t\t\"Apr\",\n\t\t\t\"May\",\n\t\t\t\"Jun\",\n\t\t\t\"Jul\",\n\t\t\t\"Aug\",\n\t\t\t\"Sep\",\n\t\t\t\"Oct\",\n\t\t\t\"Nov\",\n\t\t\t\"Dec\",\n\t\t];\n\t\treturn `${shortMonthNames[this.getMonth()]}-${this.getDate().stringify()}-${this.getFullYear().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MMM-DD-YYYY HH:MM\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMMM_DD_YYYY_HH24_MI: function () {\n\t\treturn `${this.toMMM_DD_YYYY()} ${this.toHH24_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MMM-DD-YYYY HH:MM AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMMM_DD_YYYY_HH_MI: function () {\n\t\treturn `${this.toMMM_DD_YYYY()} ${this.toHH_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MMM-DD-YYYY HH:MM:SS\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMMM_DD_YYYY_HH24_MI_SS: function () {\n\t\treturn `${this.toMMM_DD_YYYY()} ${this.toHH24_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MMM-DD-YYYY HH:MM:SS AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMMM_DD_YYYY_HH_MI_SS: function () {\n\t\treturn `${this.toMMM_DD_YYYY()} ${this.toHH_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"YYYY/MM/DD\".\n\t * @returns {string} - the formatted date string.\n\t */\n\ttoYYYY_MM_DD: function () {\n\t\treturn `${this.getFullYear().stringify()}/${(this.getMonth() + 1).stringify()}/${this.getDate().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"YYYY/MM/DD HH:MM\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoYYYY_MM_DD_HH24_MI: function () {\n\t\treturn `${this.toYYYY_MM_DD()} ${this.toHH24_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"YYYY/MM/DD HH:MM AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoYYYY_MM_DD_HH_MI: function () {\n\t\treturn `${this.toYYYY_MM_DD()} ${this.toHH_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"YYYY/MM/DD HH:MM:SS\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoYYYY_MM_DD_HH24_MI_SS: function () {\n\t\treturn `${this.toYYYY_MM_DD()} ${this.toHH24_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"YYYY/MM/DD HH:MM:SS AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoYYYY_MM_DD_HH_MI_SS: function () {\n\t\treturn `${this.toYYYY_MM_DD()} ${this.toHH_MI_SS()}`;\n\t},\n});\n\n/**\n * Implements the BizDateItem widget.\n * Extends DateItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizDateItem\", \"DateItem\");\n\nisc.BizDateItem.addClassMethods({\n\t/**\n\t * Replaces a month name in a string with its corresponding ordinal number.\n\t * @param {string} value - the input string containing the month name.\n\t * @param {string} month - the month name to replace.\n\t * @returns {string} - the updated string with the month replaced by its ordinal.\n\t */\n\t_replaceMonthWithOrdinal: function (value, month) {\n\t\tconst lowerMonth = month.toLowerCase();\n\t\tconst monthMap = {\n\t\t\tjan: \"1\",\n\t\t\tfeb: \"2\",\n\t\t\tmar: \"3\",\n\t\t\tapr: \"4\",\n\t\t\tmay: \"5\",\n\t\t\tjun: \"6\",\n\t\t\tjul: \"7\",\n\t\t\taug: \"8\",\n\t\t\tsep: \"9\",\n\t\t\toct: \"10\",\n\t\t\tnov: \"11\",\n\t\t\tdec: \"12\",\n\t\t};\n\n\t\tfor (const [key, ordinal] of Object.entries(monthMap)) {\n\t\t\tif (lowerMonth.startsWith(key)) {\n\t\t\t\treturn value.replaceAll(month, ordinal);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t},\n\n\t/**\n\t * Parses an input value into a Date object based on the provided date pattern.\n\t * @param {string|Date} value - the input value to parse.\n\t * @param {string} datePattern - the date pattern to use for parsing.\n\t * @returns {Date|null} - the parsed Date object, or null if parsing fails.\n\t */\n\tparseInput: function (value, datePattern) {\n\t\tif (isc.isA.Date(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = value.trim();\n\n\t\t\t// Handle US date format (MMM-DD-YYYY)\n\t\t\tif (datePattern && datePattern.startsWith(\"toMMM\")) {\n\t\t\t\tconst match = /^([A-Za-z]+)[^A-Za-z0-9]\\d?\\d.*$/.exec(value); // Month word, 1 or 2 digits, anything\n\t\t\t\tif (match) {\n\t\t\t\t\tvalue = this._replaceMonthWithOrdinal(value, match[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Handle other formats (DD-MMM-YYYY)\n\t\t\t\tconst match = /^\\d?\\d[^A-Za-z0-9]([A-Za-z]+).*$/.exec(value); // 1 or 2 digits, anything, month word\n\t\t\t\tif (match) {\n\t\t\t\t\tvalue = this._replaceMonthWithOrdinal(value, match[1]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Parse schema date (e.g., 9999-99-99)\n\t\t\tlet result = /^\\d{4}-\\d\\d-.*$/.test(value)\n\t\t\t\t? isc.DateUtil.parseSchemaDate(value)\n\t\t\t\t: null;\n\n\t\t\tif (!result) {\n\t\t\t\t// Parse based on the date pattern\n\t\t\t\tconst format = datePattern?.startsWith(\"toMM\")\n\t\t\t\t\t? \"MDY\"\n\t\t\t\t\t: datePattern?.startsWith(\"toYYYY\")\n\t\t\t\t\t\t? \"YMD\"\n\t\t\t\t\t\t: \"DMY\";\n\t\t\t\tresult = isc.DateUtil.parseInput(value, format, 50, true);\n\n\t\t\t\t// Handle cases where only day and month are provided\n\t\t\t\tif (!result && /^\\d?\\d[^A-Za-z0-9]\\d?\\d$/.test(value)) {\n\t\t\t\t\tconst currentYear = Date.create().getFullYear().stringify();\n\t\t\t\t\tresult = isc.DateUtil.parseInput(\n\t\t\t\t\t\tformat === \"MDY\"\n\t\t\t\t\t\t\t? `${value} ${currentYear}`\n\t\t\t\t\t\t\t: format === \"YMD\"\n\t\t\t\t\t\t\t\t? `${currentYear} ${value}`\n\t\t\t\t\t\t\t\t: `${value} ${currentYear}`,\n\t\t\t\t\t\tformat,\n\t\t\t\t\t\t50,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\n\t * Formats a Date object into a string based on the provided format.\n\t * @param {Date|string} value - the value to format (can be a Date or string).\n\t * @param {string} format - the format to use for formatting.\n\t * @returns {string} - the formatted date string, or the original value if it's not a Date.\n\t */\n\tformat: function (value, format) {\n\t\tif (!isc.isA.Date(value)) {\n\t\t\treturn value;\n\t\t}\n\t\treturn value[format]();\n\t},\n});\n\nisc.BizDateItem.addProperties({\n\tenforceDate: true, // Whether to validate date input\n\tchangeOnBlur: true, // Whether to perform validation on field blur\n\tchangeOnKeypress: false, // Whether to perform validation on key press\n\twidth: 100,\n\tuseTextField: true, // Whether to use a text field for date input\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"DD MM(M) YY(YY)\",\n\ttextFieldProperties: { selectOnFocus: true },\n\tshowPickerTimeItem: false,\n\tdateFormatter: \"toDD_MM_YYYY\",\n\n\t/**\n\t * Parses a date value using the configured date formatter.\n\t * @param {string|Date} value - the value to parse.\n\t * @returns {Date|null} - the parsed Date object, or null if parsing fails.\n\t */\n\tparseDate: function (value) {\n\t\treturn isc.BizDateItem.parseInput(value, this.dateFormatter);\n\t},\n});\n\nisc.BizDateItem.addMethods({\n\t/**\n\t * Maps a raw value to a display-friendly string.\n\t * @param {string|Date|null} value - the value to map.\n\t * @returns {string} - the formatted date string, or an empty string if the value is null.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value === null || value === undefined) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Date(value)) {\n\t\t\tvalue = isc.BizDateItem.parseInput(value, this.dateFormatter);\n\t\t}\n\t\treturn isc.BizDateItem.format(value, this.dateFormatter);\n\t},\n\n\t/**\n\t * Maps a display-friendly string to a raw value (Date object or null).\n\t * @param {string} value - the display value to map.\n\t * @returns {Date|null} - the parsed Date object, or null if the input is empty.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\tvalue = null;\n\t\t} else {\n\t\t\tvalue = isc.BizDateItem.parseInput(value, this.dateFormatter);\n\t\t}\n\t\treturn value;\n\t},\n\n\t/**\n\t * Ensures the value displayed in the element matches the saved value and is formatted correctly.\n\t * Overrides the default `updateValue` method.\n\t */\n\tupdateValue: function () {\n\t\t// Map the value to a valid date\n\t\tthis.Super(\"updateValue\", arguments);\n\n\t\t// Update the displayed string so it's formatted correctly\n\t\tthis.setElementValue(this.mapValueToDisplay(this.getValue()));\n\t},\n\n\t/**\n\t * Sets the value of the date item. If the input is a string, it is parsed into a Date object.\n\t * Overrides the default `setValue` method.\n\t * @param {string|Date} newValue - the new value to set.\n\t * @returns {Object} - the instance of the date item.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (typeof newValue === \"string\") {\n\t\t\tnewValue = isc.BizDateItem.parseInput(newValue, this.dateFormatter);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizDate\",\n\tinheritsFrom: \"date\",\n\teditorType: \"BizDateItem\",\n\n\t/**\n\t * Formats the internal date value for editing.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} form - the form containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal date value for normal display.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} component - the component containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Formats the internal date value for short display.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} component - the component containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MM_YYYY\");\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MM_YYYY\",\n\tinheritsFrom: \"bizDate\",\n});\n\n/**\n * Registeres the DD_MMM_YYYY_Item.\n * Extends BizDateItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MMM_YYYY_Item\", \"BizDateItem\");\n\nisc.DD_MMM_YYYY_Item.addProperties({\n\tdateFormatter: \"toDD_MMM_YYYY\",\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MMM_YYYY\",\n\tinheritsFrom: \"bizDate\",\n\teditorType: \"DD_MMM_YYYY_Item\",\n\n\t/**\n\t * Formats the internal date value for short display in the \"DD MMM YYYY\" format.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} component - the component containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MMM_YYYY\");\n\t},\n});\n\n/**\n * Registers MM_DD_YYYY_Item.\n * Extends BizDateItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MM_DD_YYYY_Item\", \"BizDateItem\");\n\nisc.MM_DD_YYYY_Item.addProperties({\n\thint: \"MM(M) DD YY(YY)\",\n\tdateFormatter: \"toMM_DD_YYYY\",\n});\n\nisc.SimpleType.create({\n\tname: \"MM_DD_YYYY\",\n\tinheritsFrom: \"bizDate\",\n\teditorType: \"MM_DD_YYYY_Item\",\n\n\t/**\n\t * Formats the internal date value for short display in the \"MM DD YYYY\" format.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} component - the component containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMM_DD_YYYY\");\n\t},\n});\n\n/**\n * Registers MMM_DD_YYYY_Item.\n * Extends BizDateItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MMM_DD_YYYY_Item\", \"BizDateItem\");\n\nisc.MMM_DD_YYYY_Item.addProperties({\n\thint: \"MM(M) DD YY(YY)\",\n\tdateFormatter: \"toMMM_DD_YYYY\",\n});\n\nisc.SimpleType.create({\n\tname: \"MMM_DD_YYYY\",\n\tinheritsFrom: \"bizDate\",\n\teditorType: \"MMM_DD_YYYY_Item\",\n\n\t/**\n\t * Formats the internal date value for short display in the \"MMM DD YYYY\" format.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} component - the component containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMMM_DD_YYYY\");\n\t},\n});\n\n/**\n * Registers YYYY_MM_DD_Item.\n * Extends BizDateItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"YYYY_MM_DD_Item\", \"BizDateItem\");\n\nisc.YYYY_MM_DD_Item.addProperties({\n\thint: \"YY(YY) MM(M) DD\",\n\tdateFormatter: \"toYYYY_MM_DD\",\n});\n\nisc.SimpleType.create({\n\tname: \"YYYY_MM_DD\",\n\tinheritsFrom: \"bizDate\",\n\teditorType: \"YYYY_MM_DD_Item\",\n\n\t/**\n\t * Formats the internal date value for short display in the \"YYYY-MM-DD\" format.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} component - the component containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toYYYY_MM_DD\");\n\t},\n});\n\n/**\n * Implements the BizDateTimeItem widget.\n * Extends BizTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizDateTimeItem\", \"DateTimeItem\");\n\nisc.BizDateTimeItem.addProperties({\n\tenforceDate: true,\n\tchangeOnBlur: true, // Perform validation on field blur\n\tchangeOnKeypress: false, // Don't perform validation on key press\n\twidth: 200,\n\tuseTextField: true,\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"DD MM(M) YY(YY) HH:MI AM/PM\",\n\ttextFieldProperties: { selectOnFocus: true },\n\tshowPickerTimeItem: true,\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: false },\n\tdateFormatter: \"toDD_MM_YYYY_HH_MI\",\n\n\t/**\n\t * Parses a date string input using the specified date formatter.\n\t * @param {string} value - the date string to be parsed.\n\t * @returns {Date|null} - the parsed date object or null if parsing fails.\n\t */\n\tparseDate: function (value) {\n\t\treturn isc.BizDateItem.parseInput(value, this.dateFormatter);\n\t},\n});\n\nisc.BizDateTimeItem.addMethods({\n\t/**\n\t * Maps a value to its display representation.\n\t * If the value is null, returns an empty string.\n\t * If the value is not a Date, it attempts to parse it using the configured date formatter.\n\t *\n\t * @param {Date|string|null} value - the value to be mapped.\n\t * @returns {string} - the formatted display string.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Date(value)) {\n\t\t\tvalue = isc.BizDateItem.parseInput(value, this.dateFormatter);\n\t\t}\n\t\treturn isc.BizDateItem.format(value, this.dateFormatter);\n\t},\n\n\t/**\n\t * Maps a display string to its corresponding value.\n\t * If the input is an empty string, it returns null.\n\t * Otherwise, it parses the input string into a Date object.\n\t *\n\t * @param {string} value - the display string to be converted.\n\t * @returns {Date|null} - the parsed Date object or null if the input was empty.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\treturn null;\n\t\t}\n\t\treturn isc.BizDateItem.parseInput(value, this.dateFormatter);\n\t},\n\n\t/**\n\t * Ensures the displayed value in the element matches the saved value and is correctly formatted.\n\t * Overrides the default `updateValue` method.\n\t */\n\tupdateValue: function () {\n\t\t// Call the superclass implementation to ensure value is mapped to a valid float\n\t\tthis.Super(\"updateValue\", arguments);\n\t\t// Update the displayed string with the correctly formatted value\n\t\tthis.setElementValue(this.mapValueToDisplay(this.getValue()));\n\t},\n\n\t/**\n\t * Sets a new value, mapping strings to the appropriate date before saving.\n\t * This ensures that string inputs are parsed properly since they won't go through `mapDisplayToValue`.\n\t * Overrides the default `setValue` method.\n\t *\n\t * @param {string|Date|null} newValue - the new value to be set.\n\t * @returns {*} - the result of calling the superclass `setValue` method.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizDateItem.parseInput(newValue, this.dateFormatter);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizDateTime\",\n\tinheritsFrom: \"dateTime\",\n\teditorType: \"BizDateTimeItem\",\n\n\t/**\n\t * Formats the internal value for editing.\n\t * Delegates to `shortDisplayFormatter` to ensure consistent formatting.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing the field.\n\t * @param {Object} record - the record being edited.\n\t * @returns {string} - the formatted value for editing.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal display.\n\t * Delegates to `shortDisplayFormatter` to ensure consistent formatting.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component displaying the value.\n\t * @param {Object} record - the record associated with the value.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Formats the internal value using the `toDD_MM_YYYY_HH_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component displaying the value.\n\t * @param {Object} record - the record associated with the value.\n\t * @returns {string} - the formatted string in `DD_MM_YYYY_HH_MI` format.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MM_YYYY_HH_MI\");\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MM_YYYY_HH_MI\",\n\tinheritsFrom: \"bizDateTime\",\n});\n\n/**\n * Registers DD_MM_YYYY_HH24_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MM_YYYY_HH24_MI_Item\", \"BizDateTimeItem\");\n\nisc.DD_MM_YYYY_HH24_MI_Item.addProperties({\n\tdateFormatter: \"toDD_MM_YYYY_HH24_MI\",\n\thint: \"DD MM(M) YY(YY) HH(24):MI\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MM_YYYY_HH24_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MM_YYYY_HH24_MI_Item\",\n\n\t/**\n\t * Formats the internal value using the `toDD_MM_YYYY_HH24_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component displaying the value.\n\t * @param {Object} record - the record associated with the value.\n\t * @returns {string} - the formatted string in `DD_MM_YYYY_HH24_MI` format.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MM_YYYY_HH24_MI\");\n\t},\n});\n\n/**\n * Registers DD_MM_YYYY_HH_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MM_YYYY_HH_MI_SS_Item\", \"BizDateTimeItem\");\nisc.DD_MM_YYYY_HH_MI_SS_Item.addProperties({\n\tdateFormatter: \"toDD_MM_YYYY_HH_MI_SS\",\n\thint: \"DD MM(M) YY(YY) HH:MI(:SS) AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MM_YYYY_HH_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MM_YYYY_HH_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal value using the `toDD_MM_YYYY_HH_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component displaying the value.\n\t * @param {Object} record - the record associated with the value.\n\t * @returns {string} - the formatted string in `DD_MM_YYYY_HH_MI_SS` format.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MM_YYYY_HH_MI_SS\");\n\t},\n});\n\n/**\n * Registers DD_MM_YYYY_HH24_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MM_YYYY_HH24_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.DD_MM_YYYY_HH24_MI_SS_Item.addProperties({\n\tdateFormatter: \"toDD_MM_YYYY_HH24_MI_SS\",\n\thint: \"DD MM(M) YY(YY) HH(24):MI(:SS)\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MM_YYYY_HH24_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MM_YYYY_HH24_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `DD_MM_YYYY_HH24_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MM_YYYY_HH24_MI_SS\");\n\t},\n});\n\n/**\n * Registers DD_MMM_YYYY_HH_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MMM_YYYY_HH_MI_Item\", \"BizDateTimeItem\");\n\nisc.DD_MMM_YYYY_HH_MI_Item.addProperties({\n\tdateFormatter: \"toDD_MMM_YYYY_HH_MI\",\n\thint: \"DD MM(M) YY(YY) HH:MI AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MMM_YYYY_HH_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MMM_YYYY_HH_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `DD_MMM_YYYY_HH_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MMM_YYYY_HH_MI\");\n\t},\n});\n\n/**\n * Registers DD_MMM_YYYY_HH24_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MMM_YYYY_HH24_MI_Item\", \"BizDateTimeItem\");\n\nisc.DD_MMM_YYYY_HH24_MI_Item.addProperties({\n\tdateFormatter: \"toDD_MMM_YYYY_HH24_MI\",\n\thint: \"DD MM(M) YY(YY) HH(24):MI\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MMM_YYYY_HH24_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MMM_YYYY_HH24_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `DD_MMM_YYYY_HH24_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MMM_YYYY_HH24_MI\");\n\t},\n});\n\n/**\n * Registers DD_MMM_YYYY_HH_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MMM_YYYY_HH_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.DD_MMM_YYYY_HH_MI_SS_Item.addProperties({\n\tdateFormatter: \"toDD_MMM_YYYY_HH_MI_SS\",\n\thint: \"DD MM(M) YY(YY) HH:MI(:SS) AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MMM_YYYY_HH_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MMM_YYYY_HH_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `DD_MMM_YYYY_HH_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MMM_YYYY_HH_MI_SS\");\n\t},\n});\n\n/**\n * Registers DD_MMM_YYYY_HH24_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MMM_YYYY_HH24_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.DD_MMM_YYYY_HH24_MI_SS_Item.addProperties({\n\tdateFormatter: \"toDD_MMM_YYYY_HH24_MI_SS\",\n\thint: \"DD MM(M) YY(YY) HH(24):MI(:SS)\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MMM_YYYY_HH24_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MMM_YYYY_HH24_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `DD_MMM_YYYY_HH24_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MMM_YYYY_HH24_MI_SS\");\n\t},\n});\n\n/**\n * Registers MM_DD_YYYY_HH_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MM_DD_YYYY_HH_MI_Item\", \"BizDateTimeItem\");\n\nisc.MM_DD_YYYY_HH_MI_Item.addProperties({\n\tdateFormatter: \"toMM_DD_YYYY_HH_MI\",\n\thint: \"MM(M) DD YY(YY) HH:MI AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"MM_DD_YYYY_HH_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MM_DD_YYYY_HH_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MM_DD_YYYY_HH_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMM_DD_YYYY_HH_MI\");\n\t},\n});\n\n/**\n * Registers MM_DD_YYYY_HH24_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MM_DD_YYYY_HH24_MI_Item\", \"BizDateTimeItem\");\n\nisc.MM_DD_YYYY_HH24_MI_Item.addProperties({\n\tdateFormatter: \"toMM_DD_YYYY_HH24_MI\",\n\thint: \"MM(M) DD YY(YY) HH(24):MI\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"MM_DD_YYYY_HH24_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MM_DD_YYYY_HH24_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MM_DD_YYYY_HH24_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMM_DD_YYYY_HH24_MI\");\n\t},\n});\n\n/**\n * Registers MM_DD_YYYY_HH_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MM_DD_YYYY_HH_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.MM_DD_YYYY_HH_MI_SS_Item.addProperties({\n\tdateFormatter: \"toMM_DD_YYYY_HH_MI_SS\",\n\thint: \"MM(M) DD YY(YY) HH:MI(:SS) AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"MM_DD_YYYY_HH_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MM_DD_YYYY_HH_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MM_DD_YYYY_HH_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMM_DD_YYYY_HH_MI_SS\");\n\t},\n});\n\n/**\n * Registers MM_DD_YYYY_HH24_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MM_DD_YYYY_HH24_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.MM_DD_YYYY_HH24_MI_SS_Item.addProperties({\n\thint: \"MM(M) DD YY(YY) HH(24):MI(:SS)\",\n\tdateFormatter: \"toMM_DD_YYYY_HH24_MI_SS\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"MM_DD_YYYY_HH24_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MM_DD_YYYY_HH24_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MM_DD_YYYY_HH24_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMM_DD_YYYY_HH24_MI_SS\");\n\t},\n});\n\n/**\n * Registers MMM_DD_YYYY_HH_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MMM_DD_YYYY_HH_MI_Item\", \"BizDateTimeItem\");\n\nisc.MMM_DD_YYYY_HH_MI_Item.addProperties({\n\tdateFormatter: \"toMMM_DD_YYYY_HH_MI\",\n\thint: \"MM(M) DD YY(YY) HH:MI AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"MMM_DD_YYYY_HH_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MMM_DD_YYYY_HH_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MMM_DD_YYYY_HH_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMMM_DD_YYYY_HH_MI\");\n\t},\n});\n\n/**\n * Registers MMM_DD_YYYY_HH24_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MMM_DD_YYYY_HH24_MI_Item\", \"BizDateTimeItem\");\n\nisc.MMM_DD_YYYY_HH24_MI_Item.addProperties({\n\tdateFormatter: \"toMMM_DD_YYYY_HH24_MI\",\n\thint: \"MM(M) DD YY(YY) HH(24):MI\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"MMM_DD_YYYY_HH24_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MMM_DD_YYYY_HH24_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MMM_DD_YYYY_HH24_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMMM_DD_YYYY_HH24_MI\");\n\t},\n});\n\n/**\n * Registers MMM_DD_YYYY_HH_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MMM_DD_YYYY_HH_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.MMM_DD_YYYY_HH_MI_SS_Item.addProperties({\n\tdateFormatter: \"toMMM_DD_YYYY_HH_MI_SS\",\n\thint: \"MM(M) DD YY(YY) HH(:MI(:SS) AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"MMM_DD_YYYY_HH_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MMM_DD_YYYY_HH_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MMM_DD_YYYY_HH_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMMM_DD_YYYY_HH_MI_SS\");\n\t},\n});\n\n/**\n * Registers MMM_DD_YYYY_HH24_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MMM_DD_YYYY_HH24_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.MMM_DD_YYYY_HH24_MI_SS_Item.addProperties({\n\thint: \"MM(M) DD YY(YY) HH(24):MI(:SS)\",\n\tdateFormatter: \"toMMM_DD_YYYY_HH24_MI_SS\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"MMM_DD_YYYY_HH24_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MMM_DD_YYYY_HH24_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MMM_DD_YYYY_HH24_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMMM_DD_YYYY_HH24_MI_SS\");\n\t},\n});\n\n/**\n * Registers YYYY_MM_DD_HH_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"YYYY_MM_DD_HH_MI_Item\", \"BizDateTimeItem\");\n\nisc.YYYY_MM_DD_HH_MI_Item.addProperties({\n\tdateFormatter: \"toYYYY_MM_DD_HH_MI\",\n\thint: \"YY(YY) MM(M) DD HH:MI AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"YYYY_MM_DD_HH_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"YYYY_MM_DD_HH_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `YYYY_MM_DD_HH_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toYYYY_MM_DD_HH_MI\");\n\t},\n});\n\n/**\n * Registers YYYY_MM_DD_HH24_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"YYYY_MM_DD_HH24_MI_Item\", \"BizDateTimeItem\");\n\nisc.YYYY_MM_DD_HH24_MI_Item.addProperties({\n\tdateFormatter: \"toYYYY_MM_DD_HH24_MI\",\n\thint: \"YY(YY) MM(M) DD HH(24):MI\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"YYYY_MM_DD_HH24_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"YYYY_MM_DD_HH24_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `YYYY_MM_DD_HH24_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toYYYY_MM_DD_HH24_MI\");\n\t},\n});\n\n/**\n * Registers YYYY_MM_DD_HH_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"YYYY_MM_DD_HH_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.YYYY_MM_DD_HH_MI_SS_Item.addProperties({\n\tdateFormatter: \"toYYYY_MM_DD_HH_MI_SS\",\n\thint: \"YY(YY) MM(M) DD HH:MI(:SS) AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"YYYY_MM_DD_HH_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"YYYY_MM_DD_HH_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `YYYY_MM_DD_HH_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toYYYY_MM_DD_HH_MI_SS\");\n\t},\n});\n\n/**\n * Registers YYYY_MM_DD_HH24_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"YYYY_MM_DD_HH24_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.YYYY_MM_DD_HH24_MI_SS_Item.addProperties({\n\thint: \"YY(YY) MM(M) DD HH(24):MI(:SS)\",\n\tdateFormatter: \"toYYYY_MM_DD_HH24_MI_SS\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"YYYY_MM_DD_HH24_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"YYYY_MM_DD_HH24_MI_SS_Item\",\n\n\t/** Formats the internal date-time value into the `YYYY_MM_DD_HH24_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toYYYY_MM_DD_HH24_MI_SS\");\n\t},\n});\n\n/**\n * Overrides the `init` method of `isc.TimeItem` to prevent setting the time formatter.\n * This ensures that the time formatter is not modified after the component is constructed.\n */\nisc.TimeItem.addMethods({\n\tinit: function () {\n\t\tthis.Super(\"init\", arguments);\n\t},\n});\n\n/**\n * Implements the BizTimeItem widget.\n * Extends TimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizTimeItem\", \"TimeItem\");\n\nisc.BizTimeItem.addProperties({\n\tuseTextField: true,\n\tuse24HourTime: false,\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"HH:MI am/pm\",\n\ttextFieldProperties: { selectOnFocus: true },\n\tdisplayFormat: \"toShortTime\",\n\ttimeFormatter: \"toShortTime\",\n});\n\nisc.BizTimeItem.addMethods({\n\t/**\n\t * Sets the value of the `BizTimeItem` component.\n\t * If the new value is a string, it attempts to parse it into a valid time.\n\t *\n\t * @param {string|Date|null} newValue - the value to be set. If a string, it will be parsed into a Date object.\n\t * @returns {Date|null} The parsed time value or null if invalid.\n\t * @override\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.Time.parseInput(newValue);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n\n\t/**\n\t * Determines whether the component has advanced criteria.\n\t * Always returns `false` for `BizTimeItem`, as it does not support advanced filtering.\n\t *\n\t * @returns {boolean} `false`, indicating no advanced criteria support.\n\t * @override\n\t */\n\thasAdvancedCriteria: function () {\n\t\treturn false;\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizTime\",\n\tinheritsFrom: \"time\",\n\teditorType: \"BizTimeItem\",\n\n\t/**\n\t * Formats the internal value for editing.\n\t * Delegates to `shortDisplayFormatter` to ensure consistency.\n\t *\n\t * @param {Date|null} internalValue - the raw time value.\n\t * @param {object} field - the field definition.\n\t * @param {object} form - the form containing the field.\n\t * @param {object} record - the record containing the value.\n\t * @returns {string} The formatted time string.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal display.\n\t * Delegates to `shortDisplayFormatter` to ensure consistency.\n\t *\n\t * @param {Date|null} internalValue - the raw time value.\n\t * @param {object} field - the field definition.\n\t * @param {object} component - the UI component displaying the value.\n\t * @param {object} record - the record containing the value.\n\t * @returns {string} The formatted time string.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts a raw time value into a short time format string.\n\t *\n\t * @param {Date|null} internalValue - the time value to format.\n\t * @param {object} field - the field definition.\n\t * @param {object} component - the UI component displaying the value.\n\t * @param {object} record - the record containing the value.\n\t * @returns {string} The formatted time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.Time.toShortTime(internalValue, \"toShortTime\", true);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"HH_MI\",\n\tinheritsFrom: \"bizTime\",\n});\n\n/**\n * Registers HH_MI_SS_Item.\n * Extends BizTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"HH_MI_SS_Item\", \"BizTimeItem\");\n\nisc.HH_MI_SS_Item.addProperties({\n\tuse24HourTime: false,\n\thint: \"HH:MI:SS am/pm\",\n\tdateFormatter: \"toTime\",\n\ttimeFormatter: \"toTime\",\n});\n\nisc.SimpleType.create({\n\tname: \"HH_MI_SS\",\n\tinheritsFrom: \"bizTime\",\n\teditorType: \"HH_MI_SS_Item\",\n\n\t/** Formats the internal time value into the `HH_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.Time.toTime(internalValue, \"toTime\", true);\n\t},\n});\n\n/**\n * Registers HH24_MI_Item.\n * Extends BizTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"HH24_MI_Item\", \"BizTimeItem\");\n\nisc.HH24_MI_Item.addProperties({\n\tuse24HourTime: true,\n\thint: \"HH24:MI\",\n\tdateFormatter: \"toShortPadded24HourTime\",\n\ttimeFormatter: \"toShortPadded24HourTime\",\n});\n\nisc.SimpleType.create({\n\tname: \"HH24_MI\",\n\tinheritsFrom: \"bizTime\",\n\teditorType: \"HH24_MI_Item\",\n\n\t/** Formats the internal time value into the `HH24` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.Time.toShortTime(internalValue, \"toShortPadded24HourTime\", true);\n\t},\n});\n\n/**\n * Registers HH24_MI_SS_Item.\n * Extends BizTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"HH24_MI_SS_Item\", \"BizTimeItem\");\n\nisc.HH24_MI_SS_Item.addProperties({\n\tuse24HourTime: true,\n\thint: \"HH24:MI:SS\",\n\tdateFormatter: \"toPadded24HourTime\",\n\ttimeFormatter: \"toPadded24HourTime\",\n});\n\nisc.SimpleType.create({\n\tname: \"HH24_MI_SS\",\n\tinheritsFrom: \"bizTime\",\n\teditorType: \"HH24_MI_SS_Item\",\n\n\t/** Formats the internal time value into the `HH24_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.Time.toTime(internalValue, \"toPadded24HourTime\", true);\n\t},\n});\n\n/**\n * Implements the BizDecimal2Item widget.\n * Extends TextItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizDecimal2Item\", \"TextItem\");\n\nisc.BizDecimal2Item.addClassMethods({\n\t/**\n\t * Parses the input value into a decimal number.\n\t *\n\t * @param {string|number|null} value - the input value, which can be a number or a string.\n\t * @returns {number|string} - the parsed float value, or an empty string if parsing fails.\n\t */\n\tparseInput: function (value) {\n\t\tif (isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = value.toString().trim().replace(/\\$|\\,/g, \"\");\n\n\t\t\tif (isNaN(value)) {\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\tconst result = parseFloat(value);\n\n\t\t\t// Ensure the parsed number is within a reasonable range\n\t\t\treturn result >= 1e18 ? \"\" : result;\n\t\t}\n\n\t\treturn \"\";\n\t},\n\n\t/**\n\t * Formats a given number to a localized string with the specified number of decimal places.\n\t *\n\t * @param {number|string|null} value - the value to format. If not a number, it is returned as is.\n\t * @param {number} decimalPlaces - the number of decimal places to format to.\n\t * @returns {string} - the formatted number as a localized string, or the original value if it's not a number.\n\t */\n\tformat: function (value, decimalPlaces) {\n\t\tif (!isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn value.toLocalizedString(decimalPlaces, \".\", \",\", \"-\");\n\t},\n});\n\nisc.BizDecimal2Item.addProperties({\n\tchangeOnBlur: true, // Perform validation on field blur\n\tchangeOnKeypress: false, // Don't perform validation on key press\n\twidth: 100,\n\tshowHint: false,\n\tselectOnFocus: true,\n\tdecimalPlaces: 2,\n});\n\nisc.BizDecimal2Item.addMethods({\n\t/**\n\t * Maps a numeric value to a properly formatted display string.\n\t *\n\t * @param {number|string|null} value - the value to format for display.\n\t * @returns {string} - a formatted string representation of the value, or an empty string if null.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Number(value)) {\n\t\t\tvalue = isc.BizDecimal2Item.parseInput(value);\n\t\t}\n\t\treturn isc.BizDecimal2Item.format(value, this.decimalPlaces);\n\t},\n\n\t/**\n\t * Maps a user-inputted display string back to a numeric value.\n\t *\n\t * @param {string|null} value - the user-inputted value from the display.\n\t * @returns {number|null} - the parsed numeric value, or null if the input is empty.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\treturn null;\n\t\t}\n\t\treturn isc.BizDecimal2Item.parseInput(value);\n\t},\n\n\t/**\n\t * Ensures the displayed value is correctly formatted after an update.\n\t * Overrides the default `updateValue` method.\n\t */\n\tupdateValue: function () {\n\t\t// Map the current value to a valid float and update\n\t\tthis.Super(\"updateValue\", arguments);\n\t\t// Update the displayed string to reflect the correctly formatted value\n\t\tthis.setElementValue(this.mapValueToDisplay(this.getValue()));\n\t},\n\n\t/**\n\t * Sets the value of the item, ensuring it is correctly parsed as a float.\n\t * If passed a string, it maps it to the appropriate float before saving.\n\t *\n\t * @param {string|number|null} newValue - the new value to set.\n\t * @returns {any} - the result of the superclass's `setValue` method.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizDecimal2Item.parseInput(newValue);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizDecimal2\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizDecimal2Item\",\n\n\t/**\n\t * Formats the internal value for editing in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing this field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display in an editable field.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal (read-only) display in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts the internal value to a formatted string with 2 decimal places.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - a formatted string representation of the value.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDecimal2Item.format(internalValue, 2);\n\t},\n\n\t/**\n\t * Validators to ensure the value is either null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizDecimal5Item widget.\n * Extends BizDecimal2Item implemented above.\n */\nisc.ClassFactory.defineClass(\"BizDecimal5Item\", \"BizDecimal2Item\");\n\nisc.BizDecimal5Item.addProperties({\n\tdecimalPlaces: 5,\n});\n\nisc.SimpleType.create({\n\tname: \"bizDecimal5\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizDecimal5Item\",\n\n\t/**\n\t * Formats the internal value for editing in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing this field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display in an editable field.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal (read-only) display in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts the internal value to a formatted string with 5 decimal places.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - a formatted string representation of the value.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDecimal2Item.format(internalValue, 5);\n\t},\n\n\t/**\n\t * Validators to ensure the value is either null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizDecimal10Item widget.\n * Extends BizDecimal2Item implemented above.\n */\nisc.ClassFactory.defineClass(\"BizDecimal10Item\", \"BizDecimal2Item\");\n\nisc.BizDecimal10Item.addProperties({\n\tdecimalPlaces: 10,\n});\n\nisc.SimpleType.create({\n\tname: \"bizDecimal10\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizDecimal10Item\",\n\n\t/**\n\t * Formats the internal value for editing in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing this field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display in an editable field.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal (read-only) display in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts the internal value to a formatted string with 10 decimal places.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - a formatted string representation of the value.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDecimal2Item.format(internalValue, 10);\n\t},\n\n\t/**\n\t * Validators to ensure the value is either null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizDecimal0Item widget.\n * Extends BizDecimal2Item implemented above.\n */\nisc.ClassFactory.defineClass(\"BizDecimal0Item\", \"BizDecimal2Item\");\n\nisc.BizDecimal0Item.addProperties({\n\tdecimalPlaces: 0,\n});\n\nisc.SimpleType.create({\n\tname: \"bizDecimal0\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizDecimal0Item\",\n\n\t/**\n\t * Formats the internal value for editing in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing this field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display in an editable field.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal (read-only) display in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts the internal value to a formatted string with 0 decimal places (whole number).\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - a formatted string representation of the value.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDecimal2Item.format(internalValue, 0);\n\t},\n\n\t/**\n\t * Validators to ensure the value is either null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizDecimal1Item widget.\n * Extends BizDecimal2Item implemented above.\n */\nisc.ClassFactory.defineClass(\"BizDecimal1Item\", \"BizDecimal2Item\");\n\nisc.BizDecimal1Item.addProperties({\n\tdecimalPlaces: 1,\n});\n\nisc.SimpleType.create({\n\tname: \"bizDecimal1\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizDecimal1Item\",\n\n\t/**\n\t * Formats the internal value for editing in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing this field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display in an editable field.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal (read-only) display in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts the internal value to a formatted string with 1 decimal place.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - a formatted string representation of the value.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDecimal2Item.format(internalValue, 1);\n\t},\n\n\t/**\n\t * Validators to ensure the value is either null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizDollarsAndCentsItem widget.\n * Extends BizDecimal2Item implemented above.\n */\nisc.ClassFactory.defineClass(\"BizDollarsAndCentsItem\", \"BizDecimal2Item\");\n\nisc.BizDollarsAndCentsItem.addProperties({\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"(+/-)$$$$$.cc\",\n});\n\nisc.SimpleType.create({\n\tname: \"bizDollarsAndCents\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizDollarsAndCentsItem\",\n\n\t/**\n\t * Formats the internal value for editing in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw currency value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing this field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display in an editable field.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal (read-only) display in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw currency value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts the internal value to a formatted string with 2 decimal places,\n\t * ensuring correct currency representation.\n\t *\n\t * @param {number|null} internalValue - the raw currency value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - a formatted currency string (e.g., \"$1,234.56\").\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDollarsAndCentsItem.format(internalValue, 2);\n\t},\n\n\t/**\n\t * Validators to ensure the value is either null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizIntegerPercentageItem widget.\n * Extends TextItem implemented above.\n */\nisc.ClassFactory.defineClass(\"BizIntegerPercentageItem\", \"TextItem\");\n\nisc.BizIntegerPercentageItem.addClassMethods({\n\t/**\n\t * Parses the input value as a percentage.\n\t * If the value is a string, it removes any leading/trailing whitespace and the '%' sign.\n\t * Then, it converts the value to a float, divides it by 100, and returns the result.\n\t * If the value is invalid or exceeds the maximum threshold, `null` is returned.\n\t *\n\t * @param {string|number} value - the value to parse, which could be a string or a number.\n\t * @returns {number|null} - the parsed percentage as a float, or `null` if the value is invalid.\n\t */\n\tparseInput: function (value) {\n\t\tif (isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = value.toString().trim().trim(\"%\");\n\t\t\tif (isNaN(value)) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tlet result = Math.round(parseFloat(value)) / 100;\n\t\t\t\t// Ensure the result is not too large\n\t\t\t\tif (result >= 1000000000000000000.0) {\n\t\t\t\t\tresult = null;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t * Formats the value as a percentage.\n\t * The value is multiplied by 100 and localized for display, with a '%' symbol added at the end.\n\t *\n\t * @param {number|string} value - the value to format as a percentage.\n\t * @returns {string} - the formatted percentage string, e.g., \"12%\" or \"50.5%\".\n\t */\n\tformat: function (value) {\n\t\tif (!isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn (value * 100).toLocalizedString(0, \".\", \",\", \"-\") + \"%\";\n\t},\n});\n\nisc.BizIntegerPercentageItem.addProperties({\n\tchangeOnBlur: true, // Perform validation on field blur\n\tchangeOnKeypress: false, // Don't perform validation on key press\n\twidth: 100,\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"(+/-)99999\",\n\tselectOnFocus: true,\n});\n\nisc.BizIntegerPercentageItem.addMethods({\n\t/**\n\t * Maps a value to its display representation as a percentage.\n\t * If the value is `null`, it returns an empty string.\n\t * If the value is not a number, it attempts to parse the value using `parseInput`.\n\t * The value is then formatted as a percentage.\n\t *\n\t * @param {string|number|null} value - the value to map to display, which could be a string, number, or `null`.\n\t * @returns {string} - the formatted percentage as a string (e.g., \"12%\" or \"50.5%\").\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Number(value)) {\n\t\t\tvalue = isc.BizIntegerPercentageItem.parseInput(value);\n\t\t}\n\t\treturn isc.BizIntegerPercentageItem.format(value);\n\t},\n\n\t/**\n\t * Maps a display value (usually a string) back to the internal value format.\n\t * If the display value is an empty string, it returns `null`.\n\t * Otherwise, it attempts to parse the value using `parseInput`.\n\t *\n\t * @param {string|null} value - the value to map from display to internal value format.\n\t * @returns {number|null} - the parsed internal value as a number or `null` if the value is empty.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\tvalue = null;\n\t\t} else {\n\t\t\tvalue = isc.BizIntegerPercentageItem.parseInput(value);\n\t\t}\n\t\treturn value;\n\t},\n\n\t/**\n\t * Override: Ensures that the displayed value matches the saved value and is formatted correctly.\n\t * This method first calls the superclass method `updateValue` to set the internal value,\n\t * then updates the displayed string so it is formatted correctly.\n\t */\n\tupdateValue: function () {\n\t\t// This will map the value to a valid float\n\t\tthis.Super(\"updateValue\", arguments);\n\t\t// This will update the displayed string so it's formatted correctly\n\t\tthis.setElementValue(this.mapValueToDisplay(this.getValue()));\n\t},\n\n\t/**\n\t * Override: If a string value is passed, it is mapped to the appropriate float value before saving.\n\t * This is necessary as strings will not go through `mapDisplayToValue`.\n\t *\n\t * @param {string|number} newValue - the new value to set, which could be a string or a number.\n\t * @returns {any} - the result of the `setValue` method from the superclass, after mapping the value.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizIntegerPercentageItem.parseInput(newValue);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizIntegerPercentage\",\n\tinheritsFrom: \"integer\",\n\teditorType: \"BizIntegerPercentageItem\",\n\n\t/**\n\t * Formatter function for displaying the value when in edit mode.\n\t * Uses the `shortDisplayFormatter` to format the internal value.\n\t *\n\t * @param {number|null} internalValue - the internal value to format.\n\t * @param {Object} field - the field object that holds the value.\n\t * @param {Object} form - the form object containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted value as a string.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formatter function for displaying the value in normal display mode.\n\t * Uses the `shortDisplayFormatter` to format the internal value.\n\t *\n\t * @param {number|null} internalValue - the internal value to format.\n\t * @param {Object} field - the field object that holds the value.\n\t * @param {Object} component - the component object containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted value as a string.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Short display formatter for formatting the internal value as a percentage.\n\t * Uses `BizIntegerPercentageItem.format` to format the value.\n\t *\n\t * @param {number|null} internalValue - the internal value to format.\n\t * @param {Object} field - the field object that holds the value.\n\t * @param {Object} component - the component object containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted percentage value as a string (e.g., \"10%\").\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizIntegerPercentageItem.format(internalValue);\n\t},\n\n\t/**\n\t * Validators for the custom type. The value must either be `null` or a number.\n\t *\n\t * @type {Array}\n\t * @default [{type: 'custom', clientOnly: true, condition: '(value == null) || isc.isA.Number(value)'}]\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizSimplePercentageItem widget.\n * Extends BizIntegerPercentageItem implemented above.\n */\nisc.ClassFactory.defineClass(\n\t\"BizSimplePercentageItem\",\n\t\"BizIntegerPercentageItem\",\n);\n\nisc.BizSimplePercentageItem.addClassMethods({\n\t/**\n\t * Parses the input value, converting it to a number (float) representation.\n\t * This method handles both strings (with or without the '%' sign) and numbers.\n\t * If the input is a valid percentage string, it converts it to a float and returns it.\n\t *\n\t * @param {string|number} value - the value to be parsed. Can be a string or a number.\n\t * @returns {number|null} - the parsed float value, or null if parsing fails.\n\t */\n\tparseInput: function (value) {\n\t\tif (isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = value.toString().trim(\" \").trim(\"%\");\n\t\t\tif (isNaN(value)) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tlet result = Math.round(parseFloat(value));\n\t\t\t\tif (result >= 1000000000000000000.0) {\n\t\t\t\t\tresult = null;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t * Formats the input value as a percentage string.\n\t * If the input is a number, it converts it to a localized string and appends a '%' symbol.\n\t * If the input is not a number, it returns the original value.\n\t *\n\t * @param {string|number} value - the value to be formatted. Can be a number or a string.\n\t * @returns {string} - the formatted percentage string (e.g., \"10%\") or the original value if not a number.\n\t */\n\tformat: function (value) {\n\t\tif (!isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn value.toLocalizedString(0, \".\", \",\", \"-\") + \"%\";\n\t},\n});\n\nisc.BizSimplePercentageItem.addMethods({\n\t/**\n\t * Maps the value to a displayable format.\n\t * If the value is null, it returns an empty string.\n\t * If the value is not a number, it attempts to parse the input using `parseInput`.\n\t * Finally, it formats the value as a percentage string.\n\t *\n\t * @param {string|number|null} value - the value to be mapped to a displayable format. Can be a number, string, or null.\n\t * @returns {string} - the formatted percentage string or an empty string if value is null.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Number(value)) {\n\t\t\tvalue = isc.BizSimplePercentageItem.parseInput(value);\n\t\t}\n\t\treturn isc.BizSimplePercentageItem.format(value);\n\t},\n\n\t/**\n\t * Maps the display value back to the internal value.\n\t * If the value is an empty string, it returns null.\n\t * Otherwise, it parses the input using `parseInput` to convert it to a number.\n\t *\n\t * @param {string|null} value - the display value to be mapped to the internal value. Can be a string or null.\n\t * @returns {number|null} - the parsed number or null if the input is empty.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\tvalue = null;\n\t\t} else {\n\t\t\tvalue = isc.BizSimplePercentageItem.parseInput(value);\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t/**\n\t * Sets the value of the component.\n\t * If the value passed is a string, it is converted to a float using `parseInput` before being set.\n\t * This ensures that the string representation of the value is properly converted before saving.\n\t *\n\t * @param {string|number} newValue - the new value to be set. It can be a string (percentage) or a number.\n\t * @returns {*} - the result of the `Super(\"setValue\")` call after setting the value.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizSimplePercentageItem.parseInput(newValue);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizSimplePercentage\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizSimplePercentageItem\",\n\n\t/**\n\t * Formats the internal value for editing.\n\t * This method is used for formatting the value when it is being displayed in the editor.\n\t *\n\t * @param {number} internalValue - the value to be formatted.\n\t * @param {object} field - the field the value belongs to.\n\t * @param {object} form - the form in which the value will be displayed.\n\t * @param {object} record - the record that contains the value.\n\t * @returns {string} - the formatted value to be displayed in the editor.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal display.\n\t * This method is used for formatting the value when it is displayed outside the editor.\n\t *\n\t * @param {number} internalValue - the value to be formatted.\n\t * @param {object} field - the field the value belongs to.\n\t * @param {object} component - the component that displays the value.\n\t * @param {object} record - the record that contains the value.\n\t * @returns {string} - the formatted value to be displayed normally.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Formats the internal value as a percentage for display.\n\t * This method converts the value into a percentage string (e.g., \"45%\").\n\t *\n\t * @param {number} internalValue - the value to be formatted as a percentage.\n\t * @param {object} field - the field the value belongs to.\n\t * @param {object} component - the component displaying the value.\n\t * @param {object} record - the record that contains the value.\n\t * @returns {string} - the formatted percentage string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizSimplePercentageItem.format(internalValue);\n\t},\n\n\t/**\n\t * Custom validator for the `bizSimplePercentage` type.\n\t * Validates that the value is either null or a valid number.\n\t *\n\t * @type {Array}\n\t * @property {object} validators\n\t * @property {string} type - the type of validation to apply.\n\t * @property {boolean} clientOnly - specifies whether the validation is client-side only.\n\t * @property {string} condition - the validation condition to be checked.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizIntegerSeparatorItem widget.\n * Extends TextItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizIntegerSeparatorItem\", \"TextItem\");\n\nisc.BizIntegerSeparatorItem.addClassMethods({\n\t/**\n\t * Parses the input value, ensuring that it is a valid number.\n\t * Removes commas and trims the string before converting it into a valid float.\n\t *\n\t * @param {string|number} value - the value to be parsed. Can be a string or a number.\n\t * @returns {number|null} - the parsed float or `null` if the value is invalid.\n\t */\n\tparseInput: function (value) {\n\t\t// If the value is already a number, return it as is.\n\t\tif (isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\t// If the value exists, process it.\n\t\tif (value) {\n\t\t\t// Remove commas and trim the string\n\t\t\tvalue = value.toString().replace(/,/g, \"\").trim(\" \");\n\n\t\t\t// Check if the value is a valid number after removing commas.\n\t\t\tif (isNaN(value)) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\t// Round the parsed value and return it\n\t\t\t\tlet result = Math.round(parseFloat(value));\n\n\t\t\t\t// If the result is too large, return null\n\t\t\t\tif (result >= 1000000000000000000.0) {\n\t\t\t\t\tresult = null;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t\t// Return null if the value is empty\n\t\telse {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t * Formats the value as a localized string with thousands separators.\n\t * If the value is a number, it is formatted and returned as a string.\n\t *\n\t * @param {number|string} value - the value to be formatted. Can be a number or a string.\n\t * @returns {string} - the formatted value as a string with thousands separators.\n\t */\n\tformat: function (value) {\n\t\t// If the value is not a number, return it as is.\n\t\tif (!isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\t// Format the value using a localized string with separators for thousands\n\t\treturn value.toLocalizedString(0, \".\", \",\", \"-\");\n\t},\n});\n\nisc.BizIntegerSeparatorItem.addProperties({\n\tchangeOnBlur: true, // Perform validation on field blur\n\tchangeOnKeypress: false, // Don't perform validation on key press\n\twidth: 100,\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"(+/-)99,999,999\",\n\tselectOnFocus: true,\n});\n\nisc.BizIntegerSeparatorItem.addMethods({\n\t/**\n\t * Maps the provided value to a displayable string, formatted with separators for thousands.\n\t * If the value is not already a number, it will be parsed.\n\t *\n\t * @param {string|number|null} value - the value to be mapped for display. Can be a string, number, or `null`.\n\t * @returns {string} - the formatted display string or an empty string if the value is null.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\t// If the value is null, return an empty string\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\n\t\t// If the value is not a number, parse it to a valid number\n\t\tif (!isc.isA.Number(value)) {\n\t\t\tvalue = isc.BizIntegerSeparatorItem.parseInput(value);\n\t\t}\n\n\t\t// Format and return the value for display\n\t\treturn isc.BizIntegerSeparatorItem.format(value);\n\t},\n\n\t/**\n\t * Maps the displayed value back to the corresponding internal value.\n\t * If the display value is an empty string, it will be converted to `null`.\n\t * Otherwise, the string will be parsed into a number.\n\t *\n\t * @param {string|null} value - the value displayed in the UI. Can be a string or `null`.\n\t * @returns {number|null} - the internal value corresponding to the display value, or `null` if the value is empty.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\t// If the value is an empty string, set it to null\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\tvalue = null;\n\t\t} else {\n\t\t\t// Otherwise, parse the value into a number\n\t\t\tvalue = isc.BizIntegerSeparatorItem.parseInput(value);\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t/**\n\t * Updates the internal value and the displayed string in the UI.\n\t * Ensures that the displayed value matches the formatted internal value.\n\t */\n\tupdateValue: function () {\n\t\t// Call the parent method to update the internal value\n\t\tthis.Super(\"updateValue\", arguments);\n\n\t\t// Set the formatted value in the UI element\n\t\tthis.setElementValue(this.mapValueToDisplay(this.getValue()));\n\t},\n\n\t/**\n\t * Sets the internal value, ensuring it is correctly parsed from a string to a number.\n\t * This is necessary because the string passed in doesn't go through `mapDisplayToValue`.\n\t *\n\t * @param {string|number} newValue - the new value to set. Can be a string or number.\n\t * @returns {*} - the result of the `Super` method call for setting the value.\n\t */\n\tsetValue: function (newValue) {\n\t\t// If the new value is a string, parse it into a number\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizIntegerSeparatorItem.parseInput(newValue);\n\t\t}\n\n\t\t// Call the parent method to set the value\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizIntegerSeparator\",\n\tinheritsFrom: \"integer\",\n\teditorType: \"BizIntegerSeparatorItem\",\n\n\t/**\n\t * Formatter for the value when editing. It applies the `shortDisplayFormatter` method to format the internal value\n\t * before displaying it in an editing context.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted for display.\n\t * @param {object} field - the field being edited.\n\t * @param {object} form - the form containing the field.\n\t * @param {object} record - the record containing the field value.\n\t * @returns {string} - the formatted string representing the internal value.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formatter for normal display. It applies the `shortDisplayFormatter` method to format the internal value\n\t * before displaying it in a non-editing context.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted for normal display.\n\t * @param {object} field - the field being displayed.\n\t * @param {object} component - the component that holds the field.\n\t * @param {object} record - the record containing the field value.\n\t * @returns {string} - the formatted string representing the internal value.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Short display formatter for formatting an internal value, typically for display in forms or UI elements.\n\t * It uses the `BizIntegerSeparatorItem.format` method to apply the correct formatting with separators for thousands.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted.\n\t * @param {object} field - the field related to the value.\n\t * @param {object} component - the component where the value will be displayed.\n\t * @param {object} record - the record containing the value to be formatted.\n\t * @returns {string} - the formatted string, representing the value with appropriate separators for thousands.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizIntegerSeparatorItem.format(internalValue);\n\t},\n\n\t/**\n\t * Validators for the `bizIntegerSeparator` type. This custom validator ensures that the value is either `null`\n\t * or a number. It will be applied when validating values in the form.\n\t *\n\t * @type {Array}\n\t * @example\n\t * // Validator ensures that the value is either null or a number\n\t * validators: [{type: 'custom', clientOnly: true, condition: '(value == null) || isc.isA.Number(value)'}]\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizTwoDecimalPlacesPercentageItem widget.\n * Extends BizIntegerPercentageItem implemented above.\n */\nisc.ClassFactory.defineClass(\n\t\"BizTwoDecimalPlacesPercentageItem\",\n\t\"BizIntegerPercentageItem\",\n);\n\nisc.BizTwoDecimalPlacesPercentageItem.addClassMethods({\n\t/**\n\t * Parses the input value, which can be a string or a number, and returns a float value.\n\t * The input string is trimmed, any percentage sign is removed, and the value is parsed as a float.\n\t * The result is rounded to two decimal places.\n\t * If the parsed value is too large or invalid, `null` is returned.\n\t *\n\t * @param {string|number} value - the input value to be parsed. It can be a string representing a percentage (e.g., \"25%\") or a number.\n\t * @returns {number|null} - the parsed float value, or `null` if the input is invalid or too large.\n\t */\n\tparseInput: function (value) {\n\t\tif (isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = value.toString().trim(\" \").trim(\"%\");\n\t\t\tif (isNaN(value)) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tlet result = Math.round(parseFloat(value) * 100) / 10000;\n\t\t\t\tif (result >= 1000000000000000000.0) {\n\t\t\t\t\tresult = null;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t * Formats the value as a percentage, ensuring it's displayed with two decimal places.\n\t * If the value is a valid number, it's multiplied by 100 and formatted using `toLocalizedString` with two decimal places.\n\t * The formatted result includes a percentage sign ('%').\n\t *\n\t * @param {string|number} value - the value to be formatted. It can be a number or a string representing a percentage.\n\t * @returns {string} - the formatted percentage string, or the original string if the value is not a valid number.\n\t */\n\tformat: function (value) {\n\t\tif (!isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn (value * 100).toLocalizedString(2, \".\", \",\", \"-\") + \"%\";\n\t},\n});\n\nisc.BizTwoDecimalPlacesPercentageItem.addProperties({\n\thint: \"(+/-)99999.99\",\n});\n\nisc.BizTwoDecimalPlacesPercentageItem.addMethods({\n\t/**\n\t * Maps the given value to a formatted display string. If the value is `null`, an empty string is returned.\n\t * If the value is not a valid number, it is parsed using the `parseInput` method before being formatted.\n\t * The formatted value is a percentage string with two decimal places.\n\t *\n\t * @param {string|number|null} value - the value to be mapped to a display string. It can be a string or a number.\n\t * @returns {string} - the formatted display string, or an empty string if the value is `null`.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Number(value)) {\n\t\t\tvalue = isc.BizTwoDecimalPlacesPercentageItem.parseInput(value);\n\t\t}\n\t\treturn isc.BizTwoDecimalPlacesPercentageItem.format(value);\n\t},\n\n\t/**\n\t * Maps the given display value back to its raw value. If the display value is an empty string, `null` is returned.\n\t * Otherwise, the value is parsed using the `parseInput` method.\n\t *\n\t * @param {string|null} value - the display value to be mapped back to a raw value. It can be a string or `null`.\n\t * @returns {number|null} - the raw value corresponding to the display value, or `null` if the display value is an empty string.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\tvalue = null;\n\t\t} else {\n\t\t\tvalue = isc.BizTwoDecimalPlacesPercentageItem.parseInput(value);\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t/**\n\t * Sets the value of the item. If the passed value is a string, it is parsed into a float using the `parseInput` method.\n\t * The parsed value is then passed to the `setValue` method of the superclass.\n\t *\n\t * @param {string|number} newValue - the new value to be set. It can be a string or a number.\n\t * @returns {any} - the result of the superclass's `setValue` method call with the parsed value.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizTwoDecimalPlacesPercentageItem.parseInput(newValue);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizTwoDecimalPlacesPercentage\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizTwoDecimalPlacesPercentageItem\",\n\n\t/**\n\t * Formats the internal value for display when editing. This uses the `shortDisplayFormatter` method to generate\n\t * the formatted value.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted.\n\t * @param {object} field - the field object for the value.\n\t * @param {object} form - the form object that contains the field.\n\t * @param {object} record - the record containing the data.\n\t * @returns {string} - the formatted display string for the value.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for display in a normal context (outside of editing). This uses the `shortDisplayFormatter`\n\t * method to generate the formatted value.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted.\n\t * @param {object} field - the field object for the value.\n\t * @param {object} component - the component object that contains the field.\n\t * @param {object} record - the record containing the data.\n\t * @returns {string} - the formatted display string for the value.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Formats the internal value as a percentage with two decimal places. This method is used for both normal and\n\t * editing display formatting.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted.\n\t * @param {object} field - the field object for the value.\n\t * @param {object} component - the component object that contains the field.\n\t * @param {object} record - the record containing the data.\n\t * @returns {string} - the formatted value as a percentage string with two decimal places.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizTwoDecimalPlacesPercentageItem.format(internalValue);\n\t},\n\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizTimeDurationItem widget.\n * Extends TextItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizTimeDurationItem\", \"TextItem\");\n\nisc.BizTimeDurationItem.addClassMethods({\n\t/**\n\t * Parses the input value and converts it to a float representing a time duration. It can handle:\n\t * - Decimal format (e.g., \"2.5\")\n\t * - time format with hours and minutes (e.g., \"2:30\" or \"2 30\")\n\t *\n\t * @param {string|number} value - the input value to be parsed, either a string or a number.\n\t * @returns {number|null} - the parsed time duration as a float, or `null` if parsing fails.\n\t */\n\tparseInput: function (value) {\n\t\tif (isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (value) {\n\t\t\t// Look for a decimal formatted match (e.g., \"2.5\")\n\t\t\tlet match = /^\\s*\\s*([-+]?\\d+)\\s*\\.\\s*(\\d?\\d)?\\s*$/.exec(value); // sign, 1 or more digits, a decimal point, 1 or 2 digits\n\t\t\tif (match) {\n\t\t\t\tlet result = parseFloat(match[1] + \".\" + (match[2] | 0));\n\t\t\t\tif (result >= 1000000000000000000.0) {\n\t\t\t\t\tresult = null;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\t// Look for a time formatted match (e.g., \"2 30\" or \"2:30\")\n\t\t\tmatch = /^\\s*\\s*([-+]?\\d+)\\s*\\D?\\s*(\\d?\\d)?\\s*$/.exec(value); // sign, 1 or more digits, any non digit, 1 or 2 digits\n\t\t\tif (match) {\n\t\t\t\tconst hours = parseInt(match[1] | 0, 10);\n\t\t\t\tconst minutes = Math.min(parseInt(match[2] | 0, 10), 59);\n\t\t\t\tif (hours >= 0) {\n\t\t\t\t\treturn hours + minutes / 60.0;\n\t\t\t\t}\n\t\t\t\treturn hours - minutes / 60.0;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t * Formats the time duration value into a string with hours and minutes. It formats the value as:\n\t * - Positive values: \"H:MM\"\n\t * - Negative values: \"-H:MM\"\n\t * It ensures that the minutes part is always two digits (e.g., \"02\" instead of \"2\").\n\t *\n\t * @param {number} value - the time duration to be formatted.\n\t * @returns {string} - the formatted time duration string (e.g., \"2:30\", \"-2:30\").\n\t */\n\tformat: function (value) {\n\t\tif (!isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tlet decimalMinutes;\n\t\tlet hours;\n\t\tif (value >= 0) {\n\t\t\thours = Math.floor(value);\n\t\t\tdecimalMinutes = value - hours;\n\t\t} else {\n\t\t\thours = Math.ceil(value);\n\t\t\tdecimalMinutes = Math.abs(value - hours);\n\t\t}\n\n\t\tlet stringMinutes = Math.round(decimalMinutes * 60).toString();\n\t\tif (stringMinutes == \"60\") {\n\t\t\thours = value >= 0 ? hours + 1 : hours - 1;\n\t\t\tstringMinutes = \"00\";\n\t\t} else if (stringMinutes.length == 1) {\n\t\t\tstringMinutes = \"0\" + stringMinutes;\n\t\t}\n\n\t\treturn hours + \":\" + stringMinutes;\n\t},\n});\n\nisc.BizTimeDurationItem.addProperties({\n\tchangeOnBlur: true, // Perform validation on field blur\n\tchangeOnKeypress: false, // Don't perform validation on key press\n\twidth: 100,\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"(+/-)HHH:MM\",\n\tselectOnFocus: true,\n});\n\nisc.BizTimeDurationItem.addMethods({\n\t/**\n\t * Maps the provided value to a displayable format. If the value is null, an empty string is returned.\n\t * If the value is not a number, it is parsed into a valid time duration before being formatted.\n\t *\n\t * @param {string|number|null} value - the value to be mapped to a displayable format. It can be a string, number, or null.\n\t * @returns {string} - the formatted time duration string.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Number(value)) {\n\t\t\tvalue = isc.BizTimeDurationItem.parseInput(value);\n\t\t}\n\t\treturn isc.BizTimeDurationItem.format(value);\n\t},\n\n\t/**\n\t * Maps the provided display value (usually from the UI) back to a value that can be saved.\n\t * If the value is an empty string, it will return null. Otherwise, it will parse the string into a valid time duration.\n\t *\n\t * @param {string|null} value - the value to be mapped back to a usable format. Can be a string or null.\n\t * @returns {number|null} - the parsed time duration as a float, or null if the input was an empty string.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\tvalue = null;\n\t\t} else {\n\t\t\tvalue = isc.BizTimeDurationItem.parseInput(value);\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t/**\n\t * Ensures the value displayed in the element matches the saved value and is correctly formatted.\n\t * It calls the superclass method to update the value and then updates the displayed value to the properly formatted string.\n\t *\n\t * @override\n\t * @returns {void}\n\t */\n\tupdateValue: function () {\n\t\t// This will map the value to a valid float\n\t\tthis.Super(\"updateValue\", arguments);\n\t\t// This will update the displayed string so it's formatted correctly\n\t\tthis.setElementValue(this.mapValueToDisplay(this.getValue()));\n\t},\n\n\t/**\n\t * Sets a new value for the item. If the provided value is a string, it will be parsed into a valid float\n\t * representing the time duration before being saved. This ensures the value is correctly formatted for saving.\n\t *\n\t * @override\n\t * @param {string|number} newValue - the new value to be set. It can be a string or number.\n\t * @returns {void}\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizTimeDurationItem.parseInput(newValue);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizTimeDuration\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizTimeDurationItem\",\n\n\t/**\n\t * Formatter to convert the internal value to a displayable format for the editor.\n\t * Uses the `shortDisplayFormatter` method to return the formatted value.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted for display in the editor.\n\t * @param {object} field - the field containing the value.\n\t * @param {object} form - the form containing the field.\n\t * @param {object} record - the record containing the field.\n\t * @returns {string} - the formatted display value.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formatter for the normal display value, used for displaying the value in a standard format.\n\t * It delegates to the `shortDisplayFormatter` method to return the formatted value.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted for standard display.\n\t * @param {object} field - the field containing the value.\n\t * @param {object} component - the component containing the field.\n\t * @param {object} record - the record containing the field.\n\t * @returns {string} - the formatted display value.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * A helper function to format the internal value into a string representation.\n\t * This method is used by both the `editFormatter` and `normalDisplayFormatter`.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted for display.\n\t * @param {object} field - the field containing the value.\n\t * @param {object} component - the component containing the value.\n\t * @param {object} record - the record containing the value.\n\t * @returns {string} - the formatted time duration string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizTimeDurationItem.format(internalValue);\n\t},\n\n\t/**\n\t * Custom validator to ensure the value is either null or a valid number.\n\t * This is used for validating the value entered by the user.\n\t *\n\t * @type {Array<object>}\n\t * @property {string} type - the type of the validator.\n\t * @property {boolean} clientOnly - indicates that this is a client-side validation.\n\t * @property {string} condition - the condition for validation, checks that the value is null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizContentLinkItem widget.\n * Extends CanvasItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizContentLinkItem\", isc.CanvasItem);\n\nisc.BizContentLinkItem.addProperties({\n\theight: 25,\n\twidth: \"*\",\n\trowSpan: \"*\",\n\tendRow: false,\n\tstartRow: false,\n\tcanFocus: true,\n\tshouldSaveValue: true, // This is an editable data item\n});\n\nisc.BizContentLinkItem.addMethods({\n\t/**\n\t * Initializes the `BizContentLinkItem` by creating the link and canvas elements.\n\t * If the item is editable, it includes an upload button; otherwise, it only displays the link.\n\t *\n\t * @param {object} config - the configuration object for the component.\n\t * @param {boolean} config.editable - whether the content link is editable.\n\t */\n\tinit: function (config) {\n\t\t// Create an HTMLFlow to display the link content\n\t\tthis._link = isc.HTMLFlow.create({\n\t\t\tcontents: \"Empty\",\n\t\t\twidth: \"100%\",\n\t\t});\n\n\t\t// Create the canvas layout depending on whether the item is editable or not\n\t\tif (config.editable) {\n\t\t\tthis.canvas = isc.HLayout.create({\n\t\t\t\tdefaultLayoutAlign: \"center\",\n\t\t\t\tmembers: [\n\t\t\t\t\tthis._link,\n\t\t\t\t\tisc.LayoutSpacer.create({ width: 3 }),\n\t\t\t\t\tisc.BizUtil.createUploadButton(this, false, false),\n\t\t\t\t],\n\t\t\t});\n\t\t} else {\n\t\t\tthis.canvas = isc.HLayout.create({\n\t\t\t\tdefaultLayoutAlign: \"center\",\n\t\t\t\tmembers: [this._link],\n\t\t\t});\n\t\t}\n\n\t\t// Call the superclass's init method\n\t\tthis.Super(\"init\", arguments);\n\t},\n\n\t/**\n\t * Updates the content link value and displays it on the link element.\n\t * If the value is not provided, it displays \"<Empty>\".\n\t *\n\t * @param {string|null} newValue - the new value for the content link, or `null` if the link should be empty.\n\t * @returns {object} - the updated `BizContentLinkItem` instance.\n\t */\n\tsetValue: function (newValue) {\n\t\t// Ensure the link is updated only if the canvas is initialized and the value is not user-set\n\t\tif (this.canvas != null && !this.userSetValue) {\n\t\t\tif (newValue) {\n\t\t\t\t// Construct the URL with required query parameters\n\t\t\t\tconst url =\n\t\t\t\t\tSKYVE.Util.CONTEXT_URL +\n\t\t\t\t\t\"content?_n=\" +\n\t\t\t\t\tnewValue +\n\t\t\t\t\t\"&_doc=\" +\n\t\t\t\t\tthis.form._view._mod +\n\t\t\t\t\t\".\" +\n\t\t\t\t\tthis.form._view._doc +\n\t\t\t\t\t\"&_b=\" +\n\t\t\t\t\tthis.name.replaceAll(\"_\", \".\");\n\n\t\t\t\t// Update the link's contents with the constructed URL\n\t\t\t\tthis._link.setContents(\n\t\t\t\t\t'<div style=\"line-height:25px;vertical-align:middle;\">' +\n\t\t\t\t\t\tthis.canvas.linkHTML(url, this.value ? this.value : \"Content\", \"_blank\") +\n\t\t\t\t\t\t\"</div>\",\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// If no value, display \"<Empty>\" in the link\n\t\t\t\tthis._link.setContents(\n\t\t\t\t\t'<div style=\"line-height:25px;vertical-align:middle;\">&lt;Empty&gt;</div>',\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Call the superclass's setValue method\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tinheritsFrom: \"canvas\",\n\tname: \"bizContentLink\",\n\teditorType: \"BizContentLinkItem\",\n});\n\n/**\n * Implements the BizContentImageItem widget.\n * Extends CanvasItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizContentImageItem\", isc.CanvasItem);\n\nisc.BizContentImageItem.addProperties({\n\twidth: \"*\",\n\trowSpan: \"*\",\n\tendRow: false,\n\tstartRow: false,\n\tcanFocus: true,\n\tshouldSaveValue: true, // This is an editable data item\n});\n\nisc.BizContentImageItem.addMethods({\n\t/**\n\t * Initializes the `BizContentImageItem` by creating an image element and a canvas layout.\n\t * If the item is editable, it includes an upload button; otherwise, it only displays the image.\n\t *\n\t * @param {object} config - the configuration object for the component.\n\t * @param {string} [config.width='100%'] - the width of the image.\n\t * @param {string} [config.height='100%'] - the height of the image.\n\t * @param {boolean} config.editable - whether the image is editable.\n\t * @param {boolean} [config.showMarkup=false] - whether to show the markup in the upload button.\n\t */\n\tinit: function (config) {\n\t\t// Create an Img element with specified configurations\n\t\tthis._img = isc.Img.create({\n\t\t\twidth: config.width ? config.width : \"100%\",\n\t\t\theight: config.height ? config.height : \"100%\",\n\t\t\timageType: \"stretch\",\n\t\t\toverflow: \"hidden\",\n\t\t\tisGroup: true,\n\t\t\tstyleName: \"bizhubRoundedBorder bizhubContentImgFit\",\n\t\t\tgroupBorderCSS: \"1px solid #bfbfbf\",\n\t\t\tmargin: 1,\n\t\t\tgroupLabelBackgroundColor: \"transparent\",\n\t\t\tshowDisabled: false,\n\t\t\tshowDown: false,\n\t\t\tshowFocus: false,\n\t\t\tshowFocused: false,\n\t\t\tshowFocusedAsOver: false,\n\t\t\tshowRollOver: false,\n\t\t\tsrc: \"[SKIN]blank.gif\",\n\t\t\tcursor: \"pointer\",\n\t\t\tclick(event) {\n\t\t\t\tlet src = this.src;\n\t\t\t\t// Remove the width and height parameters to get the full image, not a Thumbnail\n\t\t\t\tsrc = src.replace(/&_w=\\d*/, \"\").replace(/&_h=\\d*/, \"\");\n\t\t\t\twindow.open(src, \"_blank\");\n\t\t\t},\n\t\t});\n\n\t\t// Create the canvas layout with an upload button if editable\n\t\tif (config.editable) {\n\t\t\tconst centredUploadButton = isc.HLayout.create({\n\t\t\t\twidth: 1, // Make minimum width of button\n\t\t\t\theight: config.height ? config.height : \"100%\",\n\t\t\t\tdefaultLayoutAlign: \"center\",\n\t\t\t\tmembers: [isc.BizUtil.createUploadButton(this, true, config.showMarkup)],\n\t\t\t});\n\t\t\tthis.canvas = isc.HLayout.create({\n\t\t\t\tdefaultLayoutAlign: \"center\",\n\t\t\t\tmembers: [\n\t\t\t\t\tthis._img,\n\t\t\t\t\tisc.LayoutSpacer.create({ width: 5 }),\n\t\t\t\t\tcentredUploadButton,\n\t\t\t\t],\n\t\t\t});\n\t\t} else {\n\t\t\tthis.canvas = isc.HLayout.create({\n\t\t\t\tdefaultLayoutAlign: \"center\",\n\t\t\t\tmembers: [this._img],\n\t\t\t});\n\t\t}\n\n\t\t// Call the superclass's init method\n\t\tthis.Super(\"init\", arguments);\n\t},\n\n\t/**\n\t * Updates the image source when a new value is set.\n\t * If the value is not provided, it sets the source to a blank image.\n\t *\n\t * @param {string|null} newValue - the new content value, or `null` to clear the image.\n\t * @returns {object} - the updated `BizContentImageItem` instance.\n\t */\n\tsetValue: function (newValue) {\n\t\t// Ensure the image is updated only if the canvas is initialized and the value is not user-set\n\t\tif (this.canvas != null && !this.userSetValue) {\n\t\t\tif (newValue) {\n\t\t\t\t// Construct the URL with required query parameters\n\t\t\t\tconst url =\n\t\t\t\t\tSKYVE.Util.CONTEXT_URL +\n\t\t\t\t\t\"content?_n=\" +\n\t\t\t\t\tnewValue +\n\t\t\t\t\t\"&_doc=\" +\n\t\t\t\t\tthis.form._view._mod +\n\t\t\t\t\t\".\" +\n\t\t\t\t\tthis.form._view._doc +\n\t\t\t\t\t\"&_b=\" +\n\t\t\t\t\tthis.name.replaceAll(\"_\", \".\") +\n\t\t\t\t\t\"&_w=\" +\n\t\t\t\t\t(this._img.getWidth() - 20) + // -20 for the border\n\t\t\t\t\t\"&_h=\" +\n\t\t\t\t\t(this._img.getHeight() - 20); // -20 for the border\n\t\t\t\t// Update the image source\n\t\t\t\tthis._img.setSrc(url);\n\t\t\t} else {\n\t\t\t\t// If no value, display a blank image\n\t\t\t\tthis._img.setSrc(\"[SKIN]blank.gif\");\n\t\t\t}\n\t\t}\n\n\t\t// Call the superclass's setValue method\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tinheritsFrom: \"canvas\",\n\tname: \"bizContentImage\",\n\teditorType: \"BizContentImageItem\",\n});\n\n/**\n * Implements the BizLookupDescriptionItem widget.\n * Extends CanvasItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizLookupDescriptionItem\", isc.CanvasItem);\n\nisc.BizLookupDescriptionItem.addProperties({\n\theight: 20,\n\twidth: \"*\",\n\trowSpan: \"*\",\n\tendRow: false,\n\tstartRow: false,\n\tcanFocus: true,\n\tshouldSaveValue: true, // This is an editable data item\n\tfetchMissingValues: false, // These are defined for the combo but also need to be here on the canvas\n\tautoFetchData: false, // Don't let the canvas autofetch, the combo on the canvas does this\n\n\t// Based on document permissions\n\tcanCreate: false,\n\tcanUpdate: false,\n\n\t// Conditions to evaluate from the view widget definition\n\tcanPick: true,\n\tcanEdit: true,\n\tcanAdd: true,\n\tcanClear: true,\n});\n\nisc.BizLookupDescriptionItem.addMethods({\n\t/**\n\t * Initializes the combo box with the given configuration.\n\t * @param {Object} config - the configuration object for the combo box.\n\t * @param {boolean} config.allowEmptyValue - specifies if an empty value is allowed.\n\t * @param {string} config.textAlign - the alignment of the text within the combo box.\n\t * @param {Object} config.optionDataSource - the data source for the options of the combo box.\n\t * @param {string} config.valueField - the field representing the value in the options.\n\t * @param {string} config.displayField - the field representing the display value in the options.\n\t * @param {Object} config.pickListFields - the fields for the pick list.\n\t * @param {Object} config.filterFields - the fields to use for filtering.\n\t * @param {Object} config.params - additional parameters for filtering.\n\t */\n\tinit: function (config) {\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\tconst combo = {\n\t\t\tname: \"_combo\",\n\t\t\ttype: \"comboBox\",\n\t\t\tshowTitle: false,\n\t\t\twidth: \"*\",\n\t\t\ttextAlign: config.textAlign,\n\t\t\tselectOnFocus: true,\n\t\t\tfetchMissingValues: false,\n\t\t\tautoFetchData: false,\n\t\t\tuseClientFiltering: false,\n\t\t\tcachePickListResults: false,\n\t\t\tallowEmptyValue: config.allowEmptyValue,\n\t\t\toptionDataSource: config.optionDataSource,\n\t\t\tvalueField: config.valueField,\n\t\t\tdisplayField: config.displayField,\n\t\t\tpickListFields: config.pickListFields,\n\t\t\tfilterFields: config.filterFields,\n\t\t\tpickListProperties: {\n\t\t\t\t/**\n\t\t\t\t * Filters data based on the provided criteria and updates the request properties.\n\t\t\t\t * @param {Object} criteria - the filter criteria.\n\t\t\t\t * @param {function} callback - the callback function to call after filtering.\n\t\t\t\t * @param {Object} requestProperties - the request properties to be updated.\n\t\t\t\t */\n\t\t\t\tfilterData: function (criteria, callback, requestProperties) {\n\t\t\t\t\tif (requestProperties) {\n\t\t\t\t\t\tif (!requestProperties.params) {\n\t\t\t\t\t\t\trequestProperties.params = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\trequestProperties = { params: {} };\n\t\t\t\t\t}\n\n\t\t\t\t\trequestProperties.params._c = me._view.gather(false)._c;\n\t\t\t\t\tif (me._view._b) {\n\t\t\t\t\t\trequestProperties.params._b = me._view._b;\n\t\t\t\t\t}\n\t\t\t\t\trequestProperties.params._cc = \"\"; // continue conversation\n\t\t\t\t\tthis.Super(\"filterData\", arguments);\n\t\t\t\t},\n\t\t\t},\n\t\t\tcompleteOnTab: true,\n\t\t\ttextMatchStyle: \"substring\",\n\n\t\t\t/**\n\t\t\t * Gets and modifies the filter criteria used for the pick list.\n\t\t\t * This method extends the default filter criteria by converting it using BizUtil functions\n\t\t\t * and adding any additional parameters specified in the configuration.\n\t\t\t *\n\t\t\t * @returns {Object} the modified filter criteria object containing:\n\t\t\t *   - the base criteria from the parent class\n\t\t\t *   - converted criteria using BizUtil.convertFilterCriteria\n\t\t\t *   - additional parameters from config.params if specified\n\t\t\t */\n\t\t\tgetPickListFilterCriteria: function () {\n\t\t\t\tlet result = this.Super(\"getPickListFilterCriteria\", arguments);\n\t\t\t\tisc.BizUtil.convertFilterCriteria(result);\n\t\t\t\tif (config.params) {\n\t\t\t\t\tresult = isc.BizUtil.completeFilterCriteria(\n\t\t\t\t\t\tresult,\n\t\t\t\t\t\tconfig.params,\n\t\t\t\t\t\tme._view,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Shows the pick list dropdown and marks the data source for dropdown behavior.\n\t\t\t * If the option data source supports criteria comparison, sets a flag indicating\n\t\t\t * this is a dropdown operation.\n\t\t\t *\n\t\t\t * @override\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tshowPicker: function () {\n\t\t\t\tconst optionDataSource = this.getOptionDataSource();\n\t\t\t\tif (optionDataSource && optionDataSource.compareCriteria) {\n\t\t\t\t\toptionDataSource._drop = true;\n\t\t\t\t}\n\t\t\t\tthis.Super(\"showPicker\");\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the change event of the combo box.\n\t\t\t * @param {DynamicForm} form - the form containing the combo box.\n\t\t\t * @param {Canvas} item - the combo box item.\n\t\t\t * @param {string} value - the new value selected.\n\t\t\t */\n\t\t\tchanged: function (form, item, value) {\n\t\t\t\tif (this.getDisplayValue() == value) {\n\t\t\t\t\tme.Super(\"setValue\", null);\n\t\t\t\t} else {\n\t\t\t\t\tme.Super(\"setValue\", [value]);\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tme.bizPicked(me.form, me, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t * Handles the blur event of the combo box.\n\t\t\t * @param {DynamicForm} form - the form containing the combo box.\n\t\t\t * @param {Canvas} item - the combo box item.\n\t\t\t */\n\t\t\tblur: (form, item) => {\n\t\t\t\tif (this.getValue() == null) {\n\t\t\t\t\tconst itemValue = item.getValue();\n\t\t\t\t\tif (itemValue && itemValue != \"\") {\n\t\t\t\t\t\titem.setValue(\"\"); // blank the combobox\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tvalueMap: {},\n\t\t};\n\n\t\t// Create the form with editable state\n\t\tif (config.editable) {\n\t\t\tthis._form = isc.DynamicForm.create({\n\t\t\t\twriteFormTag: false,\n\t\t\t\tnumCols: 2,\n\t\t\t\tcolWidths: [\"*\", 65],\n\t\t\t\tmargin: 0,\n\t\t\t\tcellPadding: 0,\n\t\t\t});\n\n\t\t\tthis._splitButton = isc.BizUtil.createSplitButton(\n\t\t\t\t\"Pick\",\n\t\t\t\tnull,\n\t\t\t\tfalse,\n\t\t\t\t\"Pick a record\",\n\t\t\t\t() => {\n\t\t\t\t\tconst pickList = isc.BizUtil.getPickList(this, config.params, this._view);\n\t\t\t\t\tpickList.setDataSource(config.optionDataSource);\n\t\t\t\t\tisc.WindowStack.popup(this.getPageRect(), \"Pick\", true, [pickList]);\n\t\t\t\t},\n\t\t\t\t\"Other Options\",\n\t\t\t\tthis._form,\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Edit\",\n\t\t\t\t\t\ticon: \"icons/zoom.gif\",\n\t\t\t\t\t\tclick: (event) => {\n\t\t\t\t\t\t\tthis.zoom(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\t\t\t\treturn this.canUpdate && this.canEdit && this.getValue() != null;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"New\",\n\t\t\t\t\t\ticon: \"icons/new.png\",\n\t\t\t\t\t\tclick: (event) => {\n\t\t\t\t\t\t\tconst newParams = config.params\n\t\t\t\t\t\t\t\t? isc.BizUtil.addFilterRequestParams({}, config.params, this._view)\n\t\t\t\t\t\t\t\t: {};\n\t\t\t\t\t\t\tthis.zoom(true, newParams);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\t\t\t\treturn this.canCreate && this.canAdd;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Clear\",\n\t\t\t\t\t\ticon: \"icons/delete.png\",\n\t\t\t\t\t\tclick: (event) => {\n\t\t\t\t\t\t\tthis.setValue(null);\n\t\t\t\t\t\t\tthis.bizCleared(this.form, this, null);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\t\t\t\treturn this.canClear;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t);\n\n\t\t\tthis._form.setItems([\n\t\t\t\tcombo,\n\t\t\t\t{\n\t\t\t\t\tname: \"_splitButton\",\n\t\t\t\t\tshowTitle: false,\n\t\t\t\t\ttype: \"canvas\",\n\t\t\t\t\tcanvas: this._splitButton,\n\t\t\t\t\talign: \"right\",\n\t\t\t\t},\n\t\t\t]);\n\t\t} else {\n\t\t\tthis._form = isc.DynamicForm.create({\n\t\t\t\twriteFormTag: false,\n\t\t\t\tnumCols: 1,\n\t\t\t\tcolWidths: [\"*\"],\n\t\t\t});\n\n\t\t\tthis._form.setItems([combo]);\n\t\t}\n\n\t\tthis.canvas = this._form;\n\t\tthis.Super(\"init\", arguments);\n\t},\n\n\t/**\n\t * Sets the value of the combo box.\n\t * @param {string} newValue - the new value to set.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (this.canvas != null) {\n\t\t\tif (this.userSetValue) {\n\t\t\t\tthis.bizPicked(this.form, this, newValue);\n\t\t\t} else {\n\t\t\t\tthis._form.getItem(\"_combo\").setValue(newValue);\n\t\t\t}\n\t\t}\n\n\t\tthis.Super(\"setValue\", [newValue]);\n\t},\n\n\t/**\n\t * Focuses the combo box item.\n\t */\n\tfocusInItem: function () {\n\t\tif (this._form) {\n\t\t\tthis._form.getItem(\"_combo\").focusInItem();\n\t\t}\n\t},\n\n\t/**\n\t * A placeholder method for when a business entity is added.\n\t * @param {DynamicForm} form - the form containing the item.\n\t * @param {Canvas} item - the item added.\n\t * @param {string} value - the value of the item added.\n\t */\n\tbizAdded: function (form, item, value) {\n\t\t// No operation - overridden in server-side definition if required\n\t},\n\n\t/**\n\t * A placeholder method for when a business entity is edited.\n\t * @param {DynamicForm} form - the form containing the item.\n\t * @param {Canvas} item - the item edited.\n\t * @param {string} value - the value of the item edited.\n\t */\n\tbizEdited: function (form, item, value) {\n\t\t// No operation - overridden in server-side definition if required\n\t},\n\n\t/**\n\t * A placeholder method for when a business entity is picked.\n\t * @param {DynamicForm} form - the form containing the item.\n\t * @param {Canvas} item - the item picked.\n\t * @param {string} value - the value of the item picked.\n\t */\n\tbizPicked: function (form, item, value) {\n\t\t// No operation - overridden in server-side definition if required\n\t},\n\n\t/**\n\t * A placeholder method for when a business entity is cleared.\n\t * @param {DynamicForm} form - the form containing the item.\n\t * @param {Canvas} item - the item cleared.\n\t * @param {string} value - the value of the item cleared.\n\t */\n\tbizCleared: function (form, item, value) {\n\t\t// No operation - overridden in server-side definition if required\n\t},\n\n\t/**\n\t * Sets the value map from the fetched server data.\n\t * @param {Object} values The values fetched from the server.\n\t */\n\tsetValueMapFromEditView: function (values) {\n\t\tthis._setValueMap(\n\t\t\tvalues[this.name],\n\t\t\tvalues[this.name + \"_\" + this.displayField],\n\t\t);\n\t},\n\n\t/**\n\t * Sets the value map from a picked record.\n\t * @param {Object} values - the picked record values.\n\t */\n\tsetValueMapFromPickList: function (values) {\n\t\tthis._setValueMap(values.bizId, values[this.displayField]);\n\t},\n\n\t/**\n\t * Internal method to set the value map for the combo box.\n\t * @param {string} bizId - the business ID.\n\t * @param {string} display - the display value.\n\t */\n\t_setValueMap: function (bizId, display) {\n\t\tif (bizId) {\n\t\t\tconst valueMap = {};\n\t\t\tvalueMap[bizId] = display || \"<unknown>\";\n\t\t\tthis._form.getItem(\"_combo\").setValueMap(valueMap);\n\t\t\tthis._form.getItem(\"_combo\").setValue(bizId);\n\t\t}\n\t},\n\n\t/**\n\t * Enables or disables the pick functionality depending on the `canPick` property.\n\t * Disables the combo box and split button (if available) when `canPick` is false.\n\t *\n\t * @returns {void}\n\t */\n\tenableDisablePick: function () {\n\t\t// Enable or disable the combo box based on the canPick property\n\t\tthis._form.getItem(\"_combo\").setDisabled(!this.canPick);\n\n\t\t// If there's a split button (editable), disable its first member based on canPick\n\t\tif (this._splitButton) {\n\t\t\tthis._splitButton.getMember(0).setDisabled(!this.canPick);\n\t\t}\n\t},\n\n\t/**\n\t * Zooms into a view, either for a new record or an existing one, based on the `zoomToNew` flag.\n\t * The view is populated with parameters passed through `newParams`, and a validation check occurs before zooming.\n\t *\n\t * @param {boolean} zoomToNew - a flag indicating whether to zoom to a new record (`true`) or an existing one (`false`).\n\t * @param {Object|null|undefined} [newParams] - a map of parameter names to expressions to evaluate.\n\t *        Can be `null` or `undefined` if no new parameters are needed.\n\t * @returns {void}\n\t */\n\tzoom: function (zoomToNew, newParams) {\n\t\tconst mod = isc.DataSource.get(this.optionDataSource).modoc;\n\t\tconst dotIndex = mod.indexOf(\".\");\n\t\tconst doc = mod.substring(dotIndex + 1);\n\t\tconst modName = mod.substring(0, dotIndex);\n\n\t\t// Fetch the edit view using BizUtil\n\t\tisc.BizUtil.getEditView(modName, doc, (view) => {\n\t\t\t// Determine the view binding for proper view context\n\t\t\tconst viewBinding = this._view._b\n\t\t\t\t? `${this._view._b}.${this.name}`\n\t\t\t\t: this.name;\n\t\t\tconst fromRect = this.getPageRect();\n\n\t\t\tif (zoomToNew) {\n\t\t\t\t// Handle case for zooming into a new record\n\t\t\t\tconst required = this.required;\n\t\t\t\tif (required) {\n\t\t\t\t\tthis.setRequired(false);\n\t\t\t\t}\n\n\t\t\t\tconst instance = this._view.gather(true);\n\t\t\t\tif (instance) {\n\t\t\t\t\t// Apply changes before zooming in\n\t\t\t\t\tif (instance._apply || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\tdelete instance._apply;\n\t\t\t\t\t\tthis._view.saveInstance(true, null, (data, success) => {\n\t\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\t\tthis.setRequired(required); // Reset required flag\n\t\t\t\t\t\t\t\tisc.WindowStack.popup(fromRect, \"New\", false, [view]);\n\t\t\t\t\t\t\t\tview.newInstance(newParams, viewBinding, instance._c, false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setRequired(required); // Reset required flag\n\t\t\t\t\t\tisc.WindowStack.popup(fromRect, \"New\", false, [view]);\n\t\t\t\t\t\tview.newInstance(newParams, viewBinding, instance._c, false);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tisc.warn(\"You cannot zoom in until you fix the problems found\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Handle case for zooming into an existing record\n\t\t\t\tconst instance = this._view.gather(true);\n\t\t\t\tif (instance) {\n\t\t\t\t\t// Apply changes before zooming in\n\t\t\t\t\tif (instance._apply || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\tdelete instance._apply;\n\t\t\t\t\t\tthis._view.saveInstance(true, null, (data, success) => {\n\t\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\t\tisc.WindowStack.popup(fromRect, \"Edit\", false, [view]);\n\t\t\t\t\t\t\t\tview.editInstance(this.getValue(), viewBinding, instance._c, false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tisc.WindowStack.popup(fromRect, \"Edit\", false, [view]);\n\t\t\t\t\t\tview.editInstance(this.getValue(), viewBinding, instance._c, false);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tisc.warn(\"You cannot zoom in until you fix the problems found\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n});\n\nisc.SimpleType.create({\n\tinheritsFrom: \"comboBox\",\n\tname: \"bizLookupDescription\",\n\teditorType: \"BizLookupDescriptionItem\",\n});\n\n/**\n * Implements the BizCompleteItem widget.\n * Extends ComboBoxItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizCompleteItem\", isc.ComboBoxItem);\n\nisc.BizCompleteItem.addProperties({\n\toptionDataSource: isc.BizUtil.COMPLETE_DATA_SOURCE,\n\tshowPickerIcon: true, // NB false wrecks the style sheet for the picker - no borders etc\n\tfetchMissingValues: false,\n\tautoFetchData: false,\n\tuseClientFiltering: false,\n\tcachePickListResults: false,\n\ttextMatchStyle: \"substring\",\n\tvalueField: \"value\",\n\tdisplayField: \"value\",\n\tselectOnFocus: true,\n\tcompleteOnTab: true,\n});\n\nisc.BizCompleteItem.addMethods({\n\t/**\n\t * Initializes the `BizCompleteItem` with configuration settings and sets up the pick list properties.\n\t *\n\t * @param {Object} config - the configuration object passed to initialize the component.\n\t * @param {string} config._a - a property used to configure how unknown values are handled. If 'constrain', unknown values are not allowed.\n\t * @param {string} config._b - a property used for setting attributes in the request.\n\t * @returns {void}\n\t */\n\tinit: function (config) {\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\t// Check if the '_a' configuration property is 'constrain' and adjust addUnknownValues accordingly\n\t\tif (config._a === \"constrain\") {\n\t\t\tthis.addUnknownValues = false;\n\t\t}\n\n\t\t// Setup the pick list properties\n\t\tthis.pickListProperties = {\n\t\t\t/**\n\t\t\t * Custom filterData method for handling request properties and parameters.\n\t\t\t *\n\t\t\t * @param {Object} criteria - the filtering criteria used for the request.\n\t\t\t * @param {function} callback - the callback function to invoke once data is filtered.\n\t\t\t * @param {Object} requestProperties - the properties for the request, including parameters.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tfilterData: function (criteria, callback, requestProperties) {\n\t\t\t\t// Ensure parameters are included in requestProperties\n\t\t\t\tif (!requestProperties) {\n\t\t\t\t\trequestProperties = {};\n\t\t\t\t}\n\t\t\t\tif (!requestProperties.params) {\n\t\t\t\t\trequestProperties.params = {};\n\t\t\t\t}\n\n\t\t\t\t// Set additional parameters for the request\n\t\t\t\trequestProperties.params._attr = config._b;\n\t\t\t\trequestProperties.params._a = config._a;\n\n\t\t\t\t// These parameters are required by Bizlet.complete() on the server-side (if defined)\n\t\t\t\trequestProperties.params._c = me.form._view.gather(false)._c;\n\t\t\t\tif (me.form._view._b) {\n\t\t\t\t\trequestProperties.params._b = me.form._view._b;\n\t\t\t\t}\n\n\t\t\t\t// Call the superclass's filterData method\n\t\t\t\tthis.Super(\"filterData\", arguments);\n\t\t\t},\n\t\t};\n\n\t\t// Call the superclass's init method to complete the initialization\n\t\tthis.Super(\"init\", arguments);\n\t},\n});\n\nisc.SimpleType.create({\n\tinheritsFrom: \"comboBox\",\n\tname: \"bizComplete\",\n\teditorType: \"BizCompleteItem\",\n});\n\n// CKEditor is loaded on the fly when required\n// NB: This is declared with 'var' to ensure global scope\nvar CKEDITOR = null;\n\n/**\n * Implements the BizHTMLItem widget.\n * Extends CanvasItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizHTMLItem\", isc.CanvasItem);\n\nisc.BizHTMLItem.addProperties({\n\twidth: \"*\",\n\theight: \"200px\",\n\trowSpan: \"*\",\n\tendRow: false,\n\tstartRow: false,\n\tcanFocus: true,\n\tshouldSaveValue: true, // This is an editable data item\n});\n\nisc.BizHTMLItem.addMethods({\n\t/**\n\t * Initializes the BizHTMLItem with a configured HTML pane and an edit button to manage HTML content.\n\t * Sets up CKEditor for editing HTML content if available and configures mention markers if defined.\n\t *\n\t * @param {Object} config - the configuration object for initializing the BizHTMLItem.\n\t * @param {number} config.width - the width of the HTML pane.\n\t * @param {number} config.height - the height of the HTML pane.\n\t * @param {string} [config.mentionMarkers] - a comma-separated list of mention markers to configure CKEditor mentions.\n\t * @returns {void}\n\t */\n\tinit: function (config) {\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\t// Create the HTML pane for displaying content\n\t\tthis._pane = isc.HTMLPane.create({\n\t\t\twidth: config.width,\n\t\t\theight: config.height,\n\t\t\tisGroup: true,\n\t\t\tstyleName: \"bizhubRoundedBorder\",\n\t\t\tgroupBorderCSS: \"1px solid #bfbfbf\",\n\t\t\tmargin: 1,\n\t\t\tgroupLabelBackgroundColor: \"transparent\",\n\t\t\tpadding: 10,\n\t\t\tcontents: \"Empty\",\n\t\t});\n\n\t\t// Create an edit button for triggering the HTML editor (CKEditor)\n\t\tthis._editButton = isc.IButton.create({\n\t\t\twidth: 40,\n\t\t\ttitle: \"Edit\",\n\t\t\tcanHover: true,\n\t\t\tgetHoverHTML() {\n\t\t\t\treturn \"Edit the HTML\";\n\t\t\t},\n\t\t\t/**\n\t\t\t * Handles the click event to toggle the CKEditor for editing.\n\t\t\t * Loads CKEditor script if not already loaded.\n\t\t\t *\n\t\t\t * @param {Event} editEvent - the event triggered when the edit button is clicked.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tclick: function (editEvent) {\n\t\t\t\tif (CKEDITOR) {\n\t\t\t\t\tthis._show();\n\t\t\t\t} else {\n\t\t\t\t\tSKYVE.Util.loadJS(\"ckeditor/ckeditor.js\", function () {\n\t\t\t\t\t\tme._editButton._show();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Displays the CKEditor inside a newly created holder canvas.\n\t\t\t * Configures CKEditor and initializes mention markers if defined in config.\n\t\t\t *\n\t\t\t * @returns {isc.Canvas} - the holder canvas containing the CKEditor instance.\n\t\t\t */\n\t\t\t_show: () => {\n\t\t\t\tconst owningView = this.form._view;\n\t\t\t\tconst formValues = owningView.gather(false);\n\n\t\t\t\tconst holder = isc.Canvas.create({\n\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\theight: \"100%\",\n\t\t\t\t\tmargin: 5,\n\t\t\t\t});\n\t\t\t\tholder.setContents(\n\t\t\t\t\t'<div style=\"width:100%;height:100%\" id=\"_CKEditor\"></div>',\n\t\t\t\t);\n\t\t\t\tholder.draw = function () {\n\t\t\t\t\tthis.Super(\"draw\");\n\n\t\t\t\t\t// Set CKEditor configuration\n\t\t\t\t\tCKEDITOR.config.filebrowserImageBrowseUrl =\n\t\t\t\t\t\t\"pages/htmlEdit/browseImages.jsp?_doc=\" +\n\t\t\t\t\t\towningView._mod +\n\t\t\t\t\t\t\".\" +\n\t\t\t\t\t\towningView._doc +\n\t\t\t\t\t\t\"&_id=\" +\n\t\t\t\t\t\tformValues[\"bizId\"];\n\t\t\t\t\tCKEDITOR.config.filebrowserBrowseUrl =\n\t\t\t\t\t\t\"pages/htmlEdit/browseDocuments.jsp?_doc=\" +\n\t\t\t\t\t\towningView._mod +\n\t\t\t\t\t\t\".\" +\n\t\t\t\t\t\towningView._doc +\n\t\t\t\t\t\t\"&_id=\" +\n\t\t\t\t\t\tformValues[\"bizId\"];\n\t\t\t\t\tCKEDITOR.config.resize_enabled = false;\n\t\t\t\t\tCKEDITOR.config.skin = \"moono-lisa\";\n\t\t\t\t\tCKEDITOR.config.autoUpdateElement = false;\n\t\t\t\t\tCKEDITOR.config.baseFloatZIndex = 9000000;\n\t\t\t\t\tCKEDITOR.config.toolbar = [\n\t\t\t\t\t\t[\"Source\", \"-\", \"NewPage\", \"Preview\"],\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"Cut\",\n\t\t\t\t\t\t\t\"Copy\",\n\t\t\t\t\t\t\t\"Paste\",\n\t\t\t\t\t\t\t\"PasteText\",\n\t\t\t\t\t\t\t\"PasteFromWord\",\n\t\t\t\t\t\t\t\"-\",\n\t\t\t\t\t\t\t\"Print\",\n\t\t\t\t\t\t\t\"SpellChecker\",\n\t\t\t\t\t\t\t\"Scayt\",\n\t\t\t\t\t\t],\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"Undo\",\n\t\t\t\t\t\t\t\"Redo\",\n\t\t\t\t\t\t\t\"-\",\n\t\t\t\t\t\t\t\"Find\",\n\t\t\t\t\t\t\t\"Replace\",\n\t\t\t\t\t\t\t\"-\",\n\t\t\t\t\t\t\t\"SelectAll\",\n\t\t\t\t\t\t\t\"RemoveFormat\",\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"/\",\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"Bold\",\n\t\t\t\t\t\t\t\"Italic\",\n\t\t\t\t\t\t\t\"Underline\",\n\t\t\t\t\t\t\t\"Strike\",\n\t\t\t\t\t\t\t\"-\",\n\t\t\t\t\t\t\t\"Subscript\",\n\t\t\t\t\t\t\t\"Superscript\",\n\t\t\t\t\t\t],\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"NumberedList\",\n\t\t\t\t\t\t\t\"BulletedList\",\n\t\t\t\t\t\t\t\"-\",\n\t\t\t\t\t\t\t\"Outdent\",\n\t\t\t\t\t\t\t\"Indent\",\n\t\t\t\t\t\t\t\"Blockquote\",\n\t\t\t\t\t\t\t\"CreateDiv\",\n\t\t\t\t\t\t],\n\t\t\t\t\t\t[\"JustifyLeft\", \"JustifyCenter\", \"JustifyRight\", \"JustifyBlock\"],\n\t\t\t\t\t\t[\"Link\", \"Unlink\", \"Anchor\"],\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"Image\",\n\t\t\t\t\t\t\t\"Flash\",\n\t\t\t\t\t\t\t\"Table\",\n\t\t\t\t\t\t\t\"HorizontalRule\",\n\t\t\t\t\t\t\t\"Smiley\",\n\t\t\t\t\t\t\t\"SpecialChar\",\n\t\t\t\t\t\t\t\"PageBreak\",\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"/\",\n\t\t\t\t\t\t[\"Format\", \"Font\", \"FontSize\"],\n\t\t\t\t\t\t[\"TextColor\", \"BGColor\"],\n\t\t\t\t\t\t[\"Maximize\", \"ShowBlocks\"],\n\t\t\t\t\t];\n\n\t\t\t\t\t// Configure mention markers if provided in config\n\t\t\t\t\tif (config.mentionMarkers) {\n\t\t\t\t\t\tconst feed = function (options, callback) {\n\t\t\t\t\t\t\tconst values = me.form._view.gather(false);\n\t\t\t\t\t\t\tconst requestProperties = {\n\t\t\t\t\t\t\t\tparams: { _attr: me.name, _a: \"suggest\", _c: values._c },\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (me.form._view._b) {\n\t\t\t\t\t\t\t\trequestProperties.params._b = me.form._view._b;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tisc.BizUtil.COMPLETE_DATA_SOURCE.fetchData(\n\t\t\t\t\t\t\t\t{ value: options.marker + options.query },\n\t\t\t\t\t\t\t\tfunction (response) {\n\t\t\t\t\t\t\t\t\tif (response && response.data) {\n\t\t\t\t\t\t\t\t\t\tfor (let i = 0, l = response.data.length; i < l; i++) {\n\t\t\t\t\t\t\t\t\t\t\tconst data = response.data[i];\n\t\t\t\t\t\t\t\t\t\t\tdata.id = i;\n\t\t\t\t\t\t\t\t\t\t\tdata.name = data.value.substring(1);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcallback(response.data);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trequestProperties,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst markers = config.mentionMarkers.split(\",\");\n\t\t\t\t\t\tconst mentions = [];\n\t\t\t\t\t\tfor (let i = 0, l = markers.length; i < l; i++) {\n\t\t\t\t\t\t\tconst marker = markers[i];\n\t\t\t\t\t\t\tif (marker.length > 1) {\n\t\t\t\t\t\t\t\tconst first = marker.substring(0, 1);\n\t\t\t\t\t\t\t\tconst second = marker.substring(1, 2);\n\t\t\t\t\t\t\t\tmentions.add({\n\t\t\t\t\t\t\t\t\tfeed: feed,\n\t\t\t\t\t\t\t\t\tmarker: first,\n\t\t\t\t\t\t\t\t\tminChars: 0,\n\t\t\t\t\t\t\t\t\tpattern: new RegExp(\n\t\t\t\t\t\t\t\t\t\t\"\\\\\" + first + \"[^\\\\\" + first + \"\\\\\" + second + \"]*$\",\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcache: false,\n\t\t\t\t\t\t\t\t\tthrottle: 500,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmentions.add({\n\t\t\t\t\t\t\t\t\tfeed: feed,\n\t\t\t\t\t\t\t\t\tmarker: marker,\n\t\t\t\t\t\t\t\t\tminChars: 0,\n\t\t\t\t\t\t\t\t\tcache: false,\n\t\t\t\t\t\t\t\t\tthrottle: 500,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tCKEDITOR.config.mentions = mentions;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set styles for bold and italic to align with Jasper report styles\n\t\t\t\t\tCKEDITOR.config.coreStyles_bold = {\n\t\t\t\t\t\telement: \"b\",\n\t\t\t\t\t\toverrides: \"strong\",\n\t\t\t\t\t};\n\t\t\t\t\tCKEDITOR.config.coreStyles_italic = { element: \"i\", overrides: \"em\" };\n\n\t\t\t\t\tme._editor = CKEDITOR.replace(\"_CKEditor\", {\n\t\t\t\t\t\tcustomConfig: SKYVE.Util.ckEditorConfigFileUrl,\n\t\t\t\t\t});\n\t\t\t\t\tme._editor.setData(me.getValue());\n\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t// Open the CKEditor popup window\n\t\t\t\tisc.WindowStack.popup(\n\t\t\t\t\tnull,\n\t\t\t\t\t\"Edit HTML\",\n\t\t\t\t\ttrue,\n\t\t\t\t\t[\n\t\t\t\t\t\tholder,\n\t\t\t\t\t\tisc.HLayout.create({\n\t\t\t\t\t\t\tmembersMargin: 5,\n\t\t\t\t\t\t\tmargin: 5,\n\t\t\t\t\t\t\talign: \"right\",\n\t\t\t\t\t\t\tmembers: [\n\t\t\t\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\t\t\t\twidth: 60,\n\t\t\t\t\t\t\t\t\ttitle: \"Apply\",\n\t\t\t\t\t\t\t\t\tclick: (applyEvent) => {\n\t\t\t\t\t\t\t\t\t\tthis.setValue(this._editor.getData());\n\t\t\t\t\t\t\t\t\t\tisc.WindowStack.popoff(false);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\t\t\t\twidth: 60,\n\t\t\t\t\t\t\t\t\ttitle: \"Cancel\",\n\t\t\t\t\t\t\t\t\tclick: function (applyEvent) {\n\t\t\t\t\t\t\t\t\t\tisc.WindowStack.popoff(false);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t\t420,\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\n\t\t// Create the canvas layout containing the HTML pane and edit button\n\t\tthis.canvas = isc.HLayout.create({\n\t\t\tdefaultLayoutAlign: \"center\",\n\t\t\tmembers: [\n\t\t\t\tthis._pane,\n\t\t\t\tisc.LayoutSpacer.create({ width: 3 }),\n\t\t\t\tthis._editButton,\n\t\t\t],\n\t\t});\n\n\t\t// Call the superclass's init method\n\t\tthis.Super(\"init\", arguments);\n\t},\n\n\t/**\n\t * Sets the value of the HTML content and updates the displayed HTML in the pane.\n\t *\n\t * @param {string} newValue - the new value to set for the HTML content.\n\t * @returns {string} - the new value after setting it.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (this.canvas != null && !this.userSetValue) {\n\t\t\tif (newValue) {\n\t\t\t\tthis._pane.setContents(newValue);\n\t\t\t} else {\n\t\t\t\tthis._pane.setContents(\" \"); // Avoid using an empty string\n\t\t\t}\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tinheritsFrom: \"canvas\",\n\tname: \"bizHTML\",\n\teditorType: \"BizHTMLItem\",\n});\n\n/**\n * Implements the GeometryItem widget.\n * Extends CanvasItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"GeometryItem\", isc.CanvasItem);\n\nisc.GeometryItem.addClassProperties({\n\tvalidOperators: [\n\t\t\"geoWithin\",\n\t\t\"geoContains\",\n\t\t\"geoOverlaps\",\n\t\t\"geoDisjoint\",\n\t\t\"geoIntersects\",\n\t\t\"geoTouches\",\n\t\t\"geoCrosses\",\n\t\t\"geoEquals\",\n\t\t\"isNull\",\n\t\t\"notNull\",\n\t],\n});\n\nisc.GeometryItem.addClassMethods({\n\t/**\n\t * Formats the geometry value to a readable string.\n\t *\n\t * @param {string} value - the geometry value to format.\n\t * @returns {string} the formatted geometry type (e.g., 'Point', 'Line', 'Polygon') or an empty string if the value does not match any known geometry types.\n\t */\n\tformat: function (value) {\n\t\tif (value) {\n\t\t\t// Check for different geometry types and return corresponding labels\n\t\t\tif (value.startsWith(\"POINT\")) {\n\t\t\t\treturn \"Point\";\n\t\t\t} else if (value.startsWith(\"LINESTRING\")) {\n\t\t\t\treturn \"Line\";\n\t\t\t} else if (value.startsWith(\"POLYGON\")) {\n\t\t\t\treturn \"Polygon\";\n\t\t\t}\n\t\t}\n\n\t\t// Return an empty string if no match is found\n\t\treturn \"\";\n\t},\n});\n\nisc.GeometryItem.addProperties({\n\tshowHint: false,\n\twidth: 100,\n\toperator: \"geoWithin\",\n\tvalidOperators: isc.GeometryItem.validOperators,\n\tshouldSaveValue: true, // This is an editable data item\n});\n\nisc.GeometryItem.addMethods({\n\t/**\n\t * Creates the canvas layout for the geometry item.\n\t *\n\t * This method builds a canvas containing a DynamicForm with a text item, which displays a value\n\t * and allows interaction with a map picker to set or view geometry.\n\t *\n\t * @returns {isc.HLayout} the created layout containing the DynamicForm and map picker functionality.\n\t */\n\tcreateCanvas: function () {\n\t\t// Icons configuration for interaction with the map\n\t\tconst icons = [\n\t\t\t{\n\t\t\t\tsrc: \"icons/map.png\",\n\t\t\t\tprompt: \"Click to set or see the geometry on a map\",\n\t\t\t\tclick: (form, item, icon) => {\n\t\t\t\t\tconst options = this.drawingTools\n\t\t\t\t\t\t? { field: this, drawingTools: this.drawingTools }\n\t\t\t\t\t\t: { field: this };\n\t\t\t\t\tisc.WindowStack.popup(item.getPageRect(), \"Map\", true, [\n\t\t\t\t\t\tisc.BizMapPicker.create(options),\n\t\t\t\t\t]);\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\t// Return a HLayout to avoid form nesting within filter criteria\n\t\treturn isc.HLayout.create({\n\t\t\theight: 1,\n\t\t\twidth: \"100%\",\n\t\t\tmembers: [\n\t\t\t\tisc.DynamicForm.create({\n\t\t\t\t\twriteFormTag: false, // Prevent nested forms\n\t\t\t\t\tnumCols: 1,\n\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tcellPadding: 0,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"value\",\n\t\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\t\tshowTitle: false,\n\t\t\t\t\t\t\twidth: \"*\",\n\t\t\t\t\t\t\thint: this.hint,\n\t\t\t\t\t\t\tshowHintInField: true,\n\t\t\t\t\t\t\tselectOnFocus: true,\n\t\t\t\t\t\t\tchanged: (form, item, value) => {\n\t\t\t\t\t\t\t\tthis.storeValue(value, false);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ticons: icons,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t},\n\n\t/**\n\t * Displays a value on the geometry item.\n\t *\n\t * This method sets the value of the text field in the canvas to the provided display value.\n\t *\n\t * @param {string} displayValue - the value to be displayed in the text field.\n\t * @param {string} dataValue - the raw data value.\n\t * @param {isc.DynamicForm} form - the form containing the item.\n\t * @param {isc.FormItem} item - the form item to update.\n\t */\n\tshowValue: function (displayValue, dataValue, form, item) {\n\t\titem.canvas.getMember(0).setValue(\"value\", displayValue);\n\t},\n\n\t/**\n\t * Sets the hint for the geometry item.\n\t *\n\t * This method updates the hint text displayed in the input field.\n\t *\n\t * @param {string} hint - the hint text to set for the item.\n\t */\n\tsetHint: function (hint) {\n\t\tthis.canvas.getMember(0).setHint(hint);\n\t},\n\n\t/**\n\t * Sets the value from the BizMapPicker.\n\t *\n\t * This method is invoked from the BizMapPicker to store the selected value.\n\t * It also triggers the change events.\n\t *\n\t * @param {string} newValue - the new value to store in the geometry item.\n\t */\n\tsetValueFromPicker: function (newValue) {\n\t\t// Store the new value and trigger change events\n\t\tthis.storeValue(newValue, true);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"geometry\",\n\tinheritsFrom: \"canvas\",\n\teditorType: \"GeometryItem\",\n\tdefaultOperator: \"gWithin\",\n\tvalidOperators: isc.GeometryItem.validOperators,\n});\n\n/**\n * Implements the GeometryMapItem widget.\n * Extends CanvasItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"GeometryMapItem\", isc.CanvasItem);\n\nisc.GeometryMapItem.addProperties({\n\twidth: \"*\",\n\trowSpan: \"*\",\n\tendRow: false,\n\tstartRow: false,\n\tcanFocus: false,\n\tshouldSaveValue: true, // This is an editable data item\n});\n\nisc.GeometryMapItem.addMethods({\n\t/**\n\t * Creates the canvas layout for the geometry map item.\n\t *\n\t * This method returns a centered HLayout for the map item canvas.\n\t *\n\t * @returns {isc.HLayout} The created HLayout for the geometry map item.\n\t */\n\tcreateCanvas: function () {\n\t\treturn isc.HLayout.create({ defaultLayoutAlign: \"center\" });\n\t},\n\n\t/**\n\t * Displays a value on the geometry map item.\n\t *\n\t * This method sets up a map picker widget inside the canvas if it has not been set from the picker already.\n\t * It also configures options based on the width, height, and available drawing tools.\n\t *\n\t * @param {string} displayValue - the display value for the geometry map item (currently not used in this method).\n\t * @param {string} dataValue - the raw data value (currently not used in this method).\n\t */\n\tshowValue: function (displayValue, dataValue) {\n\t\t// If value has not been set from the picker already, initialize the map picker\n\t\tif (!this._valueSetFromPicker) {\n\t\t\tconst options = {\n\t\t\t\tfield: this,\n\t\t\t\twidth: this.width || \"100%\", // Use provided width or default to '100%'\n\t\t\t\theight: this.height || \"100%\", // Use provided height or default to '100%'\n\t\t\t};\n\n\t\t\t// Add drawing tools if available\n\t\t\tif (this.drawingTools) {\n\t\t\t\toptions.drawingTools = this.drawingTools;\n\t\t\t}\n\n\t\t\t// Set the map picker as a member of the canvas\n\t\t\tthis.canvas.setMembers([isc.BizMapPicker.create(options)]);\n\t\t}\n\t},\n\n\t/**\n\t * Disables or enables the geometry map item.\n\t *\n\t * This method sets the disabled state of the map picker inside the canvas.\n\t *\n\t * @param {boolean} disabled - whether to disable the item (true) or enable it (false).\n\t */\n\tsetDisabled: function (disabled) {\n\t\tthis.canvas.getMember(0).setDisabled(disabled);\n\t},\n\n\t/**\n\t * Sets the value from the BizMapPicker.\n\t *\n\t * This method is called from the BizMapPicker to store the selected value, trigger the `changed` event,\n\t * and ensure that the value is only set once from the picker.\n\t *\n\t * @param {string} newValue - the new value selected from the BizMapPicker.\n\t */\n\tsetValueFromPicker: function (newValue) {\n\t\tthis._valueSetFromPicker = true;\n\t\tthis.setValue(newValue); // Store the selected value\n\t\tdelete this._valueSetFromPicker;\n\n\t\t// Trigger the `changed` event if defined\n\t\tif (this.changed) {\n\t\t\tthis.changed(this.form, this, newValue);\n\t\t}\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"geometryMap\",\n\tinheritsFrom: \"canvas\",\n\teditorType: \"GeometryMapItem\",\n\tvalidOperators: isc.GeometryItem.validOperators,\n});\n","/**\n * Implements the WindowStack UI component.\n */\nisc.ClassFactory.defineClass(\"WindowStack\");\n\nisc.WindowStack.addClassProperties({\n\t_margin: 0, // The amount to size the window in by\n\t_stack: [], // Stack of windows showing\n\t_unused: [], // Unused pool of windows that can be used\n\t_index: 0, // Window number\n\n\t/**\n\t * Displays a popup window.\n\t * @param {Array} fromRect - the rectangle [left, top, width, height] from which the window animates.\n\t * @param {string} title - the window title.\n\t * @param {boolean} showCloseButton - whether to show the close button in the window title bar.\n\t * @param {Array} items - the items to show in the window.\n\t * @param {number} [height] - the height of the window. Can specify without width.\n\t * @param {number} [width] - the width of the window. Can specify null as height to only set width.\n\t * @param {boolean} [closeButtonRefreshes] - whether to refresh the opener on close button click.\n\t */\n\tpopup: function (\n\t\tfromRect,\n\t\ttitle,\n\t\tshowCloseButton,\n\t\titems,\n\t\theight,\n\t\twidth,\n\t\tcloseButtonRefreshes,\n\t) {\n\t\tisc.WindowStack._margin += 50;\n\t\tlet result = isc.WindowStack._unused.pop();\n\n\t\tconst sizeSet = width || height;\n\t\tconst windowWidth = width || isc.Page.getWidth() - isc.WindowStack._margin;\n\t\tconst windowHeight = height || isc.Page.getHeight() - isc.WindowStack._margin;\n\n\t\tif (result) {\n\t\t\tresult.setTitle(title);\n\t\t\tresult.sizeSet = sizeSet;\n\t\t\tif (items) {\n\t\t\t\tresult.addItems(items);\n\t\t\t}\n\t\t\tresult.setWidth(windowWidth);\n\t\t\tresult.setHeight(windowHeight);\n\t\t\tresult.closeClick = () => {\n\t\t\t\tisc.WindowStack.popoff(closeButtonRefreshes);\n\t\t\t};\n\t\t} else {\n\t\t\tresult = isc.Window.create({\n\t\t\t\tID: \"Window\" + isc.WindowStack._index++,\n\t\t\t\theaderIconDefaults: {\n\t\t\t\t\tsrc: \"window/skyve_fav.png\",\n\t\t\t\t\twidth: 16,\n\t\t\t\t\theight: 16,\n\t\t\t\t},\n\t\t\t\tautoCenter: true,\n\t\t\t\tisModal: true,\n\t\t\t\tshowModalMask: true,\n\t\t\t\tshowMinimizeButton: false,\n\t\t\t\tmodalMaskOpacity: 25,\n\t\t\t\tcanDragReposition: true,\n\t\t\t\tcanDragResize: true,\n\t\t\t\tshowShadow: true,\n\t\t\t\tshadowSoftness: 10,\n\t\t\t\tshadowOffset: 0,\n\t\t\t\ttitle,\n\t\t\t\titems,\n\t\t\t\twidth: windowWidth,\n\t\t\t\theight: windowHeight,\n\t\t\t\tsizeSet,\n\t\t\t\tcloseClick: function () {\n\t\t\t\t\tisc.WindowStack.popoff(closeButtonRefreshes);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tresult.setShowCloseButton(showCloseButton);\n\t\tresult._fromRect = fromRect; // Store the fromRect for animation\n\t\tisc.WindowStack._stack.push(result);\n\t\tresult.show();\n\t},\n\n\t/**\n\t * Closes the topmost window in the stack.\n\t * @param {boolean} [rerenderOpener] - whether to call rerender() on the opener view.\n\t */\n\tpopoff: function (rerenderOpener) {\n\t\tconst opener = isc.WindowStack.getOpener();\n\t\tconst result = isc.WindowStack._stack.pop();\n\n\t\tif (result) {\n\t\t\tisc.WindowStack._animateClose(result);\n\t\t\tconst items = result.items;\n\n\t\t\tif (items) {\n\t\t\t\tif (CKEDITOR && CKEDITOR.instances._CKEditor) {\n\t\t\t\t\tCKEDITOR.instances._CKEditor.destroy();\n\t\t\t\t\titems[0].destroy();\n\t\t\t\t} else {\n\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\tif (item._vm) {\n\t\t\t\t\t\t\t// Has a values manager - must be an edit view\n\t\t\t\t\t\t\tisc.BizUtil.relinquishEditView(item);\n\t\t\t\t\t\t} else if (isc.isA.BizListGrid(item)) {\n\t\t\t\t\t\t\t// PickList\n\t\t\t\t\t\t\tisc.BizUtil.relinquishPickList(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tresult.removeItems(items);\n\t\t\t}\n\n\t\t\tisc.WindowStack._unused.push(result);\n\t\t\tisc.WindowStack._margin -= 50;\n\n\t\t\tif (opener) {\n\t\t\t\tif (opener.resume) {\n\t\t\t\t\topener.resume();\n\t\t\t\t}\n\t\t\t\tif (rerenderOpener && opener.rerender) {\n\t\t\t\t\topener.rerender();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Gets the view in the window that opened the current window.\n\t * @returns {Object} - the opener view.\n\t */\n\tgetOpener: function () {\n\t\tif (isc.WindowStack._stack.length <= 1) {\n\t\t\t// Opener is the harness current view\n\t\t\treturn isc.BizUtil.getCurrentView();\n\t\t}\n\t\treturn isc.WindowStack._stack[isc.WindowStack._stack.length - 2].items[0];\n\t},\n\n\t/**\n\t * Resizes all windows in the stack to fit the current page dimensions.\n\t */\n\tresize: function () {\n\t\tlet windowWidth = isc.Page.getWidth() - 50;\n\t\tlet windowHeight = isc.Page.getHeight() - 50;\n\n\t\tisc.WindowStack._stack.forEach((window) => {\n\t\t\tif (!window.sizeSet) {\n\t\t\t\twindow.setWidth(windowWidth);\n\t\t\t\twindow.setHeight(windowHeight);\n\t\t\t\twindowWidth -= 50;\n\t\t\t\twindowHeight -= 50;\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Wireframe canvas used for animations.\n\t * @type {Object}\n\t */\n\t_wireframe: isc.Canvas.create({\n\t\tborder: \"3px ridge #E1E1E1\",\n\t\tbackgroundColor: \"whitesmoke\",\n\t\topacity: 75,\n\t\tautoDraw: false,\n\t}),\n\n\t_animateClosedDuration: 400, // Duration for the close animation\n\n\t/** Animates the closing of a window.\n\t * @param {Object} window - the window to animate.\n\t */\n\t_animateClose: function (window) {\n\t\tif (window._fromRect) {\n\t\t\tconst toLeft = window.getLeft();\n\t\t\tconst toTop = window.getTop();\n\t\t\tconst toWidth = window.getVisibleWidth();\n\t\t\tconst toHeight = window.getVisibleHeight();\n\n\t\t\t// Initialize the wireframe to the current window rect\n\t\t\tisc.WindowStack._wireframe.setRect([toLeft, toTop, toWidth, toHeight]);\n\t\t\tisc.WindowStack._wireframe.show();\n\t\t\tisc.WindowStack._wireframe.bringToFront();\n\t\t}\n\n\t\twindow.hide();\n\n\t\tif (window._fromRect) {\n\t\t\t// Animate the wireframe to the specified rect\n\t\t\tisc.WindowStack._wireframe.animateRect(\n\t\t\t\twindow._fromRect[0],\n\t\t\t\twindow._fromRect[1],\n\t\t\t\twindow._fromRect[2],\n\t\t\t\twindow._fromRect[3],\n\t\t\t\t\"isc.WindowStack._wireframe.hide();\",\n\t\t\t\tisc.WindowStack._animateClosedDuration,\n\t\t\t);\n\t\t}\n\t},\n});\n","/**\n * Implements ReportDialog in the UI.\n */\nisc.ClassFactory.defineClass(\"ReportDialog\");\n\nisc.ReportDialog.addClassProperties({\n\t/**\n\t * Predefined page formats with dimensions in points.\n\t * @constant {Object.<string, {width: number, height: number}>}\n\t */\n\t_pageFormats: {\n\t\tLETTER: { width: 612, height: 792 },\n\t\tNOTE: { width: 540, height: 720 },\n\t\tLEGAL: { width: 612, height: 1008 },\n\t\tA0: { width: 2380, height: 3368 },\n\t\tA1: { width: 1684, height: 2380 },\n\t\tA2: { width: 1190, height: 1684 },\n\t\tA3: { width: 842, height: 1190 },\n\t\tA4: { width: 595, height: 842 },\n\t\tA5: { width: 421, height: 595 },\n\t\tA6: { width: 297, height: 421 },\n\t\tA7: { width: 210, height: 297 },\n\t\tA8: { width: 148, height: 210 },\n\t\tA9: { width: 105, height: 148 },\n\t\tA10: { width: 74, height: 105 },\n\t\tB0: { width: 2836, height: 4008 },\n\t\tB1: { width: 2004, height: 2836 },\n\t\tB2: { width: 1418, height: 2004 },\n\t\tB3: { width: 1002, height: 1418 },\n\t\tB4: { width: 709, height: 1002 },\n\t\tB5: { width: 501, height: 709 },\n\t\tARCH_E: { width: 595, height: 842 },\n\t\tARCH_D: { width: 595, height: 842 },\n\t\tARCH_C: { width: 595, height: 842 },\n\t\tARCH_B: { width: 595, height: 842 },\n\t\tARCH_A: { width: 595, height: 842 },\n\t\tFLSA: { width: 612, height: 936 },\n\t\tFLSE: { width: 612, height: 936 },\n\t\tHALFLETTER: { width: 396, height: 612 },\n\t\t\"11x17\": { width: 792, height: 1224 },\n\t\tLEDGER: { width: 1224, height: 792 },\n\t},\n\n\t/**\n\t * Defines the available columns for selection.\n\t * @constant {Array<Object>}\n\t */\n\t_available: [\n\t\t{ name: \"title\", title: \"Available Columns\", required: true },\n\t\t{\n\t\t\tname: \"line\",\n\t\t\ttitle: \"Line\",\n\t\t\ttype: \"integer\",\n\t\t\teditorType: \"spinner\",\n\t\t\teditorProperties: {\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 1,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9 }],\n\t\t\t},\n\t\t\twidth: 50,\n\t\t},\n\t\t{\n\t\t\tname: \"width\",\n\t\t\ttitle: \"Width\",\n\t\t\ttype: \"integer\",\n\t\t\teditorType: \"spinner\",\n\t\t\teditorProperties: {\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 10,\n\t\t\t\tdefaultValue: 1,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t\twidth: 50,\n\t\t},\n\t],\n\n\t/**\n\t * Defines the selected columns for export.\n\t * @constant {Array<Object>}\n\t */\n\t_selected: [\n\t\t{ name: \"title\", title: \"Exported Columns\", required: true },\n\t\t{\n\t\t\tname: \"line\",\n\t\t\ttitle: \"Line\",\n\t\t\ttype: \"integer\",\n\t\t\teditorType: \"spinner\",\n\t\t\teditorProperties: {\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 1,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9 }],\n\t\t\t},\n\t\t\twidth: 50,\n\t\t},\n\t\t{\n\t\t\tname: \"width\",\n\t\t\ttitle: \"Width\",\n\t\t\ttype: \"integer\",\n\t\t\teditorType: \"spinner\",\n\t\t\teditorProperties: {\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 10,\n\t\t\t\tdefaultValue: 1,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t\twidth: 50,\n\t\t},\n\t],\n\n\t/**\n\t * Manages form values for the report dialog.\n\t * @constant {Object}\n\t */\n\t_valuesManager: isc.ValuesManager.create(),\n});\n\nisc.ReportDialog.addClassProperties({\n\t_columnList: isc.ListGrid.create({\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\tcanDragRecordsOut: true,\n\t\tcanAcceptDroppedRecords: true,\n\t\tdragDataAction: \"move\",\n\t\talternateRecordStyles: true,\n\t\tautoFetchData: false,\n\t\tleaveScrollbarGap: false,\n\t\tshowHeaderContextMenu: false,\n\t\tfields: isc.ReportDialog._available,\n\t}),\n\n\t_selectedColumnList: isc.ListGrid.create({\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\tcanDragRecordsOut: true,\n\t\tcanAcceptDroppedRecords: true,\n\t\tdragDataAction: \"move\",\n\t\tcanReorderRecords: true,\n\t\tcanRemoveRecords: false,\n\t\tcanEdit: true,\n\t\teditByCell: true,\n\t\teditEvent: \"click\",\n\t\tmodalEditing: true,\n\t\talternateRecordStyles: true,\n\t\tautoFetchData: false,\n\t\tpreventDuplicates: true,\n\t\tleaveScrollbarGap: false,\n\t\tshowHeaderContextMenu: false,\n\t\tfields: isc.ReportDialog._selected,\n\t}),\n});\n\nisc.ReportDialog.addClassProperties({\n\t/**\n\t * Generates valueMap and valueIcons for report formats.\n\t *\n\t * @private\n\t * @param {string[]} allowedFormats - list of allowed report formats.\n\t * @param {string[]} [defaultFormats=[]] - list of preferred default formats.\n\t * @returns {{ valueMap: Object, valueIcons: Object, defaultValue: string|null }} - An object containing valueMap, valueIcons, and the default format.\n\t */\n\t_generateReportFormatMappings: function (allowedFormats, defaultFormats = []) {\n\t\tconst formatMappings = {\n\t\t\tpdf: { label: \"PDF (Adobe Portable Document Format)\", icon: \"pdf\" },\n\t\t\tdocx: { label: \"DOCX (Word Document - Office 2007)\", icon: \"rtf\" },\n\t\t\txlsx: { label: \"XLSX (Excel Document - Office 2007)\", icon: \"xls\" },\n\t\t\tpptx: { label: \"PPTX (PowerPoint Document - Office 2007)\", icon: \"pptx\" },\n\t\t\txls: { label: \"XLS (Excel - 98-2003)\", icon: \"xls\" },\n\t\t\trtf: { label: \"RTF (Rich Text Format)\", icon: \"rtf\" },\n\t\t\tods: { label: \"ODS (Open Document Spreadsheet Format)\", icon: \"oo\" },\n\t\t\todt: { label: \"ODT (Open Document Text Format)\", icon: \"oo\" },\n\t\t\thtml: { label: \"HTML (HyperText Markup Language)\", icon: \"html\" },\n\t\t\tcsv: { label: \"CSV (Comma Separated Values)\", icon: \"csv\" },\n\t\t\txml: { label: \"XML (JRXML Format)\", icon: \"xml\" },\n\t\t\ttxt: { label: \"TXT (Text Format)\", icon: \"txt\" },\n\t\t};\n\n\t\tconst valueMap = {};\n\t\tconst valueIcons = {};\n\t\tlet defaultValue = defaultFormats.length ? null : allowedFormats[0];\n\n\t\tallowedFormats.forEach((format) => {\n\t\t\tif (formatMappings[format]) {\n\t\t\t\tvalueMap[format] = formatMappings[format].label;\n\t\t\t\tvalueIcons[format] = formatMappings[format].icon;\n\t\t\t} else {\n\t\t\t\tvalueMap[format] = format;\n\t\t\t\tvalueIcons[format] = format;\n\t\t\t}\n\n\t\t\t// Set default value if it's one of the preferred defaults\n\t\t\tif (!defaultValue && defaultFormats.includes(format)) {\n\t\t\t\tdefaultValue = format;\n\t\t\t}\n\t\t});\n\n\t\treturn { valueMap, valueIcons, defaultValue };\n\t},\n\t/**\n\t * Creates a picklist for selecting Jasper report formats.\n\t *\n\t * @private\n\t * @param {number} colSpan - the column span for the picklist.\n\t * @param {Function} onChangeFunction - callback function triggered on change.\n\t * @returns {Object} - configuration object for the picklist.\n\t */\n\t_createJasperReportFormatPickList: function (colSpan, onChangeFunction) {\n\t\tconst { valueMap, valueIcons, defaultValue } =\n\t\t\tthis._generateReportFormatMappings(SKYVE.Util.allowedReportFormats);\n\n\t\treturn {\n\t\t\tname: \"reportFormat\",\n\t\t\tshowTitle: false,\n\t\t\ttype: \"select\",\n\t\t\twidth: 300,\n\t\t\trequired: true,\n\t\t\tvalueMap,\n\t\t\timageURLPrefix: \"reporting/\",\n\t\t\timageURLSuffix: \".png\",\n\t\t\tvalueIcons,\n\t\t\tdefaultValue,\n\t\t\tcolSpan,\n\t\t\tchange: onChangeFunction,\n\t\t};\n\t},\n});\n\nisc.ReportDialog.addClassProperties({\n\t/**\n\t * Layout for the column selector, including buttons to move columns between lists.\n\t * @type {HLayout}\n\t */\n\t_columnSelectorLayout: isc.HLayout.create({\n\t\tmembersMargin: 10,\n\t\theight: \"100%\", // Height is needed to center the arrow\n\t\tmembers: [\n\t\t\tisc.ReportDialog._columnList,\n\t\t\tisc.VLayout.create({\n\t\t\t\tlayoutAlign: \"center\",\n\t\t\t\tmembersMargin: 10,\n\t\t\t\theight: 100,\n\t\t\t\tmembers: [\n\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\ticon: \"reporting/arrow_right.png\",\n\t\t\t\t\t\ticonWidth: 24,\n\t\t\t\t\t\ticonHeight: 24,\n\t\t\t\t\t\ticonAlign: \"center\",\n\t\t\t\t\t\twidth: 36,\n\t\t\t\t\t\theight: 36,\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Handles the click event to move selected columns into the report.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\treturn isc.ReportDialog._selectedColumnList.transferSelectedData(\n\t\t\t\t\t\t\t\tisc.ReportDialog._columnList,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcanHover: true,\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Returns the hover tooltip text.\n\t\t\t\t\t\t * @returns {string} tooltip text.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tgetHoverHTML: function () {\n\t\t\t\t\t\t\treturn \"Move the selected columns into the report\";\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\ticon: \"reporting/arrow_left.png\",\n\t\t\t\t\t\ticonWidth: 24,\n\t\t\t\t\t\ticonHeight: 24,\n\t\t\t\t\t\ticonAlign: \"center\",\n\t\t\t\t\t\twidth: 36,\n\t\t\t\t\t\theight: 36,\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Handles the click event to move selected columns out of the report.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\tisc.ReportDialog._columnList.transferSelectedData(\n\t\t\t\t\t\t\t\tisc.ReportDialog._selectedColumnList,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcanHover: true,\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Returns the hover tooltip text.\n\t\t\t\t\t\t * @returns {string} tooltip text.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tgetHoverHTML: function () {\n\t\t\t\t\t\t\treturn \"Move the selected columns out of the report\";\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t}),\n\t\t\tisc.ReportDialog._selectedColumnList,\n\t\t],\n\t}),\n\n\t/**\n\t * Form for configuring the report format.\n\t * @type {DynamicForm|null}\n\t */\n\t_reportFormatForm: null,\n\n\t/**\n\t * Form for configuring the page format, including size and orientation.\n\t * @type {DynamicForm}\n\t */\n\t_pageFormatForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ReportDialog._valuesManager,\n\t\tnumCols: 10,\n\t\tpadding: 15,\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"format\",\n\t\t\t\ttitle: \"Format\",\n\t\t\t\ttype: \"select\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tvalueMap: [\n\t\t\t\t\t\"LETTER\",\n\t\t\t\t\t\"NOTE\",\n\t\t\t\t\t\"LEGAL\",\n\t\t\t\t\t\"A0\",\n\t\t\t\t\t\"A1\",\n\t\t\t\t\t\"A2\",\n\t\t\t\t\t\"A3\",\n\t\t\t\t\t\"A4\",\n\t\t\t\t\t\"A5\",\n\t\t\t\t\t\"A6\",\n\t\t\t\t\t\"A7\",\n\t\t\t\t\t\"A8\",\n\t\t\t\t\t\"A9\",\n\t\t\t\t\t\"A10\",\n\t\t\t\t\t\"B0\",\n\t\t\t\t\t\"B1\",\n\t\t\t\t\t\"B2\",\n\t\t\t\t\t\"B3\",\n\t\t\t\t\t\"B4\",\n\t\t\t\t\t\"B5\",\n\t\t\t\t\t\"ARCH_E\",\n\t\t\t\t\t\"ARCH_D\",\n\t\t\t\t\t\"ARCH_C\",\n\t\t\t\t\t\"ARCH_B\",\n\t\t\t\t\t\"ARCH_A\",\n\t\t\t\t\t\"FLSA\",\n\t\t\t\t\t\"FLSE\",\n\t\t\t\t\t\"HALFLETTER\",\n\t\t\t\t\t\"11x17\",\n\t\t\t\t\t\"LEDGER\",\n\t\t\t\t],\n\t\t\t\tdefaultValue: \"A4\",\n\t\t\t\t/**\n\t\t\t\t * Handles the change event for the format dropdown.\n\t\t\t\t * Updates the width and height fields based on the selected format and orientation.\n\t\t\t\t * @param {DynamicForm} form - the form instance.\n\t\t\t\t * @param {FormItem} item - the form item that triggered the change.\n\t\t\t\t * @param {string} value - the new value of the format dropdown.\n\t\t\t\t * @param {string} oldValue - the previous value of the format dropdown.\n\t\t\t\t */\n\t\t\t\tchange: function (form, item, value, oldValue) {\n\t\t\t\t\tconst orientation = form.getItem(\"orientation\").getValue();\n\t\t\t\t\tconst { width, height } = isc.ReportDialog._pageFormats[value];\n\t\t\t\t\tform\n\t\t\t\t\t\t.getItem(\"width\")\n\t\t\t\t\t\t.setValue(orientation === \"portrait\" ? width : height);\n\t\t\t\t\tform\n\t\t\t\t\t\t.getItem(\"height\")\n\t\t\t\t\t\t.setValue(orientation === \"portrait\" ? height : width);\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"orientation\",\n\t\t\t\ttitle: \"Orientation\",\n\t\t\t\ttype: \"radioGroup\",\n\t\t\t\trequired: true,\n\t\t\t\tvalueMap: { portrait: \"Portrait\", landscape: \"Landscape\" },\n\t\t\t\tdefaultValue: \"portrait\",\n\t\t\t\t/**\n\t\t\t\t * Handles the change event for the orientation radio group.\n\t\t\t\t * Swaps the width and height values when the orientation changes.\n\t\t\t\t * @param {DynamicForm} form - the form instance.\n\t\t\t\t * \t\t@param {FormItem} item - the form item that triggered the change.\n\t\t\t\t * @param {string} value - the new value of the format dropdown.\n\t\t\t\t * @param {string} oldValue - the previous value of the format dropdown.\n\t\t\t\t */\n\t\t\t\tchange: function (form, item, value, oldValue) {\n\t\t\t\t\tconst widthItem = form.getItem(\"width\");\n\t\t\t\t\tconst heightItem = form.getItem(\"height\");\n\t\t\t\t\tconst width = widthItem.getValue();\n\t\t\t\t\twidthItem.setValue(heightItem.getValue());\n\t\t\t\t\theightItem.setValue(width);\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"width\",\n\t\t\t\ttitle: \"Width\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: isc.ReportDialog._pageFormats[\"A4\"].width,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"height\",\n\t\t\t\ttitle: \"Height\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: isc.ReportDialog._pageFormats[\"A4\"].height,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t],\n\t}),\n\n\t/**\n\t * Form for configuring the page margins.\n\t * @type {DynamicForm}\n\t */\n\t_marginsForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ReportDialog._valuesManager,\n\t\tnumCols: 8,\n\t\tpadding: 15,\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"top\",\n\t\t\t\ttitle: \"Top\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 20,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"bottom\",\n\t\t\t\ttitle: \"Bottom\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 20,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"left\",\n\t\t\t\ttitle: \"Left\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 20,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"right\",\n\t\t\t\ttitle: \"Right\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 20,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t],\n\t}),\n\n\t/**\n\t * Form for submitting the report configuration.\n\t * @type {DynamicForm}\n\t */\n\t_submitForm: isc.DynamicForm.create({\n\t\tautoDraw: true,\n\t\tcanSubmit: true,\n\t\tmethod: \"POST\",\n\t\titems: [\n\t\t\t{ name: \"values\", type: \"hidden\" },\n\t\t\t{ name: \"_c\", type: \"hidden\" },\n\t\t],\n\t}),\n\n\t_layout: null, // The entire interface\n\t_criteria: null, // The extra criteria defined on the query or model\n\t_tagId: null, // The bizId of the selected tag (if any) in the listgrid\n\t_dataSourceID: null, // The data source representing the server-side query or model\n\n\t/**\n\t * Creates a report panel with a button and a form.\n\t * @param {IButton} buttonDefn - the button to include in the panel.\n\t * @param {DynamicForm} formDefn - the form to display on the right-hand side.\n\t * @returns {HLayout} the configured HLayout instance.\n\t */\n\t_createReportPanel: function (buttonDefn, formDefn) {\n\t\treturn isc.HLayout.create({\n\t\t\tbackgroundImage: \"background.png\",\n\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\tmembersMargin: 5,\n\t\t\tmargin: 5,\n\t\t\tlayoutAlign: \"center\",\n\t\t\tmembers: [\n\t\t\t\tisc.VLayout.create({\n\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\twidth: 134,\n\t\t\t\t\theight: 130,\n\t\t\t\t\tlayoutAlign: \"center\",\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tmembersMargin: 10,\n\t\t\t\t\tmembers: [\n\t\t\t\t\t\tisc.HLayout.create({\n\t\t\t\t\t\t\twidth: 134,\n\t\t\t\t\t\t\talign: \"center\",\n\t\t\t\t\t\t\tmembers: [\n\t\t\t\t\t\t\t\tisc.Img.create({\n\t\t\t\t\t\t\t\t\timageType: \"normal\",\n\t\t\t\t\t\t\t\t\tsrc: \"reporting/reporting.png\",\n\t\t\t\t\t\t\t\t\theight: 96,\n\t\t\t\t\t\t\t\t\tlayoutAlign: \"center\",\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tisc.HLayout.create({\n\t\t\t\t\t\t\twidth: 134,\n\t\t\t\t\t\t\talign: \"center\",\n\t\t\t\t\t\t\tmembers: [buttonDefn],\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t}),\n\t\t\t\tformDefn,\n\t\t\t],\n\t\t});\n\t},\n\n\t/**\n\t * Constructs the export interface.\n\t */\n\t_createExport: function () {\n\t\tif (isc.ReportDialog._exportLayout == null) {\n\t\t\t/**\n\t\t\t * Handles the change event for the report format dropdown.\n\t\t\t * Updates form fields based on the selected format.\n\t\t\t * @param {DynamicForm} form - the form instance.\n\t\t\t * @param {FormItem} item - the form item that triggered the change.\n\t\t\t * @param {string} value - the new value of the format dropdown.\n\t\t\t * @param {string} oldValue - the previous value of the format dropdown.\n\t\t\t */\n\t\t\tconst changeHandler = function (form, item, value, oldValue) {\n\t\t\t\tconst isDocumentFormat = [\"pdf\", \"docx\", \"pptx\", \"rtf\", \"odt\"].includes(\n\t\t\t\t\tvalue,\n\t\t\t\t);\n\t\t\t\tconst isHtmlFormat = value === \"html\";\n\n\t\t\t\tform.getItem(\"isPaginated\").setValue(isDocumentFormat);\n\t\t\t\tform.getItem(\"isPretty\").setValue(isDocumentFormat || isHtmlFormat);\n\t\t\t\tform.getItem(\"showSummary\").setValue(isDocumentFormat || isHtmlFormat);\n\t\t\t\tform.getItem(\"fileNameSuffix\").setValue(`.${value}`);\n\t\t\t};\n\n\t\t\tisc.ReportDialog._reportFormatForm = isc.DynamicForm.create({\n\t\t\t\tvaluesManager: isc.ReportDialog._valuesManager,\n\t\t\t\tnumCols: 7,\n\t\t\t\tcolWidths: [60, 200, 40, 30, \"*\", 60, \"*\"],\n\t\t\t\tpadding: 15,\n\t\t\t\titems: [\n\t\t\t\t\tisc.ReportDialog._createJasperReportFormatPickList(3, changeHandler),\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"isPaginated\",\n\t\t\t\t\t\ttitle: \"Paginated Report\",\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"style\",\n\t\t\t\t\t\ttitle: \"Style\",\n\t\t\t\t\t\ttype: \"radioGroup\",\n\t\t\t\t\t\tvertical: true,\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\trowSpan: 2,\n\t\t\t\t\t\tvalueMap: { tabular: \"Tabular\", columnar: \"Columnar\" },\n\t\t\t\t\t\tdefaultValue: \"tabular\",\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Handles the change event for the style radio group.\n\t\t\t\t\t\t * Shows or hides table columns based on the selected style.\n\t\t\t\t\t\t * @param {DynamicForm} form - the form instance.\n\t\t\t\t\t\t * @param {FormItem} item - the form item that triggered the change.\n\t\t\t\t\t\t * @param {string} value - the new value of the radio group.\n\t\t\t\t\t\t * @param {string} oldValue- the previous value of the radio group.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tchange: function (form, item, value, oldValue) {\n\t\t\t\t\t\t\tconst isColumnar = value === \"columnar\";\n\t\t\t\t\t\t\tisc.ReportDialog._columnList[isColumnar ? \"hideField\" : \"showField\"](\n\t\t\t\t\t\t\t\t\"line\",\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tisc.ReportDialog._columnList[isColumnar ? \"hideField\" : \"showField\"](\n\t\t\t\t\t\t\t\t\"width\",\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tisc.ReportDialog._selectedColumnList[\n\t\t\t\t\t\t\t\tisColumnar ? \"hideField\" : \"showField\"\n\t\t\t\t\t\t\t](\"line\");\n\t\t\t\t\t\t\tisc.ReportDialog._selectedColumnList[\n\t\t\t\t\t\t\t\tisColumnar ? \"hideField\" : \"showField\"\n\t\t\t\t\t\t\t](\"width\");\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"fileNameNoSuffix\",\n\t\t\t\t\t\ttitle: \"Filename\",\n\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\tdefaultValue: \"export\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"fileNameSuffix\",\n\t\t\t\t\t\tshowTitle: false,\n\t\t\t\t\t\ttype: \"staticText\",\n\t\t\t\t\t\tstartRow: false,\n\t\t\t\t\t\tendRow: false,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"isPretty\",\n\t\t\t\t\t\ttitle: \"Pixel Perfect\",\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t},\n\t\t\t\t\t{ type: \"spacer\" },\n\t\t\t\t\t{ type: \"spacer\" },\n\t\t\t\t\t{ type: \"spacer\" },\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"showSummary\",\n\t\t\t\t\t\ttitle: \"Show Summary\",\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\n\t\t\t// Initialize the form with the first allowed report format\n\t\t\tchangeHandler(\n\t\t\t\tisc.ReportDialog._reportFormatForm,\n\t\t\t\tnull,\n\t\t\t\tSKYVE.Util.allowedReportFormats[0],\n\t\t\t\tnull,\n\t\t\t);\n\n\t\t\tisc.ReportDialog._exportLayout = isc.VLayout.create({\n\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\theight: \"100%\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\tautoDraw: true,\n\t\t\t\tmargin: 5,\n\t\t\t\tmembersMargin: 5,\n\t\t\t\tmembers: [\n\t\t\t\t\tisc.ReportDialog._createReportPanel(\n\t\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\t\ttitle: \"Generate\",\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Handles the click event to generate the report.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\tif (isc.ReportDialog._valuesManager.validate()) {\n\t\t\t\t\t\t\t\t\tconst values = isc.ReportDialog._valuesManager.getValues();\n\t\t\t\t\t\t\t\t\tvalues.columns = isc.ReportDialog._selectedColumnList.getData();\n\t\t\t\t\t\t\t\t\tvalues.ds = isc.ReportDialog._dataSourceID;\n\n\t\t\t\t\t\t\t\t\tif (isc.ReportDialog._criteria) {\n\t\t\t\t\t\t\t\t\t\tvalues.criteria = isc.ReportDialog._criteria;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (isc.ReportDialog._tagId) {\n\t\t\t\t\t\t\t\t\t\tvalues.tagId = isc.ReportDialog._tagId;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Use a standard form POST, HTML targeted to a blank window\n\t\t\t\t\t\t\t\t\tconst format = isc.ReportDialog._reportFormatForm\n\t\t\t\t\t\t\t\t\t\t.getItem(\"reportFormat\")\n\t\t\t\t\t\t\t\t\t\t.getValue();\n\t\t\t\t\t\t\t\t\tconst fileNameNoSuffix = isc.ReportDialog._reportFormatForm\n\t\t\t\t\t\t\t\t\t\t.getItem(\"fileNameNoSuffix\")\n\t\t\t\t\t\t\t\t\t\t.getValue();\n\t\t\t\t\t\t\t\t\tisc.ReportDialog._submitForm.setValue(\n\t\t\t\t\t\t\t\t\t\t\"values\",\n\t\t\t\t\t\t\t\t\t\tisc.JSON.encode(values, { prettyPrint: false }),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (isc.ReportDialog._c) {\n\t\t\t\t\t\t\t\t\t\tisc.ReportDialog._submitForm.setValue(\"_c\", isc.ReportDialog._c);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tisc.ReportDialog._submitForm.setAction(\n\t\t\t\t\t\t\t\t\t\t`export/${fileNameNoSuffix}.${format}`,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tisc.ReportDialog._submitForm.setTarget(\n\t\t\t\t\t\t\t\t\t\tformat === \"html\" ? \"_blank\" : \"_self\",\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tisc.ReportDialog._submitForm.submitForm();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tisc.VLayout.create({\n\t\t\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\t\t\tmargin: 0,\n\t\t\t\t\t\t\tmembersMargin: 5,\n\t\t\t\t\t\t\tmembers: [\n\t\t\t\t\t\t\t\tisc.VLayout.create({\n\t\t\t\t\t\t\t\t\tisGroup: true,\n\t\t\t\t\t\t\t\t\tgroupTitle: \"Report Format\",\n\t\t\t\t\t\t\t\t\tstyleName: \"bizhubRoundedBorder\",\n\t\t\t\t\t\t\t\t\tgroupBorderCSS: \"1px solid #bfbfbf\",\n\t\t\t\t\t\t\t\t\tmargin: 1,\n\t\t\t\t\t\t\t\t\tgroupLabelBackgroundColor: \"transparent\",\n\t\t\t\t\t\t\t\t\tgroupLabelStyleName: \"bizhubBorderLabel\",\n\t\t\t\t\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\t\t\t\t\tmembers: [isc.ReportDialog._reportFormatForm],\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tisc.VLayout.create({\n\t\t\t\t\t\t\t\t\tisGroup: true,\n\t\t\t\t\t\t\t\t\tgroupTitle: \"Page Format\",\n\t\t\t\t\t\t\t\t\tstyleName: \"bizhubRoundedBorder\",\n\t\t\t\t\t\t\t\t\tgroupBorderCSS: \"1px solid #bfbfbf\",\n\t\t\t\t\t\t\t\t\tmargin: 1,\n\t\t\t\t\t\t\t\t\tgroupLabelBackgroundColor: \"transparent\",\n\t\t\t\t\t\t\t\t\tgroupLabelStyleName: \"bizhubBorderLabel\",\n\t\t\t\t\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\t\t\t\t\tmembers: [isc.ReportDialog._pageFormatForm],\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tisc.VLayout.create({\n\t\t\t\t\t\t\t\t\tisGroup: true,\n\t\t\t\t\t\t\t\t\tgroupTitle: \"Margins\",\n\t\t\t\t\t\t\t\t\tstyleName: \"bizhubRoundedBorder\",\n\t\t\t\t\t\t\t\t\tgroupBorderCSS: \"1px solid #bfbfbf\",\n\t\t\t\t\t\t\t\t\tmargin: 1,\n\t\t\t\t\t\t\t\t\tgroupLabelBackgroundColor: \"transparent\",\n\t\t\t\t\t\t\t\t\tgroupLabelStyleName: \"bizhubBorderLabel\",\n\t\t\t\t\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\t\t\t\t\tmembers: [isc.ReportDialog._marginsForm],\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t\t\tisc.ReportDialog._columnSelectorLayout,\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Opens the export popup and sets up the necessary data for exporting.\n\t *\n\t * @param {string} dataSourceID - the ID of the data source (server-side query/model).\n\t * @param {string} _c - the web context identifier.\n\t * @param {Object} criteria - the criteria to apply to the server-side query or model.\n\t * @param {string} tagId - the tag ID of the selected tag from the list grid to apply server-side.\n\t * @param {Array} unselectedFields - data for the unselected fields in the field selection list grid.\n\t * @param {Array} selectedFields - data for the selected fields in the field selection list grid.\n\t */\n\tpopupExport: function (\n\t\tdataSourceID,\n\t\t_c,\n\t\tcriteria,\n\t\ttagId,\n\t\tunselectedFields,\n\t\tselectedFields,\n\t) {\n\t\tisc.ReportDialog._createExport();\n\t\tisc.ReportDialog._dataSourceID = dataSourceID;\n\t\tisc.ReportDialog._c = _c;\n\t\tisc.ReportDialog._criteria = criteria;\n\t\tisc.ReportDialog._tagId = tagId;\n\t\tisc.ReportDialog._columnList.setData(unselectedFields);\n\t\tisc.ReportDialog._selectedColumnList.setData(selectedFields);\n\t\tisc.WindowStack.popup(null, \"Reporting\", true, [\n\t\t\tisc.ReportDialog._exportLayout,\n\t\t]);\n\t},\n\n\t/**\n\t * Opens the report popup based on the view and parameters provided.\n\t *\n\t * @param {string} view - the view name.\n\t * @param {Object} params - the parameter map (name -> binding expression with {} if required).\n\t */\n\tpopupReport: function (view, params) {\n\t\tif (params && params._f) {\n\t\t\tconst { _f: format, ...paramsCopy } = params;\n\t\t\tisc.ReportDialog._redirectToReport(view, paramsCopy, format);\n\t\t} else if (params && params._e === \"Freemarker\") {\n\t\t\tif (!isc.ReportDialog._freemarkerReportLayout) {\n\t\t\t\tisc.ReportDialog._freemarkerReportLayout =\n\t\t\t\t\tisc.ReportDialog._createReportPanel(\n\t\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\t\ttitle: \"View\",\n\t\t\t\t\t\t\tID: \"_freemarkerReportViewButton\",\n\t\t\t\t\t\t\t_view: null,\n\t\t\t\t\t\t\t_params: null,\n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\tconst format = _freemarkerReportForm.getValue(\"reportFormat\");\n\t\t\t\t\t\t\t\tisc.ReportDialog._redirectToReport(this._view, this._params, format);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tisc.DynamicForm.create({\n\t\t\t\t\t\t\tID: \"_freemarkerReportForm\",\n\t\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t\t{ type: \"rowSpacer\" },\n\t\t\t\t\t\t\t\t{ type: \"rowSpacer\" },\n\t\t\t\t\t\t\t\tisc.ReportDialog._createFreemarkerReportFormatPickList(),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\t_freemarkerReportViewButton._view = view;\n\t\t\t_freemarkerReportViewButton._params = params;\n\t\t\tisc.WindowStack.popup(\n\t\t\t\tnull,\n\t\t\t\t\"Report\",\n\t\t\t\ttrue,\n\t\t\t\t[isc.ReportDialog._freemarkerReportLayout],\n\t\t\t\t180,\n\t\t\t\t480,\n\t\t\t);\n\t\t} else {\n\t\t\tif (!isc.ReportDialog._jasperReportLayout) {\n\t\t\t\tisc.ReportDialog._jasperReportLayout = isc.ReportDialog._createReportPanel(\n\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\ttitle: \"View\",\n\t\t\t\t\t\tID: \"_jasperReportViewButton\",\n\t\t\t\t\t\t_view: null,\n\t\t\t\t\t\t_params: null,\n\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\tconst format = _jasperReportForm.getValue(\"reportFormat\");\n\t\t\t\t\t\t\tisc.ReportDialog._redirectToReport(this._view, this._params, format);\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tisc.DynamicForm.create({\n\t\t\t\t\t\tID: \"_jasperReportForm\",\n\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t{ type: \"rowSpacer\" },\n\t\t\t\t\t\t\t{ type: \"rowSpacer\" },\n\t\t\t\t\t\t\tisc.ReportDialog._createJasperReportFormatPickList(\n\t\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t\tfunction (form, item, value, oldValue) {\n\t\t\t\t\t\t\t\t\t// No operation needed\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t],\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t_jasperReportViewButton._view = view;\n\t\t\t_jasperReportViewButton._params = params;\n\t\t\tisc.WindowStack.popup(\n\t\t\t\tnull,\n\t\t\t\t\"Report\",\n\t\t\t\ttrue,\n\t\t\t\t[isc.ReportDialog._jasperReportLayout],\n\t\t\t\t180,\n\t\t\t\t480,\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Redirects to the appropriate report URL based on the view, parameters, and format.\n\t *\n\t * @param {string} view - the view name.\n\t * @param {Object} params - the parameter map (name -> binding expression with {} if required).\n\t * @param {string} format - the format of the report (e.g., 'html', 'pdf').\n\t */\n\t_redirectToReport: function (view, params, format) {\n\t\tconst instance = view.gather(false); // Don't validate\n\t\tif (instance) {\n\t\t\tconst { _c: c, _b: b, bizId } = instance;\n\n\t\t\tlet src;\n\t\t\tif (params && params[\"_n\"]) {\n\t\t\t\tsrc = `report/${params[\"_n\"]}.${format}?_f=${format}${c ? `&_c=${c}` : \"\"}${b ? `&_b=${b}` : \"\"}${bizId ? `&_id=${bizId}` : \"\"}`;\n\t\t\t} else {\n\t\t\t\tsrc = `report/?_f=${format}${c ? `&_c=${c}` : \"\"}${b ? `&_b=${b}` : \"\"}${bizId ? `&_id=${bizId}` : \"\"}`;\n\t\t\t}\n\n\t\t\tif (params) {\n\t\t\t\tObject.keys(params).forEach((name) => {\n\t\t\t\t\tconst binding = params[name];\n\t\t\t\t\t// Encode URI and then encode '?' and '&' chars which are not encoded by encodeURI().\n\t\t\t\t\tsrc += `&${name}=${encodeURI(view.toDisplay(binding, instance)).replaceAll(\"?\", \"%3F\").replaceAll(\"&\", \"%26\")}`;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (format === \"html\") {\n\t\t\t\twindow.open(\n\t\t\t\t\tsrc,\n\t\t\t\t\t\"report\",\n\t\t\t\t\t\"location=0,status=0,scrollbars=1,resizable=1,width=800,height=600\",\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\twindow.location = src;\n\t\t\t}\n\t\t}\n\t},\n});\n","/**\n * Implements charting functionality.\n */\nisc.ClassFactory.defineClass(\"ChartDialog\");\n\nisc.ChartDialog.addClassProperties({\n\t_valuesManager: isc.ValuesManager.create(),\n});\n\nisc.ChartDialog.addClassProperties({\n\t_chartForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ChartDialog._valuesManager,\n\t\tnumCols: 6,\n\t\tcolWidths: [100, 120, 80, \"*\", 90, \"*\"],\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"type\",\n\t\t\t\ttype: \"enum\",\n\t\t\t\ttitle: \"Chart Type\",\n\t\t\t\twidth: \"*\",\n\t\t\t\tvalueMap: {\n\t\t\t\t\tline: \"Line\",\n\t\t\t\t\tlineArea: \"Line Area\",\n\t\t\t\t\tbar: \"Bar\",\n\t\t\t\t\thorizontalBar: \"Horizontal Bar\",\n\t\t\t\t\tradar: \"Radar\",\n\t\t\t\t\tpie: \"Pie\",\n\t\t\t\t\tdoughnut: \"Doughnut\",\n\t\t\t\t\tpolarArea: \"Polar Area\",\n\t\t\t\t},\n\t\t\t\trequired: true,\n\t\t\t},\n\t\t\t{ name: \"title\", type: \"text\", width: \"*\", title: \"Chart Title\" },\n\t\t\t{ name: \"label\", type: \"text\", width: \"*\", title: \"Data Label\" },\n\t\t],\n\t}),\n\n\t_categoryForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ChartDialog._valuesManager,\n\t\tnumCols: 7,\n\t\tcolWidths: [100, \"*\", 110, 160, 60, 60, 150],\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"categoryBinding\",\n\t\t\t\ttype: \"select\",\n\t\t\t\ttitle: \"Category Field\",\n\t\t\t\twidth: \"*\",\n\t\t\t\trequired: true,\n\t\t\t\tvalueMap: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"categoryBucket\",\n\t\t\t\ttype: \"enum\",\n\t\t\t\ttitle: \"Category Bucket\",\n\t\t\t\twidth: \"*\",\n\t\t\t\tallowEmptyValue: true,\n\t\t\t\tvalueMap: {\n\t\t\t\t\tNumericMultipleBucket: \"Numeric Multiple\",\n\t\t\t\t\tTextLengthBucket: \"Text Length\",\n\t\t\t\t\tTextStartsWithBucket: \"Text Starts With\",\n\t\t\t\t\tTemporalBucket: \"Temporal\",\n\t\t\t\t},\n\t\t\t\tredrawOnChange: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"numericMultiple\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\twidth: \"*\",\n\t\t\t\ttitle: \"Multiple\",\n\t\t\t\tmin: 1,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 100,\n\t\t\t\tvalidators: [{ type: \"requiredIf\", expression: \"item.isVisible()\" }],\n\t\t\t\tshowIf:\n\t\t\t\t\t\"form.getItem('categoryBucket').getValue() == 'NumericMultipleBucket'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"startsWithLength\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\twidth: \"*\",\n\t\t\t\ttitle: \"Length\",\n\t\t\t\tmin: 1,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 1,\n\t\t\t\tvalidators: [{ type: \"requiredIf\", expression: \"item.isVisible()\" }],\n\t\t\t\tshowIf:\n\t\t\t\t\t\"form.getItem('categoryBucket').getValue() == 'TextStartsWithBucket'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"startsWithCaseSensitive\",\n\t\t\t\ttype: \"checkbox\",\n\t\t\t\tallowEmptyValue: false,\n\t\t\t\ttitle: \"Case Sensitive\",\n\t\t\t\tshowTitle: false,\n\t\t\t\tdefaultValue: false,\n\t\t\t\tvalidators: [{ type: \"requiredIf\", expression: \"item.isVisible()\" }],\n\t\t\t\tshowIf:\n\t\t\t\t\t\"form.getItem('categoryBucket').getValue() == 'TextStartsWithBucket'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"temporalBucketType\",\n\t\t\t\ttype: \"enum\",\n\t\t\t\twidth: \"*\",\n\t\t\t\ttitle: \"Type\",\n\t\t\t\tcolSpan: 2,\n\t\t\t\tallowEmptyValue: false,\n\t\t\t\tvalueMap: {\n\t\t\t\t\tday: \"Day\",\n\t\t\t\t\tdayMonthYear: \"Day/Month/Year\",\n\t\t\t\t\thour: \"Hour\",\n\t\t\t\t\thourDay: \"Hour/Day\",\n\t\t\t\t\thourDayMonth: \"Hour/Day/Month\",\n\t\t\t\t\tminuteHour: \"Minute/Hour\",\n\t\t\t\t\tmonth: \"Month\",\n\t\t\t\t\tmonthYear: \"Month/Year\",\n\t\t\t\t\tsecondMinuteHour: \"Second/Minute/Hour\",\n\t\t\t\t\tyear: \"Year\",\n\t\t\t\t},\n\t\t\t\tvalidators: [{ type: \"requiredIf\", expression: \"item.isVisible()\" }],\n\t\t\t\tshowIf: \"form.getItem('categoryBucket').getValue() == 'TemporalBucket'\",\n\t\t\t},\n\t\t],\n\t}),\n\n\t_valueForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ChartDialog._valuesManager,\n\t\tnumCols: 4,\n\t\tcolWidths: [100, \"*\", 105, 100],\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"valueBinding\",\n\t\t\t\ttype: \"select\",\n\t\t\t\ttitle: \"Value Field\",\n\t\t\t\tstartRow: true,\n\t\t\t\twidth: \"*\",\n\t\t\t\trequired: true,\n\t\t\t\tvalueMap: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"valueFunction\",\n\t\t\t\ttype: \"enum\",\n\t\t\t\twidth: \"*\",\n\t\t\t\ttitle: \"Value Function\",\n\t\t\t\tvalueMap: [null, \"Count\", \"Avg\", \"Sum\", \"Min\", \"Max\"],\n\t\t\t},\n\t\t],\n\t}),\n\n\t_topForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ChartDialog._valuesManager,\n\t\tnumCols: 8,\n\t\tcolWidths: [30, 40, 60, 40, 130, 40, 100, 130],\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"topOn\",\n\t\t\t\ttype: \"checkbox\",\n\t\t\t\tallowEmptyValue: false,\n\t\t\t\tshowTitle: false,\n\t\t\t\tshowLabel: false,\n\t\t\t\tdefaultValue: false,\n\t\t\t\tredrawOnChange: true,\n\t\t\t\tchange: function (form, item, value, oldValue) {\n\t\t\t\t\tconst topItem = form.getItem(\"top\");\n\t\t\t\t\tconst topByItem = form.getItem(\"topBy\");\n\t\t\t\t\tconst topSortItem = form.getItem(\"topSort\");\n\t\t\t\t\tconst includeOthersItem = form.getItem(\"includeOthers\");\n\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\ttopItem.enable();\n\t\t\t\t\t\ttopByItem.enable();\n\t\t\t\t\t\ttopSortItem.enable();\n\t\t\t\t\t\tincludeOthersItem.enable();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!topItem.getValue()) {\n\t\t\t\t\t\t\ttopItem.setValue(\"10\");\n\t\t\t\t\t\t\ttopItem.clearErrors();\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttopItem.disable();\n\t\t\t\t\t\ttopByItem.disable();\n\t\t\t\t\t\ttopSortItem.disable();\n\t\t\t\t\t\tincludeOthersItem.disable();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"top\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\ttitle: \"Top\",\n\t\t\t\twidth: \"*\",\n\t\t\t\trequired: true,\n\t\t\t\tdisabled: true,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 10,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"topBy\",\n\t\t\t\ttype: \"radioGroup\",\n\t\t\t\ttitle: \"By\",\n\t\t\t\tvertical: false,\n\t\t\t\trequired: true,\n\t\t\t\tdisabled: true,\n\t\t\t\tdefaultValue: \"category\",\n\t\t\t\tvalueMap: { category: \"Category\", value: \"Value\" },\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"topSort\",\n\t\t\t\ttype: \"radioGroup\",\n\t\t\t\ttitle: \"Sort\",\n\t\t\t\tvertical: false,\n\t\t\t\trequired: true,\n\t\t\t\tdisabled: true,\n\t\t\t\tdefaultValue: \"ascending\",\n\t\t\t\tvalueMap: { ascending: \"Ascending\", descending: \"Descending\" },\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"includeOthers\",\n\t\t\t\ttype: \"checkbox\",\n\t\t\t\tallowEmptyValue: false,\n\t\t\t\ttitle: \"Include Others\",\n\t\t\t\tshowTitle: false,\n\t\t\t\tdisabled: true,\n\t\t\t\tdefaultValue: false,\n\t\t\t},\n\t\t],\n\t}),\n\n\t_orderForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ChartDialog._valuesManager,\n\t\tnumCols: 5,\n\t\tcolWidths: [30, 40, 130, 40, \"*\"],\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"orderOn\",\n\t\t\t\ttype: \"checkbox\",\n\t\t\t\tallowEmptyValue: false,\n\t\t\t\tshowTitle: false,\n\t\t\t\tshowLabel: false,\n\t\t\t\tdefaultValue: false,\n\t\t\t\tchange: function (form, item, value, oldValue) {\n\t\t\t\t\tconst orderByItem = form.getItem(\"orderBy\");\n\t\t\t\t\tconst orderSortItem = form.getItem(\"orderSort\");\n\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\torderByItem.enable();\n\t\t\t\t\t\torderSortItem.enable();\n\t\t\t\t\t} else {\n\t\t\t\t\t\torderByItem.disable();\n\t\t\t\t\t\torderSortItem.disable();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"orderBy\",\n\t\t\t\ttype: \"radioGroup\",\n\t\t\t\ttitle: \"By\",\n\t\t\t\tvertical: false,\n\t\t\t\trequired: true,\n\t\t\t\tdisabled: true,\n\t\t\t\tdefaultValue: \"category\",\n\t\t\t\tvalueMap: { category: \"Category\", value: \"Value\" },\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"orderSort\",\n\t\t\t\ttype: \"radioGroup\",\n\t\t\t\ttitle: \"Sort\",\n\t\t\t\tvertical: false,\n\t\t\t\tdisabled: true,\n\t\t\t\tdefaultValue: \"ascending\",\n\t\t\t\tvalueMap: { ascending: \"Ascending\", descending: \"Descending\" },\n\t\t\t},\n\t\t],\n\t}),\n\n\t_chart: null,\n\t_layout: null, // The entire interface\n\t_criteria: null, // The extra criteria defined on the query or model\n\t_tagId: null, // The bizId of the selected tag (if any) in the listgrid\n\t_dataSource: null, // The data source representing the server-side query or model\n\n\t/**\n\t * Creates a bordered layout with a title and members.\n\t * @param {string} title - the title of the border.\n\t * @param {Array} members - the layout members array.\n\t * @returns {isc.VLayout} the created layout.\n\t */\n\t_border: function (title, members) {\n\t\treturn isc.VLayout.create({\n\t\t\tisGroup: true,\n\t\t\tgroupTitle: title,\n\t\t\tstyleName: \"bizhubRoundedBorder\",\n\t\t\tgroupBorderCSS: \"1px solid #bfbfbf\",\n\t\t\tpadding: 5,\n\t\t\theight: 1,\n\t\t\tgroupLabelBackgroundColor: \"transparent\",\n\t\t\tgroupLabelStyleName: \"bizhubBorderLabel\",\n\t\t\tbackgroundImage: \"background.png\",\n\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\tmembers,\n\t\t});\n\t},\n\n\t/**\n\t * Creates a chart panel with a button and form.\n\t * @param {isc.IButton} buttonDefn - the button to include in the panel.\n\t * @param {isc.DynamicForm} formDefn - the RHS form.\n\t * @returns {isc.HLayout} the created panel.\n\t */\n\t_createChartPanel: function (buttonDefn, formDefn) {\n\t\treturn isc.HLayout.create({\n\t\t\tbackgroundImage: \"background.png\",\n\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\tmembersMargin: 5,\n\t\t\tmargin: 5,\n\t\t\theight: 1,\n\t\t\tlayoutAlign: \"center\",\n\t\t\tmembers: [\n\t\t\t\tisc.VLayout.create({\n\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\twidth: 134,\n\t\t\t\t\theight: 130,\n\t\t\t\t\tlayoutAlign: \"center\",\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tmembersMargin: 10,\n\t\t\t\t\tmembers: [\n\t\t\t\t\t\tisc.HLayout.create({\n\t\t\t\t\t\t\twidth: 134,\n\t\t\t\t\t\t\talign: \"center\",\n\t\t\t\t\t\t\tmembers: [\n\t\t\t\t\t\t\t\tisc.Img.create({\n\t\t\t\t\t\t\t\t\timageType: \"normal\",\n\t\t\t\t\t\t\t\t\tsrc: \"reporting/reporting.png\",\n\t\t\t\t\t\t\t\t\theight: 96,\n\t\t\t\t\t\t\t\t\tlayoutAlign: \"center\",\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tisc.HLayout.create({\n\t\t\t\t\t\t\twidth: 134,\n\t\t\t\t\t\t\talign: \"center\",\n\t\t\t\t\t\t\tmembers: [buttonDefn],\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t}),\n\t\t\t\tformDefn,\n\t\t\t],\n\t\t});\n\t},\n\n\t/**\n\t * Constructs the interface.\n\t */\n\t_create: function () {\n\t\tif (isc.ChartDialog._layout === null) {\n\t\t\tisc.ChartDialog._chart = isc.BizChart.create({});\n\t\t\tconst result = isc.ChartDialog._border(\"Result\", [isc.ChartDialog._chart]);\n\t\t\tresult.setHeight(\"100%\");\n\t\t\tconst chart = isc.ChartDialog._border(\"Chart\", [\n\t\t\t\tisc.ChartDialog._chartForm,\n\t\t\t\tisc.ChartDialog._categoryForm,\n\t\t\t\tisc.ChartDialog._valueForm,\n\t\t\t]);\n\n\t\t\tisc.ChartDialog._layout = isc.VLayout.create({\n\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\theight: \"100%\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\tautoDraw: true,\n\t\t\t\tmargin: 5,\n\t\t\t\tmembersMargin: 5,\n\t\t\t\tmembers: [\n\t\t\t\t\tisc.ChartDialog._createChartPanel(\n\t\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\t\ttitle: \"Generate\",\n\t\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\t\tif (isc.ChartDialog._valuesManager.validate()) {\n\t\t\t\t\t\t\t\t\tconst params = {\n\t\t\t\t\t\t\t\t\t\tds: isc.ChartDialog._dataSource.ID,\n\t\t\t\t\t\t\t\t\t\tt: isc.ChartDialog._valuesManager.getValue(\"type\"),\n\t\t\t\t\t\t\t\t\t\tb: isc.ChartDialog._valuesManager.getValues(),\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tif (isc.ChartDialog._criteria) {\n\t\t\t\t\t\t\t\t\t\tparams.criteria = isc.ChartDialog._criteria;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (isc.ChartDialog._tagId) {\n\t\t\t\t\t\t\t\t\t\tparams.tagId = isc.ChartDialog._tagId;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvalidateCategoryBucket(params);\n\t\t\t\t\t\t\t\t\tvalidateValueFunction(params);\n\n\t\t\t\t\t\t\t\t\tif (!params.b.label) {\n\t\t\t\t\t\t\t\t\t\tparams.b.label = generateDataLabel(params);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tisc.ChartDialog._valuesManager.clearErrors(true);\n\n\t\t\t\t\t\t\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\t\t\t\t\t\t\tshowPrompt: true,\n\t\t\t\t\t\t\t\t\t\tevalResult: true,\n\t\t\t\t\t\t\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"chart\",\n\t\t\t\t\t\t\t\t\t\thttpMethod: \"POST\",\n\t\t\t\t\t\t\t\t\t\tparams,\n\t\t\t\t\t\t\t\t\t\tcallback(rpcResponse, data) {\n\t\t\t\t\t\t\t\t\t\t\tif (data.config) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst oldChartType = isc.ChartDialog._chart?.chartConfig?.type;\n\t\t\t\t\t\t\t\t\t\t\t\tconst newChartType = data.config.type;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (oldChartType !== newChartType) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tisc.ChartDialog._destroyAndRecreate();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tisc.ChartDialog._chart._update(data);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tisc.VLayout.create({\n\t\t\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\t\t\tmargin: 0,\n\t\t\t\t\t\t\theight: 1,\n\t\t\t\t\t\t\tmembersMargin: 5,\n\t\t\t\t\t\t\tmembers: [\n\t\t\t\t\t\t\t\tchart,\n\t\t\t\t\t\t\t\tisc.ChartDialog._border(\"Top\", [isc.ChartDialog._topForm]),\n\t\t\t\t\t\t\t\tisc.ChartDialog._border(\"Order\", [isc.ChartDialog._orderForm]),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t\t\tresult,\n\t\t\t\t],\n\t\t\t});\n\t\t} else {\n\t\t\tisc.ChartDialog._destroyAndRecreate();\n\t\t}\n\t},\n\n\t/**\n\t * Destroys and recreates the chart.\n\t */\n\t_destroyAndRecreate: function () {\n\t\tlet border = null;\n\t\tif (isc.ChartDialog._chart) {\n\t\t\tborder = isc.ChartDialog._layout.getMember(1);\n\t\t\tborder.removeMember(isc.ChartDialog._chart);\n\t\t\tif (isc.ChartDialog._chart.chart) {\n\t\t\t\tisc.ChartDialog._chart.chart.destroy();\n\t\t\t}\n\t\t\tisc.ChartDialog._chart.destroy();\n\t\t}\n\t\tisc.ChartDialog._chart = isc.BizChart.create({});\n\t\tif (border) {\n\t\t\tborder.addMember(isc.ChartDialog._chart);\n\t\t} else {\n\t\t\tisc.ChartDialog._layout.addMember(\n\t\t\t\tisc.ChartDialog._border(\"Result\", [isc.ChartDialog._chart]),\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Populates the chart dialog with data and displays it.\n\t * @param {Object} dataSource - the data source representing the server-side query or model.\n\t * @param {string} _c - the web context identifier.\n\t * @param {Object} criteria - the criteria to apply to the server-side query or model.\n\t * @param {string} tagId - the tagId of the selected tag from the listgrid to apply server-side.\n\t */\n\tpopupChart: function (dataSource, _c, criteria, tagId) {\n\t\tisc.ChartDialog._create();\n\n\t\tisc.ChartDialog._dataSource = dataSource;\n\t\tisc.ChartDialog._c = _c;\n\t\tisc.ChartDialog._criteria = criteria;\n\t\tisc.ChartDialog._tagId = tagId;\n\n\t\tconst valueMap = createValueMap(dataSource);\n\t\tconst categoryField =\n\t\t\tisc.ChartDialog._categoryForm.getItem(\"categoryBinding\");\n\t\tconst valueField = isc.ChartDialog._valueForm.getItem(\"valueBinding\");\n\n\t\tcategoryField.setValue(\"\");\n\t\tcategoryField.setValueMap(valueMap);\n\t\tvalueField.setValue(\"\");\n\t\tvalueField.setValueMap(valueMap);\n\n\t\tisc.WindowStack.popup(null, \"Charting\", true, [isc.ChartDialog._layout]);\n\t},\n});\n\n/**\n * Creates a value map from the data source fields.\n * @param {Object} dataSource - the data source.\n * @returns {Object} - the value map.\n */\ncreateValueMap = function (dataSource) {\n\tconst valueMap = {};\n\tconst fieldNames = dataSource.getFieldNames(true); // no hidden fields\n\tfieldNames.forEach((fieldName) => {\n\t\tif (fieldName !== \"bizTagged\" && fieldName !== \"bizFlagComment\") {\n\t\t\tconst field = dataSource.getField(fieldName);\n\t\t\tvalueMap[field.name] = field.title;\n\t\t}\n\t});\n\treturn valueMap;\n};\n\n/**\n * Validates the category bucket based on the field type.\n * @param {Object} params - the parameters object.\n */\nvalidateCategoryBucket = function (params) {\n\tconst { categoryBinding, categoryBucket } = params.b;\n\tif (categoryBucket) {\n\t\tconst field = isc.ChartDialog._dataSource.getField(categoryBinding);\n\t\tconst { type } = field;\n\n\t\tif (isc.BizUtil.isNumeric(type)) {\n\t\t\tif (categoryBucket !== \"NumericMultipleBucket\") {\n\t\t\t\tsetCategoryBucketErrors(\"Use a numeric bucket only with a number field\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (isc.BizUtil.isTemporal(type)) {\n\t\t\tif (categoryBucket !== \"TemporalBucket\") {\n\t\t\t\tsetCategoryBucketErrors(\n\t\t\t\t\t\"Use a temporal bucket only with a date or time field\",\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (\n\t\t\tcategoryBucket === \"TemporalBucket\" ||\n\t\t\tcategoryBucket === \"NumericMultipleBucket\"\n\t\t) {\n\t\t\tsetCategoryBucketErrors(\n\t\t\t\t\"Use a temporal bucket only with a date or time field\",\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t}\n};\n\n/**\n * Sets errors for the category bucket fields.\n * @param {string} errorMessage - the error message to set.\n */\nsetCategoryBucketErrors = function (errorMessage) {\n\tisc.ChartDialog._valuesManager.setErrors(\n\t\t{\n\t\t\tcategoryBinding: errorMessage,\n\t\t\tcategoryBucket: errorMessage,\n\t\t},\n\t\ttrue,\n\t);\n};\n\n/**\n * Validates the value function based on the field type.\n * @param {Object} params - the parameters object.\n */\nvalidateValueFunction = function (params) {\n\tconst { valueBinding, valueFunction } = params.b;\n\tconst field = isc.ChartDialog._dataSource.getField(valueBinding);\n\tconst { type } = field;\n\n\tif (type !== \"integer\" && type !== \"float\" && valueFunction !== \"Count\") {\n\t\tisc.ChartDialog._valuesManager.setErrors(\n\t\t\t{\n\t\t\t\tvalueBinding: \"Use the [Count] value function with a non-numeric field\",\n\t\t\t\tvalueFunction: \"Use the [Count] value function with a non-numeric field\",\n\t\t\t},\n\t\t\ttrue,\n\t\t);\n\t}\n};\n\n/**\n * Generates a data label if none is defined.\n * @param {Object} params - the parameters object.\n * @returns {string} the generated data label.\n */\ngenerateDataLabel = function (params) {\n\tconst { valueFunction } = params.b;\n\tconst valueFunctionDisplay = valueFunction\n\t\t? isc.ChartDialog._valueForm.getItem(\"valueFunction\").getDisplayValue()\n\t\t: \"\";\n\tconst valueBindingDisplay = isc.ChartDialog._valueForm\n\t\t.getItem(\"valueBinding\")\n\t\t.getDisplayValue();\n\tconst categoryBindingDisplay = isc.ChartDialog._categoryForm\n\t\t.getItem(\"categoryBinding\")\n\t\t.getDisplayValue();\n\n\treturn `${valueFunctionDisplay} ${valueBindingDisplay} by ${categoryBindingDisplay}`;\n};\n","/**\n * Manages advanced filtering logic in relevant UI components.\n * Extends VLayout from the SmartClient library.\n */\nisc.defineClass(\"AdvancedFilter\", \"VLayout\");\n\nisc.AdvancedFilter.addProperties({\n\t// VLayout properties\n\twidth: \"100%\",\n\theight: 1,\n\toverflow: \"visible\",\n\tmembersMargin: 2,\n\tmargin: 2,\n\n\t// Filter editor and filter builder configurations (e.g., BizListGrid, BizTreeGrid)\n\tfilterableComponent: null,\n\tfilterableComponentConfig: null,\n\ttoggleButton: null,\n\t_filterBuilder: null,\n\t_filterButtonDefaults: null,\n});\n\nisc.AdvancedFilter.addMethods({\n\tinitWidget: function () {\n\t\tthis._filterButtonDefaults = {\n\t\t\t_constructor: isc.IButton,\n\t\t\tautoFit: true,\n\t\t\ttitle: \"Filter\",\n\t\t\ticon: \"icons/filter_add.png\",\n\t\t};\n\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\tthis.toggleButton = isc.ToolStripButton.create({\n\t\t\ticon: \"icons/filter_add.png\",\n\t\t\tactionType: \"checkbox\",\n\t\t\tshowFocused: false,\n\t\t\tshowDown: false,\n\t\t\tshowSelectedIcon: false,\n\t\t\tselected: false,\n\t\t\tcanHover: true,\n\t\t\tgetHoverHTML: function () {\n\t\t\t\treturn this.selected\n\t\t\t\t\t? \"Use <b>simple</b> filtering\"\n\t\t\t\t\t: \"Use <b>advanced</b> filtering\";\n\t\t\t},\n\t\t});\n\n\t\tthis._styleForm = isc.DynamicForm.create({\n\t\t\tnumCols: 2,\n\t\t\twidth: 200,\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tname: \"style\",\n\t\t\t\t\ttitle: \"Style\",\n\t\t\t\t\ttype: \"radioGroup\",\n\t\t\t\t\tvertical: false,\n\t\t\t\t\trequired: true,\n\t\t\t\t\tvalueMap: { radio: \"Flat\", bracket: \"Nested\", inline: \"Inline\" },\n\t\t\t\t\tdefaultValue: \"radio\",\n\t\t\t\t\tchanged: (form, item, value) => {\n\t\t\t\t\t\tthis.setDataSource(this._filterBuilder.getDataSource());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tthis.addMember(this._styleForm);\n\t},\n\n\t/**\n\t * Gets the current filter style.\n\t * @returns {string} the current filter style.\n\t */\n\tgetStyle: function () {\n\t\treturn this._styleForm.getValue(\"style\");\n\t},\n\n\t/**\n\t * Sets the filter style.\n\t * @param {string} style - the new filter style to apply.\n\t */\n\tsetStyle: function (style) {\n\t\tthis._styleForm.setValue(\"style\", style);\n\t\tthis.setDataSource(this._filterBuilder.getDataSource());\n\t},\n\n\t/**\n\t * Handles the toggle button click event to switch between simple and advanced filtering modes.\n\t *\n\t * **Advanced Filtering:**\n\t *   - Suppresses automatic filtering by temporarily overriding `getFilterEditorCriteria`.\n\t *   - Applies advanced criteria from the filter builder.\n\t *   - Ensures the filter panel is visible.\n\t *\n\t * **Simple Filtering:**\n\t *   - Clears advanced criteria.\n\t *   - Resets the grid's filter editor.\n\t *   - Hides the advanced filter panel.\n\t */\n\ttoggleButtonClick: function () {\n\t\tconst { grid } = this.filterableComponent;\n\n\t\tif (this.toggleButton.selected) {\n\t\t\t// Suppress SmartClient's automatic filtering during filter editor toggle\n\t\t\tconst originalGetCriteria = grid.getFilterEditorCriteria;\n\t\t\tgrid.getFilterEditorCriteria = () => null;\n\t\t\tgrid.setFilterEditorCriteria(isc.emptyObject);\n\t\t\tgrid.setShowFilterEditor(false);\n\t\t\tgrid.getFilterEditorCriteria = originalGetCriteria;\n\n\t\t\t// Apply advanced filtering using criteria from the filter builder\n\t\t\tgrid.filterData(this._filterBuilder.getCriteria());\n\n\t\t\t// Ensure the panel is visible for proper interaction\n\t\t\tthis.show();\n\t\t} else {\n\t\t\t// Clear advanced criteria and reset the grid filter editor\n\t\t\tgrid.setShowFilterEditor(true);\n\t\t\tgrid.setFilterEditorCriteria({});\n\t\t\tgrid.filterData({});\n\n\t\t\t// Hide the advanced filter panel\n\t\t\tthis.hide();\n\t\t}\n\t},\n\n\t/**\n\t * Sets the data source for the filter builder.\n\t * @param {Object} dataSource - the data source for the filter.\n\t */\n\tsetDataSource: function (dataSource) {\n\t\tif (this._filterBuilder) {\n\t\t\t// Clear existing filter builder\n\t\t\tthis.removeMember(this._filterBuilder);\n\t\t\tthis._filterBuilder.destroy();\n\t\t\tthis._filterBuilder = null;\n\t\t} else {\n\t\t\t// Initialise the filter button button\n\t\t\tthis._filterButton = this.createAutoChild(\"_filterButton\", {\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.filterableComponent.grid.filterData(\n\t\t\t\t\t\tthis._filterBuilder.getCriteria(),\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t{ params: { _summary: this.filterableComponent.summaryType } },\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t});\n\t\t\tthis.addMember(this._filterButton);\n\t\t}\n\n\t\t// Get selected filter style (or default)\n\t\tconst style = this.getStyle() || \"radio\";\n\n\t\t// Create new filter builder with the provided data source and selected style\n\t\tthis._filterBuilder = isc.FilterBuilder.create({\n\t\t\tdataSource,\n\t\t\ttopOperatorAppearance: style,\n\t\t\tallowEmpty: true,\n\t\t});\n\n\t\t// Add the new filter builder to the layout and manage visibility\n\t\tthis.addMember(this._filterBuilder, 1);\n\t\tthis.toggleButton.selected ? this.show() : this.hide();\n\t},\n\n\t/**\n\t * Retrieves the filter criteria.\n\t * @param {boolean} includeEmptyValues - whether to include empty values.\n\t * @returns {Object|null} the filter criteria or null if not set.\n\t */\n\tgetCriteria: function (includeEmptyValues) {\n\t\treturn this._filterBuilder\n\t\t\t? this._filterBuilder.getCriteria(includeEmptyValues)\n\t\t\t: null;\n\t},\n\n\t/**\n\t * Clears all filter criteria.\n\t */\n\tclearCriteria: function () {\n\t\tif (this._filterBuilder) {\n\t\t\tthis._filterBuilder.clearCriteria();\n\t\t}\n\t},\n\n\t/**\n\t * Sets the filter criteria.\n\t * @param {Object} criteria - the criteria to set.\n\t */\n\tsetCriteria: function (criteria) {\n\t\tif (this._filterBuilder) {\n\t\t\tthis._filterBuilder.setCriteria(criteria);\n\t\t}\n\t},\n});\n","/**\n * Implements the BizGrid UI component.\n * Extends VLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizGrid\", \"VLayout\");\n\nisc.BizGrid.addProperties({\n\tgrid: null,\n\t_eventRowNum: null, // Row at which context menu was invoked\n\t_eventColumnNum: null, // Column at which context menu was invoked\n\t_eventRecord: null, // Record at which context menu was invoked\n\t_disabled: false, // Whether this widget is disabled or not\n\tdeleteSelectionItem: null, // Standard delete item for all grids\n\tdeleteSelectionButton: null, // Standard delete button for all grids\n\tclearSelectionItem: null, // Standard clear selection item for all grids\n\n\t// Document privileges granted\n\taggregate: false,\n\tcanCreate: false,\n\tcanUpdate: false,\n\tcanDelete: false,\n\n\t// Conditions to evaluate from the view widget definition\n\tcanAdd: true,\n\tcanEdit: true,\n\tcanZoom: true,\n\tcanRemove: true,\n\n\t// Repeater switches\n\tisRepeater: false,\n\tshowColumnHeaders: true,\n\tshowGrid: true,\n});\n\nisc.BizGrid.addMethods({\n\tinitWidget: function (config) {\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\t// Delete selection item\n\t\tthis.deleteSelectionItem = {\n\t\t\ttitle: \"Delete/Remove Selected\",\n\t\t\tname: \"deleteRemoveSelected\",\n\t\t\ticon: \"icons/delete.png\",\n\t\t\tenableIf: () =>\n\t\t\t\t!this._disabled &&\n\t\t\t\tthis.canDelete &&\n\t\t\t\tthis.canRemove &&\n\t\t\t\tthis.grid.anySelected(),\n\t\t\tclick: () => {\n\t\t\t\tisc.ask(\"Do you want to delete/remove the selected rows?\", (value) => {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\t// If a list grid, retrieve CSRF properties\n\t\t\t\t\t\tconst requestProperties = {\n\t\t\t\t\t\t\tparams: this._b ? {} : { _csrf: this._csrf },\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (this._view) {\n\t\t\t\t\t\t\tconst instance = this._view.gather(false);\n\t\t\t\t\t\t\trequestProperties.params._c = instance._c;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.grid.removeSelectedData((dsResponse, data, dsRequest) => {\n\t\t\t\t\t\t\t// If a list grid, assign the CSRF token from the response header\n\t\t\t\t\t\t\tif (dsResponse) {\n\t\t\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.grid.selectionChanged(null, false);\n\t\t\t\t\t\t\tthis._eventRowNum = null;\n\t\t\t\t\t\t\tthis._eventColumnNum = null;\n\t\t\t\t\t\t\tthis._eventRecord = null;\n\n\t\t\t\t\t\t\t// If a data grid or embedded list grid...\n\t\t\t\t\t\t\tif (this._view) {\n\t\t\t\t\t\t\t\t// If a data grid...\n\t\t\t\t\t\t\t\tif (this._b) {\n\t\t\t\t\t\t\t\t\tthis._view._vm.setValue(\"_changed\", true); // Make view dirty\n\t\t\t\t\t\t\t\t\tthis._view._vm.setValue(\"_apply\", true); // Post view changes before zoom\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Run any registered event callbacks\n\t\t\t\t\t\t\t\tif (this.bizRemoved) {\n\t\t\t\t\t\t\t\t\tthis.bizRemoved();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, requestProperties);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t};\n\n\t\t// Delete selection button\n\t\tthis.deleteSelectionButton = isc.BizUtil.createImageButton(\n\t\t\tthis.deleteSelectionItem.name,\n\t\t\tthis.deleteSelectionItem.icon,\n\t\t\ttrue,\n\t\t\t\"<b>Delete/Remove</b> selected.\",\n\t\t\tthis.deleteSelectionItem.click,\n\t\t);\n\t\tthis.deleteSelectionButton.setDisabled(true);\n\n\t\t// Clear selection item\n\t\tthis.clearSelectionItem = {\n\t\t\ttitle: \"Deselect all\",\n\t\t\ticon: \"icons/clearSelection.png\",\n\t\t\tclick: () => {\n\t\t\t\tthis.grid.deselectAllRecords();\n\t\t\t\tthis._eventRowNum = null;\n\t\t\t\tthis._eventColumnNum = null;\n\t\t\t\tthis._eventRecord = null;\n\t\t\t},\n\t\t};\n\t},\n\n\t/**\n\t * Refreshes the grid.\n\t */\n\trefresh: function () {\n\t\tthis.grid.refresh();\n\t},\n});\n\n/**\n * Implements the BizDataGrid UI component.\n * Extends BizGrid implemented above.\n */\nisc.ClassFactory.defineClass(\"BizDataGrid\", \"BizGrid\");\n\nisc.BizDataGrid.addProperties({\n\t// Buttons that are enabled/disabled on grid row selection\n\t_newButton: null,\n\t_zoomButton: null,\n\t_popoutButton: null,\n\t_editButton: null,\n\n\t// Switches to turn off tool buttons / menu items\n\tshowAdd: true,\n\tshowZoom: true,\n\tshowEdit: true,\n\tshowRemove: true,\n\tshowDeselect: true,\n\n\t_mod: null, // Module name\n\t_doc: null, // Document name\n\t_b: null, // Binding\n\t_ordinal: null, // Field name to use for user ordering of the records\n});\n\nisc.BizDataGrid.addMethods({\n\tinitWidget(config) {\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\t// New item\n\t\tconst newItem = {\n\t\t\ttitle: \"New\",\n\t\t\tname: \"new\",\n\t\t\ticon: \"icons/new.png\",\n\t\t\tenableIf: () => !this._disabled && this.canCreate && this.canAdd,\n\t\t\tclick: () => (config.inline ? this.add() : this.zoom(true)),\n\t\t};\n\n\t\t// Zoom item\n\t\tthis._zoomItem = {\n\t\t\ttitle: \"Zoom\",\n\t\t\tname: \"zoom\",\n\t\t\ticon: \"icons/zoom.gif\",\n\t\t\tclick: () => this.zoom(false),\n\t\t\tenableIf: () => this.canZoom && this.grid.anySelected(),\n\t\t};\n\n\t\t// Edit item\n\t\tconst editItem = {\n\t\t\ttitle: \"Edit\",\n\t\t\tname: \"edit\",\n\t\t\ticon: \"icons/edit.png\",\n\t\t\tenableIf: () =>\n\t\t\t\t!this._disabled &&\n\t\t\t\tthis.canUpdate &&\n\t\t\t\tthis.canEdit &&\n\t\t\t\tthis.grid.anySelected(),\n\t\t\tclick: () => {\n\t\t\t\tif (this.grid.anySelected()) {\n\t\t\t\t\tthis.grid.startEditing(this._eventRowNum, this._eventColNum);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t// Create buttons\n\t\tthis._newButton = isc.BizUtil.createImageButton(\n\t\t\tnewItem.name,\n\t\t\tnewItem.icon,\n\t\t\ttrue,\n\t\t\t\"<b>New</b> record.\",\n\t\t\tnewItem.click,\n\t\t);\n\n\t\tthis._zoomButton = isc.BizUtil.createImageButton(\n\t\t\tthis._zoomItem.name,\n\t\t\tthis._zoomItem.icon,\n\t\t\ttrue,\n\t\t\t\"<b>Zoom</b> into record.\",\n\t\t\tthis._zoomItem.click,\n\t\t);\n\t\tthis._zoomButton.setDisabled(true);\n\n\t\tthis._editButton = isc.BizUtil.createImageButton(\n\t\t\teditItem.name,\n\t\t\teditItem.icon,\n\t\t\ttrue,\n\t\t\t\"<b>Edit</b> a record inline.\",\n\t\t\teditItem.click,\n\t\t);\n\t\tthis._editButton.setDisabled(true);\n\n\t\t// Context menu\n\t\tconst contextMenuData = [];\n\t\tif (config.editable) {\n\t\t\tif (this.showAdd) contextMenuData.push(newItem);\n\t\t\tif (this.showZoom) contextMenuData.push(this._zoomItem);\n\t\t\tif (this.showEdit) contextMenuData.push(editItem);\n\t\t\tif (this.showRemove) contextMenuData.push(this.deleteSelectionItem);\n\t\t\tif (this.showDeselect) {\n\t\t\t\tif (contextMenuData.length > 0) {\n\t\t\t\t\tcontextMenuData.push({ isSeparator: true });\n\t\t\t\t}\n\t\t\t\tcontextMenuData.push(this.clearSelectionItem);\n\t\t\t}\n\t\t}\n\n\t\tconst contextMenu = isc.Menu.create({\n\t\t\tshowShadow: true,\n\t\t\tshadowDepth: 10,\n\t\t\tdata: contextMenuData,\n\t\t});\n\n\t\t// Create the grid\n\t\tthis._createGrid(config, this._fields, contextMenu);\n\n\t\t// Assign the grid to the form grids\n\t\tif (!this._view._grids[this._b]) {\n\t\t\tthis._view._grids[this._b] = {};\n\t\t}\n\t\tthis._view._grids[this._b][this.getID()] = this;\n\n\t\t// Toolstrip\n\t\tif (config.editable && !config.isRepeater) {\n\t\t\tconst toolStripMembers = [];\n\t\t\tif (this.showAdd) toolStripMembers.push(this._newButton);\n\t\t\tif (this.showZoom) toolStripMembers.push(this._zoomButton);\n\t\t\tif (this.showEdit) toolStripMembers.push(this._editButton);\n\t\t\tif (this.showRemove) toolStripMembers.push(this.deleteSelectionButton);\n\t\t\tif (this.showDeselect) {\n\t\t\t\tif (toolStripMembers.length > 0) toolStripMembers.push(\"separator\");\n\t\t\t\ttoolStripMembers.push(\n\t\t\t\t\tisc.BizUtil.createImageButton(\n\t\t\t\t\t\tthis.clearSelectionItem.icon,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\"<b>Deselect</b> all.\",\n\t\t\t\t\t\tthis.clearSelectionItem.click,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (toolStripMembers.length > 0) {\n\t\t\t\tthis.addMember(\n\t\t\t\t\tisc.ToolStrip.create({\n\t\t\t\t\t\tmembersMargin: 2,\n\t\t\t\t\t\tlayoutMargin: 2,\n\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\tmembers: toolStripMembers,\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Set grid minHeight if no toolbar\n\t\tif (this.getMembersLength() === 0) {\n\t\t\tthis.grid.setMinHeight(this.minHeight);\n\t\t}\n\t\tthis.addMember(this.grid);\n\t},\n\n\t/**\n\t * Creates the grid.\n\t * @param {Object} config - the configuration object.\n\t * @param {Array} fields - the grid fields.\n\t * @param {isc.Menu} contextMenu - the context menu.\n\t */\n\t_createGrid: function (config, fields, contextMenu) {\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\tconst showHeader = !this.isRepeater || this.showColumnHeaders;\n\n\t\tconst gridConfig = {\n\t\t\theight: \"*\",\n\t\t\tminHeight: 100,\n\t\t\tautoFetchData: false,\n\t\t\tshowHeader,\n\t\t\theaderHeight: 30,\n\t\t\tshowFilterEditor: false,\n\t\t\tdefaultFilterOperator: \"iContains\",\n\t\t\tshowSelectedStyle: !this.isRepeater,\n\t\t\tshowEmptyMessage: !this.isRepeater,\n\t\t\tbaseStyle: this.isRepeater ? \"\" : null,\n\t\t\tborder: this.isRepeater ? (this.showGrid ? null : \"none\") : null,\n\t\t\tbodyBackgroundColor: this.isRepeater\n\t\t\t\t? this.showGrid\n\t\t\t\t\t? \"white\"\n\t\t\t\t\t: \"#F9F9F9\"\n\t\t\t\t: \"white\",\n\t\t\tfields,\n\t\t\tselectionType: \"single\",\n\t\t\talternateRecordStyles: true,\n\t\t\tcanEdit: this.canUpdate && this.canEdit,\n\t\t\teditEvent: \"none\",\n\t\t\tneverValidate: false,\n\t\t\tvalidateByCell: true,\n\t\t\tsaveByCell: false,\n\t\t\tvalidateOnChange: false,\n\t\t\trecordEnabledProperty: \"_enabled\",\n\t\t\tcanHover: !this.isRepeater,\n\t\t\twrapCells: !!this.wordWrap,\n\t\t\tfixedRecordHeights: !this.wordWrap,\n\t\t\tcanReorderFields: false,\n\t\t\tcanSort: !config._ordinal,\n\t\t\tcanGroupBy: !config._ordinal,\n\t\t\tcanReorderRecords: !!config._ordinal && this.canUpdate && this.canEdit,\n\t\t\trecordsDropped: function (dropRecords, index, destWidget, sourceWidget) {\n\t\t\t\tthis.reorderData();\n\t\t\t},\n\t\t\treorderData: function () {\n\t\t\t\tif (config._ordinal) {\n\t\t\t\t\tconst data = this.getData();\n\t\t\t\t\tdata.forEach((record, index) => {\n\t\t\t\t\t\trecord[config._ordinal] = index + 1;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tdragDataAction: \"move\",\n\t\t\tautoSaveEdits: true,\n\t\t\tmodalEditing: true,\n\t\t\tcanFreezeFields: false,\n\t\t\tcontextMenu: this.isRepeater ? null : contextMenu,\n\t\t\tshowRollOver: true,\n\t\t\trowClick: function (record, rowNum, colNum) {\n\t\t\t\tif (record?.bizId) {\n\t\t\t\t\tme._eventRecord = record;\n\t\t\t\t\tme._eventRowNum = rowNum;\n\t\t\t\t\tme._eventColNum = colNum;\n\t\t\t\t}\n\t\t\t\treturn this.Super(\"rowClick\", arguments);\n\t\t\t},\n\t\t\trowContextClick: function (record, rowNum, colNum) {\n\t\t\t\tif (record?.bizId) {\n\t\t\t\t\tthis.deselectAllRecords();\n\t\t\t\t\tme._eventRecord = record;\n\t\t\t\t\tme._eventRowNum = rowNum;\n\t\t\t\t\tme._eventColNum = colNum;\n\t\t\t\t\tthis.selectSingleRecord(record);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\trowDoubleClick: function (record) {\n\t\t\t\tif (config.editable && record && !record.isFolder) {\n\t\t\t\t\tme._eventRecord = record;\n\t\t\t\t\tif (config.inline) {\n\t\t\t\t\t\tif (me.canUpdate && me.canEdit && me.showEdit && !me._disabled) {\n\t\t\t\t\t\t\tthis.startEditing(me._eventRowNum, me._eventColNum, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (me.canZoom && me.showZoom) {\n\t\t\t\t\t\tif (me._view._blurry) {\n\t\t\t\t\t\t\tme._view._blurry = me._zoomItem;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tme._zoomItem.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.Super(\"rowDoubleClick\", arguments);\n\t\t\t},\n\t\t\tselectionChanged: function () {\n\t\t\t\tconst hasSelection = this.anySelected();\n\t\t\t\tme._zoomButton.setDisabled(!hasSelection || !me.canZoom);\n\t\t\t\tme._editButton.setDisabled(\n\t\t\t\t\t!hasSelection || me._disabled || !me.canUpdate || !me.canEdit,\n\t\t\t\t);\n\t\t\t\tme.deleteSelectionButton.setDisabled(\n\t\t\t\t\t!hasSelection || me._disabled || !me.canDelete || !me.canRemove,\n\t\t\t\t);\n\t\t\t\tme._newButton.setDisabled(me._disabled || !me.canCreate || !me.canAdd);\n\t\t\t},\n\t\t\tselectionUpdated: function (record) {\n\t\t\t\tif (me.selectedIdBinding) {\n\t\t\t\t\tconst changes = me._view._vm.valuesHaveChanged();\n\t\t\t\t\tme._view._vm.setValue(me.selectedIdBinding, record?.bizId || null);\n\t\t\t\t\tif (!changes) me._view._vm.rememberValues();\n\t\t\t\t}\n\t\t\t\tif (me.bizSelected) {\n\t\t\t\t\tif (me.showZoom && me.canZoom && config.editable) {\n\t\t\t\t\t\tif (isc.RPCManager.requestsArePending()) {\n\t\t\t\t\t\t\tme._view._blurry = null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tme._view._blurry = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tme.delayCall(\"bizSelected\", [], this.doubleClickDelay);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tme.bizSelected();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tcanEditCell: function (rowNum, colNum) {\n\t\t\t\treturn !me._disabled && this.Super(\"canEditCell\", arguments);\n\t\t\t},\n\t\t\teditComplete: (\n\t\t\t\trowNum,\n\t\t\t\tcolNum,\n\t\t\t\tnewValues,\n\t\t\t\toldValues,\n\t\t\t\teditCompletionEvent,\n\t\t\t) => {\n\t\t\t\tthis._view._vm.setValue(\"_changed\", true);\n\t\t\t\tthis._view._vm.setValue(\"_apply\", true);\n\t\t\t\tif (this.bizEdited) this.bizEdited();\n\t\t\t},\n\t\t};\n\n\t\tif (config.gridConfig) {\n\t\t\tisc.addProperties(gridConfig, config.gridConfig);\n\t\t}\n\n\t\tthis.grid = isc.ListGrid.create(gridConfig);\n\t},\n\n\t/**\n\t * Sets the disabled state of the grid.\n\t * @param {boolean} disabled - whether the grid is disabled.\n\t */\n\tsetDisabled: function (disabled) {\n\t\tthis._disabled = disabled;\n\t\tif (this.grid) {\n\t\t\tthis.grid.selectionChanged();\n\t\t}\n\t},\n\n\t/**\n\t * Zooms into a record.\n\t * @param {boolean} zoomToNew - whether to zoom into a new record.\n\t */\n\tzoom: function (zoomToNew) {\n\t\tconst mod = this._eventRecord?.bizModule || this._mod;\n\t\tconst doc = this._eventRecord?.bizDocument || this._doc;\n\n\t\tisc.BizUtil.getEditView(mod, doc, (view) => {\n\t\t\tconst viewBinding = this._view._b ? `${this._view._b}.${this._b}` : this._b;\n\t\t\tconst zoomToBizId = zoomToNew ? null : this._eventRecord.bizId;\n\n\t\t\tconst instance = this._view.gather(true);\n\t\t\tif (instance) {\n\t\t\t\tconst gridRect = this.grid.body.getPageRect();\n\t\t\t\tconst rowTop = this.grid.body.getRowPageTop(this._eventRowNum);\n\t\t\t\tconst rowHeight = this.grid.body.getRowSize(this._eventRowNum);\n\n\t\t\t\tif (instance._apply || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\tdelete instance._apply;\n\t\t\t\t\tthis._view.saveInstance(true, null, (data, success) => {\n\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\tthis._zoom(\n\t\t\t\t\t\t\t\tzoomToNew,\n\t\t\t\t\t\t\t\tzoomToBizId,\n\t\t\t\t\t\t\t\tviewBinding,\n\t\t\t\t\t\t\t\tview,\n\t\t\t\t\t\t\t\tinstance._c,\n\t\t\t\t\t\t\t\tgridRect,\n\t\t\t\t\t\t\t\trowTop,\n\t\t\t\t\t\t\t\trowHeight,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis._zoom(\n\t\t\t\t\t\tzoomToNew,\n\t\t\t\t\t\tzoomToBizId,\n\t\t\t\t\t\tviewBinding,\n\t\t\t\t\t\tview,\n\t\t\t\t\t\tinstance._c,\n\t\t\t\t\t\tgridRect,\n\t\t\t\t\t\trowTop,\n\t\t\t\t\t\trowHeight,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisc.warn(\"You cannot zoom in until you fix the problems found\");\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Handles the zoom logic.\n\t * @param {boolean} zoomToNew - whether to zoom into a new record.\n\t * @param {string} zoomToBizId - the business ID of the record to zoom into.\n\t * @param {string} viewBinding - the view binding.\n\t * @param {isc.View} view - the view to zoom into.\n\t * @param {string} _c - the context identifier.\n\t * @param {Array} gridRect - the grid rectangle.\n\t * @param {number} rowTop - the top position of the row.\n\t * @param {number} rowHeight - the height of the row.\n\t */\n\t_zoom: function (\n\t\tzoomToNew,\n\t\tzoomToBizId,\n\t\tviewBinding,\n\t\tview,\n\t\t_c,\n\t\tgridRect,\n\t\trowTop,\n\t\trowHeight,\n\t) {\n\t\tconst rowRect = [gridRect[0], rowTop, gridRect[2], rowHeight];\n\t\tisc.WindowStack.popup(\n\t\t\tzoomToNew ? gridRect : rowRect,\n\t\t\tzoomToNew ? \"New\" : \"Edit\",\n\t\t\tfalse,\n\t\t\t[view],\n\t\t);\n\n\t\tview.editInstance(zoomToBizId, viewBinding, _c, true);\n\t},\n\n\t/**\n\t * Adds a new record to the grid.\n\t */\n\tadd: function () {\n\t\tthis.grid.startEditingNew({ bizId: null });\n\t},\n\n\t/**\n\t * Removes a record from the grid.\n\t * @param {string} bizId - the ID of the record to remove.\n\t */\n\tremove: function (bizId) {\n\t\tconst data = this.grid.data;\n\t\tdata.removeAt(data.findIndex(\"bizId\", bizId));\n\t\tthis.grid.deselectAllRecords();\n\t\tthis._eventRowNum = null;\n\t\tthis._eventColumnNum = null;\n\t\tthis._eventRecord = null;\n\t},\n});\n","/**\n * Implements the BizListGrid UI component.\n * Extends BizGrid as defined in datagrid.js.\n */\nisc.ClassFactory.defineClass(\"BizListGrid\", \"BizGrid\");\n\nisc.BizListGrid.addProperties({\n\tsummaryType: \"\", // The type of aggregate function selected\n\ttagId: null, // The tag currently active\n\t_dataSource: null, // Current data source {with setDataSource()}\n\t_toolbar: null, // The toolbar\n\t_advancedFilter: null, // The filter builder\n\t_summaryGrid: null, // The summary grid\n\t_summaryToolbar: null, // The summary toolbar\n\t_summaryFooter: null, // The summary footer form\n\t_flagForm: null,\n\t_flagDialog: null,\n\n\t// Buttons that are enabled disabled on grid row selection\n\t_newButton: null,\n\t_zoomButton: null,\n\t_popoutButton: null,\n\t_editButton: null,\n\t_pickButton: null,\n\n\t// Buttons that are enable disabled based on other factors\n\t_chartButton: null,\n\n\t// Switches to turn off tool buttons or menu items\n\tshowAdd: true,\n\tshowZoom: true,\n\tshowEdit: true,\n\tshowRemove: true,\n\tshowDeselect: true,\n\tshowExport: true,\n\tshowChart: true,\n\tshowFilter: true,\n\tshowSummary: true,\n\tshowSnap: true,\n\tshowTag: true,\n\tshowFlag: true,\n\n\tautoPopulate: true, // Auto fetch from the data source\n\t_lookup: null, // Lookup control when this is used as a picklist\n});\n\nisc.BizListGrid.addMethods({\n\t/**\n\t * Initialises the widget.\n\t *\n\t * Configuration has 4 properties available:\n\t * 1. ListView\n\t * 2. PickList\n\t * 3. ListGrid\n\t * 4. TreeGrid\n\t *\n\t * @param {Object} config - the configuration object.\n\t */\n\tinitWidget: function (config) {\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\tthis._config = config;\n\n\t\t// Flag dialog configuration\n\t\tthis._flagDialog = isc.Window.create({\n\t\t\tautoCenter: true,\n\t\t\tautoSize: true,\n\t\t\tisModal: true,\n\t\t\tshowModalMask: true,\n\t\t\tcanDragReposition: true,\n\t\t\tcanDragResize: false,\n\t\t\tshowShadow: true,\n\t\t\tshadowSoftness: 10,\n\t\t\tshadowOffset: 0,\n\t\t\ttitle: \"Flag\",\n\t\t\theaderIconDefaults: { src: \"flag.gif\", width: 22, height: 22 },\n\t\t\tshowMaximizeButton: false,\n\t\t\tshowMinimizeButton: false,\n\t\t\tshowHeaderIcon: true,\n\t\t\titems: [\n\t\t\t\tisc.DynamicForm.create({\n\t\t\t\t\tpadding: 0,\n\t\t\t\t\tmargin: 5,\n\t\t\t\t\tuseAllDataSourceFields: false,\n\t\t\t\t\tnumCols: 2,\n\t\t\t\t\titems: [], // This form is built in ListGrid.setDataSource()\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\n\t\t/**\n\t\t * Retrieves the filter criteria based on the current state of the filter UI.\n\t\t * If an advanced filter is selected, it will get the criteria from the advanced filter.\n\t\t * Otherwise, it retrieves the basic filter criteria from the grid's filter editor.\n\t\t *\n\t\t * @returns {Object} - the complete filter criteria.\n\t\t */\n\t\tconst getAllCriteria = () => {\n\t\t\t// Get the list criteria for advanced or header filter as appropriate\n\t\t\tlet criteria = this._advancedFilter.toggleButton.selected\n\t\t\t\t? this._advancedFilter.getCriteria()\n\t\t\t\t: this.grid.getFilterEditorCriteria(true);\n\n\t\t\t// Remove _display_ prefix from any criteria\n\t\t\tisc.BizUtil.convertFilterCriteria(criteria);\n\n\t\t\t// If params are defined, ensure they are added to the filter criteria\n\t\t\tif (config?.params) {\n\t\t\t\tcriteria = isc.BizUtil.completeFilterCriteria(\n\t\t\t\t\tcriteria,\n\t\t\t\t\tconfig.params,\n\t\t\t\t\tthis._view,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn criteria;\n\t\t};\n\n\t\t/**\n\t\t * Creates a new menu item with specific properties.\n\t\t * @returns {Object} the new menu item configuration.\n\t\t */\n\t\tconst newItem = {\n\t\t\ttitle: \"New\",\n\t\t\tname: \"new\",\n\t\t\ticon: \"icons/new.png\",\n\n\t\t\t/**\n\t\t\t * Determines if the menu item should be enabled based on certain conditions.\n\t\t\t * @param {Object} target - the target of the action.\n\t\t\t * @param {Object} menu - the menu containing the item.\n\t\t\t * @param {Object} item - the menu item.\n\t\t\t * @returns {boolean} true if the item should be enabled; false otherwise.\n\t\t\t */\n\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\treturn !this._disabled && this.canCreate && this.canAdd;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the click event for the menu item.\n\t\t\t * It checks for unsaved changes and, if no changes exist, initiates a zoom action.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tif (config) {\n\t\t\t\t\tlet contConv = config.contConv || false;\n\n\t\t\t\t\tif (contConv) {\n\t\t\t\t\t\tconst changedOnServer = this._view.gather(false)._changed;\n\t\t\t\t\t\tif (changedOnServer || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\t\tisc.say(\n\t\t\t\t\t\t\t\t`There are unsaved changes in the ${this._view._singular}. Save your changes to the ${this._view._singular} first.`,\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t{ title: \"Unsaved Changes!\" },\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst newParams = {};\n\t\t\t\t\tif (config.params) {\n\t\t\t\t\t\tisc.BizUtil.addFilterRequestParams(newParams, config.params, this._view);\n\t\t\t\t\t}\n\t\t\t\t\tthis.zoom(true, contConv, newParams);\n\t\t\t\t} else {\n\t\t\t\t\tthis.zoom(true, false);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t// The zoom item configuration, including the title, icon, and actions for enabling and clicking.\n\t\tthis._zoomItem = {\n\t\t\ttitle: \"Zoom\",\n\t\t\tname: \"zoom\",\n\t\t\ticon: \"icons/zoom.gif\",\n\n\t\t\t/**\n\t\t\t * Determines if the \"Zoom\" menu item should be enabled based on certain conditions.\n\t\t\t * @param {Object} target - the target of the action.\n\t\t\t * @param {Object} menu - the menu containing the item.\n\t\t\t * @param {Object} item - the menu item.\n\t\t\t * @returns {boolean} true if the item should be enabled; false otherwise.\n\t\t\t */\n\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\treturn this.canZoom && !this.aggregate && this.grid.anySelected();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the click event for the \"Zoom\" menu item.\n\t\t\t * It checks for unsaved changes and, if no changes exist, initiates a zoom action.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tif (config && config.contConv) {\n\t\t\t\t\tconst changedOnServer = this._view.gather(false)._changed;\n\n\t\t\t\t\t// Check for unsaved changes\n\t\t\t\t\tif (changedOnServer || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\tisc.say(\n\t\t\t\t\t\t\t`There are unsaved changes in the ${this._view._singular}. Save your changes to the ${this._view._singular} first.`,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t{ title: \"Unsaved Changes!\" },\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.zoom(false, true); // Trigger zoom action\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.zoom(false, false); // Trigger zoom action without conditions\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t// The popout item configuration, including the title, icon, and actions for enabling and clicking.\n\t\tconst popoutItem = {\n\t\t\ttitle: \"Popout\",\n\t\t\ticon: \"icons/popout.png\",\n\n\t\t\t/**\n\t\t\t * Determines if the \"Popout\" menu item should be enabled based on certain conditions.\n\t\t\t * @param {Object} target - the target of the action.\n\t\t\t * @param {Object} menu - the menu containing the item.\n\t\t\t * @param {Object} item - the menu item.\n\t\t\t * @returns {boolean} true if the item should be enabled; false otherwise.\n\t\t\t */\n\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\treturn (\n\t\t\t\t\tthis.canZoom &&\n\t\t\t\t\t!this.aggregate &&\n\t\t\t\t\t!(config && config.contConv) &&\n\t\t\t\t\tthis.grid.anySelected()\n\t\t\t\t);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the click event for the \"Popout\" menu item.\n\t\t\t * It constructs a URL with event parameters and opens it in a new browser window.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tconst url = `?a=e&m=${this._eventRecord.bizModule}&d=${this._eventRecord.bizDocument}&i=${this._eventRecord.bizId}`;\n\t\t\t\twindow.open(url, \"_blank\").focus();\n\t\t\t},\n\t\t};\n\n\t\t// The edit item configuration, including the title, icon, and actions for enabling and clicking.\n\t\tconst editItem = {\n\t\t\ttitle: \"Edit\",\n\t\t\tname: \"edit\",\n\t\t\ticon: \"icons/edit.png\",\n\n\t\t\t/**\n\t\t\t * Determines if the \"Edit\" menu item should be enabled based on certain conditions.\n\t\t\t * @param {Object} target - the target of the action.\n\t\t\t * @param {Object} menu - the menu containing the item.\n\t\t\t * @param {Object} item - the menu item.\n\t\t\t * @returns {boolean} true if the item should be enabled; false otherwise.\n\t\t\t */\n\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\treturn (\n\t\t\t\t\t!this._disabled &&\n\t\t\t\t\tthis.canUpdate &&\n\t\t\t\t\tthis.canEdit &&\n\t\t\t\t\tthis.grid.anySelected()\n\t\t\t\t);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the click event for the \"Edit\" menu item.\n\t\t\t * It saves the grid request properties, checks for unsaved changes, and starts editing.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tif (this.grid.anySelected()) {\n\t\t\t\t\tthis.grid.saveRequestProperties = this.grid.saveRequestProperties || {};\n\t\t\t\t\tthis.grid.saveRequestProperties.params =\n\t\t\t\t\t\tthis.grid.saveRequestProperties.params || {};\n\t\t\t\t\tthis.grid.saveRequestProperties.params._csrf = this._csrf;\n\n\t\t\t\t\t// Ensure that embedded list grids use their parent view's conversation to edit data\n\t\t\t\t\t// in the same way as when zooming in\n\t\t\t\t\tif (this._view) {\n\t\t\t\t\t\t// this is an embedded list grid\n\t\t\t\t\t\tconst instance = this._view.gather(false); // don't validate\n\t\t\t\t\t\tif (config && config.contConv) {\n\t\t\t\t\t\t\tif (instance._changed || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\t\t\tisc.say(\n\t\t\t\t\t\t\t\t\t`There are unsaved changes in the ${this._view._singular}. Save your changes to the ${this._view._singular} first.`,\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t{ title: \"Unsaved Changes!\" },\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.grid.saveRequestProperties.params._cc = \"\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.grid.saveRequestProperties.params._c = instance._c;\n\t\t\t\t\t\tthis.grid.startEditing(this._eventRowNum, this._eventColNum);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete this.grid.saveRequestProperties.params._c;\n\t\t\t\t\t\tthis.grid.startEditing(this._eventRowNum, this._eventColNum);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t// The pick item configuration, including the title, icon, and actions for enabling and clicking.\n\t\tconst pickItem = {\n\t\t\ttitle: \"Pick\",\n\t\t\tname: \"pick\",\n\t\t\ticon: \"icons/select.png\",\n\n\t\t\t/**\n\t\t\t * Determines if the \"Pick\" menu item should be enabled based on certain conditions.\n\t\t\t * @param {Object} target - the target of the action.\n\t\t\t * @param {Object} menu - the menu containing the item.\n\t\t\t * @param {Object} item - the menu item.\n\t\t\t * @returns {boolean} true if the item should be enabled; false otherwise.\n\t\t\t */\n\t\t\tenableIf: (target, menu, item) => !this._disabled,\n\n\t\t\t/**\n\t\t\t * Handles the click event for the \"Pick\" menu item.\n\t\t\t * It invokes the pick method with the lookup object.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tthis.pick(this._lookup);\n\t\t\t},\n\t\t};\n\n\t\t/**\n\t\t * Creates a toolbar button with the specified properties and actions.\n\t\t *\n\t\t * @param {Object} item - the item configuration, which includes the icon, title, and click action.\n\t\t * @param {boolean} isEnabled - whether the button should be enabled initially.\n\t\t * @param {string} tooltip - the tooltip to display when the button is hovered.\n\t\t * @param {Function} onClick - the function to be invoked when the button is clicked.\n\t\t * @returns {Object} the created button object.\n\t\t */\n\t\tconst createToolbarButton = function (item, isEnabled, tooltip, onClick) {\n\t\t\tconst button = isc.BizUtil.createImageButton(\n\t\t\t\titem.name,\n\t\t\t\titem.icon,\n\t\t\t\tisEnabled,\n\t\t\t\ttooltip,\n\t\t\t\tonClick,\n\t\t\t);\n\t\t\tif (!isEnabled) {\n\t\t\t\tbutton.setDisabled(true);\n\t\t\t}\n\t\t\treturn button;\n\t\t};\n\n\t\t// Create toolbar buttons\n\t\tthis._newButton = createToolbarButton(\n\t\t\tnewItem,\n\t\t\ttrue,\n\t\t\t\"<b>New</b> record.\",\n\t\t\tnewItem.click,\n\t\t);\n\t\tthis._zoomButton = createToolbarButton(\n\t\t\tthis._zoomItem,\n\t\t\ttrue,\n\t\t\t\"<b>Zoom</b> into record.\",\n\t\t\tthis._zoomItem.click,\n\t\t);\n\t\tthis._popoutButton = createToolbarButton(\n\t\t\tpopoutItem,\n\t\t\ttrue,\n\t\t\t\"<b>Popout</b> record.\",\n\t\t\tpopoutItem.click,\n\t\t);\n\t\tthis._editButton = createToolbarButton(\n\t\t\teditItem,\n\t\t\ttrue,\n\t\t\t\"<b>Edit</b> a record inline.\",\n\t\t\teditItem.click,\n\t\t);\n\t\tthis._pickButton = createToolbarButton(\n\t\t\tpickItem,\n\t\t\ttrue,\n\t\t\t\"<b>Pick</b> this record.\",\n\t\t\tpickItem.click,\n\t\t);\n\n\t\t// Disable the zoom, popout, edit, and pick buttons initially\n\t\tthis._zoomButton.setDisabled(true);\n\t\tthis._popoutButton.setDisabled(true);\n\t\tthis._editButton.setDisabled(true);\n\t\tthis._pickButton.setDisabled(true);\n\n\t\t/**\n\t\t * Clears the filter criteria from the grid and the advanced filter.\n\t\t *\n\t\t * @function\n\t\t */\n\t\tconst clearFilter = () => {\n\t\t\tthis.grid.setFilterEditorCriteria({});\n\t\t\tthis._advancedFilter.clearCriteria();\n\t\t\tthis.refresh();\n\t\t};\n\n\t\t/**\n\t\t * Refreshes the current view or grid.\n\t\t *\n\t\t * @function\n\t\t */\n\t\tconst refresh = () => {\n\t\t\tthis.refresh();\n\t\t};\n\n\t\t/**\n\t\t * Configuration for the \"Clear Filter\" item.\n\t\t * @type {Object}\n\t\t */\n\t\tconst clearFilterItem = {\n\t\t\ttitle: \"Clear Filter\",\n\t\t\ticon: \"icons/filter_delete.png\",\n\t\t\tclick: () => {\n\t\t\t\tclearFilter();\n\t\t\t},\n\t\t};\n\n\t\t/**\n\t\t * Configuration for the \"Refresh\" item.\n\t\t * @type {Object}\n\t\t */\n\t\tconst refreshItem = {\n\t\t\ttitle: \"Refresh\",\n\t\t\ticon: \"icons/refresh.png\",\n\t\t\tclick: () => {\n\t\t\t\trefresh();\n\t\t\t},\n\t\t};\n\n\t\t/**\n\t\t * Exports data by organizing selected and unselected fields based on their visibility and field state.\n\t\t * It also applies the filter criteria and initiates the export process.\n\t\t *\n\t\t * @function\n\t\t */\n\t\tconst exportData = () => {\n\t\t\t// Get the field names, excluding hidden fields\n\t\t\tconst fieldNames = this._dataSource.getFieldNames(true);\n\t\t\tconst unselectedFields = [\n\t\t\t\t{ name: \"bizFlagComment\", title: \"Flag\", line: 1, width: 100 },\n\t\t\t];\n\t\t\tconst selectedFields = [];\n\n\t\t\t// Retrieve the field state from the grid\n\t\t\tconst fieldState = this.getFieldState();\n\n\t\t\t// Iterate over field names to classify them into selected and unselected fields\n\t\t\tfieldNames.forEach((fieldName, i) => {\n\t\t\t\tif (fieldName !== \"bizTagged\" && fieldName !== \"bizFlagComment\") {\n\t\t\t\t\tconst field = this._dataSource.getField(fieldName);\n\t\t\t\t\tconst dataGridField = this.grid.getField(fieldName);\n\t\t\t\t\tconst align = dataGridField ? dataGridField.align : \"center\";\n\n\t\t\t\t\t// Add field to selected or unselected based on its visibility\n\t\t\t\t\tif (\n\t\t\t\t\t\tfieldState[i] &&\n\t\t\t\t\t\t(fieldState[i].visible === undefined ||\n\t\t\t\t\t\t\tfieldState[i].visible === null ||\n\t\t\t\t\t\t\tfieldState[i].visible)\n\t\t\t\t\t) {\n\t\t\t\t\t\tselectedFields.push({\n\t\t\t\t\t\t\tname: fieldName,\n\t\t\t\t\t\t\ttitle: field.title,\n\t\t\t\t\t\t\tline: 1,\n\t\t\t\t\t\t\twidth: fieldState[i].width,\n\t\t\t\t\t\t\talign: align,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tunselectedFields.push({\n\t\t\t\t\t\t\tname: fieldName,\n\t\t\t\t\t\t\ttitle: field.title,\n\t\t\t\t\t\t\tline: 1,\n\t\t\t\t\t\t\twidth: 100,\n\t\t\t\t\t\t\talign: align,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Get all filter criteria\n\t\t\tconst allCriteria = getAllCriteria();\n\n\t\t\t// Initiate the export with the selected and unselected fields and filter criteria\n\t\t\tisc.ReportDialog.popupExport(\n\t\t\t\tthis._dataSource.ID,\n\t\t\t\tthis._view ? this._view.gather(false)._c : null,\n\t\t\t\tallCriteria,\n\t\t\t\tthis.tagId,\n\t\t\t\tunselectedFields,\n\t\t\t\tselectedFields,\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * Defines an item for exporting data with a conditional prompt based on the number of rows.\n\t\t * If the row count exceeds certain thresholds, a confirmation dialog is shown before proceeding with the export.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tconst exportItem = {\n\t\t\ttitle: \"Export Data...\",\n\t\t\ticon: \"icons/export.png\",\n\t\t\t/**\n\t\t\t * Handles the click event for the export item.\n\t\t\t * Displays a prompt based on the number of rows in the grid before triggering the data export.\n\t\t\t *\n\t\t\t * @function\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tconst count = this.grid.getTotalRows();\n\n\t\t\t\t// Check if row count exceeds thresholds and show confirmation prompt accordingly\n\t\t\t\tif (count > 10000) {\n\t\t\t\t\tisc.ask(\n\t\t\t\t\t\t`There are ${count} rows in this list to export which could take more than 1 minute! Do you want to continue?`,\n\t\t\t\t\t\t(value) => {\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\texportData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else if (count > 1000) {\n\t\t\t\t\tisc.ask(\n\t\t\t\t\t\t`There are ${count} rows to export which may take a few seconds. Do you want to continue?`,\n\t\t\t\t\t\t(value) => {\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\texportData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\texportData();\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t/**\n\t\t * Collects filter parameters and triggers a chart dialog popup with the specified data.\n\t\t *\n\t\t * @function\n\t\t */\n\t\tconst chartData = () => {\n\t\t\t// Get all filter criteria\n\t\t\tconst allCriteria = getAllCriteria();\n\n\t\t\t// Trigger the chart dialog popup with the necessary parameters\n\t\t\tisc.ChartDialog.popupChart(\n\t\t\t\tthis._dataSource, // Data source for the chart\n\t\t\t\tthis._view ? this._view.gather(false)._c : null, // View criteria, if available\n\t\t\t\tallCriteria, // Filter criteria\n\t\t\t\tthis.tagId, // Tag ID for the data\n\t\t\t\tthis._dataSource.fields, // Data source fields\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * Chart data item configuration for the toolbar.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tconst chartItem = {\n\t\t\ttitle: \"Chart Data...\",\n\t\t\ticon: \"icons/chart.png\",\n\n\t\t\t/**\n\t\t\t * Determines if the chart item should be enabled based on the data source and configuration.\n\t\t\t * It is enabled if the data source exists, is not a tree, and the data source ID does not contain '__'.\n\t\t\t *\n\t\t\t * @param {Object} target - the target of the menu item.\n\t\t\t * @param {Object} menu - the menu to which this item belongs.\n\t\t\t * @param {Object} item - the chart item itself.\n\t\t\t * @returns {boolean} - whether the item should be enabled.\n\t\t\t */\n\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\treturn (\n\t\t\t\t\tthis._dataSource &&\n\t\t\t\t\t!this._config.isTree &&\n\t\t\t\t\t!this._dataSource.ID.includes(\"__\")\n\t\t\t\t);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the click event for the chart item. It shows a confirmation dialog based on the number of rows\n\t\t\t * to be charted, and if confirmed, triggers the charting functionality.\n\t\t\t *\n\t\t\t * @function\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tconst count = this.grid.getTotalRows();\n\n\t\t\t\t// Display a confirmation dialog based on the number of rows\n\t\t\t\tif (count > 10000) {\n\t\t\t\t\tisc.ask(\n\t\t\t\t\t\t`There are ${count} rows in this list to chart which could take more than 1 minute!  Do you want to continue?`,\n\t\t\t\t\t\t(value) => {\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\tchartData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else if (count > 1000) {\n\t\t\t\t\tisc.ask(\n\t\t\t\t\t\t`There are ${count} rows to chart which may take a few seconds.  Do you want to continue?`,\n\t\t\t\t\t\t(value) => {\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\tchartData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tchartData();\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t// Create chart button\n\t\tthis._chartButton = createToolbarButton(\n\t\t\tchartItem,\n\t\t\ttrue,\n\t\t\t\"<b>Chart</b> this data.\",\n\t\t\tchartItem.click,\n\t\t);\n\t\tthis._chartButton.setDisabled(true); // Disable initially\n\n\t\tlet contextMenuData = config && config.isPickList ? [pickItem] : [];\n\t\tif (this.showAdd) {\n\t\t\tcontextMenuData.add(newItem);\n\t\t}\n\t\tif (this.showZoom) {\n\t\t\tcontextMenuData.add(this._zoomItem);\n\t\t\tcontextMenuData.add(popoutItem);\n\t\t}\n\t\tif (this.showEdit) {\n\t\t\tcontextMenuData.add(editItem);\n\t\t}\n\t\tif (this.showRemove) {\n\t\t\tcontextMenuData.add(this.deleteSelectionItem);\n\t\t}\n\t\tif (contextMenuData.length > 0) {\n\t\t\tcontextMenuData.add({ isSeparator: true });\n\t\t}\n\t\tif (this.showDeselect) {\n\t\t\tcontextMenuData.add(this.clearSelectionItem);\n\t\t}\n\t\tif (this.showFilter) {\n\t\t\tif (!this._config.isTree) {\n\t\t\t\tcontextMenuData.add(clearFilterItem);\n\t\t\t}\n\t\t}\n\t\tcontextMenuData.add(refreshItem);\n\t\tif (this.showExport || this.showChart) {\n\t\t\tcontextMenuData.add({ isSeparator: true });\n\t\t\tif (this.showExport) {\n\t\t\t\tcontextMenuData.add(exportItem);\n\t\t\t}\n\t\t\tif (this.showChart) {\n\t\t\t\tcontextMenuData.add(chartItem);\n\t\t\t}\n\t\t}\n\n\t\t// Create the context menu of the BizListGrid\n\t\tthis._contextMenu = isc.Menu.create({\n\t\t\tshowShadow: true,\n\t\t\tshadowDepth: 10,\n\t\t\tdata: contextMenuData,\n\t\t});\n\n\t\t// Initialize the advanced filter with configuration\n\t\tthis._advancedFilter = isc.AdvancedFilter.create({\n\t\t\tfilterableComponent: this,\n\t\t\tfilterableComponentConfig: config,\n\t\t});\n\n\t\t/**\n\t\t * Binds the click event of the toggle button to trigger the `toggleButtonClick` method of the advanced filter instance.\n\t\t */\n\t\tthis._advancedFilter.toggleButton.click = () => {\n\t\t\tthis._advancedFilter.toggleButtonClick();\n\t\t};\n\n\t\t// Create and initialize the snap menu for the BizListGrid\n\t\tthis._snapMenu = isc.Menu.create({\n\t\t\tshowShadow: true,\n\t\t\tshadowDepth: 10,\n\t\t\tcanSelectParentItems: true,\n\t\t\tdata: [],\n\t\t});\n\n\t\t/**\n\t\t * Creates and initializes the Snap Menu button with associated functionality.\n\t\t */\n\t\tthis._snapMenuButton = isc.ToolStripMenuButton.create({\n\t\t\tautoFit: true, // Automatically adjusts the button size to fit the title and icon\n\t\t\tpadding: 3, // Padding around the content inside the button\n\t\t\ttitle: \"No Snapshot\", // The title displayed on the button\n\t\t\tmenu: this._snapMenu, // The associated menu for the button\n\n\t\t\t/**\n\t\t\t * Handler for the click event. Sends an RPC request to fetch snapshot data and populate the menu.\n\t\t\t *\n\t\t\t * @param {Object} args - arguments passed to the click handler.\n\t\t\t */\n\t\t\tclick: function () {\n\t\t\t\tconst params = {\n\t\t\t\t\ta: \"L\",\n\t\t\t\t\td: me._dataSource.ID,\n\t\t\t\t\tt: \"sc\",\n\t\t\t\t\t_csrf: me._csrf,\n\t\t\t\t};\n\t\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\t\tshowPrompt: false,\n\t\t\t\t\tevalResult: true,\n\t\t\t\t\tuseSimpleHttp: true,\n\t\t\t\t\thttpMethod: \"GET\",\n\t\t\t\t\tparams: params,\n\t\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smartsnap\",\n\t\t\t\t\tcallback: function (rpcResponse, data, rpcRequest) {\n\t\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t\t// success\n\t\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\t\tme._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t\t\t// Build the menu dynamically based on the fetched data\n\t\t\t\t\t\t\tconst menu = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: \"New Snapshot\",\n\t\t\t\t\t\t\t\t\ticon: \"icons/snap_add.png\",\n\t\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t\tme._snapMenuButton._newSnap();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{ isSeparator: true },\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: \"No Snapshot\",\n\t\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t\tme._snapMenuButton._setSnap(null);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\t// Populate menu with snapshots if data exists\n\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\tfor (let i = 0, l = data.length; i < l; i++) {\n\t\t\t\t\t\t\t\t\tmenu.add({ isSeparator: true });\n\t\t\t\t\t\t\t\t\tconst snap = data[i];\n\t\t\t\t\t\t\t\t\tconst enabled = me.snapId == snap.bizId;\n\t\t\t\t\t\t\t\t\tconst entry = {\n\t\t\t\t\t\t\t\t\t\ttitle: snap.name,\n\t\t\t\t\t\t\t\t\t\ticon: \"icons/snap.png\",\n\t\t\t\t\t\t\t\t\t\tclick:\n\t\t\t\t\t\t\t\t\t\t\tme._snapMenuButton.ID +\n\t\t\t\t\t\t\t\t\t\t\t\"._setSnap('\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.bizId +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.name +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(snap.snapshot.criteria) +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.snapshot.advancedCriteriaStyle +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.snapshot.fieldState +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.snapshot.sortState +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.snapshot.groupState +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.snapshot.summaryType +\n\t\t\t\t\t\t\t\t\t\t\t\"')\",\n\t\t\t\t\t\t\t\t\t\tsubmenu: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Update Snapshot\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t(enabled ? \"\" : \" (Select the Snapshot first)\"),\n\t\t\t\t\t\t\t\t\t\t\t\ticon: \"icons/snap_edit.png\",\n\t\t\t\t\t\t\t\t\t\t\t\tclick: me._snapMenuButton.ID + \"._updateSnap('\" + snap.bizId + \"')\",\n\t\t\t\t\t\t\t\t\t\t\t\tenabled: enabled,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Delete Snapshot\",\n\t\t\t\t\t\t\t\t\t\t\t\ticon: \"icons/snap_delete.png\",\n\t\t\t\t\t\t\t\t\t\t\t\tclick: me._snapMenuButton.ID + \"._deleteSnap('\" + snap.bizId + \"')\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tmenu.add(entry);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tme._snapMenu.setData(menu);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\t// Call the Super class click handler\n\t\t\t\tthis.Super(\"click\", arguments);\n\t\t\t},\n\t\t});\n\n\t\t/**\n\t\t * Creates a new Snapshot by prompting the user to enter a name.\n\t\t *\n\t\t * @function\n\t\t */\n\t\tthis._snapMenuButton._newSnap = () => {\n\t\t\t// Prompt the user to enter a snapshot name\n\t\t\tisc.askForValue(\n\t\t\t\t\"Enter the new Snapshot name\",\n\t\t\t\t(value) => {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\t// Prepare the parameters for the RPC request\n\t\t\t\t\t\tconst params = {\n\t\t\t\t\t\t\ta: \"N\",\n\t\t\t\t\t\t\tn: value,\n\t\t\t\t\t\t\td: this._dataSource.ID,\n\t\t\t\t\t\t\tt: \"sc\",\n\t\t\t\t\t\t\t_csrf: this._csrf,\n\t\t\t\t\t\t\ts: {\n\t\t\t\t\t\t\t\tcriteria: this._advancedFilter.toggleButton.selected\n\t\t\t\t\t\t\t\t\t? this._advancedFilter.getCriteria()\n\t\t\t\t\t\t\t\t\t: this.grid.getFilterEditorCriteria(true),\n\t\t\t\t\t\t\t\tadvancedCriteriaStyle: this._advancedFilter.getStyle(),\n\t\t\t\t\t\t\t\tfieldState: this.grid.getFieldState(),\n\t\t\t\t\t\t\t\tsortState: this.grid.getSortState(),\n\t\t\t\t\t\t\t\tgroupState: this.grid.getGroupState(),\n\t\t\t\t\t\t\t\tsummaryType: this.summaryType,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Send the RPC request to create the new snapshot\n\t\t\t\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\t\t\t\tshowPrompt: true,\n\t\t\t\t\t\t\tevalResult: true,\n\t\t\t\t\t\t\tuseSimpleHttp: true,\n\t\t\t\t\t\t\thttpMethod: \"POST\",\n\t\t\t\t\t\t\tparams: params,\n\t\t\t\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smartsnap\",\n\t\t\t\t\t\t\tcallback: (rpcResponse, data, rpcRequest) => {\n\t\t\t\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t\t\t\t// success\n\t\t\t\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\t\t\t\tthis._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t\t\t\t\t// Update the snapId and menu button title\n\t\t\t\t\t\t\t\t\tthis.snapId = data.bizId;\n\t\t\t\t\t\t\t\t\tthis._snapMenuButton.setTitle(value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ width: 300 },\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * Sets the snapshot configuration for the grid and updates the UI accordingly.\n\t\t *\n\t\t * @param {string} snapId - the ID of the snapshot to be applied.\n\t\t * @param {string} title - the title of the snapshot.\n\t\t * @param {string} criteria - the criteria in JSON format to be applied to the filter.\n\t\t * @param {string} advancedCriteriaStyle - the style for advanced criteria.\n\t\t * @param {object} fieldState - the field state to be applied to the grid.\n\t\t * @param {object} sortState - the sort state to be applied to the grid.\n\t\t * @param {object} groupState - the group state to be applied to the grid.\n\t\t * @param {string} summaryType - the summary type to be used in the grid.\n\t\t */\n\t\tthis._snapMenuButton._setSnap = (\n\t\t\tsnapId,\n\t\t\ttitle,\n\t\t\tcriteria,\n\t\t\tadvancedCriteriaStyle,\n\t\t\tfieldState,\n\t\t\tsortState,\n\t\t\tgroupState,\n\t\t\tsummaryType,\n\t\t) => {\n\t\t\t// Set the snapshot ID and update the title\n\t\t\tthis.snapId = snapId;\n\t\t\tthis._snapMenuButton.setTitle(title ? title : \"No Snapshot\");\n\n\t\t\t// Parse criteria if defined, or set as an empty object\n\t\t\tcriteria = criteria ? JSON.parse(criteria) : {};\n\n\t\t\t// Handle advanced criteria\n\t\t\tif (criteria.operator) {\n\t\t\t\tthis._advancedFilter.toggleButton.select();\n\t\t\t\tthis._advancedFilter.toggleButtonClick();\n\t\t\t\tthis._advancedFilter.setStyle(\n\t\t\t\t\tadvancedCriteriaStyle ? advancedCriteriaStyle : \"radio\",\n\t\t\t\t);\n\n\t\t\t\t// Clear the filter and apply advanced criteria\n\t\t\t\tthis.grid.setFilterEditorCriteria({});\n\t\t\t\tthis._advancedFilter.setCriteria(criteria);\n\t\t\t} else {\n\t\t\t\t// Clear the criteria for simple filtering\n\t\t\t\tthis._advancedFilter.clearCriteria();\n\t\t\t\tthis._advancedFilter.toggleButton.deselect();\n\t\t\t\tthis._advancedFilter.toggleButtonClick();\n\n\t\t\t\t// Apply simple filter criteria\n\t\t\t\tthis.grid.setFilterEditorCriteria({});\n\t\t\t\tthis.grid.setFilterEditorCriteria(criteria);\n\t\t\t\tthis.grid.setCriteria({});\n\t\t\t\tthis.grid.setFilterEditorCriteria(criteria);\n\t\t\t}\n\n\t\t\t// Apply field, sort, and group states (handling undefined cases)\n\t\t\tthis.grid.setFieldState(fieldState || null);\n\t\t\tthis.grid.setSortState(sortState || null);\n\t\t\tthis.grid.setGroupState(groupState || null);\n\n\t\t\t// Set the summary type and apply it to the summary grid\n\t\t\tthis.summaryType = summaryType || \"\";\n\t\t\tif (this.summaryType == \"\") {\n\t\t\t\tthis.hideMember(this._summaryGrid);\n\t\t\t} else {\n\t\t\t\tthis.showMember(this._summaryGrid);\n\t\t\t}\n\t\t\tthis._summaryFooter.setValue(\"summaryType\", this.summaryType);\n\n\t\t\t// Refresh the grid to apply all changes\n\t\t\tthis.refresh();\n\t\t};\n\n\t\t/**\n\t\t * Updates the snapshot configuration for the grid based on the provided snapshot ID.\n\t\t * Sends an RPC request to update the snapshot and applies the associated settings.\n\t\t *\n\t\t * @param {string} snapId - the ID of the snapshot to be updated.\n\t\t */\n\t\tthis._snapMenuButton._updateSnap = (snapId) => {\n\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\tshowPrompt: true,\n\t\t\t\tevalResult: true,\n\t\t\t\tuseSimpleHttp: true,\n\t\t\t\thttpMethod: \"POST\",\n\t\t\t\tparams: {\n\t\t\t\t\ta: \"U\",\n\t\t\t\t\ti: snapId,\n\t\t\t\t\tt: \"sc\",\n\t\t\t\t\t_csrf: this._csrf,\n\t\t\t\t\ts: {\n\t\t\t\t\t\tcriteria: this._advancedFilter.toggleButton.selected\n\t\t\t\t\t\t\t? this._advancedFilter.getCriteria()\n\t\t\t\t\t\t\t: this.grid.getFilterEditorCriteria(true),\n\t\t\t\t\t\tadvancedCriteriaStyle: this._advancedFilter.getStyle(),\n\t\t\t\t\t\tfieldState: this.grid.getFieldState(),\n\t\t\t\t\t\tsortState: this.grid.getSortState(),\n\t\t\t\t\t\tgroupState: this.grid.getGroupState(),\n\t\t\t\t\t\tsummaryType: this.summaryType,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smartsnap\",\n\t\t\t\tcallback: (rpcResponse, data, rpcRequest) => {\n\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t// Success\n\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\tthis._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Deletes the snapshot identified by the given snapshot ID.\n\t\t *\n\t\t * @param {string} snapId - the ID of the snapshot to be deleted.\n\t\t */\n\t\tthis._snapMenuButton._deleteSnap = (snapId) => {\n\t\t\tisc.ask(\"Do you want to delete this Snapshot?\", (value) => {\n\t\t\t\tif (value) {\n\t\t\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\t\t\tshowPrompt: true,\n\t\t\t\t\t\tevalResult: true,\n\t\t\t\t\t\tuseSimpleHttp: true,\n\t\t\t\t\t\thttpMethod: \"POST\",\n\t\t\t\t\t\tparams: { a: \"D\", i: snapId, _csrf: this._csrf },\n\t\t\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smartsnap\",\n\t\t\t\t\t\tcallback: (rpcResponse, data, rpcRequest) => {\n\t\t\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t\t\t// success\n\t\t\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\t\t\tthis._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t\t\t\t// Reset selected snapshot (if it was selected before deletion)\n\t\t\t\t\t\t\t\tif (this.snapId === snapId) {\n\t\t\t\t\t\t\t\t\tthis._snapMenuButton._setSnap(null);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Clears the currently selected snapshot.\n\t\t */\n\t\tthis._clearSnap = () => {\n\t\t\tthis.snapId = null;\n\t\t\tthis._snapMenuButton.setTitle(\"No Snapshot\");\n\t\t};\n\n\t\t// Create and initialise the the tags menu in the BizListGrid\n\t\tthis._tagsMenu = isc.Menu.create({\n\t\t\tshowShadow: true,\n\t\t\tshadowDepth: 10,\n\t\t\tcanSelectParentItems: true,\n\t\t\tdata: [],\n\t\t});\n\n\t\t// Create and initialise the the tags menu button in the BizListGrid\n\t\tthis._tagsMenuButton = isc.ToolStripMenuButton.create({\n\t\t\tautoFit: true,\n\t\t\tpadding: 3,\n\t\t\ttitle: \"No Tag\",\n\t\t\tmenu: this._tagsMenu,\n\t\t\tclick: function () {\n\t\t\t\tconst params = {\n\t\t\t\t\ta: \"L\",\n\t\t\t\t\tID: me._tagsMenuButton.ID,\n\t\t\t\t\t_csrf: me._csrf,\n\t\t\t\t};\n\n\t\t\t\t// Add tagId to parameters if it exists\n\t\t\t\tif (me.tagId) {\n\t\t\t\t\tparams.t = me.tagId;\n\t\t\t\t}\n\n\t\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\t\tshowPrompt: false,\n\t\t\t\t\tevalResult: true,\n\t\t\t\t\tuseSimpleHttp: true,\n\t\t\t\t\thttpMethod: \"POST\",\n\t\t\t\t\tparams: params,\n\t\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smarttag\",\n\t\t\t\t\tcallback: function (rpcResponse, data, rpcRequest) {\n\t\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t\t// success\n\t\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\t\tme._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\t\tme._tagsMenu.setData(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\t// Call the superclass click method\n\t\t\t\tthis.Super(\"click\", arguments);\n\t\t\t},\n\t\t});\n\n\t\t/**\n\t\t * Prompts the user to enter a new tag name, and then sends a request to create the new tag.\n\t\t * On successful creation, updates the tag menu button title and refreshes the page.\n\t\t *\n\t\t * @function\n\t\t */\n\t\tthis._tagsMenuButton.newTag = () => {\n\t\t\t// Prompt the user to enter a new tag name\n\t\t\tisc.askForValue(\n\t\t\t\t\"Enter the new tag name\",\n\t\t\t\t(value) => {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\t\t\t\tshowPrompt: true,\n\t\t\t\t\t\t\tevalResult: true,\n\t\t\t\t\t\t\tuseSimpleHttp: true,\n\t\t\t\t\t\t\thttpMethod: \"POST\",\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\ta: \"N\",\n\t\t\t\t\t\t\t\tn: value,\n\t\t\t\t\t\t\t\tID: this._tagsMenuButton.ID,\n\t\t\t\t\t\t\t\t_csrf: this._csrf,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smarttag\",\n\t\t\t\t\t\t\tcallback: (rpcResponse, data) => {\n\t\t\t\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t\t\t\t// success\n\t\t\t\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\t\t\t\tthis._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t\t\t\t\tthis.tagId = data.bizId;\n\t\t\t\t\t\t\t\t\tthis._tagsMenuButton.setTitle(value);\n\t\t\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ width: 300 },\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * Sets the tag ID and title for the tag menu button, and refreshes the page.\n\t\t *\n\t\t * @function\n\t\t * @name _tagsMenuButton.setTag\n\t\t * @param {string} tagId - the ID of the tag to set.\n\t\t * @param {string} title - the title of the tag to set.\n\t\t */\n\t\tthis._tagsMenuButton.setTag = (tagId, title) => {\n\t\t\t// Set the tag ID and update the title of the tags menu button\n\t\t\tthis.tagId = tagId;\n\t\t\tthis._tagsMenuButton.setTitle(title);\n\n\t\t\t// Refresh the UI to reflect the changes\n\t\t\tthis.refresh();\n\t\t};\n\n\t\t/**\n\t\t * Performs various operations on tags, such as clearing, deleting, tagging, and untagging.\n\t\t *\n\t\t * @function\n\t\t * @name _tagsMenuButton.tagOp\n\t\t * @param {string} tagId - the ID of the tag to operate on.\n\t\t * @param {string} action - the action to perform on the tag. Possible actions:\n\t\t *   - 'L' for listing all tags.\n\t\t *   - 'T' for tagging all items in the list.\n\t\t *   - 'U' for untagging all items in the list.\n\t\t *   - 'C' for clearing all tagged data in the tag.\n\t\t *   - 'N' for creating a new tag.\n\t\t *   - 'D' for deleting an existing tag.\n\t\t */\n\t\tthis._tagsMenuButton.tagOp = (tagId, action) => {\n\t\t\tconst askConfirmation = (message, callback) => {\n\t\t\t\tisc.ask(message, (value) => {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tswitch (action) {\n\t\t\t\tcase \"C\": // Clear\n\t\t\t\t\taskConfirmation(\n\t\t\t\t\t\t\"Do you want to clear all tagged data from this tag?\",\n\t\t\t\t\t\t() => privateTagOp(tagId, action),\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"D\": // Delete\n\t\t\t\t\taskConfirmation(\"Do you want to delete this tag?\", () =>\n\t\t\t\t\t\tprivateTagOp(tagId, action),\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"T\":\n\t\t\t\tcase \"U\": {\n\t\t\t\t\t// Tag/Untag\n\t\t\t\t\tconst rowCount = this.grid.getTotalRows();\n\t\t\t\t\tlet confirmationMessage = `There are ${rowCount} rows to ${action === \"U\" ? \"un\" : \"\"}tag`;\n\n\t\t\t\t\tif (rowCount > 10000) {\n\t\t\t\t\t\tconfirmationMessage +=\n\t\t\t\t\t\t\t\" which could take more than 1 minute! Do you want to continue?\";\n\t\t\t\t\t} else if (rowCount > 1000) {\n\t\t\t\t\t\tconfirmationMessage +=\n\t\t\t\t\t\t\t\" which may take a few seconds. Do you want to continue?\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprivateTagOp(tagId, action);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\taskConfirmation(confirmationMessage, () => privateTagOp(tagId, action));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tprivateTagOp(tagId, action);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Performs an operation on a tag, such as tagging, untagging, or deleting.\n\t\t *\n\t\t * @function\n\t\t * @name privateTagOp\n\t\t * @param {string} tagId - the ID of the tag to operate on.\n\t\t * @param {string} action - the action to perform on the tag. Possible actions:\n\t\t *   - 'T' for tagging.\n\t\t *   - 'U' for untagging.\n\t\t *   - 'D' for deleting the tag.\n\t\t */\n\t\tconst privateTagOp = (tagId, action) => {\n\t\t\tconst params = {\n\t\t\t\ta: action,\n\t\t\t\tt: tagId,\n\t\t\t\t_csrf: this._csrf,\n\t\t\t};\n\n\t\t\t// Add criteria for 'T' (tag) or 'U' (untag) actions\n\t\t\tif ([\"T\", \"U\"].includes(action)) {\n\t\t\t\tparams.d = this._dataSource.ID;\n\t\t\t\tconst criteria = getAllCriteria();\n\t\t\t\tparams.c = criteria;\n\n\t\t\t\t// Include view-specific criteria if available\n\t\t\t\tif (this._view) {\n\t\t\t\t\tparams._c = this._view.gather(false)._c;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\tshowPrompt: true,\n\t\t\t\tevalResult: true,\n\t\t\t\tuseSimpleHttp: true,\n\t\t\t\thttpMethod: \"POST\",\n\t\t\t\tparams: params,\n\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smarttag\",\n\t\t\t\tcallback: (rpcResponse, data) => {\n\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t// Success\n\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\tthis._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t\t// If deleting the tag, reset the tag menu button title\n\t\t\t\t\t\tif (action === \"D\") {\n\t\t\t\t\t\t\tthis._tagsMenuButton.setTag(null, \"No Tag\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t};\n\n\t\t// Configure the toolbar with buttons based on visibility settings\n\t\tconst toolStripMembers = config && config.isPickList ? [me._pickButton] : [];\n\t\tif (this.showAdd) {\n\t\t\ttoolStripMembers.add(this._newButton);\n\t\t}\n\t\tif (this.showZoom) {\n\t\t\ttoolStripMembers.add(this._zoomButton);\n\t\t\ttoolStripMembers.add(this._popoutButton);\n\t\t}\n\t\tif (this.showEdit) {\n\t\t\ttoolStripMembers.add(this._editButton);\n\t\t}\n\t\tif (this.showRemove) {\n\t\t\ttoolStripMembers.add(this.deleteSelectionButton);\n\t\t}\n\t\tif (toolStripMembers.length > 0) {\n\t\t\ttoolStripMembers.add(\"separator\");\n\t\t}\n\t\tif (this.showDeselect) {\n\t\t\ttoolStripMembers.add(\n\t\t\t\tisc.BizUtil.createImageButton(\n\t\t\t\t\t\"Deselect\",\n\t\t\t\t\tthis.clearSelectionItem.icon,\n\t\t\t\t\tfalse,\n\t\t\t\t\t\"<b>Deselect</b> all.\",\n\t\t\t\t\tthis.clearSelectionItem.click,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t\tif (this.showFilter) {\n\t\t\tif (!this._config.isTree) {\n\t\t\t\ttoolStripMembers.add(\n\t\t\t\t\tisc.BizUtil.createImageButton(\n\t\t\t\t\t\t\"Clear\",\n\t\t\t\t\t\tclearFilterItem.icon,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\"<b>Clear filter</b> criteria.\",\n\t\t\t\t\t\tclearFilterItem.click,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\ttoolStripMembers.add(\n\t\t\tisc.BizUtil.createImageButton(\n\t\t\t\t\"Refresh\",\n\t\t\t\trefreshItem.icon,\n\t\t\t\tfalse,\n\t\t\t\t\"<b>Refresh</b> table data.\",\n\t\t\t\trefreshItem.click,\n\t\t\t),\n\t\t);\n\t\tif (this.showFilter) {\n\t\t\tif (!this._config.isTree) {\n\t\t\t\ttoolStripMembers.addList([\"separator\", this._advancedFilter.toggleButton]);\n\t\t\t}\n\t\t}\n\t\tif (!config || !config.isPickList) {\n\t\t\tif (this.showExport || this.showChart) {\n\t\t\t\ttoolStripMembers.add(\"separator\");\n\t\t\t\tif (this.showExport) {\n\t\t\t\t\ttoolStripMembers.add(\n\t\t\t\t\t\tisc.BizUtil.createImageButton(\n\t\t\t\t\t\t\t\"Export\",\n\t\t\t\t\t\t\texportItem.icon,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\"<b>Export</b> table data.\",\n\t\t\t\t\t\t\texportItem.click,\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (this.showChart) {\n\t\t\t\t\ttoolStripMembers.add(this._chartButton);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.showSnap) {\n\t\t\t\ttoolStripMembers.addList([\n\t\t\t\t\t\"separator\",\n\t\t\t\t\tisc.Label.create({\n\t\t\t\t\t\twidth: 60,\n\t\t\t\t\t\tcontents: \"Snapshot:\",\n\t\t\t\t\t}),\n\t\t\t\t\tthis._snapMenuButton,\n\t\t\t\t]);\n\t\t\t}\n\t\t\tif (this.showTag) {\n\t\t\t\ttoolStripMembers.addList([\n\t\t\t\t\t\"separator\",\n\t\t\t\t\tisc.Label.create({\n\t\t\t\t\t\twidth: 30,\n\t\t\t\t\t\tcontents: \"Tag:\",\n\t\t\t\t\t}),\n\t\t\t\t\tthis._tagsMenuButton,\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Create the toolbar with the configured members\n\t\tthis._toolbar = isc.ToolStrip.create({\n\t\t\tmembersMargin: 2,\n\t\t\tlayoutMargin: 2,\n\t\t\twidth: \"100%\",\n\t\t\toverflow: \"hidden\",\n\t\t\tmembers: toolStripMembers,\n\t\t});\n\n\t\t// Configure the summary grid for the toolbar\n\t\tthis._summaryGrid = isc.ListGrid.create({\n\t\t\tcanEdit: false,\n\t\t\trowClick: function () {\n\t\t\t\tthis.selectRecord(0, false);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\trowDoubleClick: function () {\n\t\t\t\tthis.selectRecord(0, false);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\trowContextClick: function () {\n\t\t\t\tthis.selectRecord(0, false);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\theight: 28,\n\t\t\tleaveScrollbarGap: true,\n\t\t\tautoFetchData: false,\n\t\t\tautoFitData: null,\n\t\t\tshowHeader: false,\n\t\t\tshowEmptyMessage: false,\n\t\t\tbodyOverflow: \"hidden\",\n\t\t});\n\n\t\tthis._summaryFooter = isc.DynamicForm.create({\n\t\t\tnumCols: 1,\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tname: \"summaryType\",\n\t\t\t\t\tshowTitle: false,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tvalueMap: [\"\", \"Count\", \"Avg\", \"Sum\", \"Min\", \"Max\"],\n\t\t\t\t\tdefaultValue: null,\n\t\t\t\t\tchange: (form, item, value, oldValue) => {\n\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\tthis.showMember(this._summaryGrid);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.hideMember(me._summaryGrid);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.summaryType = value;\n\t\t\t\t\t\tthis.grid.invalidateCache();\n\t\t\t\t\t\tthis.grid.filterData(\n\t\t\t\t\t\t\tthis._advancedFilter.toggleButton.selected\n\t\t\t\t\t\t\t\t? this._advancedFilter.getCriteria()\n\t\t\t\t\t\t\t\t: this.grid.getFilterEditorCriteria(true),\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tthis._summaryToolbar = isc.ToolStrip.create({\n\t\t\twidth: \"100%\",\n\t\t\theight: 1,\n\t\t\tmembersMargin: 2,\n\t\t\tlayoutMargin: 2,\n\t\t\tmembers: [this._summaryFooter],\n\t\t});\n\n\t\t// Add grid and toolbar to view based on configuration\n\t\tif (!this._config.isRepeater) {\n\t\t\tthis.addMember(this._toolbar);\n\t\t\tthis.addMember(this._advancedFilter);\n\t\t}\n\n\t\tthis.addMember(this.grid);\n\n\t\tif (!this._config.isTree) {\n\t\t\tif (!this._config.isRepeater) {\n\t\t\t\tthis.addMember(this._summaryGrid);\n\t\t\t\tthis.addMember(this._summaryToolbar);\n\t\t\t\tif (!this.showSummary) {\n\t\t\t\t\tthis.hideMember(this._summaryGrid);\n\t\t\t\t\tthis.hideMember(this._summaryToolbar);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Assign flag form after grid construction\n\t\tthis._flagForm = this._flagDialog.items[0];\n\n\t\t// Handle grid configuration for forms\n\t\tif (config && config.name) {\n\t\t\tlet grids = this._view._grids[config.name];\n\t\t\tif (!grids) {\n\t\t\t\tgrids = {};\n\t\t\t\tthis._view._grids[config.name] = grids;\n\t\t\t}\n\t\t\tgrids[this.getID()] = this;\n\t\t}\n\t},\n\n\t/**\n\t * Checks if the current object has a data source associated with it.\n\t * This is determined by checking if the grid object is not null.\n\t *\n\t * @function\n\t * @name hasDataSource\n\t * @returns {boolean} true if the grid object is not null, indicating a data source is available; false otherwise.\n\t */\n\thasDataSource: function () {\n\t\treturn this.grid !== null;\n\t},\n\n\t/**\n\t * Creates a grid with configuration and fields.\n\t * @param {Object} config - configuration object for the grid.\n\t * @param {Array} fields - fields to display in the grid.\n\t * @param {boolean} canExpandRecords - flag indicating if records can expand.\n\t */\n\t_createGrid: function (config, fields, canExpandRecords) {\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\tconst gridConfig = {\n\t\t\tautoDraw: true,\n\t\t\theight: \"*\",\n\t\t\tminHeight: 100,\n\t\t\tleaveScrollbarGap: true,\n\t\t\tautoFetchData: false,\n\t\t\tuseAllDataSourceFields: true,\n\t\t\tshowHeader: true,\n\t\t\theaderHeight: 30,\n\t\t\tshowFilterEditor:\n\t\t\t\tthis.showFilter &&\n\t\t\t\t!this._config.isTree &&\n\t\t\t\t!this._config.isRepeater &&\n\t\t\t\t!this.aggregate &&\n\t\t\t\t!this._advancedFilter.toggleButton.selected,\n\t\t\tcanShowFilterEditor: false, // Remove header context menu to show/hide filter row\n\t\t\tallowFilterOperators: false, // Remove header context menu to allow selection of operators other than the default\n\t\t\tfilterByCell: false, // Ensure return/enter key or filter button click required to filter\n\t\t\tselectionType: \"single\",\n\t\t\talternateRecordStyles: true,\n\t\t\tcanEdit: true,\n\t\t\tdataSource: this._dataSource,\n\t\t\tfields: fields,\n\t\t\teditEvent: \"none\",\n\t\t\tneverValidate: false,\n\t\t\tvalidateByCell: true,\n\t\t\tsaveByCell: false,\n\t\t\tvalidateOnChange: false,\n\t\t\tcanHover: this._config.isRepeater ? false : true,\n\t\t\tcanReorderFields: false,\n\t\t\tautoSaveEdits: true,\n\t\t\tmodalEditing: true,\n\t\t\tcanFreezeFields: false,\n\t\t\tcontextMenu: this._config.isRepeater ? null : this._contextMenu,\n\t\t\tshowRollOver: true,\n\t\t\trecordEnabledProperty: \"_enabled\",\n\t\t\tcanExpandRecords: canExpandRecords,\n\t\t\texpansionMode: \"details\",\n\n\t\t\t/**\n\t\t\t * Handles row click event.\n\t\t\t * @param {Object} record - the record for the clicked row.\n\t\t\t * @param {number} rowNum - the row number of the clicked row.\n\t\t\t * @param {number} colNum - the column number of the clicked row.\n\t\t\t * @returns {boolean} - returns true to allow normal click processing.\n\t\t\t */\n\t\t\trowClick: function (record, rowNum, colNum) {\n\t\t\t\tif (me.isRepeater) return;\n\t\t\t\tif (record && record.bizId) {\n\t\t\t\t\tme._eventRecord = record;\n\t\t\t\t\tme._eventRowNum = rowNum;\n\t\t\t\t\tme._eventColNum = colNum;\n\t\t\t\t}\n\t\t\t\treturn this.Super(\"rowClick\", arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles row context click event.\n\t\t\t * @param {Object} record - the record for the clicked row.\n\t\t\t * @param {number} rowNum - the row number of the clicked row.\n\t\t\t * @param {number} colNum - the column number of the clicked row.\n\t\t\t * @returns {boolean} - returns true if the context menu should be shown.\n\t\t\t */\n\t\t\trowContextClick: function (record, rowNum, colNum) {\n\t\t\t\tif (me.isRepeater) return false;\n\t\t\t\tif (record && record.bizId) {\n\t\t\t\t\tthis.deselectAllRecords();\n\t\t\t\t\tme._eventRecord = record;\n\t\t\t\t\tme._eventRowNum = rowNum;\n\t\t\t\t\tme._eventColNum = colNum;\n\t\t\t\t\tthis.selectSingleRecord(record);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles row double-click event.\n\t\t\t * @param {Object} record - the record for the clicked row.\n\t\t\t * @param {number} rowNum - the row number of the clicked row.\n\t\t\t * @param {number} colNum - the column number of the clicked row.\n\t\t\t * @returns {boolean} - returns true to allow normal double-click processing.\n\t\t\t */\n\t\t\trowDoubleClick: (record, rowNum, colNum) => {\n\t\t\t\tif (this.isRepeater) return true;\n\t\t\t\tif (record && record.bizId) {\n\t\t\t\t\tthis._eventRecord = record;\n\t\t\t\t\tthis._eventRowNum = rowNum;\n\t\t\t\t\tthis._eventColNum = colNum;\n\n\t\t\t\t\tif (config && config.isPickList) {\n\t\t\t\t\t\tthis.pick(this._lookup);\n\t\t\t\t\t} else if (this.showZoom && this.canZoom && !this.aggregate) {\n\t\t\t\t\t\tif (this._view && this._view._blurry) {\n\t\t\t\t\t\t\tthis._view._blurry = this._zoomItem;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._zoomItem.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Determines whether a record can be selected.\n\t\t\t * @param {Object} record - the record to check for selection.\n\t\t\t * @returns {boolean} - returns true if the record can be selected.\n\t\t\t */\n\t\t\tcanSelectRecord: (record) => !this.isRepeater,\n\n\t\t\t/**\n\t\t\t * Handles the selection change event.\n\t\t\t * @param {Object} record - the selected or deselected record.\n\t\t\t * @param {boolean} state - the selection state (true for selected, false for deselected).\n\t\t\t */\n\t\t\tselectionChanged: function (record, state) {\n\t\t\t\tif (this.anySelected()) {\n\t\t\t\t\tconst zoomDisabled = me.aggregate || !me.canZoom;\n\t\t\t\t\tme._zoomButton.setDisabled(zoomDisabled);\n\t\t\t\t\tme._popoutButton.setDisabled(zoomDisabled || (config && config.contConv));\n\t\t\t\t\tme._editButton.setDisabled(me._disabled || !me.canUpdate || !me.canEdit);\n\t\t\t\t\tme._pickButton.setDisabled(me._disabled);\n\t\t\t\t\tme.deleteSelectionButton.setDisabled(\n\t\t\t\t\t\tme._disabled || !me.canDelete || !me.canRemove,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tme._zoomButton.setDisabled(true);\n\t\t\t\t\tme._popoutButton.setDisabled(true);\n\t\t\t\t\tme._editButton.setDisabled(true);\n\t\t\t\t\tme._pickButton.setDisabled(true);\n\t\t\t\t\tme.deleteSelectionButton.setDisabled(true);\n\t\t\t\t}\n\t\t\t\tme._newButton.setDisabled(me._disabled || !me.canCreate || !me.canAdd);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Updates the selected record binding.\n\t\t\t * @param {Object} record - the selected record.\n\t\t\t * @param {Array} recordList - list of selected records.\n\t\t\t */\n\t\t\tselectionUpdated: (record, recordList) => {\n\t\t\t\tif (this.selectedIdBinding) {\n\t\t\t\t\tif (this.selectedIdTrackChanges) {\n\t\t\t\t\t\tthis._view._vm.setValue(\n\t\t\t\t\t\t\tthis.selectedIdBinding,\n\t\t\t\t\t\t\trecord ? record.bizId : null,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst changes = this._view._vm.valuesHaveChanged();\n\t\t\t\t\t\tthis._view._vm.setValue(\n\t\t\t\t\t\t\tthis.selectedIdBinding,\n\t\t\t\t\t\t\trecord ? record.bizId : null,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (!changes) this._view._vm.rememberValues();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.bizSelected) {\n\t\t\t\t\tif (this.showZoom && this.canZoom && !this.aggregate) {\n\t\t\t\t\t\tif (isc.RPCManager.requestsArePending()) {\n\t\t\t\t\t\t\tif (this._view) {\n\t\t\t\t\t\t\t\tthis._view._blurry = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (this._view) {\n\t\t\t\t\t\t\t\tthis._view._blurry = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.delayCall(\"bizSelected\", [], this.doubleClickDelay);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.bizSelected();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the completion of an edit operation.\n\t\t\t * @param {number} rowNum - the row number of the edited row.\n\t\t\t * @param {number} colNum - the column number of the edited column.\n\t\t\t * @param {Object} newValues - the new values for the edited row.\n\t\t\t * @param {Object} oldValues - the old values for the edited row.\n\t\t\t * @param {Object} editCompletionEvent - the event for edit completion.\n\t\t\t * @param {Object} dsResponse - the response from the data source.\n\t\t\t */\n\t\t\teditComplete: (\n\t\t\t\trowNum,\n\t\t\t\tcolNum,\n\t\t\t\tnewValues,\n\t\t\t\toldValues,\n\t\t\t\teditCompletionEvent,\n\t\t\t\tdsResponse,\n\t\t\t) => {\n\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t// Success\n\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\tif (this.bizEdited) {\n\t\t\t\t\t\tthis.bizEdited();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Customizes the filter data request parameters.\n\t\t\t * @param {Object} criteria - the filter criteria.\n\t\t\t * @param {Function} callback - the callback to call after filtering.\n\t\t\t * @param {Object} requestProperties - the properties for the request.\n\t\t\t */\n\t\t\tfilterData: function (criteria, callback, requestProperties) {\n\t\t\t\tlet result = criteria || {};\n\n\t\t\t\trequestProperties = requestProperties || {};\n\t\t\t\trequestProperties.params = requestProperties.params || {};\n\n\t\t\t\tif (me._csrf) requestProperties.params._csrf = me._csrf;\n\n\t\t\t\tif (!config.isTree) {\n\t\t\t\t\trequestProperties.params._summary = me.summaryType;\n\t\t\t\t}\n\n\t\t\t\tif (me.showTag) {\n\t\t\t\t\trequestProperties.params._tagId = me.tagId;\n\t\t\t\t}\n\n\t\t\t\tif (me._view) {\n\t\t\t\t\trequestProperties.params._c = me._view.gather(false)._c;\n\t\t\t\t\tif (me._view._b) {\n\t\t\t\t\t\trequestProperties.params._b = me._view._b;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (config && (config.contConv || config.isPickList)) {\n\t\t\t\t\trequestProperties.params._cc = \"\";\n\t\t\t\t}\n\n\t\t\t\tlet editorCriteria = me._advancedFilter.toggleButton.selected\n\t\t\t\t\t? me._advancedFilter.getCriteria()\n\t\t\t\t\t: me.grid.getFilterEditorCriteria(true);\n\t\t\t\tif (!editorCriteria) editorCriteria = {};\n\n\t\t\t\tisc.BizUtil.convertFilterCriteria(result);\n\n\t\t\t\tif (config && config.params) {\n\t\t\t\t\tresult = isc.BizUtil.completeFilterCriteria(\n\t\t\t\t\t\teditorCriteria,\n\t\t\t\t\t\tconfig.params,\n\t\t\t\t\t\tme._view,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.Super(\"filterData\", [result, callback, requestProperties]);\n\n\t\t\t\tif (!me._advancedFilter.toggleButton.selected) {\n\t\t\t\t\tme.grid.setFilterEditorCriteria(editorCriteria);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdataProperties: {\n\t\t\t\t/**\n\t\t\t\t * Transforms the data received from the data source.\n\t\t\t\t * @param {Array} newData - the new data to transform.\n\t\t\t\t * @returns {Array} - the transformed data.\n\t\t\t\t */\n\t\t\t\ttransformData: (newData, dsResponse) => {\n\t\t\t\t\t// Only process for fetch/filter operations with successful response\n\t\t\t\t\tif (\n\t\t\t\t\t\tdsResponse.context?.operationType === \"fetch\" &&\n\t\t\t\t\t\tdsResponse.status === isc.RPCResponse.STATUS_SUCCESS\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Update CSRF token\n\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t\t// Configure summary fields based on data source fields\n\t\t\t\t\t\tconst fieldNames = this._dataSource.getFieldNames(true);\n\n\t\t\t\t\t\tlet summaryFields = [];\n\t\t\t\t\t\tfieldNames.forEach((fieldName, i) => {\n\t\t\t\t\t\t\tconst field = this._dataSource.getField(fieldName);\n\t\t\t\t\t\t\tlet fieldType = \"float\";\n\t\t\t\t\t\t\tlet editorType = null;\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tfieldName !== \"bizTagged\" &&\n\t\t\t\t\t\t\t\t(this.summaryType === \"Min\" || this.summaryType === \"Max\")\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tfieldType = field.type;\n\n\t\t\t\t\t\t\t\tconst excludedTypes = [\n\t\t\t\t\t\t\t\t\t\"comboBox\",\n\t\t\t\t\t\t\t\t\t\"enum\",\n\t\t\t\t\t\t\t\t\t\"select\",\n\t\t\t\t\t\t\t\t\t\"bizLookupDescription\",\n\t\t\t\t\t\t\t\t\t\"boolean\",\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\tif (!excludedTypes.includes(fieldType)) {\n\t\t\t\t\t\t\t\t\teditorType = field.editorType;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsummaryFields[i] = {\n\t\t\t\t\t\t\t\tname: fieldName,\n\t\t\t\t\t\t\t\ttype: fieldType,\n\t\t\t\t\t\t\t\teditorType: editorType,\n\t\t\t\t\t\t\t\tcanEdit: false,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (fieldType === \"float\") {\n\t\t\t\t\t\t\t\tsummaryFields[i].formatCellValue = function (\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\trecord,\n\t\t\t\t\t\t\t\t\trowNum,\n\t\t\t\t\t\t\t\t\tcolNum,\n\t\t\t\t\t\t\t\t\tgrid,\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tif (isc.isA.Boolean(value)) {\n\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// For expander column in grid, if applicable\n\t\t\t\t\t\tif (this.grid.canExpandRecords) {\n\t\t\t\t\t\t\tsummaryFields.addAt({ name: \"_expander\", width: 32 }, 0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// For floating filter icon in grid\n\t\t\t\t\t\tsummaryFields.add({ name: \"_filter\", width: 16 });\n\n\t\t\t\t\t\t// Extract and set summary data\n\t\t\t\t\t\tconst summaryData = newData.pop();\n\t\t\t\t\t\tthis._summaryGrid.setData([summaryData]);\n\n\t\t\t\t\t\t// Ensure that the summary grid fields are in the same state as the data grid\n\t\t\t\t\t\tthis.grid.fieldStateChanged();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn newData;\n\t\t\t\t},\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Determines if a cell can be edited.\n\t\t\t */\n\t\t\tcanEditCell: function (rowNum, colNum) {\n\t\t\t\tif (me.disabled) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Don't rely on colNum because the grid expander takes up a column when visible\n\t\t\t\tconst fieldName = this.getFieldName(colNum);\n\t\t\t\tif (fieldName === \"bizTagged\" || fieldName === \"bizFlagComment\") {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn this.Super(\"canEditCell\", arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the change of a field.\n\t\t\t */\n\t\t\tfieldStateChanged: () => {\n\t\t\t\t// Ensure the widths of all fields are set\n\t\t\t\tthis._summaryGrid.setFieldState(this.getFieldState());\n\t\t\t},\n\n\t\t\tscrolled: () => {\n\t\t\t\tthis._summaryGrid.body?.scrollTo(this.grid.body.getScrollLeft(), 0);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the CSS text for a cell.\n\t\t\t */\n\t\t\tgetCellCSSText: function (record, rowNum, colNum) {\n\t\t\t\tif (record?.bizTagged) {\n\t\t\t\t\treturn \"font-weight:bold;background-color:#B8D1EA;\";\n\t\t\t\t}\n\t\t\t\treturn this.Super(\"getCellCSSText\", arguments);\n\t\t\t},\n\t\t};\n\n\t\t// Configure repeater-specific settings\n\t\tif (config.isRepeater) {\n\t\t\tObject.assign(gridConfig, {\n\t\t\t\tshowRollOver: false,\n\t\t\t\tshowSelectedStyle: false,\n\t\t\t\tshowEmptyMessage: false,\n\t\t\t\tbaseStyle: \"\",\n\t\t\t\tshowHeader: config.showColumnHeaders ?? true,\n\t\t\t\tbodyBackgroundColor: \"white\",\n\t\t\t\t...(!config.showGrid && {\n\t\t\t\t\tborder: \"none\",\n\t\t\t\t\tbodyBackgroundColor: \"#F9F9F9\",\n\t\t\t\t}),\n\t\t\t});\n\t\t}\n\n\t\t// Set empty message for non-auto-populate grids\n\t\tif (!this.autoPopulate) {\n\t\t\tgridConfig.emptyMessage = \"No items shown. Filter the grid.\";\n\t\t}\n\n\t\t// Apply custom cell height if specified\n\t\tif (this.cellHeight) {\n\t\t\tgridConfig.cellHeight = this.cellHeight;\n\t\t}\n\n\t\t// Merge additional grid configuration if provided\n\t\tif (config.gridConfig) {\n\t\t\tObject.assign(gridConfig, config.gridConfig);\n\t\t}\n\n\t\t// Create appropriate grid type based on configuration\n\t\tif (config.isTree) {\n\t\t\t// Configure tree-specific properties\n\t\t\tconst treeConfig = {\n\t\t\t\t...gridConfig,\n\t\t\t\tfolderIcon: null,\n\t\t\t\tloadOnDemand: true,\n\t\t\t\tdataProperties: {\n\t\t\t\t\topenProperty: \"_isOpen\",\n\t\t\t\t\tisFolderProperty: \"_isFolder\",\n\t\t\t\t\tchildrenProperty: \"_children\",\n\t\t\t\t},\n\t\t\t\tdataFetchMode: \"paged\",\n\t\t\t};\n\n\t\t\tthis.grid = isc.TreeGrid.create(treeConfig);\n\t\t} else {\n\t\t\tthis.grid = isc.ListGrid.create(gridConfig);\n\t\t}\n\t},\n\n\t/**\n\t * Disables or enables the component and triggers the selection change on the grid.\n\t * @param {boolean} disabled - flag indicating whether the component should be disabled (true) or enabled (false).\n\t */\n\tsetDisabled: function (disabled) {\n\t\tthis._disabled = disabled;\n\t\tif (this.grid) {\n\t\t\tthis.grid.selectionChanged();\n\t\t}\n\t},\n\n\t/**\n\t * Sets the BizListGrid into pick list mode by updating the lookup, filter parameters, and view.\n\t * @param {Object} lookup - the lookup object containing description and relevant details.\n\t * @param {Object} filterParams - the unprocessed filter parameters to be used for filtering the data.\n\t * @param {Object} view - the view used to process the filter parameters.\n\t */\n\tsetLookup: function (lookup, filterParams, view) {\n\t\tthis._lookup = lookup;\n\t\tthis._config.params = filterParams;\n\t\tthis._view = view;\n\t},\n\n\t/**\n\t * Refreshes the list view by deselecting all records, invalidating the cache,\n\t * applying the appropriate filter criteria, and scrolling to the top row.\n\t */\n\trefresh: function () {\n\t\tconst topRowNum = this.grid.getVisibleRows()[0];\n\n\t\tthis.grid.deselectAllRecords();\n\t\tthis._eventRowNum = null;\n\t\tthis._eventColumnNum = null;\n\t\tthis._eventRecord = null;\n\n\t\t// Invalidate the cache to trigger a refresh of the data\n\t\tthis.grid.invalidateCache();\n\n\t\t// Apply filter criteria, based on the advanced filter toggle state\n\t\tconst filterCriteria = this._advancedFilter.toggleButton.selected\n\t\t\t? this._advancedFilter.getCriteria()\n\t\t\t: this.grid.getFilterEditorCriteria(true);\n\t\tthis.grid.filterData(filterCriteria);\n\n\t\t// Scroll to the top row for the refreshed data\n\t\tthis.grid.scrollToRow(topRowNum, \"top\");\n\t},\n\n\t/**\n\t * Called when a new record is added to a pick list view.\n\t * The pick list view must be refreshed to display the newly added record.\n\t * For other list types, this method does not trigger a rerender as it is invoked by form scatter when the grid is not ready.\n\t */\n\trerender: function () {\n\t\tif (this.isPickList) {\n\t\t\tthis.refresh();\n\t\t}\n\t},\n\n\t/**\n\t * Sets the data source for the component and configures the related grid and form settings.\n\t *\n\t * @param {string} ID - the ID of the data source.\n\t * @param {Object} [menuConfig] - optional configuration passed from the menu. It may override certain defaults.\n\t * @returns {string} the title of the data source.\n\t */\n\tsetDataSource: function (ID, menuConfig) {\n\t\t// Switch off any snapshot selected before\n\t\tthis._clearSnap();\n\n\t\tthis._dataSource = isc.DataSource.get(ID);\n\n\t\tthis.canCreate = this._dataSource.canCreate;\n\t\tthis.canUpdate = this._dataSource.canUpdate;\n\t\tthis.canDelete = this._dataSource.canDelete;\n\t\tthis.aggregate = this._dataSource.aggregate;\n\n\t\tif (this.aggregate) {\n\t\t\tif (!this._config.isRepeater) {\n\t\t\t\tthis.hideMember(this._toolbar);\n\t\t\t\tif (!this._config.isTree) {\n\t\t\t\t\tthis.hideMember(this._summaryGrid);\n\t\t\t\t\tthis.hideMember(this.summaryToolbar);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.canCreate = false;\n\t\t\tthis.canUpdate = false;\n\t\t\tthis.canDelete = false;\n\t\t} else {\n\t\t\tif (!this._config.isRepeater) {\n\t\t\t\tthis.showMember(this._toolbar);\n\n\t\t\t\t// Disable chart if a tree or a model data source\n\t\t\t\tthis._chartButton.setDisabled(\n\t\t\t\t\tthis._config.isTree || this._dataSource.ID.contains(\"__\"),\n\t\t\t\t);\n\n\t\t\t\tif (!this._config.isTree) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.showSummary === undefined ||\n\t\t\t\t\t\tthis.showSummary === null ||\n\t\t\t\t\t\tthis.showSummary\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (this.summaryType === \"\") {\n\t\t\t\t\t\t\tthis.hideMember(this._summaryGrid);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.showMember(this._summaryGrid);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.showMember(this._summaryToolbar);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.hideMember(this._summaryGrid);\n\t\t\t\t\t\tthis.hideMember(this._summaryToolbar);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (menuConfig) {\n\t\t\t// Set the menu defaults (remember that one instance of BizListGrid is shared for list view)\n\t\t\tthis.autoPopulate = true;\n\n\t\t\t// Override with menu config values if present\n\t\t\tif (menuConfig.autoPopulate !== undefined) {\n\t\t\t\tthis.autoPopulate = menuConfig.autoPopulate;\n\t\t\t}\n\t\t}\n\n\t\tthis.cellHeight = this._dataSource.cellHeight || null;\n\n\t\tconst fields = [];\n\t\tif (this.isRepeater || this.aggregate) {\n\t\t\tfields.add({ name: \"bizTagged\", hidden: true, canHide: false });\n\t\t} else if (this.showTag) {\n\t\t\tfields.add({\n\t\t\t\tname: \"bizTagged\",\n\t\t\t\twidth: 38,\n\t\t\t\talign: \"center\",\n\t\t\t\tcanHide: false,\n\t\t\t\tcanSort: false,\n\t\t\t\tcanToggle: false, // if true, this displays disabled\n\t\t\t\tcanGroupBy: false,\n\t\t\t\tshowHover: false,\n\t\t\t\tignoreKeyboardClicks: true,\n\t\t\t\trecordClick: (\n\t\t\t\t\tviewer,\n\t\t\t\t\trecord,\n\t\t\t\t\trecordNum,\n\t\t\t\t\tfield,\n\t\t\t\t\tfieldNum,\n\t\t\t\t\tvalue,\n\t\t\t\t\trawValue,\n\t\t\t\t\teditedRecord,\n\t\t\t\t) => {\n\t\t\t\t\tif (record && this.canUpdate && this.canEdit) {\n\t\t\t\t\t\tif (this.tagId) {\n\t\t\t\t\t\t\tthis._eventRecord = record;\n\t\t\t\t\t\t\tthis._eventRowNum = recordNum;\n\t\t\t\t\t\t\tthis._eventColNum = fieldNum;\n\t\t\t\t\t\t\trecord.bizTagged = record.bizTagged ? \"UNTAG\" : \"TAG\";\n\t\t\t\t\t\t\tthis.grid.updateData(\n\t\t\t\t\t\t\t\trecord,\n\t\t\t\t\t\t\t\t(dsResponse, data, dsRequest) => {\n\t\t\t\t\t\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tshowPrompt: false,\n\t\t\t\t\t\t\t\t\tparams: { _tagId: this.tagId, _csrf: this._csrf },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tisc.warn(\n\t\t\t\t\t\t\t\t\"Select or create a tag first from the tags menu in the list toolbar\",\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false; // do not allow list grid level record click event to fire\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tfields.add({ name: \"bizTagged\", hidden: true, canHide: false });\n\t\t}\n\n\t\tif (this.isRepeater || this.aggregate) {\n\t\t\tfields.add({ name: \"bizFlagComment\", hidden: true, canHide: false });\n\t\t} else if (this.showFlag) {\n\t\t\tfields.add({\n\t\t\t\tname: \"bizFlagComment\",\n\t\t\t\twidth: 40,\n\t\t\t\talign: \"center\",\n\t\t\t\tcanHide: false,\n\t\t\t\tignoreKeyboardClicks: true,\n\t\t\t\tformatCellValue: (value, record) =>\n\t\t\t\t\tvalue ? '<img src=\"images/flag.gif\">' : \"\",\n\t\t\t\trecordClick: (\n\t\t\t\t\tviewer,\n\t\t\t\t\trecord,\n\t\t\t\t\trecordNum,\n\t\t\t\t\tfield,\n\t\t\t\t\tfieldNum,\n\t\t\t\t\tvalue,\n\t\t\t\t\trawValue,\n\t\t\t\t\teditedRecord,\n\t\t\t\t) => {\n\t\t\t\t\tif (this.canUpdate && this.canEdit) {\n\t\t\t\t\t\tthis._eventRecord = record;\n\t\t\t\t\t\tthis._eventRowNum = recordNum;\n\t\t\t\t\t\tthis._eventColNum = fieldNum;\n\t\t\t\t\t\tthis._flagForm.editRecord(record);\n\t\t\t\t\t\tthis._flagDialog.show();\n\t\t\t\t\t}\n\t\t\t\t\treturn false; // do not allow list grid level record click event to fire\n\t\t\t\t},\n\t\t\t\thoverHTML: function (record, value, rowNum, colNum, grid) {\n\t\t\t\t\treturn record.bizFlagComment;\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tfields.add({ name: \"bizFlagComment\", hidden: true, canHide: false });\n\t\t}\n\n\t\tconst fieldNames = this._dataSource.getFieldNames(true);\n\t\tlet hasDetailFields = false;\n\t\tlet treeFieldNotSet = true;\n\n\t\tfieldNames.forEach((fieldName) => {\n\t\t\tif (fieldName !== \"bizTagged\" && fieldName !== \"bizFlagComment\") {\n\t\t\t\tconst dsField = this._dataSource.getField(fieldName);\n\t\t\t\tif (!dsField.foreignKey) {\n\t\t\t\t\t// Not the parent FK tree field\n\t\t\t\t\tconst gridField = {\n\t\t\t\t\t\tname: fieldName,\n\t\t\t\t\t\tautoFitWidth: false,\n\t\t\t\t\t\tcanToggle: false,\n\t\t\t\t\t};\n\t\t\t\t\tif (treeFieldNotSet) {\n\t\t\t\t\t\tgridField.treeField = true;\n\t\t\t\t\t\ttreeFieldNotSet = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (dsField.canSave === false) {\n\t\t\t\t\t\tgridField.canEdit = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (!hasDetailFields && dsField.detail) {\n\t\t\t\t\t\thasDetailFields = true;\n\t\t\t\t\t}\n\t\t\t\t\tfields.add(gridField);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._advancedFilter.setDataSource(this._dataSource);\n\n\t\tthis._flagForm.setDataSource(this._dataSource);\n\t\tthis._flagForm.setFields([\n\t\t\t{\n\t\t\t\tname: \"bizFlagComment\",\n\t\t\t\ttype: \"richText\",\n\t\t\t\tcolSpan: 2,\n\t\t\t\theight: 175,\n\t\t\t\tvalidators: [{ type: \"lengthRange\", min: 0, max: 1024, clientOnly: true }],\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: \"button\",\n\t\t\t\ttitle: \"Clear\",\n\t\t\t\twidth: 100,\n\t\t\t\talign: \"right\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tclick: () => {\n\t\t\t\t\tconst commentField = this._flagForm.getField(\"bizFlagComment\");\n\t\t\t\t\tif (commentField.getValue() !== \"\") {\n\t\t\t\t\t\tcommentField.setValue(\"\");\n\t\t\t\t\t\tthis._flagForm.saveData(\n\t\t\t\t\t\t\t(dsResponse) => {\n\t\t\t\t\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\t\t\t\tthis._flagForm.reset();\n\t\t\t\t\t\t\t\t\tthis._flagDialog.hide();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ params: { _csrf: this._csrf } },\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: \"button\",\n\t\t\t\ttitle: \"Flag\",\n\t\t\t\twidth: 100,\n\t\t\t\talign: \"left\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: true,\n\t\t\t\tclick: () => {\n\t\t\t\t\tif (this._flagForm.validate(true)) {\n\t\t\t\t\t\tthis._flagForm.saveData(\n\t\t\t\t\t\t\t(dsResponse) => {\n\t\t\t\t\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\t\t\t\tthis._flagForm.reset();\n\t\t\t\t\t\t\t\t\tthis._flagDialog.hide();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ params: { _csrf: this._csrf } },\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t]);\n\n\t\tif (this.grid) {\n\t\t\tthis.removeMember(this.grid);\n\t\t\tthis.grid.destroy();\n\t\t}\n\t\tthis._createGrid(this._config, fields, hasDetailFields);\n\n\t\tif (this._config.isTree || this._config.isRepeater) {\n\t\t\tthis.addMember(this.grid); // Add to the end - no summary row\n\t\t} else {\n\t\t\tthis.addMember(this.grid, this.getMembers().length - 2); // Add before the summary row and summary toolbar\n\t\t}\n\n\t\tif (this.rootIdBinding) {\n\t\t\tthis.grid.getDataSource().getField(\"bizParentId\").rootValue =\n\t\t\t\t\"_\" + this._view._vm.getValue(this.rootIdBinding);\n\t\t} else {\n\t\t\tconst bizParentIdField = this.grid.getDataSource().getField(\"bizParentId\");\n\n\t\t\tif (bizParentIdField) {\n\t\t\t\tbizParentIdField.rootValue = null;\n\t\t\t}\n\t\t}\n\n\t\tif (this.autoPopulate) {\n\t\t\tthis.grid.filterData(\n\t\t\t\tthis._advancedFilter.toggleButton.selected\n\t\t\t\t\t? this._advancedFilter.getCriteria()\n\t\t\t\t\t: this.grid.getFilterEditorCriteria(),\n\t\t\t);\n\t\t}\n\n\t\tthis.grid.selectionChanged(null, false); // Ensure buttons are disabled\n\n\t\treturn this._dataSource.getTitle();\n\t},\n\n\t/**\n\t * Retrieves and sets the field state of the data grid, ensuring all fields have a width defined.\n\t * @returns {Array} the field state, including field names and their corresponding widths.\n\t */\n\tgetFieldState: function () {\n\t\t// Ensure the widths of all fields are set\n\t\tconst fieldState = eval(this.grid.getFieldState());\n\n\t\treturn fieldState.map((field) => {\n\t\t\t// Handle specific fields 'bizTagged' and 'bizFlagComment'\n\t\t\tif (field === \"bizTagged\") {\n\t\t\t\treturn { name: \"bizTagged\", width: 38 };\n\t\t\t}\n\t\t\tif (field === \"bizFlagComment\") {\n\t\t\t\treturn { name: \"bizFlagComment\", width: 40 };\n\t\t\t}\n\n\t\t\t// Handle other fields\n\t\t\tif (!field.width) {\n\t\t\t\treturn {\n\t\t\t\t\t...field,\n\t\t\t\t\twidth: this.grid.getFieldWidth(field.name),\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn field;\n\t\t});\n\t},\n\n\t/**\n\t * Navigates to the edit view, either for a new or existing record, based on the specified parameters.\n\t * Handles the conversation continuation logic and ensures the proper context for zooming into the record.\n\t *\n\t * @param {boolean} zoomToNew - indicates whether to navigate to a new record (true) or an existing one (false).\n\t * @param {boolean} contConv - specifies whether to continue the owning view's conversation (true) or start a new one (false).\n\t * @param {Object|null|undefined} newParams - a map of parameter names to expressions to evaluate, can be null or undefined.\n\t */\n\tzoom: function (zoomToNew, contConv, newParams) {\n\t\tconst { grid, _eventRecord, _view, _dataSource } = this;\n\t\tlet module = null;\n\t\tlet document = null;\n\t\tlet bizId = null;\n\n\t\t// Determine module, document, and bizId based on context\n\t\tif (!zoomToNew && _eventRecord) {\n\t\t\tmodule = _eventRecord.bizModule;\n\t\t\tdocument = _eventRecord.bizDocument;\n\t\t\tbizId = _eventRecord.bizId;\n\t\t} else {\n\t\t\tconst dotIndex = grid.dataSource.modoc.indexOf(\".\");\n\t\t\tmodule = grid.dataSource.modoc.substring(0, dotIndex);\n\t\t\tdocument = grid.dataSource.modoc.substring(dotIndex + 1);\n\t\t}\n\n\t\tconst gridRect = grid.body.getPageRect();\n\n\t\tisc.BizUtil.getEditView(module, document, (view) => {\n\t\t\tif (_view) {\n\t\t\t\tconst instance = _view.gather(false); // Don't validate\n\n\t\t\t\t// If continuing the conversation\n\t\t\t\tif (contConv) {\n\t\t\t\t\t_view._source = _dataSource.ID.substring(\n\t\t\t\t\t\t_dataSource.ID.lastIndexOf(\"_\") + 1,\n\t\t\t\t\t);\n\t\t\t\t\tthis._zoom(zoomToNew, view, newParams, bizId, instance._c, gridRect);\n\t\t\t\t} else {\n\t\t\t\t\t// If changes need to be applied\n\t\t\t\t\tif (instance._apply || _view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\tdelete instance._apply;\n\t\t\t\t\t\t_view.saveInstance(true, null, (data, success) => {\n\t\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\t\t_view._source = _dataSource.ID.substring(\n\t\t\t\t\t\t\t\t\t_dataSource.ID.lastIndexOf(\"_\") + 1,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis._zoom(zoomToNew, view, newParams, bizId, null, gridRect);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// No changes - directly zoom in\n\t\t\t\t\t\t_view._source = _dataSource.ID.substring(\n\t\t\t\t\t\t\t_dataSource.ID.lastIndexOf(\"_\") + 1,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis._zoom(zoomToNew, view, newParams, bizId, null, gridRect);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._zoom(zoomToNew, view, newParams, bizId, null, gridRect);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Handles the zooming logic for either a new or existing record, and displays the appropriate view in a popup.\n\t *\n\t * @param {boolean} zoomToNew - indicates whether to navigate to a new record (true) or an existing one (false).\n\t * @param {Object} view - the view to display in the popup.\n\t * @param {Object|null|undefined} newParams - a map of parameter names to expressions to evaluate, can be null or undefined.\n\t * @param {string} bizId - the business ID of the document for editing (if not creating a new record).\n\t * @param {Object} _c - additional context or configuration passed to the view methods.\n\t * @param {Array} gridRect - the coordinates of the grid that will define the position of the popup.\n\t */\n\t_zoom: function (zoomToNew, view, newParams, bizId, _c, gridRect) {\n\t\tif (zoomToNew) {\n\t\t\tisc.WindowStack.popup(gridRect, \"New\", true, [view]);\n\t\t\tview.newInstance(newParams, null, _c);\n\t\t} else {\n\t\t\tconst rowRect = [\n\t\t\t\tgridRect[0],\n\t\t\t\tthis.grid.body.getRowPageTop(this._eventRowNum),\n\t\t\t\tgridRect[2],\n\t\t\t\tthis.grid.body.getRowSize(this._eventRowNum),\n\t\t\t];\n\t\t\tisc.WindowStack.popup(rowRect, \"Edit\", true, [view]);\n\t\t\tview.editInstance(bizId, null, _c);\n\t\t}\n\t},\n\n\t/**\n\t * Handles the selection of a record from a picklist, updating the lookup description and calling necessary functions.\n\t *\n\t * @param {Object} lookupDescription - the description object for the lookup field being populated.\n\t */\n\tpick: function (lookupDescription) {\n\t\tif (this._eventRecord) {\n\t\t\tlookupDescription.setValueMapFromPickList(this._eventRecord);\n\t\t\tlookupDescription.setValue(this._eventRecord.bizId);\n\t\t\tlookupDescription.bizPicked(\n\t\t\t\tlookupDescription.form,\n\t\t\t\tlookupDescription,\n\t\t\t\tthis._eventRecord.bizId,\n\t\t\t);\n\t\t}\n\n\t\tisc.WindowStack.popoff(false); // Remove the pick popup - no rerender of the parent edit view\n\n\t\tif (this._eventRecord) {\n\t\t\t// Only call changedForServer if it is defined\n\t\t\tif (lookupDescription.changedForServer) {\n\t\t\t\tlookupDescription.changedForServer(\n\t\t\t\t\tlookupDescription.form,\n\t\t\t\t\tlookupDescription,\n\t\t\t\t\tthis._eventRecord.bizId,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis._eventRecord = null;\n\t\t}\n\t},\n});\n","/**\n * Implements BizHeader in the UI.\n * @class BizHeader\n * @extends HLayout\n */\nisc.defineClass(\"BizHeader\", \"HLayout\");\n\nisc.BizHeader.addProperties({\n\twidth: \"100%\",\n\theight: 50,\n\tbackgroundColor: \"#477db0\",\n});\n\nisc.BizHeader.addMethods({\n\t/**\n\t * Initialise widget and construct UI.\n\t */\n\tinitWidget: function () {\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\t// Header template\n\t\tthis.addMember(\n\t\t\tisc.HTMLFlow.create({\n\t\t\t\twidth: \"100%\",\n\t\t\t\tcontents: \"\",\n\t\t\t}),\n\t\t);\n\n\t\t// Helpers\n\t\tconst userImg = isc.BizUtil.userContactImageUrl;\n\t\tconst userInitials = isc.BizUtil.userContactInitials;\n\t\tconst userName = isc.BizUtil.userName;\n\t\tconst userDisplay = isc.BizUtil.userContactName;\n\n\t\tconst avatar64 = userImg\n\t\t\t? `<img src=\"${userImg}\" style=\"width:64px;height:64px;border-radius:50%;margin-bottom:6px\"/>`\n\t\t\t: `<div style=\"width:64px;height:64px;border-radius:50%;background:#6c757d;color:#fff;\n                 display:flex;align-items:center;justify-content:center;margin-bottom:6px\">\n                   ${userInitials}\n               </div>`;\n\n\t\tconst profileBlock = `\n            <div style=\"display:flex;align-items:center;padding:10px;flex-direction:column\">\n                ${avatar64}\n                <div style=\"padding-bottom:6px\">${userDisplay}</div>\n                <div style=\"color:#777;font-size:12px\">${userName}</div>\n            </div>\n        `;\n\n\t\t// Menu data\n\t\tconst menuData = [\n\t\t\t{ title: profileBlock, canSelect: false, enabled: false },\n\t\t\t{ isSeparator: true },\n\n\t\t\t{\n\t\t\t\ttitle: \"<strong>User Management</strong>\",\n\t\t\t\tcanSelect: false,\n\t\t\t\tenabled: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: `<i class=\"fa-solid fa-user\" style=\"margin:0 10px\"></i>Profile`,\n\t\t\t\tclick() {\n\t\t\t\t\twindow.location = \"?a=e&m=admin&d=UserDashboard\";\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: `<i class=\"fa-solid fa-user-shield\" style=\"margin:0 10px\"></i>Account`,\n\t\t\t\tclick() {\n\t\t\t\t\twindow.location = \"?a=e&m=admin&d=UserAccount\";\n\t\t\t\t},\n\t\t\t},\n\n\t\t\t{ isSeparator: true },\n\t\t\t{\n\t\t\t\ttitle: `<i class=\"fa-solid fa-power-off\" style=\"margin:0 10px\"></i>Logout`,\n\t\t\t\tclick() {\n\t\t\t\t\twindow.location = \"loggedOut\";\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\tif (isc.BizUtil.canSwitchMode) {\n\t\t\tmenuData.addList([\n\t\t\t\t{ isSeparator: true },\n\t\t\t\t{ title: \"<strong>Switch mode</strong>\", canSelect: false, enabled: false },\n\t\t\t\t{\n\t\t\t\t\ttitle: `<i class=\"fa-solid fa-retweet\" style=\"margin:0 10px\"></i>Switch Mode`,\n\t\t\t\t\tclick() {\n\t\t\t\t\t\tsetUxUi();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t]);\n\t\t}\n\n\t\t// Avatar (top-right)\n\t\tconst avatar32 = userImg\n\t\t\t? `<img src=\"${userImg}\" style=\"width:32px;height:32px;border-radius:50%;object-fit:cover;\"/>`\n\t\t\t: `<div style=\"width:32px;height:32px;border-radius:50%;background:#6c757d;color:#fff;\n                display:flex;align-items:center;justify-content:center\">${userInitials}</div>`;\n\n\t\t// Badge placeholder\n\t\tconst avatarHtml = `\n            <div style=\"position:relative;cursor:pointer;display:inline-block;padding-top:10px\">\n                ${avatar32}\n                <span style=\"position:absolute;top:2px;right:-5px;background:red;color:white;font-size:12px;\n                             padding:2px 6px;border-radius:50%;\">4</span>\n            </div>\n        `;\n\n\t\t// User menu button\n\t\tthis.addMember(\n\t\t\tisc.HTMLFlow.create({\n\t\t\t\twidth: 50,\n\t\t\t\tcontents: avatarHtml,\n\t\t\t\tclick() {\n\t\t\t\t\tthis._userMenu.showNextTo(this, \"bottom\");\n\t\t\t\t},\n\t\t\t\t_userMenu: isc.Menu.create({\n\t\t\t\t\tshowShadow: true,\n\t\t\t\t\tshadowDepth: 10,\n\t\t\t\t\twidth: 220,\n\t\t\t\t\tshowIcons: false,\n\t\t\t\t\tshowSubmenus: false,\n\t\t\t\t\tshowKeys: false,\n\t\t\t\t\tdata: menuData,\n\t\t\t\t}),\n\t\t\t}),\n\t\t);\n\t},\n\n\t/**\n\t * Replace header contents using the template.\n\t * @param {string} icon\n\t * @param {string} title\n\t * @param {string} link\n\t * @param {string} help\n\t */\n\treplace(icon, title, link, help) {\n\t\tconst m = this.getMember(0);\n\t\tconst heading = isc.BizUtil.headerTemplate\n\t\t\t.replace(\"{icon}\", icon)\n\t\t\t.replace(\"{title}\", title)\n\t\t\t.replace(\"{link}\", link)\n\t\t\t.replace(\"{help}\", help);\n\n\t\tm.setContents(heading);\n\t},\n});\n","/**\n *  Defines the ListView UI.\n */\nisc.defineClass(\"ListView\");\n\nisc.ListView.addClassProperties({\n\t_header: null,\n\n\t/**\n\t * The contents (layout) of the entire list.\n\t * @type {isc.VLayout}\n\t */\n\tcontents: isc.VLayout.create({\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\toverflow: \"auto\",\n\t\tmembersMargin: 2,\n\t\tlayoutMargin: 2,\n\t\tmargin: 2,\n\n\t\t/**\n\t\t * Re-renders the currently visible view.\n\t\t */\n\t\trerender: function () {\n\t\t\tconst views = [\"_grid\", \"_calendar\", \"_tree\", \"_map\"];\n\t\t\tfor (const view of views) {\n\t\t\t\tif (isc.ListView[view]?.isVisible()) {\n\t\t\t\t\tisc.ListView[view].refresh?.();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Resumes auto-refresh for the visible view.\n\t\t */\n\t\tresume: function () {\n\t\t\t// const views = [\"_grid\", \"_calendar\", \"_tree\", \"_map\"];\n\t\t\tconst views = [\"_map\"];\n\t\t\tfor (const view of views) {\n\t\t\t\tif (isc.ListView[view]?.isVisible()) {\n\t\t\t\t\tisc.ListView[view].resume?.();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}),\n\n\t_grid: null,\n\t_calendar: null,\n\t_tree: null,\n\t_map: null,\n\n\t/**\n\t * Handles dropping a portlet into the layout.\n\t * @type {isc.PortalLayout}\n\t */\n\t_portal: isc.PortalLayout.create({\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\n\t\t/**\n\t\t * Determines the portlet to drop into the layout.\n\t\t * @param {Object} dragTarget - the dragged item.\n\t\t * @param {number} colNum - the column number.\n\t\t * @param {number} rowNum - the row number.\n\t\t * @param {number} rowOffset - the row offset.\n\t\t * @returns {isc.Portlet}\n\t\t */\n\t\tgetDropPortlet: function (dragTarget, colNum, rowNum, rowOffset) {\n\t\t\tif (dragTarget.isA(\"TreeGrid\") && dragTarget.getID().endsWith(\"Tree\")) {\n\t\t\t\tconst leaf = dragTarget.getDragData()[0];\n\t\t\t\tconst portlet = isc.Portlet.create({ title: leaf.desc, items: [] });\n\n\t\t\t\tconst componentMap = {\n\t\t\t\t\tgrid: isc.BizUtil.createListGrid,\n\t\t\t\t\tcal: isc.BizUtil.createCalendar,\n\t\t\t\t\ttree: isc.BizUtil.createTreeGrid,\n\t\t\t\t\tmap: isc.BizUtil.createMap,\n\t\t\t\t};\n\n\t\t\t\tif (leaf.ref === \"edit\") {\n\t\t\t\t\tisc.BizUtil.getEditView(dragTarget.data.root.name, leaf.name, (view) => {\n\t\t\t\t\t\tportlet.addItem(view);\n\t\t\t\t\t\tview.newInstance(null, null, null, null, (data, success) => {\n\t\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\t\tview.hideMember(view._header);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else if (componentMap[leaf.ref]) {\n\t\t\t\t\tconst component = componentMap[leaf.ref]();\n\t\t\t\t\tportlet.addItem(component);\n\t\t\t\t\tcomponent.setDataSource(\n\t\t\t\t\t\t`${dragTarget.data.root.name}_${leaf.name}`,\n\t\t\t\t\t\tleaf.config,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\talert(`Menu ref of ${leaf.ref} is unknown`);\n\t\t\t\t}\n\t\t\t\treturn portlet;\n\t\t\t}\n\n\t\t\treturn this.Super(\"getDropPortlet\", arguments);\n\t\t},\n\t}),\n\n\t/**\n\t * Sets the heading of the list view.\n\t * @param {string} title - the title text.\n\t * @param {string} [icon] - the icon URL.\n\t * @param {string} [fontIcon] - the font icon class.\n\t * @param {string} modoc - the document module.\n\t */\n\t_setHeading: function (title, icon, fontIcon, modoc) {\n\t\tconst iconMarkup = icon\n\t\t\t? `<img style=\"width:32px;height:32px\" src=\"resources?_doc=${modoc}&_n=${icon}&v=${SKYVE.Util.v}\"/>`\n\t\t\t: fontIcon\n\t\t\t\t? `<i style=\"padding-left:5px;font-size:28px;width:32px !important\" class=\"titleBar bizhubFontIcon ${fontIcon}\"></i>`\n\t\t\t\t: \"\";\n\n\t\t// Initialised here so that isc.BizUtil user properties will have been set in page script\n\t\tif (!isc.ListView._header) {\n\t\t\tisc.ListView._header = isc.BizHeader.create();\n\t\t\tisc.ListView.contents.addMember(isc.ListView._header, 0);\n\t\t}\n\n\t\tisc.ListView._header.replace(iconMarkup, title, \"\", \"\");\n\t},\n\n\t/**\n\t * Sets the data source for the list view grid.\n\t * @param {string} ID - the identifier for the data source.\n\t * @param {Object} menuConfig - the menu configuration options.\n\t */\n\tsetGridDataSource: function (ID, menuConfig) {\n\t\tif (!this._grid) {\n\t\t\tthis._grid = isc.BizUtil.createListGrid();\n\t\t\tthis.contents.addMember(this._grid);\n\t\t}\n\t\tif (this._calendar) {\n\t\t\tthis.contents.hideMember(this._calendar);\n\t\t}\n\t\tif (this._tree) {\n\t\t\tthis.contents.hideMember(this._tree);\n\t\t}\n\t\tif (this._map) {\n\t\t\tthis.contents.hideMember(this._map);\n\t\t}\n\n\t\tthis.contents.hideMember(this._portal);\n\t\tthis.contents.showMember(this._grid);\n\n\t\tconst ds = this._getDataSource(ID);\n\t\tconst title = this._grid.setDataSource(ds, menuConfig);\n\t\tthis._setHeading(title, ds.icon, ds.fontIcon, ds.modoc);\n\t},\n\n\t/**\n\t * Sets the data source for the list view calendar.\n\t * @param {string} ID - the identifier for the data source.\n\t * @param {Object} menuConfig - the menu configuration options.\n\t */\n\tsetCalendarDataSource: function (ID, menuConfig) {\n\t\tif (!this._calendar) {\n\t\t\tthis._calendar = isc.BizUtil.createCalendar();\n\t\t\tthis.contents.addMember(this._calendar);\n\t\t}\n\t\tif (this._grid) {\n\t\t\tthis.contents.hideMember(this._grid);\n\t\t}\n\t\tif (this._tree) {\n\t\t\tthis.contents.hideMember(this._tree);\n\t\t}\n\t\tif (this._map) {\n\t\t\tthis.contents.hideMember(this._map);\n\t\t}\n\t\tthis.contents.hideMember(this._portal);\n\t\tthis.contents.showMember(this._calendar);\n\n\t\tconst ds = this._getDataSource(ID);\n\t\tthis._calendar.setDataSource(ds);\n\t\tthis._setHeading(\"NOT IMPLEMENTED\", ds.icon, ds.fontIcon, ds.modoc);\n\t},\n\n\t/**\n\t * Sets the data source for the list view tree.\n\t * @param {string} ID - the identifier for the data source.\n\t * @param {Object} menuConfig - the menu configuration options.\n\t */\n\tsetTreeDataSource: function (ID, menuConfig) {\n\t\tif (!this._tree) {\n\t\t\tthis._tree = isc.BizUtil.createTreeGrid();\n\t\t\tthis.contents.addMember(this._tree);\n\t\t}\n\t\tif (this._grid) {\n\t\t\tthis.contents.hideMember(this._grid);\n\t\t}\n\t\tif (this._calendar) {\n\t\t\tthis.contents.hideMember(this._calendar);\n\t\t}\n\t\tif (this._map) {\n\t\t\tthis.contents.hideMember(this._map);\n\t\t}\n\t\tthis.contents.hideMember(this._portal);\n\t\tthis.contents.showMember(this._tree);\n\n\t\tconst ds = this._getDataSource(ID);\n\t\tconst title = this._tree.setDataSource(ds, menuConfig);\n\t\tthis._setHeading(title, ds.icon, ds.fontIcon, ds.modoc);\n\t},\n\n\t/**\n\t * Displays the portal view by hiding other view components and showing the portal.\n\t */\n\tshowPortal: function () {\n\t\tif (!this._grid) {\n\t\t\tthis.contents.hideMember(this._grid);\n\t\t}\n\t\tif (!this._calendar) {\n\t\t\tthis.contents.hideMember(this._calendar);\n\t\t}\n\t\tif (!this._tree) {\n\t\t\tthis.contents.hideMember(this._tree);\n\t\t}\n\t\tif (!this._map) {\n\t\t\tthis.contents.hideMember(this._map);\n\t\t}\n\t\tthis.contents.showMember(this._portal);\n\n\t\tthis.setHeading(\n\t\t\t\"DASHBOARD\",\n\t\t\t\"shared/icons/Home.png\",\n\t\t\t\"fa-solid fa-house fa-2x\",\n\t\t\t\"\",\n\t\t);\n\t},\n\n\t/**\n\t * Sets the data source for the list view map.\n\t * @param {string} ID - the identifier for the data source.\n\t * @param {Object} menuConfig - the menu configuration options.\n\t */\n\tsetMapDataSource: function (ID, menuConfig) {\n\t\tif (!this._map) {\n\t\t\tthis._map = isc.BizUtil.createMap();\n\t\t\tthis.contents.addMember(this._map);\n\t\t}\n\t\tif (this._grid) {\n\t\t\tthis.contents.hideMember(this._grid);\n\t\t}\n\t\tif (this._calendar) {\n\t\t\tthis.contents.hideMember(this._calendar);\n\t\t}\n\t\tif (this._tree) {\n\t\t\tthis.contents.hideMember(this._tree);\n\t\t}\n\t\tthis.contents.hideMember(this._portal);\n\t\tthis.contents.showMember(this._map);\n\n\t\tthis._map.setDataSource(ID);\n\t\tthis._setHeading(\n\t\t\t\"MAP\",\n\t\t\t\"shared/icons/Home.png\",\n\t\t\t\"fa-solid fa-globe fa-2x\",\n\t\t\t\"\",\n\t\t);\n\t},\n\n\t/**\n\t * Initializes a view if it doesn't exist and hides other views.\n\t * @param {string} viewName - the name of the view to initialize.\n\t * @param {Function} createFunction - a function that creates the view.\n\t * @private\n\t */\n\t_initializeView: function (viewName, createFunction) {\n\t\tif (!this[viewName]) {\n\t\t\tthis[viewName] = createFunction();\n\t\t\tthis.contents.addMember(this[viewName]);\n\t\t}\n\n\t\t// Ensure heading and portal are part of the contents\n\t\tif (!this.contents.hasMember(this._heading)) {\n\t\t\tthis.contents.addMember(this._heading);\n\t\t}\n\t\tif (!this.contents.hasMember(this._portal)) {\n\t\t\tthis.contents.addMember(this._portal);\n\t\t\tthis.contents.hideMember(this._portal);\n\t\t}\n\n\t\t// Hide other views\n\t\t[\"_grid\", \"_calendar\", \"_tree\", \"_map\", \"_portal\"].forEach((view) => {\n\t\t\tif (view !== viewName) {\n\t\t\t\tthis.contents.hideMember(this[view]);\n\t\t\t}\n\t\t});\n\n\t\tthis.contents.showMember(this[viewName]);\n\t},\n\n\t/**\n\t * Updates a view with a data source and sets the heading.\n\t * @param {string} ID - the identifier for the data source.\n\t * @param {Object} menuConfig - the menu configuration options.\n\t * @param {string} viewName - the name of the view being updated.\n\t * @param {string} [defaultTitle=\"\"] - the default title if none is provided.\n\t * @private\n\t */\n\t_updateView: function (ID, menuConfig, viewName, defaultTitle = \"\") {\n\t\tconst ds = this._getDataSource(ID);\n\t\tconst title = this[viewName].setDataSource(ds, menuConfig) || defaultTitle;\n\t\tthis._setHeading(title, ds.icon, ds.fontIcon, ds.modoc);\n\t},\n\n\t/**\n\t * Retrieves a data source safely.\n\t * @param {string} ID - the identifier for the data source.\n\t * @returns {Object|null} the data source object, or null if not found.\n\t * @private\n\t */\n\t_getDataSource: function (ID) {\n\t\treturn typeof window[ID] !== \"undefined\" ? window[ID] : null;\n\t},\n});\n\nisc.ListView.contents.addMember(isc.ListView._portal);\nisc.ListView.contents.hideMember(isc.ListView._portal);\n","/**\n * Implements the BizContainer UI component.\n * Extends VLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizContainer\", \"VLayout\");\n\nisc.BizContainer.addMethods({\n\tinitWidget: function () {\n\t\tthis.backgroundImage = \"background.png\";\n\t\tthis.backgroundRepeat = \"repeat\";\n\t\tthis.Super(\"initWidget\", arguments);\n\t\tthis.contained = [];\n\t},\n\n\t/**\n\t * Adds a widget to the container.\n\t * @param {isc.Widget} contained - the widget to be contained.\n\t */\n\taddContained: function (contained) {\n\t\tthis.contained.add(contained);\n\t\tthis.addMember(contained);\n\t},\n\n\t/**\n\t * Removes a widget from the container.\n\t * @param {isc.Widget} contained - the widget to remove.\n\t */\n\tremoveContained: function (contained) {\n\t\tthis.contained.remove(contained);\n\t\tthis.removeMember(contained);\n\t},\n});\n\n/**\n * Implements the EditView UI component.\n * Extends BizContainer implemented above.\n */\nisc.ClassFactory.defineClass(\"EditView\", \"BizContainer\");\n\nisc.EditView.addClassProperties({\n\t_DATA_SOURCE: isc.RestDataSource.create({\n\t\tdataFormat: \"json\",\n\t\tjsonPrefix: \"\",\n\t\tjsonSuffix: \"\",\n\t\tdataURL: \"smartedit\",\n\t\tsendExtraFields: false, // Ensure that only datasource defined fields are sent\n\t}),\n});\n\nisc.EditView.addMethods({\n\tinitWidget: function () {\n\t\tthis.overflow = \"hidden\";\n\t\tthis.membersMargin = 2;\n\t\tthis.layoutMargin = 2;\n\t\tthis.margin = 2;\n\t\tthis._grids = {}; // Map of binding -> (map of ID -> dataGrid/comparisonEditor/listMembership/map widget)\n\t\tthis._refreshedGrids = {}; // Map of dataGrid/comparisonEditor/listMembership ID -> boolean (true if refreshed)\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\tthis._header = isc.BizHeader.create();\n\t\tthis.addMember(this._header);\n\n\t\t// The action panel\n\t\tthis._actionPanel = isc.ToolStrip.create({\n\t\t\tname: \"actionPanel\",\n\t\t\tlayoutMargin: 2,\n\t\t\tmembersMargin: 5,\n\t\t\twidth: \"100%\",\n\t\t});\n\t\tthis.addMember(this._actionPanel);\n\n\t\t// The edit panel\n\t\tthis._editPanel = isc.BizContainer.create({\n\t\t\tlayoutMargin: 2,\n\t\t\tmembersMargin: 10,\n\t\t\toverflow: \"auto\",\n\t\t});\n\t\tthis.addMember(this._editPanel);\n\n\t\t// Initialize the values manager\n\t\tthis._vm = isc.ValuesManager.create({\n\t\t\tdataSource: isc.EditView._DATA_SOURCE,\n\t\t\thandleHiddenValidationErrors: (errors) => {\n\t\t\t\tconst messages = [];\n\t\t\t\tfor (const binding in errors) {\n\t\t\t\t\tconst message = errors[binding];\n\t\t\t\t\tconst tokens = binding.split(\"__\");\n\t\t\t\t\tif (tokens.length === 2) {\n\t\t\t\t\t\tconst lastUnderscore = tokens[0].lastIndexOf(\"_\");\n\t\t\t\t\t\tif (lastUnderscore > -1) {\n\t\t\t\t\t\t\tconst gridBinding = tokens[0].substring(0, lastUnderscore);\n\t\t\t\t\t\t\tconst grids = this._grids[gridBinding];\n\t\t\t\t\t\t\tif (grids) {\n\t\t\t\t\t\t\t\tconst rowNum = parseInt(tokens[0].substring(lastUnderscore + 1));\n\t\t\t\t\t\t\t\tif (isc.isA.Number(rowNum)) {\n\t\t\t\t\t\t\t\t\tfor (const gridID in grids) {\n\t\t\t\t\t\t\t\t\t\tconst grid = grids[gridID];\n\t\t\t\t\t\t\t\t\t\tif (grid?.grid) {\n\t\t\t\t\t\t\t\t\t\t\tgrid.grid.setFieldError(rowNum, tokens[1], message);\n\t\t\t\t\t\t\t\t\t\t\tgrid.grid.markForRedraw();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!messages.contains(message)) {\n\t\t\t\t\t\tmessages.add(message);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (messages.length > 0) {\n\t\t\t\t\tlet warning = \"<ul>\";\n\t\t\t\t\tfor (const message of messages) {\n\t\t\t\t\t\twarning += `<li>${message}</li>`;\n\t\t\t\t\t}\n\t\t\t\t\twarning += \"</ul>\";\n\t\t\t\t\tisc.warn(warning, null, { title: \"Problems\" });\n\t\t\t\t}\n\n\t\t\t\treturn false; // Don't log to console\n\t\t\t},\n\n\t\t\t// Overload to remove oldValues from the request context\n\t\t\tsaveEditorValues: function (values, saveOperation, callback, context) {\n\t\t\t\tcontext.oldValues = null;\n\t\t\t\tthis.Super(\"saveEditorValues\", arguments);\n\t\t\t},\n\t\t});\n\t},\n\n\t/**\n\t * Adds a widget to the edit panel.\n\t * @param {isc.Widget} contained - the widget to be contained.\n\t */\n\taddContained: function (contained) {\n\t\tthis._editPanel.addContained(contained);\n\t},\n\n\t/**\n\t * Adds an edit action to the action panel.\n\t * @param {isc.IButton} button - the button to add.\n\t */\n\taddEditAction: function (button) {\n\t\tbutton.forCreate = false;\n\t\tthis._actionPanel.addMember(button);\n\t},\n\n\t/**\n\t * Adds a create action to the action panel.\n\t * @param {isc.IButton} button - the button to add.\n\t */\n\taddCreateAction: function (button) {\n\t\tbutton.forCreate = true;\n\t\tthis._actionPanel.addMember(button);\n\t},\n\n\t/**\n\t * Adds an action to the action panel.\n\t * @param {isc.IButton} button - the button to add.\n\t */\n\taddAction: function (button) {\n\t\tbutton.forCreate = null;\n\t\tthis._actionPanel.addMember(button);\n\t},\n\n\t/**\n\t * Replaces {bindings} in a string expression with values from the instance.\n\t * @param {string} expression - the expression to parse.\n\t * @param {Object} instance - the bean instance to get values from.\n\t * @returns {string} - the parsed expression.\n\t */\n\ttoDisplay: function (expression, instance) {\n\t\tif (expression) {\n\t\t\tconst tokens = expression.match(/\\{[A-Za-z0-9._]+\\}/g);\n\t\t\tif (tokens) {\n\t\t\t\tfor (const token of tokens) {\n\t\t\t\t\tconst binding = token.substring(1, token.length - 1);\n\t\t\t\t\tlet evaluation = binding\n\t\t\t\t\t\t.split(\".\")\n\t\t\t\t\t\t.reduce((obj, key) => obj?.[key], instance);\n\t\t\t\t\tif (typeof evaluation === \"undefined\") {\n\t\t\t\t\t\tevaluation = \"\";\n\t\t\t\t\t} else if (\n\t\t\t\t\t\tevaluation == null ||\n\t\t\t\t\t\tevaluation === \"null\" ||\n\t\t\t\t\t\tevaluation === \"undefined\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tevaluation = \"\";\n\t\t\t\t\t} else if (evaluation.toDateStamp) {\n\t\t\t\t\t\tevaluation = evaluation.toDateStamp();\n\t\t\t\t\t\tevaluation = `${evaluation.substring(0, 4)}-${evaluation.substring(\n\t\t\t\t\t\t\t4,\n\t\t\t\t\t\t\t6,\n\t\t\t\t\t\t)}-${evaluation.substring(6, 11)}:${evaluation.substring(\n\t\t\t\t\t\t\t11,\n\t\t\t\t\t\t\t13,\n\t\t\t\t\t\t)}:${evaluation.substring(13, 15)}.000`;\n\t\t\t\t\t} else if (evaluation.toString) {\n\t\t\t\t\t\tevaluation = evaluation.toString();\n\t\t\t\t\t}\n\t\t\t\t\texpression = expression.replace(token, evaluation);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn expression;\n\t},\n\n\t/**\n\t * Re-renders the edit view.\n\t */\n\trerender: function () {\n\t\tconst instance = this.gather(false); // No validation\n\t\tif (instance) {\n\t\t\tthis._editInstance(\n\t\t\t\t\"ZoomOut\",\n\t\t\t\tinstance.bizId,\n\t\t\t\tthis._b,\n\t\t\t\tinstance._c,\n\t\t\t\tthis._openedFromDataGrid,\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Resumes controls that get paused when they lose focus.\n\t */\n\tresume: function () {\n\t\tfor (const gridBinding in this._grids) {\n\t\t\tconst grids = this._grids[gridBinding];\n\t\t\tfor (const gridID in grids) {\n\t\t\t\tconst grid = grids[gridID];\n\t\t\t\tif (grid.webmap) {\n\t\t\t\t\tgrid.resume();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Creates a new instance.\n\t * @param {Object} newParams - parameters to seed the new instance.\n\t * @param {string} formBinding - the binding of the datagrid or lookup.\n\t * @param {string} parentContext - the parent web context.\n\t * @param {boolean} openedFromDataGrid - whether the view was opened from a data grid row.\n\t * @param {Function} completedCallback - callback function on completion.\n\t */\n\tnewInstance: function (\n\t\tnewParams,\n\t\tformBinding,\n\t\tparentContext,\n\t\topenedFromDataGrid,\n\t\tcompletedCallback,\n\t) {\n\t\tthis._openedFromDataGrid = openedFromDataGrid;\n\n\t\t// Skip if the view model has no members (not data-bound)\n\t\tif (!this._vm.members) {\n\t\t\t// Execute the completed callback if provided\n\t\t\tif (completedCallback) {\n\t\t\t\tcompletedCallback({}, true); // No validation errors, no data\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hide();\n\t\tthis._b = formBinding;\n\n\t\tconst params = {\n\t\t\t_mod: this._mod,\n\t\t\t_doc: this._doc,\n\t\t\t_ecnt: this._ecnt,\n\t\t\t_ccnt: this._ccnt,\n\t\t};\n\t\tif (this._csrf) {\n\t\t\tparams._csrf = this._csrf;\n\t\t}\n\t\tif (formBinding) {\n\t\t\tparams._b = formBinding;\n\t\t}\n\t\tif (parentContext) {\n\t\t\tparams._c = parentContext;\n\t\t}\n\t\tif (newParams) {\n\t\t\tfor (const binding in newParams) {\n\t\t\t\tparams[binding] = newParams[binding];\n\t\t\t}\n\t\t}\n\n\t\tthis._vm.fetchData(\n\t\t\tnull, // No criteria required\n\t\t\t(dsResponse, data) => {\n\t\t\t\tlet success = false;\n\t\t\t\tlet values = {};\n\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\tthis._vm.setSaveOperationType(\"add\");\n\t\t\t\t\tvalues = data[0];\n\t\t\t\t\tthis.scatter(values);\n\n\t\t\t\t\tif (openedFromDataGrid) {\n\t\t\t\t\t\tthis._b += `ElementById(${values.bizId})`;\n\t\t\t\t\t}\n\n\t\t\t\t\tsuccess = true;\n\t\t\t\t} else if (dsResponse.status === -1) {\n\t\t\t\t\tisc.warn(data, null, { title: \"Problems\" });\n\t\t\t\t}\n\n\t\t\t\tif (completedCallback) {\n\t\t\t\t\tcompletedCallback(data, success);\n\t\t\t\t}\n\n\t\t\t\tthis.show();\n\t\t\t\tthis.refreshListGrids(true, true, values);\n\n\t\t\t\tif (this.opened) {\n\t\t\t\t\tthis.opened(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ httpMethod: \"POST\", params, willHandleError: true },\n\t\t);\n\t},\n\n\t/**\n\t * Edits an instance.\n\t * @param {string} bizId - the ID of the bean to edit.\n\t * @param {string} formBinding - the binding of the datagrid or lookup.\n\t * @param {string} parentContext - the parent context.\n\t * @param {boolean} openedFromDataGrid - whether the view was opened from a data grid row.\n\t * @param {Function} completedCallback - callback function on completion.\n\t */\n\teditInstance: function (\n\t\tbizId,\n\t\tformBinding,\n\t\tparentContext,\n\t\topenedFromDataGrid,\n\t\tcompletedCallback,\n\t) {\n\t\tthis._saved = false;\n\t\tthis._editInstance(\n\t\t\tnull,\n\t\t\tbizId,\n\t\t\tformBinding,\n\t\t\tparentContext,\n\t\t\topenedFromDataGrid,\n\t\t\tcompletedCallback,\n\t\t);\n\t},\n\n\t/**\n\t * Handles editing an instance of a bean, including fetching data, scattering values, and refreshing the UI.\n\t * @param {string} action - the action name associated with this edit call (e.g., \"ZoomOut\").\n\t * @param {string} bizId - the ID of the bean to edit.\n\t * @param {string} formBinding - the binding of the data grid or lookup (can be null).\n\t * @param {string} parentContext - the parent context (can be null).\n\t * @param {boolean} openedFromDataGrid - indicates whether the view was opened from a data grid row.\n\t * @param {Function} completedCallback - a function to call when the operation is completed.\n\t */\n\t_editInstance: function (\n\t\taction,\n\t\tbizId,\n\t\tformBinding,\n\t\tparentContext,\n\t\topenedFromDataGrid,\n\t\tcompletedCallback,\n\t) {\n\t\tthis._openedFromDataGrid = openedFromDataGrid;\n\n\t\t// Skip if the view model has no members (not data-bound)\n\t\tif (!this._vm.members) {\n\t\t\tthis._source = null;\n\n\t\t\t// Execute the completed callback if provided\n\t\t\tif (completedCallback) {\n\t\t\t\tcompletedCallback({}, true); // No validation errors, no data\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Hide the view while fetching data\n\t\tthis.hide();\n\t\tthis._b = formBinding;\n\n\t\t// Prepare request parameters\n\t\tconst params = {\n\t\t\tbizId,\n\t\t\t_mod: this._mod,\n\t\t\t_doc: this._doc,\n\t\t\t_ecnt: this._ecnt,\n\t\t\t_ccnt: this._ccnt,\n\t\t};\n\n\t\t// Add optional parameters if they exist\n\t\tif (this._csrf) params._csrf = this._csrf;\n\t\tif (action) params._a = action;\n\t\tif (formBinding) params._b = formBinding;\n\t\tif (parentContext) params._c = parentContext;\n\t\tif (this._source) {\n\t\t\tparams._s = this._source;\n\t\t\tthis._source = null;\n\t\t}\n\n\t\t// Fetch data from the server\n\t\tthis._vm.fetchData(\n\t\t\tnull, // No criteria required\n\t\t\t(dsResponse, data, dsRequest) => {\n\t\t\t\tlet success = false;\n\t\t\t\tlet values = {};\n\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t// Success: Extract CSRF token and scatter values\n\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\tvalues = data[0];\n\n\t\t\t\t\t// Update form binding if opened from a data grid\n\t\t\t\t\tif (openedFromDataGrid && this._b && !this._b.endsWith(\")\")) {\n\t\t\t\t\t\tthis._b += `ElementById(${values.bizId})`;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Scatter the fetched values into the form\n\t\t\t\t\tthis.scatter(values);\n\n\t\t\t\t\tsuccess = true;\n\t\t\t\t} else if (dsResponse.status === -1) {\n\t\t\t\t\t// Display a warning if there are issues\n\t\t\t\t\tisc.warn(data, null, { title: \"Problems\" });\n\t\t\t\t}\n\n\t\t\t\t// Execute the completed callback if provided\n\t\t\t\tif (completedCallback) {\n\t\t\t\t\tcompletedCallback(data, success);\n\t\t\t\t}\n\n\t\t\t\t// Handle ZoomOut or new document scenarios\n\t\t\t\tif (action === \"ZoomOut\" || !bizId) {\n\t\t\t\t\tconst changes = this._vm.valuesHaveChanged();\n\t\t\t\t\tthis._vm.setValue(\"_apply\", true);\n\t\t\t\t\tif (!changes) {\n\t\t\t\t\t\tthis._vm.rememberValues();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Show the view and refresh UI components\n\t\t\t\tthis.show();\n\t\t\t\tthis.refreshListGrids(true, !action, values);\n\n\t\t\t\t// Trigger the `opened` callback if defined\n\t\t\t\tif (this.opened) {\n\t\t\t\t\tthis.opened(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\thttpMethod: \"POST\",\n\t\t\t\tparams,\n\t\t\t\twillHandleError: true,\n\t\t\t},\n\t\t);\n\t},\n\n\t/**\n\t * Re-renders the edit view following an action.\n\t */\n\trerenderAction: function (validate, source) {\n\t\tthis._source = source;\n\t\tthis.saveInstance(validate, null);\n\t\tthis._saved = true;\n\t},\n\n\t/**\n\t * Re-renders the edit view following a blur event.\n\t */\n\trerenderBlurryAction: function (validate, source) {\n\t\tthis.delayCall(\"_rerenderBlurryAction\", [validate, source], 100);\n\t},\n\n\t/**\n\t * Re-renders the edit view following a blur action.\n\t */\n\t_rerenderBlurryAction: function (validate, source) {\n\t\tthis._source = source;\n\t\tthis.saveInstance(validate, null, (data, success) => {\n\t\t\tif (this._blurry) {\n\t\t\t\tconst blurry = this._blurry;\n\t\t\t\tthis._blurry = null;\n\n\t\t\t\tif (success) {\n\t\t\t\t\t// If it's a BizButton, call its action as this was the lost click event\n\t\t\t\t\tif (blurry.action) {\n\t\t\t\t\t\tblurry.delayCall(\"action\");\n\t\t\t\t\t} else if (blurry.click) {\n\t\t\t\t\t\tblurry.click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis._saved = true;\n\t},\n\n\t/**\n\t * Saves the instance.\n\t * @param {boolean} validate - whether to validate.\n\t * @param {string} action - the action name.\n\t * @param {Function} completedCallback(instance, success) - callback function on completion.\n\t */\n\tsaveInstance: function (validate, action, completedCallback) {\n\t\tconst instance = this.gather(validate);\n\t\tif (!instance) {\n\t\t\tthis._source = null;\n\t\t\tif (completedCallback) {\n\t\t\t\tcompletedCallback({}, false); // Validation errors occurred, no data\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst context = instance._c;\n\t\tdelete instance._c;\n\n\t\tconst params = {\n\t\t\t_mod: this._mod,\n\t\t\t_doc: this._doc,\n\t\t\t_ecnt: this._ecnt,\n\t\t\t_ccnt: this._ccnt,\n\t\t\tbean: instance,\n\t\t\tbizId: instance.bizId,\n\t\t\t_c: context,\n\t\t};\n\t\tif (this._csrf) {\n\t\t\tparams._csrf = this._csrf;\n\t\t}\n\t\tif (action) {\n\t\t\tparams._a = action;\n\t\t\tif (action === \"_PUSH\") {\n\t\t\t\taction = null;\n\t\t\t}\n\t\t}\n\t\tif (this._b) {\n\t\t\tparams._b = this._b;\n\t\t}\n\t\tif (this._source) {\n\t\t\tparams._s = this._source;\n\t\t\tthis._source = null;\n\t\t}\n\n\t\tthis._vm.disableValidation = true;\n\t\tthis._vm.saveData(\n\t\t\t(dsResponse, data) => {\n\t\t\t\tlet success = false;\n\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\tif (action === \"ZoomOut\") {\n\t\t\t\t\t\tconst opener = isc.WindowStack.getOpener();\n\t\t\t\t\t\tconst openerValues = opener.gather(false);\n\t\t\t\t\t\topenerValues._c = data._c;\n\n\t\t\t\t\t\tconst childBinding = this._b;\n\t\t\t\t\t\tconst index = childBinding.lastIndexOf(\".\");\n\t\t\t\t\t\tconst parentBinding = opener._b;\n\n\t\t\t\t\t\tif (childBinding.endsWith(\")\")) {\n\t\t\t\t\t\t\tconst lastIndex = childBinding.lastIndexOf(\"ElementById\");\n\t\t\t\t\t\t\tif (lastIndex >= 0) {\n\t\t\t\t\t\t\t\tconst gridBinding = childBinding.substring(0, lastIndex);\n\t\t\t\t\t\t\t\tconst openerValue = openerValues[gridBinding];\n\t\t\t\t\t\t\t\tif (isc.isAn.Array(openerValue)) {\n\t\t\t\t\t\t\t\t\tisc.WindowStack.popoff(true);\n\t\t\t\t\t\t\t\t\topener._source = null;\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\topenerValues[gridBinding] = data.bizId;\n\t\t\t\t\t\t\t\t\tconst lookupDescription = opener._vm.getItem(gridBinding);\n\t\t\t\t\t\t\t\t\tif (lookupDescription) {\n\t\t\t\t\t\t\t\t\t\t// Make sure we refresh the option list next time\n\t\t\t\t\t\t\t\t\t\tlet optionDataSource = lookupDescription.getOptionDataSource();\n\t\t\t\t\t\t\t\t\t\tif (optionDataSource) {\n\t\t\t\t\t\t\t\t\t\t\tif (optionDataSource.compareCriteria) {\n\t\t\t\t\t\t\t\t\t\t\t\toptionDataSource._drop = true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Do the callback\n\t\t\t\t\t\t\t\t\t\tif (instance.bizId) {\n\t\t\t\t\t\t\t\t\t\t\tlookupDescription.bizEdited(\n\t\t\t\t\t\t\t\t\t\t\t\tlookupDescription.form,\n\t\t\t\t\t\t\t\t\t\t\t\tlookupDescription,\n\t\t\t\t\t\t\t\t\t\t\t\tdata.bizId,\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tlookupDescription.bizAdded(\n\t\t\t\t\t\t\t\t\t\t\t\tlookupDescription.form,\n\t\t\t\t\t\t\t\t\t\t\t\tlookupDescription,\n\t\t\t\t\t\t\t\t\t\t\t\tdata.bizId,\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\topener._vm.setValues(openerValues);\n\t\t\t\t\t\tdelete data._c;\n\t\t\t\t\t\tdelete data._title;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (action === \"Save\") {\n\t\t\t\t\t\tthis._saved = true;\n\t\t\t\t\t\tthis.scatter(data);\n\t\t\t\t\t\tthis.refreshListGrids(true, false, data);\n\t\t\t\t\t} else if (action) {\n\t\t\t\t\t\tconst opener = isc.WindowStack.getOpener();\n\t\t\t\t\t\tif (opener) {\n\t\t\t\t\t\t\tisc.WindowStack.popoff(true);\n\t\t\t\t\t\t\topener._source = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.scatter(data);\n\t\t\t\t\t\tthis.refreshListGrids(true, false, data);\n\t\t\t\t\t}\n\n\t\t\t\t\tsuccess = true;\n\t\t\t\t} else if (dsResponse.status === -1) {\n\t\t\t\t\tisc.warn(data, null, { title: \"Problems\" });\n\t\t\t\t}\n\n\t\t\t\tif (completedCallback) {\n\t\t\t\t\tcompletedCallback(data, success);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ params, willHandleError: true },\n\t\t);\n\t\tthis._vm.disableValidation = false;\n\t},\n\n\t/**\n\t * Deletes the instance.\n\t * @param {boolean} validate - whether to validate.\n\t * @param {Function} completedCallback - callback function on completion.\n\t */\n\tdeleteInstance: function (validate, completedCallback) {\n\t\tconst instance = this.gather(validate);\n\t\tif (!instance) {\n\t\t\tif (completedCallback) {\n\t\t\t\tcompletedCallback({}, false); // Validation errors occurred, no data\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst context = instance._c;\n\t\tdelete instance._c;\n\n\t\tconst params = { _mod: this._mod, _doc: this._doc, _c: context };\n\t\tif (this._csrf) {\n\t\t\tparams._csrf = this._csrf;\n\t\t}\n\n\t\tisc.EditView._DATA_SOURCE.removeData(\n\t\t\tinstance,\n\t\t\t(dsResponse, data) => {\n\t\t\t\tlet success = false;\n\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\tisc.WindowStack.popoff(true);\n\n\t\t\t\t\tsuccess = true;\n\t\t\t\t} else if (dsResponse.status === -1) {\n\t\t\t\t\tisc.warn(data, null, { title: \"Problems\" });\n\t\t\t\t}\n\n\t\t\t\tif (completedCallback) {\n\t\t\t\t\tcompletedCallback(data, success);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ params, willHandleError: true },\n\t\t);\n\t},\n\n\t/**\n\t * Executes a specified action, optionally validating and handling grid context.\n\t *\n\t * @param {string} action - the name of the action to execute.\n\t * @param {boolean} validate - whether to validate data before executing the action.\n\t * @param {string} gridBinding - grid binding relative to the current view.\n\t * @param {string} gridModule - the module name driving the grid.\n\t * @param {string} gridDocument - the document name driving the grid.\n\t * @param {string} gridRowBizId - the business ID of the grid row.\n\t * @param {Function} completedCallback - callback function on operation completion.\n\t */\n\tdoAction: function (\n\t\taction,\n\t\tvalidate,\n\t\tgridBinding,\n\t\tgridModule,\n\t\tgridDocument,\n\t\tgridRowBizId,\n\t\tcompletedCallback,\n\t) {\n\t\tconst instance = this.gather(validate);\n\t\tif (!instance) {\n\t\t\tif (completedCallback) {\n\t\t\t\tcompletedCallback({}, false); // Did not pass validation, no data\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Extract and remove context from instance for server reconstruction\n\t\tconst { _c: context, ...instanceWithoutContext } = instance;\n\n\t\t// Build request parameters using shorthand and default values\n\t\tconst params = {\n\t\t\t_mod: gridModule || this._mod,\n\t\t\t_doc: gridDocument || this._doc,\n\t\t\t_ecnt: this._ecnt,\n\t\t\t_ccnt: this._ccnt,\n\t\t\tbean: instanceWithoutContext,\n\t\t\tbizId: gridRowBizId || instance.bizId,\n\t\t\t_c: context,\n\t\t\t...(this._csrf && { _csrf: this._csrf }),\n\t\t\t...(action && { _a: action }),\n\t\t\t...(this._b && { _b: this._b }),\n\t\t\t...(gridBinding && { _g: gridBinding }),\n\t\t};\n\n\t\t// Disable validation temporarily, as it is handled during gathering\n\t\tthis._vm.disableValidation = true;\n\n\t\t// Save data and handle the response\n\t\tthis._vm.saveData(\n\t\t\t(dsResponse, data) => {\n\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t// Update CSRF token from response header\n\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t// Handle successful response\n\t\t\t\t\tthis._saved = true;\n\t\t\t\t\tthis.scatter(data);\n\t\t\t\t\tthis.refreshListGrids(true, false, data);\n\n\t\t\t\t\tif (completedCallback) {\n\t\t\t\t\t\tcompletedCallback(data, true);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Redirect if a download URL is provided\n\t\t\t\t\tif (data._redirectUrl) {\n\t\t\t\t\t\twindow.location.assign(data._redirectUrl);\n\t\t\t\t\t}\n\t\t\t\t} else if (dsResponse.status === -1) {\n\t\t\t\t\tisc.warn(data, null, { title: \"Problems\" });\n\n\t\t\t\t\tif (completedCallback) {\n\t\t\t\t\t\tcompletedCallback(data, false);\n\t\t\t\t\t}\n\t\t\t\t} else if (completedCallback) {\n\t\t\t\t\tcompletedCallback(data, false);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\t{ params, willHandleError: true },\n\t\t);\n\n\t\t// Re-enable validation immediately after the call\n\t\tthis._vm.disableValidation = false;\n\t},\n\n\t/**\n\t * Schedules a blurry action with a slight delay to prevent lost click events during blur.\n\t * Typically triggered from a blur event to handle server-side rerender actions.\n\t *\n\t * @param {string} action - the name of the action to execute.\n\t * @param {boolean} validate - whether validation should occur before executing the action.\n\t */\n\tdoBlurryAction: function (action, validate) {\n\t\tthis.delayCall(\"_doBlurryAction\", [action, validate], 100);\n\t},\n\n\t/**\n\t * Executes the blurry action and re-triggers any lost click or action events.\n\t *\n\t * @param {string} action - the name of the action to execute.\n\t * @param {boolean} validate - whether to validate before executing the action.\n\t */\n\t_doBlurryAction: function (action, validate) {\n\t\tthis.doAction(action, validate, null, null, null, null, (data, success) => {\n\t\t\tif (this._blurry) {\n\t\t\t\tconst blurryElement = this._blurry;\n\t\t\t\tthis._blurry = null;\n\n\t\t\t\tif (success) {\n\t\t\t\t\t// If the blurred element has an action (likely a button), trigger it\n\t\t\t\t\tif (blurryElement.action) {\n\t\t\t\t\t\t// Delay call to ensure saveData callback has completed\n\t\t\t\t\t\tblurryElement.delayCall(\"action\");\n\t\t\t\t\t} else if (blurryElement.click) {\n\t\t\t\t\t\t// Fallback for generic click events\n\t\t\t\t\t\tblurryElement.click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Scatter method for distributing values into corresponding UI components and grids.\n\t *\n\t * @param {Object} values - the values to be scattered into the UI components and grids.\n\t * @param {boolean} values.persisted - whether the data has been persisted.\n\t * @param {boolean} values.created - whether the data has been created.\n\t * @param {string} values._title - the title for the header.\n\t * @param {Object} values._valueMaps - a mapping of values for processing widgets.\n\t * @param {Array} values._growls - growl messages to be displayed.\n\t * @param {Array} values._messages - informational or warning messages to be displayed.\n\t * @param {string} values.bizId - business identifier associated with the values.\n\t */\n\tscatter: function (values) {\n\t\t// Clear any errors and reset values\n\t\tthis._vm.clearErrors(true);\n\t\tthis._vm.clearValues();\n\n\t\t// Prepare link and header template\n\t\tlet link = \"\";\n\t\tif (values.persisted) {\n\t\t\tlink = `<a target=\"_top\" href=\"?a=e&m=${this._mod}&d=${this._doc}&i=${values.bizId}\" title=\"Link\" class=\"dhtmlPageButton\"><i class=\"fa-solid fa-2x fa-thumbtack\"></i></a>`;\n\t\t}\n\n\t\tlet icon = \"\";\n\t\tlet help = \"\";\n\n\t\tif (values.created) {\n\t\t\ticon = this._createIconMarkup(this._editIcon, this._editFontIcon);\n\t\t\thelp = this._createHelpMarkup(this._editHelpFile, this._editHelpURL);\n\t\t} else {\n\t\t\ticon = this._createIconMarkup(this._createIcon, this._createFontIcon);\n\t\t\thelp = this._createHelpMarkup(this._createHelpFile, this._createHelpURL);\n\t\t}\n\n\t\tthis._header.replace(icon, values._title, link, help);\n\n\t\t// Remove sensitive data before submitting\n\t\tconst { _title, _valueMaps, _growls, _messages, ...cleanedValues } = values;\n\n\t\tconst valueMaps = _valueMaps;\n\t\tconst growls = _growls;\n\t\tconst messages = _messages;\n\n\t\t// Process widgets\n\t\tconst toRerender = [];\n\t\tthis._processWidgets(\n\t\t\tthis._editPanel,\n\t\t\tfalse,\n\t\t\tcleanedValues,\n\t\t\tvalueMaps,\n\t\t\ttoRerender,\n\t\t);\n\n\t\t// Set values\n\t\tthis._vm.setValues(cleanedValues);\n\n\t\t// Rerender components\n\t\ttoRerender.forEach((widget) => widget.rerender());\n\n\t\t// Scatter the list and membership values\n\t\tObject.entries(this._grids).forEach(([gridBinding, grids]) => {\n\t\t\tconst data = cleanedValues[gridBinding];\n\t\t\tObject.entries(grids).forEach(([gridID, grid]) => {\n\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\tif (grid._comparisonTree && grid._comparisonForm) {\n\t\t\t\t\t\tgrid.setData(data);\n\t\t\t\t\t} else if (grid._candidateList && grid._memberList) {\n\t\t\t\t\t\tthis._handleListMembership(data, valueMaps, gridBinding, grid);\n\t\t\t\t\t} else if (grid.grid) {\n\t\t\t\t\t\tthis._handleDataGrid(data, valueMaps, gridBinding, grid);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tconst onlyView = isc.BizUtil.getCurrentView() === this;\n\n\t\t// Manage action panel visibility and enable/disable controls\n\t\tthis._manageActionPanel(values, onlyView);\n\n\t\t// Display growls and messages\n\t\tthis._displayGrowlsAndMessages(growls, messages);\n\t},\n\n\t/**\n\t * Creates an icon markup based on the provided icon file or font icon class.\n\t *\n\t * @param {string} iconFile - the file name for the icon image.\n\t * @param {string} fontIconClass - the class name for a font icon.\n\t * @returns {string} the HTML markup for the icon.\n\t */\n\t_createIconMarkup: function (iconFile, fontIconClass) {\n\t\tif (iconFile) {\n\t\t\treturn `<img style=\"width:32px;height:32px\" src=\"resources?_doc=${this._mod}.${this._doc}&_n=${iconFile}&v=${SKYVE.Util.v}\"/>`;\n\t\t} else if (fontIconClass) {\n\t\t\treturn `<i style=\"padding-left:5px;font-size:28px;width:32px !important\" class=\"titleBar bizhubFontIcon ${fontIconClass}\"></i>`;\n\t\t}\n\t\treturn \"\";\n\t},\n\n\t/**\n\t * Creates a help markup based on the provided help file or URL.\n\t *\n\t * @param {string} helpFile - the help file name.\n\t * @param {string} helpURL - the URL for external help.\n\t * @returns {string} the HTML markup for the help link.\n\t */\n\t_createHelpMarkup: function (helpFile, helpURL) {\n\t\tif (helpFile) {\n\t\t\treturn `'resources?_doc=${this._mod}.${this._doc}&_n=${helpFile}&v=${SKYVE.Util.v}'`;\n\t\t} else if (helpURL) {\n\t\t\treturn `'${helpURL}'`;\n\t\t}\n\t\treturn \"\";\n\t},\n\n\t/**\n\t * Handles list membership by associating candidate data with existing value maps.\n\t *\n\t * @param {Array} data - the data to be processed for membership.\n\t * @param {Object} valueMaps - the value maps containing existing mappings.\n\t * @param {string} gridBinding - the binding name of the grid.\n\t * @param {Object} grid - the grid object to be updated.\n\t */\n\t_handleListMembership: function (data, valueMaps, gridBinding, grid) {\n\t\tconst candidates = [];\n\t\tconst valueMap = valueMaps && valueMaps[gridBinding];\n\t\tif (valueMap) {\n\t\t\tObject.entries(valueMap).forEach(([key, value]) => {\n\t\t\t\tconst element = data.find(\"bizId\", key);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.bizKey = value;\n\t\t\t\t} else {\n\t\t\t\t\tcandidates.push({ bizId: key, bizKey: value });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tgrid.setData(candidates, data);\n\t},\n\n\t/**\n\t * Handles data grid processing by setting up necessary fields, value maps, and selection.\n\t *\n\t * @param {Array} data - the data to be set in the grid.\n\t * @param {Object} valueMaps - the value maps associated w\n\t * @param {Object} gridBinding - the binding name of the grid.\n\t * @param {Object} grid - the grid object to be updated.\n\t */\n\t_handleDataGrid: function (data, valueMaps, gridBinding, grid) {\n\t\tconst gridFields = grid.grid.fields;\n\t\tgridFields.forEach((gridField) => {\n\t\t\tconst { type, name } = gridField;\n\t\t\tconst isDate = type.includes(\"YYYY\");\n\t\t\tconst isTime = type.includes(\"HH\");\n\n\t\t\tif (isDate || isTime) {\n\t\t\t\tthis._processDateTimeFields(data, name, isDate, isTime);\n\t\t\t} else if (gridField.valueMap && valueMaps) {\n\t\t\t\tconst valueMap = valueMaps[`${gridBinding}_${gridField.name}`];\n\t\t\t\tif (valueMap) {\n\t\t\t\t\tgridField.valueMap = valueMap;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Handle selection from server\n\t\tif (grid.selectedIdBinding) {\n\t\t\tthis._handleGridSelection(data, grid);\n\t\t} else {\n\t\t\tgrid.grid.setData(data);\n\t\t}\n\t},\n\n\t/**\n\t * Processes date and time fields in the data for proper formatting.\n\t *\n\t * @param {Array} data - the data to be processed.\n\t * @param {string} name - the field name to be processed.\n\t * @param {boolean} isDate - flag indicating if the field is a date type.\n\t * @param {boolean} isTime - flag indicating if the field is a time type.\n\t */\n\t_processDateTimeFields: function (data, name, isDate, isTime) {\n\t\tdata.forEach((row) => {\n\t\t\tconst value = row[name];\n\t\t\tif (value) {\n\t\t\t\tif (isDate) {\n\t\t\t\t\trow[name] = isc.DateUtil.parseSchemaDate(value);\n\t\t\t\t} else if (isTime) {\n\t\t\t\t\trow[name] = isc.Time.parseInput(value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Handles grid selection based on the data provided.\n\t *\n\t * @param {Array} data - the data to be set in the grid.\n\t * @param {Object} grid - the grid object to be updated.\n\t */\n\t_handleGridSelection: function (data, grid) {\n\t\tconst method = grid.grid.selectionUpdated;\n\t\ttry {\n\t\t\tgrid.grid.selectionUpdated = null;\n\t\t\tgrid.grid.setData(data);\n\n\t\t\tconst selectedBizId = values[grid.selectedIdBinding];\n\t\t\tconst index = data.findIndex(\"bizId\", selectedBizId);\n\t\t\tif (index >= 0) {\n\t\t\t\tgrid.grid.selectSingleRecord(index);\n\t\t\t} else {\n\t\t\t\tgrid.grid.deselectAllRecords();\n\t\t\t}\n\t\t} finally {\n\t\t\tgrid.grid.selectionUpdated = method;\n\t\t}\n\t},\n\n\t/**\n\t * Manages the visibility and enabling/disabling of the action panel tools.\n\t *\n\t * @param {Object} values - the values that determine the action panel visibility.\n\t * @param {boolean} onlyView - flag indicating if the current view is read-only.\n\t */\n\t_manageActionPanel: function (values, onlyView) {\n\t\tconst members = this._actionPanel.getMembers();\n\t\tif (members.length === 0) {\n\t\t\tthis._actionPanel.hide();\n\t\t}\n\n\t\tmembers.forEach((tool) => {\n\t\t\tconst shouldHide =\n\t\t\t\t(values.created && tool.forCreate != null && tool.forCreate) ||\n\t\t\t\t(values.notCreated && tool.forCreate != null && !tool.forCreate);\n\n\t\t\tif (shouldHide) {\n\t\t\t\tthis._showHide(tool, this._actionPanel, values, true);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._enableDisable(tool, this._actionPanel, values);\n\n\t\t\tif (tool.actionName) {\n\t\t\t\tthis._handleToolVisibility(tool, values, onlyView);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Manages the visibility of action panel tools based on the current state and context.\n\t *\n\t * @param {Object} tool - the tool object from the action panel.\n\t * @param {Object} values - the current values object containing state information (e.g., `persisted`).\n\t * @param {boolean} onlyView - indicates if the current view is the only active view.\n\t */\n\t_handleToolVisibility: function (tool, values, onlyView) {\n\t\tif (this._b) {\n\t\t\tthis._showHide(\n\t\t\t\ttool,\n\t\t\t\tthis._actionPanel,\n\t\t\t\tvalues,\n\t\t\t\t[\"OK\", \"Save\", \"Cancel\", \"Delete\"].includes(tool.type) ||\n\t\t\t\t\t(tool.type === \"Remove\" &&\n\t\t\t\t\t\t(this._openedFromDataGrid === undefined ||\n\t\t\t\t\t\t\t!this._openedFromDataGrid ||\n\t\t\t\t\t\t\t(!tool._canDelete && values.persisted))),\n\t\t\t);\n\t\t} else {\n\t\t\tthis._showHide(\n\t\t\t\ttool,\n\t\t\t\tthis._actionPanel,\n\t\t\t\tvalues,\n\t\t\t\t[\"ZoomOut\", \"Remove\"].includes(tool.type) ||\n\t\t\t\t\t(!values[\"persisted\"] && tool.type === \"Delete\") ||\n\t\t\t\t\t(onlyView && [\"Delete\", \"OK\", \"Cancel\"].includes(tool.type)),\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Displays growls and messages based on the provided data.\n\t *\n\t * @param {Array} growls - the growl messages to be displayed.\n\t * @param {Array} messages - the informational or warning messages to be displayed.\n\t */\n\t_displayGrowlsAndMessages: function (growls, messages) {\n\t\tif (growls) {\n\t\t\tisc.BizUtil.growl(growls);\n\t\t}\n\n\t\tif (messages) {\n\t\t\tconst markup =\n\t\t\t\tmessages.length > 1\n\t\t\t\t\t? `<ul>${messages.map((message) => `<li>${message.summary}</li>`).join(\"\")}</ul>`\n\t\t\t\t\t: messages[0].summary;\n\t\t\tconst warn = messages.some((message) => message.severity !== \"info\");\n\t\t\twarn ? isc.warn(markup) : isc.say(markup);\n\t\t}\n\t},\n\n\t/**\n\t * Refreshes all visible list grids, with options for forced refresh and post-refresh conditions.\n\t *\n\t * @param {boolean} forceRefresh - if true, clears the list of already refreshed grids to force a full refresh.\n\t * @param {boolean} forcePostRefresh - if true, forces refresh even for grids that normally skip post-refresh.\n\t * @param {Object} values - the values used for evaluating grid refresh conditions.\n\t */\n\trefreshListGrids: function (forceRefresh, forcePostRefresh, values) {\n\t\tif (forceRefresh) {\n\t\t\tthis._refreshedGrids = {};\n\t\t}\n\n\t\t// Iterate through all grid bindings\n\t\tfor (const gridBinding in this._grids) {\n\t\t\tconst grids = this._grids[gridBinding];\n\n\t\t\tfor (const gridID in grids) {\n\t\t\t\tconst grid = grids[gridID];\n\n\t\t\t\tif (this._refreshedGrids[gridID]) {\n\t\t\t\t\tcontinue; // Skip already refreshed grids\n\t\t\t\t}\n\n\t\t\t\tif (grid.isVisible()) {\n\t\t\t\t\t// Only refresh visible grids\n\n\t\t\t\t\tconst shouldRefresh =\n\t\t\t\t\t\tforcePostRefresh ||\n\t\t\t\t\t\tgrid.postRefreshConditionName === undefined ||\n\t\t\t\t\t\tthis._evaluateConditionName(grid.postRefreshConditionName, values);\n\n\t\t\t\t\tif (!shouldRefresh) {\n\t\t\t\t\t\tcontinue; // Skip if the condition doesn't allow refresh\n\t\t\t\t\t}\n\n\t\t\t\t\tif (grid.webmap) {\n\t\t\t\t\t\t// Refresh map grids\n\t\t\t\t\t\tgrid.rerender();\n\t\t\t\t\t} else if (grid.rootIdBinding) {\n\t\t\t\t\t\t// Handle tree grids with root binding\n\t\t\t\t\t\tif (grid.hasDataSource()) {\n\t\t\t\t\t\t\tconst existingRootValue = grid.grid\n\t\t\t\t\t\t\t\t.getDataSource()\n\t\t\t\t\t\t\t\t.getField(\"bizParentId\").rootValue;\n\t\t\t\t\t\t\tconst newRootValue = `_${grid._view._vm.getValue(grid.rootIdBinding)}`;\n\n\t\t\t\t\t\t\tif (existingRootValue !== newRootValue) {\n\t\t\t\t\t\t\t\tgrid.setDataSource(grid.dataSource);\n\t\t\t\t\t\t\t} else if (grid.autoPopulate) {\n\t\t\t\t\t\t\t\tgrid.refresh();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tgrid.setDataSource(grid.dataSource);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (grid.dataSource) {\n\t\t\t\t\t\t// Handle list grids or tree grids\n\t\t\t\t\t\tif (grid.hasDataSource()) {\n\t\t\t\t\t\t\tif (grid.autoPopulate) {\n\t\t\t\t\t\t\t\tgrid.refresh();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tgrid.setDataSource(grid.dataSource);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._refreshedGrids[gridID] = true; // Mark grid as refreshed\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Extracts values from view controls into the instance.\n\t * If validation errors exist, returns null.\n\t *\n\t * @param {boolean} validate - determines whether to perform validation before gathering data.\n\t * @returns {Object|null} - the gathered data object or null if validation fails.\n\t */\n\tgather: function (validate) {\n\t\tif (validate && !this._vm.validate()) {\n\t\t\treturn null; // Return early if validation fails\n\t\t}\n\n\t\t// TODO: Add extra list validation here if necessary\n\n\t\treturn this._gather();\n\t},\n\n\t/**\n\t * Gathers and transforms scalar and list membership values from grids.\n\t * - Collects scalar values.\n\t * - Converts list memberships to arrays of bizIds.\n\t * - Transforms comparison trees into object hierarchies.\n\t * - Reorders data in grids for accurate representation.\n\t *\n\t * @returns {Object} - the gathered and transformed result object.\n\t */\n\t_gather: function () {\n\t\t// Collect all scalar values from the values manager\n\t\tconst result = this._vm.getValues();\n\n\t\t// Iterate through each grid binding and process the data\n\t\tfor (const gridBinding in this._grids) {\n\t\t\tlet data = result[gridBinding];\n\n\t\t\tif (Array.isArray(data) && data.length > 0) {\n\t\t\t\tif (data[0].properties) {\n\t\t\t\t\t// Handle comparison widgets\n\t\t\t\t\tconst comparisons = this._grids[gridBinding];\n\t\t\t\t\tfor (const comparisonID in comparisons) {\n\t\t\t\t\t\tresult[gridBinding] = comparisons[comparisonID].getData();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst grids = this._grids[gridBinding];\n\n\t\t\t\t\tfor (const gridID in grids) {\n\t\t\t\t\t\tconst grid = grids[gridID];\n\t\t\t\t\t\tconst smartClientGrid = grid.grid;\n\n\t\t\t\t\t\tif (smartClientGrid) {\n\t\t\t\t\t\t\t// Ensure correct ordering when user reorders data via drag-and-drop\n\t\t\t\t\t\t\tsmartClientGrid.reorderData();\n\t\t\t\t\t\t\tdata = data.sortByProperty(grid._ordinal, true);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Process list memberships or aggregated references in data grids\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t(grid._candidateList && grid._memberList) ||\n\t\t\t\t\t\t\t(smartClientGrid?.fields?.length === 1 &&\n\t\t\t\t\t\t\t\tsmartClientGrid.fields[0].name === \"bizId\" &&\n\t\t\t\t\t\t\t\tsmartClientGrid.fields[0].type === \"enum\")\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (grid._ordinal) {\n\t\t\t\t\t\t\t\tgrid._memberList.reorderData();\n\t\t\t\t\t\t\t\tdata = data.sortByProperty(grid._ordinal, true);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Extract bizIds from list memberships\n\t\t\t\t\t\t\tresult[gridBinding] = data.map((item) => item.bizId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n\n\t/**\n\t * Evaluates a condition name against provided values.\n\t * - Returns true if conditionName is \"true\".\n\t * - Returns false if conditionName is \"false\".\n\t * - Otherwise, looks up the conditionName in the values object.\n\t *\n\t * @param {string} conditionName - the name of the condition to evaluate.\n\t * @param {Object} values - the values object to evaluate the condition against.\n\t * @returns {boolean} - the result of the condition evaluation.\n\t */\n\t_evaluateConditionName: function (conditionName, values) {\n\t\tif (!conditionName) return false;\n\n\t\tswitch (conditionName) {\n\t\t\tcase \"true\":\n\t\t\t\treturn true;\n\t\t\tcase \"false\":\n\t\t\t\treturn false;\n\t\t\tdefault:\n\t\t\t\treturn Boolean(values[conditionName]);\n\t\t}\n\t},\n\n\t/**\n\t * Processes and updates widgets in a container based on visibility, conditions, and value mappings.\n\t *\n\t * @param {Object} container - the BizContainer containing widgets.\n\t * @param {boolean} invisible - whether the current container is invisible.\n\t * @param {Object} values - ViewModel values with evaluated conditions.\n\t * @param {Object} valueMaps - value maps for select inputs.\n\t * @param {Array} toRerender - list of items to rerender after processing.\n\t */\n\t_processWidgets: function (\n\t\tcontainer,\n\t\tinvisible,\n\t\tvalues,\n\t\tvalueMaps,\n\t\ttoRerender,\n\t) {\n\t\tfor (const contained of container.contained) {\n\t\t\tthis._enableDisable(contained, container, values);\n\t\t\tconst containedInvisible =\n\t\t\t\tinvisible || this._showHide(contained, container, values, false);\n\n\t\t\t// Recursively process nested containers\n\t\t\tif (isc.isA.Function(contained.addContained)) {\n\t\t\t\tthis._processWidgets(\n\t\t\t\t\tcontained,\n\t\t\t\t\tcontainedInvisible,\n\t\t\t\t\tvalues,\n\t\t\t\t\tvalueMaps,\n\t\t\t\t\ttoRerender,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Process tab panes\n\t\t\tif (isc.isA.Function(contained.addBizTab)) {\n\t\t\t\tlet selectedTabNumber = contained.getSelectedTabNumber();\n\n\t\t\t\tfor (const bizTab of contained.bizTabs) {\n\t\t\t\t\tconst tabInvisible =\n\t\t\t\t\t\tcontainedInvisible || this._showHide(bizTab, contained, values, false);\n\t\t\t\t\tthis._enableDisable(bizTab, contained, values);\n\t\t\t\t\tthis._processWidgets(\n\t\t\t\t\t\tbizTab.pane,\n\t\t\t\t\t\ttabInvisible,\n\t\t\t\t\t\tvalues,\n\t\t\t\t\t\tvalueMaps,\n\t\t\t\t\t\ttoRerender,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Restore selected tab if specified in values\n\t\t\t\tconst selectedTabIndex = values[contained.selectedTabIndexBinding];\n\t\t\t\tif (selectedTabIndex !== undefined && selectedTabIndex != null) {\n\t\t\t\t\tselectedTabNumber = selectedTabIndex;\n\t\t\t\t}\n\t\t\t\tif (selectedTabNumber != null) {\n\t\t\t\t\tcontained.selectTab(selectedTabNumber);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Process form widgets\n\t\t\tif (isc.isA.Function(contained.getItems)) {\n\t\t\t\t// Manage form membership based on visibility\n\t\t\t\tif (containedInvisible) {\n\t\t\t\t\tthis._vm.members?.contains(contained) && this._vm.removeMember(contained);\n\t\t\t\t} else {\n\t\t\t\t\t(!this._vm.members || !this._vm.members.contains(contained)) &&\n\t\t\t\t\t\tthis._vm.addMember(contained);\n\t\t\t\t}\n\n\t\t\t\t// Process each form item\n\t\t\t\tfor (const item of contained.items) {\n\t\t\t\t\tthis._enableDisable(item, contained, values);\n\t\t\t\t\tif (!this._showHide(item, contained, values, false)) {\n\t\t\t\t\t\t// Manage value maps for lookup and selection inputs\n\t\t\t\t\t\tif (item.type === \"bizLookupDescription\") {\n\t\t\t\t\t\t\titem.setValueMapFromEditView(values);\n\t\t\t\t\t\t} else if ([\"select\", \"enum\", \"comboBox\"].includes(item.type)) {\n\t\t\t\t\t\t\tthis._updateValueMap(item, values, valueMaps);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to rerender list if necessary\n\t\t\tif (isc.isA.Function(contained.rerender)) {\n\t\t\t\ttoRerender.add(contained);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Updates the value map for a form item.\n\t *\n\t * @param {Object} item - the form item to update.\n\t * @param {Object} values - the evaluated form values.\n\t * @param {Object} valueMaps - predefined value maps.\n\t */\n\t_updateValueMap: function (item, values, valueMaps) {\n\t\tlet valueMap = {};\n\n\t\t// If the item has an option data source, fetch the data\n\t\tif (item.optionDataSource) {\n\t\t\tif (item.optionDataSource === isc.BizUtil.COMPLETE_DATA_SOURCE) {\n\t\t\t\tvalueMap[values[item.name]] = values[item.name];\n\t\t\t\titem.setValueMap(valueMap);\n\t\t\t} else {\n\t\t\t\titem.fetchData();\n\t\t\t\tvalueMap[values[item.name]] = values[`${item.name}_${item.displayField}`];\n\t\t\t\titem.setValueMap(valueMap);\n\t\t\t}\n\t\t}\n\t\t// Domain values must be in the bean\n\t\telse if (valueMaps && valueMaps[item.name]) {\n\t\t\tvalueMap = valueMaps[item.name];\n\t\t\titem.setValueMap(valueMap);\n\t\t}\n\t},\n\n\t/**\n\t * Updates the enabled/disabled state of widget actions based on provided conditions.\n\t *\n\t * @param {Object} widget - the widget whose state needs updating.\n\t * @param {Object} parent - the parent container of the widget.\n\t * @param {Object} values - the values to evaluate against conditions.\n\t */\n\t_enableDisable: function (widget, parent, values) {\n\t\t// Helper function to update a widget's capability based on a condition name\n\t\tconst updateCapability = (capabilityKey, conditionName) => {\n\t\t\tif (widget[conditionName]) {\n\t\t\t\twidget[capabilityKey] = !this._evaluateConditionName(\n\t\t\t\t\twidget[conditionName],\n\t\t\t\t\tvalues,\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\tupdateCapability(\"canPick\", \"disablePickConditionName\");\n\t\tupdateCapability(\"canAdd\", \"disableAddConditionName\");\n\t\tupdateCapability(\"canZoom\", \"disableZoomConditionName\");\n\t\tupdateCapability(\"canEdit\", \"disableEditConditionName\");\n\t\tupdateCapability(\"canRemove\", \"disableRemoveConditionName\");\n\t\tupdateCapability(\"canClear\", \"disableClearConditionName\");\n\n\t\t// Set overall disabled state based on a specific condition\n\t\tthis._setDisabled(widget, parent, widget.disabledConditionName, values);\n\t},\n\n\t/**\n\t * Updates the disabled state of a widget and its related parent components based on a condition.\n\t *\n\t * @param {Object} widget - the widget to enable or disable.\n\t * @param {Object} parent - the parent container of the widget.\n\t * @param {string} disabledConditionName - the condition name used for evaluation.\n\t * @param {Object} values - the values to evaluate the condition against.\n\t */\n\t_setDisabled: function (widget, parent, disabledConditionName, values) {\n\t\t// Evaluate whether the widget should be disabled\n\t\tconst isDisabled = this._evaluateConditionName(disabledConditionName, values);\n\n\t\t// Set required state if applicable (visibility takes precedence)\n\t\tif (\n\t\t\twidget.bizRequired &&\n\t\t\twidget.setRequired &&\n\t\t\twidget.isVisible &&\n\t\t\twidget.isVisible()\n\t\t) {\n\t\t\twidget.setRequired(!isDisabled);\n\t\t}\n\n\t\t// Directly set disabled state if the method exists\n\t\tif (widget.setDisabled) {\n\t\t\twidget.setDisabled(isDisabled);\n\t\t}\n\t\t// Fallback to enable/disable methods if available\n\t\telse if (widget.enable && widget.disable) {\n\t\t\tisDisabled ? widget.disable() : widget.enable();\n\t\t}\n\t\t// Handle tab disabling in parent container if applicable\n\t\telse if (parent && parent.enableTab && parent.disableTab && widget.pane) {\n\t\t\tconst tab = parent.tabForPane(widget.pane);\n\t\t\tconst tabIndex = parent.getTabNumber(tab);\n\n\t\t\tif (tabIndex >= 0) {\n\t\t\t\tisDisabled ? parent.disableTab(tab) : parent.enableTab(tab);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Applies a disabled state to a widget based on the provided binding and condition.\n\t *\n\t * @param {string} binding - the binding key used to retrieve the widget.\n\t * @param {string} disabledConditionName - the condition name used to determine if the widget should be disabled.\n\t */\n\tsetDisabled: function (binding, disabledConditionName) {\n\t\tconst widget = this._vm.getItem(binding);\n\n\t\tif (!widget) {\n\t\t\treturn; // Early exit if widget is not found\n\t\t}\n\n\t\tconst values = this.gather(false);\n\t\tthis._updateDisabledState(widget, null, disabledConditionName, values);\n\t},\n\n\t/**\n\t * Toggles the disabled state of a widget based on its current state.\n\t * If the widget is disabled, it will be enabled, and vice versa.\n\t *\n\t * @param {string} binding - the binding key used to retrieve the widget.\n\t */\n\ttoggleDisabled: function (binding) {\n\t\tconst widget = this._vm.getItem(binding);\n\n\t\tif (!widget) {\n\t\t\treturn; // Early return if widget is not found\n\t\t}\n\n\t\tconst disabledState = widget.isDisabled() ? \"false\" : \"true\";\n\t\tthis._setDisabled(widget, null, disabledState, null);\n\t},\n\n\t/**\n\t * Toggles the visibility state of a widget based on its current state.\n\t * If the widget is visible, it will be hidden, and vice versa.\n\t *\n\t * @param {string} binding - the binding key used to retrieve the widget.\n\t */\n\ttoggleVisibility: function (binding) {\n\t\tconst widget = this._vm.getItem(binding);\n\n\t\tif (!widget) {\n\t\t\treturn; // Early return if widget is not found\n\t\t}\n\n\t\tconst visibilityState = widget.isVisible() ? \"true\" : \"false\";\n\t\tthis._setInvisible(widget, null, visibilityState, null);\n\t},\n\n\t/**\n\t * Determines whether a widget should be visible or not, and applies the visibility state.\n\t * If forced to be invisible, the widget will be hidden regardless of its condition.\n\t *\n\t * @param {Object} widget - the widget whose visibility will be updated.\n\t * @param {Object} parent - the parent container of the widget.\n\t * @param {Object} values - the values to evaluate against the widget's condition.\n\t * @param {boolean} forceInvisible - whether the widget should be forced to be invisible (optional).\n\t * @returns {boolean} - the result of the `_setInvisible` method, which determines the widget's visibility.\n\t */\n\t_showHide: function (widget, parent, values, forceInvisible) {\n\t\t// Apply forced invisibility if specified\n\t\treturn this._setInvisible(\n\t\t\twidget,\n\t\t\tparent,\n\t\t\twidget.invisibleConditionName,\n\t\t\tvalues,\n\t\t\tforceInvisible,\n\t\t);\n\t},\n\n\t/**\n\t * Determines whether a widget should be visible or invisible based on conditions and forced invisibility.\n\t * Applies the visibility state and updates the widget or parent container accordingly.\n\t *\n\t * @param {Object} widget - the widget whose visibility will be updated.\n\t * @param {Object} parent - the parent container of the widget.\n\t * @param {string} invisibleConditionName - the condition to evaluate for widget invisibility.\n\t * @param {Object} values - the values used to evaluate the invisibility condition.\n\t * @param {boolean} [forceInvisible=false] - if set to `true`, forces the widget to be invisible regardless of the condition.\n\t * @returns {boolean} - the final invisibility state (`true` if invisible, `false` otherwise).\n\t */\n\t_setInvisible: function (\n\t\twidget,\n\t\tparent,\n\t\tinvisibleConditionName,\n\t\tvalues,\n\t\tforceInvisible = false,\n\t) {\n\t\tlet invisible = forceInvisible;\n\n\t\tif (!invisible) {\n\t\t\tinvisible = this._evaluateConditionName(invisibleConditionName, values);\n\t\t}\n\n\t\t// Adjust 'required' state based on visibility\n\t\tif (widget.bizRequired && widget.setRequired) {\n\t\t\tif (invisible) {\n\t\t\t\twidget.setRequired(false);\n\t\t\t} else if (widget.isDisabled && !widget.isDisabled()) {\n\t\t\t\twidget.setRequired(true);\n\t\t\t}\n\t\t}\n\n\t\t// Apply visibility changes based on widget type and conditions\n\t\tif (widget.show && widget.hide) {\n\t\t\tinvisible ? widget.hide() : widget.show();\n\t\t} else if (parent) {\n\t\t\tinvisible ? parent.hideMember(widget) : parent.showMember(widget);\n\t\t}\n\n\t\treturn invisible;\n\t},\n\n\t/**\n\t * Sets the visibility of a widget based on a condition name. If the widget exists, it will evaluate the invisibility condition and apply the corresponding visibility state.\n\t *\n\t * @param {string} binding - the binding key used to retrieve the widget.\n\t * @param {string} invisibleConditionName - the condition to evaluate for widget invisibility.\n\t */\n\tsetInvisible: function (binding, invisibleConditionName) {\n\t\tconst widget = this._vm.getItem(binding);\n\n\t\tif (!widget) {\n\t\t\treturn; // Early return if widget is not found\n\t\t}\n\n\t\tconst values = this.gather(false);\n\t\tthis._setInvisible(widget, null, invisibleConditionName, values);\n\t},\n});\n\n/**\n * Implements the BizButton UI component.\n * Extends IButton from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizButton\", \"IButton\");\n\nisc.BizButton.addMethods({\n\tinitWidget: function () {\n\t\t// Determines whether the button should auto fit based on provided width and height arguments\n\t\tthis.autoFit = !(arguments[0].width || arguments[0].height);\n\t\tthis.hasDisabledIcon = false;\n\n\t\t// Sets the title of the button (display name)\n\t\tthis.title = this.displayName || null;\n\n\t\t// Sets up the tooltip if provided\n\t\tif (this.tooltip) {\n\t\t\tthis.canHover = true;\n\t\t\tthis.getHoverHTML = function () {\n\t\t\t\treturn this.tooltip;\n\t\t\t};\n\t\t}\n\n\t\t// Configures the disabled icon behavior if an icon is set\n\t\tif (this.icon) {\n\t\t\tthis.showDisabledIcon = this.hasDisabledIcon;\n\t\t}\n\n\t\t// Defines the action triggered on button click\n\t\tthis.action = function () {\n\t\t\tif (this._view && this._view._blurry) {\n\t\t\t\tthis._view._blurry = this;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.confirm) {\n\t\t\t\tisc.ask(\n\t\t\t\t\tthis.confirm,\n\t\t\t\t\t(value) => {\n\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\tthis._action();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ title: \"Confirm\" },\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis._action();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Executes the appropriate action based on the `type` property of the button.\n\t\t * Supports actions like 'OK', 'Save', 'Cancel', 'Delete', 'Export', 'Import', etc.\n\t\t *\n\t\t * @method _action\n\t\t * @private\n\t\t * @returns {void}\n\t\t */\n\t\tthis._action = function () {\n\t\t\tconst validate = this.validate === undefined ? true : this.validate;\n\n\t\t\t// Declare variables outside the switch to avoid redefinition\n\t\t\tlet instance, opener, gridBinding, bizId, url;\n\n\t\t\t// Handle different button types\n\t\t\tswitch (this.type) {\n\t\t\t\tcase \"OK\":\n\t\t\t\t\t// Save action on edit view\n\t\t\t\t\tthis._view.saveInstance(validate, this.actionName);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Save\":\n\t\t\t\t\t// Save action on edit view with success message\n\t\t\t\t\tthis._view.saveInstance(validate, this.actionName, (data, success) => {\n\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\tisc.BizUtil.growl(\n\t\t\t\t\t\t\t\t[{ severity: \"info\", summary: \"Saved\", detail: \"Changes Saved\" }],\n\t\t\t\t\t\t\t\t3000,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Add\":\n\t\t\t\t\t// Add action on child edit view\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ZoomOut\": {\n\t\t\t\t\t// Handle ZoomOut action with changes validation\n\t\t\t\t\tinstance = this._view.gather(false);\n\t\t\t\t\tconst { _apply: apply, _changed: changedOnServer } = instance;\n\t\t\t\t\tif (apply || changedOnServer || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\tthis._view.saveInstance(validate, this.actionName);\n\t\t\t\t\t} else {\n\t\t\t\t\t\topener = isc.WindowStack.getOpener();\n\t\t\t\t\t\tisc.WindowStack.popoff(this._view._saved);\n\t\t\t\t\t\topener._source = null;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase \"Cancel\": {\n\t\t\t\t\t// Cancel action with unsaved changes check\n\t\t\t\t\tinstance = this._view.gather(false);\n\t\t\t\t\tconst { _changed: changedOnServerCancel } = instance;\n\t\t\t\t\topener = isc.WindowStack.getOpener();\n\n\t\t\t\t\tif (changedOnServerCancel || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\tisc.ask(\n\t\t\t\t\t\t\t`There are unsaved changes in the ${this._view._singular}. Do you wish to cancel?`,\n\t\t\t\t\t\t\t(value) => {\n\t\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\t\tisc.WindowStack.popoff(this._view._saved);\n\t\t\t\t\t\t\t\t\topener._source = null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ title: \"Discard Unsaved Changes?\" },\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tisc.WindowStack.popoff(this._view._saved);\n\t\t\t\t\t\topener._source = null;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase \"Delete\":\n\t\t\t\t\t// Delete action on edit view\n\t\t\t\t\tthis._view.deleteInstance(validate);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Remove\":\n\t\t\t\t\t// Remove action on child edit view\n\t\t\t\t\tinstance = this._view.gather(false);\n\t\t\t\t\tbizId = instance.bizId;\n\t\t\t\t\tgridBinding = this._view._b.substring(\n\t\t\t\t\t\tthis._view._b.lastIndexOf(\".\") + 1,\n\t\t\t\t\t\tthis._view._b.lastIndexOf(\"ElementById\"),\n\t\t\t\t\t);\n\t\t\t\t\topener = isc.WindowStack.getOpener();\n\n\t\t\t\t\tif (opener) {\n\t\t\t\t\t\tconst openerListGrids = opener._grids[gridBinding];\n\t\t\t\t\t\tif (openerListGrids) {\n\t\t\t\t\t\t\tfor (const openerListGridID in openerListGrids) {\n\t\t\t\t\t\t\t\tconst openerListGrid = openerListGrids[openerListGridID];\n\t\t\t\t\t\t\t\topenerListGrid.remove(bizId);\n\t\t\t\t\t\t\t\tif (openerListGrid.bizRemoved) {\n\t\t\t\t\t\t\t\t\topenerListGrid.bizRemoved();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\topener._vm.setValue(\"_apply\", true);\n\t\t\t\t\t}\n\t\t\t\t\tisc.WindowStack.popoff(false);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Report\":\n\t\t\t\t\t// Report action\n\t\t\t\t\tisc.ReportDialog.popupReport(this._view, this.params);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"BizExport\":\n\t\t\t\t\t// BizExport action\n\t\t\t\t\tinstance = this._view.gather(false);\n\t\t\t\t\tif (instance) {\n\t\t\t\t\t\tthis._view.saveInstance(validate, null, (data, success) => {\n\t\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\t\twindow.location.assign(\n\t\t\t\t\t\t\t\t\t`bizexport.xls?_n=${this.actionName}&_doc=${this._view._mod}.${\n\t\t\t\t\t\t\t\t\t\tthis._view._doc\n\t\t\t\t\t\t\t\t\t}&_c=${instance._c}&_ctim=${new Date().getTime()}`,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"BizImport\":\n\t\t\t\t\t// BizImport action\n\t\t\t\t\tinstance = this._view.gather(false);\n\t\t\t\t\tif (instance) {\n\t\t\t\t\t\tthis._view.saveInstance(validate, null, (data, success) => {\n\t\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\t\turl = `bizImport.xhtml?_a=${this.actionName}&_c=${instance._c}`;\n\t\t\t\t\t\t\t\tif (this._view._b) {\n\t\t\t\t\t\t\t\t\turl += `&_b=${this._view._b.replaceAll(\"_\", \".\")}`;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tisc.WindowStack.popup(null, \"BizPort Import\", true, [\n\t\t\t\t\t\t\t\t\tisc.HTMLPane.create({\n\t\t\t\t\t\t\t\t\t\tcontentsType: \"page\",\n\t\t\t\t\t\t\t\t\t\tcontents: \"Loading Page...\",\n\t\t\t\t\t\t\t\t\t\tcontentsURL: url,\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Download\":\n\t\t\t\t\t// Download action\n\t\t\t\t\tthis._view.doAction(this.actionName, validate);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Upload\":\n\t\t\t\t\t// Upload action\n\t\t\t\t\tinstance = this._view.gather(false);\n\t\t\t\t\tif (instance) {\n\t\t\t\t\t\tthis._view.saveInstance(validate, null, (data, success) => {\n\t\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\t\turl = `fileUpload.xhtml?_a=${this.actionName}&_c=${instance._c}`;\n\t\t\t\t\t\t\t\tif (this._view._b) {\n\t\t\t\t\t\t\t\t\turl += `&_b=${this._view._b.replaceAll(\"_\", \".\")}`;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tisc.WindowStack.popup(null, \"Upload\", true, [\n\t\t\t\t\t\t\t\t\tisc.HTMLPane.create({\n\t\t\t\t\t\t\t\t\t\tcontentsType: \"page\",\n\t\t\t\t\t\t\t\t\t\tcontents: \"Loading Page...\",\n\t\t\t\t\t\t\t\t\t\tcontentsURL: url,\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Navigate\":\n\t\t\t\t\t// Navigate to a binding within a conversation\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Print\":\n\t\t\t\t\t// Print action\n\t\t\t\t\tisc.ReportDialog.popupReport(this._view, {\n\t\t\t\t\t\t_mod: this._view._mod,\n\t\t\t\t\t\t_doc: this._view._doc,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t// Default action\n\t\t\t\t\tthis._view.doAction(this.actionName, validate);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n});\n\n/**\n * Implements the BizZoomIn UI component.\n * Extends IButton from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizZoomIn\", \"IButton\");\n\nisc.BizZoomIn.addMethods({\n\tinitWidget: function () {\n\t\tthis.autoFit = !(arguments[0].width || arguments[0].height);\n\t\tthis.hasDisabledIcon = false;\n\n\t\tthis.title = this.displayName || null;\n\n\t\tif (this.tooltip) {\n\t\t\tthis.canHover = true;\n\t\t\tthis.getHoverHTML = function () {\n\t\t\t\treturn this.tooltip;\n\t\t\t};\n\t\t}\n\n\t\tif (this.icon) {\n\t\t\tthis.showDisabledIcon = this.hasDisabledIcon;\n\t\t}\n\n\t\t/**\n\t\t * Action triggered when the zoom in button is clicked.\n\t\t */\n\t\tthis.action = () => {\n\t\t\t// Validate here so we can show the zoom message if required\n\t\t\tconst instance = this._view.gather(true);\n\n\t\t\tif (instance) {\n\t\t\t\tconst bizId = instance[this.binding];\n\t\t\t\tif (bizId) {\n\t\t\t\t\t// Get the view polymorphically\n\t\t\t\t\tisc.BizUtil.getEditView(\n\t\t\t\t\t\tinstance[this.binding + \"_bizModule\"],\n\t\t\t\t\t\tinstance[this.binding + \"_bizDocument\"],\n\t\t\t\t\t\t(view) => {\n\t\t\t\t\t\t\t// Determine the view binding\n\t\t\t\t\t\t\tconst viewBinding = this._view._b\n\t\t\t\t\t\t\t\t? `${this._view._b}.${this.binding}`\n\t\t\t\t\t\t\t\t: this.binding;\n\n\t\t\t\t\t\t\tconst fromRect = this.getPageRect();\n\n\t\t\t\t\t\t\tif (instance._apply || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\t\t\tdelete instance._apply;\n\t\t\t\t\t\t\t\t// Apply changes to the current form before zooming in\n\t\t\t\t\t\t\t\tthis._view.saveInstance(true, null, (data, success) => {\n\t\t\t\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\t\t\t\tisc.WindowStack.popup(fromRect, \"Edit\", false, [view]);\n\t\t\t\t\t\t\t\t\t\tview.editInstance(bizId, viewBinding, instance._c, false);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tisc.WindowStack.popup(fromRect, \"Edit\", false, [view]);\n\t\t\t\t\t\t\t\tview.editInstance(bizId, viewBinding, instance._c, false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tisc.warn(\"You cannot zoom in to an empty reference\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisc.warn(\"You cannot zoom in until you fix the problems found\");\n\t\t\t}\n\t\t};\n\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n});\n\n// TODO: Dialog button\n\n/**\n * Implements the BizVBox UI component.\n * Extends VLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizVBox\", \"VLayout\");\n\nisc.BizVBox.addMethods({\n\tinitWidget: function () {\n\t\tthis.contained = [];\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n\n\t/**\n\t * Adds a widget to the contained array and to the layout's members.\n\t *\n\t * @function\n\t * @name BizVBox#addContained\n\t * @param {Widget} contained - the widget to add\n\t * @returns {void}\n\t */\n\taddContained: function (contained) {\n\t\tthis.contained.add(contained);\n\t\tthis.addMember(contained);\n\t},\n});\n\n/**\n * Implements the BizHBox UI component.\n * Extends HLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizHBox\", \"HLayout\");\n\nisc.BizHBox.addMethods({\n\tinitWidget: function () {\n\t\tthis.contained = [];\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n\n\t/**\n\t * Adds a widget to the contained array and to the layout's members.\n\t *\n\t * @function\n\t * @name BizHBox#addContained\n\t * @param {Widget} contained - the widget to add\n\t * @returns {void}\n\t */\n\taddContained: function (contained) {\n\t\tthis.contained.add(contained);\n\t\tthis.addMember(contained);\n\t},\n});\n\n/**\n * Implements the BizCollapsible UI component.\n * Extends VLayout fromthe SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizCollapsible\", \"VLayout\");\n\nisc.BizCollapsible.addMethods({\n\tinitWidget: function (config) {\n\t\tthis.contained = [];\n\t\tthis.minimized = config.minimized;\n\n\t\tthis._height = config.height || \"100%\";\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\tthis.guts = isc.Window.create({\n\t\t\ttitle: config.title,\n\t\t\tautoDraw: true, // Required for render in tab panes\n\t\t\tautoSize: true, // Required for render in tab panes\n\t\t\theight: \"100%\", // Width set in draw method below\n\t\t\tcanDragReposition: false,\n\t\t\tcanDragResize: false,\n\t\t\tshowCloseButton: false,\n\t\t\tanimateMinimize: false,\n\t\t\theaderLabelProperties: {\n\t\t\t\twidth: \"100%\",\n\t\t\t\tclick: () => {\n\t\t\t\t\t// Toggle between minimized and restored state\n\t\t\t\t\tthis.guts.minimized ? this.guts.restore() : this.guts.minimize();\n\t\t\t\t},\n\t\t\t},\n\t\t\trestore: function () {\n\t\t\t\tif (me._view.isVisible()) {\n\t\t\t\t\tme._view.delayCall(\"refreshListGrids\", [\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tme._view.gather(false),\n\t\t\t\t\t]);\n\t\t\t\t}\n\n\t\t\t\tthis.Super(\"restore\", arguments);\n\t\t\t\tme.minimized = false;\n\t\t\t\tme._resize();\n\t\t\t},\n\n\t\t\tminimize: function () {\n\t\t\t\tthis.Super(\"minimize\", arguments);\n\t\t\t\tme.minimized = true;\n\t\t\t\tme._resize();\n\t\t\t},\n\t\t});\n\t\tthis.addMember(this.guts);\n\t\tthis._resize();\n\n\t\t// Timer to throttle resize callbacks and prevent infinite loops\n\t\tthis._resizeTimer = null;\n\t},\n\n\t/**\n\t * Sets the width of the window to match the parent's width at draw time.\n\t *\n\t * @function\n\t * @name BizCollapsible#draw\n\t * @returns {void}\n\t */\n\tdraw: function () {\n\t\tif (this.guts) {\n\t\t\tthis.guts.setWidth(this.getWidth());\n\t\t}\n\t\treturn this.Super(\"draw\", arguments);\n\t},\n\n\t/**\n\t * Resizes the window and throttles resize events using a timer.\n\t *\n\t * @function\n\t * @name BizCollapsible#resized\n\t * @returns {void}\n\t */\n\tresized: function () {\n\t\tif (this.guts) {\n\t\t\tif (this._resizeTimer) {\n\t\t\t\tclearTimeout(this._resizeTimer);\n\t\t\t}\n\t\t\tthis._resizeTimer = setTimeout(() => {\n\t\t\t\tthis._resize();\n\t\t\t}, 100);\n\t\t}\n\t\tthis.Super(\"resized\", arguments);\n\t},\n\n\t/**\n\t * Resizes the window and resets the resize timer.\n\t *\n\t * @function\n\t * @name BizCollapsible#_resize\n\t * @returns {void}\n\t */\n\t_resize: function () {\n\t\tthis._resizeTimer = null;\n\t\tif (this.minimized) {\n\t\t\tthis.setHeight(30);\n\t\t\tthis.setProperty(\"maxHeight\", 30);\n\t\t} else {\n\t\t\tthis.setHeight(this._height);\n\t\t\t// Reset max height to default\n\t\t\tthis.setProperty(\"maxHeight\", 10000);\n\t\t}\n\t\tthis.guts.setWidth(this.getWidth());\n\t},\n\n\t/**\n\t * Adds a widget to the collapsible container.\n\t *\n\t * @function\n\t * @name BizCollapsible#addContained\n\t * @param {Widget} contained - the widget to add to the container\n\t * @returns {void}\n\t */\n\taddContained: function (contained) {\n\t\tthis.contained.add(contained);\n\t\tthis.guts.addItem(contained);\n\n\t\t// Minimize if required after contents are added (only 1 VBox, HBox, or Form)\n\t\tif (this.minimized) {\n\t\t\tthis.guts.minimize();\n\t\t}\n\t},\n});\n\n/**\n * Implements the BizTabPane UI component.\n * Extends TabSet from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizTabPane\", \"TabSet\");\n\nisc.BizTabPane.addMethods({\n\tinitWidget: function () {\n\t\tthis.tabs = [];\n\t\tthis.bizTabs = [];\n\t\tthis.destroyPanes = false; // Don't destroy the tab panes when removing, just show & hide\n\t\tthis.tabBarThickness = this.tabBarThickness || 30; // Default tab bar thickness (height)\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n\n\t/**\n\t * Handles the selection of a tab.\n\t *\n\t * @function\n\t * @param {number} tabNum - the tab number that was selected\n\t * @param {Object} tabPane - the tab pane object\n\t * @param {string} ID - the ID of the tab\n\t * @param {Object} tab - the selected tab object\n\t * @returns {void}\n\t */\n\ttabSelected: function (tabNum, tabPane, ID, tab) {\n\t\tif (this._view.isVisible()) {\n\t\t\tthis._view.delayCall(\"refreshListGrids\", [\n\t\t\t\tfalse,\n\t\t\t\tfalse,\n\t\t\t\tthis._view.gather(false),\n\t\t\t]);\n\t\t}\n\t},\n\n\t/**\n\t * Adds a custom tab definition to the BizTabPane and adds it to the visible tab set.\n\t *\n\t * @function\n\t * @param {BizTab} bizTab - the tab definition to add\n\t * @returns {void}\n\t */\n\taddBizTab: function (bizTab) {\n\t\tthis.bizTabs.add(bizTab);\n\t\tthis.addTab({\n\t\t\tname: bizTab.name,\n\t\t\ttitle: bizTab.title,\n\t\t\ticon: bizTab.icon,\n\t\t\tprompt: bizTab.prompt,\n\t\t\tpane: bizTab.pane,\n\t\t\tdisabledConditionName: bizTab.disabledConditionName,\n\t\t\tinvisibleConditionName: bizTab.invisibleConditionName,\n\t\t\tselectedConditionName: bizTab.selectedConditionName,\n\t\t});\n\t},\n\n\t/**\n\t * Shows a hidden member tab based on the provided bizTab definition.\n\t * If the tab is not already present, it attempts to find the correct position and adds it.\n\t *\n\t * @function\n\t * @name BizTabPane#showMember\n\t * @param {BizTab} bizTab - the bizTab definition to show\n\t * @returns {void}\n\t */\n\tshowMember: function (bizTab) {\n\t\tlet existingTabPosition = this.getTabNumber(bizTab.name);\n\t\tif (existingTabPosition < 0) {\n\t\t\t// Find the position to insert this tab\n\t\t\tlet tabPosition = 0; // Default position\n\t\t\tlet tabNumber = parseInt(bizTab.name, 10) - 1; // Start searching backwards\n\t\t\twhile (tabNumber >= 0) {\n\t\t\t\texistingTabPosition = this.getTabNumber(String(tabNumber));\n\t\t\t\tif (existingTabPosition >= 0) {\n\t\t\t\t\ttabPosition = existingTabPosition + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\ttabNumber--;\n\t\t\t}\n\t\t\tthis.addTab(\n\t\t\t\t{\n\t\t\t\t\tname: bizTab.name,\n\t\t\t\t\ttitle: bizTab.title,\n\t\t\t\t\tpane: bizTab.pane,\n\t\t\t\t\tdisabledConditionName: bizTab.disabledConditionName,\n\t\t\t\t\tinvisibleConditionName: bizTab.invisibleConditionName,\n\t\t\t\t\tselectedConditionName: bizTab.selectedConditionName,\n\t\t\t\t},\n\t\t\t\ttabPosition,\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Hides a member tab based on the provided bizTab definition.\n\t *\n\t * @function\n\t * @name BizTabPane#hideMember\n\t * @param {BizTab} bizTab - the bizTab definition to hide\n\t * @returns {void}\n\t */\n\thideMember: function (bizTab) {\n\t\tif (this.getTabNumber(bizTab.name) >= 0) {\n\t\t\tthis.removeTab(bizTab.name);\n\t\t}\n\t},\n});\n\n// TODO: HTML\n// TODO: Radio\n\n/**\n * Implements the BizListMembership UI component.\n * Extends HLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizListMembership\", \"HLayout\");\n\nisc.BizListMembership.addMethods({\n\tinitWidget: function (config) {\n\t\tthis.membersMargin = 10;\n\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\t// Create candidate list grid\n\t\tthis._candidateList = isc.ListGrid.create({\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tminHeight: 100,\n\t\t\tcanDragRecordsOut: true,\n\t\t\tcanAcceptDroppedRecords: true,\n\t\t\tdragDataAction: \"move\",\n\t\t\trecordDrop: function (dropRecords, targetRecord, index, sourceWidget) {\n\t\t\t\tthis.Super(\"recordDrop\", arguments);\n\n\t\t\t\tme._view._vm.setValue(\"_changed\", true); // mark the view as dirty\n\t\t\t\tme._view._vm.setValue(\"_apply\", true); // post view changes before zooming\n\t\t\t\tme.changed();\n\t\t\t},\n\t\t\talternateRecordStyles: true,\n\t\t\tautoFetchData: false,\n\t\t\tleaveScrollbarGap: false,\n\t\t\tshowHeaderContextMenu: false,\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tname: \"bizKey\",\n\t\t\t\t\ttitle: this.candidatesHeading ? this.candidatesHeading : \"Candidates\",\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\t// Create member list grid\n\t\tthis._memberList = isc.ListGrid.create({\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tminHeight: 100,\n\t\t\tcanDragRecordsOut: true,\n\t\t\tcanAcceptDroppedRecords: true,\n\t\t\tdragDataAction: \"move\",\n\t\t\tcanReorderRecords: config._ordinal ? true : false,\n\t\t\trecordDrop: function (dropRecords, targetRecord, index, sourceWidget) {\n\t\t\t\tthis.Super(\"recordDrop\", arguments);\n\n\t\t\t\tif (sourceWidget === this) {\n\t\t\t\t\t// Handle reorder drop\n\t\t\t\t\tthis.reorderData();\n\t\t\t\t}\n\n\t\t\t\tme._view._vm.setValue(\"_changed\", true); // mark the view as dirty\n\t\t\t\tme._view._vm.setValue(\"_apply\", true); // post view changes before zooming\n\t\t\t\tme.changed();\n\t\t\t},\n\t\t\t/**\n\t\t\t * Reorders the member list if the grid is orderable.\n\t\t\t */\n\t\t\treorderData: function () {\n\t\t\t\tif (config._ordinal) {\n\t\t\t\t\t// this grid is orderable\n\t\t\t\t\tconst data = this.getData();\n\t\t\t\t\tfor (let i = 0, l = data.length; i < l; i++) {\n\t\t\t\t\t\tdata[i][config._ordinal] = i + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\talternateRecordStyles: true,\n\t\t\tautoFetchData: false,\n\t\t\tleaveScrollbarGap: false,\n\t\t\tshowHeaderContextMenu: false,\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tname: \"bizKey\",\n\t\t\t\t\ttitle: this.membersHeading ? this.membersHeading : \"Members\",\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\t// Layout for BizListMembership widget\n\t\tthis.members = [\n\t\t\tthis._candidateList,\n\t\t\tisc.VLayout.create({\n\t\t\t\tlayoutAlign: \"center\",\n\t\t\t\tmembersMargin: 10,\n\t\t\t\theight: 75,\n\t\t\t\tmembers: [\n\t\t\t\t\t// Button for adding members\n\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\ticon: \"icons/memberAssign.png\",\n\t\t\t\t\t\ticonWidth: 24,\n\t\t\t\t\t\ticonHeight: 24,\n\t\t\t\t\t\ticonAlign: \"center\",\n\t\t\t\t\t\twidth: 36,\n\t\t\t\t\t\theight: 36,\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tthis._memberList.transferSelectedData(this._candidateList);\n\t\t\t\t\t\t\tthis._view._vm.setValue(\"_changed\", true); // mark the view as dirty\n\t\t\t\t\t\t\tthis._view._vm.setValue(\"_apply\", true); // post view changes before zooming\n\t\t\t\t\t\t\tthis.changed();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcanHover: true,\n\t\t\t\t\t\tgetHoverHTML: function () {\n\t\t\t\t\t\t\treturn \"Add the selected candidates.\";\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\t// Button for removing members\n\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\ticon: \"icons/memberUnassign.png\",\n\t\t\t\t\t\ticonWidth: 24,\n\t\t\t\t\t\ticonHeight: 24,\n\t\t\t\t\t\ticonAlign: \"center\",\n\t\t\t\t\t\twidth: 36,\n\t\t\t\t\t\theight: 36,\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tthis._candidateList.transferSelectedData(this._memberList);\n\t\t\t\t\t\t\tthis._view._vm.setValue(\"_changed\", true); // mark the view as dirty\n\t\t\t\t\t\t\tthis._view._vm.setValue(\"_apply\", true); // post view changes before zooming\n\t\t\t\t\t\t\tthis.changed();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcanHover: true,\n\t\t\t\t\t\tgetHoverHTML: function () {\n\t\t\t\t\t\t\treturn \"Remove the selected members.\";\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t}),\n\t\t\tthis._memberList,\n\t\t];\n\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\t// Manage the grids in the view\n\t\tlet grids = this._view._grids[this._b];\n\t\tif (!grids) {\n\t\t\tgrids = {};\n\t\t\tthis._view._grids[this._b] = grids;\n\t\t}\n\t\tgrids[this.getID()] = this;\n\t},\n\n\t/**\n\t * Sets the data for the candidate and member lists.\n\t *\n\t * @param {Array} candidates - the data for the candidates.\n\t * @param {Array} members - the data for the members.\n\t */\n\tsetData: function (candidates, members) {\n\t\tthis._candidateList.setData(candidates);\n\t\tthis._memberList.setData(members);\n\t},\n\n\t/**\n\t * Handles changes to the lists. This method can be overridden during view generation.\n\t */\n\tchanged: function () {},\n});\n\n/**\n * Implements the BizComparison UI component.\n * Extends HLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizComparison\", \"HLayout\");\n\nisc.BizComparison.addMethods({\n\tinitWidget: function () {\n\t\tthis.canDragResize = true;\n\t\tthis.resizeFrom = [\"L\", \"R\"];\n\n\t\tthis._comparisonTree = isc.TreeGrid.create({\n\t\t\twidth: \"50%\",\n\t\t\theight: \"100%\",\n\t\t\tfields: [\n\t\t\t\t{ name: \"bizKey\", title: \"Document\" },\n\t\t\t\t{ name: \"relationship\", title: \"Relationship\" },\n\t\t\t],\n\t\t\tdata: isc.Tree.create({\n\t\t\t\tmodelType: \"parent\",\n\t\t\t\tidField: \"bizId\",\n\t\t\t\tparentIdField: \"parent\",\n\t\t\t\tdata: [],\n\t\t\t}),\n\t\t\tselectionUpdated: (record, recordList) => {\n\t\t\t\tif (record) {\n\t\t\t\t\tthis.setFormFields(record.properties);\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowOpenIcons: false,\n\t\t\tshowDropIcons: false,\n\t\t\tshowResizeBar: true,\n\t\t});\n\n\t\t/**\n\t\t * Generates hover HTML for diffing two items.\n\t\t * @param {Object} item - the item being hovered over.\n\t\t * @returns {string|null} the HTML diff if applicable.\n\t\t */\n\t\tconst hoverHTML = function (item) {\n\t\t\tif (item.type !== \"boolean\") {\n\t\t\t\tif (this.diff_match_patch) {\n\t\t\t\t\tlet newItem = item;\n\t\t\t\t\tlet oldItem = item;\n\t\t\t\t\tif (item.name.startsWith(\"_old_\")) {\n\t\t\t\t\t\tnewItem = this.getItem(item.name.substring(5));\n\t\t\t\t\t} else {\n\t\t\t\t\t\toldItem = this.getItem(\"_old_\" + item.name);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet newDisplayValue = newItem.getDisplayValue();\n\t\t\t\t\tlet oldDisplayValue = oldItem.getDisplayValue();\n\n\t\t\t\t\tif (newDisplayValue?.startsWith(\"<\")) {\n\t\t\t\t\t\tnewDisplayValue = \"\";\n\t\t\t\t\t}\n\t\t\t\t\tif (oldDisplayValue?.startsWith(\"<\")) {\n\t\t\t\t\t\toldDisplayValue = \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\tconst diffs = this.diff_match_patch.diff_main(\n\t\t\t\t\t\toldDisplayValue,\n\t\t\t\t\t\tnewDisplayValue,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t);\n\t\t\t\t\tthis.diff_match_patch.diff_cleanupEfficiency(diffs);\n\t\t\t\t\treturn this.diff_match_patch.diff_prettyHtml(diffs);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\n\t\tthis._comparisonForm = isc.PropertySheet.create({\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tnumCols: this.editable ? 5 : 4,\n\t\t\tcolWidths: this.editable ? [150, \"*\", 50, \"*\", 30] : [150, \"*\", \"*\", 30],\n\t\t\tborder: \"1px solid #A7ABB4\",\n\t\t\ttitleHoverHTML: hoverHTML,\n\t\t\tfields: [],\n\t\t});\n\n\t\tSKYVE.Util.loadJS(\n\t\t\t\"skyve/desktop/diff_match_patch.js?v=\" + SKYVE.Util.v,\n\t\t\t() => {\n\t\t\t\tthis._comparisonForm.diff_match_patch = new diff_match_patch();\n\t\t\t\tthis._comparisonForm.diff_match_patch.Diff_EditCost = 4;\n\t\t\t},\n\t\t);\n\n\t\tthis.members = [\n\t\t\tthis._comparisonTree,\n\t\t\tisc.VLayout.create({ overflow: \"auto\", members: [this._comparisonForm] }),\n\t\t];\n\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\tlet grids = this._view._grids[this._b];\n\t\tif (!grids) {\n\t\t\tgrids = {};\n\t\t\tthis._view._grids[this._b] = grids;\n\t\t}\n\t\tgrids[this.getID()] = this;\n\t},\n\n\t/**\n\t * Sets the data for the comparison tree.\n\t * @param {Array} data - the data to populate the tree with.\n\t */\n\tsetData: function (data) {\n\t\tthis._comparisonTree.setData(\n\t\t\tisc.Tree.create({\n\t\t\t\tmodelType: \"parent\",\n\t\t\t\tidField: \"bizId\",\n\t\t\t\tparentIdField: \"parent\",\n\t\t\t\tdata,\n\t\t\t}),\n\t\t);\n\t\tthis.setFormFields([]);\n\t},\n\n\t/**\n\t * Sets the fields for the form based on the given properties.\n\t * @param {Array} properties - the properties to populate the form with.\n\t */\n\tsetFormFields: function (properties) {\n\t\tconst fields = [\n\t\t\t{\n\t\t\t\ttype: \"blurb\",\n\t\t\t\talign: \"center\",\n\t\t\t\tcolSpan: 1,\n\t\t\t\tdefaultValue: \"Property\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tcellStyle: \"propSheetTitle\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: \"blurb\",\n\t\t\t\talign: \"center\",\n\t\t\t\tcolSpan: 1,\n\t\t\t\tdefaultValue: \"New\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tcellStyle: \"propSheetTitle\",\n\t\t\t},\n\t\t];\n\n\t\tif (this.editable) {\n\t\t\tfields.push({\n\t\t\t\ttitle: \"<<-\",\n\t\t\t\ttype: \"button\",\n\t\t\t\tclick() {\n\t\t\t\t\tfor (let i = 5; i < form.getFields().length - 4; i += 4) {\n\t\t\t\t\t\tconst old = form.getField(i + 2).getValue();\n\t\t\t\t\t\tform.getField(i).setValue(old ? old : \"\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\talign: \"center\",\n\t\t\t\tcellStyle: \"propSheetValue\",\n\t\t\t});\n\t\t}\n\n\t\tfields.push(\n\t\t\t{\n\t\t\t\ttype: \"blurb\",\n\t\t\t\talign: \"center\",\n\t\t\t\tcolSpan: 1,\n\t\t\t\tdefaultValue: \"Old\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tcellStyle: \"propSheetTitle\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: \"blurb\",\n\t\t\t\talign: \"center\",\n\t\t\t\tcolSpan: 1,\n\t\t\t\tdefaultValue: \"Diff\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tcellStyle: \"propSheetTitle\",\n\t\t\t},\n\t\t);\n\n\t\tproperties.forEach((prop) => {\n\t\t\tconst {\n\t\t\t\tname,\n\t\t\t\ttitle,\n\t\t\t\ttype,\n\t\t\t\teditorType,\n\t\t\t\tlength,\n\t\t\t\tvalueMap,\n\t\t\t\trequired,\n\t\t\t\tallowEmptyValue,\n\t\t\t} = prop;\n\n\t\t\tconst field = {\n\t\t\t\tname,\n\t\t\t\ttitle,\n\t\t\t\tshowTitle: true,\n\t\t\t\ttype,\n\t\t\t\twidth: \"*\",\n\t\t\t\tstartRow: true,\n\t\t\t\tendRow: false,\n\t\t\t\tcanEdit: this.editable,\n\t\t\t\tdefaultValue: prop.newValue,\n\t\t\t};\n\t\t\tconst oldField = {\n\t\t\t\tname: \"_old_\" + name,\n\t\t\t\tshowTitle: false,\n\t\t\t\ttype,\n\t\t\t\twidth: \"*\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tcanEdit: false,\n\t\t\t\tdefaultValue: prop.oldValue,\n\t\t\t};\n\n\t\t\tif (type === \"richText\" || editorType === \"richText\") {\n\t\t\t\tfield.controlGroups = [];\n\t\t\t\tfield.colSpan = 1;\n\t\t\t\toldField.controlGroups = [];\n\t\t\t\toldField.colSpan = 1;\n\t\t\t}\n\n\t\t\tif (editorType) {\n\t\t\t\tfield.editorType = editorType;\n\t\t\t\toldField.editorType = editorType;\n\t\t\t}\n\t\t\tif (length) {\n\t\t\t\tfield.length = length;\n\t\t\t\toldField.length = length;\n\t\t\t}\n\t\t\tif (valueMap) {\n\t\t\t\tfield.valueMap = valueMap;\n\t\t\t\toldField.valueMap = valueMap;\n\t\t\t}\n\t\t\tif (required) {\n\t\t\t\tfield.required = required;\n\t\t\t}\n\t\t\tif (allowEmptyValue) {\n\t\t\t\tfield.allowEmptyValue = allowEmptyValue;\n\t\t\t}\n\n\t\t\tfields.push(field);\n\n\t\t\tif (this.editable) {\n\t\t\t\tfields.push({\n\t\t\t\t\ttitle: \"<-\",\n\t\t\t\t\ttype: \"button\",\n\t\t\t\t\tclick() {\n\t\t\t\t\t\tconst old = form.getField(\"_old_\" + name).getValue();\n\t\t\t\t\t\tform.getField(name).setValue(old ? old : \"\");\n\t\t\t\t\t},\n\t\t\t\t\talign: \"center\",\n\t\t\t\t\tstartRow: false,\n\t\t\t\t\tendRow: false,\n\t\t\t\t\tcellStyle: \"propSheetValue\",\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfields.push(oldField);\n\n\t\t\tfields.push({\n\t\t\t\ttitle: \"...\",\n\t\t\t\ttype: \"button\",\n\t\t\t\tclick: function () {\n\t\t\t\t\tisc.say(this.form.titleHoverHTML(this.form.getField(name)), null, {\n\t\t\t\t\t\ttitle: \"Diff\",\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\talign: \"center\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tcellStyle: \"propSheetValue\",\n\t\t\t});\n\t\t});\n\n\t\tif (this.editable) {\n\t\t\tfields.push(\n\t\t\t\t{\n\t\t\t\t\ttype: \"spacer\",\n\t\t\t\t\tcolSpan: 5,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Apply Changes\",\n\t\t\t\t\ttype: \"button\",\n\t\t\t\t\tcolSpan: 4,\n\t\t\t\t\tstartRow: false,\n\t\t\t\t\tendRow: true,\n\t\t\t\t\talign: \"right\",\n\t\t\t\t\tclick: function (form, item) {\n\t\t\t\t\t\tconst values = form.getValues();\n\t\t\t\t\t\tconst properties = this._comparisonTree.getSelectedRecord().properties;\n\n\t\t\t\t\t\tproperties.forEach((property) => {\n\t\t\t\t\t\t\tproperty.newValue = values[property.name];\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tisc.showPrompt('<span style=\"font-size:medium\">Changes Applied</span>');\n\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tisc.clearPrompt();\n\t\t\t\t\t\t}, 500);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"spacer\",\n\t\t\t\t\tcolSpan: 5,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tthis._comparisonForm.setFields(fields);\n\t\tthis._comparisonForm.clearValues();\n\t},\n\n\t/**\n\t * Retrieves the JSON data from the comparison editor.\n\t * @returns {Object} the data in JSON format.\n\t * @memberof BizComparison\n\t */\n\tgetData: function () {\n\t\tconst result = this._getData(\n\t\t\tthis._comparisonTree.getData().getRoot().children[0],\n\t\t);\n\t\tdelete result._b;\n\t\tdelete result._t;\n\t\treturn result;\n\t},\n\n\t/**\n\t * Recursively builds the data structure from the tree node.\n\t * @param {Object} treeNode - the tree node to convert.\n\t * @returns {Object} the data structure for the node.\n\t * @private\n\t */\n\t_getData: function (treeNode) {\n\t\tconst result = {\n\t\t\tbizId: treeNode.bizId,\n\t\t\t_b: treeNode._b,\n\t\t\t_t: treeNode._t,\n\t\t};\n\n\t\ttreeNode.properties.forEach((property) => {\n\t\t\tresult[property.name] = property.newValue;\n\t\t});\n\n\t\tconst children = treeNode.children;\n\t\tif (children) {\n\t\t\tchildren.forEach((child) => {\n\t\t\t\tconst childResult = this._getData(child);\n\t\t\t\tconst binding = childResult._b;\n\t\t\t\tconst referenceType = childResult._t;\n\t\t\t\tdelete childResult._b;\n\t\t\t\tdelete childResult._t;\n\n\t\t\t\tconst existing = result[binding];\n\t\t\t\tif (existing) {\n\t\t\t\t\tif (!Array.isArray(existing)) {\n\t\t\t\t\t\tresult[binding] = [existing];\n\t\t\t\t\t}\n\t\t\t\t\tresult[binding].push(childResult);\n\t\t\t\t} else {\n\t\t\t\t\tresult[binding] = [childResult];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t},\n});\n\n// TODO: CheckMembership\n// TODO: PickView\n\n/**\n * Implements the BizDynamicImage UI component.\n * Extends VLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizDynamicImage\", \"VLayout\");\n\nisc.BizDynamicImage.addMethods({\n\tinitWidget() {\n\t\tthis.overflow = \"hidden\";\n\t\tthis.wZoom = 100;\n\t\tthis.hZoom = 100;\n\n\t\t// TODO: Initialize parameters add properties dynamically based on parameters\n\n\t\tthis.members = [];\n\t\tthis.mouseWheelTimer = null;\n\n\t\t// Create context menu for image controls\n\t\tthis.contextMenu = isc.Menu.create({\n\t\t\tshowShadow: true,\n\t\t\tshadowDepth: 10,\n\t\t\tdata: this._createContextMenuData(),\n\t\t});\n\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n\n\t/**\n\t * Creates the context menu data for zoom and other actions.\n\t * @returns {Array} the context menu data structure.\n\t */\n\t_createContextMenuData: function () {\n\t\tconst zoomLevels = [50, 75, 100, 125, 150, 175, 200, 300, 400, 500];\n\t\tconst zoomMenuItems = zoomLevels.map((level) => ({\n\t\t\ttitle: `${level}%`,\n\t\t\tclick: () => this._zoom(level),\n\t\t}));\n\n\t\treturn [\n\t\t\t{\n\t\t\t\ttitle: \"Size\",\n\t\t\t\ticon: \"icons/mag.png\",\n\t\t\t\tsubmenu: zoomMenuItems,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Enlarge\",\n\t\t\t\ticon: \"icons/magIn.png\",\n\t\t\t\tclick: () => this._zoom(this.wZoom + 10),\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Reduce\",\n\t\t\t\ticon: \"icons/magOut.png\",\n\t\t\t\tclick: () => this._zoom(this.wZoom - 10),\n\t\t\t},\n\t\t\t{ isSeparator: true },\n\t\t\t{\n\t\t\t\ttitle: \"Open\",\n\t\t\t\ticon: \"zoom.gif\",\n\t\t\t\tclick: () => this._open(),\n\t\t\t},\n\t\t\t{ isSeparator: true },\n\t\t\t{\n\t\t\t\ttitle: \"Refresh\",\n\t\t\t\ticon: \"refresh.png\",\n\t\t\t\tclick: () => this.rerender(),\n\t\t\t},\n\t\t];\n\t},\n\n\t/**\n\t * Adjusts the zoom level of the image.\n\t * @param {number} zoomLevel - the desired zoom level.\n\t * @param {boolean} [throttle=false] - whether to throttle the rerender call.\n\t */\n\t_zoom: function (zoomLevel, throttle = false) {\n\t\tif (zoomLevel > 0) {\n\t\t\tthis.wZoom = zoomLevel;\n\t\t\tthis.hZoom = zoomLevel;\n\n\t\t\tif (throttle) {\n\t\t\t\tif (this.mouseWheelTimer) {\n\t\t\t\t\tclearTimeout(this.mouseWheelTimer);\n\t\t\t\t}\n\t\t\t\tthis.mouseWheelTimer = setTimeout(() => {\n\t\t\t\t\tthis.rerender();\n\t\t\t\t}, 250);\n\t\t\t} else {\n\t\t\t\tthis.rerender();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Opens the image in a new window.\n\t */\n\t_open: function () {\n\t\tconst image = isc.BizDynamicImage.create({\n\t\t\tname: this.name,\n\t\t\tmoduleDotDocument: this.moduleDotDocument,\n\t\t\tformat: this.format,\n\t\t\t_view: this._view,\n\t\t});\n\t\tisc.WindowStack.popup(null, \"Image\", true, [image]);\n\t\timage.rerender();\n\t},\n\n\t/**\n\t * Handles resizing of the widget.\n\t */\n\tresized: function () {\n\t\tthis.rerender();\n\t},\n\n\t/**\n\t * Rerenders the image with updated dimensions and zoom level.\n\t */\n\trerender: function () {\n\t\tconst contextValue = this._view._vm.getValue(\"_c\");\n\t\tif (!contextValue) return; // Skip if no context value is available\n\n\t\tthis.mouseWheelTimer = null;\n\t\tthis._clearExistingImage();\n\n\t\tconst baseValue = this._view._b;\n\t\tconst { width, height } = this._calculateImageDimensions();\n\t\tconst imageSrc = this._generateImageSrc(\n\t\t\twidth,\n\t\t\theight,\n\t\t\tcontextValue,\n\t\t\tbaseValue,\n\t\t);\n\n\t\tthis._img = this._createImageElement(width, height, imageSrc);\n\t\tif (this.members) {\n\t\t\tthis.addMember(this._img);\n\t\t}\n\t},\n\n\t/**\n\t * Clears the existing image from the widget.\n\t */\n\t_clearExistingImage: function () {\n\t\tif (this.members && this.members.length === 1) {\n\t\t\tthis.removeMember(0);\n\t\t\tif (this._img) {\n\t\t\t\tthis._img.destroy();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Calculates the dimensions of the image.\n\t * @returns {Object} An object containing the calculated width and height.\n\t */\n\t_calculateImageDimensions: function () {\n\t\tconst width = this.imageWidth ? this.imageWidth : this.getVisibleWidth() - 20; // -20 for padding\n\t\tconst height = this.imageHeight\n\t\t\t? this.imageHeight\n\t\t\t: this.getVisibleHeight() - 20; // -20 for padding\n\t\treturn { width, height };\n\t},\n\n\t/**\n\t * Generates the image source URL.\n\t * @param {number} width - the width of the image.\n\t * @param {number} height - the height of the image.\n\t * @param {string} contextValue - the context value.\n\t * @param {string} baseValue - the base value.\n\t * @returns {string} the generated image source URL.\n\t */\n\t_generateImageSrc: function (width, height, contextValue, baseValue) {\n\t\tlet src = `dynamic.${this.format}?_doc=${this.moduleDotDocument}&_n=${this.name}`;\n\t\tif (this.imageWidth) src += `&_w=${this.imageWidth}`;\n\t\tif (this.imageHeight) src += `&_h=${this.imageHeight}`;\n\t\tsrc += `&_w=${width}&_h=${height}&_wz=${this.wZoom}&_hz=${this.hZoom}`;\n\t\tif (contextValue) src += `&_c=${contextValue}`;\n\t\tif (baseValue) src += `&_b=${baseValue.replaceAll(\"_\", \".\")}`;\n\t\tsrc += `&_ts=${new Date().getTime()}`;\n\t\treturn src;\n\t},\n\n\t/**\n\t * Creates an image element with the specified dimensions and source.\n\t * @param {number} width - the width of the image.\n\t * @param {number} height - the height of the image.\n\t * @param {string} src - the image source URL.\n\t * @returns {Object} the created image element.\n\t */\n\t_createImageElement: function (width, height, src) {\n\t\treturn isc.Img.create({\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\toverflow: \"hidden\",\n\t\t\timageWidth: Math.round((width * this.wZoom) / 100.0),\n\t\t\timageHeight: Math.round((height * this.hZoom) / 100.0),\n\t\t\timageType: \"center\",\n\t\t\tcanDrag: true,\n\t\t\tcursor: \"all-scroll\",\n\t\t\tdragAppearance: \"none\",\n\t\t\tdragStart: function () {\n\t\t\t\tthis.startScrollLeft = this.getScrollLeft();\n\t\t\t\tthis.startScrollTop = this.getScrollTop();\n\t\t\t},\n\t\t\tdragMove: function () {\n\t\t\t\tthis.scrollTo(\n\t\t\t\t\tthis.startScrollLeft - isc.Event.lastEvent.x + isc.Event.mouseDownEvent.x,\n\t\t\t\t\tthis.startScrollTop - isc.Event.lastEvent.y + isc.Event.mouseDownEvent.y,\n\t\t\t\t);\n\t\t\t},\n\t\t\tmouseWheel: () => {\n\t\t\t\tconst wheelDelta = isc.EventHandler.getWheelDelta();\n\t\t\t\tthis._zoom(Math.round(this.wZoom - wheelDelta * 10.0), true); // Throttle this event\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tdoubleClick: () => this._open(),\n\t\t\tappImgDir: \"../\",\n\t\t\tsrc,\n\t\t});\n\t},\n});\n\n/**\n * Implements the BizImage UI component.\n * Extends Img from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizImage\", \"Img\");\n\nisc.BizImage.addMethods({\n\tinitWidget: function () {\n\t\tthis.imageType = \"stretch\";\n\n\t\t// Construct the image source URL using template literals\n\t\tthis.src = `resources?_n=${this.file}&_doc=${this.modoc}&_b=null`;\n\n\t\t// Call the parent class's initWidget method\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n});\n\n/**\n * Implements the BizLabel UI component.\n * Extends Label from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizLabel\", \"Label\");\n\nisc.BizLabel.addMethods({\n\tinitWidget: function () {\n\t\t// Determine if the label should auto-fit based on width and height arguments\n\t\tthis.autoFit = !(arguments[0].width || arguments[0].height);\n\n\t\t// Set the label's content if a value is provided\n\t\tif (this.value) {\n\t\t\tthis.setContents(this.value);\n\t\t}\n\n\t\t// Set the label's alignment if textAlign is provided\n\t\tif (this.textAlign) {\n\t\t\tthis.setAlign(this.textAlign);\n\t\t}\n\n\t\t// Call the parent class's initWidget method\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n});\n\n/**\n * Implements the BizChart UI component.\n * Extends VLayou from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizChart\", \"Canvas\");\n\nisc.BizChart.addClassMethods({\n\tloadingChartJS: false,\n\n\t/**\n\t * Loads Chart.js and its dependencies asynchronously.\n\t * If Chart.js is already loading, it retries after a short delay.\n\t */\n\tloadChartJS: function () {\n\t\tif (isc.BizChart.loadingChartJS) {\n\t\t\tsetTimeout(() => isc.BizChart.loadChartJS(), 100);\n\t\t} else if (!window.Chart) {\n\t\t\tisc.BizChart.loadingChartJS = true;\n\n\t\t\t// Load moment.js and then Chart.js\n\t\t\tSKYVE.Util.loadJS(\n\t\t\t\t`jakarta.faces.resource/moment/moment.js.xhtml?ln=primefaces&v=${SKYVE.Util.v}`,\n\t\t\t\t() => {\n\t\t\t\t\tSKYVE.Util.loadJS(\n\t\t\t\t\t\t`jakarta.faces.resource/chartjs/chartjs.js.xhtml?ln=primefaces&v=${SKYVE.Util.v}`,\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tisc.BizChart.loadingChartJS = false;\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t},\n\n\tv: 0,\n});\n\nisc.BizChart.addMethods({\n\tinit: function (config) {\n\t\tif (!window.Chart) {\n\t\t\tisc.BizChart.loadChartJS();\n\t\t}\n\n\t\t// Set default width and height if not provided\n\t\tif (!config.width) {\n\t\t\tthis.width = \"100%\";\n\t\t}\n\t\tif (!config.height) {\n\t\t\tthis.height = \"100%\";\n\t\t}\n\n\t\t// Generate a unique ID for the chart\n\t\tthis.ID = `bizChart${isc.BizChart.v++}`;\n\t\tthis.redrawOnResize = false;\n\t\tthis._refreshing = false; // Prevent multiple refreshes\n\t\tthis._resizeChartCalled = false; // Throttle resizing events\n\n\t\t// Call the parent class's init method\n\t\tthis.Super(\"init\", arguments);\n\t},\n\n\t/**\n\t * Returns the inner HTML for the chart canvas.\n\t * @returns {string} the HTML string for the canvas element.\n\t */\n\tgetInnerHTML: function () {\n\t\treturn `<canvas id=\"${this.ID}_chart\" />`;\n\t},\n\n\t/**\n\t * Handles the resized event with throttling to avoid excessive calls.\n\t */\n\tresized: function () {\n\t\tif (!this._resizeChartCalled) {\n\t\t\tthis.delayCall(\"_resizeChart\", arguments, 100);\n\t\t}\n\t\tthis._resizeChartCalled = true;\n\t},\n\n\t/**\n\t * Resizes the chart canvas to fit the widget's dimensions.\n\t */\n\t_resizeChart: function () {\n\t\tif (this.chart) {\n\t\t\tconst width = this.getWidth();\n\t\t\tconst height = this.getHeight();\n\t\t\tconst canvas = this.chart.canvas;\n\n\t\t\t// Update canvas dimensions\n\t\t\tcanvas.parentNode.style.width = `${width}px`;\n\t\t\tcanvas.parentNode.style.height = `${height}px`;\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\t\t\tcanvas.style.width = `${width}px`;\n\t\t\tcanvas.style.height = `${height}px`;\n\n\t\t\t// Update the chart\n\t\t\tthis.chart.update();\n\t\t\tthis._resizeChartCalled = false;\n\t\t} else {\n\t\t\tthis.delayCall(\"_resizeChart\", arguments, 100);\n\t\t}\n\t},\n\n\t/**\n\t * Sets the data source for the chart.\n\t * @param {string} modelName - the name of the model providing the data.\n\t */\n\tsetDataSource: function (modelName) {\n\t\tif (window.Chart && this.isDrawn()) {\n\t\t\tthis._modelName = modelName;\n\n\t\t\t// Assign this chart to the edit view's _grids property\n\t\t\tconst grids = this._view._grids[modelName] || {};\n\t\t\tthis._view._grids[modelName] = grids;\n\t\t\tgrids[this.getID()] = this;\n\n\t\t\tthis._refresh();\n\t\t} else {\n\t\t\tthis.delayCall(\"setDataSource\", arguments, 100);\n\t\t}\n\t},\n\n\t/**\n\t * Rerenders the chart by refreshing its data.\n\t */\n\trerender: function () {\n\t\tthis._refresh();\n\t},\n\n\t/**\n\t * Refreshes the chart data by making an XHR request to the server.\n\t */\n\t_refresh: function () {\n\t\tif (this._refreshing || !this.isDrawn() || !this.isVisible()) {\n\t\t\treturn; // Skip if already refreshing, not drawn, or invisible\n\t\t}\n\n\t\tconst url = `${SKYVE.Util.CONTEXT_URL}chart?`;\n\t\tif (!this._modelName) {\n\t\t\treturn; // Skip if no model name is set\n\t\t}\n\n\t\tconst instance = this._view.gather(false);\n\t\tconst requestUrl = `${url}_c=${instance._c}&t=${this.chartType}&_m=${this._modelName}`;\n\n\t\t// Ensure only one refresh occurs at a time\n\t\tthis._refreshing = true;\n\n\t\tisc.RPCManager.sendRequest({\n\t\t\tshowPrompt: true,\n\t\t\tevalResult: true,\n\t\t\tactionURL: requestUrl,\n\t\t\thttpMethod: \"GET\",\n\t\t\tcallback: (rpcResponse, data) => {\n\t\t\t\ttry {\n\t\t\t\t\tthis._update(data);\n\t\t\t\t} finally {\n\t\t\t\t\tthis._refreshing = false;\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t},\n\n\t/**\n\t * Updates the chart with new data.\n\t * @param {Object} data - the data received from the server.\n\t */\n\t_update: function (data) {\n\t\tif (data.config) {\n\t\t\t// Initialize chart config if not already set\n\t\t\tthis.chartConfig = this.chartConfig || {};\n\t\t\tthis.chartConfig.type = data.config.type;\n\t\t\tthis.chartConfig.data = data.config.data;\n\t\t\tthis.chartConfig.options = data.config.options || {};\n\n\t\t\t// Ensure responsive and aspect ratio settings\n\t\t\tthis.chartConfig.options.responsive = true;\n\t\t\tthis.chartConfig.options.maintainAspectRatio = false;\n\n\t\t\tif (this.chart) {\n\t\t\t\tthis.chart.update(); // Update existing chart\n\t\t\t} else {\n\t\t\t\tif (!this.isDrawn()) {\n\t\t\t\t\tthis.draw(); // Ensure the widget is drawn\n\t\t\t\t}\n\t\t\t\tconst chartCanvas = document.getElementById(`${this.ID}_chart`);\n\t\t\t\tthis.chart = new Chart(chartCanvas, this.chartConfig); // Create new chart\n\t\t\t}\n\t\t}\n\t},\n});\n\n/**\n * Implements the BizProgressBar UI component.\n * Extends ProgressBar from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizProgressBar\", \"ProgressBar\");\n","isc.BizUtil.addClassProperties({\n\theaderTemplate: null,\n\tuserContactImageUrl: null,\n\n\t/**\n\t * Initializes the layout and components for the application.\n\t * @param {string} logoSrc - source URL for the logo image.\n\t * @param {Array} menuConfig - configuration for the menu items.\n\t * @param {Array} dataSourceConfig - configuration for the data sources.\n\t */\n\tinit: function (logoSrc, menuConfig, dataSourceConfig) {\n\t\tthis.createBodyLayout(logoSrc);\n\t\tthis.createMenuSections(menuConfig);\n\t\tthis.createDataSources(dataSourceConfig);\n\t\tthis.addListViewToDetails();\n\n\t\tthis.createTextSearchComponents();\n\t},\n\n\t/**\n\t * Creates the main body layout with left-hand menu and right-hand details panel.\n\t * @param {string} logoSrc - source URL for the logo image.\n\t */\n\tcreateBodyLayout: function (logoSrc) {\n\t\tisc.HLayout.create({\n\t\t\tID: \"body\",\n\t\t\tautoDraw: true,\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tbackgroundColor: \"whitesmoke\",\n\t\t\tpadding: 10,\n\t\t\tmembers: [this.createLeftMenuPanel(logoSrc), this.createRightDetailsPanel()],\n\t\t});\n\t},\n\n\t/**\n\t * Creates the left-hand menu panel with logo and accordion menu.\n\t * @param {string} logoSrc - source URL for the logo image.\n\t * @returns {isc.VLayout} the left-hand menu panel.\n\t */\n\tcreateLeftMenuPanel: function (logoSrc) {\n\t\treturn isc.VLayout.create({\n\t\t\tID: \"lhsmenu\",\n\t\t\twidth: \"30%\",\n\t\t\tshowResizeBar: true,\n\t\t\tbackgroundColor: \"white\",\n\t\t\tborder: \"1px solid #c0c0c0\",\n\t\t\tshowShadow: true,\n\t\t\tshadowSoftness: 10,\n\t\t\tshadowOffset: 0,\n\t\t\tmembers: [\n\t\t\t\tisc.Img.create({\n\t\t\t\t\timageType: \"center\",\n\t\t\t\t\tsrc: logoSrc,\n\t\t\t\t\toverflow: \"clip-h\",\n\t\t\t\t\tstyleName: \"logo\",\n\t\t\t\t\tshowDisabled: false,\n\t\t\t\t\tshowDown: false,\n\t\t\t\t\tshowFocus: false,\n\t\t\t\t\tshowFocused: false,\n\t\t\t\t\tshowFocusedAsOver: false,\n\t\t\t\t\tshowRollOver: false,\n\t\t\t\t}),\n\t\t\t\tisc.SectionStack.create({\n\t\t\t\t\tID: \"adminStack\",\n\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\tvisibilityMode: \"mutex\",\n\t\t\t\t\tanimateSections: false,\n\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\theaderHeight: 30,\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t},\n\n\t/**\n\t * Creates the right-hand details panel.\n\t * @returns {isc.VLayout} the right-hand details panel.\n\t */\n\tcreateRightDetailsPanel: function () {\n\t\treturn isc.VLayout.create({\n\t\t\tID: \"details\",\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tbackgroundColor: \"whitesmoke\",\n\t\t\tborder: \"1px solid #c0c0c0\",\n\t\t\tshowShadow: true,\n\t\t\tshadowSoftness: 10,\n\t\t\tshadowOffset: 0,\n\t\t});\n\t},\n\n\t/**\n\t * Creates menu sections based on the provided menu configuration.\n\t * @param {Array} menuConfig - configuration for the menu items.\n\t */\n\tcreateMenuSections: function (menuConfig) {\n\t\tconst adminStack = isc.Canvas.getById(\"adminStack\");\n\n\t\tmenuConfig.forEach((item) => {\n\t\t\tconst menu = this.createMenuTreeGrid(item);\n\t\t\tadminStack.addSection({\n\t\t\t\ttitle: item.title,\n\t\t\t\texpanded: item.open,\n\t\t\t\titems: [menu],\n\t\t\t});\n\t\t\tmenu.getData().openAll();\n\t\t});\n\t},\n\n\t/**\n\t * Creates a TreeGrid for a menu item.\n\t * @param {Object} item - configuration for the menu item.\n\t * @returns {isc.TreeGrid} the created TreeGrid.\n\t */\n\tcreateMenuTreeGrid: function (item) {\n\t\treturn isc.TreeGrid.create({\n\t\t\tID: `${item.name}Tree`,\n\t\t\tshowHeader: false,\n\t\t\tshowOpenIcons: false,\n\t\t\tshowDropIcons: false,\n\t\t\tshowConnectors: true,\n\t\t\tshowRollOver: false,\n\t\t\tleaveScrollbarGap: false,\n\t\t\tnodeIcon: null,\n\t\t\tfolderIcon: null,\n\t\t\tclosedIconSuffix: \"\",\n\t\t\tcanDragRecordsOut: true,\n\t\t\tdragDataAction: \"copy\",\n\t\t\tdata: isc.Tree.create({\n\t\t\t\tmodelType: \"children\",\n\t\t\t\tnameProperty: \"desc\",\n\t\t\t\tchildrenProperty: \"sub\",\n\t\t\t\troot: item.root,\n\t\t\t}),\n\t\t\tleafClick: (viewer, leaf, recordNum) =>\n\t\t\t\tthis.handleMenuItemClick(viewer, leaf, recordNum),\n\t\t});\n\t},\n\n\t/**\n\t * Handles click events on menu items.\n\t * @param {isc.TreeGrid} viewer - the TreeGrid that triggered the event.\n\t * @param {Object} leaf - the clicked leaf node.\n\t * @param {number} recordNum - the record number of the clicked leaf.\n\t */\n\thandleMenuItemClick: function (viewer, leaf, recordNum) {\n\t\tconst details = isc.Canvas.getById(\"details\");\n\t\tif (leaf.ref === \"link\") {\n\t\t\twindow.location = leaf.name;\n\t\t} else if (leaf.ref === \"edit\") {\n\t\t\tthis.handleEditView(leaf, viewer, details);\n\t\t} else {\n\t\t\tthis.handleListView(leaf, viewer, details);\n\t\t}\n\t},\n\n\t/**\n\t * Handles the display of edit views.\n\t * @param {Object} leaf - the clicked leaf node.\n\t * @param {isc.TreeGrid} viewer - the TreeGrid that triggered the event.\n\t * @param {isc.VLayout} details - the details panel.\n\t */\n\thandleEditView: function (leaf, viewer, details) {\n\t\tif (isc.BizUtil._currentView === isc.ListView.contents) {\n\t\t\tdetails.hideMember(isc.ListView.contents);\n\t\t} else if (isc.BizUtil._currentView) {\n\t\t\tif (details.hasMember(isc.BizUtil._currentView)) {\n\t\t\t\tdetails.hideMember(isc.BizUtil._currentView);\n\t\t\t}\n\t\t\tisc.BizUtil.relinquishEditView(isc.BizUtil._currentView);\n\t\t}\n\n\t\tisc.BizUtil.getEditView(\n\t\t\tleaf.module ? leaf.module : viewer.data.root.name,\n\t\t\tleaf.name,\n\t\t\t(view) => {\n\t\t\t\tdetails.addMember(view);\n\t\t\t\tisc.BizUtil._currentView = view;\n\t\t\t\tview.newInstance();\n\t\t\t},\n\t\t);\n\t},\n\n\t/**\n\t * Handles the display of list views.\n\t * @param {Object} leaf - the clicked leaf node.\n\t * @param {isc.TreeGrid} viewer - the TreeGrid that triggered the event.\n\t * @param {isc.VLayout} details - the details panel.\n\t */\n\thandleListView: function (leaf, viewer, details) {\n\t\tif (isc.BizUtil._currentView !== isc.ListView.contents) {\n\t\t\tif (isc.BizUtil._currentView) {\n\t\t\t\tif (details.hasMember(isc.BizUtil._currentView)) {\n\t\t\t\t\tdetails.hideMember(isc.BizUtil._currentView);\n\t\t\t\t}\n\t\t\t\tisc.BizUtil.relinquishEditView(isc.BizUtil._currentView);\n\t\t\t}\n\t\t\tisc.BizUtil._currentView = isc.ListView.contents;\n\t\t\tdetails.showMember(isc.ListView.contents);\n\t\t}\n\n\t\tconst dataSourceName = `${viewer.data.root.name}_${leaf.name}`;\n\t\tswitch (leaf.ref) {\n\t\t\tcase \"grid\":\n\t\t\t\tisc.ListView.setGridDataSource(dataSourceName, leaf.config);\n\t\t\t\tbreak;\n\t\t\tcase \"cal\":\n\t\t\t\tisc.ListView.setCalendarDataSource(dataSourceName, leaf.config);\n\t\t\t\tbreak;\n\t\t\tcase \"tree\":\n\t\t\t\tisc.ListView.setTreeDataSource(dataSourceName, leaf.config);\n\t\t\t\tbreak;\n\t\t\tcase \"map\":\n\t\t\t\tisc.ListView.setMapDataSource(dataSourceName, leaf.config);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\talert(`Menu ref of ${leaf.ref} is unknown`);\n\t\t}\n\t},\n\n\t/**\n\t * Creates data sources based on the provided configuration.\n\t * @param {Array} dataSourceConfig - configuration for the data sources.\n\t */\n\tcreateDataSources: function (dataSourceConfig) {\n\t\tdataSourceConfig.forEach((item) => {\n\t\t\titem.fields.add({ name: \"operator\", type: \"text\", hidden: true });\n\t\t\titem.fields.add({ name: \"criteria\", type: \"text\", hidden: true });\n\t\t\titem.fields.add({ name: \"bizId\", primaryKey: true, hidden: true });\n\t\t\titem.fields.add({ name: \"bizLock\", hidden: true });\n\t\t\titem.fields.addAt(\n\t\t\t\t{\n\t\t\t\t\tname: \"bizTagged\",\n\t\t\t\t\ttitle: \"Tag\",\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tvalidOperators: [\"equals\"],\n\t\t\t\t},\n\t\t\t\t0,\n\t\t\t);\n\t\t\titem.fields.addAt(\n\t\t\t\t{\n\t\t\t\t\tname: \"bizFlagComment\",\n\t\t\t\t\ttitle: \"Flag\",\n\t\t\t\t\tcanFilter: SKYVE.Util.canFlag,\n\t\t\t\t},\n\t\t\t\t1,\n\t\t\t);\n\n\t\t\tisc.RestDataSource.create({\n\t\t\t\tID: item.ID,\n\t\t\t\tdataFormat: \"json\",\n\t\t\t\tjsonPrefix: \"\",\n\t\t\t\tjsonSuffix: \"\",\n\t\t\t\tdataURL: \"smartlist\",\n\t\t\t\toperationBindings: [\n\t\t\t\t\t{ operationType: \"fetch\", dataProtocol: \"postParams\" },\n\t\t\t\t\t{ operationType: \"update\", dataProtocol: \"postParams\" },\n\t\t\t\t\t{ operationType: \"add\", dataProtocol: \"postParams\" },\n\t\t\t\t\t{ operationType: \"remove\", dataProtocol: \"postParams\" },\n\t\t\t\t],\n\t\t\t\tcriteriaPolicy: \"dropOnChange\",\n\t\t\t\ttitle: item.title,\n\t\t\t\tmodoc: item.modoc,\n\t\t\t\ticon: item.icon,\n\t\t\t\tfontIcon: item.fontIcon,\n\t\t\t\taggregate: item.aggregate,\n\t\t\t\tcanCreate: item.canCreate,\n\t\t\t\tcanUpdate: item.canUpdate,\n\t\t\t\tcanDelete: item.canDelete,\n\t\t\t\tcellHeight: item.cellHeight,\n\t\t\t\tfields: item.fields,\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Adds the list view to the details panel.\n\t */\n\taddListViewToDetails: function () {\n\t\tconst details = isc.Canvas.getById(\"details\");\n\t\tisc.BizUtil._currentView = isc.ListView.contents;\n\t\tdetails.addMember(isc.ListView.contents);\n\t\tdetails.hideMember(isc.ListView.contents);\n\t},\n\n\t/**\n\t * Creates and initializes the text search components.\n\t */\n\tcreateTextSearchComponents: function () {\n\t\tisc.RestDataSource.create({\n\t\t\tID: \"textSearch\",\n\t\t\tdataFormat: \"json\",\n\t\t\tdataURL: \"smartsearch\",\n\t\t\tcriteriaPolicy: \"dropOnChange\",\n\t\t\tfields: [\n\t\t\t\t{ name: \"icon\", title: \"Icon\" },\n\t\t\t\t{ name: \"doc\", title: \"Document\" },\n\t\t\t\t{ name: \"bizKey\", title: \"Description\" },\n\t\t\t\t{ name: \"excerpt\", title: \"Excerpt\" },\n\t\t\t\t{ name: \"score\", title: \"Score (%)\", type: \"integer\" },\n\t\t\t\t{ name: \"data\", type: \"link\", title: \"Data\", target: \"_self\" },\n\t\t\t\t{ name: \"content\", type: \"link\", title: \"Content\", target: \"_blank\" },\n\t\t\t],\n\t\t});\n\n\t\tisc.DynamicForm.create({\n\t\t\tID: \"textSearchForm\",\n\t\t\tmargin: 2,\n\t\t\twidth: 550,\n\t\t\theight: 40,\n\t\t\tnumCols: 3,\n\t\t\tcolWidths: [250, \"*\", 100],\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tname: \"query\",\n\t\t\t\t\ttitle: \"Type and press search or enter\",\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t\tkeyPress: function (item, form, keyName) {\n\t\t\t\t\t\tif (keyName === \"Enter\" && form.validate(false)) {\n\t\t\t\t\t\t\titem.form.doSearch();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: true,\n\t\t\t\t\tvalidators: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclientOnly: true,\n\t\t\t\t\t\t\ttype: \"lengthRange\",\n\t\t\t\t\t\t\tmin: 4,\n\t\t\t\t\t\t\terrorMessage: \"At least 4 characters are required for a search\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"searchBtn\",\n\t\t\t\t\tstartRow: false,\n\t\t\t\t\ttitle: \"Search\",\n\t\t\t\t\ttype: \"button\",\n\t\t\t\t\taccessKey: \"Enter\",\n\t\t\t\t\tclick: function () {\n\t\t\t\t\t\tthis.form.doSearch();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ name: \"message\", type: \"blurb\", startRow: true, colSpan: 3 },\n\t\t\t],\n\t\t\tdoSearch: function () {\n\t\t\t\tif (this.validate()) {\n\t\t\t\t\tconst message = this.getItem(\"message\");\n\t\t\t\t\tmessage.setValue(\"\");\n\t\t\t\t\ttextSearchResults.filterData(textSearchForm.getValuesAsCriteria());\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tisc.ListGrid.create({\n\t\t\tID: \"textSearchResults\",\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\talternateRecordStyles: true,\n\t\t\tdataSource: \"textSearch\",\n\t\t\tdataFetchMode: \"basic\", // no paging\n\t\t\twrapCells: true,\n\t\t\tfixedRecordHeights: false,\n\t\t\tcanEdit: false,\n\t\t\tcanFreezeFields: false,\n\t\t\tcanGroupBy: false,\n\t\t\tcanPickFields: false,\n\t\t\tcanSort: false,\n\t\t\tfields: [\n\t\t\t\t{ name: \"icon\", align: \"center\", width: 30 },\n\t\t\t\t{ name: \"doc\", width: \"15%\" },\n\t\t\t\t{ name: \"bizKey\", width: \"30%\" },\n\t\t\t\t{ name: \"excerpt\", width: \"55%\" },\n\t\t\t\t{ name: \"score\", width: 75 },\n\t\t\t\t{ name: \"data\", width: 40, align: \"center\", linkText: \"Data\" },\n\t\t\t\t{ name: \"content\", width: 60, align: \"center\", linkText: \"Content\" },\n\t\t\t],\n\t\t\tdataProperties: {\n\t\t\t\ttransformData: function (newData, dsResponse) {\n\t\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t\tconst summary = newData.pop();\n\t\t\t\t\t\tconst message = textSearchForm.getItem(\"message\");\n\t\t\t\t\t\tlet response = `Query took ${summary.time} seconds.`;\n\t\t\t\t\t\tif (summary.suggestion) {\n\t\t\t\t\t\t\tresponse += `  Did you mean <a href=\"#\" onclick=\"var q = textSearchForm.getItem('query'); q.setValue('${summary.suggestion}'); q.focusInItem(); return false;\">${summary.suggestion}</a>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmessage.setValue(response);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\n\t/**\n\t * Pops up the search window.\n\t */\n\tpopupSearch: function () {\n\t\tisc.WindowStack.popup(null, \"Text Search\", true, [\n\t\t\ttextSearchForm,\n\t\t\ttextSearchResults,\n\t\t]);\n\t\ttextSearchForm.focusInItem(\"query\");\n\t\ttextSearchForm.clearValues();\n\t},\n\n\t/**\n\t * Shows the portal view.\n\t */\n\tshowPortal: function () {\n\t\tconst details = isc.Canvas.getById(\"details\");\n\n\t\tif (isc.BizUtil._currentView !== isc.ListView.contents) {\n\t\t\tif (isc.BizUtil._currentView) {\n\t\t\t\tif (details.hasMember(isc.BizUtil._currentView)) {\n\t\t\t\t\tdetails.hideMember(isc.BizUtil._currentView);\n\t\t\t\t}\n\t\t\t\tisc.BizUtil.relinquishEditView(isc.BizUtil._currentView);\n\t\t\t}\n\t\t\tisc.BizUtil._currentView = isc.ListView.contents;\n\t\t\tdetails.showMember(isc.ListView.contents);\n\t\t}\n\n\t\tisc.ListView.showPortal();\n\t},\n\n\t/**\n\t * Shows the help window.\n\t * @param {string} url - the URL to the help documentation.\n\t */\n\tshowHelp: function (url) {\n\t\tconst helpUrl = url || \"https://skyvers.github.io/skyve-user-guide/\";\n\t\tisc.BizUtil.popupFrame(helpUrl, \"Skyve Help\", 1024, 768);\n\t},\n});\n"],
"names":["window","SKYVE","Util","load","node","callback","readyState","onreadystatechange","node.onreadystatechange","onload","headNode","document","getElementsByTagName","appendChild","customer","v","googleMapsV3ApiKey","ckEditorConfigFileUrl","mapCentre","mapZoom","CONTEXT_URL","location","substring","context","lastIndexOf","allowedReportFormats","loadJS","scriptPath","scriptNode","createElement","type","src","loadCSS","cssPath","cssNode","rel","href","geoLocate","navigator","geolocation","$","PrimeFaces","cw","id","widgetVar","msgs","summary","detail","severity","getCurrentPosition","position","coords","longitude","latitude","error","message","enableHighAccuracy","setTouchCookie","hasTouchScreen","maxTouchPoints","msMaxTouchPoints","mQ","matchMedia","media","matches","cookie","passwordStrength","progressBarPower","progressBarColour","GMap","wkt","drawingModes","drawingTools","result","google","maps","drawing","OverlayType","MARKER","POLYLINE","POLYGON","RECTANGLE","scatter","display","data","fit","delta","Wkt","items","bizId","_objects","Object","prototype","hasOwnProperty","call","found","i","l","length","deletedObject","overlays","setMap","item","object","same","features","j","m","geometry","feature","read","e","alert","props","editable","strokeColour","strokeColor","fillColour","fillColor","fillOpacity","iconRelativeFilePath","icon","url","_doc","iconAnchorX","iconAnchorY","anchor","Point","origin","overlay","toObject","push","webmap","zoomable","fromTimestamp","toTimestamp","mod","moduleName","doc","documentName","infoMarkup","event","addListener","click","bounds","LatLngBounds","someOverlays","getPath","path","getLength","extend","getAt","getPosition","getNorthEast","equals","getSouthWest","getZoom","setZoom","undefined","setCenter","fitBounds","centre","coord","components","LatLng","y","x","console","log","scatterValue","value","name","obj","defaults","setEditable","isArray","key","_overlays","getBounds","clear","drawingManager","DrawingManager","drawingControlOptions","ControlPosition","LEFT_BOTTOM","setDrawingMode","fromObject","wktValue","write","setFieldValue","geoLocator","control","assign","style","backgroundColor","border","borderRadius","boxShadow","cursor","margin","padding","textAlign","title","innerHTML","index","addEventListener","pos","lat","lng","marker","Marker","map","geolocator","controls","LEFT","setDisabled","disabled","setOptions","drawingControl","refreshControls","refreshTime","_refreshRequired","children","Number","_intervalId","clearInterval","setInterval","rerender","bind","checked","Leaflet","parse","input","re","match","wktString","white","multicoords","depth","rings","stack","pointer","elem","tuples","pop","split","some","isNaN","Array","apply","parseFloat","list","pt","point","c","coordinates","multipoint","indexOf","replace","newCoordsFormat","multilinestring","linestring","geometrycollection","geometries","root","parts","srid","shift","crs","properties","stringify","gj","pairWKT","join","ringWKT","r","ringsWKT","wrapParens","s","Error","numberRegexp","RegExp","source","removeLayer","getLayers","zoomData","itemFeature","color","iconUrl","iconAnchor","L","geoJson","pointToLayer","latlng","onEachFeature","layer","bindPopup","addLayer","latLngBounds","maxZoom","addTo","EditControl","Control","options","onAdd","container","DomUtil","create","markerLink","DomEvent","on","stop","LAYER","editTools","startMarker","polylineLink","startPolyline","rectangleLink","startRectangle","polygonLink","startPolygon","editControl","addControl","toggleEdit","toGeoJSON","GeoControl","link","commitDrawing","panTo","geoControl","getContainer","isc","Offline","isOffline","isc.Offline.isOffline","setAutoDraw","RPCManager","fetchDataPrompt","saveDataPrompt","removeDataPrompt","handleError","isc.RPCManager.handleError","response","request","warn","Super","arguments","addClassMethods","loginRequired","transactionNum","rpcRequest","rpcResponse","Date","setShortDisplayFormat","setNormalDisplayFormat","setInputFormat","ListGrid","addProperties","getFilterEditorType","field","filterEditorType","_$binary","_$file","_$imageFile","editorType","ds","getDataSource","filenameSuppressed","getFilenameField","filterEditorConfig","canEdit","canFilter","_constructor","filterEditorProperties","DynamicForm","getEditorType","ResultSet","addMethods","skyveSetCriteria","getPrototype","setCriteria","hasSpatialOperator","criteria","operator","startsWith","newCriteria","invalidateCache","resizeTimerEvent","Page","setEvent","WindowStack","clearTimeout","setTimeout","resize","spatialOperators","ID","fieldTypes","valueType","requiresServer","forEach","DataSource","addSearchOperator","condition","compareCriteria","defineClass","BizUtil","addClassProperties","_modules","_unusedPickLists","COMPLETE_DATA_SOURCE","RestDataSource","dataFormat","jsonPrefix","jsonSuffix","dataURL","fields","_currentView","getCurrentView","isNumeric","numericTypes","includes","isTemporal","temporalTypes","temporalType","addFilterRequestParams","requestParams","filterParams","view","instance","gather","filterParam","toDisplay","convertFilterCriteria","criterion","fieldName","keys","propertyName","completeFilterCriteria","convertCriteria","createImageButton","hasDisabledIcon","tooltip","ToolStripButton","iconAlign","showDisabledIcon","showDownIcon","canHover","getHoverHTML","createCodeMirror","scVar","binding","languageMimeType","loadResources","templates","getElementsByName","templateElement","nodeName","toLowerCase","setAttribute","editor","CodeMirror","fromTextArea","mode","lineNumbers","theme","setSize","save","createSplitButton","buttonTitle","buttonIcon","buttonHasDisabledIcon","buttonTooltip","buttonClick","splitTooltip","splitTarget","splitItems","HLayout","align","height","membersMargin","members","IButton","autoFit","MenuButton","width","alignMenuLeft","menu","Menu","autoDraw","showShadow","shadowDepth","target","createUploadButton","contentFormItem","image","showMarkup","setValue","enableIf","getValue","form","_view","replaceAll","_c","_b","popup","HTMLPane","contentsType","contents","contentsURL","getEditView","onViewCreated","documentEntry","_unused","eval","_moduleName","_documentName","_used","sendRequest","showPrompt","evalResult","httpMethod","actionURL","relinquishEditView","remove","getPickList","lookupDescription","BizListGrid","isPickList","setLookup","relinquishPickList","pickList","destroy","createListGrid","createCalendar","Calendar","scrollToWorkDay","createTreeGrid","isTree","createMap","BizMap","popupFrame","open","win","focus","growl","life","sticky","onPushMessage","pushMessage","growls","messages","method","argument","markup","msg","say","toHH24_MI","getHours","getMinutes","toHH_MI","hours","ampm","hoursString","toHH24_MI_SS","getSeconds","toHH_MI_SS","time","toDD_MM_YYYY","getDate","getMonth","getFullYear","toDD_MM_YYYY_HH24_MI","toDD_MM_YYYY_HH_MI","toDD_MM_YYYY_HH24_MI_SS","toDD_MM_YYYY_HH_MI_SS","toDD_MMM_YYYY","shortMonthNames","toDD_MMM_YYYY_HH24_MI","toDD_MMM_YYYY_HH_MI","toDD_MMM_YYYY_HH24_MI_SS","toDD_MMM_YYYY_HH_MI_SS","toMM_DD_YYYY","toMM_DD_YYYY_HH24_MI","toMM_DD_YYYY_HH_MI","toMM_DD_YYYY_HH24_MI_SS","toMM_DD_YYYY_HH_MI_SS","toMMM_DD_YYYY","toMMM_DD_YYYY_HH24_MI","toMMM_DD_YYYY_HH_MI","toMMM_DD_YYYY_HH24_MI_SS","toMMM_DD_YYYY_HH_MI_SS","toYYYY_MM_DD","toYYYY_MM_DD_HH24_MI","toYYYY_MM_DD_HH_MI","toYYYY_MM_DD_HH24_MI_SS","toYYYY_MM_DD_HH_MI_SS","ClassFactory","BizDateItem","_replaceMonthWithOrdinal","month","lowerMonth","monthMap","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec","ordinal","entries","parseInput","datePattern","isA","trim","exec","test","DateUtil","parseSchemaDate","format","currentYear","enforceDate","changeOnBlur","changeOnKeypress","useTextField","showHint","showHintInField","hint","textFieldProperties","selectOnFocus","showPickerTimeItem","dateFormatter","parseDate","mapValueToDisplay","emptyString","mapDisplayToValue","isAn","updateValue","setElementValue","newValue","SimpleType","inheritsFrom","editFormatter","internalValue","record","shortDisplayFormatter","normalDisplayFormatter","component","DD_MMM_YYYY_Item","MM_DD_YYYY_Item","MMM_DD_YYYY_Item","YYYY_MM_DD_Item","BizDateTimeItem","pickerTimeItemProperties","showSecondItem","use24HourTime","String","DD_MM_YYYY_HH24_MI_Item","DD_MM_YYYY_HH_MI_SS_Item","DD_MM_YYYY_HH24_MI_SS_Item","DD_MMM_YYYY_HH_MI_Item","DD_MMM_YYYY_HH24_MI_Item","DD_MMM_YYYY_HH_MI_SS_Item","DD_MMM_YYYY_HH24_MI_SS_Item","MM_DD_YYYY_HH_MI_Item","MM_DD_YYYY_HH24_MI_Item","MM_DD_YYYY_HH_MI_SS_Item","MM_DD_YYYY_HH24_MI_SS_Item","MMM_DD_YYYY_HH_MI_Item","MMM_DD_YYYY_HH24_MI_Item","MMM_DD_YYYY_HH_MI_SS_Item","MMM_DD_YYYY_HH24_MI_SS_Item","YYYY_MM_DD_HH_MI_Item","YYYY_MM_DD_HH24_MI_Item","YYYY_MM_DD_HH_MI_SS_Item","YYYY_MM_DD_HH24_MI_SS_Item","TimeItem","init","BizTimeItem","displayFormat","timeFormatter","Time","hasAdvancedCriteria","toShortTime","HH_MI_SS_Item","toTime","HH24_MI_Item","HH24_MI_SS_Item","BizDecimal2Item","toString","decimalPlaces","toLocalizedString","validators","clientOnly","BizDecimal5Item","BizDecimal10Item","BizDecimal0Item","BizDecimal1Item","BizDollarsAndCentsItem","BizIntegerPercentageItem","Math","round","BizSimplePercentageItem","BizIntegerSeparatorItem","BizTwoDecimalPlacesPercentageItem","BizTimeDurationItem","parseInt","minutes","min","floor","decimalMinutes","ceil","abs","stringMinutes","CanvasItem","BizContentLinkItem","rowSpan","endRow","startRow","canFocus","shouldSaveValue","config","_link","HTMLFlow","canvas","defaultLayoutAlign","LayoutSpacer","userSetValue","_mod","setContents","linkHTML","BizContentImageItem","_img","Img","imageType","overflow","isGroup","styleName","groupBorderCSS","groupLabelBackgroundColor","showDisabled","showDown","showFocus","showFocused","showFocusedAsOver","showRollOver","centredUploadButton","getWidth","getHeight","setSrc","BizLookupDescriptionItem","fetchMissingValues","autoFetchData","canCreate","canUpdate","canPick","canAdd","canClear","me","combo","showTitle","useClientFiltering","cachePickListResults","allowEmptyValue","optionDataSource","valueField","displayField","pickListFields","filterFields","pickListProperties","filterData","requestProperties","params","_cc","completeOnTab","textMatchStyle","getPickListFilterCriteria","showPicker","getOptionDataSource","_drop","changed","getDisplayValue","bizPicked","blur","itemValue","valueMap","_form","writeFormTag","numCols","colWidths","cellPadding","_splitButton","setDataSource","getPageRect","zoom","newParams","bizCleared","setItems","getItem","focusInItem","bizAdded","bizEdited","setValueMapFromEditView","values","_setValueMap","setValueMapFromPickList","setValueMap","enableDisablePick","getMember","zoomToNew","get","modoc","dotIndex","modName","viewBinding","fromRect","required","setRequired","_apply","_vm","valuesHaveChanged","saveInstance","success","newInstance","editInstance","ComboBoxItem","BizCompleteItem","showPickerIcon","_a","addUnknownValues","_attr","CKEDITOR","BizHTMLItem","_pane","_editButton","editEvent","_show","owningView","formValues","holder","Canvas","draw","holder.draw","filebrowserImageBrowseUrl","filebrowserBrowseUrl","resize_enabled","skin","autoUpdateElement","baseFloatZIndex","toolbar","mentionMarkers","feed","fetchData","query","markers","mentions","first","second","add","minChars","pattern","cache","throttle","coreStyles_bold","element","overrides","coreStyles_italic","_editor","customConfig","setData","applyEvent","getData","popoff","GeometryItem","validOperators","createCanvas","storeValue","icons","prompt","BizMapPicker","showValue","displayValue","dataValue","setHint","setValueFromPicker","defaultOperator","GeometryMapItem","_valueSetFromPicker","setMembers","_margin","_stack","_index","showCloseButton","closeButtonRefreshes","sizeSet","windowWidth","windowHeight","setTitle","addItems","setWidth","setHeight","closeClick","result.closeClick","Window","headerIconDefaults","autoCenter","isModal","showModalMask","showMinimizeButton","modalMaskOpacity","canDragReposition","canDragResize","shadowSoftness","shadowOffset","setShowCloseButton","_fromRect","show","rerenderOpener","opener","getOpener","_animateClose","instances","_CKEditor","removeItems","resume","_wireframe","opacity","_animateClosedDuration","toLeft","getLeft","toTop","getTop","toWidth","getVisibleWidth","toHeight","getVisibleHeight","setRect","bringToFront","hide","animateRect","ReportDialog","_pageFormats","LETTER","NOTE","LEGAL","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","B0","B1","B2","B3","B4","B5","ARCH_E","ARCH_D","ARCH_C","ARCH_B","ARCH_A","FLSA","FLSE","HALFLETTER","LEDGER","_available","editorProperties","max","step","defaultValue","_selected","_valuesManager","ValuesManager","_columnList","canDragRecordsOut","canAcceptDroppedRecords","dragDataAction","alternateRecordStyles","leaveScrollbarGap","showHeaderContextMenu","_selectedColumnList","canReorderRecords","canRemoveRecords","editByCell","modalEditing","preventDuplicates","_generateReportFormatMappings","allowedFormats","defaultFormats","formatMappings","pdf","label","docx","xlsx","pptx","xls","rtf","ods","odt","html","csv","xml","txt","valueIcons","_createJasperReportFormatPickList","colSpan","onChangeFunction","imageURLPrefix","imageURLSuffix","change","_columnSelectorLayout","VLayout","layoutAlign","iconWidth","iconHeight","transferSelectedData","_reportFormatForm","_pageFormatForm","valuesManager","oldValue","orientation","portrait","landscape","widthItem","heightItem","_marginsForm","_submitForm","canSubmit","_layout","_criteria","_tagId","_dataSourceID","_createReportPanel","buttonDefn","formDefn","backgroundImage","backgroundRepeat","_createExport","_exportLayout","changeHandler","isDocumentFormat","isHtmlFormat","vertical","tabular","columnar","isColumnar","validate","getValues","columns","tagId","fileNameNoSuffix","JSON","encode","prettyPrint","setAction","setTarget","submitForm","groupTitle","groupLabelStyleName","popupExport","dataSourceID","unselectedFields","selectedFields","popupReport","_f","paramsCopy","_redirectToReport","_e","_freemarkerReportLayout","_params","_freemarkerReportForm","_createFreemarkerReportFormatPickList","_freemarkerReportViewButton","_jasperReportLayout","_jasperReportForm","_jasperReportViewButton","b","encodeURI","ChartDialog","_chartForm","line","lineArea","bar","horizontalBar","radar","pie","doughnut","polarArea","_categoryForm","NumericMultipleBucket","TextLengthBucket","TextStartsWithBucket","TemporalBucket","redrawOnChange","expression","showIf","day","dayMonthYear","hour","hourDay","hourDayMonth","minuteHour","monthYear","secondMinuteHour","year","_valueForm","_topForm","showLabel","topItem","topByItem","topSortItem","includeOthersItem","enable","clearErrors","disable","category","ascending","descending","_orderForm","orderByItem","orderSortItem","_chart","_dataSource","_border","_createChartPanel","_create","BizChart","chart","t","validateCategoryBucket","validateValueFunction","generateDataLabel","chartConfig","_destroyAndRecreate","_update","removeMember","addMember","popupChart","dataSource","createValueMap","categoryField","getFieldNames","fieldNames","getField","categoryBinding","categoryBucket","setCategoryBucketErrors","errorMessage","setErrors","valueBinding","valueFunction","valueFunctionDisplay","valueBindingDisplay","categoryBindingDisplay","AdvancedFilter","filterableComponent","filterableComponentConfig","toggleButton","_filterBuilder","_filterButtonDefaults","initWidget","actionType","showSelectedIcon","selected","_styleForm","radio","bracket","inline","getStyle","setStyle","toggleButtonClick","grid","originalGetCriteria","getFilterEditorCriteria","grid.getFilterEditorCriteria","setFilterEditorCriteria","emptyObject","setShowFilterEditor","getCriteria","_filterButton","createAutoChild","_summary","summaryType","FilterBuilder","topOperatorAppearance","allowEmpty","includeEmptyValues","clearCriteria","BizGrid","_eventRowNum","_eventColumnNum","_eventRecord","_disabled","deleteSelectionItem","deleteSelectionButton","clearSelectionItem","aggregate","canDelete","canZoom","canRemove","isRepeater","showColumnHeaders","showGrid","anySelected","ask","_csrf","removeSelectedData","dsResponse","dsRequest","httpHeaders","selectionChanged","bizRemoved","deselectAllRecords","refresh","BizDataGrid","_newButton","_zoomButton","_popoutButton","showAdd","showZoom","showEdit","showRemove","showDeselect","_ordinal","newItem","_zoomItem","editItem","startEditing","_eventColNum","contextMenuData","isSeparator","contextMenu","_createGrid","_fields","_grids","getID","toolStripMembers","ToolStrip","layoutMargin","getMembersLength","setMinHeight","minHeight","gridConfig","showHeader","headerHeight","showFilterEditor","defaultFilterOperator","showSelectedStyle","showEmptyMessage","baseStyle","bodyBackgroundColor","selectionType","neverValidate","validateByCell","saveByCell","validateOnChange","recordEnabledProperty","wrapCells","wordWrap","fixedRecordHeights","canReorderFields","canSort","canGroupBy","recordsDropped","dropRecords","destWidget","sourceWidget","reorderData","autoSaveEdits","canFreezeFields","rowClick","rowNum","colNum","rowContextClick","selectSingleRecord","rowDoubleClick","isFolder","_blurry","hasSelection","selectionUpdated","selectedIdBinding","changes","rememberValues","bizSelected","requestsArePending","delayCall","doubleClickDelay","canEditCell","editComplete","newValues","oldValues","editCompletionEvent","bizModule","bizDocument","zoomToBizId","gridRect","body","rowTop","getRowPageTop","rowHeight","getRowSize","_zoom","rowRect","startEditingNew","removeAt","findIndex","_toolbar","_advancedFilter","_summaryGrid","_summaryToolbar","_summaryFooter","_flagForm","_flagDialog","_pickButton","_chartButton","showExport","showChart","showFilter","showSummary","showSnap","showTag","showFlag","autoPopulate","_lookup","_config","autoSize","showMaximizeButton","showHeaderIcon","useAllDataSourceFields","getAllCriteria","contConv","_changed","_singular","popoutItem","saveRequestProperties","pickItem","pick","createToolbarButton","isEnabled","onClick","button","clearFilter","clearFilterItem","refreshItem","exportData","fieldState","getFieldState","dataGridField","visible","allCriteria","exportItem","count","getTotalRows","chartData","chartItem","_contextMenu","this._advancedFilter.toggleButton.click","_snapMenu","canSelectParentItems","_snapMenuButton","ToolStripMenuButton","useSimpleHttp","a","d","status","_newSnap","_setSnap","snap","enabled","snapId","entry","snapshot","advancedCriteriaStyle","sortState","groupState","submenu","this._snapMenuButton._newSnap","askForValue","n","getSortState","getGroupState","this._snapMenuButton._setSnap","select","deselect","setFieldState","setSortState","setGroupState","hideMember","showMember","_updateSnap","this._snapMenuButton._updateSnap","_deleteSnap","this._snapMenuButton._deleteSnap","_clearSnap","this._clearSnap","_tagsMenu","_tagsMenuButton","newTag","this._tagsMenuButton.newTag","setTag","this._tagsMenuButton.setTag","tagOp","action","this._tagsMenuButton.tagOp","askConfirmation","privateTagOp","rowCount","confirmationMessage","addList","Label","selectRecord","autoFitData","bodyOverflow","grids","hasDataSource","canExpandRecords","canShowFilterEditor","allowFilterOperators","filterByCell","expansionMode","canSelectRecord","state","zoomDisabled","recordList","selectedIdTrackChanges","editorCriteria","dataProperties","transformData","newData","operationType","RPCResponse","STATUS_SUCCESS","summaryFields","fieldType","excludedTypes","formatCellValue","Boolean","addAt","summaryData","fieldStateChanged","getFieldName","scrolled","scrollTo","getScrollLeft","getCellCSSText","bizTagged","emptyMessage","cellHeight","TreeGrid","treeConfig","folderIcon","loadOnDemand","openProperty","isFolderProperty","childrenProperty","dataFetchMode","lookup","topRowNum","getVisibleRows","filterCriteria","scrollToRow","menuConfig","summaryToolbar","contains","hidden","canHide","canToggle","showHover","ignoreKeyboardClicks","recordClick","viewer","recordNum","fieldNum","rawValue","editedRecord","updateData","editRecord","hoverHTML","bizFlagComment","hasDetailFields","treeFieldNotSet","dsField","foreignKey","gridField","autoFitWidth","treeField","canSave","setFields","commentField","saveData","reset","getMembers","rootIdBinding","rootValue","bizParentIdField","getTitle","getFieldWidth","module","_source","changedForServer","BizHeader","userImg","userContactImageUrl","userInitials","userContactInitials","menuData","profileBlock","avatar64","userContactName","userName","canSelect","canSwitchMode","setUxUi","avatarHtml","avatar32","_userMenu","showNextTo","showIcons","showSubmenus","showKeys","help","heading","headerTemplate","ListView","_header","views","isVisible","_grid","_calendar","_tree","_map","_portal","PortalLayout","getDropPortlet","dragTarget","rowOffset","endsWith","leaf","getDragData","portlet","Portlet","desc","componentMap","cal","tree","ref","addItem","_setHeading","fontIcon","iconMarkup","setGridDataSource","_getDataSource","setCalendarDataSource","setTreeDataSource","showPortal","setHeading","setMapDataSource","_initializeView","viewName","createFunction","hasMember","_heading","_updateView","defaultTitle","BizContainer","contained","addContained","removeContained","EditView","_DATA_SOURCE","sendExtraFields","_refreshedGrids","_actionPanel","_editPanel","handleHiddenValidationErrors","errors","tokens","lastUnderscore","gridBinding","gridID","setFieldError","markForRedraw","warning","saveEditorValues","saveOperation","addEditAction","forCreate","addCreateAction","addAction","token","evaluation","reduce","toDateStamp","_editInstance","_openedFromDataGrid","formBinding","parentContext","openedFromDataGrid","completedCallback","_ecnt","_ccnt","setSaveOperationType","refreshListGrids","opened","willHandleError","_saved","_s","rerenderAction","rerenderBlurryAction","_rerenderBlurryAction","blurry","bean","disableValidation","openerValues","childBinding","lastIndex","openerValue","setValues","_title","deleteInstance","removeData","doAction","gridModule","gridDocument","gridRowBizId","instanceWithoutContext","_g","_redirectUrl","doBlurryAction","_doBlurryAction","blurryElement","clearValues","persisted","created","_createIconMarkup","_editIcon","_editFontIcon","_createHelpMarkup","_editHelpFile","_editHelpURL","_createIcon","_createFontIcon","_createHelpFile","_createHelpURL","_valueMaps","_growls","_messages","cleanedValues","toRerender","_processWidgets","widget","_comparisonTree","_comparisonForm","_candidateList","_memberList","_handleListMembership","_handleDataGrid","onlyView","_manageActionPanel","_displayGrowlsAndMessages","iconFile","fontIconClass","helpFile","helpURL","valueMaps","candidates","find","bizKey","isDate","isTime","_processDateTimeFields","_handleGridSelection","row","selectedBizId","tool","notCreated","_showHide","_enableDisable","actionName","_handleToolVisibility","_canDelete","forceRefresh","forcePostRefresh","postRefreshConditionName","_evaluateConditionName","existingRootValue","newRootValue","_gather","comparisons","comparisonID","smartClientGrid","sortByProperty","conditionName","invisible","containedInvisible","Function","addBizTab","selectedTabNumber","getSelectedTabNumber","bizTab","bizTabs","tabInvisible","pane","selectedTabIndex","selectedTabIndexBinding","selectTab","getItems","_updateValueMap","parent","updateCapability","capabilityKey","_setDisabled","disabledConditionName","isDisabled","bizRequired","enableTab","disableTab","tab","tabForPane","getTabNumber","tabIndex","_updateDisabledState","toggleDisabled","disabledState","toggleVisibility","visibilityState","_setInvisible","forceInvisible","invisibleConditionName","setInvisible","BizButton","displayName","this.getHoverHTML","this.action","confirm","_action","this._action","changedOnServer","changedOnServerCancel","openerListGrids","openerListGridID","openerListGrid","getTime","BizZoomIn","BizVBox","BizHBox","BizCollapsible","minimized","_height","guts","animateMinimize","headerLabelProperties","restore","minimize","_resize","_resizeTimer","resized","setProperty","BizTabPane","tabs","destroyPanes","tabBarThickness","tabSelected","tabNum","tabPane","addTab","selectedConditionName","existingTabPosition","tabPosition","tabNumber","removeTab","BizListMembership","recordDrop","targetRecord","candidatesHeading","membersHeading","BizComparison","resizeFrom","Tree","modelType","idField","parentIdField","setFormFields","showOpenIcons","showDropIcons","showResizeBar","PropertySheet","titleHoverHTML","diff_match_patch","oldItem","newDisplayValue","oldDisplayValue","diffs","diff_main","diff_cleanupEfficiency","diff_prettyHtml","Diff_EditCost","cellStyle","getFields","old","prop","oldField","controlGroups","getSelectedRecord","property","clearPrompt","_getData","getRoot","_t","treeNode","child","childResult","existing","BizDynamicImage","hZoom","wZoom","mouseWheelTimer","_createContextMenuData","zoomLevels","zoomMenuItems","level","_open","zoomLevel","moduleDotDocument","contextValue","_clearExistingImage","baseValue","_calculateImageDimensions","imageSrc","_generateImageSrc","_createImageElement","imageWidth","imageHeight","canDrag","dragAppearance","dragStart","startScrollLeft","startScrollTop","getScrollTop","dragMove","Event","lastEvent","mouseDownEvent","mouseWheel","wheelDelta","EventHandler","getWheelDelta","doubleClick","appImgDir","BizImage","file","BizLabel","setAlign","loadingChartJS","loadChartJS","Chart","_resizeChartCalled","_refreshing","redrawOnResize","getInnerHTML","_resizeChart","parentNode","update","modelName","isDrawn","_modelName","_refresh","requestUrl","chartType","responsive","maintainAspectRatio","chartCanvas","getElementById","logoSrc","dataSourceConfig","createBodyLayout","createMenuSections","createDataSources","addListViewToDetails","createTextSearchComponents","createLeftMenuPanel","createRightDetailsPanel","SectionStack","visibilityMode","animateSections","adminStack","getById","createMenuTreeGrid","addSection","expanded","openAll","showConnectors","nodeIcon","closedIconSuffix","nameProperty","leafClick","handleMenuItemClick","details","handleEditView","handleListView","dataSourceName","primaryKey","canFlag","operationBindings","dataProtocol","criteriaPolicy","keyPress","keyName","doSearch","accessKey","textSearchResults","textSearchForm","getValuesAsCriteria","canPickFields","linkText","suggestion","popupSearch","showHelp"]
}
