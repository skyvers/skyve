{
"version":3,
"file":"../skyve-web/src/main/resources/META-INF/resources/skyve/desktop/skyve-min.js",
"lineCount":376,
"mappings":"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",
"sources":["src/js/common/util.js","src/js/desktop/util.js","src/js/desktop/types.js","src/js/desktop/windowStack.js","src/js/desktop/reporting.js","src/js/desktop/charting.js","src/js/desktop/advancedFilter.js","src/js/desktop/datagrid.js","src/js/desktop/listgrid.js","src/js/desktop/listview.js","src/js/desktop/editView.js","src/js/desktop/harness.js"],
"sourcesContent":["// SKYVE namespace definition\nif (!window.SKYVE) {\n\twindow.SKYVE = {};\n}\n\nSKYVE.Util = (function () {\n\tconst context = `${window.location}`.substring(\n\t\t0,\n\t\t`${window.location}`.lastIndexOf(\"/\") + 1,\n\t);\n\n\t/**\n\t * Loads a resource (JS or CSS) and appends it to the document head.\n\t * @param {HTMLElement} node - the resource node to load.\n\t * @param {Function} callback - callback function to execute after loading.\n\t */\n\tconst load = function (node, callback) {\n\t\tif (callback !== null) {\n\t\t\tif (node.readyState) {\n\t\t\t\t// IE, incl. IE9\n\t\t\t\tnode.onreadystatechange = function () {\n\t\t\t\t\tif (node.readyState === \"loaded\" || node.readyState === \"complete\") {\n\t\t\t\t\t\tnode.onreadystatechange = null;\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t// Other browsers\n\t\t\t\tnode.onload = callback;\n\t\t\t}\n\t\t}\n\n\t\tconst headNode = document.getElementsByTagName(\"HEAD\")[0];\n\t\tif (headNode) {\n\t\t\theadNode.appendChild(node);\n\t\t}\n\t};\n\n\t// Public methods\n\treturn {\n\t\tcustomer: null,\n\t\tv: null,\n\t\tgoogleMapsV3ApiKey: null,\n\t\tckEditorConfigFileUrl: null,\n\t\tmapCentre: null,\n\t\tmapZoom: 1,\n\t\tCONTEXT_URL: context,\n\t\tallowedReportFormats: null,\n\n\t\t/**\n\t\t * Loads a JavaScript file.\n\t\t * @param {string} scriptPath - the path to the JavaScript file.\n\t\t * @param {Function} callback - callback function to execute after loading.\n\t\t */\n\t\tloadJS: function (scriptPath, callback) {\n\t\t\tconst scriptNode = document.createElement(\"SCRIPT\");\n\t\t\tscriptNode.type = \"text/javascript\";\n\t\t\tscriptNode.src = scriptPath;\n\t\t\tload(scriptNode, callback);\n\t\t},\n\n\t\t/**\n\t\t * Loads a CSS file.\n\t\t * @param {string} cssPath - the path to the CSS file.\n\t\t * @param {Function} callback - callback function to execute after loading.\n\t\t */\n\t\tloadCSS: function (cssPath, callback) {\n\t\t\tconst cssNode = document.createElement(\"LINK\");\n\t\t\tcssNode.type = \"text/css\";\n\t\t\tcssNode.rel = \"stylesheet\";\n\t\t\tcssNode.href = cssPath;\n\t\t\tload(cssNode, callback);\n\t\t},\n\n\t\t/**\n\t\t * Retrieves the current geolocation and executes a callback with the WKT string.\n\t\t * @param {Function} callback - callback function to execute with the WKT string.\n\t\t */\n\t\tgeoLocate: function (callback) {\n\t\t\tif (navigator.geolocation) {\n\t\t\t\t$(function () {\n\t\t\t\t\tPrimeFaces.cw(\"Growl\", \"growl\", {\n\t\t\t\t\t\tid: \"growl\",\n\t\t\t\t\t\twidgetVar: \"growl\",\n\t\t\t\t\t\tmsgs: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsummary: \"GeoLocating\",\n\t\t\t\t\t\t\t\tdetail: \"Please wait...\",\n\t\t\t\t\t\t\t\tseverity: \"info\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\tfunction (position) {\n\t\t\t\t\t\t$(function () {\n\t\t\t\t\t\t\tPrimeFaces.cw(\"Growl\", \"growl\", {\n\t\t\t\t\t\t\t\tid: \"growl\",\n\t\t\t\t\t\t\t\twidgetVar: \"growl\",\n\t\t\t\t\t\t\t\tmsgs: [\n\t\t\t\t\t\t\t\t\t{ summary: \"GeoLocating\", detail: \"Done\", severity: \"info\" },\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(\n\t\t\t\t\t\t\t`POINT (${position.coords.longitude} ${position.coords.latitude})`,\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (error) {\n\t\t\t\t\t\t$(function () {\n\t\t\t\t\t\t\tPrimeFaces.cw(\"Growl\", \"growl\", {\n\t\t\t\t\t\t\t\tid: \"growl\",\n\t\t\t\t\t\t\t\twidgetVar: \"growl\",\n\t\t\t\t\t\t\t\tmsgs: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsummary: \"GeoLocating\",\n\t\t\t\t\t\t\t\t\t\tdetail: error.message,\n\t\t\t\t\t\t\t\t\t\tseverity: \"warn\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t{ enableHighAccuracy: true },\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Sets a cookie indicating whether the device has a touch screen.\n\t\t */\n\t\tsetTouchCookie: function () {\n\t\t\tlet hasTouchScreen = false;\n\t\t\tif (\"maxTouchPoints\" in navigator) {\n\t\t\t\thasTouchScreen = navigator.maxTouchPoints > 0;\n\t\t\t} else if (\"msMaxTouchPoints\" in navigator) {\n\t\t\t\thasTouchScreen = navigator.msMaxTouchPoints > 0;\n\t\t\t} else {\n\t\t\t\tconst mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\n\t\t\t\tif (mQ && mQ.media === \"(pointer:coarse)\") {\n\t\t\t\t\thasTouchScreen = !!mQ.matches;\n\t\t\t\t} else if (\"orientation\" in window) {\n\t\t\t\t\thasTouchScreen = true; // deprecated, but good fallback\n\t\t\t\t}\n\t\t\t}\n\t\t\tdocument.cookie = `touch=${hasTouchScreen ? 1 : 0}; path=/`;\n\t\t},\n\n\t\t// Password strength estimation\n\t\tpasswordStrength: {\n\t\t\t0: \"Worst\",\n\t\t\t1: \"Bad\",\n\t\t\t2: \"Weak\",\n\t\t\t3: \"Good\",\n\t\t\t4: \"Strong\",\n\t\t},\n\t\tprogressBarPower: {\n\t\t\t0: \"1%\",\n\t\t\t1: \"25%\",\n\t\t\t2: \"50%\",\n\t\t\t3: \"75%\",\n\t\t\t4: \"100%\",\n\t\t},\n\t\tprogressBarColour: {\n\t\t\t0: \"#D73F40\",\n\t\t\t1: \"#DC6551\",\n\t\t\t2: \"#F2B84F\",\n\t\t\t3: \"#BDE952\",\n\t\t\t4: \"#3ba62f\",\n\t\t},\n\t};\n})();\n\nSKYVE.GMap = (function () {\n\tlet wkt = null;\n\n\t/**\n\t * Determines the drawing modes based on the specified drawing tools.\n\t * @param {string} drawingTools - the drawing tools specified on the geometryMap widget.\n\t * @returns {Array<google.maps.drawing.OverlayType>} - an array of drawing modes.\n\t */\n\tconst drawingModes = function (drawingTools) {\n\t\tlet result = null;\n\t\tswitch (drawingTools) {\n\t\t\tcase \"point\":\n\t\t\t\tresult = [google.maps.drawing.OverlayType.MARKER];\n\t\t\t\tbreak;\n\t\t\tcase \"line\":\n\t\t\t\tresult = [google.maps.drawing.OverlayType.POLYLINE];\n\t\t\t\tbreak;\n\t\t\tcase \"polygon\":\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYGON,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.RECTANGLE,\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tcase \"pointAndLine\":\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.MARKER,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYLINE,\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tcase \"pointAndPolygon\":\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.MARKER,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYGON,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.RECTANGLE,\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tcase \"lineAndPolygon\":\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYLINE,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYGON,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.RECTANGLE,\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tresult = [\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.MARKER,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYLINE,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.POLYGON,\n\t\t\t\t\tgoogle.maps.drawing.OverlayType.RECTANGLE,\n\t\t\t\t];\n\t\t}\n\t\treturn result;\n\t};\n\n\t// Public methods\n\treturn {\n\t\t/**\n\t\t * Scatters data points on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {Object} data - the response from the map servlet to scatter.\n\t\t * @param {boolean} fit - whether to fit the map bounds to the data.\n\t\t * @param {boolean} delta - whether to only remove or update if changed.\n\t\t */\n\t\tscatter: function (display, data, fit, delta) {\n\t\t\t// Instantiate WKT if it hasn't been already (at this point Wkt script is loaded)\n\t\t\tif (!wkt) {\n\t\t\t\twkt = new Wkt.Wkt();\n\t\t\t}\n\n\t\t\tconst items = data.items;\n\t\t\t// If there is no data, there is probably an error, so just bug out\n\t\t\tif (!items) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (delta) {\n\t\t\t\t// Remove overlays not present in the data\n\t\t\t\tfor (const bizId in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, bizId)) {\n\t\t\t\t\t\tlet found = false;\n\t\t\t\t\t\tfor (let i = 0, l = items.length; i < l; i++) {\n\t\t\t\t\t\t\tif (items[i].bizId === bizId) {\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t\tconst deletedObject = display._objects[bizId];\n\t\t\t\t\t\t\tfor (let i = 0, l = deletedObject.overlays.length; i < l; i++) {\n\t\t\t\t\t\t\t\tdeletedObject.overlays[i].setMap(null);\n\t\t\t\t\t\t\t\tdeletedObject.overlays[i] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdelete deletedObject.overlays;\n\t\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Remove all overlays\n\t\t\t\tfor (const bizId in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, bizId)) {\n\t\t\t\t\t\tconst deletedObject = display._objects[bizId];\n\t\t\t\t\t\tfor (let i = 0, l = deletedObject.overlays.length; i < l; i++) {\n\t\t\t\t\t\t\tdeletedObject.overlays[i].setMap(null);\n\t\t\t\t\t\t\tdeletedObject.overlays[i] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete deletedObject.overlays;\n\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add/update overlays from the data\n\t\t\tfor (let i = 0, l = items.length; i < l; i++) {\n\t\t\t\tconst item = items[i];\n\n\t\t\t\tlet object = display._objects[item.bizId];\n\t\t\t\tif (object) {\n\t\t\t\t\t// If the WKTs have changed, delete the overlay and recreate it\n\t\t\t\t\tlet same = object.overlays.length === item.features.length;\n\t\t\t\t\tif (same) {\n\t\t\t\t\t\tfor (let j = 0, m = object.overlays.length; j < m; j++) {\n\t\t\t\t\t\t\tif (object.overlays[j].geometry !== item.features[j].geometry) {\n\t\t\t\t\t\t\t\tsame = false;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!same) {\n\t\t\t\t\t\tfor (let j = 0, m = object.overlays.length; j < m; j++) {\n\t\t\t\t\t\t\tobject.overlays[j].setMap(null);\n\t\t\t\t\t\t\tobject.overlays[j] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete object.overlays;\n\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t\tobject = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!object) {\n\t\t\t\t\t// Object could have been nulled just above\n\t\t\t\t\tobject = { overlays: [] };\n\t\t\t\t\tfor (let j = 0, m = item.features.length; j < m; j++) {\n\t\t\t\t\t\tconst feature = item.features[j];\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Catch any malformed WKT strings\n\t\t\t\t\t\t\twkt.read(feature.geometry);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\talert(`${feature.geometry} is invalid WKT.`);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst props = { editable: feature.editable };\n\t\t\t\t\t\tif (feature.strokeColour) {\n\t\t\t\t\t\t\tprops.strokeColor = feature.strokeColour;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (feature.fillColour) {\n\t\t\t\t\t\t\tprops.fillColor = feature.fillColour;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (feature.fillOpacity) {\n\t\t\t\t\t\t\tprops.fillOpacity = feature.fillOpacity;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (feature.iconRelativeFilePath) {\n\t\t\t\t\t\t\tprops.icon = {\n\t\t\t\t\t\t\t\turl: `${SKYVE.Util.CONTEXT_URL}resources?_n=${feature.iconRelativeFilePath}&_doc=${data._doc}`,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (feature.iconAnchorX && feature.iconAnchorY) {\n\t\t\t\t\t\t\t\tprops.icon.anchor = new google.maps.Point(\n\t\t\t\t\t\t\t\t\tfeature.iconAnchorX,\n\t\t\t\t\t\t\t\t\tfeature.iconAnchorY,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tprops.icon.origin = new google.maps.Point(0, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst overlay = wkt.toObject(props);\n\t\t\t\t\t\tobject.overlays.push(overlay);\n\t\t\t\t\t\toverlay.setMap(display.webmap);\n\n\t\t\t\t\t\tif (feature.zoomable) {\n\t\t\t\t\t\t\t// Can show the info window for zooming\n\t\t\t\t\t\t\toverlay.bizId = item.bizId;\n\t\t\t\t\t\t\toverlay.geometry = feature.geometry;\n\t\t\t\t\t\t\toverlay.fromTimestamp = item.fromTimestamp;\n\t\t\t\t\t\t\toverlay.toTimestamp = item.toTimestamp;\n\t\t\t\t\t\t\toverlay.mod = item.moduleName;\n\t\t\t\t\t\t\toverlay.doc = item.documentName;\n\t\t\t\t\t\t\toverlay.infoMarkup = item.infoMarkup;\n\t\t\t\t\t\t\tgoogle.maps.event.addListener(overlay, \"click\", function (event) {\n\t\t\t\t\t\t\t\tdisplay.click(this, event);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdisplay._objects[item.bizId] = object;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (fit) {\n\t\t\t\tconst bounds = new google.maps.LatLngBounds();\n\t\t\t\tlet someOverlays = false;\n\t\t\t\tfor (const id in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, id)) {\n\t\t\t\t\t\tsomeOverlays = true;\n\t\t\t\t\t\tconst object = display._objects[id];\n\t\t\t\t\t\tconst overlays = object.overlays;\n\t\t\t\t\t\tfor (let i = 0, l = overlays.length; i < l; i++) {\n\t\t\t\t\t\t\tconst overlay = overlays[i];\n\t\t\t\t\t\t\tif (overlay.getPath) {\n\t\t\t\t\t\t\t\t// For polygons and polylines - fit the bounds to the vertices\n\t\t\t\t\t\t\t\tconst path = overlay.getPath();\n\t\t\t\t\t\t\t\tfor (let j = 0, m = path.getLength(); j < m; j++) {\n\t\t\t\t\t\t\t\t\tbounds.extend(path.getAt(j));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (overlay.getPosition) {\n\t\t\t\t\t\t\t\tbounds.extend(overlay.getPosition());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (someOverlays) {\n\t\t\t\t\t// Don't zoom in too far on only one marker\n\t\t\t\t\tif (bounds.getNorthEast().equals(bounds.getSouthWest())) {\n\t\t\t\t\t\tif (display.webmap.getZoom() < 15) {\n\t\t\t\t\t\t\tdisplay.webmap.setZoom(15);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\toverlay.getPosition !== undefined &&\n\t\t\t\t\t\t\ttypeof overlay.getPosition === \"function\"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tdisplay.webmap.setCenter(bounds.getNorthEast());\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdisplay.webmap.fitBounds(bounds);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Centers the map based on the configured map center.\n\t\t * @returns {google.maps.LatLng} - the center coordinates of the map.\n\t\t */\n\t\tcentre: function () {\n\t\t\t// Instantiate WKT if it hasn't been already (at this point Wkt script is loaded)\n\t\t\tif (!wkt) {\n\t\t\t\twkt = new Wkt.Wkt();\n\t\t\t}\n\n\t\t\tlet result = null;\n\t\t\tif (SKYVE.Util.mapCentre) {\n\t\t\t\ttry {\n\t\t\t\t\t// Catch any malformed WKT strings\n\t\t\t\t\twkt.read(SKYVE.Util.mapCentre);\n\t\t\t\t\tconst coord = wkt.components[0];\n\t\t\t\t\tresult = new google.maps.LatLng(coord.y, coord.x);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(`${SKYVE.Util.mapCentre} is malformed WKT Point format`);\n\t\t\t\t\tSKYVE.Util.mapCentre = null;\n\t\t\t\t\tresult = new google.maps.LatLng(0, 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult = new google.maps.LatLng(0, 0);\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * Displays a WKT string value on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {string} value - the WKT string value to display.\n\t\t */\n\t\tscatterValue: function (display, value) {\n\t\t\t// Instantiate WKT if it hasn't been already (at this point Wkt script is loaded)\n\t\t\tif (!wkt) {\n\t\t\t\twkt = new Wkt.Wkt();\n\t\t\t}\n\n\t\t\t// If no value is provided, return early\n\t\t\tif (!value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Catch any malformed WKT strings\n\t\t\t\twkt.read(value);\n\t\t\t} catch (e) {\n\t\t\t\tif (e.name === \"WKTError\") {\n\t\t\t\t\talert(\"The WKT string is invalid.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Convert the WKT to a Google Maps object\n\t\t\tconst obj = wkt.toObject(display.webmap.defaults);\n\n\t\t\t// Handle specific geometry types\n\t\t\tif (wkt.type !== \"polygon\" && wkt.type !== \"linestring\") {\n\t\t\t\tif (obj.setEditable) {\n\t\t\t\t\tobj.setEditable(false); // Disable editing for non-polygon/linestring geometries\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Handle multi-geometries (arrays) and single geometries\n\t\t\tif (Wkt.isArray(obj)) {\n\t\t\t\t// Iterate through multi-geometry objects\n\t\t\t\tfor (const key in obj) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(obj, key) &&\n\t\t\t\t\t\t!Wkt.isArray(obj[key])\n\t\t\t\t\t) {\n\t\t\t\t\t\tobj[key].setMap(display.webmap); // Add each geometry to the map\n\t\t\t\t\t\tdisplay._overlays.push(obj[key]); // Track the overlay\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tobj.setMap(display.webmap); // Add the single geometry to the map\n\t\t\t\tdisplay._overlays.push(obj); // Track the overlay\n\t\t\t}\n\n\t\t\t// Pan the map to the feature\n\t\t\tif (obj.getBounds !== undefined && typeof obj.getBounds === \"function\") {\n\t\t\t\t// For objects with defined bounds (e.g., rectangles, circles)\n\t\t\t\tdisplay.webmap.fitBounds(obj.getBounds());\n\t\t\t} else {\n\t\t\t\tif (obj.getPath !== undefined && typeof obj.getPath === \"function\") {\n\t\t\t\t\t// For polygons and polylines - fit the bounds to the vertices\n\t\t\t\t\tconst bounds = new google.maps.LatLngBounds();\n\t\t\t\t\tconst path = obj.getPath();\n\t\t\t\t\tfor (let i = 0, l = path.getLength(); i < l; i++) {\n\t\t\t\t\t\tbounds.extend(path.getAt(i));\n\t\t\t\t\t}\n\t\t\t\t\tdisplay.webmap.fitBounds(bounds);\n\t\t\t\t} else {\n\t\t\t\t\t// For points (markers)\n\t\t\t\t\tif (display.webmap.getZoom() < 15) {\n\t\t\t\t\t\tdisplay.webmap.setZoom(15); // Ensure a minimum zoom level\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\tobj.getPosition !== undefined &&\n\t\t\t\t\t\ttypeof obj.getPosition === \"function\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tdisplay.webmap.setCenter(obj.getPosition()); // Center the map on the marker\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Clears all overlays from the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tclear: function (display) {\n\t\t\t// Remove each overlay from the map\n\t\t\tfor (let i = 0, l = display._overlays.length; i < l; i++) {\n\t\t\t\tdisplay._overlays[i].setMap(null);\n\t\t\t}\n\t\t\t// Reset the overlays array\n\t\t\tdisplay._overlays.length = 0;\n\t\t},\n\n\t\t/**\n\t\t * Initializes drawing tools on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tdrawingTools: function (display) {\n\t\t\t// Instantiate WKT if it hasn't been already (at this point Wkt script is loaded)\n\t\t\tif (!wkt) {\n\t\t\t\twkt = new Wkt.Wkt();\n\t\t\t}\n\n\t\t\t// Initialize the drawing manager with the specified drawing modes\n\t\t\tdisplay.webmap.drawingManager = new google.maps.drawing.DrawingManager({\n\t\t\t\tdrawingControlOptions: {\n\t\t\t\t\tposition: google.maps.ControlPosition.LEFT_BOTTOM,\n\t\t\t\t\tdrawingModes: drawingModes(display.drawingTools), // Get the allowed drawing modes\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Add the drawing manager to the map\n\t\t\tdisplay.webmap.drawingManager.setMap(display.webmap);\n\n\t\t\t// Listen for the completion of a drawing operation\n\t\t\tgoogle.maps.event.addListener(\n\t\t\t\tdisplay.webmap.drawingManager,\n\t\t\t\t\"overlaycomplete\",\n\t\t\t\tfunction (event) {\n\t\t\t\t\t// Clear existing overlays from the map\n\t\t\t\t\tSKYVE.GMap.clear(display);\n\n\t\t\t\t\t// Set the drawing mode to \"pan\" (the hand) so users can immediately edit\n\t\t\t\t\tthis.setDrawingMode(null);\n\n\t\t\t\t\t// Add the new overlay to the map and track it\n\t\t\t\t\tdisplay._overlays.push(event.overlay);\n\n\t\t\t\t\t// Convert the overlay to a WKT string and update the field value\n\t\t\t\t\twkt.fromObject(event.overlay);\n\t\t\t\t\tconst wktValue = wkt.write();\n\t\t\t\t\tdisplay.setFieldValue(wktValue);\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Adds a geolocation control to the map, allowing users to set their current position.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tgeoLocator: function (display) {\n\t\t\tif (navigator.geolocation) {\n\t\t\t\t// Create a custom control for geolocation\n\t\t\t\tconst control = document.createElement(\"DIV\");\n\t\t\t\tObject.assign(control.style, {\n\t\t\t\t\tbackgroundColor: \"#fff\",\n\t\t\t\t\tborder: \"2px solid #fff\",\n\t\t\t\t\tborderRadius: \"3px\",\n\t\t\t\t\tboxShadow: \"0 2px 6px rgba(0,0,0,.3)\",\n\t\t\t\t\tcursor: \"pointer\",\n\t\t\t\t\tmargin: \"10px\",\n\t\t\t\t\tpadding: \"5px\",\n\t\t\t\t\ttextAlign: \"center\",\n\t\t\t\t});\n\t\t\t\tcontrol.title = \"Click to set your current position from your GPS\";\n\t\t\t\tcontrol.innerHTML = '<i class=\"fa-solid fa-location-crosshairs\"></i>';\n\t\t\t\tcontrol.index = 1;\n\n\t\t\t\t// Add a click event listener to the control\n\t\t\t\tcontrol.addEventListener(\"click\", function () {\n\t\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\t\tfunction (position) {\n\t\t\t\t\t\t\t// Clear existing overlays from the map\n\t\t\t\t\t\t\tSKYVE.GMap.clear(display);\n\n\t\t\t\t\t\t\t// Set the drawing mode to \"pan\" (the hand) so users can immediately edit\n\t\t\t\t\t\t\tdisplay.webmap.drawingManager.setDrawingMode(null);\n\n\t\t\t\t\t\t\t// Create a marker at the user's current position\n\t\t\t\t\t\t\tconst pos = {\n\t\t\t\t\t\t\t\tlat: position.coords.latitude,\n\t\t\t\t\t\t\t\tlng: position.coords.longitude,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tconst marker = new google.maps.Marker({\n\t\t\t\t\t\t\t\tposition: pos,\n\t\t\t\t\t\t\t\tmap: display.webmap,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Track the marker and update the field value with the WKT string\n\t\t\t\t\t\t\tdisplay._overlays.push(marker);\n\t\t\t\t\t\t\tdisplay.setFieldValue(`POINT (${pos.lng} ${pos.lat})`);\n\n\t\t\t\t\t\t\t// Zoom and center the map on the marker\n\t\t\t\t\t\t\tdisplay.webmap.setZoom(15);\n\t\t\t\t\t\t\tdisplay.webmap.setCenter(pos);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction (error) {\n\t\t\t\t\t\t\talert(error.message); // Handle geolocation errors\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ enableHighAccuracy: true },\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\t// Add the control to the map\n\t\t\t\tdisplay.webmap.geolocator = control;\n\t\t\t\tdisplay.webmap.controls[google.maps.ControlPosition.LEFT].push(control);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Enables or disables the drawing tools and geolocation control.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {boolean} disabled - whether to disable the controls.\n\t\t */\n\t\tsetDisabled: function (display, disabled) {\n\t\t\tif (display.webmap) {\n\t\t\t\t// Disable or enable the drawing manager\n\t\t\t\tif (display.webmap.drawingManager) {\n\t\t\t\t\tdisplay.webmap.drawingManager.setOptions({\n\t\t\t\t\t\tdrawingControl: !disabled,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Hide or show the geolocation control\n\t\t\t\tif (display.webmap.geolocator) {\n\t\t\t\t\tdisplay.webmap.geolocator.style.display = disabled ? \"none\" : \"block\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds refresh controls to the map, allowing users to set the refresh rate and toggle auto-refresh.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\trefreshControls: function (display) {\n\t\t\t// Create a custom control for refresh settings\n\t\t\tconst control = document.createElement(\"DIV\");\n\t\t\tObject.assign(control.style, {\n\t\t\t\tbackgroundColor: \"#fff\",\n\t\t\t\tborder: \"2px solid #fff\",\n\t\t\t\tborderRadius: \"3px\",\n\t\t\t\tboxShadow: \"0 2px 6px rgba(0,0,0,.3)\",\n\t\t\t\tcursor: \"pointer\",\n\t\t\t\tmargin: \"10px\",\n\t\t\t\tpadding: \"5px\",\n\t\t\t\ttextAlign: \"center\",\n\t\t\t});\n\t\t\tcontrol.title = \"Click to set the refresh rate of the map\";\n\t\t\tcontrol.innerHTML = `\n\t\t\t\t\t\t        <input type=\"number\" min=\"0\" max=\"500\" step=\"1\" value=\"${display.refreshTime}\" size=\"3\" />\n\t\t\t\t\t\t        <input type=\"checkbox\" ${display._refreshRequired ? \"checked\" : \"\"}><label>Refresh</label>\n\t\t\t\t\t\t    `;\n\t\t\tcontrol.index = 1;\n\n\t\t\t// Add event listener for the refresh time input\n\t\t\tcontrol.children[0].addEventListener(\"change\", function () {\n\t\t\t\tdisplay.refreshTime = Number(this.value); // Update the refresh time\n\t\t\t\tif (display._refreshRequired) {\n\t\t\t\t\tif (display._intervalId) {\n\t\t\t\t\t\tclearInterval(display._intervalId); // Clear the existing interval\n\t\t\t\t\t}\n\t\t\t\t\t// Set a new interval with the updated refresh time\n\t\t\t\t\tdisplay._intervalId = setInterval(\n\t\t\t\t\t\tdisplay.rerender.bind(display),\n\t\t\t\t\t\tdisplay.refreshTime * 1000,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add event listener for the refresh toggle checkbox\n\t\t\tcontrol.children[1].addEventListener(\"click\", function () {\n\t\t\t\tdisplay._refreshRequired = this.checked; // Update the refresh required flag\n\t\t\t\tif (display._intervalId) {\n\t\t\t\t\tclearInterval(display._intervalId); // Clear the existing interval\n\t\t\t\t\tdisplay._intervalId = null;\n\t\t\t\t}\n\t\t\t\tif (display._refreshRequired) {\n\t\t\t\t\tdisplay.rerender(); // Trigger an immediate rerender\n\t\t\t\t\t// Set a new interval with the current refresh time\n\t\t\t\t\tdisplay._intervalId = setInterval(\n\t\t\t\t\t\tdisplay.rerender.bind(display),\n\t\t\t\t\t\tdisplay.refreshTime * 1000,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add the control to the map\n\t\t\tdisplay.webmap.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(\n\t\t\t\tcontrol,\n\t\t\t);\n\t\t},\n\t};\n})();\n\nSKYVE.Leaflet = (function () {\n\tconst numberRegexp = /[-+]?([0-9]*\\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/;\n\tconst tuples = new RegExp(\n\t\t\"^\" + numberRegexp.source + \"(\\\\s\" + numberRegexp.source + \"){1,}\",\n\t); // Matches sequences like '100 100' or '100 100 100'\n\n\t/**\n\t * Parses a WKT string and returns a GeoJSON geometry object.\n\t * @param {string} input - the WKT geometry string to parse.\n\t * @returns {?Object} a GeoJSON geometry object, or null if parsing fails.\n\t */\n\tfunction parse(input) {\n\t\tconst parts = input.split(\";\");\n\t\tlet wktString = parts.pop(); // Extract the WKT string\n\t\tconst srid = (parts.shift() || \"\").split(\"=\").pop(); // Extract the SRID if present\n\n\t\tlet i = 0; // Current position in the WKT string\n\n\t\t/**\n\t\t * Matches a regular expression at the current position in the WKT string.\n\t\t * @param {RegExp} re - the regular expression to match.\n\t\t * @returns {?string} the matched string, or null if no match is found.\n\t\t */\n\t\tfunction $(re) {\n\t\t\tconst match = wktString.substring(i).match(re);\n\t\t\tif (!match) return null;\n\t\t\ti += match[0].length; // Advance the position\n\t\t\treturn match[0];\n\t\t}\n\n\t\t/**\n\t\t * Adds a CRS (Coordinate Reference System) to a GeoJSON object if an SRID is present.\n\t\t * @param {Object} obj - the GeoJSON object.\n\t\t * @returns {Object} the GeoJSON object with an optional CRS.\n\t\t */\n\t\tfunction crs(obj) {\n\t\t\tif (obj && srid.match(/\\d+/)) {\n\t\t\t\tobj.crs = {\n\t\t\t\t\ttype: \"name\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tname: `urn:ogc:def:crs:EPSG::${srid}`,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn obj;\n\t\t}\n\n\t\t/**\n\t\t * Skips whitespace in the WKT string.\n\t\t */\n\t\tfunction white() {\n\t\t\t$(/^\\s*/);\n\t\t}\n\n\t\t/**\n\t\t * Parses multi-coordinates (e.g., for polygons or multi-geometries).\n\t\t * @returns {?Array<Array<number>>} an array of coordinate rings, or null if parsing fails.\n\t\t */\n\t\tfunction multicoords() {\n\t\t\twhite();\n\t\t\tlet depth = 0; // Tracks nesting depth for parentheses\n\t\t\tconst rings = []; // Stores the parsed coordinate rings\n\t\t\tconst stack = [rings]; // Tracks the current context for nested coordinates\n\t\t\tlet pointer = rings; // Points to the current coordinate array\n\t\t\tlet elem;\n\n\t\t\t// Parse coordinates until the end of the WKT string\n\t\t\twhile (\n\t\t\t\t(elem =\n\t\t\t\t\t$(/^(\\()/) || // Match opening parenthesis\n\t\t\t\t\t$(/^(\\))/) || // Match closing parenthesis\n\t\t\t\t\t$(/^(,)/) || // Match comma separator\n\t\t\t\t\t$(tuples)) // Match coordinate tuples\n\t\t\t) {\n\t\t\t\tif (elem === \"(\") {\n\t\t\t\t\t// Start a new nested coordinate array\n\t\t\t\t\tstack.push(pointer);\n\t\t\t\t\tpointer = [];\n\t\t\t\t\tstack[stack.length - 1].push(pointer);\n\t\t\t\t\tdepth++;\n\t\t\t\t} else if (elem === \")\") {\n\t\t\t\t\t// End the current nested coordinate array\n\t\t\t\t\tif (pointer.length === 0) return null; // Handle empty rings\n\t\t\t\t\tpointer = stack.pop();\n\t\t\t\t\tif (!pointer) return null; // Handle malformed input\n\t\t\t\t\tdepth--;\n\t\t\t\t\tif (depth === 0) break; // Exit if we've closed all nested levels\n\t\t\t\t} else if (elem === \",\") {\n\t\t\t\t\t// Start a new coordinate array at the same nesting level\n\t\t\t\t\tpointer = [];\n\t\t\t\t\tstack[stack.length - 1].push(pointer);\n\t\t\t\t} else if (!elem.split(/\\s/g).some(isNaN)) {\n\t\t\t\t\t// Parse coordinate tuples (e.g., \"10 20\")\n\t\t\t\t\tArray.prototype.push.apply(\n\t\t\t\t\t\tpointer,\n\t\t\t\t\t\telem.split(/\\s/g).map(parseFloat),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn null; // Handle invalid coordinates\n\t\t\t\t}\n\t\t\t\twhite(); // Skip any whitespace\n\t\t\t}\n\n\t\t\tif (depth !== 0) return null; // Ensure all parentheses are closed\n\n\t\t\treturn rings;\n\t\t}\n\n\t\t/**\n\t\t * Parses coordinates from the WKT string.\n\t\t * @returns {?Array<Array<number>>} an array of coordinate arrays, or null if parsing fails.\n\t\t */\n\t\tfunction coords() {\n\t\t\tconst list = []; // Stores the parsed coordinate arrays\n\t\t\tlet item = []; // Stores the current coordinate array\n\t\t\tlet pt;\n\n\t\t\t// Parse coordinates until the end of the WKT string\n\t\t\twhile (\n\t\t\t\t(pt =\n\t\t\t\t\t$(tuples) || // Match coordinate tuples (e.g., \"10 20\")\n\t\t\t\t\t$(/^(,)/)) // Match comma separator\n\t\t\t) {\n\t\t\t\tif (pt === \",\") {\n\t\t\t\t\t// Start a new coordinate array\n\t\t\t\t\tlist.push(item);\n\t\t\t\t\titem = [];\n\t\t\t\t} else if (!pt.split(/\\s/g).some(isNaN)) {\n\t\t\t\t\t// Parse coordinate tuples (e.g., \"10 20\")\n\t\t\t\t\tif (!item) item = [];\n\t\t\t\t\tArray.prototype.push.apply(item, pt.split(/\\s/g).map(parseFloat));\n\t\t\t\t}\n\t\t\t\twhite(); // Skip any whitespace\n\t\t\t}\n\n\t\t\t// Add the last coordinate array to the list\n\t\t\tif (item) list.push(item);\n\t\t\telse return null; // Handle empty coordinates\n\n\t\t\treturn list.length ? list : null; // Return null if no coordinates were parsed\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT Point geometry and returns a GeoJSON Point object.\n\t\t * @returns {?Object} a GeoJSON Point object, or null if parsing fails.\n\t\t */\n\t\tfunction point() {\n\t\t\t// Match the \"POINT\" keyword (case-insensitive)\n\t\t\tif (!$(/^(point(\\sz)?)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Match the opening parenthesis\n\t\t\tif (!$(/^(\\()/)) return null;\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = coords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Match the closing parenthesis\n\t\t\tif (!$(/^(\\))/)) return null;\n\n\t\t\t// Return the GeoJSON Point object\n\t\t\treturn {\n\t\t\t\ttype: \"Point\",\n\t\t\t\tcoordinates: c[0], // Use the first coordinate array\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT MultiPoint geometry and returns a GeoJSON MultiPoint object.\n\t\t * @returns {?Object} a GeoJSON MultiPoint object, or null if parsing fails.\n\t\t */\n\t\tfunction multipoint() {\n\t\t\t// Match the \"MULTIPOINT\" keyword (case-insensitive)\n\t\t\tif (!$(/^(multipoint)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Reformat the coordinates to match the standard WKT format\n\t\t\tconst newCoordsFormat = wktString\n\t\t\t\t.substring(wktString.indexOf(\"(\") + 1, wktString.length - 1)\n\t\t\t\t.replace(/\\(/g, \"\")\n\t\t\t\t.replace(/\\)/g, \"\");\n\t\t\twktString = `MULTIPOINT (${newCoordsFormat})`;\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = multicoords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Return the GeoJSON MultiPoint object\n\t\t\treturn {\n\t\t\t\ttype: \"MultiPoint\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT MultiLineString geometry and returns a GeoJSON MultiLineString object.\n\t\t * @returns {?Object} a GeoJSON MultiLineString object, or null if parsing fails.\n\t\t */\n\t\tfunction multilinestring() {\n\t\t\t// Match the \"MULTILINESTRING\" keyword (case-insensitive)\n\t\t\tif (!$(/^(multilinestring)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = multicoords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Return the GeoJSON MultiLineString object\n\t\t\treturn {\n\t\t\t\ttype: \"MultiLineString\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT LineString geometry and returns a GeoJSON LineString object.\n\t\t * @returns {?Object} a GeoJSON LineString object, or null if parsing fails.\n\t\t */\n\t\tfunction linestring() {\n\t\t\t// Match the \"LINESTRING\" keyword (case-insensitive)\n\t\t\tif (!$(/^(linestring(\\sz)?)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Match the opening parenthesis\n\t\t\tif (!$(/^(\\()/)) return null;\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = coords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\n\t\t\t// Match the closing parenthesis\n\t\t\tif (!$(/^(\\))/)) return null;\n\n\t\t\t// Return the GeoJSON LineString object\n\t\t\treturn {\n\t\t\t\ttype: \"LineString\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT Polygon geometry and returns a GeoJSON Polygon object.\n\t\t * @returns {?Object} a GeoJSON Polygon object, or null if parsing fails.\n\t\t */\n\t\tfunction polygon() {\n\t\t\t// Match the \"POLYGON\" keyword (case-insensitive)\n\t\t\tif (!$(/^(polygon(\\sz)?)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = multicoords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\n\t\t\t// Return the GeoJSON Polygon object\n\t\t\treturn {\n\t\t\t\ttype: \"Polygon\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT MultiPolygon geometry and returns a GeoJSON MultiPolygon object.\n\t\t * @returns {?Object} a GeoJSON MultiPolygon object, or null if parsing fails.\n\t\t */\n\t\tfunction multipolygon() {\n\t\t\t// Match the \"MULTIPOLYGON\" keyword (case-insensitive)\n\t\t\tif (!$(/^(multipolygon)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Parse the coordinates\n\t\t\tconst c = multicoords();\n\t\t\tif (!c) return null; // Handle invalid coordinates\n\n\t\t\t// Return the GeoJSON MultiPolygon object\n\t\t\treturn {\n\t\t\t\ttype: \"MultiPolygon\",\n\t\t\t\tcoordinates: c,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses a WKT GeometryCollection and returns a GeoJSON GeometryCollection object.\n\t\t * @returns {?Object} a GeoJSON GeometryCollection object, or null if parsing fails.\n\t\t */\n\t\tfunction geometrycollection() {\n\t\t\tconst geometries = []; // Stores the parsed geometries\n\t\t\tlet geometry;\n\n\t\t\t// Match the \"GEOMETRYCOLLECTION\" keyword (case-insensitive)\n\t\t\tif (!$(/^(geometrycollection)/i)) return null;\n\t\t\twhite(); // Skip any whitespace\n\n\t\t\t// Match the opening parenthesis\n\t\t\tif (!$(/^(\\()/)) return null;\n\n\t\t\t// Parse geometries until the end of the WKT string\n\t\t\twhile ((geometry = root())) {\n\t\t\t\tgeometries.push(geometry); // Add the parsed geometry to the collection\n\t\t\t\twhite(); // Skip any whitespace\n\t\t\t\t$(/^(,)/); // Match the comma separator\n\t\t\t\twhite(); // Skip any whitespace\n\t\t\t}\n\n\t\t\t// Match the closing parenthesis\n\t\t\tif (!$(/^(\\))/)) return null;\n\n\t\t\t// Return the GeoJSON GeometryCollection object\n\t\t\treturn {\n\t\t\t\ttype: \"GeometryCollection\",\n\t\t\t\tgeometries: geometries,\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses the root geometry from the WKT string.\n\t\t * @returns {?Object} a GeoJSON geometry object, or null if parsing fails.\n\t\t */\n\t\tfunction root() {\n\t\t\treturn (\n\t\t\t\tpoint() || // Try parsing a Point\n\t\t\t\tlinestring() || // Try parsing a LineString\n\t\t\t\tpolygon() || // Try parsing a Polygon\n\t\t\t\tmultipoint() || // Try parsing a MultiPoint\n\t\t\t\tmultilinestring() || // Try parsing a MultiLineString\n\t\t\t\tmultipolygon() || // Try parsing a MultiPolygon\n\t\t\t\tgeometrycollection() // Try parsing a GeometryCollection\n\t\t\t);\n\t\t}\n\n\t\treturn crs(root());\n\t}\n\n\t/**\n\t * Converts a GeoJSON object into a WKT string.\n\t * @param {Object} gj - the GeoJSON object to convert.\n\t * @returns {string} the WKT representation of the GeoJSON object.\n\t * @throws {Error} if the input is not a valid GeoJSON Feature or geometry object.\n\t */\n\tfunction stringify(gj) {\n\t\t// Handle GeoJSON Feature objects by extracting the geometry\n\t\tif (gj.type === \"Feature\") {\n\t\t\tgj = gj.geometry;\n\t\t}\n\n\t\t/**\n\t\t * Converts a coordinate pair into a WKT string.\n\t\t * @param {Array<number>} c - the coordinate pair (e.g., [10, 20]).\n\t\t * @returns {string} the WKT representation of the coordinate pair.\n\t\t */\n\t\tfunction pairWKT(c) {\n\t\t\treturn c.join(\" \");\n\t\t}\n\n\t\t/**\n\t\t * Converts a ring of coordinates into a WKT string.\n\t\t * @param {Array<Array<number>>} r - the ring of coordinates.\n\t\t * @returns {string} the WKT representation of the ring.\n\t\t */\n\t\tfunction ringWKT(r) {\n\t\t\treturn r.map(pairWKT).join(\", \");\n\t\t}\n\n\t\t/**\n\t\t * Converts multiple rings of coordinates into a WKT string.\n\t\t * @param {Array<Array<Array<number>>>} r - the rings of coordinates.\n\t\t * @returns {string} the WKT representation of the rings.\n\t\t */\n\t\tfunction ringsWKT(r) {\n\t\t\treturn r.map(ringWKT).map(wrapParens).join(\", \");\n\t\t}\n\n\t\t/**\n\t\t * Converts multiple sets of rings into a WKT string.\n\t\t * @param {Array<Array<Array<Array<number>>>>} r - the sets of rings.\n\t\t * @returns {string} the WKT representation of the sets of rings.\n\t\t */\n\t\tfunction multiRingsWKT(r) {\n\t\t\treturn r.map(ringsWKT).map(wrapParens).join(\", \");\n\t\t}\n\n\t\t/**\n\t\t * Wraps a string in parentheses.\n\t\t * @param {string} s - the string to wrap.\n\t\t * @returns {string} the wrapped string.\n\t\t */\n\t\tfunction wrapParens(s) {\n\t\t\treturn `(${s})`;\n\t\t}\n\n\t\t// Convert the GeoJSON object to WKT based on its type\n\t\tswitch (gj.type) {\n\t\t\tcase \"Point\":\n\t\t\t\treturn `POINT (${pairWKT(gj.coordinates)})`;\n\t\t\tcase \"LineString\":\n\t\t\t\treturn `LINESTRING (${ringWKT(gj.coordinates)})`;\n\t\t\tcase \"Polygon\":\n\t\t\t\treturn `POLYGON (${ringsWKT(gj.coordinates)})`;\n\t\t\tcase \"MultiPoint\":\n\t\t\t\treturn `MULTIPOINT (${ringWKT(gj.coordinates)})`;\n\t\t\tcase \"MultiPolygon\":\n\t\t\t\treturn `MULTIPOLYGON (${multiRingsWKT(gj.coordinates)})`;\n\t\t\tcase \"MultiLineString\":\n\t\t\t\treturn `MULTILINESTRING (${ringsWKT(gj.coordinates)})`;\n\t\t\tcase \"GeometryCollection\":\n\t\t\t\treturn `GEOMETRYCOLLECTION (${gj.geometries.map(stringify).join(\", \")})`;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\"stringify requires a valid GeoJSON Feature or geometry object as input\",\n\t\t\t\t);\n\t\t}\n\t}\n\n\t// Public methods\n\treturn {\n\t\t/**\n\t\t * Scatters data points on the map, updating or removing overlays as needed.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {Object} data - the response from the map servlet to scatter.\n\t\t * @param {boolean} fit - whether to fit the map bounds to the data.\n\t\t * @param {boolean} delta - whether to only remove or update if changed.\n\t\t */\n\t\tscatter: function (display, data, fit, delta) {\n\t\t\tconst items = data.items;\n\n\t\t\t// If there is no data, there is probably an error, so just return early\n\t\t\tif (!items) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (delta) {\n\t\t\t\t// Remove overlays not present in the data\n\t\t\t\tfor (const bizId in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, bizId)) {\n\t\t\t\t\t\tlet found = false;\n\t\t\t\t\t\tfor (let i = 0, l = items.length; i < l; i++) {\n\t\t\t\t\t\t\tif (items[i].bizId === bizId) {\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t\tconst deletedObject = display._objects[bizId];\n\t\t\t\t\t\t\tfor (let i = 0, l = deletedObject.overlays.length; i < l; i++) {\n\t\t\t\t\t\t\t\tdisplay.webmap.removeLayer(deletedObject.overlays[i]);\n\t\t\t\t\t\t\t\tdeletedObject.overlays[i] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdelete deletedObject.overlays;\n\t\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Remove all overlays\n\t\t\t\tfor (const bizId in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, bizId)) {\n\t\t\t\t\t\tconst deletedObject = display._objects[bizId];\n\t\t\t\t\t\tfor (let i = 0, l = deletedObject.overlays.length; i < l; i++) {\n\t\t\t\t\t\t\tdisplay.webmap.removeLayer(deletedObject.overlays[i]);\n\t\t\t\t\t\t\tdeletedObject.overlays[i] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete deletedObject.overlays;\n\t\t\t\t\t\tdelete display._objects[bizId];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add/update overlays from the data\n\t\t\tfor (let i = 0, l = items.length; i < l; i++) {\n\t\t\t\tconst item = items[i];\n\n\t\t\t\tlet object = display._objects[item.bizId];\n\t\t\t\tif (object) {\n\t\t\t\t\t// If the WKTs have changed, delete the overlay and recreate it\n\t\t\t\t\tlet same = object.overlays.length === item.features.length;\n\t\t\t\t\tif (same) {\n\t\t\t\t\t\tfor (let j = 0, m = object.overlays.length; j < m; j++) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tobject.overlays[j].getLayers()[0].zoomData.geometry !==\n\t\t\t\t\t\t\t\titem.features[j].geometry\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tsame = false;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!same) {\n\t\t\t\t\t\tfor (let j = 0, m = object.overlays.length; j < m; j++) {\n\t\t\t\t\t\t\tdisplay.webmap.removeLayer(object.overlays[j]);\n\t\t\t\t\t\t\tobject.overlays[j] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete object.overlays;\n\t\t\t\t\t\tdelete display._objects[item.bizId];\n\t\t\t\t\t\tobject = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!object) {\n\t\t\t\t\t// Object could have been nulled just above\n\t\t\t\t\tobject = { overlays: [] };\n\t\t\t\t\tfor (let j = 0, m = item.features.length; j < m; j++) {\n\t\t\t\t\t\tconst itemFeature = item.features[j];\n\n\t\t\t\t\t\tconst geometry = parse(itemFeature.geometry);\n\t\t\t\t\t\tgeometry.properties = { editable: itemFeature.editable };\n\t\t\t\t\t\tif (itemFeature.strokeColour) {\n\t\t\t\t\t\t\tgeometry.properties.color = itemFeature.strokeColour;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (itemFeature.fillColour) {\n\t\t\t\t\t\t\tgeometry.properties.fillColor = itemFeature.fillColour;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (itemFeature.fillOpacity) {\n\t\t\t\t\t\t\tgeometry.properties.fillOpacity = itemFeature.fillOpacity;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (itemFeature.iconRelativeFilePath) {\n\t\t\t\t\t\t\tconst icon = {\n\t\t\t\t\t\t\t\ticonUrl: `resources?_n=${itemFeature.iconRelativeFilePath}&_doc=${data._doc}`,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (itemFeature.iconAnchorX && itemFeature.iconAnchorY) {\n\t\t\t\t\t\t\t\ticon.iconAnchor = [\n\t\t\t\t\t\t\t\t\titemFeature.iconAnchorX,\n\t\t\t\t\t\t\t\t\titemFeature.iconAnchorY,\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgeometry.properties.icon = icon;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst overlay = L.geoJson(geometry, {\n\t\t\t\t\t\t\tpointToLayer(point, latlng) {\n\t\t\t\t\t\t\t\tconst properties = point.properties;\n\t\t\t\t\t\t\t\tdelete point.properties;\n\n\t\t\t\t\t\t\t\tif (properties.icon) {\n\t\t\t\t\t\t\t\t\tproperties.icon = L.icon(properties.icon);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn L.marker(latlng, properties);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstyle: function (feature) {\n\t\t\t\t\t\t\t\tconst properties = feature.geometry.properties;\n\t\t\t\t\t\t\t\tdelete feature.geometry.properties;\n\t\t\t\t\t\t\t\treturn properties;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonEachFeature: function (feature, layer) {\n\t\t\t\t\t\t\t\tif (itemFeature.zoomable) {\n\t\t\t\t\t\t\t\t\t// Can show the info window for zooming\n\t\t\t\t\t\t\t\t\tlayer.zoomData = {\n\t\t\t\t\t\t\t\t\t\tbizId: item.bizId,\n\t\t\t\t\t\t\t\t\t\tgeometry: itemFeature.geometry,\n\t\t\t\t\t\t\t\t\t\tfromTimestamp: item.fromTimestamp,\n\t\t\t\t\t\t\t\t\t\ttoTimestamp: item.toTimestamp,\n\t\t\t\t\t\t\t\t\t\tmod: item.moduleName,\n\t\t\t\t\t\t\t\t\t\tdoc: item.documentName,\n\t\t\t\t\t\t\t\t\t\tinfoMarkup: item.infoMarkup,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tlayer.bindPopup(function (layer) {\n\t\t\t\t\t\t\t\t\t\treturn display.click(layer);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\tobject.overlays.push(overlay);\n\t\t\t\t\t\tdisplay.webmap.addLayer(overlay);\n\t\t\t\t\t}\n\t\t\t\t\tdisplay._objects[item.bizId] = object;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (fit) {\n\t\t\t\tconst bounds = L.latLngBounds();\n\t\t\t\tlet someOverlays = false;\n\t\t\t\tfor (const id in display._objects) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(display._objects, id)) {\n\t\t\t\t\t\tsomeOverlays = true;\n\t\t\t\t\t\tconst object = display._objects[id];\n\t\t\t\t\t\tconst overlays = object.overlays;\n\t\t\t\t\t\tfor (let i = 0, l = overlays.length; i < l; i++) {\n\t\t\t\t\t\t\tconst overlay = overlays[i];\n\t\t\t\t\t\t\tbounds.extend(overlay.getBounds());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (someOverlays) {\n\t\t\t\t\t// Don't zoom in too far on only one marker\n\t\t\t\t\tdisplay.webmap.fitBounds(bounds, { maxZoom: 15 });\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Retrieves the center coordinates of the map based on the configured map center.\n\t\t * @returns {Array<number>} the center coordinates as [latitude, longitude], or [0, 0] if invalid.\n\t\t */\n\t\tcentre: function () {\n\t\t\tlet result = [0, 0]; // Default center coordinates\n\n\t\t\tif (SKYVE.Util.mapCentre) {\n\t\t\t\ttry {\n\t\t\t\t\t// Parse the WKT string to get the center coordinates\n\t\t\t\t\tconst centre = parse(SKYVE.Util.mapCentre);\n\t\t\t\t\tresult = [centre.coordinates[1], centre.coordinates[0]]; // [latitude, longitude]\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(`${SKYVE.Util.mapCentre} is malformed WKT Point format`);\n\t\t\t\t\tSKYVE.Util.mapCentre = null; // Reset the map center if invalid\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * Displays a WKT string value on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {string} value - the WKT string value to display.\n\t\t */\n\t\tscatterValue: function (display, value) {\n\t\t\t// If no value is provided, return early\n\t\t\tif (!value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet obj = null;\n\t\t\ttry {\n\t\t\t\t// Parse the WKT string and create a GeoJSON layer\n\t\t\t\tobj = L.geoJson(parse(value));\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(`The WKT string ${value} is invalid.`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Add the GeoJSON layer to the map and track it\n\t\t\tobj.addTo(display.webmap);\n\t\t\tdisplay._overlays.push(obj);\n\n\t\t\t// Pan the map to the feature\n\t\t\tdisplay.webmap.fitBounds(obj.getBounds(), { maxZoom: 15 });\n\t\t},\n\n\t\t/**\n\t\t * Clears all overlays from the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tclear: function (display) {\n\t\t\t// Remove each overlay from the map\n\t\t\tfor (let i = 0, l = display._overlays.length; i < l; i++) {\n\t\t\t\tdisplay.webmap.removeLayer(display._overlays[i]);\n\t\t\t}\n\t\t\t// Reset the overlays array\n\t\t\tdisplay._overlays.length = 0;\n\t\t},\n\n\t\t/**\n\t\t * Initializes drawing tools on the map based on the specified drawing tools.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tdrawingTools: function (display) {\n\t\t\tconst drawingTools = display.drawingTools;\n\n\t\t\t/**\n\t\t\t * Custom Leaflet control for drawing tools.\n\t\t\t */\n\t\t\tL.EditControl = L.Control.extend({\n\t\t\t\toptions: {\n\t\t\t\t\tposition: \"topright\", // Position of the control on the map\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t * Creates the control container and adds drawing tool buttons.\n\t\t\t\t * @param {L.Map} map - the Leaflet map instance.\n\t\t\t\t * @returns {HTMLElement} the control container.\n\t\t\t\t */\n\t\t\t\tonAdd: function (map) {\n\t\t\t\t\tconst container = L.DomUtil.create(\n\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\"leaflet-control leaflet-bar\",\n\t\t\t\t\t);\n\n\t\t\t\t\t// Add marker tool if enabled\n\t\t\t\t\tif (\n\t\t\t\t\t\t!drawingTools ||\n\t\t\t\t\t\tdrawingTools === \"point\" ||\n\t\t\t\t\t\tdrawingTools === \"pointAndLine\" ||\n\t\t\t\t\t\tdrawingTools === \"pointAndPolygon\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst markerLink = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\tmarkerLink.href = \"#\";\n\t\t\t\t\t\tmarkerLink.title = \"Create a new marker\";\n\t\t\t\t\t\tmarkerLink.innerHTML = '<i class=\"fa-solid fa-location-dot\"></i>';\n\t\t\t\t\t\tL.DomEvent.on(markerLink, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\tmarkerLink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\twindow.LAYER = display.webmap.editTools.startMarker.call(\n\t\t\t\t\t\t\t\t\tmap.editTools,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add polyline tool if enabled\n\t\t\t\t\tif (\n\t\t\t\t\t\t!drawingTools ||\n\t\t\t\t\t\tdrawingTools === \"line\" ||\n\t\t\t\t\t\tdrawingTools === \"pointAndLine\" ||\n\t\t\t\t\t\tdrawingTools === \"lineAndPolygon\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst polylineLink = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\tpolylineLink.href = \"#\";\n\t\t\t\t\t\tpolylineLink.title = \"Create a new line\";\n\t\t\t\t\t\tpolylineLink.innerHTML =\n\t\t\t\t\t\t\t'<i class=\"fa-solid fa-diagram-project\"></i>';\n\t\t\t\t\t\tL.DomEvent.on(polylineLink, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\tpolylineLink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\twindow.LAYER = display.webmap.editTools.startPolyline.call(\n\t\t\t\t\t\t\t\t\tmap.editTools,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add polygon and rectangle tools if enabled\n\t\t\t\t\tif (\n\t\t\t\t\t\t!drawingTools ||\n\t\t\t\t\t\tdrawingTools === \"polygon\" ||\n\t\t\t\t\t\tdrawingTools === \"pointAndPolygon\" ||\n\t\t\t\t\t\tdrawingTools === \"lineAndPolygon\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst rectangleLink = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\trectangleLink.href = \"#\";\n\t\t\t\t\t\trectangleLink.title = \"Create a new rectangle\";\n\t\t\t\t\t\trectangleLink.innerHTML =\n\t\t\t\t\t\t\t'<i class=\"fa-solid fa-vector-square\"></i>';\n\t\t\t\t\t\tL.DomEvent.on(rectangleLink, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\trectangleLink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\twindow.LAYER = display.webmap.editTools.startRectangle.call(\n\t\t\t\t\t\t\t\t\tmap.editTools,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst polygonLink = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\tpolygonLink.href = \"#\";\n\t\t\t\t\t\tpolygonLink.title = \"Create a new polygon\";\n\t\t\t\t\t\tpolygonLink.innerHTML = '<i class=\"fa-solid fa-draw-polygon\"></i>';\n\t\t\t\t\t\tL.DomEvent.on(polygonLink, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\tpolygonLink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\twindow.LAYER = display.webmap.editTools.startPolygon.call(\n\t\t\t\t\t\t\t\t\tmap.editTools,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn container;\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Add the drawing control to the map\n\t\t\tdisplay.webmap.editControl = new L.EditControl();\n\t\t\tdisplay.webmap.addControl(display.webmap.editControl);\n\n\t\t\t// Handle the completion of a drawing operation\n\t\t\tdisplay.webmap.on(\"editable:drawing:commit\", function (event) {\n\t\t\t\tSKYVE.Leaflet.clear(display); // Clear existing overlays\n\n\t\t\t\t// Stop editing mode so users can immediately edit\n\t\t\t\tevent.layer.toggleEdit();\n\n\t\t\t\t// Add the new overlay to the map and update the field value\n\t\t\t\tdisplay._overlays.push(event.layer);\n\t\t\t\tdisplay.setFieldValue(stringify(event.layer.toGeoJSON(12)));\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Adds a geolocation control to the map, allowing users to set their current position using GPS.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\tgeoLocator: function (display) {\n\t\t\tif (navigator.geolocation) {\n\t\t\t\t/**\n\t\t\t\t * Custom Leaflet control for geolocation.\n\t\t\t\t */\n\t\t\t\tL.GeoControl = L.Control.extend({\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tposition: \"bottomleft\", // Position of the control on the map\n\t\t\t\t\t},\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Creates the control container and adds the geolocation button.\n\t\t\t\t\t * @param {L.Map} map - The Leaflet map instance.\n\t\t\t\t\t * @returns {HTMLElement} The control container.\n\t\t\t\t\t */\n\t\t\t\t\tonAdd: function (map) {\n\t\t\t\t\t\tconst container = L.DomUtil.create(\n\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\"leaflet-control leaflet-bar\",\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Create the geolocation button\n\t\t\t\t\t\tconst link = L.DomUtil.create(\"a\", \"\", container);\n\t\t\t\t\t\tlink.href = \"#\";\n\t\t\t\t\t\tlink.title = \"Click to set your current position from your GPS\";\n\t\t\t\t\t\tlink.innerHTML = '<i class=\"fa-solid fa-location-crosshairs\"></i>';\n\n\t\t\t\t\t\t// Add a click event listener to the button\n\t\t\t\t\t\tL.DomEvent.on(link, \"click\", L.DomEvent.stop).on(\n\t\t\t\t\t\t\tlink,\n\t\t\t\t\t\t\t\"click\",\n\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\t// Stop any active drawing\n\t\t\t\t\t\t\t\tif (display.webmap.editTools.drawing()) {\n\t\t\t\t\t\t\t\t\tdisplay.webmap.editTools.commitDrawing();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Get the user's current position\n\t\t\t\t\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\t\t\t\t\tfunction (position) {\n\t\t\t\t\t\t\t\t\t\t// Clear existing overlays from the map\n\t\t\t\t\t\t\t\t\t\tSKYVE.Leaflet.clear(display);\n\n\t\t\t\t\t\t\t\t\t\t// Create a marker at the user's current position\n\t\t\t\t\t\t\t\t\t\tconst latlng = [\n\t\t\t\t\t\t\t\t\t\t\tposition.coords.latitude,\n\t\t\t\t\t\t\t\t\t\t\tposition.coords.longitude,\n\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\tconst marker = L.marker(latlng);\n\t\t\t\t\t\t\t\t\t\tmarker.addTo(display.webmap);\n\n\t\t\t\t\t\t\t\t\t\t// Track the marker and update the field value with the WKT string\n\t\t\t\t\t\t\t\t\t\tdisplay._overlays.push(marker);\n\t\t\t\t\t\t\t\t\t\tdisplay.setFieldValue(\n\t\t\t\t\t\t\t\t\t\t\t`POINT (${position.coords.longitude} ${position.coords.latitude})`,\n\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t// Zoom and center the map on the marker\n\t\t\t\t\t\t\t\t\t\tdisplay.webmap.setZoom(15);\n\t\t\t\t\t\t\t\t\t\tdisplay.webmap.panTo(latlng);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfunction (error) {\n\t\t\t\t\t\t\t\t\t\talert(error.message); // Handle geolocation errors\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{ enableHighAccuracy: true }, // Enable high accuracy for GPS\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn container;\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\t// Add the geolocation control to the map\n\t\t\t\tdisplay.webmap.geoControl = new L.GeoControl();\n\t\t\t\tdisplay.webmap.addControl(display.webmap.geoControl);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Enables or disables the drawing and geolocation controls on the map.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t * @param {boolean} disabled - whether to disable the controls.\n\t\t */\n\t\tsetDisabled: function (display, disabled) {\n\t\t\tif (display.webmap) {\n\t\t\t\t// Disable or enable the edit control (drawing tools)\n\t\t\t\tif (display.webmap.editControl) {\n\t\t\t\t\tdisplay.webmap.editControl.getContainer().style.display = disabled\n\t\t\t\t\t\t? \"none\"\n\t\t\t\t\t\t: \"block\";\n\t\t\t\t}\n\n\t\t\t\t// Disable or enable the geolocation control\n\t\t\t\tif (display.webmap.geoControl) {\n\t\t\t\t\tdisplay.webmap.geoControl.getContainer().style.display = disabled\n\t\t\t\t\t\t? \"none\"\n\t\t\t\t\t\t: \"block\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds refresh controls to the map, allowing users to set the refresh rate and toggle auto-refresh.\n\t\t * @param {Object} display - the display object that holds the map and other state variables.\n\t\t */\n\t\trefreshControls: function (display) {\n\t\t\t/**\n\t\t\t * Custom Leaflet control for refresh settings.\n\t\t\t */\n\t\t\tL.GeoControl = L.Control.extend({\n\t\t\t\toptions: {\n\t\t\t\t\tposition: \"bottomleft\", // Position of the control on the map\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t * Creates the control container and adds refresh settings.\n\t\t\t\t * @param {L.Map} map - The Leaflet map instance.\n\t\t\t\t * @returns {HTMLElement} The control container.\n\t\t\t\t */\n\t\t\t\tonAdd: function (map) {\n\t\t\t\t\tconst container = L.DomUtil.create(\"div\", \"leaflet-control\");\n\n\t\t\t\t\t// Add the refresh time input and checkbox\n\t\t\t\t\tcontainer.innerHTML = `\n\t\t                <input type=\"number\" min=\"0\" max=\"500\" step=\"1\" value=\"${display.refreshTime}\" size=\"3\" />\n\t\t                <input type=\"checkbox\" ${display._refreshRequired ? \"checked\" : \"\"}><label>Refresh</label>\n\t\t            `;\n\n\t\t\t\t\t// Add event listener for the refresh time input\n\t\t\t\t\tcontainer.children[0].addEventListener(\"change\", function () {\n\t\t\t\t\t\tdisplay.refreshTime = Number(this.value); // Update the refresh time\n\t\t\t\t\t\tif (display._refreshRequired) {\n\t\t\t\t\t\t\tif (display._intervalId) {\n\t\t\t\t\t\t\t\tclearInterval(display._intervalId); // Clear the existing interval\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Set a new interval with the updated refresh time\n\t\t\t\t\t\t\tdisplay._intervalId = setInterval(\n\t\t\t\t\t\t\t\tdisplay.rerender.bind(display),\n\t\t\t\t\t\t\t\tdisplay.refreshTime * 1000,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Add event listener for the refresh toggle checkbox\n\t\t\t\t\tcontainer.children[1].addEventListener(\"click\", function () {\n\t\t\t\t\t\tdisplay._refreshRequired = this.checked; // Update the refresh required flag\n\t\t\t\t\t\tif (display._intervalId) {\n\t\t\t\t\t\t\tclearInterval(display._intervalId); // Clear the existing interval\n\t\t\t\t\t\t\tdisplay._intervalId = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (display._refreshRequired) {\n\t\t\t\t\t\t\tdisplay.rerender(); // Trigger an immediate rerender\n\t\t\t\t\t\t\t// Set a new interval with the current refresh time\n\t\t\t\t\t\t\tdisplay._intervalId = setInterval(\n\t\t\t\t\t\t\t\tdisplay.rerender.bind(display),\n\t\t\t\t\t\t\t\tdisplay.refreshTime * 1000,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn container;\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Add the refresh control to the map\n\t\t\tdisplay.webmap.addControl(new L.GeoControl());\n\t\t},\n\t};\n})();\n","/**\n * Override the `isOffline` method to ensure saving works correctly in Chrome when offline.\n * @returns {boolean} - always returns `false`.\n */\nisc.Offline.isOffline = () => false;\n\nisc.setAutoDraw(false);\nisc.RPCManager.fetchDataPrompt = \"Contacting Server...\";\nisc.RPCManager.saveDataPrompt = \"Contacting Server...\";\nisc.RPCManager.removeDataPrompt = \"Contacting Server...\";\n\n/**\n * Handles RPC errors.\n * @param {Object} response - the RPC response object.\n * @param {Object} request - the RPC request object.\n * @returns {boolean} - returns `false` if the error is handled, otherwise delegates to the superclass.\n */\nisc.RPCManager.handleError = function (response, request) {\n\tif (typeof response.data === \"string\") {\n\t\tisc.warn(response.data);\n\t\treturn false;\n\t}\n\treturn this.Super(\"handleError\", arguments);\n};\n\nisc.RPCManager.addClassMethods({\n\t/**\n\t * Redirects to the login page.\n\t * @param {number} transactionNum - the transaction number.\n\t * @param {Object} rpcRequest - the RPC request object.\n\t * @param {Object} rpcResponse - the RPC response object.\n\t */\n\tloginRequired: function (transactionNum, rpcRequest, rpcResponse) {\n\t\twindow.location.assign(SKYVE.Util.CONTEXT_URL);\n\t},\n});\n\nDate.setShortDisplayFormat(\"toEuropeanShortDate\");\nDate.setNormalDisplayFormat(\"toEuropeanShortDate\");\nDate.setInputFormat(\"DMY\");\n\n/**\n * Extends ListGrid to provide custom filter editor types.\n */\nisc.ListGrid.addProperties({\n\t/**\n\t * Determines the filter editor type for a given field.\n\t * @param {Object} field - the field configuration object.\n\t * @returns {string} - the filter editor type.\n\t */\n\tgetFilterEditorType: function (field) {\n\t\tif (field.filterEditorType !== null) return field.filterEditorType;\n\n\t\tconst isFileType =\n\t\t\tfield.type === this._$binary ||\n\t\t\tfield.type === this._$file ||\n\t\t\tfield.type === this._$imageFile;\n\n\t\tif (isFileType && field.editorType === null) {\n\t\t\tconst ds = this.getDataSource();\n\t\t\tif (\n\t\t\t\tfield.filenameSuppressed ||\n\t\t\t\t(ds && ds.getFilenameField && ds.getFilenameField(field.name) === null)\n\t\t\t) {\n\t\t\t\treturn \"StaticTextItem\";\n\t\t\t} else {\n\t\t\t\treturn \"TextItem\";\n\t\t\t}\n\t\t}\n\n\t\tconst filterEditorConfig = {\n\t\t\t...field,\n\t\t\tcanEdit: field.canFilter !== false,\n\t\t\tlength: null,\n\t\t};\n\t\tif (filterEditorConfig._constructor !== null)\n\t\t\tdelete filterEditorConfig._constructor;\n\t\tif (field.filterEditorType !== null)\n\t\t\tfilterEditorConfig.editorType = field.filterEditorType;\n\t\tObject.assign(filterEditorConfig, field.filterEditorProperties);\n\t\treturn isc.DynamicForm.getEditorType(filterEditorConfig, this);\n\t},\n});\n\n/**\n * Extends ResultSet to handle spatial operators.\n */\nisc.ResultSet.addMethods({\n\tskyveSetCriteria: isc.ResultSet.getPrototype().setCriteria,\n\n\t/**\n\t * Checks if criteria contains any spatial operators\n\t * @param {Object} criteria - The criteria to check\n\t * @returns {boolean} - True if criteria contains spatial operators\n\t */\n\thasSpatialOperator: function (criteria) {\n\t\tif (!criteria) return false;\n\n\t\t// Check if this criteria has a spatial operator\n\t\tif (criteria.operator && criteria.operator.startsWith(\"geo\")) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Recursively check nested criteria\n\t\tif (criteria.criteria) {\n\t\t\treturn criteria.criteria.some((c) => this.hasSpatialOperator(c));\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Sets criteria and forces a fetch for spatial operators.\n\t * @param {Object} newCriteria - the new criteria to set.\n\t * @returns {Object} - the result of the original `setCriteria` method.\n\t */\n\tsetCriteria: function (newCriteria) {\n\t\tconst result = this.skyveSetCriteria(newCriteria);\n\t\tif (newCriteria && this.hasSpatialOperator(newCriteria)) {\n\t\t\tthis.invalidateCache();\n\t\t}\n\t\treturn result;\n\t},\n});\n\nlet resizeTimerEvent = null;\n\n/**\n * Handles page resize events to resize the window stack.\n */\nisc.Page.setEvent(\"resize\", function () {\n\tif (isc.WindowStack) {\n\t\tif (resizeTimerEvent) {\n\t\t\tclearTimeout(resizeTimerEvent);\n\t\t}\n\t\tresizeTimerEvent = setTimeout(() => {\n\t\t\tisc.WindowStack.resize();\n\t\t}, 50);\n\t}\n});\n\n/**\n * Adds search operators for spatial queries.\n */\nconst spatialOperators = [\n\t{\n\t\tID: \"geoEquals\",\n\t\ttitle: \"Equals\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoDisjoint\",\n\t\ttitle: \"Disjoint\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoIntersects\",\n\t\ttitle: \"Intersects\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoTouches\",\n\t\ttitle: \"Touches\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoCrosses\",\n\t\ttitle: \"Crosses\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoWithin\",\n\t\ttitle: \"Within\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoContains\",\n\t\ttitle: \"Contains\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n\t{\n\t\tID: \"geoOverlaps\",\n\t\ttitle: \"Overlaps\",\n\t\tfieldTypes: [\"geometry\"],\n\t\tvalueType: \"fieldType\",\n\t\trequiresServer: true,\n\t},\n];\n\nspatialOperators.forEach((operator) => {\n\tisc.DataSource.addSearchOperator({\n\t\t...operator,\n\t\tcondition: () => true,\n\t\tcompareCriteria: () => -1,\n\t});\n});\n\n/**\n * Utility class for business-related operations.\n */\nisc.defineClass(\"BizUtil\");\n\nisc.BizUtil.addClassProperties({\n\t_modules: {}, // Map of modules loaded -> views -> used & unused views\n\t_unusedPickLists: [], // List of picklists to use (for pick views)\n\n\t// Data source for the \"previous values\" mechanism on text fields\n\tCOMPLETE_DATA_SOURCE: isc.RestDataSource.create({\n\t\tdataFormat: \"json\",\n\t\tjsonPrefix: \"\",\n\t\tjsonSuffix: \"\",\n\t\tdataURL: \"smartcomplete\",\n\t\tfields: [{ name: \"value\", type: \"text\" }],\n\t}),\n});\n\nisc.BizUtil.addClassMethods({\n\t_currentView: null, // The view currently displayed\n\n\t/**\n\t * Gets the current view.\n\t * @returns {Object} - The current view.\n\t */\n\tgetCurrentView: function () {\n\t\treturn isc.BizUtil._currentView;\n\t},\n\n\t/**\n\t * Checks if a field type is numeric.\n\t * @param {string} type - the field type.\n\t * @returns {boolean} - true if the field type is numeric.\n\t */\n\tisNumeric: function (type) {\n\t\tconst numericTypes = [\n\t\t\t\"integer\",\n\t\t\t\"float\",\n\t\t\t\"bizDecimal0\",\n\t\t\t\"bizDecimal1\",\n\t\t\t\"bizDecimal10\",\n\t\t\t\"bizDecimal2\",\n\t\t\t\"bizDecimal5\",\n\t\t\t\"bizDollarsAndCents\",\n\t\t\t\"bizIntegerPercentage\",\n\t\t\t\"bizIntegerSeparator\",\n\t\t\t\"bizTwoDecimalPlacesPercentage\",\n\t\t\t\"bizTimeDuration\",\n\t\t];\n\t\treturn numericTypes.includes(type);\n\t},\n\n\t/**\n\t * Checks if a field type is temporal.\n\t * @param {string} type - the field type.\n\t * @returns {boolean} - true if the field type is temporal.\n\t */\n\tisTemporal: function (type) {\n\t\tconst temporalTypes = [\n\t\t\t\"date\",\n\t\t\t\"time\",\n\t\t\t\"datetime\",\n\t\t\t\"bizDate\",\n\t\t\t\"bizTime\",\n\t\t\t\"DD_MM\",\n\t\t\t\"MM_DD\",\n\t\t\t\"MMM_DD\",\n\t\t\t\"YYYY_MM\",\n\t\t\t\"HH_MI\",\n\t\t\t\"HH24_MI\",\n\t\t];\n\t\treturn temporalTypes.some((temporalType) => type.startsWith(temporalType));\n\t},\n\n\t/**\n\t * Adds filter request parameters.\n\t * @param {Object} requestParams - the request parameters to populate.\n\t * @param {Array} filterParams - the filter parameters.\n\t * @param {Object} view - the associated view.\n\t */\n\taddFilterRequestParams: function (requestParams, filterParams, view) {\n\t\tconst instance = view.gather(false);\n\t\tfilterParams.forEach((filterParam) => {\n\t\t\tconst value = view.toDisplay(filterParam.value, instance);\n\t\t\trequestParams[filterParam.name] = value;\n\t\t});\n\t},\n\n\t/**\n\t * Converts filter criteria by renaming `_display_*` fields.\n\t * @param {Object} criteria - the criteria to convert.\n\t */\n\tconvertFilterCriteria: function (criteria) {\n\t\tif (criteria) {\n\t\t\tif (criteria.criteria) {\n\t\t\t\tcriteria.criteria.forEach((criterion) =>\n\t\t\t\t\tisc.BizUtil.convertFilterCriteria(criterion),\n\t\t\t\t);\n\t\t\t} else if (\n\t\t\t\tcriteria.fieldName &&\n\t\t\t\tcriteria.fieldName.startsWith(\"_display_\")\n\t\t\t) {\n\t\t\t\tcriteria.fieldName = criteria.fieldName.substring(9);\n\t\t\t} else {\n\t\t\t\tObject.keys(criteria).forEach((propertyName) => {\n\t\t\t\t\tif (propertyName.startsWith(\"_display_\")) {\n\t\t\t\t\t\tcriteria[propertyName.substring(9)] = criteria[propertyName];\n\t\t\t\t\t\tdelete criteria[propertyName];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Completes filter criteria by adding extra criteria from filterParams.\n\t * @param {Object} criteria - the base criteria.\n\t * @param {Array} filterParams - the filter parameters.\n\t * @param {Object} view - the associated view.\n\t * @returns {Object} - the completed criteria.\n\t */\n\tcompleteFilterCriteria: function (criteria, filterParams, view) {\n\t\tlet result = { ...criteria };\n\t\tif (!result.operator) {\n\t\t\tresult = isc.DataSource.convertCriteria(result, \"substring\");\n\t\t}\n\t\tresult = {\n\t\t\t_constructor: \"AdvancedCriteria\",\n\t\t\toperator: \"and\",\n\t\t\tcriteria: [result],\n\t\t};\n\n\t\tconst instance = view.gather(false);\n\t\tfilterParams.forEach((filterParam) => {\n\t\t\tconst value = view.toDisplay(filterParam.value, instance);\n\t\t\tresult.criteria.push({\n\t\t\t\tfieldName: filterParam.name,\n\t\t\t\toperator: filterParam.operator,\n\t\t\t\tvalue,\n\t\t\t});\n\t\t});\n\n\t\treturn result;\n\t},\n\n\t/**\n\t * Creates an image button.\n\t * @param {string} icon - the icon path.\n\t * @param {boolean} hasDisabledIcon - whether the button has a disabled icon.\n\t * @param {string} tooltip - the button tooltip.\n\t * @param {Function} click - the click handler.\n\t * @returns {Object} - the created button.\n\t */\n\tcreateImageButton: function (icon, hasDisabledIcon, tooltip, click) {\n\t\treturn isc.ToolStripButton.create({\n\t\t\ticon,\n\t\t\ticonAlign: \"center\",\n\t\t\tshowDisabledIcon: hasDisabledIcon,\n\t\t\tshowDownIcon: false,\n\t\t\tcanHover: true,\n\t\t\tgetHoverHTML: () => tooltip,\n\t\t\tclick,\n\t\t});\n\t},\n\n\t/**\n\t * Creates a CodeMirror editor for syntax highlighting.\n\t * @param {string} scVar - the smart client variable.\n\t * @param {string} binding - the binding for the text area.\n\t * @param {string} languageMimeType - the language mime type for syntax highlighting.\n\t *\n\t * @see https://codemirror.net/LICENSE\n\t */\n\tcreateCodeMirror: function (scVar, binding, languageMimeType) {\n\t\tconst loadResources = async () => {\n\t\t\tawait SKYVE.Util.loadCSS(`codemirror/codemirror.css?v=${SKYVE.Util.v}`);\n\t\t\tawait SKYVE.Util.loadCSS(`codemirror/base16-dark.css?v=${SKYVE.Util.v}`);\n\t\t\tawait SKYVE.Util.loadJS(`codemirror/codemirror.js?v=${SKYVE.Util.v}`);\n\t\t\tawait SKYVE.Util.loadJS(`codemirror/css/css.js?v=${SKYVE.Util.v}`);\n\t\t\tawait SKYVE.Util.loadJS(\n\t\t\t\t`codemirror/htmlmixed/htmlmixed.js?v=${SKYVE.Util.v}`,\n\t\t\t);\n\t\t\tawait SKYVE.Util.loadJS(`codemirror/sql/sql.js?v=${SKYVE.Util.v}`);\n\t\t\tawait SKYVE.Util.loadJS(`codemirror/xml/xml.js?v=${SKYVE.Util.v}`);\n\n\t\t\tconst templates = document.getElementsByName(binding);\n\t\t\tconst templateElement =\n\t\t\t\ttemplates &&\n\t\t\t\ttemplates.length > 0 &&\n\t\t\t\ttemplates[0].nodeName.toLowerCase() === \"textarea\"\n\t\t\t\t\t? templates[0]\n\t\t\t\t\t: undefined;\n\n\t\t\tif (templateElement) {\n\t\t\t\ttemplateElement.setAttribute(\"autocapitalize\", \"off\");\n\t\t\t\ttemplateElement.setAttribute(\"spellcheck\", \"false\");\n\n\t\t\t\tconst editor = CodeMirror.fromTextArea(templateElement, {\n\t\t\t\t\tmode: languageMimeType,\n\t\t\t\t\tlineNumbers: true,\n\t\t\t\t\ttheme: \"base16-dark\",\n\t\t\t\t});\n\t\t\t\teditor.setSize(600, null);\n\t\t\t\teditor.on(\"change\", () => editor.save());\n\t\t\t}\n\t\t};\n\n\t\tloadResources();\n\t},\n\n\t/**\n\t * Creates a split button.\n\t * @param {string} buttonTitle - the title of the main button.\n\t * @param {string} buttonIcon - the icon for the main button.\n\t * @param {boolean} buttonHasDisabledIcon - whether the main button has a disabled icon.\n\t * @param {string} buttonTooltip - the tooltip for the main button.\n\t * @param {Function} buttonClick - the click handler for the main button.\n\t * @param {string} splitTooltip - the tooltip for the split button.\n\t * @param {Object} splitTarget - the target for the split button.\n\t * @param {Array} splitItems - the menu items for the split button.\n\t * @returns {Object} - the created split button.\n\t */\n\tcreateSplitButton: function (\n\t\tbuttonTitle,\n\t\tbuttonIcon,\n\t\tbuttonHasDisabledIcon,\n\t\tbuttonTooltip,\n\t\tbuttonClick,\n\t\tsplitTooltip,\n\t\tsplitTarget,\n\t\tsplitItems,\n\t) {\n\t\treturn isc.HLayout.create({\n\t\t\talign: \"right\",\n\t\t\theight: 1,\n\t\t\tmembersMargin: 1,\n\t\t\tmembers: [\n\t\t\t\tisc.IButton.create({\n\t\t\t\t\tautoFit: true,\n\t\t\t\t\ttitle: buttonTitle,\n\t\t\t\t\ticon: buttonIcon,\n\t\t\t\t\tshowDisabledIcon: buttonHasDisabledIcon,\n\t\t\t\t\tcanHover: true,\n\t\t\t\t\tgetHoverHTML: () => buttonTooltip,\n\t\t\t\t\tclick: buttonClick,\n\t\t\t\t}),\n\t\t\t\tisc.MenuButton.create({\n\t\t\t\t\ttitle: null,\n\t\t\t\t\twidth: 26,\n\t\t\t\t\talignMenuLeft: false,\n\t\t\t\t\tcanHover: true,\n\t\t\t\t\tgetHoverHTML: () => splitTooltip,\n\t\t\t\t\tmenu: isc.Menu.create({\n\t\t\t\t\t\tautoDraw: false,\n\t\t\t\t\t\tshowShadow: true,\n\t\t\t\t\t\tshadowDepth: 10,\n\t\t\t\t\t\ttarget: splitTarget,\n\t\t\t\t\t\tdata: splitItems,\n\t\t\t\t\t}),\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t},\n\n\t/**\n\t * Creates an upload button.\n\t * @param {Object} contentFormItem - the form item for the upload.\n\t * @param {boolean} image - whether the upload is for an image.\n\t * @param {boolean} showMarkup - whether markup is enabled.\n\t * @returns {Object} - the created upload button.\n\t */\n\tcreateUploadButton: function (contentFormItem, image, showMarkup) {\n\t\tconst menu = [\n\t\t\t{\n\t\t\t\ttitle: \"Clear\",\n\t\t\t\ticon: \"icons/delete.png\",\n\t\t\t\tclick: () => contentFormItem.setValue(null),\n\t\t\t\tenableIf: () => contentFormItem.getValue() !== null,\n\t\t\t},\n\t\t];\n\n\t\tif (showMarkup) {\n\t\t\tmenu.push({\n\t\t\t\ttitle: \"Mark Up\",\n\t\t\t\ticon: \"icons/edit.png\",\n\t\t\t\tclick: function () {\n\t\t\t\t\tconst instance = contentFormItem.form._view.gather(false);\n\t\t\t\t\tlet url = `imageMarkup.xhtml?_n=${contentFormItem.name.replaceAll(\n\t\t\t\t\t\t\"_\",\n\t\t\t\t\t\t\".\",\n\t\t\t\t\t)}&_c=${instance._c}&_id=${contentFormItem.getValue()}`;\n\t\t\t\t\tif (contentFormItem.form._view._b) {\n\t\t\t\t\t\turl += `&_b=${contentFormItem.form._view._b.replaceAll(\"_\", \".\")}`;\n\t\t\t\t\t}\n\t\t\t\t\tisc.WindowStack.popup(null, \"Mark Up Image\", true, [\n\t\t\t\t\t\tisc.HTMLPane.create({\n\t\t\t\t\t\t\tcontentsType: \"page\",\n\t\t\t\t\t\t\tcontents: \"Loading Page...\",\n\t\t\t\t\t\t\tcontentsURL: url,\n\t\t\t\t\t\t}),\n\t\t\t\t\t]);\n\t\t\t\t},\n\t\t\t\tenableIf: () => contentFormItem.getValue() !== null,\n\t\t\t});\n\t\t}\n\n\t\treturn isc.BizUtil.createSplitButton(\n\t\t\t\"Upload\",\n\t\t\tnull,\n\t\t\tfalse,\n\t\t\t\"Upload content\",\n\t\t\tfunction () {\n\t\t\t\tconst instance = contentFormItem.form._view.gather(false);\n\t\t\t\tlet url = `${\n\t\t\t\t\timage ? \"image\" : \"content\"\n\t\t\t\t}Upload.xhtml?_n=${contentFormItem.name.replaceAll(\"_\", \".\")}&_c=${\n\t\t\t\t\tinstance._c\n\t\t\t\t}`;\n\t\t\t\tif (contentFormItem.form._view._b) {\n\t\t\t\t\turl += `&_b=${contentFormItem.form._view._b.replaceAll(\"_\", \".\")}`;\n\t\t\t\t}\n\t\t\t\tisc.WindowStack.popup(\n\t\t\t\t\tnull,\n\t\t\t\t\timage ? \"Upload Image\" : \"Upload Content\",\n\t\t\t\t\ttrue,\n\t\t\t\t\t[\n\t\t\t\t\t\tisc.HTMLPane.create({\n\t\t\t\t\t\t\tcontentsType: \"page\",\n\t\t\t\t\t\t\tcontents: \"Loading Page...\",\n\t\t\t\t\t\t\tcontentsURL: url,\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t);\n\t\t\t},\n\t\t\t\"Other Options\",\n\t\t\tnull,\n\t\t\tmenu,\n\t\t);\n\t},\n\n\t/**\n\t * Gets an edit view for a module and document.\n\t * @param {string} moduleName - the module name.\n\t * @param {string} documentName - the document name.\n\t * @param {Function} onViewCreated - the callback when the view is created.\n\t */\n\tgetEditView: function (moduleName, documentName, onViewCreated) {\n\t\tif (!isc.BizUtil._modules[moduleName]) {\n\t\t\tisc.BizUtil._modules[moduleName] = {};\n\t\t\twindow[moduleName] = {};\n\t\t}\n\n\t\tconst documentEntry = isc.BizUtil._modules[moduleName][documentName];\n\t\tif (documentEntry) {\n\t\t\tconst view =\n\t\t\t\tdocumentEntry._unused.pop() ||\n\t\t\t\teval(`${moduleName}.create${documentName}()`);\n\t\t\tview._moduleName = moduleName;\n\t\t\tview._documentName = documentName;\n\t\t\tdocumentEntry._used.push(view);\n\t\t\tonViewCreated(view);\n\t\t} else {\n\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\tshowPrompt: true,\n\t\t\t\tevalResult: true,\n\t\t\t\thttpMethod: \"GET\",\n\t\t\t\tactionURL: `${SKYVE.Util.CONTEXT_URL}smartgen?_mod=${moduleName}&_doc=${documentName}`,\n\t\t\t\tcallback: function () {\n\t\t\t\t\tisc.BizUtil._modules[moduleName][documentName] = {\n\t\t\t\t\t\t_used: [],\n\t\t\t\t\t\t_unused: [],\n\t\t\t\t\t};\n\t\t\t\t\tisc.BizUtil.getEditView(moduleName, documentName, onViewCreated);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Relinquishes an edit view.\n\t * @param {Object} view - the view to relinquish.\n\t */\n\trelinquishEditView: function (view) {\n\t\tconst documentEntry =\n\t\t\tisc.BizUtil._modules[view._moduleName][view._documentName];\n\t\tdocumentEntry._used.remove(view);\n\t\tdocumentEntry._unused.push(view);\n\t},\n\n\t/**\n\t * Gets a pick list.\n\t * @param {Object} lookupDescription - the lookup description.\n\t * @param {Array} filterParams - the filter parameters.\n\t * @param {Object} view - the associated view.\n\t * @returns {Object} - the pick list.\n\t */\n\tgetPickList: function (lookupDescription, filterParams, view) {\n\t\tconst result =\n\t\t\tisc.BizUtil._unusedPickLists.pop() ||\n\t\t\tisc.BizListGrid.create({ isPickList: true });\n\t\tresult.setLookup(lookupDescription, filterParams, view);\n\t\treturn result;\n\t},\n\n\t/**\n\t * Relinquishes a pick list.\n\t * TODO - Why arent the fields defined when I used a cached BizListGrid?\n\t * @param {Object} pickList - the pick list to relinquish.\n\t */\n\trelinquishPickList: function (pickList) {\n\t\tpickList.destroy();\n\t},\n\n\t/**\n\t * Creates a list grid.\n\t * @returns {Object} - the created list grid.\n\t */\n\tcreateListGrid: function () {\n\t\treturn isc.BizListGrid.create({ margin: 2 });\n\t},\n\n\t/**\n\t * Creates a calendar.\n\t * @returns {Object} - the created calendar.\n\t */\n\tcreateCalendar: function () {\n\t\treturn isc.Calendar.create({\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tscrollToWorkDay: true,\n\t\t\tdata: [],\n\t\t});\n\t},\n\n\t/**\n\t * Creates a tree grid.\n\t * @returns {Object} - the created tree grid.\n\t */\n\tcreateTreeGrid: function () {\n\t\treturn isc.BizListGrid.create({ margin: 2, isTree: true });\n\t},\n\n\t/**\n\t * Creates a map.\n\t * @returns {Object} - the created map.\n\t */\n\tcreateMap: function () {\n\t\treturn isc.BizMap.create();\n\t},\n\n\t/**\n\t * Opens a popup frame.\n\t * @param {string} url - the URL to open.\n\t * @param {string} name - the name of the popup.\n\t * @param {number} width - the width of the popup.\n\t * @param {number} height - the height of the popup.\n\t */\n\tpopupFrame: function (url, name, width, height) {\n\t\tconst win = window.open(\n\t\t\turl,\n\t\t\tname,\n\t\t\t`width=${width},height=${height},resizable=yes,scrollbars=no,toolbar=no,location=no,directories=no,status=yes,menubar=no,copyhistory=no`,\n\t\t);\n\t\twin.focus();\n\t},\n\n\t/**\n\t * Displays growl notifications.\n\t * @param {Array} msgs - the messages to display.\n\t * @param {number} life - the duration of the notification.\n\t * @param {boolean} sticky - whether the notification is sticky.\n\t */\n\tgrowl: function (msgs, life, sticky) {\n\t\tPrimeFaces.cw(\"Growl\", \"growl\", {\n\t\t\tid: \"growl\",\n\t\t\twidgetVar: \"growl\",\n\t\t\tlife: life || 6000,\n\t\t\tsticky: sticky || false,\n\t\t\tmsgs,\n\t\t});\n\t},\n\n\t/**\n\t * Handles push messages.\n\t * @param {Array} pushMessage - the push messages to handle.\n\t */\n\tonPushMessage: function (pushMessage) {\n\t\tconst growls = [];\n\t\tconst messages = [];\n\t\tlet warn = false;\n\n\t\tpushMessage.forEach((m) => {\n\t\t\tif (m.type === \"g\") {\n\t\t\t\tgrowls.push({ severity: m.severity, summary: m.message });\n\t\t\t} else if (m.type === \"m\") {\n\t\t\t\tif (m.severity !== \"info\") warn = true;\n\t\t\t\tmessages.push(m.message);\n\t\t\t} else if (m.type === \"r\") {\n\t\t\t\tconst view = isc.BizUtil.getCurrentView();\n\t\t\t\tif (view && view.rerender) view.rerender();\n\t\t\t} else if (m.type === \"j\") {\n\t\t\t\twindow[m.method](m.argument);\n\t\t\t}\n\t\t});\n\n\t\tif (growls.length > 0) isc.BizUtil.growl(growls);\n\t\tif (messages.length > 0) {\n\t\t\tconst markup =\n\t\t\t\tmessages.length > 1\n\t\t\t\t\t? `<ul>${messages.map((msg) => `<li>${msg}</li>`).join(\"\")}</ul>`\n\t\t\t\t\t: messages[0];\n\t\t\tif (warn) isc.warn(markup);\n\t\t\telse isc.say(markup);\n\t\t}\n\t},\n});\n","// Define our extra date and time formats\nisc.addMethods(Date.prototype, {\n\t/**\n\t * Formats the date as \"HH:MM\" in 24-hour format.\n\t * @returns {string} - the formatted time string.\n\t */\n\ttoHH24_MI: function () {\n\t\treturn `${this.getHours().stringify()}:${this.getMinutes().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"HH:MM AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted time string.\n\t */\n\ttoHH_MI: function () {\n\t\tlet hours = this.getHours();\n\t\tlet ampm = \" AM\";\n\t\tlet hoursString = hours.stringify();\n\n\t\tif (hours === 0) {\n\t\t\thoursString = \"12\";\n\t\t} else if (hours === 12) {\n\t\t\tampm = \" PM\";\n\t\t} else if (hours > 12) {\n\t\t\tampm = \" PM\";\n\t\t\thours -= 12;\n\t\t\thoursString = hours.stringify();\n\t\t}\n\n\t\treturn `${hoursString}:${this.getMinutes().stringify()}${ampm}`;\n\t},\n\n\t/**\n\t * Formats the date as \"HH:MM:SS\" in 24-hour format.\n\t * @returns {string} - the formatted time string.\n\t */\n\ttoHH24_MI_SS: function () {\n\t\treturn `${this.toHH24_MI()}:${this.getSeconds().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"HH:MM:SS AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted time string.\n\t */\n\ttoHH_MI_SS: function () {\n\t\tconst time = this.toHH_MI();\n\t\treturn `${time.substring(0, time.length - 3)}:${this.getSeconds().stringify()}${time.substring(time.length - 3)}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD/MM/YYYY\".\n\t * @returns {string} - the formatted date string.\n\t */\n\ttoDD_MM_YYYY: function () {\n\t\treturn `${this.getDate().stringify()}/${(this.getMonth() + 1).stringify()}/${this.getFullYear().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD/MM/YYYY HH:MM\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MM_YYYY_HH24_MI: function () {\n\t\treturn `${this.toDD_MM_YYYY()} ${this.toHH24_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD/MM/YYYY HH:MM AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MM_YYYY_HH_MI: function () {\n\t\treturn `${this.toDD_MM_YYYY()} ${this.toHH_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD/MM/YYYY HH:MM:SS\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MM_YYYY_HH24_MI_SS: function () {\n\t\treturn `${this.toDD_MM_YYYY()} ${this.toHH24_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD/MM/YYYY HH:MM:SS AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MM_YYYY_HH_MI_SS: function () {\n\t\treturn `${this.toDD_MM_YYYY()} ${this.toHH_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD-MMM-YYYY\".\n\t * @returns {string} - the formatted date string.\n\t */\n\ttoDD_MMM_YYYY: function () {\n\t\tconst shortMonthNames = [\n\t\t\t\"Jan\",\n\t\t\t\"Feb\",\n\t\t\t\"Mar\",\n\t\t\t\"Apr\",\n\t\t\t\"May\",\n\t\t\t\"Jun\",\n\t\t\t\"Jul\",\n\t\t\t\"Aug\",\n\t\t\t\"Sep\",\n\t\t\t\"Oct\",\n\t\t\t\"Nov\",\n\t\t\t\"Dec\",\n\t\t];\n\t\treturn `${this.getDate().stringify()}-${shortMonthNames[this.getMonth()]}-${this.getFullYear().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD-MMM-YYYY HH:MM\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MMM_YYYY_HH24_MI: function () {\n\t\treturn `${this.toDD_MMM_YYYY()} ${this.toHH24_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD-MMM-YYYY HH:MM AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MMM_YYYY_HH_MI: function () {\n\t\treturn `${this.toDD_MMM_YYYY()} ${this.toHH_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD-MMM-YYYY HH:MM:SS\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MMM_YYYY_HH24_MI_SS: function () {\n\t\treturn `${this.toDD_MMM_YYYY()} ${this.toHH24_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"DD-MMM-YYYY HH:MM:SS AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoDD_MMM_YYYY_HH_MI_SS: function () {\n\t\treturn `${this.toDD_MMM_YYYY()} ${this.toHH_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MM/DD/YYYY\".\n\t * @returns {string} - the formatted date string.\n\t */\n\ttoMM_DD_YYYY: function () {\n\t\treturn `${(this.getMonth() + 1).stringify()}/${this.getDate().stringify()}/${this.getFullYear().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MM/DD/YYYY HH:MM\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMM_DD_YYYY_HH24_MI: function () {\n\t\treturn `${this.toMM_DD_YYYY()} ${this.toHH24_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MM/DD/YYYY HH:MM AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMM_DD_YYYY_HH_MI: function () {\n\t\treturn `${this.toMM_DD_YYYY()} ${this.toHH_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MM/DD/YYYY HH:MM:SS\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMM_DD_YYYY_HH24_MI_SS: function () {\n\t\treturn `${this.toMM_DD_YYYY()} ${this.toHH24_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MM/DD/YYYY HH:MM:SS AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMM_DD_YYYY_HH_MI_SS: function () {\n\t\treturn `${this.toMM_DD_YYYY()} ${this.toHH_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MMM-DD-YYYY\".\n\t * @returns {string} - the formatted date string.\n\t */\n\ttoMMM_DD_YYYY: function () {\n\t\tconst shortMonthNames = [\n\t\t\t\"Jan\",\n\t\t\t\"Feb\",\n\t\t\t\"Mar\",\n\t\t\t\"Apr\",\n\t\t\t\"May\",\n\t\t\t\"Jun\",\n\t\t\t\"Jul\",\n\t\t\t\"Aug\",\n\t\t\t\"Sep\",\n\t\t\t\"Oct\",\n\t\t\t\"Nov\",\n\t\t\t\"Dec\",\n\t\t];\n\t\treturn `${shortMonthNames[this.getMonth()]}-${this.getDate().stringify()}-${this.getFullYear().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MMM-DD-YYYY HH:MM\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMMM_DD_YYYY_HH24_MI: function () {\n\t\treturn `${this.toMMM_DD_YYYY()} ${this.toHH24_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MMM-DD-YYYY HH:MM AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMMM_DD_YYYY_HH_MI: function () {\n\t\treturn `${this.toMMM_DD_YYYY()} ${this.toHH_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MMM-DD-YYYY HH:MM:SS\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMMM_DD_YYYY_HH24_MI_SS: function () {\n\t\treturn `${this.toMMM_DD_YYYY()} ${this.toHH24_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"MMM-DD-YYYY HH:MM:SS AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoMMM_DD_YYYY_HH_MI_SS: function () {\n\t\treturn `${this.toMMM_DD_YYYY()} ${this.toHH_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"YYYY/MM/DD\".\n\t * @returns {string} - the formatted date string.\n\t */\n\ttoYYYY_MM_DD: function () {\n\t\treturn `${this.getFullYear().stringify()}/${(this.getMonth() + 1).stringify()}/${this.getDate().stringify()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"YYYY/MM/DD HH:MM\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoYYYY_MM_DD_HH24_MI: function () {\n\t\treturn `${this.toYYYY_MM_DD()} ${this.toHH24_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"YYYY/MM/DD HH:MM AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoYYYY_MM_DD_HH_MI: function () {\n\t\treturn `${this.toYYYY_MM_DD()} ${this.toHH_MI()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"YYYY/MM/DD HH:MM:SS\" in 24-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoYYYY_MM_DD_HH24_MI_SS: function () {\n\t\treturn `${this.toYYYY_MM_DD()} ${this.toHH24_MI_SS()}`;\n\t},\n\n\t/**\n\t * Formats the date as \"YYYY/MM/DD HH:MM:SS AM/PM\" in 12-hour format.\n\t * @returns {string} - the formatted date and time string.\n\t */\n\ttoYYYY_MM_DD_HH_MI_SS: function () {\n\t\treturn `${this.toYYYY_MM_DD()} ${this.toHH_MI_SS()}`;\n\t},\n});\n\n/**\n * Implements the BizDateItem widget.\n * Extends DateItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizDateItem\", \"DateItem\");\n\nisc.BizDateItem.addClassMethods({\n\t/**\n\t * Replaces a month name in a string with its corresponding ordinal number.\n\t * @param {string} value - the input string containing the month name.\n\t * @param {string} month - the month name to replace.\n\t * @returns {string} - the updated string with the month replaced by its ordinal.\n\t */\n\t_replaceMonthWithOrdinal: function (value, month) {\n\t\tconst lowerMonth = month.toLowerCase();\n\t\tconst monthMap = {\n\t\t\tjan: \"1\",\n\t\t\tfeb: \"2\",\n\t\t\tmar: \"3\",\n\t\t\tapr: \"4\",\n\t\t\tmay: \"5\",\n\t\t\tjun: \"6\",\n\t\t\tjul: \"7\",\n\t\t\taug: \"8\",\n\t\t\tsep: \"9\",\n\t\t\toct: \"10\",\n\t\t\tnov: \"11\",\n\t\t\tdec: \"12\",\n\t\t};\n\n\t\tfor (const [key, ordinal] of Object.entries(monthMap)) {\n\t\t\tif (lowerMonth.startsWith(key)) {\n\t\t\t\treturn value.replaceAll(month, ordinal);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t},\n\n\t/**\n\t * Parses an input value into a Date object based on the provided date pattern.\n\t * @param {string|Date} value - the input value to parse.\n\t * @param {string} datePattern - the date pattern to use for parsing.\n\t * @returns {Date|null} - the parsed Date object, or null if parsing fails.\n\t */\n\tparseInput: function (value, datePattern) {\n\t\tif (isc.isA.Date(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = value.trim();\n\n\t\t\t// Handle US date format (MMM-DD-YYYY)\n\t\t\tif (datePattern && datePattern.startsWith(\"toMMM\")) {\n\t\t\t\tconst match = /^([A-Za-z]+)[^A-Za-z0-9]\\d?\\d.*$/.exec(value); // Month word, 1 or 2 digits, anything\n\t\t\t\tif (match) {\n\t\t\t\t\tvalue = this._replaceMonthWithOrdinal(value, match[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Handle other formats (DD-MMM-YYYY)\n\t\t\t\tconst match = /^\\d?\\d[^A-Za-z0-9]([A-Za-z]+).*$/.exec(value); // 1 or 2 digits, anything, month word\n\t\t\t\tif (match) {\n\t\t\t\t\tvalue = this._replaceMonthWithOrdinal(value, match[1]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Parse schema date (e.g., 9999-99-99)\n\t\t\tlet result = /^\\d{4}-\\d\\d-.*$/.test(value)\n\t\t\t\t? isc.DateUtil.parseSchemaDate(value)\n\t\t\t\t: null;\n\n\t\t\tif (!result) {\n\t\t\t\t// Parse based on the date pattern\n\t\t\t\tconst format = datePattern?.startsWith(\"toMM\")\n\t\t\t\t\t? \"MDY\"\n\t\t\t\t\t: datePattern?.startsWith(\"toYYYY\")\n\t\t\t\t\t\t? \"YMD\"\n\t\t\t\t\t\t: \"DMY\";\n\t\t\t\tresult = isc.DateUtil.parseInput(value, format, 50, true);\n\n\t\t\t\t// Handle cases where only day and month are provided\n\t\t\t\tif (!result && /^\\d?\\d[^A-Za-z0-9]\\d?\\d$/.test(value)) {\n\t\t\t\t\tconst currentYear = Date.create().getFullYear().stringify();\n\t\t\t\t\tresult = isc.DateUtil.parseInput(\n\t\t\t\t\t\tformat === \"MDY\"\n\t\t\t\t\t\t\t? `${value} ${currentYear}`\n\t\t\t\t\t\t\t: format === \"YMD\"\n\t\t\t\t\t\t\t\t? `${currentYear} ${value}`\n\t\t\t\t\t\t\t\t: `${value} ${currentYear}`,\n\t\t\t\t\t\tformat,\n\t\t\t\t\t\t50,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\n\t * Formats a Date object into a string based on the provided format.\n\t * @param {Date|string} value - the value to format (can be a Date or string).\n\t * @param {string} format - the format to use for formatting.\n\t * @returns {string} - the formatted date string, or the original value if it's not a Date.\n\t */\n\tformat: function (value, format) {\n\t\tif (!isc.isA.Date(value)) {\n\t\t\treturn value;\n\t\t}\n\t\treturn value[format]();\n\t},\n});\n\nisc.BizDateItem.addProperties({\n\tenforceDate: true, // Whether to validate date input\n\tchangeOnBlur: true, // Whether to perform validation on field blur\n\tchangeOnKeypress: false, // Whether to perform validation on key press\n\twidth: 100,\n\tuseTextField: true, // Whether to use a text field for date input\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"DD MM(M) YY(YY)\",\n\ttextFieldProperties: { selectOnFocus: true },\n\tshowPickerTimeItem: false,\n\tdateFormatter: \"toDD_MM_YYYY\",\n\n\t/**\n\t * Parses a date value using the configured date formatter.\n\t * @param {string|Date} value - the value to parse.\n\t * @returns {Date|null} - the parsed Date object, or null if parsing fails.\n\t */\n\tparseDate: function (value) {\n\t\treturn isc.BizDateItem.parseInput(value, this.dateFormatter);\n\t},\n});\n\nisc.BizDateItem.addMethods({\n\t/**\n\t * Maps a raw value to a display-friendly string.\n\t * @param {string|Date|null} value - the value to map.\n\t * @returns {string} - the formatted date string, or an empty string if the value is null.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value === null || value === undefined) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Date(value)) {\n\t\t\tvalue = isc.BizDateItem.parseInput(value, this.dateFormatter);\n\t\t}\n\t\treturn isc.BizDateItem.format(value, this.dateFormatter);\n\t},\n\n\t/**\n\t * Maps a display-friendly string to a raw value (Date object or null).\n\t * @param {string} value - the display value to map.\n\t * @returns {Date|null} - the parsed Date object, or null if the input is empty.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\tvalue = null;\n\t\t} else {\n\t\t\tvalue = isc.BizDateItem.parseInput(value, this.dateFormatter);\n\t\t}\n\t\treturn value;\n\t},\n\n\t/**\n\t * Ensures the value displayed in the element matches the saved value and is formatted correctly.\n\t * Overrides the default `updateValue` method.\n\t */\n\tupdateValue: function () {\n\t\t// Map the value to a valid date\n\t\tthis.Super(\"updateValue\", arguments);\n\n\t\t// Update the displayed string so it's formatted correctly\n\t\tthis.setElementValue(this.mapValueToDisplay(this.getValue()));\n\t},\n\n\t/**\n\t * Sets the value of the date item. If the input is a string, it is parsed into a Date object.\n\t * Overrides the default `setValue` method.\n\t * @param {string|Date} newValue - the new value to set.\n\t * @returns {Object} - the instance of the date item.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (typeof newValue === \"string\") {\n\t\t\tnewValue = isc.BizDateItem.parseInput(newValue, this.dateFormatter);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizDate\",\n\tinheritsFrom: \"date\",\n\teditorType: \"BizDateItem\",\n\n\t/**\n\t * Formats the internal date value for editing.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} form - the form containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal date value for normal display.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} component - the component containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Formats the internal date value for short display.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} component - the component containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MM_YYYY\");\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MM_YYYY\",\n\tinheritsFrom: \"bizDate\",\n});\n\n/**\n * Registeres the DD_MMM_YYYY_Item.\n * Extends BizDateItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MMM_YYYY_Item\", \"BizDateItem\");\n\nisc.DD_MMM_YYYY_Item.addProperties({\n\tdateFormatter: \"toDD_MMM_YYYY\",\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MMM_YYYY\",\n\tinheritsFrom: \"bizDate\",\n\teditorType: \"DD_MMM_YYYY_Item\",\n\n\t/**\n\t * Formats the internal date value for short display in the \"DD MMM YYYY\" format.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} component - the component containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MMM_YYYY\");\n\t},\n});\n\n/**\n * Registers MM_DD_YYYY_Item.\n * Extends BizDateItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MM_DD_YYYY_Item\", \"BizDateItem\");\n\nisc.MM_DD_YYYY_Item.addProperties({\n\thint: \"MM(M) DD YY(YY)\",\n\tdateFormatter: \"toMM_DD_YYYY\",\n});\n\nisc.SimpleType.create({\n\tname: \"MM_DD_YYYY\",\n\tinheritsFrom: \"bizDate\",\n\teditorType: \"MM_DD_YYYY_Item\",\n\n\t/**\n\t * Formats the internal date value for short display in the \"MM DD YYYY\" format.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} component - the component containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMM_DD_YYYY\");\n\t},\n});\n\n/**\n * Registers MMM_DD_YYYY_Item.\n * Extends BizDateItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MMM_DD_YYYY_Item\", \"BizDateItem\");\n\nisc.MMM_DD_YYYY_Item.addProperties({\n\thint: \"MM(M) DD YY(YY)\",\n\tdateFormatter: \"toMMM_DD_YYYY\",\n});\n\nisc.SimpleType.create({\n\tname: \"MMM_DD_YYYY\",\n\tinheritsFrom: \"bizDate\",\n\teditorType: \"MMM_DD_YYYY_Item\",\n\n\t/**\n\t * Formats the internal date value for short display in the \"MMM DD YYYY\" format.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} component - the component containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMMM_DD_YYYY\");\n\t},\n});\n\n/**\n * Registers YYYY_MM_DD_Item.\n * Extends BizDateItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"YYYY_MM_DD_Item\", \"BizDateItem\");\n\nisc.YYYY_MM_DD_Item.addProperties({\n\thint: \"YY(YY) MM(M) DD\",\n\tdateFormatter: \"toYYYY_MM_DD\",\n});\n\nisc.SimpleType.create({\n\tname: \"YYYY_MM_DD\",\n\tinheritsFrom: \"bizDate\",\n\teditorType: \"YYYY_MM_DD_Item\",\n\n\t/**\n\t * Formats the internal date value for short display in the \"YYYY-MM-DD\" format.\n\t * @param {Date} internalValue - the internal date value.\n\t * @param {Object} field - the field configuration.\n\t * @param {Object} component - the component containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted date string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toYYYY_MM_DD\");\n\t},\n});\n\n/**\n * Implements the BizDateTimeItem widget.\n * Extends BizTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizDateTimeItem\", \"DateTimeItem\");\n\nisc.BizDateTimeItem.addProperties({\n\tenforceDate: true,\n\tchangeOnBlur: true, // Perform validation on field blur\n\tchangeOnKeypress: false, // Don't perform validation on key press\n\twidth: 200,\n\tuseTextField: true,\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"DD MM(M) YY(YY) HH:MI AM/PM\",\n\ttextFieldProperties: { selectOnFocus: true },\n\tshowPickerTimeItem: true,\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: false },\n\tdateFormatter: \"toDD_MM_YYYY_HH_MI\",\n\n\t/**\n\t * Parses a date string input using the specified date formatter.\n\t * @param {string} value - the date string to be parsed.\n\t * @returns {Date|null} - the parsed date object or null if parsing fails.\n\t */\n\tparseDate: function (value) {\n\t\treturn isc.BizDateItem.parseInput(value, this.dateFormatter);\n\t},\n});\n\nisc.BizDateTimeItem.addMethods({\n\t/**\n\t * Maps a value to its display representation.\n\t * If the value is null, returns an empty string.\n\t * If the value is not a Date, it attempts to parse it using the configured date formatter.\n\t *\n\t * @param {Date|string|null} value - the value to be mapped.\n\t * @returns {string} - the formatted display string.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Date(value)) {\n\t\t\tvalue = isc.BizDateItem.parseInput(value, this.dateFormatter);\n\t\t}\n\t\treturn isc.BizDateItem.format(value, this.dateFormatter);\n\t},\n\n\t/**\n\t * Maps a display string to its corresponding value.\n\t * If the input is an empty string, it returns null.\n\t * Otherwise, it parses the input string into a Date object.\n\t *\n\t * @param {string} value - the display string to be converted.\n\t * @returns {Date|null} - the parsed Date object or null if the input was empty.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\treturn null;\n\t\t}\n\t\treturn isc.BizDateItem.parseInput(value, this.dateFormatter);\n\t},\n\n\t/**\n\t * Ensures the displayed value in the element matches the saved value and is correctly formatted.\n\t * Overrides the default `updateValue` method.\n\t */\n\tupdateValue: function () {\n\t\t// Call the superclass implementation to ensure value is mapped to a valid float\n\t\tthis.Super(\"updateValue\", arguments);\n\t\t// Update the displayed string with the correctly formatted value\n\t\tthis.setElementValue(this.mapValueToDisplay(this.getValue()));\n\t},\n\n\t/**\n\t * Sets a new value, mapping strings to the appropriate date before saving.\n\t * This ensures that string inputs are parsed properly since they won't go through `mapDisplayToValue`.\n\t * Overrides the default `setValue` method.\n\t *\n\t * @param {string|Date|null} newValue - the new value to be set.\n\t * @returns {*} - the result of calling the superclass `setValue` method.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizDateItem.parseInput(newValue, this.dateFormatter);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizDateTime\",\n\tinheritsFrom: \"dateTime\",\n\teditorType: \"BizDateTimeItem\",\n\n\t/**\n\t * Formats the internal value for editing.\n\t * Delegates to `shortDisplayFormatter` to ensure consistent formatting.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing the field.\n\t * @param {Object} record - the record being edited.\n\t * @returns {string} - the formatted value for editing.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal display.\n\t * Delegates to `shortDisplayFormatter` to ensure consistent formatting.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component displaying the value.\n\t * @param {Object} record - the record associated with the value.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Formats the internal value using the `toDD_MM_YYYY_HH_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component displaying the value.\n\t * @param {Object} record - the record associated with the value.\n\t * @returns {string} - the formatted string in `DD_MM_YYYY_HH_MI` format.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MM_YYYY_HH_MI\");\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MM_YYYY_HH_MI\",\n\tinheritsFrom: \"bizDateTime\",\n});\n\n/**\n * Registers DD_MM_YYYY_HH24_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MM_YYYY_HH24_MI_Item\", \"BizDateTimeItem\");\n\nisc.DD_MM_YYYY_HH24_MI_Item.addProperties({\n\tdateFormatter: \"toDD_MM_YYYY_HH24_MI\",\n\thint: \"DD MM(M) YY(YY) HH(24):MI\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MM_YYYY_HH24_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MM_YYYY_HH24_MI_Item\",\n\n\t/**\n\t * Formats the internal value using the `toDD_MM_YYYY_HH24_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component displaying the value.\n\t * @param {Object} record - the record associated with the value.\n\t * @returns {string} - the formatted string in `DD_MM_YYYY_HH24_MI` format.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MM_YYYY_HH24_MI\");\n\t},\n});\n\n/**\n * Registers DD_MM_YYYY_HH_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MM_YYYY_HH_MI_SS_Item\", \"BizDateTimeItem\");\nisc.DD_MM_YYYY_HH_MI_SS_Item.addProperties({\n\tdateFormatter: \"toDD_MM_YYYY_HH_MI_SS\",\n\thint: \"DD MM(M) YY(YY) HH:MI(:SS) AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MM_YYYY_HH_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MM_YYYY_HH_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal value using the `toDD_MM_YYYY_HH_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component displaying the value.\n\t * @param {Object} record - the record associated with the value.\n\t * @returns {string} - the formatted string in `DD_MM_YYYY_HH_MI_SS` format.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MM_YYYY_HH_MI_SS\");\n\t},\n});\n\n/**\n * Registers DD_MM_YYYY_HH24_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MM_YYYY_HH24_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.DD_MM_YYYY_HH24_MI_SS_Item.addProperties({\n\tdateFormatter: \"toDD_MM_YYYY_HH24_MI_SS\",\n\thint: \"DD MM(M) YY(YY) HH(24):MI(:SS)\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MM_YYYY_HH24_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MM_YYYY_HH24_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `DD_MM_YYYY_HH24_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MM_YYYY_HH24_MI_SS\");\n\t},\n});\n\n/**\n * Registers DD_MMM_YYYY_HH_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MMM_YYYY_HH_MI_Item\", \"BizDateTimeItem\");\n\nisc.DD_MMM_YYYY_HH_MI_Item.addProperties({\n\tdateFormatter: \"toDD_MMM_YYYY_HH_MI\",\n\thint: \"DD MM(M) YY(YY) HH:MI AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MMM_YYYY_HH_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MMM_YYYY_HH_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `DD_MMM_YYYY_HH_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MMM_YYYY_HH_MI\");\n\t},\n});\n\n/**\n * Registers DD_MMM_YYYY_HH24_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MMM_YYYY_HH24_MI_Item\", \"BizDateTimeItem\");\n\nisc.DD_MMM_YYYY_HH24_MI_Item.addProperties({\n\tdateFormatter: \"toDD_MMM_YYYY_HH24_MI\",\n\thint: \"DD MM(M) YY(YY) HH(24):MI\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MMM_YYYY_HH24_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MMM_YYYY_HH24_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `DD_MMM_YYYY_HH24_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MMM_YYYY_HH24_MI\");\n\t},\n});\n\n/**\n * Registers DD_MMM_YYYY_HH_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MMM_YYYY_HH_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.DD_MMM_YYYY_HH_MI_SS_Item.addProperties({\n\tdateFormatter: \"toDD_MMM_YYYY_HH_MI_SS\",\n\thint: \"DD MM(M) YY(YY) HH:MI(:SS) AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MMM_YYYY_HH_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MMM_YYYY_HH_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `DD_MMM_YYYY_HH_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MMM_YYYY_HH_MI_SS\");\n\t},\n});\n\n/**\n * Registers DD_MMM_YYYY_HH24_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"DD_MMM_YYYY_HH24_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.DD_MMM_YYYY_HH24_MI_SS_Item.addProperties({\n\tdateFormatter: \"toDD_MMM_YYYY_HH24_MI_SS\",\n\thint: \"DD MM(M) YY(YY) HH(24):MI(:SS)\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"DD_MMM_YYYY_HH24_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"DD_MMM_YYYY_HH24_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `DD_MMM_YYYY_HH24_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toDD_MMM_YYYY_HH24_MI_SS\");\n\t},\n});\n\n/**\n * Registers MM_DD_YYYY_HH_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MM_DD_YYYY_HH_MI_Item\", \"BizDateTimeItem\");\n\nisc.MM_DD_YYYY_HH_MI_Item.addProperties({\n\tdateFormatter: \"toMM_DD_YYYY_HH_MI\",\n\thint: \"MM(M) DD YY(YY) HH:MI AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"MM_DD_YYYY_HH_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MM_DD_YYYY_HH_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MM_DD_YYYY_HH_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMM_DD_YYYY_HH_MI\");\n\t},\n});\n\n/**\n * Registers MM_DD_YYYY_HH24_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MM_DD_YYYY_HH24_MI_Item\", \"BizDateTimeItem\");\n\nisc.MM_DD_YYYY_HH24_MI_Item.addProperties({\n\tdateFormatter: \"toMM_DD_YYYY_HH24_MI\",\n\thint: \"MM(M) DD YY(YY) HH(24):MI\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"MM_DD_YYYY_HH24_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MM_DD_YYYY_HH24_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MM_DD_YYYY_HH24_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMM_DD_YYYY_HH24_MI\");\n\t},\n});\n\n/**\n * Registers MM_DD_YYYY_HH_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MM_DD_YYYY_HH_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.MM_DD_YYYY_HH_MI_SS_Item.addProperties({\n\tdateFormatter: \"toMM_DD_YYYY_HH_MI_SS\",\n\thint: \"MM(M) DD YY(YY) HH:MI(:SS) AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"MM_DD_YYYY_HH_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MM_DD_YYYY_HH_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MM_DD_YYYY_HH_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMM_DD_YYYY_HH_MI_SS\");\n\t},\n});\n\n/**\n * Registers MM_DD_YYYY_HH24_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MM_DD_YYYY_HH24_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.MM_DD_YYYY_HH24_MI_SS_Item.addProperties({\n\thint: \"MM(M) DD YY(YY) HH(24):MI(:SS)\",\n\tdateFormatter: \"toMM_DD_YYYY_HH24_MI_SS\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"MM_DD_YYYY_HH24_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MM_DD_YYYY_HH24_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MM_DD_YYYY_HH24_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMM_DD_YYYY_HH24_MI_SS\");\n\t},\n});\n\n/**\n * Registers MMM_DD_YYYY_HH_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MMM_DD_YYYY_HH_MI_Item\", \"BizDateTimeItem\");\n\nisc.MMM_DD_YYYY_HH_MI_Item.addProperties({\n\tdateFormatter: \"toMMM_DD_YYYY_HH_MI\",\n\thint: \"MM(M) DD YY(YY) HH:MI AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"MMM_DD_YYYY_HH_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MMM_DD_YYYY_HH_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MMM_DD_YYYY_HH_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMMM_DD_YYYY_HH_MI\");\n\t},\n});\n\n/**\n * Registers MMM_DD_YYYY_HH24_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MMM_DD_YYYY_HH24_MI_Item\", \"BizDateTimeItem\");\n\nisc.MMM_DD_YYYY_HH24_MI_Item.addProperties({\n\tdateFormatter: \"toMMM_DD_YYYY_HH24_MI\",\n\thint: \"MM(M) DD YY(YY) HH(24):MI\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"MMM_DD_YYYY_HH24_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MMM_DD_YYYY_HH24_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MMM_DD_YYYY_HH24_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMMM_DD_YYYY_HH24_MI\");\n\t},\n});\n\n/**\n * Registers MMM_DD_YYYY_HH_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MMM_DD_YYYY_HH_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.MMM_DD_YYYY_HH_MI_SS_Item.addProperties({\n\tdateFormatter: \"toMMM_DD_YYYY_HH_MI_SS\",\n\thint: \"MM(M) DD YY(YY) HH(:MI(:SS) AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"MMM_DD_YYYY_HH_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MMM_DD_YYYY_HH_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MMM_DD_YYYY_HH_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMMM_DD_YYYY_HH_MI_SS\");\n\t},\n});\n\n/**\n * Registers MMM_DD_YYYY_HH24_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"MMM_DD_YYYY_HH24_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.MMM_DD_YYYY_HH24_MI_SS_Item.addProperties({\n\thint: \"MM(M) DD YY(YY) HH(24):MI(:SS)\",\n\tdateFormatter: \"toMMM_DD_YYYY_HH24_MI_SS\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"MMM_DD_YYYY_HH24_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"MMM_DD_YYYY_HH24_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `MMM_DD_YYYY_HH24_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toMMM_DD_YYYY_HH24_MI_SS\");\n\t},\n});\n\n/**\n * Registers YYYY_MM_DD_HH_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"YYYY_MM_DD_HH_MI_Item\", \"BizDateTimeItem\");\n\nisc.YYYY_MM_DD_HH_MI_Item.addProperties({\n\tdateFormatter: \"toYYYY_MM_DD_HH_MI\",\n\thint: \"YY(YY) MM(M) DD HH:MI AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"YYYY_MM_DD_HH_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"YYYY_MM_DD_HH_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `YYYY_MM_DD_HH_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toYYYY_MM_DD_HH_MI\");\n\t},\n});\n\n/**\n * Registers YYYY_MM_DD_HH24_MI_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"YYYY_MM_DD_HH24_MI_Item\", \"BizDateTimeItem\");\n\nisc.YYYY_MM_DD_HH24_MI_Item.addProperties({\n\tdateFormatter: \"toYYYY_MM_DD_HH24_MI\",\n\thint: \"YY(YY) MM(M) DD HH(24):MI\",\n\tpickerTimeItemProperties: { showSecondItem: false, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"YYYY_MM_DD_HH24_MI\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"YYYY_MM_DD_HH24_MI_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `YYYY_MM_DD_HH24_MI` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toYYYY_MM_DD_HH24_MI\");\n\t},\n});\n\n/**\n * Registers YYYY_MM_DD_HH_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"YYYY_MM_DD_HH_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.YYYY_MM_DD_HH_MI_SS_Item.addProperties({\n\tdateFormatter: \"toYYYY_MM_DD_HH_MI_SS\",\n\thint: \"YY(YY) MM(M) DD HH:MI(:SS) AM/PM\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: false },\n});\n\nisc.SimpleType.create({\n\tname: \"YYYY_MM_DD_HH_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"YYYY_MM_DD_HH_MI_SS_Item\",\n\n\t/**\n\t * Formats the internal date-time value into the `YYYY_MM_DD_HH_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toYYYY_MM_DD_HH_MI_SS\");\n\t},\n});\n\n/**\n * Registers YYYY_MM_DD_HH24_MI_SS_Item.\n * Extends BizDateTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"YYYY_MM_DD_HH24_MI_SS_Item\", \"BizDateTimeItem\");\n\nisc.YYYY_MM_DD_HH24_MI_SS_Item.addProperties({\n\thint: \"YY(YY) MM(M) DD HH(24):MI(:SS)\",\n\tdateFormatter: \"toYYYY_MM_DD_HH24_MI_SS\",\n\tpickerTimeItemProperties: { showSecondItem: true, use24HourTime: true },\n});\n\nisc.SimpleType.create({\n\tname: \"YYYY_MM_DD_HH24_MI_SS\",\n\tinheritsFrom: \"bizDateTime\",\n\teditorType: \"YYYY_MM_DD_HH24_MI_SS_Item\",\n\n\t/** Formats the internal date-time value into the `YYYY_MM_DD_HH24_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted date-time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDateItem.format(internalValue, \"toYYYY_MM_DD_HH24_MI_SS\");\n\t},\n});\n\n/**\n * Overrides the `init` method of `isc.TimeItem` to prevent setting the time formatter.\n * This ensures that the time formatter is not modified after the component is constructed.\n */\nisc.TimeItem.addMethods({\n\tinit: function () {\n\t\tthis.Super(\"init\", arguments);\n\t},\n});\n\n/**\n * Implements the BizTimeItem widget.\n * Extends TimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizTimeItem\", \"TimeItem\");\n\nisc.BizTimeItem.addProperties({\n\tuseTextField: true,\n\tuse24HourTime: false,\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"HH:MI am/pm\",\n\ttextFieldProperties: { selectOnFocus: true },\n\tdisplayFormat: \"toShortTime\",\n\ttimeFormatter: \"toShortTime\",\n});\n\nisc.BizTimeItem.addMethods({\n\t/**\n\t * Sets the value of the `BizTimeItem` component.\n\t * If the new value is a string, it attempts to parse it into a valid time.\n\t *\n\t * @param {string|Date|null} newValue - the value to be set. If a string, it will be parsed into a Date object.\n\t * @returns {Date|null} The parsed time value or null if invalid.\n\t * @override\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.Time.parseInput(newValue);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n\n\t/**\n\t * Determines whether the component has advanced criteria.\n\t * Always returns `false` for `BizTimeItem`, as it does not support advanced filtering.\n\t *\n\t * @returns {boolean} `false`, indicating no advanced criteria support.\n\t * @override\n\t */\n\thasAdvancedCriteria: function () {\n\t\treturn false;\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizTime\",\n\tinheritsFrom: \"time\",\n\teditorType: \"BizTimeItem\",\n\n\t/**\n\t * Formats the internal value for editing.\n\t * Delegates to `shortDisplayFormatter` to ensure consistency.\n\t *\n\t * @param {Date|null} internalValue - the raw time value.\n\t * @param {object} field - the field definition.\n\t * @param {object} form - the form containing the field.\n\t * @param {object} record - the record containing the value.\n\t * @returns {string} The formatted time string.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal display.\n\t * Delegates to `shortDisplayFormatter` to ensure consistency.\n\t *\n\t * @param {Date|null} internalValue - the raw time value.\n\t * @param {object} field - the field definition.\n\t * @param {object} component - the UI component displaying the value.\n\t * @param {object} record - the record containing the value.\n\t * @returns {string} The formatted time string.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts a raw time value into a short time format string.\n\t *\n\t * @param {Date|null} internalValue - the time value to format.\n\t * @param {object} field - the field definition.\n\t * @param {object} component - the UI component displaying the value.\n\t * @param {object} record - the record containing the value.\n\t * @returns {string} The formatted time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.Time.toShortTime(internalValue, \"toShortTime\", true);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"HH_MI\",\n\tinheritsFrom: \"bizTime\",\n});\n\n/**\n * Registers HH_MI_SS_Item.\n * Extends BizTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"HH_MI_SS_Item\", \"BizTimeItem\");\n\nisc.HH_MI_SS_Item.addProperties({\n\tuse24HourTime: false,\n\thint: \"HH:MI:SS am/pm\",\n\tdateFormatter: \"toTime\",\n\ttimeFormatter: \"toTime\",\n});\n\nisc.SimpleType.create({\n\tname: \"HH_MI_SS\",\n\tinheritsFrom: \"bizTime\",\n\teditorType: \"HH_MI_SS_Item\",\n\n\t/** Formats the internal time value into the `HH_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.Time.toTime(internalValue, \"toTime\", true);\n\t},\n});\n\n/**\n * Registers HH24_MI_Item.\n * Extends BizTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"HH24_MI_Item\", \"BizTimeItem\");\n\nisc.HH24_MI_Item.addProperties({\n\tuse24HourTime: true,\n\thint: \"HH24:MI\",\n\tdateFormatter: \"toShortPadded24HourTime\",\n\ttimeFormatter: \"toShortPadded24HourTime\",\n});\n\nisc.SimpleType.create({\n\tname: \"HH24_MI\",\n\tinheritsFrom: \"bizTime\",\n\teditorType: \"HH24_MI_Item\",\n\n\t/** Formats the internal time value into the `HH24` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.Time.toShortTime(internalValue, \"toShortPadded24HourTime\", true);\n\t},\n});\n\n/**\n * Registers HH24_MI_SS_Item.\n * Extends BizTimeItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"HH24_MI_SS_Item\", \"BizTimeItem\");\n\nisc.HH24_MI_SS_Item.addProperties({\n\tuse24HourTime: true,\n\thint: \"HH24:MI:SS\",\n\tdateFormatter: \"toPadded24HourTime\",\n\ttimeFormatter: \"toPadded24HourTime\",\n});\n\nisc.SimpleType.create({\n\tname: \"HH24_MI_SS\",\n\tinheritsFrom: \"bizTime\",\n\teditorType: \"HH24_MI_SS_Item\",\n\n\t/** Formats the internal time value into the `HH24_MI_SS` format.\n\t *\n\t * @param {Date|string|null} internalValue - the value to be formatted.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the component instance.\n\t * @param {Object} record - the record object containing the value.\n\t * @returns {string} The formatted time string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.Time.toTime(internalValue, \"toPadded24HourTime\", true);\n\t},\n});\n\n/**\n * Implements the BizDecimal2Item widget.\n * Extends TextItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizDecimal2Item\", \"TextItem\");\n\nisc.BizDecimal2Item.addClassMethods({\n\t/**\n\t * Parses the input value into a decimal number.\n\t *\n\t * @param {string|number|null} value - the input value, which can be a number or a string.\n\t * @returns {number|string} - the parsed float value, or an empty string if parsing fails.\n\t */\n\tparseInput: function (value) {\n\t\tif (isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = value.toString().trim().replace(/\\$|\\,/g, \"\");\n\n\t\t\tif (isNaN(value)) {\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\tconst result = parseFloat(value);\n\n\t\t\t// Ensure the parsed number is within a reasonable range\n\t\t\treturn result >= 1e18 ? \"\" : result;\n\t\t}\n\n\t\treturn \"\";\n\t},\n\n\t/**\n\t * Formats a given number to a localized string with the specified number of decimal places.\n\t *\n\t * @param {number|string|null} value - the value to format. If not a number, it is returned as is.\n\t * @param {number} decimalPlaces - the number of decimal places to format to.\n\t * @returns {string} - the formatted number as a localized string, or the original value if it's not a number.\n\t */\n\tformat: function (value, decimalPlaces) {\n\t\tif (!isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn value.toLocalizedString(decimalPlaces, \".\", \",\", \"-\");\n\t},\n});\n\nisc.BizDecimal2Item.addProperties({\n\tchangeOnBlur: true, // Perform validation on field blur\n\tchangeOnKeypress: false, // Don't perform validation on key press\n\twidth: 100,\n\tshowHint: false,\n\tselectOnFocus: true,\n\tdecimalPlaces: 2,\n});\n\nisc.BizDecimal2Item.addMethods({\n\t/**\n\t * Maps a numeric value to a properly formatted display string.\n\t *\n\t * @param {number|string|null} value - the value to format for display.\n\t * @returns {string} - a formatted string representation of the value, or an empty string if null.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Number(value)) {\n\t\t\tvalue = isc.BizDecimal2Item.parseInput(value);\n\t\t}\n\t\treturn isc.BizDecimal2Item.format(value, this.decimalPlaces);\n\t},\n\n\t/**\n\t * Maps a user-inputted display string back to a numeric value.\n\t *\n\t * @param {string|null} value - the user-inputted value from the display.\n\t * @returns {number|null} - the parsed numeric value, or null if the input is empty.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\treturn null;\n\t\t}\n\t\treturn isc.BizDecimal2Item.parseInput(value);\n\t},\n\n\t/**\n\t * Ensures the displayed value is correctly formatted after an update.\n\t * Overrides the default `updateValue` method.\n\t */\n\tupdateValue: function () {\n\t\t// Map the current value to a valid float and update\n\t\tthis.Super(\"updateValue\", arguments);\n\t\t// Update the displayed string to reflect the correctly formatted value\n\t\tthis.setElementValue(this.mapValueToDisplay(this.getValue()));\n\t},\n\n\t/**\n\t * Sets the value of the item, ensuring it is correctly parsed as a float.\n\t * If passed a string, it maps it to the appropriate float before saving.\n\t *\n\t * @param {string|number|null} newValue - the new value to set.\n\t * @returns {any} - the result of the superclass's `setValue` method.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizDecimal2Item.parseInput(newValue);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizDecimal2\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizDecimal2Item\",\n\n\t/**\n\t * Formats the internal value for editing in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing this field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display in an editable field.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal (read-only) display in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts the internal value to a formatted string with 2 decimal places.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - a formatted string representation of the value.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDecimal2Item.format(internalValue, 2);\n\t},\n\n\t/**\n\t * Validators to ensure the value is either null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizDecimal5Item widget.\n * Extends BizDecimal2Item implemented above.\n */\nisc.ClassFactory.defineClass(\"BizDecimal5Item\", \"BizDecimal2Item\");\n\nisc.BizDecimal5Item.addProperties({\n\tdecimalPlaces: 5,\n});\n\nisc.SimpleType.create({\n\tname: \"bizDecimal5\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizDecimal5Item\",\n\n\t/**\n\t * Formats the internal value for editing in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing this field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display in an editable field.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal (read-only) display in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts the internal value to a formatted string with 5 decimal places.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - a formatted string representation of the value.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDecimal2Item.format(internalValue, 5);\n\t},\n\n\t/**\n\t * Validators to ensure the value is either null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizDecimal10Item widget.\n * Extends BizDecimal2Item implemented above.\n */\nisc.ClassFactory.defineClass(\"BizDecimal10Item\", \"BizDecimal2Item\");\n\nisc.BizDecimal10Item.addProperties({\n\tdecimalPlaces: 10,\n});\n\nisc.SimpleType.create({\n\tname: \"bizDecimal10\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizDecimal10Item\",\n\n\t/**\n\t * Formats the internal value for editing in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing this field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display in an editable field.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal (read-only) display in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts the internal value to a formatted string with 10 decimal places.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - a formatted string representation of the value.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDecimal2Item.format(internalValue, 10);\n\t},\n\n\t/**\n\t * Validators to ensure the value is either null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizDecimal0Item widget.\n * Extends BizDecimal2Item implemented above.\n */\nisc.ClassFactory.defineClass(\"BizDecimal0Item\", \"BizDecimal2Item\");\n\nisc.BizDecimal0Item.addProperties({\n\tdecimalPlaces: 0,\n});\n\nisc.SimpleType.create({\n\tname: \"bizDecimal0\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizDecimal0Item\",\n\n\t/**\n\t * Formats the internal value for editing in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing this field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display in an editable field.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal (read-only) display in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts the internal value to a formatted string with 0 decimal places (whole number).\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - a formatted string representation of the value.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDecimal2Item.format(internalValue, 0);\n\t},\n\n\t/**\n\t * Validators to ensure the value is either null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizDecimal1Item widget.\n * Extends BizDecimal2Item implemented above.\n */\nisc.ClassFactory.defineClass(\"BizDecimal1Item\", \"BizDecimal2Item\");\n\nisc.BizDecimal1Item.addProperties({\n\tdecimalPlaces: 1,\n});\n\nisc.SimpleType.create({\n\tname: \"bizDecimal1\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizDecimal1Item\",\n\n\t/**\n\t * Formats the internal value for editing in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing this field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display in an editable field.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal (read-only) display in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts the internal value to a formatted string with 1 decimal place.\n\t *\n\t * @param {number|null} internalValue - the raw value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - a formatted string representation of the value.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDecimal2Item.format(internalValue, 1);\n\t},\n\n\t/**\n\t * Validators to ensure the value is either null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizDollarsAndCentsItem widget.\n * Extends BizDecimal2Item implemented above.\n */\nisc.ClassFactory.defineClass(\"BizDollarsAndCentsItem\", \"BizDecimal2Item\");\n\nisc.BizDollarsAndCentsItem.addProperties({\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"(+/-)$$$$$.cc\",\n});\n\nisc.SimpleType.create({\n\tname: \"bizDollarsAndCents\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizDollarsAndCentsItem\",\n\n\t/**\n\t * Formats the internal value for editing in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw currency value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} form - the form containing this field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display in an editable field.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal (read-only) display in the UI.\n\t *\n\t * @param {number|null} internalValue - the raw currency value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - the formatted value for display.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Converts the internal value to a formatted string with 2 decimal places,\n\t * ensuring correct currency representation.\n\t *\n\t * @param {number|null} internalValue - the raw currency value stored in the system.\n\t * @param {Object} field - the field definition.\n\t * @param {Object} component - the UI component displaying the field.\n\t * @param {Object} record - the record containing this field.\n\t * @returns {string} - a formatted currency string (e.g., \"$1,234.56\").\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizDollarsAndCentsItem.format(internalValue, 2);\n\t},\n\n\t/**\n\t * Validators to ensure the value is either null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizIntegerPercentageItem widget.\n * Extends TextItem implemented above.\n */\nisc.ClassFactory.defineClass(\"BizIntegerPercentageItem\", \"TextItem\");\n\nisc.BizIntegerPercentageItem.addClassMethods({\n\t/**\n\t * Parses the input value as a percentage.\n\t * If the value is a string, it removes any leading/trailing whitespace and the '%' sign.\n\t * Then, it converts the value to a float, divides it by 100, and returns the result.\n\t * If the value is invalid or exceeds the maximum threshold, `null` is returned.\n\t *\n\t * @param {string|number} value - the value to parse, which could be a string or a number.\n\t * @returns {number|null} - the parsed percentage as a float, or `null` if the value is invalid.\n\t */\n\tparseInput: function (value) {\n\t\tif (isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = value.toString().trim().trim(\"%\");\n\t\t\tif (isNaN(value)) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tlet result = Math.round(parseFloat(value)) / 100;\n\t\t\t\t// Ensure the result is not too large\n\t\t\t\tif (result >= 1000000000000000000.0) {\n\t\t\t\t\tresult = null;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t * Formats the value as a percentage.\n\t * The value is multiplied by 100 and localized for display, with a '%' symbol added at the end.\n\t *\n\t * @param {number|string} value - the value to format as a percentage.\n\t * @returns {string} - the formatted percentage string, e.g., \"12%\" or \"50.5%\".\n\t */\n\tformat: function (value) {\n\t\tif (!isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn (value * 100).toLocalizedString(0, \".\", \",\", \"-\") + \"%\";\n\t},\n});\n\nisc.BizIntegerPercentageItem.addProperties({\n\tchangeOnBlur: true, // Perform validation on field blur\n\tchangeOnKeypress: false, // Don't perform validation on key press\n\twidth: 100,\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"(+/-)99999\",\n\tselectOnFocus: true,\n});\n\nisc.BizIntegerPercentageItem.addMethods({\n\t/**\n\t * Maps a value to its display representation as a percentage.\n\t * If the value is `null`, it returns an empty string.\n\t * If the value is not a number, it attempts to parse the value using `parseInput`.\n\t * The value is then formatted as a percentage.\n\t *\n\t * @param {string|number|null} value - the value to map to display, which could be a string, number, or `null`.\n\t * @returns {string} - the formatted percentage as a string (e.g., \"12%\" or \"50.5%\").\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Number(value)) {\n\t\t\tvalue = isc.BizIntegerPercentageItem.parseInput(value);\n\t\t}\n\t\treturn isc.BizIntegerPercentageItem.format(value);\n\t},\n\n\t/**\n\t * Maps a display value (usually a string) back to the internal value format.\n\t * If the display value is an empty string, it returns `null`.\n\t * Otherwise, it attempts to parse the value using `parseInput`.\n\t *\n\t * @param {string|null} value - the value to map from display to internal value format.\n\t * @returns {number|null} - the parsed internal value as a number or `null` if the value is empty.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\tvalue = null;\n\t\t} else {\n\t\t\tvalue = isc.BizIntegerPercentageItem.parseInput(value);\n\t\t}\n\t\treturn value;\n\t},\n\n\t/**\n\t * Override: Ensures that the displayed value matches the saved value and is formatted correctly.\n\t * This method first calls the superclass method `updateValue` to set the internal value,\n\t * then updates the displayed string so it is formatted correctly.\n\t */\n\tupdateValue: function () {\n\t\t// This will map the value to a valid float\n\t\tthis.Super(\"updateValue\", arguments);\n\t\t// This will update the displayed string so it's formatted correctly\n\t\tthis.setElementValue(this.mapValueToDisplay(this.getValue()));\n\t},\n\n\t/**\n\t * Override: If a string value is passed, it is mapped to the appropriate float value before saving.\n\t * This is necessary as strings will not go through `mapDisplayToValue`.\n\t *\n\t * @param {string|number} newValue - the new value to set, which could be a string or a number.\n\t * @returns {any} - the result of the `setValue` method from the superclass, after mapping the value.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizIntegerPercentageItem.parseInput(newValue);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizIntegerPercentage\",\n\tinheritsFrom: \"integer\",\n\teditorType: \"BizIntegerPercentageItem\",\n\n\t/**\n\t * Formatter function for displaying the value when in edit mode.\n\t * Uses the `shortDisplayFormatter` to format the internal value.\n\t *\n\t * @param {number|null} internalValue - the internal value to format.\n\t * @param {Object} field - the field object that holds the value.\n\t * @param {Object} form - the form object containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted value as a string.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formatter function for displaying the value in normal display mode.\n\t * Uses the `shortDisplayFormatter` to format the internal value.\n\t *\n\t * @param {number|null} internalValue - the internal value to format.\n\t * @param {Object} field - the field object that holds the value.\n\t * @param {Object} component - the component object containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted value as a string.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Short display formatter for formatting the internal value as a percentage.\n\t * Uses `BizIntegerPercentageItem.format` to format the value.\n\t *\n\t * @param {number|null} internalValue - the internal value to format.\n\t * @param {Object} field - the field object that holds the value.\n\t * @param {Object} component - the component object containing the field.\n\t * @param {Object} record - the record containing the field value.\n\t * @returns {string} - the formatted percentage value as a string (e.g., \"10%\").\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizIntegerPercentageItem.format(internalValue);\n\t},\n\n\t/**\n\t * Validators for the custom type. The value must either be `null` or a number.\n\t *\n\t * @type {Array}\n\t * @default [{type: 'custom', clientOnly: true, condition: '(value == null) || isc.isA.Number(value)'}]\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizSimplePercentageItem widget.\n * Extends BizIntegerPercentageItem implemented above.\n */\nisc.ClassFactory.defineClass(\n\t\"BizSimplePercentageItem\",\n\t\"BizIntegerPercentageItem\",\n);\n\nisc.BizSimplePercentageItem.addClassMethods({\n\t/**\n\t * Parses the input value, converting it to a number (float) representation.\n\t * This method handles both strings (with or without the '%' sign) and numbers.\n\t * If the input is a valid percentage string, it converts it to a float and returns it.\n\t *\n\t * @param {string|number} value - the value to be parsed. Can be a string or a number.\n\t * @returns {number|null} - the parsed float value, or null if parsing fails.\n\t */\n\tparseInput: function (value) {\n\t\tif (isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = value.toString().trim(\" \").trim(\"%\");\n\t\t\tif (isNaN(value)) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tlet result = Math.round(parseFloat(value));\n\t\t\t\tif (result >= 1000000000000000000.0) {\n\t\t\t\t\tresult = null;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t * Formats the input value as a percentage string.\n\t * If the input is a number, it converts it to a localized string and appends a '%' symbol.\n\t * If the input is not a number, it returns the original value.\n\t *\n\t * @param {string|number} value - the value to be formatted. Can be a number or a string.\n\t * @returns {string} - the formatted percentage string (e.g., \"10%\") or the original value if not a number.\n\t */\n\tformat: function (value) {\n\t\tif (!isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn value.toLocalizedString(0, \".\", \",\", \"-\") + \"%\";\n\t},\n});\n\nisc.BizSimplePercentageItem.addMethods({\n\t/**\n\t * Maps the value to a displayable format.\n\t * If the value is null, it returns an empty string.\n\t * If the value is not a number, it attempts to parse the input using `parseInput`.\n\t * Finally, it formats the value as a percentage string.\n\t *\n\t * @param {string|number|null} value - the value to be mapped to a displayable format. Can be a number, string, or null.\n\t * @returns {string} - the formatted percentage string or an empty string if value is null.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Number(value)) {\n\t\t\tvalue = isc.BizSimplePercentageItem.parseInput(value);\n\t\t}\n\t\treturn isc.BizSimplePercentageItem.format(value);\n\t},\n\n\t/**\n\t * Maps the display value back to the internal value.\n\t * If the value is an empty string, it returns null.\n\t * Otherwise, it parses the input using `parseInput` to convert it to a number.\n\t *\n\t * @param {string|null} value - the display value to be mapped to the internal value. Can be a string or null.\n\t * @returns {number|null} - the parsed number or null if the input is empty.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\tvalue = null;\n\t\t} else {\n\t\t\tvalue = isc.BizSimplePercentageItem.parseInput(value);\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t/**\n\t * Sets the value of the component.\n\t * If the value passed is a string, it is converted to a float using `parseInput` before being set.\n\t * This ensures that the string representation of the value is properly converted before saving.\n\t *\n\t * @param {string|number} newValue - the new value to be set. It can be a string (percentage) or a number.\n\t * @returns {*} - the result of the `Super(\"setValue\")` call after setting the value.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizSimplePercentageItem.parseInput(newValue);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizSimplePercentage\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizSimplePercentageItem\",\n\n\t/**\n\t * Formats the internal value for editing.\n\t * This method is used for formatting the value when it is being displayed in the editor.\n\t *\n\t * @param {number} internalValue - the value to be formatted.\n\t * @param {object} field - the field the value belongs to.\n\t * @param {object} form - the form in which the value will be displayed.\n\t * @param {object} record - the record that contains the value.\n\t * @returns {string} - the formatted value to be displayed in the editor.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for normal display.\n\t * This method is used for formatting the value when it is displayed outside the editor.\n\t *\n\t * @param {number} internalValue - the value to be formatted.\n\t * @param {object} field - the field the value belongs to.\n\t * @param {object} component - the component that displays the value.\n\t * @param {object} record - the record that contains the value.\n\t * @returns {string} - the formatted value to be displayed normally.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Formats the internal value as a percentage for display.\n\t * This method converts the value into a percentage string (e.g., \"45%\").\n\t *\n\t * @param {number} internalValue - the value to be formatted as a percentage.\n\t * @param {object} field - the field the value belongs to.\n\t * @param {object} component - the component displaying the value.\n\t * @param {object} record - the record that contains the value.\n\t * @returns {string} - the formatted percentage string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizSimplePercentageItem.format(internalValue);\n\t},\n\n\t/**\n\t * Custom validator for the `bizSimplePercentage` type.\n\t * Validates that the value is either null or a valid number.\n\t *\n\t * @type {Array}\n\t * @property {object} validators\n\t * @property {string} type - the type of validation to apply.\n\t * @property {boolean} clientOnly - specifies whether the validation is client-side only.\n\t * @property {string} condition - the validation condition to be checked.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizIntegerSeparatorItem widget.\n * Extends TextItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizIntegerSeparatorItem\", \"TextItem\");\n\nisc.BizIntegerSeparatorItem.addClassMethods({\n\t/**\n\t * Parses the input value, ensuring that it is a valid number.\n\t * Removes commas and trims the string before converting it into a valid float.\n\t *\n\t * @param {string|number} value - the value to be parsed. Can be a string or a number.\n\t * @returns {number|null} - the parsed float or `null` if the value is invalid.\n\t */\n\tparseInput: function (value) {\n\t\t// If the value is already a number, return it as is.\n\t\tif (isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\t// If the value exists, process it.\n\t\tif (value) {\n\t\t\t// Remove commas and trim the string\n\t\t\tvalue = value.toString().replace(/,/g, \"\").trim(\" \");\n\n\t\t\t// Check if the value is a valid number after removing commas.\n\t\t\tif (isNaN(value)) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\t// Round the parsed value and return it\n\t\t\t\tlet result = Math.round(parseFloat(value));\n\n\t\t\t\t// If the result is too large, return null\n\t\t\t\tif (result >= 1000000000000000000.0) {\n\t\t\t\t\tresult = null;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t\t// Return null if the value is empty\n\t\telse {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t * Formats the value as a localized string with thousands separators.\n\t * If the value is a number, it is formatted and returned as a string.\n\t *\n\t * @param {number|string} value - the value to be formatted. Can be a number or a string.\n\t * @returns {string} - the formatted value as a string with thousands separators.\n\t */\n\tformat: function (value) {\n\t\t// If the value is not a number, return it as is.\n\t\tif (!isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\t// Format the value using a localized string with separators for thousands\n\t\treturn value.toLocalizedString(0, \".\", \",\", \"-\");\n\t},\n});\n\nisc.BizIntegerSeparatorItem.addProperties({\n\tchangeOnBlur: true, // Perform validation on field blur\n\tchangeOnKeypress: false, // Don't perform validation on key press\n\twidth: 100,\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"(+/-)99,999,999\",\n\tselectOnFocus: true,\n});\n\nisc.BizIntegerSeparatorItem.addMethods({\n\t/**\n\t * Maps the provided value to a displayable string, formatted with separators for thousands.\n\t * If the value is not already a number, it will be parsed.\n\t *\n\t * @param {string|number|null} value - the value to be mapped for display. Can be a string, number, or `null`.\n\t * @returns {string} - the formatted display string or an empty string if the value is null.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\t// If the value is null, return an empty string\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\n\t\t// If the value is not a number, parse it to a valid number\n\t\tif (!isc.isA.Number(value)) {\n\t\t\tvalue = isc.BizIntegerSeparatorItem.parseInput(value);\n\t\t}\n\n\t\t// Format and return the value for display\n\t\treturn isc.BizIntegerSeparatorItem.format(value);\n\t},\n\n\t/**\n\t * Maps the displayed value back to the corresponding internal value.\n\t * If the display value is an empty string, it will be converted to `null`.\n\t * Otherwise, the string will be parsed into a number.\n\t *\n\t * @param {string|null} value - the value displayed in the UI. Can be a string or `null`.\n\t * @returns {number|null} - the internal value corresponding to the display value, or `null` if the value is empty.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\t// If the value is an empty string, set it to null\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\tvalue = null;\n\t\t} else {\n\t\t\t// Otherwise, parse the value into a number\n\t\t\tvalue = isc.BizIntegerSeparatorItem.parseInput(value);\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t/**\n\t * Updates the internal value and the displayed string in the UI.\n\t * Ensures that the displayed value matches the formatted internal value.\n\t */\n\tupdateValue: function () {\n\t\t// Call the parent method to update the internal value\n\t\tthis.Super(\"updateValue\", arguments);\n\n\t\t// Set the formatted value in the UI element\n\t\tthis.setElementValue(this.mapValueToDisplay(this.getValue()));\n\t},\n\n\t/**\n\t * Sets the internal value, ensuring it is correctly parsed from a string to a number.\n\t * This is necessary because the string passed in doesn't go through `mapDisplayToValue`.\n\t *\n\t * @param {string|number} newValue - the new value to set. Can be a string or number.\n\t * @returns {*} - the result of the `Super` method call for setting the value.\n\t */\n\tsetValue: function (newValue) {\n\t\t// If the new value is a string, parse it into a number\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizIntegerSeparatorItem.parseInput(newValue);\n\t\t}\n\n\t\t// Call the parent method to set the value\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizIntegerSeparator\",\n\tinheritsFrom: \"integer\",\n\teditorType: \"BizIntegerSeparatorItem\",\n\n\t/**\n\t * Formatter for the value when editing. It applies the `shortDisplayFormatter` method to format the internal value\n\t * before displaying it in an editing context.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted for display.\n\t * @param {object} field - the field being edited.\n\t * @param {object} form - the form containing the field.\n\t * @param {object} record - the record containing the field value.\n\t * @returns {string} - the formatted string representing the internal value.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formatter for normal display. It applies the `shortDisplayFormatter` method to format the internal value\n\t * before displaying it in a non-editing context.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted for normal display.\n\t * @param {object} field - the field being displayed.\n\t * @param {object} component - the component that holds the field.\n\t * @param {object} record - the record containing the field value.\n\t * @returns {string} - the formatted string representing the internal value.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Short display formatter for formatting an internal value, typically for display in forms or UI elements.\n\t * It uses the `BizIntegerSeparatorItem.format` method to apply the correct formatting with separators for thousands.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted.\n\t * @param {object} field - the field related to the value.\n\t * @param {object} component - the component where the value will be displayed.\n\t * @param {object} record - the record containing the value to be formatted.\n\t * @returns {string} - the formatted string, representing the value with appropriate separators for thousands.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizIntegerSeparatorItem.format(internalValue);\n\t},\n\n\t/**\n\t * Validators for the `bizIntegerSeparator` type. This custom validator ensures that the value is either `null`\n\t * or a number. It will be applied when validating values in the form.\n\t *\n\t * @type {Array}\n\t * @example\n\t * // Validator ensures that the value is either null or a number\n\t * validators: [{type: 'custom', clientOnly: true, condition: '(value == null) || isc.isA.Number(value)'}]\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizTwoDecimalPlacesPercentageItem widget.\n * Extends BizIntegerPercentageItem implemented above.\n */\nisc.ClassFactory.defineClass(\n\t\"BizTwoDecimalPlacesPercentageItem\",\n\t\"BizIntegerPercentageItem\",\n);\n\nisc.BizTwoDecimalPlacesPercentageItem.addClassMethods({\n\t/**\n\t * Parses the input value, which can be a string or a number, and returns a float value.\n\t * The input string is trimmed, any percentage sign is removed, and the value is parsed as a float.\n\t * The result is rounded to two decimal places.\n\t * If the parsed value is too large or invalid, `null` is returned.\n\t *\n\t * @param {string|number} value - the input value to be parsed. It can be a string representing a percentage (e.g., \"25%\") or a number.\n\t * @returns {number|null} - the parsed float value, or `null` if the input is invalid or too large.\n\t */\n\tparseInput: function (value) {\n\t\tif (isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = value.toString().trim(\" \").trim(\"%\");\n\t\t\tif (isNaN(value)) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tlet result = Math.round(parseFloat(value) * 100) / 10000;\n\t\t\t\tif (result >= 1000000000000000000.0) {\n\t\t\t\t\tresult = null;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t * Formats the value as a percentage, ensuring it's displayed with two decimal places.\n\t * If the value is a valid number, it's multiplied by 100 and formatted using `toLocalizedString` with two decimal places.\n\t * The formatted result includes a percentage sign ('%').\n\t *\n\t * @param {string|number} value - the value to be formatted. It can be a number or a string representing a percentage.\n\t * @returns {string} - the formatted percentage string, or the original string if the value is not a valid number.\n\t */\n\tformat: function (value) {\n\t\tif (!isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn (value * 100).toLocalizedString(2, \".\", \",\", \"-\") + \"%\";\n\t},\n});\n\nisc.BizTwoDecimalPlacesPercentageItem.addProperties({\n\thint: \"(+/-)99999.99\",\n});\n\nisc.BizTwoDecimalPlacesPercentageItem.addMethods({\n\t/**\n\t * Maps the given value to a formatted display string. If the value is `null`, an empty string is returned.\n\t * If the value is not a valid number, it is parsed using the `parseInput` method before being formatted.\n\t * The formatted value is a percentage string with two decimal places.\n\t *\n\t * @param {string|number|null} value - the value to be mapped to a display string. It can be a string or a number.\n\t * @returns {string} - the formatted display string, or an empty string if the value is `null`.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Number(value)) {\n\t\t\tvalue = isc.BizTwoDecimalPlacesPercentageItem.parseInput(value);\n\t\t}\n\t\treturn isc.BizTwoDecimalPlacesPercentageItem.format(value);\n\t},\n\n\t/**\n\t * Maps the given display value back to its raw value. If the display value is an empty string, `null` is returned.\n\t * Otherwise, the value is parsed using the `parseInput` method.\n\t *\n\t * @param {string|null} value - the display value to be mapped back to a raw value. It can be a string or `null`.\n\t * @returns {number|null} - the raw value corresponding to the display value, or `null` if the display value is an empty string.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\tvalue = null;\n\t\t} else {\n\t\t\tvalue = isc.BizTwoDecimalPlacesPercentageItem.parseInput(value);\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t/**\n\t * Sets the value of the item. If the passed value is a string, it is parsed into a float using the `parseInput` method.\n\t * The parsed value is then passed to the `setValue` method of the superclass.\n\t *\n\t * @param {string|number} newValue - the new value to be set. It can be a string or a number.\n\t * @returns {any} - the result of the superclass's `setValue` method call with the parsed value.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizTwoDecimalPlacesPercentageItem.parseInput(newValue);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizTwoDecimalPlacesPercentage\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizTwoDecimalPlacesPercentageItem\",\n\n\t/**\n\t * Formats the internal value for display when editing. This uses the `shortDisplayFormatter` method to generate\n\t * the formatted value.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted.\n\t * @param {object} field - the field object for the value.\n\t * @param {object} form - the form object that contains the field.\n\t * @param {object} record - the record containing the data.\n\t * @returns {string} - the formatted display string for the value.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formats the internal value for display in a normal context (outside of editing). This uses the `shortDisplayFormatter`\n\t * method to generate the formatted value.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted.\n\t * @param {object} field - the field object for the value.\n\t * @param {object} component - the component object that contains the field.\n\t * @param {object} record - the record containing the data.\n\t * @returns {string} - the formatted display string for the value.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * Formats the internal value as a percentage with two decimal places. This method is used for both normal and\n\t * editing display formatting.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted.\n\t * @param {object} field - the field object for the value.\n\t * @param {object} component - the component object that contains the field.\n\t * @param {object} record - the record containing the data.\n\t * @returns {string} - the formatted value as a percentage string with two decimal places.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizTwoDecimalPlacesPercentageItem.format(internalValue);\n\t},\n\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizTimeDurationItem widget.\n * Extends TextItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizTimeDurationItem\", \"TextItem\");\n\nisc.BizTimeDurationItem.addClassMethods({\n\t/**\n\t * Parses the input value and converts it to a float representing a time duration. It can handle:\n\t * - Decimal format (e.g., \"2.5\")\n\t * - time format with hours and minutes (e.g., \"2:30\" or \"2 30\")\n\t *\n\t * @param {string|number} value - the input value to be parsed, either a string or a number.\n\t * @returns {number|null} - the parsed time duration as a float, or `null` if parsing fails.\n\t */\n\tparseInput: function (value) {\n\t\tif (isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (value) {\n\t\t\t// Look for a decimal formatted match (e.g., \"2.5\")\n\t\t\tlet match = /^\\s*\\s*([-+]?\\d+)\\s*\\.\\s*(\\d?\\d)?\\s*$/.exec(value); // sign, 1 or more digits, a decimal point, 1 or 2 digits\n\t\t\tif (match) {\n\t\t\t\tlet result = parseFloat(match[1] + \".\" + (match[2] | 0));\n\t\t\t\tif (result >= 1000000000000000000.0) {\n\t\t\t\t\tresult = null;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\t// Look for a time formatted match (e.g., \"2 30\" or \"2:30\")\n\t\t\tmatch = /^\\s*\\s*([-+]?\\d+)\\s*\\D?\\s*(\\d?\\d)?\\s*$/.exec(value); // sign, 1 or more digits, any non digit, 1 or 2 digits\n\t\t\tif (match) {\n\t\t\t\tconst hours = parseInt(match[1] | 0, 10);\n\t\t\t\tconst minutes = Math.min(parseInt(match[2] | 0, 10), 59);\n\t\t\t\tif (hours >= 0) {\n\t\t\t\t\treturn hours + minutes / 60.0;\n\t\t\t\t}\n\t\t\t\treturn hours - minutes / 60.0;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t * Formats the time duration value into a string with hours and minutes. It formats the value as:\n\t * - Positive values: \"H:MM\"\n\t * - Negative values: \"-H:MM\"\n\t * It ensures that the minutes part is always two digits (e.g., \"02\" instead of \"2\").\n\t *\n\t * @param {number} value - the time duration to be formatted.\n\t * @returns {string} - the formatted time duration string (e.g., \"2:30\", \"-2:30\").\n\t */\n\tformat: function (value) {\n\t\tif (!isc.isA.Number(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tlet decimalMinutes;\n\t\tlet hours;\n\t\tif (value >= 0) {\n\t\t\thours = Math.floor(value);\n\t\t\tdecimalMinutes = value - hours;\n\t\t} else {\n\t\t\thours = Math.ceil(value);\n\t\t\tdecimalMinutes = Math.abs(value - hours);\n\t\t}\n\n\t\tlet stringMinutes = Math.round(decimalMinutes * 60).toString();\n\t\tif (stringMinutes == \"60\") {\n\t\t\thours = value >= 0 ? hours + 1 : hours - 1;\n\t\t\tstringMinutes = \"00\";\n\t\t} else if (stringMinutes.length == 1) {\n\t\t\tstringMinutes = \"0\" + stringMinutes;\n\t\t}\n\n\t\treturn hours + \":\" + stringMinutes;\n\t},\n});\n\nisc.BizTimeDurationItem.addProperties({\n\tchangeOnBlur: true, // Perform validation on field blur\n\tchangeOnKeypress: false, // Don't perform validation on key press\n\twidth: 100,\n\tshowHint: true,\n\tshowHintInField: true,\n\thint: \"(+/-)HHH:MM\",\n\tselectOnFocus: true,\n});\n\nisc.BizTimeDurationItem.addMethods({\n\t/**\n\t * Maps the provided value to a displayable format. If the value is null, an empty string is returned.\n\t * If the value is not a number, it is parsed into a valid time duration before being formatted.\n\t *\n\t * @param {string|number|null} value - the value to be mapped to a displayable format. It can be a string, number, or null.\n\t * @returns {string} - the formatted time duration string.\n\t */\n\tmapValueToDisplay: function (value) {\n\t\tif (value == null) {\n\t\t\treturn isc.emptyString;\n\t\t}\n\t\tif (!isc.isA.Number(value)) {\n\t\t\tvalue = isc.BizTimeDurationItem.parseInput(value);\n\t\t}\n\t\treturn isc.BizTimeDurationItem.format(value);\n\t},\n\n\t/**\n\t * Maps the provided display value (usually from the UI) back to a value that can be saved.\n\t * If the value is an empty string, it will return null. Otherwise, it will parse the string into a valid time duration.\n\t *\n\t * @param {string|null} value - the value to be mapped back to a usable format. Can be a string or null.\n\t * @returns {number|null} - the parsed time duration as a float, or null if the input was an empty string.\n\t */\n\tmapDisplayToValue: function (value) {\n\t\tif (isc.isAn.emptyString(value)) {\n\t\t\tvalue = null;\n\t\t} else {\n\t\t\tvalue = isc.BizTimeDurationItem.parseInput(value);\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t/**\n\t * Ensures the value displayed in the element matches the saved value and is correctly formatted.\n\t * It calls the superclass method to update the value and then updates the displayed value to the properly formatted string.\n\t *\n\t * @override\n\t * @returns {void}\n\t */\n\tupdateValue: function () {\n\t\t// This will map the value to a valid float\n\t\tthis.Super(\"updateValue\", arguments);\n\t\t// This will update the displayed string so it's formatted correctly\n\t\tthis.setElementValue(this.mapValueToDisplay(this.getValue()));\n\t},\n\n\t/**\n\t * Sets a new value for the item. If the provided value is a string, it will be parsed into a valid float\n\t * representing the time duration before being saved. This ensures the value is correctly formatted for saving.\n\t *\n\t * @override\n\t * @param {string|number} newValue - the new value to be set. It can be a string or number.\n\t * @returns {void}\n\t */\n\tsetValue: function (newValue) {\n\t\tif (isc.isA.String(newValue)) {\n\t\t\tnewValue = isc.BizTimeDurationItem.parseInput(newValue);\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"bizTimeDuration\",\n\tinheritsFrom: \"float\",\n\teditorType: \"BizTimeDurationItem\",\n\n\t/**\n\t * Formatter to convert the internal value to a displayable format for the editor.\n\t * Uses the `shortDisplayFormatter` method to return the formatted value.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted for display in the editor.\n\t * @param {object} field - the field containing the value.\n\t * @param {object} form - the form containing the field.\n\t * @param {object} record - the record containing the field.\n\t * @returns {string} - the formatted display value.\n\t */\n\teditFormatter: function (internalValue, field, form, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, form, record);\n\t},\n\n\t/**\n\t * Formatter for the normal display value, used for displaying the value in a standard format.\n\t * It delegates to the `shortDisplayFormatter` method to return the formatted value.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted for standard display.\n\t * @param {object} field - the field containing the value.\n\t * @param {object} component - the component containing the field.\n\t * @param {object} record - the record containing the field.\n\t * @returns {string} - the formatted display value.\n\t */\n\tnormalDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn this.shortDisplayFormatter(internalValue, field, component, record);\n\t},\n\n\t/**\n\t * A helper function to format the internal value into a string representation.\n\t * This method is used by both the `editFormatter` and `normalDisplayFormatter`.\n\t *\n\t * @param {number} internalValue - the internal value to be formatted for display.\n\t * @param {object} field - the field containing the value.\n\t * @param {object} component - the component containing the value.\n\t * @param {object} record - the record containing the value.\n\t * @returns {string} - the formatted time duration string.\n\t */\n\tshortDisplayFormatter: function (internalValue, field, component, record) {\n\t\treturn isc.BizTimeDurationItem.format(internalValue);\n\t},\n\n\t/**\n\t * Custom validator to ensure the value is either null or a valid number.\n\t * This is used for validating the value entered by the user.\n\t *\n\t * @type {Array<object>}\n\t * @property {string} type - the type of the validator.\n\t * @property {boolean} clientOnly - indicates that this is a client-side validation.\n\t * @property {string} condition - the condition for validation, checks that the value is null or a valid number.\n\t */\n\tvalidators: [\n\t\t{\n\t\t\ttype: \"custom\",\n\t\t\tclientOnly: true,\n\t\t\tcondition: \"(value == null) || isc.isA.Number(value)\",\n\t\t},\n\t],\n});\n\n/**\n * Implements the BizContentLinkItem widget.\n * Extends CanvasItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizContentLinkItem\", isc.CanvasItem);\n\nisc.BizContentLinkItem.addProperties({\n\theight: 25,\n\twidth: \"*\",\n\trowSpan: \"*\",\n\tendRow: false,\n\tstartRow: false,\n\tcanFocus: true,\n\tshouldSaveValue: true, // This is an editable data item\n});\n\nisc.BizContentLinkItem.addMethods({\n\t/**\n\t * Initializes the `BizContentLinkItem` by creating the link and canvas elements.\n\t * If the item is editable, it includes an upload button; otherwise, it only displays the link.\n\t *\n\t * @param {object} config - the configuration object for the component.\n\t * @param {boolean} config.editable - whether the content link is editable.\n\t */\n\tinit: function (config) {\n\t\t// Create an HTMLFlow to display the link content\n\t\tthis._link = isc.HTMLFlow.create({\n\t\t\tcontents: \"Empty\",\n\t\t\twidth: \"100%\",\n\t\t});\n\n\t\t// Create the canvas layout depending on whether the item is editable or not\n\t\tif (config.editable) {\n\t\t\tthis.canvas = isc.HLayout.create({\n\t\t\t\tdefaultLayoutAlign: \"center\",\n\t\t\t\tmembers: [\n\t\t\t\t\tthis._link,\n\t\t\t\t\tisc.LayoutSpacer.create({ width: 3 }),\n\t\t\t\t\tisc.BizUtil.createUploadButton(this, false, false),\n\t\t\t\t],\n\t\t\t});\n\t\t} else {\n\t\t\tthis.canvas = isc.HLayout.create({\n\t\t\t\tdefaultLayoutAlign: \"center\",\n\t\t\t\tmembers: [this._link],\n\t\t\t});\n\t\t}\n\n\t\t// Call the superclass's init method\n\t\tthis.Super(\"init\", arguments);\n\t},\n\n\t/**\n\t * Updates the content link value and displays it on the link element.\n\t * If the value is not provided, it displays \"<Empty>\".\n\t *\n\t * @param {string|null} newValue - the new value for the content link, or `null` if the link should be empty.\n\t * @returns {object} - the updated `BizContentLinkItem` instance.\n\t */\n\tsetValue: function (newValue) {\n\t\t// Ensure the link is updated only if the canvas is initialized and the value is not user-set\n\t\tif (this.canvas != null && !this.userSetValue) {\n\t\t\tif (newValue) {\n\t\t\t\t// Construct the URL with required query parameters\n\t\t\t\tconst url =\n\t\t\t\t\tSKYVE.Util.CONTEXT_URL +\n\t\t\t\t\t\"content?_n=\" +\n\t\t\t\t\tnewValue +\n\t\t\t\t\t\"&_doc=\" +\n\t\t\t\t\tthis.form._view._mod +\n\t\t\t\t\t\".\" +\n\t\t\t\t\tthis.form._view._doc +\n\t\t\t\t\t\"&_b=\" +\n\t\t\t\t\tthis.name.replaceAll(\"_\", \".\");\n\n\t\t\t\t// Update the link's contents with the constructed URL\n\t\t\t\tthis._link.setContents(\n\t\t\t\t\t'<div style=\"line-height:25px;vertical-align:middle;\">' +\n\t\t\t\t\t\tthis.canvas.linkHTML(\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\tthis.value ? this.value : \"Content\",\n\t\t\t\t\t\t\t\"_blank\",\n\t\t\t\t\t\t) +\n\t\t\t\t\t\t\"</div>\",\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// If no value, display \"<Empty>\" in the link\n\t\t\t\tthis._link.setContents(\n\t\t\t\t\t'<div style=\"line-height:25px;vertical-align:middle;\">&lt;Empty&gt;</div>',\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Call the superclass's setValue method\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tinheritsFrom: \"canvas\",\n\tname: \"bizContentLink\",\n\teditorType: \"BizContentLinkItem\",\n});\n\n/**\n * Implements the BizContentImageItem widget.\n * Extends CanvasItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizContentImageItem\", isc.CanvasItem);\n\nisc.BizContentImageItem.addProperties({\n\twidth: \"*\",\n\trowSpan: \"*\",\n\tendRow: false,\n\tstartRow: false,\n\tcanFocus: true,\n\tshouldSaveValue: true, // This is an editable data item\n});\n\nisc.BizContentImageItem.addMethods({\n\t/**\n\t * Initializes the `BizContentImageItem` by creating an image element and a canvas layout.\n\t * If the item is editable, it includes an upload button; otherwise, it only displays the image.\n\t *\n\t * @param {object} config - the configuration object for the component.\n\t * @param {string} [config.width='100%'] - the width of the image.\n\t * @param {string} [config.height='100%'] - the height of the image.\n\t * @param {boolean} config.editable - whether the image is editable.\n\t * @param {boolean} [config.showMarkup=false] - whether to show the markup in the upload button.\n\t */\n\tinit: function (config) {\n\t\t// Create an Img element with specified configurations\n\t\tthis._img = isc.Img.create({\n\t\t\twidth: config.width ? config.width : \"100%\",\n\t\t\theight: config.height ? config.height : \"100%\",\n\t\t\timageType: \"stretch\",\n\t\t\toverflow: \"hidden\",\n\t\t\tisGroup: true,\n\t\t\tstyleName: \"bizhubRoundedBorder bizhubContentImgFit\",\n\t\t\tgroupBorderCSS: \"1px solid #bfbfbf\",\n\t\t\tmargin: 1,\n\t\t\tgroupLabelBackgroundColor: \"transparent\",\n\t\t\tshowDisabled: false,\n\t\t\tshowDown: false,\n\t\t\tshowFocus: false,\n\t\t\tshowFocused: false,\n\t\t\tshowFocusedAsOver: false,\n\t\t\tshowRollOver: false,\n\t\t\tsrc: \"[SKIN]blank.gif\",\n\t\t\tcursor: \"pointer\",\n\t\t\tclick(event) {\n\t\t\t\tlet src = this.src;\n\t\t\t\t// Remove the width and height parameters to get the full image, not a Thumbnail\n\t\t\t\tsrc = src.replace(/&_w=\\d*/, \"\").replace(/&_h=\\d*/, \"\");\n\t\t\t\twindow.open(src, \"_blank\");\n\t\t\t},\n\t\t});\n\n\t\t// Create the canvas layout with an upload button if editable\n\t\tif (config.editable) {\n\t\t\tconst centredUploadButton = isc.HLayout.create({\n\t\t\t\twidth: 1, // Make minimum width of button\n\t\t\t\theight: config.height ? config.height : \"100%\",\n\t\t\t\tdefaultLayoutAlign: \"center\",\n\t\t\t\tmembers: [\n\t\t\t\t\tisc.BizUtil.createUploadButton(this, true, config.showMarkup),\n\t\t\t\t],\n\t\t\t});\n\t\t\tthis.canvas = isc.HLayout.create({\n\t\t\t\tdefaultLayoutAlign: \"center\",\n\t\t\t\tmembers: [\n\t\t\t\t\tthis._img,\n\t\t\t\t\tisc.LayoutSpacer.create({ width: 5 }),\n\t\t\t\t\tcentredUploadButton,\n\t\t\t\t],\n\t\t\t});\n\t\t} else {\n\t\t\tthis.canvas = isc.HLayout.create({\n\t\t\t\tdefaultLayoutAlign: \"center\",\n\t\t\t\tmembers: [this._img],\n\t\t\t});\n\t\t}\n\n\t\t// Call the superclass's init method\n\t\tthis.Super(\"init\", arguments);\n\t},\n\n\t/**\n\t * Updates the image source when a new value is set.\n\t * If the value is not provided, it sets the source to a blank image.\n\t *\n\t * @param {string|null} newValue - the new content value, or `null` to clear the image.\n\t * @returns {object} - the updated `BizContentImageItem` instance.\n\t */\n\tsetValue: function (newValue) {\n\t\t// Ensure the image is updated only if the canvas is initialized and the value is not user-set\n\t\tif (this.canvas != null && !this.userSetValue) {\n\t\t\tif (newValue) {\n\t\t\t\t// Construct the URL with required query parameters\n\t\t\t\tconst url =\n\t\t\t\t\tSKYVE.Util.CONTEXT_URL +\n\t\t\t\t\t\"content?_n=\" +\n\t\t\t\t\tnewValue +\n\t\t\t\t\t\"&_doc=\" +\n\t\t\t\t\tthis.form._view._mod +\n\t\t\t\t\t\".\" +\n\t\t\t\t\tthis.form._view._doc +\n\t\t\t\t\t\"&_b=\" +\n\t\t\t\t\tthis.name.replaceAll(\"_\", \".\") +\n\t\t\t\t\t\"&_w=\" +\n\t\t\t\t\t(this._img.getWidth() - 20) + // -20 for the border\n\t\t\t\t\t\"&_h=\" +\n\t\t\t\t\t(this._img.getHeight() - 20); // -20 for the border\n\t\t\t\t// Update the image source\n\t\t\t\tthis._img.setSrc(url);\n\t\t\t} else {\n\t\t\t\t// If no value, display a blank image\n\t\t\t\tthis._img.setSrc(\"[SKIN]blank.gif\");\n\t\t\t}\n\t\t}\n\n\t\t// Call the superclass's setValue method\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tinheritsFrom: \"canvas\",\n\tname: \"bizContentImage\",\n\teditorType: \"BizContentImageItem\",\n});\n\n/**\n * Implements the BizLookupDescriptionItem widget.\n * Extends CanvasItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizLookupDescriptionItem\", isc.CanvasItem);\n\nisc.BizLookupDescriptionItem.addProperties({\n\theight: 20,\n\twidth: \"*\",\n\trowSpan: \"*\",\n\tendRow: false,\n\tstartRow: false,\n\tcanFocus: true,\n\tshouldSaveValue: true, // This is an editable data item\n\tfetchMissingValues: false, // These are defined for the combo but also need to be here on the canvas\n\tautoFetchData: false, // Don't let the canvas autofetch, the combo on the canvas does this\n\n\t// Based on document permissions\n\tcanCreate: false,\n\tcanUpdate: false,\n\n\t// Conditions to evaluate from the view widget definition\n\tcanPick: true,\n\tcanEdit: true,\n\tcanAdd: true,\n\tcanClear: true,\n});\n\nisc.BizLookupDescriptionItem.addMethods({\n\t/**\n\t * Initializes the combo box with the given configuration.\n\t * @param {Object} config - the configuration object for the combo box.\n\t * @param {boolean} config.allowEmptyValue - specifies if an empty value is allowed.\n\t * @param {string} config.textAlign - the alignment of the text within the combo box.\n\t * @param {Object} config.optionDataSource - the data source for the options of the combo box.\n\t * @param {string} config.valueField - the field representing the value in the options.\n\t * @param {string} config.displayField - the field representing the display value in the options.\n\t * @param {Object} config.pickListFields - the fields for the pick list.\n\t * @param {Object} config.filterFields - the fields to use for filtering.\n\t * @param {Object} config.params - additional parameters for filtering.\n\t */\n\tinit: function (config) {\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\tconst combo = {\n\t\t\tname: \"_combo\",\n\t\t\ttype: \"comboBox\",\n\t\t\tshowTitle: false,\n\t\t\twidth: \"*\",\n\t\t\ttextAlign: config.textAlign,\n\t\t\tselectOnFocus: true,\n\t\t\tfetchMissingValues: false,\n\t\t\tautoFetchData: false,\n\t\t\tuseClientFiltering: false,\n\t\t\tcachePickListResults: false,\n\t\t\tallowEmptyValue: config.allowEmptyValue,\n\t\t\toptionDataSource: config.optionDataSource,\n\t\t\tvalueField: config.valueField,\n\t\t\tdisplayField: config.displayField,\n\t\t\tpickListFields: config.pickListFields,\n\t\t\tfilterFields: config.filterFields,\n\t\t\tpickListProperties: {\n\t\t\t\t/**\n\t\t\t\t * Filters data based on the provided criteria and updates the request properties.\n\t\t\t\t * @param {Object} criteria - the filter criteria.\n\t\t\t\t * @param {function} callback - the callback function to call after filtering.\n\t\t\t\t * @param {Object} requestProperties - the request properties to be updated.\n\t\t\t\t */\n\t\t\t\tfilterData: function (criteria, callback, requestProperties) {\n\t\t\t\t\tif (requestProperties) {\n\t\t\t\t\t\tif (!requestProperties.params) {\n\t\t\t\t\t\t\trequestProperties.params = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\trequestProperties = { params: {} };\n\t\t\t\t\t}\n\n\t\t\t\t\trequestProperties.params._c = me._view.gather(false)._c;\n\t\t\t\t\tif (me._view._b) {\n\t\t\t\t\t\trequestProperties.params._b = me._view._b;\n\t\t\t\t\t}\n\t\t\t\t\trequestProperties.params._cc = \"\"; // continue conversation\n\t\t\t\t\tthis.Super(\"filterData\", arguments);\n\t\t\t\t},\n\t\t\t},\n\t\t\tcompleteOnTab: true,\n\t\t\ttextMatchStyle: \"substring\",\n\n\t\t\t/**\n\t\t\t * Gets and modifies the filter criteria used for the pick list.\n\t\t\t * This method extends the default filter criteria by converting it using BizUtil functions\n\t\t\t * and adding any additional parameters specified in the configuration.\n\t\t\t *\n\t\t\t * @returns {Object} the modified filter criteria object containing:\n\t\t\t *   - the base criteria from the parent class\n\t\t\t *   - converted criteria using BizUtil.convertFilterCriteria\n\t\t\t *   - additional parameters from config.params if specified\n\t\t\t */\n\t\t\tgetPickListFilterCriteria: function () {\n\t\t\t\tlet result = this.Super(\"getPickListFilterCriteria\", arguments);\n\t\t\t\tisc.BizUtil.convertFilterCriteria(result);\n\t\t\t\tif (config.params) {\n\t\t\t\t\tresult = isc.BizUtil.completeFilterCriteria(\n\t\t\t\t\t\tresult,\n\t\t\t\t\t\tconfig.params,\n\t\t\t\t\t\tme._view,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Shows the pick list dropdown and marks the data source for dropdown behavior.\n\t\t\t * If the option data source supports criteria comparison, sets a flag indicating\n\t\t\t * this is a dropdown operation.\n\t\t\t *\n\t\t\t * @override\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tshowPicker: function () {\n\t\t\t\tconst optionDataSource = this.getOptionDataSource();\n\t\t\t\tif (optionDataSource && optionDataSource.compareCriteria) {\n\t\t\t\t\toptionDataSource._drop = true;\n\t\t\t\t}\n\t\t\t\tthis.Super(\"showPicker\");\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the change event of the combo box.\n\t\t\t * @param {DynamicForm} form - the form containing the combo box.\n\t\t\t * @param {Canvas} item - the combo box item.\n\t\t\t * @param {string} value - the new value selected.\n\t\t\t */\n\t\t\tchanged: function (form, item, value) {\n\t\t\t\tif (this.getDisplayValue() == value) {\n\t\t\t\t\tme.Super(\"setValue\", null);\n\t\t\t\t} else {\n\t\t\t\t\tme.Super(\"setValue\", [value]);\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tme.bizPicked(me.form, me, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t * Handles the blur event of the combo box.\n\t\t\t * @param {DynamicForm} form - the form containing the combo box.\n\t\t\t * @param {Canvas} item - the combo box item.\n\t\t\t */\n\t\t\tblur: (form, item) => {\n\t\t\t\tif (this.getValue() == null) {\n\t\t\t\t\tconst itemValue = item.getValue();\n\t\t\t\t\tif (itemValue && itemValue != \"\") {\n\t\t\t\t\t\titem.setValue(\"\"); // blank the combobox\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tvalueMap: {},\n\t\t};\n\n\t\t// Create the form with editable state\n\t\tif (config.editable) {\n\t\t\tthis._form = isc.DynamicForm.create({\n\t\t\t\twriteFormTag: false,\n\t\t\t\tnumCols: 2,\n\t\t\t\tcolWidths: [\"*\", 65],\n\t\t\t\tmargin: 0,\n\t\t\t\tcellPadding: 0,\n\t\t\t});\n\n\t\t\tthis._splitButton = isc.BizUtil.createSplitButton(\n\t\t\t\t\"Pick\",\n\t\t\t\tnull,\n\t\t\t\tfalse,\n\t\t\t\t\"Pick a record\",\n\t\t\t\t() => {\n\t\t\t\t\tconst pickList = isc.BizUtil.getPickList(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\tconfig.params,\n\t\t\t\t\t\tthis._view,\n\t\t\t\t\t);\n\t\t\t\t\tpickList.setDataSource(config.optionDataSource);\n\t\t\t\t\tisc.WindowStack.popup(this.getPageRect(), \"Pick\", true, [pickList]);\n\t\t\t\t},\n\t\t\t\t\"Other Options\",\n\t\t\t\tthis._form,\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Edit\",\n\t\t\t\t\t\ticon: \"icons/zoom.gif\",\n\t\t\t\t\t\tclick: (event) => {\n\t\t\t\t\t\t\tthis.zoom(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\t\t\t\treturn this.canUpdate && this.canEdit && this.getValue() != null;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"New\",\n\t\t\t\t\t\ticon: \"icons/new.png\",\n\t\t\t\t\t\tclick: (event) => {\n\t\t\t\t\t\t\tconst newParams = config.params\n\t\t\t\t\t\t\t\t? isc.BizUtil.addFilterRequestParams(\n\t\t\t\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t\t\t\tconfig.params,\n\t\t\t\t\t\t\t\t\t\tthis._view,\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t: {};\n\t\t\t\t\t\t\tthis.zoom(true, newParams);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\t\t\t\treturn this.canCreate && this.canAdd;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Clear\",\n\t\t\t\t\t\ticon: \"icons/delete.png\",\n\t\t\t\t\t\tclick: (event) => {\n\t\t\t\t\t\t\tthis.setValue(null);\n\t\t\t\t\t\t\tthis.bizCleared(this.form, this, null);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\t\t\t\treturn this.canClear;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t);\n\n\t\t\tthis._form.setItems([\n\t\t\t\tcombo,\n\t\t\t\t{\n\t\t\t\t\tname: \"_splitButton\",\n\t\t\t\t\tshowTitle: false,\n\t\t\t\t\ttype: \"canvas\",\n\t\t\t\t\tcanvas: this._splitButton,\n\t\t\t\t\talign: \"right\",\n\t\t\t\t},\n\t\t\t]);\n\t\t} else {\n\t\t\tthis._form = isc.DynamicForm.create({\n\t\t\t\twriteFormTag: false,\n\t\t\t\tnumCols: 1,\n\t\t\t\tcolWidths: [\"*\"],\n\t\t\t});\n\n\t\t\tthis._form.setItems([combo]);\n\t\t}\n\n\t\tthis.canvas = this._form;\n\t\tthis.Super(\"init\", arguments);\n\t},\n\n\t/**\n\t * Sets the value of the combo box.\n\t * @param {string} newValue - the new value to set.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (this.canvas != null) {\n\t\t\tif (this.userSetValue) {\n\t\t\t\tthis.bizPicked(this.form, this, newValue);\n\t\t\t} else {\n\t\t\t\tthis._form.getItem(\"_combo\").setValue(newValue);\n\t\t\t}\n\t\t}\n\n\t\tthis.Super(\"setValue\", [newValue]);\n\t},\n\n\t/**\n\t * Focuses the combo box item.\n\t */\n\tfocusInItem: function () {\n\t\tif (this._form) {\n\t\t\tthis._form.getItem(\"_combo\").focusInItem();\n\t\t}\n\t},\n\n\t/**\n\t * A placeholder method for when a business entity is added.\n\t * @param {DynamicForm} form - the form containing the item.\n\t * @param {Canvas} item - the item added.\n\t * @param {string} value - the value of the item added.\n\t */\n\tbizAdded: function (form, item, value) {\n\t\t// No operation - overridden in server-side definition if required\n\t},\n\n\t/**\n\t * A placeholder method for when a business entity is edited.\n\t * @param {DynamicForm} form - the form containing the item.\n\t * @param {Canvas} item - the item edited.\n\t * @param {string} value - the value of the item edited.\n\t */\n\tbizEdited: function (form, item, value) {\n\t\t// No operation - overridden in server-side definition if required\n\t},\n\n\t/**\n\t * A placeholder method for when a business entity is picked.\n\t * @param {DynamicForm} form - the form containing the item.\n\t * @param {Canvas} item - the item picked.\n\t * @param {string} value - the value of the item picked.\n\t */\n\tbizPicked: function (form, item, value) {\n\t\t// No operation - overridden in server-side definition if required\n\t},\n\n\t/**\n\t * A placeholder method for when a business entity is cleared.\n\t * @param {DynamicForm} form - the form containing the item.\n\t * @param {Canvas} item - the item cleared.\n\t * @param {string} value - the value of the item cleared.\n\t */\n\tbizCleared: function (form, item, value) {\n\t\t// No operation - overridden in server-side definition if required\n\t},\n\n\t/**\n\t * Sets the value map from the fetched server data.\n\t * @param {Object} values The values fetched from the server.\n\t */\n\tsetValueMapFromEditView: function (values) {\n\t\tthis._setValueMap(\n\t\t\tvalues[this.name],\n\t\t\tvalues[this.name + \"_\" + this.displayField],\n\t\t);\n\t},\n\n\t/**\n\t * Sets the value map from a picked record.\n\t * @param {Object} values - the picked record values.\n\t */\n\tsetValueMapFromPickList: function (values) {\n\t\tthis._setValueMap(values.bizId, values[this.displayField]);\n\t},\n\n\t/**\n\t * Internal method to set the value map for the combo box.\n\t * @param {string} bizId - the business ID.\n\t * @param {string} display - the display value.\n\t */\n\t_setValueMap: function (bizId, display) {\n\t\tif (bizId) {\n\t\t\tconst valueMap = {};\n\t\t\tvalueMap[bizId] = display || \"<unknown>\";\n\t\t\tthis._form.getItem(\"_combo\").setValueMap(valueMap);\n\t\t\tthis._form.getItem(\"_combo\").setValue(bizId);\n\t\t}\n\t},\n\n\t/**\n\t * Enables or disables the pick functionality depending on the `canPick` property.\n\t * Disables the combo box and split button (if available) when `canPick` is false.\n\t *\n\t * @returns {void}\n\t */\n\tenableDisablePick: function () {\n\t\t// Enable or disable the combo box based on the canPick property\n\t\tthis._form.getItem(\"_combo\").setDisabled(!this.canPick);\n\n\t\t// If there's a split button (editable), disable its first member based on canPick\n\t\tif (this._splitButton) {\n\t\t\tthis._splitButton.getMember(0).setDisabled(!this.canPick);\n\t\t}\n\t},\n\n\t/**\n\t * Zooms into a view, either for a new record or an existing one, based on the `zoomToNew` flag.\n\t * The view is populated with parameters passed through `newParams`, and a validation check occurs before zooming.\n\t *\n\t * @param {boolean} zoomToNew - a flag indicating whether to zoom to a new record (`true`) or an existing one (`false`).\n\t * @param {Object|null|undefined} [newParams] - a map of parameter names to expressions to evaluate.\n\t *        Can be `null` or `undefined` if no new parameters are needed.\n\t * @returns {void}\n\t */\n\tzoom: function (zoomToNew, newParams) {\n\t\tconst mod = isc.DataSource.get(this.optionDataSource).modoc;\n\t\tconst dotIndex = mod.indexOf(\".\");\n\t\tconst doc = mod.substring(dotIndex + 1);\n\t\tconst modName = mod.substring(0, dotIndex);\n\n\t\t// Fetch the edit view using BizUtil\n\t\tisc.BizUtil.getEditView(modName, doc, (view) => {\n\t\t\t// Determine the view binding for proper view context\n\t\t\tconst viewBinding = this._view._b\n\t\t\t\t? `${this._view._b}.${this.name}`\n\t\t\t\t: this.name;\n\t\t\tconst fromRect = this.getPageRect();\n\n\t\t\tif (zoomToNew) {\n\t\t\t\t// Handle case for zooming into a new record\n\t\t\t\tconst required = this.required;\n\t\t\t\tif (required) {\n\t\t\t\t\tthis.setRequired(false);\n\t\t\t\t}\n\n\t\t\t\tconst instance = this._view.gather(true);\n\t\t\t\tif (instance) {\n\t\t\t\t\t// Apply changes before zooming in\n\t\t\t\t\tif (instance._apply || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\tdelete instance._apply;\n\t\t\t\t\t\tthis._view.saveInstance(true, null, () => {\n\t\t\t\t\t\t\tthis.setRequired(required); // Reset required flag\n\t\t\t\t\t\t\tisc.WindowStack.popup(fromRect, \"New\", false, [view]);\n\t\t\t\t\t\t\tview.newInstance(newParams, viewBinding, instance._c, false);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setRequired(required); // Reset required flag\n\t\t\t\t\t\tisc.WindowStack.popup(fromRect, \"New\", false, [view]);\n\t\t\t\t\t\tview.newInstance(newParams, viewBinding, instance._c, false);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tisc.warn(\"You cannot zoom in until you fix the problems found\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Handle case for zooming into an existing record\n\t\t\t\tconst instance = this._view.gather(true);\n\t\t\t\tif (instance) {\n\t\t\t\t\t// Apply changes before zooming in\n\t\t\t\t\tif (instance._apply || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\tdelete instance._apply;\n\t\t\t\t\t\tthis._view.saveInstance(true, null, () => {\n\t\t\t\t\t\t\tisc.WindowStack.popup(fromRect, \"Edit\", false, [view]);\n\t\t\t\t\t\t\tview.editInstance(\n\t\t\t\t\t\t\t\tthis.getValue(),\n\t\t\t\t\t\t\t\tviewBinding,\n\t\t\t\t\t\t\t\tinstance._c,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tisc.WindowStack.popup(fromRect, \"Edit\", false, [view]);\n\t\t\t\t\t\tview.editInstance(this.getValue(), viewBinding, instance._c, false);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tisc.warn(\"You cannot zoom in until you fix the problems found\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n});\n\nisc.SimpleType.create({\n\tinheritsFrom: \"comboBox\",\n\tname: \"bizLookupDescription\",\n\teditorType: \"BizLookupDescriptionItem\",\n});\n\n/**\n * Implements the BizCompleteItem widget.\n * Extends ComboBoxItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizCompleteItem\", isc.ComboBoxItem);\n\nisc.BizCompleteItem.addProperties({\n\toptionDataSource: isc.BizUtil.COMPLETE_DATA_SOURCE,\n\tshowPickerIcon: true, // NB false wrecks the style sheet for the picker - no borders etc\n\tfetchMissingValues: false,\n\tautoFetchData: false,\n\tuseClientFiltering: false,\n\tcachePickListResults: false,\n\ttextMatchStyle: \"substring\",\n\tvalueField: \"value\",\n\tdisplayField: \"value\",\n\tselectOnFocus: true,\n\tcompleteOnTab: true,\n});\n\nisc.BizCompleteItem.addMethods({\n\t/**\n\t * Initializes the `BizCompleteItem` with configuration settings and sets up the pick list properties.\n\t *\n\t * @param {Object} config - the configuration object passed to initialize the component.\n\t * @param {string} config._a - a property used to configure how unknown values are handled. If 'constrain', unknown values are not allowed.\n\t * @param {string} config._b - a property used for setting attributes in the request.\n\t * @returns {void}\n\t */\n\tinit: function (config) {\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\t// Check if the '_a' configuration property is 'constrain' and adjust addUnknownValues accordingly\n\t\tif (config._a === \"constrain\") {\n\t\t\tthis.addUnknownValues = false;\n\t\t}\n\n\t\t// Setup the pick list properties\n\t\tthis.pickListProperties = {\n\t\t\t/**\n\t\t\t * Custom filterData method for handling request properties and parameters.\n\t\t\t *\n\t\t\t * @param {Object} criteria - the filtering criteria used for the request.\n\t\t\t * @param {function} callback - the callback function to invoke once data is filtered.\n\t\t\t * @param {Object} requestProperties - the properties for the request, including parameters.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tfilterData: function (criteria, callback, requestProperties) {\n\t\t\t\t// Ensure parameters are included in requestProperties\n\t\t\t\tif (!requestProperties) {\n\t\t\t\t\trequestProperties = {};\n\t\t\t\t}\n\t\t\t\tif (!requestProperties.params) {\n\t\t\t\t\trequestProperties.params = {};\n\t\t\t\t}\n\n\t\t\t\t// Set additional parameters for the request\n\t\t\t\trequestProperties.params._attr = config._b;\n\t\t\t\trequestProperties.params._a = config._a;\n\n\t\t\t\t// These parameters are required by Bizlet.complete() on the server-side (if defined)\n\t\t\t\trequestProperties.params._c = me.form._view.gather(false)._c;\n\t\t\t\tif (me.form._view._b) {\n\t\t\t\t\trequestProperties.params._b = me.form._view._b;\n\t\t\t\t}\n\n\t\t\t\t// Call the superclass's filterData method\n\t\t\t\tthis.Super(\"filterData\", arguments);\n\t\t\t},\n\t\t};\n\n\t\t// Call the superclass's init method to complete the initialization\n\t\tthis.Super(\"init\", arguments);\n\t},\n});\n\nisc.SimpleType.create({\n\tinheritsFrom: \"comboBox\",\n\tname: \"bizComplete\",\n\teditorType: \"BizCompleteItem\",\n});\n\n// CKEditor is loaded on the fly when required\n// NB: This is declared with 'var' to ensure global scope\nvar CKEDITOR = null;\n\n/**\n * Implements the BizHTMLItem widget.\n * Extends CanvasItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizHTMLItem\", isc.CanvasItem);\n\nisc.BizHTMLItem.addProperties({\n\twidth: \"*\",\n\theight: \"200px\",\n\trowSpan: \"*\",\n\tendRow: false,\n\tstartRow: false,\n\tcanFocus: true,\n\tshouldSaveValue: true, // This is an editable data item\n});\n\nisc.BizHTMLItem.addMethods({\n\t/**\n\t * Initializes the BizHTMLItem with a configured HTML pane and an edit button to manage HTML content.\n\t * Sets up CKEditor for editing HTML content if available and configures mention markers if defined.\n\t *\n\t * @param {Object} config - the configuration object for initializing the BizHTMLItem.\n\t * @param {number} config.width - the width of the HTML pane.\n\t * @param {number} config.height - the height of the HTML pane.\n\t * @param {string} [config.mentionMarkers] - a comma-separated list of mention markers to configure CKEditor mentions.\n\t * @returns {void}\n\t */\n\tinit: function (config) {\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\t// Create the HTML pane for displaying content\n\t\tthis._pane = isc.HTMLPane.create({\n\t\t\twidth: config.width,\n\t\t\theight: config.height,\n\t\t\tisGroup: true,\n\t\t\tstyleName: \"bizhubRoundedBorder\",\n\t\t\tgroupBorderCSS: \"1px solid #bfbfbf\",\n\t\t\tmargin: 1,\n\t\t\tgroupLabelBackgroundColor: \"transparent\",\n\t\t\tpadding: 10,\n\t\t\tcontents: \"Empty\",\n\t\t});\n\n\t\t// Create an edit button for triggering the HTML editor (CKEditor)\n\t\tthis._editButton = isc.IButton.create({\n\t\t\twidth: 40,\n\t\t\ttitle: \"Edit\",\n\t\t\tcanHover: true,\n\t\t\tgetHoverHTML() {\n\t\t\t\treturn \"Edit the HTML\";\n\t\t\t},\n\t\t\t/**\n\t\t\t * Handles the click event to toggle the CKEditor for editing.\n\t\t\t * Loads CKEditor script if not already loaded.\n\t\t\t *\n\t\t\t * @param {Event} editEvent - the event triggered when the edit button is clicked.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tclick: function (editEvent) {\n\t\t\t\tif (CKEDITOR) {\n\t\t\t\t\tthis._show();\n\t\t\t\t} else {\n\t\t\t\t\tSKYVE.Util.loadJS(\"ckeditor/ckeditor.js\", function () {\n\t\t\t\t\t\tme._editButton._show();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Displays the CKEditor inside a newly created holder canvas.\n\t\t\t * Configures CKEditor and initializes mention markers if defined in config.\n\t\t\t *\n\t\t\t * @returns {isc.Canvas} - the holder canvas containing the CKEditor instance.\n\t\t\t */\n\t\t\t_show: () => {\n\t\t\t\tconst owningView = this.form._view;\n\t\t\t\tconst formValues = owningView.gather(false);\n\n\t\t\t\tconst holder = isc.Canvas.create({\n\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\theight: \"100%\",\n\t\t\t\t\tmargin: 5,\n\t\t\t\t});\n\t\t\t\tholder.setContents(\n\t\t\t\t\t'<div style=\"width:100%;height:100%\" id=\"_CKEditor\"></div>',\n\t\t\t\t);\n\t\t\t\tholder.draw = function () {\n\t\t\t\t\tthis.Super(\"draw\");\n\n\t\t\t\t\t// Set CKEditor configuration\n\t\t\t\t\tCKEDITOR.config.filebrowserImageBrowseUrl =\n\t\t\t\t\t\t\"pages/htmlEdit/browseImages.jsp?_doc=\" +\n\t\t\t\t\t\towningView._mod +\n\t\t\t\t\t\t\".\" +\n\t\t\t\t\t\towningView._doc +\n\t\t\t\t\t\t\"&_id=\" +\n\t\t\t\t\t\tformValues[\"bizId\"];\n\t\t\t\t\tCKEDITOR.config.filebrowserBrowseUrl =\n\t\t\t\t\t\t\"pages/htmlEdit/browseDocuments.jsp?_doc=\" +\n\t\t\t\t\t\towningView._mod +\n\t\t\t\t\t\t\".\" +\n\t\t\t\t\t\towningView._doc +\n\t\t\t\t\t\t\"&_id=\" +\n\t\t\t\t\t\tformValues[\"bizId\"];\n\t\t\t\t\tCKEDITOR.config.resize_enabled = false;\n\t\t\t\t\tCKEDITOR.config.skin = \"moono-lisa\";\n\t\t\t\t\tCKEDITOR.config.autoUpdateElement = false;\n\t\t\t\t\tCKEDITOR.config.baseFloatZIndex = 9000000;\n\t\t\t\t\tCKEDITOR.config.toolbar = [\n\t\t\t\t\t\t[\"Source\", \"-\", \"NewPage\", \"Preview\"],\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"Cut\",\n\t\t\t\t\t\t\t\"Copy\",\n\t\t\t\t\t\t\t\"Paste\",\n\t\t\t\t\t\t\t\"PasteText\",\n\t\t\t\t\t\t\t\"PasteFromWord\",\n\t\t\t\t\t\t\t\"-\",\n\t\t\t\t\t\t\t\"Print\",\n\t\t\t\t\t\t\t\"SpellChecker\",\n\t\t\t\t\t\t\t\"Scayt\",\n\t\t\t\t\t\t],\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"Undo\",\n\t\t\t\t\t\t\t\"Redo\",\n\t\t\t\t\t\t\t\"-\",\n\t\t\t\t\t\t\t\"Find\",\n\t\t\t\t\t\t\t\"Replace\",\n\t\t\t\t\t\t\t\"-\",\n\t\t\t\t\t\t\t\"SelectAll\",\n\t\t\t\t\t\t\t\"RemoveFormat\",\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"/\",\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"Bold\",\n\t\t\t\t\t\t\t\"Italic\",\n\t\t\t\t\t\t\t\"Underline\",\n\t\t\t\t\t\t\t\"Strike\",\n\t\t\t\t\t\t\t\"-\",\n\t\t\t\t\t\t\t\"Subscript\",\n\t\t\t\t\t\t\t\"Superscript\",\n\t\t\t\t\t\t],\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"NumberedList\",\n\t\t\t\t\t\t\t\"BulletedList\",\n\t\t\t\t\t\t\t\"-\",\n\t\t\t\t\t\t\t\"Outdent\",\n\t\t\t\t\t\t\t\"Indent\",\n\t\t\t\t\t\t\t\"Blockquote\",\n\t\t\t\t\t\t\t\"CreateDiv\",\n\t\t\t\t\t\t],\n\t\t\t\t\t\t[\"JustifyLeft\", \"JustifyCenter\", \"JustifyRight\", \"JustifyBlock\"],\n\t\t\t\t\t\t[\"Link\", \"Unlink\", \"Anchor\"],\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"Image\",\n\t\t\t\t\t\t\t\"Flash\",\n\t\t\t\t\t\t\t\"Table\",\n\t\t\t\t\t\t\t\"HorizontalRule\",\n\t\t\t\t\t\t\t\"Smiley\",\n\t\t\t\t\t\t\t\"SpecialChar\",\n\t\t\t\t\t\t\t\"PageBreak\",\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"/\",\n\t\t\t\t\t\t[\"Format\", \"Font\", \"FontSize\"],\n\t\t\t\t\t\t[\"TextColor\", \"BGColor\"],\n\t\t\t\t\t\t[\"Maximize\", \"ShowBlocks\"],\n\t\t\t\t\t];\n\n\t\t\t\t\t// Configure mention markers if provided in config\n\t\t\t\t\tif (config.mentionMarkers) {\n\t\t\t\t\t\tconst feed = function (options, callback) {\n\t\t\t\t\t\t\tconst values = me.form._view.gather(false);\n\t\t\t\t\t\t\tconst requestProperties = {\n\t\t\t\t\t\t\t\tparams: { _attr: me.name, _a: \"suggest\", _c: values._c },\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (me.form._view._b) {\n\t\t\t\t\t\t\t\trequestProperties.params._b = me.form._view._b;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tisc.BizUtil.COMPLETE_DATA_SOURCE.fetchData(\n\t\t\t\t\t\t\t\t{ value: options.marker + options.query },\n\t\t\t\t\t\t\t\tfunction (response) {\n\t\t\t\t\t\t\t\t\tif (response && response.data) {\n\t\t\t\t\t\t\t\t\t\tfor (let i = 0, l = response.data.length; i < l; i++) {\n\t\t\t\t\t\t\t\t\t\t\tconst data = response.data[i];\n\t\t\t\t\t\t\t\t\t\t\tdata.id = i;\n\t\t\t\t\t\t\t\t\t\t\tdata.name = data.value.substring(1);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcallback(response.data);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trequestProperties,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst markers = config.mentionMarkers.split(\",\");\n\t\t\t\t\t\tconst mentions = [];\n\t\t\t\t\t\tfor (let i = 0, l = markers.length; i < l; i++) {\n\t\t\t\t\t\t\tconst marker = markers[i];\n\t\t\t\t\t\t\tif (marker.length > 1) {\n\t\t\t\t\t\t\t\tconst first = marker.substring(0, 1);\n\t\t\t\t\t\t\t\tconst second = marker.substring(1, 2);\n\t\t\t\t\t\t\t\tmentions.add({\n\t\t\t\t\t\t\t\t\tfeed: feed,\n\t\t\t\t\t\t\t\t\tmarker: first,\n\t\t\t\t\t\t\t\t\tminChars: 0,\n\t\t\t\t\t\t\t\t\tpattern: new RegExp(\n\t\t\t\t\t\t\t\t\t\t\"\\\\\" + first + \"[^\\\\\" + first + \"\\\\\" + second + \"]*$\",\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcache: false,\n\t\t\t\t\t\t\t\t\tthrottle: 500,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmentions.add({\n\t\t\t\t\t\t\t\t\tfeed: feed,\n\t\t\t\t\t\t\t\t\tmarker: marker,\n\t\t\t\t\t\t\t\t\tminChars: 0,\n\t\t\t\t\t\t\t\t\tcache: false,\n\t\t\t\t\t\t\t\t\tthrottle: 500,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tCKEDITOR.config.mentions = mentions;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set styles for bold and italic to align with Jasper report styles\n\t\t\t\t\tCKEDITOR.config.coreStyles_bold = {\n\t\t\t\t\t\telement: \"b\",\n\t\t\t\t\t\toverrides: \"strong\",\n\t\t\t\t\t};\n\t\t\t\t\tCKEDITOR.config.coreStyles_italic = { element: \"i\", overrides: \"em\" };\n\n\t\t\t\t\tme._editor = CKEDITOR.replace(\"_CKEditor\", {\n\t\t\t\t\t\tcustomConfig: SKYVE.Util.ckEditorConfigFileUrl,\n\t\t\t\t\t});\n\t\t\t\t\tme._editor.setData(me.getValue());\n\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t// Open the CKEditor popup window\n\t\t\t\tisc.WindowStack.popup(\n\t\t\t\t\tnull,\n\t\t\t\t\t\"Edit HTML\",\n\t\t\t\t\ttrue,\n\t\t\t\t\t[\n\t\t\t\t\t\tholder,\n\t\t\t\t\t\tisc.HLayout.create({\n\t\t\t\t\t\t\tmembersMargin: 5,\n\t\t\t\t\t\t\tmargin: 5,\n\t\t\t\t\t\t\talign: \"right\",\n\t\t\t\t\t\t\tmembers: [\n\t\t\t\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\t\t\t\twidth: 60,\n\t\t\t\t\t\t\t\t\ttitle: \"Apply\",\n\t\t\t\t\t\t\t\t\tclick: (applyEvent) => {\n\t\t\t\t\t\t\t\t\t\tthis.setValue(this._editor.getData());\n\t\t\t\t\t\t\t\t\t\tisc.WindowStack.popoff(false);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\t\t\t\twidth: 60,\n\t\t\t\t\t\t\t\t\ttitle: \"Cancel\",\n\t\t\t\t\t\t\t\t\tclick: function (applyEvent) {\n\t\t\t\t\t\t\t\t\t\tisc.WindowStack.popoff(false);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t\t420,\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\n\t\t// Create the canvas layout containing the HTML pane and edit button\n\t\tthis.canvas = isc.HLayout.create({\n\t\t\tdefaultLayoutAlign: \"center\",\n\t\t\tmembers: [\n\t\t\t\tthis._pane,\n\t\t\t\tisc.LayoutSpacer.create({ width: 3 }),\n\t\t\t\tthis._editButton,\n\t\t\t],\n\t\t});\n\n\t\t// Call the superclass's init method\n\t\tthis.Super(\"init\", arguments);\n\t},\n\n\t/**\n\t * Sets the value of the HTML content and updates the displayed HTML in the pane.\n\t *\n\t * @param {string} newValue - the new value to set for the HTML content.\n\t * @returns {string} - the new value after setting it.\n\t */\n\tsetValue: function (newValue) {\n\t\tif (this.canvas != null && !this.userSetValue) {\n\t\t\tif (newValue) {\n\t\t\t\tthis._pane.setContents(newValue);\n\t\t\t} else {\n\t\t\t\tthis._pane.setContents(\" \"); // Avoid using an empty string\n\t\t\t}\n\t\t}\n\t\treturn this.Super(\"setValue\", [newValue]);\n\t},\n});\n\nisc.SimpleType.create({\n\tinheritsFrom: \"canvas\",\n\tname: \"bizHTML\",\n\teditorType: \"BizHTMLItem\",\n});\n\n/**\n * Implements the GeometryItem widget.\n * Extends CanvasItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"GeometryItem\", isc.CanvasItem);\n\nisc.GeometryItem.addClassProperties({\n\tvalidOperators: [\n\t\t\"geoWithin\",\n\t\t\"geoContains\",\n\t\t\"geoOverlaps\",\n\t\t\"geoDisjoint\",\n\t\t\"geoIntersects\",\n\t\t\"geoTouches\",\n\t\t\"geoCrosses\",\n\t\t\"geoEquals\",\n\t\t\"isNull\",\n\t\t\"notNull\",\n\t],\n});\n\nisc.GeometryItem.addClassMethods({\n\t/**\n\t * Formats the geometry value to a readable string.\n\t *\n\t * @param {string} value - the geometry value to format.\n\t * @returns {string} the formatted geometry type (e.g., 'Point', 'Line', 'Polygon') or an empty string if the value does not match any known geometry types.\n\t */\n\tformat: function (value) {\n\t\tif (value) {\n\t\t\t// Check for different geometry types and return corresponding labels\n\t\t\tif (value.startsWith(\"POINT\")) {\n\t\t\t\treturn \"Point\";\n\t\t\t} else if (value.startsWith(\"LINESTRING\")) {\n\t\t\t\treturn \"Line\";\n\t\t\t} else if (value.startsWith(\"POLYGON\")) {\n\t\t\t\treturn \"Polygon\";\n\t\t\t}\n\t\t}\n\n\t\t// Return an empty string if no match is found\n\t\treturn \"\";\n\t},\n});\n\nisc.GeometryItem.addProperties({\n\tshowHint: false,\n\twidth: 100,\n\toperator: \"geoWithin\",\n\tvalidOperators: isc.GeometryItem.validOperators,\n\tshouldSaveValue: true, // This is an editable data item\n});\n\nisc.GeometryItem.addMethods({\n\t/**\n\t * Creates the canvas layout for the geometry item.\n\t *\n\t * This method builds a canvas containing a DynamicForm with a text item, which displays a value\n\t * and allows interaction with a map picker to set or view geometry.\n\t *\n\t * @returns {isc.HLayout} the created layout containing the DynamicForm and map picker functionality.\n\t */\n\tcreateCanvas: function () {\n\t\t// Icons configuration for interaction with the map\n\t\tconst icons = [\n\t\t\t{\n\t\t\t\tsrc: \"icons/map.png\",\n\t\t\t\tprompt: \"Click to set or see the geometry on a map\",\n\t\t\t\tclick: (form, item, icon) => {\n\t\t\t\t\tconst options = this.drawingTools\n\t\t\t\t\t\t? { field: this, drawingTools: this.drawingTools }\n\t\t\t\t\t\t: { field: this };\n\t\t\t\t\tisc.WindowStack.popup(item.getPageRect(), \"Map\", true, [\n\t\t\t\t\t\tisc.BizMapPicker.create(options),\n\t\t\t\t\t]);\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\t// Return a HLayout to avoid form nesting within filter criteria\n\t\treturn isc.HLayout.create({\n\t\t\theight: 1,\n\t\t\twidth: \"100%\",\n\t\t\tmembers: [\n\t\t\t\tisc.DynamicForm.create({\n\t\t\t\t\twriteFormTag: false, // Prevent nested forms\n\t\t\t\t\tnumCols: 1,\n\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tcellPadding: 0,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"value\",\n\t\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\t\tshowTitle: false,\n\t\t\t\t\t\t\twidth: \"*\",\n\t\t\t\t\t\t\thint: this.hint,\n\t\t\t\t\t\t\tshowHintInField: true,\n\t\t\t\t\t\t\tselectOnFocus: true,\n\t\t\t\t\t\t\tchanged: (form, item, value) => {\n\t\t\t\t\t\t\t\tthis.storeValue(value, false);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ticons: icons,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t},\n\n\t/**\n\t * Displays a value on the geometry item.\n\t *\n\t * This method sets the value of the text field in the canvas to the provided display value.\n\t *\n\t * @param {string} displayValue - the value to be displayed in the text field.\n\t * @param {string} dataValue - the raw data value.\n\t * @param {isc.DynamicForm} form - the form containing the item.\n\t * @param {isc.FormItem} item - the form item to update.\n\t */\n\tshowValue: function (displayValue, dataValue, form, item) {\n\t\titem.canvas.getMember(0).setValue(\"value\", displayValue);\n\t},\n\n\t/**\n\t * Sets the hint for the geometry item.\n\t *\n\t * This method updates the hint text displayed in the input field.\n\t *\n\t * @param {string} hint - the hint text to set for the item.\n\t */\n\tsetHint: function (hint) {\n\t\tthis.canvas.getMember(0).setHint(hint);\n\t},\n\n\t/**\n\t * Sets the value from the BizMapPicker.\n\t *\n\t * This method is invoked from the BizMapPicker to store the selected value.\n\t * It also triggers the change events.\n\t *\n\t * @param {string} newValue - the new value to store in the geometry item.\n\t */\n\tsetValueFromPicker: function (newValue) {\n\t\t// Store the new value and trigger change events\n\t\tthis.storeValue(newValue, true);\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"geometry\",\n\tinheritsFrom: \"canvas\",\n\teditorType: \"GeometryItem\",\n\tdefaultOperator: \"gWithin\",\n\tvalidOperators: isc.GeometryItem.validOperators,\n});\n\n/**\n * Implements the GeometryMapItem widget.\n * Extends CanvasItem from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"GeometryMapItem\", isc.CanvasItem);\n\nisc.GeometryMapItem.addProperties({\n\twidth: \"*\",\n\trowSpan: \"*\",\n\tendRow: false,\n\tstartRow: false,\n\tcanFocus: false,\n\tshouldSaveValue: true, // This is an editable data item\n});\n\nisc.GeometryMapItem.addMethods({\n\t/**\n\t * Creates the canvas layout for the geometry map item.\n\t *\n\t * This method returns a centered HLayout for the map item canvas.\n\t *\n\t * @returns {isc.HLayout} The created HLayout for the geometry map item.\n\t */\n\tcreateCanvas: function () {\n\t\treturn isc.HLayout.create({ defaultLayoutAlign: \"center\" });\n\t},\n\n\t/**\n\t * Displays a value on the geometry map item.\n\t *\n\t * This method sets up a map picker widget inside the canvas if it has not been set from the picker already.\n\t * It also configures options based on the width, height, and available drawing tools.\n\t *\n\t * @param {string} displayValue - the display value for the geometry map item (currently not used in this method).\n\t * @param {string} dataValue - the raw data value (currently not used in this method).\n\t */\n\tshowValue: function (displayValue, dataValue) {\n\t\t// If value has not been set from the picker already, initialize the map picker\n\t\tif (!this._valueSetFromPicker) {\n\t\t\tconst options = {\n\t\t\t\tfield: this,\n\t\t\t\twidth: this.width || \"100%\", // Use provided width or default to '100%'\n\t\t\t\theight: this.height || \"100%\", // Use provided height or default to '100%'\n\t\t\t};\n\n\t\t\t// Add drawing tools if available\n\t\t\tif (this.drawingTools) {\n\t\t\t\toptions.drawingTools = this.drawingTools;\n\t\t\t}\n\n\t\t\t// Set the map picker as a member of the canvas\n\t\t\tthis.canvas.setMembers([isc.BizMapPicker.create(options)]);\n\t\t}\n\t},\n\n\t/**\n\t * Disables or enables the geometry map item.\n\t *\n\t * This method sets the disabled state of the map picker inside the canvas.\n\t *\n\t * @param {boolean} disabled - whether to disable the item (true) or enable it (false).\n\t */\n\tsetDisabled: function (disabled) {\n\t\tthis.canvas.getMember(0).setDisabled(disabled);\n\t},\n\n\t/**\n\t * Sets the value from the BizMapPicker.\n\t *\n\t * This method is called from the BizMapPicker to store the selected value, trigger the `changed` event,\n\t * and ensure that the value is only set once from the picker.\n\t *\n\t * @param {string} newValue - the new value selected from the BizMapPicker.\n\t */\n\tsetValueFromPicker: function (newValue) {\n\t\tthis._valueSetFromPicker = true;\n\t\tthis.setValue(newValue); // Store the selected value\n\t\tdelete this._valueSetFromPicker;\n\n\t\t// Trigger the `changed` event if defined\n\t\tif (this.changed) {\n\t\t\tthis.changed(this.form, this, newValue);\n\t\t}\n\t},\n});\n\nisc.SimpleType.create({\n\tname: \"geometryMap\",\n\tinheritsFrom: \"canvas\",\n\teditorType: \"GeometryMapItem\",\n\tvalidOperators: isc.GeometryItem.validOperators,\n});\n","/**\n * Implements the WindowStack UI component.\n */\nisc.ClassFactory.defineClass(\"WindowStack\");\n\nisc.WindowStack.addClassProperties({\n\t_margin: 0, // The amount to size the window in by\n\t_stack: [], // Stack of windows showing\n\t_unused: [], // Unused pool of windows that can be used\n\n\t/**\n\t * Displays a popup window.\n\t * @param {Array} fromRect - the rectangle [left, top, width, height] from which the window animates.\n\t * @param {string} title - the window title.\n\t * @param {boolean} showCloseButton - whether to show the close button in the window title bar.\n\t * @param {Array} items - the items to show in the window.\n\t * @param {number} [height] - the height of the window. Can specify without width.\n\t * @param {number} [width] - the width of the window. Can specify null as height to only set width.\n\t * @param {boolean} [closeButtonRefreshes] - whether to refresh the opener on close button click.\n\t */\n\tpopup: function (\n\t\tfromRect,\n\t\ttitle,\n\t\tshowCloseButton,\n\t\titems,\n\t\theight,\n\t\twidth,\n\t\tcloseButtonRefreshes,\n\t) {\n\t\tisc.WindowStack._margin += 50;\n\t\tlet result = isc.WindowStack._unused.pop();\n\n\t\tconst sizeSet = width || height;\n\t\tconst windowWidth = width || isc.Page.getWidth() - isc.WindowStack._margin;\n\t\tconst windowHeight =\n\t\t\theight || isc.Page.getHeight() - isc.WindowStack._margin;\n\n\t\tif (result) {\n\t\t\tresult.setTitle(title);\n\t\t\tresult.sizeSet = sizeSet;\n\t\t\tif (items) {\n\t\t\t\tresult.addItems(items);\n\t\t\t}\n\t\t\tresult.setWidth(windowWidth);\n\t\t\tresult.setHeight(windowHeight);\n\t\t\tresult.closeClick = () => {\n\t\t\t\tisc.WindowStack.popoff(closeButtonRefreshes);\n\t\t\t};\n\t\t} else {\n\t\t\tresult = isc.Window.create({\n\t\t\t\theaderIconDefaults: {\n\t\t\t\t\tsrc: \"window/skyve_fav.png\",\n\t\t\t\t\twidth: 16,\n\t\t\t\t\theight: 16,\n\t\t\t\t},\n\t\t\t\tautoCenter: true,\n\t\t\t\tisModal: true,\n\t\t\t\tshowModalMask: true,\n\t\t\t\tshowMinimizeButton: false,\n\t\t\t\tmodalMaskOpacity: 25,\n\t\t\t\tcanDragReposition: true,\n\t\t\t\tcanDragResize: true,\n\t\t\t\tshowShadow: true,\n\t\t\t\tshadowSoftness: 10,\n\t\t\t\tshadowOffset: 0,\n\t\t\t\ttitle,\n\t\t\t\titems,\n\t\t\t\twidth: windowWidth,\n\t\t\t\theight: windowHeight,\n\t\t\t\tsizeSet,\n\t\t\t\tcloseClick: function () {\n\t\t\t\t\tisc.WindowStack.popoff(closeButtonRefreshes);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tresult.setShowCloseButton(showCloseButton);\n\t\tresult._fromRect = fromRect; // Store the fromRect for animation\n\t\tisc.WindowStack._stack.push(result);\n\t\tresult.show();\n\t},\n\n\t/**\n\t * Closes the topmost window in the stack.\n\t * @param {boolean} [rerenderOpener] - whether to call rerender() on the opener view.\n\t */\n\tpopoff: function (rerenderOpener) {\n\t\tconst opener = isc.WindowStack.getOpener();\n\t\tconst result = isc.WindowStack._stack.pop();\n\n\t\tif (result) {\n\t\t\tisc.WindowStack._animateClose(result);\n\t\t\tconst items = result.items;\n\n\t\t\tif (items) {\n\t\t\t\tif (CKEDITOR && CKEDITOR.instances._CKEditor) {\n\t\t\t\t\tCKEDITOR.instances._CKEditor.destroy();\n\t\t\t\t\titems[0].destroy();\n\t\t\t\t} else {\n\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\tif (item._vm) {\n\t\t\t\t\t\t\t// Has a values manager - must be an edit view\n\t\t\t\t\t\t\tisc.BizUtil.relinquishEditView(item);\n\t\t\t\t\t\t} else if (isc.isA.BizListGrid(item)) {\n\t\t\t\t\t\t\t// PickList\n\t\t\t\t\t\t\tisc.BizUtil.relinquishPickList(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tresult.removeItems(items);\n\t\t\t}\n\n\t\t\tisc.WindowStack._unused.push(result);\n\t\t\tisc.WindowStack._margin -= 50;\n\n\t\t\tif (opener) {\n\t\t\t\tif (opener.resume) {\n\t\t\t\t\topener.resume();\n\t\t\t\t}\n\t\t\t\tif (rerenderOpener && opener.rerender) {\n\t\t\t\t\topener.rerender();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Gets the view in the window that opened the current window.\n\t * @returns {Object} - the opener view.\n\t */\n\tgetOpener: function () {\n\t\tif (isc.WindowStack._stack.length <= 1) {\n\t\t\t// Opener is the harness current view\n\t\t\treturn isc.BizUtil.getCurrentView();\n\t\t}\n\t\treturn isc.WindowStack._stack[isc.WindowStack._stack.length - 2].items[0];\n\t},\n\n\t/**\n\t * Resizes all windows in the stack to fit the current page dimensions.\n\t */\n\tresize: function () {\n\t\tlet windowWidth = isc.Page.getWidth() - 50;\n\t\tlet windowHeight = isc.Page.getHeight() - 50;\n\n\t\tisc.WindowStack._stack.forEach((window) => {\n\t\t\tif (!window.sizeSet) {\n\t\t\t\twindow.setWidth(windowWidth);\n\t\t\t\twindow.setHeight(windowHeight);\n\t\t\t\twindowWidth -= 50;\n\t\t\t\twindowHeight -= 50;\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Wireframe canvas used for animations.\n\t * @type {Object}\n\t */\n\t_wireframe: isc.Canvas.create({\n\t\tborder: \"3px ridge #E1E1E1\",\n\t\tbackgroundColor: \"whitesmoke\",\n\t\topacity: 75,\n\t\tautoDraw: false,\n\t}),\n\n\t_animateClosedDuration: 400, // Duration for the close animation\n\n\t/** Animates the closing of a window.\n\t * @param {Object} window - the window to animate.\n\t */\n\t_animateClose: function (window) {\n\t\tif (window._fromRect) {\n\t\t\tconst toLeft = window.getLeft();\n\t\t\tconst toTop = window.getTop();\n\t\t\tconst toWidth = window.getVisibleWidth();\n\t\t\tconst toHeight = window.getVisibleHeight();\n\n\t\t\t// Initialize the wireframe to the current window rect\n\t\t\tisc.WindowStack._wireframe.setRect([toLeft, toTop, toWidth, toHeight]);\n\t\t\tisc.WindowStack._wireframe.show();\n\t\t\tisc.WindowStack._wireframe.bringToFront();\n\t\t}\n\n\t\twindow.hide();\n\n\t\tif (window._fromRect) {\n\t\t\t// Animate the wireframe to the specified rect\n\t\t\tisc.WindowStack._wireframe.animateRect(\n\t\t\t\twindow._fromRect[0],\n\t\t\t\twindow._fromRect[1],\n\t\t\t\twindow._fromRect[2],\n\t\t\t\twindow._fromRect[3],\n\t\t\t\t\"isc.WindowStack._wireframe.hide();\",\n\t\t\t\tisc.WindowStack._animateClosedDuration,\n\t\t\t);\n\t\t}\n\t},\n});\n","/**\n * Implements ReportDialog in the UI.\n */\nisc.ClassFactory.defineClass(\"ReportDialog\");\n\nisc.ReportDialog.addClassProperties({\n\t/**\n\t * Predefined page formats with dimensions in points.\n\t * @constant {Object.<string, {width: number, height: number}>}\n\t */\n\t_pageFormats: {\n\t\tLETTER: { width: 612, height: 792 },\n\t\tNOTE: { width: 540, height: 720 },\n\t\tLEGAL: { width: 612, height: 1008 },\n\t\tA0: { width: 2380, height: 3368 },\n\t\tA1: { width: 1684, height: 2380 },\n\t\tA2: { width: 1190, height: 1684 },\n\t\tA3: { width: 842, height: 1190 },\n\t\tA4: { width: 595, height: 842 },\n\t\tA5: { width: 421, height: 595 },\n\t\tA6: { width: 297, height: 421 },\n\t\tA7: { width: 210, height: 297 },\n\t\tA8: { width: 148, height: 210 },\n\t\tA9: { width: 105, height: 148 },\n\t\tA10: { width: 74, height: 105 },\n\t\tB0: { width: 2836, height: 4008 },\n\t\tB1: { width: 2004, height: 2836 },\n\t\tB2: { width: 1418, height: 2004 },\n\t\tB3: { width: 1002, height: 1418 },\n\t\tB4: { width: 709, height: 1002 },\n\t\tB5: { width: 501, height: 709 },\n\t\tARCH_E: { width: 595, height: 842 },\n\t\tARCH_D: { width: 595, height: 842 },\n\t\tARCH_C: { width: 595, height: 842 },\n\t\tARCH_B: { width: 595, height: 842 },\n\t\tARCH_A: { width: 595, height: 842 },\n\t\tFLSA: { width: 612, height: 936 },\n\t\tFLSE: { width: 612, height: 936 },\n\t\tHALFLETTER: { width: 396, height: 612 },\n\t\t\"11x17\": { width: 792, height: 1224 },\n\t\tLEDGER: { width: 1224, height: 792 },\n\t},\n\n\t/**\n\t * Defines the available columns for selection.\n\t * @constant {Array<Object>}\n\t */\n\t_available: [\n\t\t{ name: \"title\", title: \"Available Columns\", required: true },\n\t\t{\n\t\t\tname: \"line\",\n\t\t\ttitle: \"Line\",\n\t\t\ttype: \"integer\",\n\t\t\teditorType: \"spinner\",\n\t\t\teditorProperties: {\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 1,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9 }],\n\t\t\t},\n\t\t\twidth: 50,\n\t\t},\n\t\t{\n\t\t\tname: \"width\",\n\t\t\ttitle: \"Width\",\n\t\t\ttype: \"integer\",\n\t\t\teditorType: \"spinner\",\n\t\t\teditorProperties: {\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 10,\n\t\t\t\tdefaultValue: 1,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t\twidth: 50,\n\t\t},\n\t],\n\n\t/**\n\t * Defines the selected columns for export.\n\t * @constant {Array<Object>}\n\t */\n\t_selected: [\n\t\t{ name: \"title\", title: \"Exported Columns\", required: true },\n\t\t{\n\t\t\tname: \"line\",\n\t\t\ttitle: \"Line\",\n\t\t\ttype: \"integer\",\n\t\t\teditorType: \"spinner\",\n\t\t\teditorProperties: {\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 1,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9 }],\n\t\t\t},\n\t\t\twidth: 50,\n\t\t},\n\t\t{\n\t\t\tname: \"width\",\n\t\t\ttitle: \"Width\",\n\t\t\ttype: \"integer\",\n\t\t\teditorType: \"spinner\",\n\t\t\teditorProperties: {\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 10,\n\t\t\t\tdefaultValue: 1,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t\twidth: 50,\n\t\t},\n\t],\n\n\t/**\n\t * Manages form values for the report dialog.\n\t * @constant {Object}\n\t */\n\t_valuesManager: isc.ValuesManager.create(),\n});\n\nisc.ReportDialog.addClassProperties({\n\t_columnList: isc.ListGrid.create({\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\tcanDragRecordsOut: true,\n\t\tcanAcceptDroppedRecords: true,\n\t\tdragDataAction: \"move\",\n\t\talternateRecordStyles: true,\n\t\tautoFetchData: false,\n\t\tleaveScrollbarGap: false,\n\t\tshowHeaderContextMenu: false,\n\t\tfields: isc.ReportDialog._available,\n\t}),\n\n\t_selectedColumnList: isc.ListGrid.create({\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\tcanDragRecordsOut: true,\n\t\tcanAcceptDroppedRecords: true,\n\t\tdragDataAction: \"move\",\n\t\tcanReorderRecords: true,\n\t\tcanRemoveRecords: false,\n\t\tcanEdit: true,\n\t\teditByCell: true,\n\t\teditEvent: \"click\",\n\t\tmodalEditing: true,\n\t\talternateRecordStyles: true,\n\t\tautoFetchData: false,\n\t\tpreventDuplicates: true,\n\t\tleaveScrollbarGap: false,\n\t\tshowHeaderContextMenu: false,\n\t\tfields: isc.ReportDialog._selected,\n\t}),\n});\n\nisc.ReportDialog.addClassProperties({\n\t/**\n\t * Generates valueMap and valueIcons for report formats.\n\t *\n\t * @private\n\t * @param {string[]} allowedFormats - list of allowed report formats.\n\t * @param {string[]} [defaultFormats=[]] - list of preferred default formats.\n\t * @returns {{ valueMap: Object, valueIcons: Object, defaultValue: string|null }} - An object containing valueMap, valueIcons, and the default format.\n\t */\n\t_generateReportFormatMappings: function (\n\t\tallowedFormats,\n\t\tdefaultFormats = [],\n\t) {\n\t\tconst formatMappings = {\n\t\t\tpdf: { label: \"PDF (Adobe Portable Document Format)\", icon: \"pdf\" },\n\t\t\tdocx: { label: \"DOCX (Word Document - Office 2007)\", icon: \"rtf\" },\n\t\t\txlsx: { label: \"XLSX (Excel Document - Office 2007)\", icon: \"xls\" },\n\t\t\tpptx: { label: \"PPTX (PowerPoint Document - Office 2007)\", icon: \"pptx\" },\n\t\t\txls: { label: \"XLS (Excel - 98-2003)\", icon: \"xls\" },\n\t\t\trtf: { label: \"RTF (Rich Text Format)\", icon: \"rtf\" },\n\t\t\tods: { label: \"ODS (Open Document Spreadsheet Format)\", icon: \"oo\" },\n\t\t\todt: { label: \"ODT (Open Document Text Format)\", icon: \"oo\" },\n\t\t\thtml: { label: \"HTML (HyperText Markup Language)\", icon: \"html\" },\n\t\t\tcsv: { label: \"CSV (Comma Separated Values)\", icon: \"csv\" },\n\t\t\txml: { label: \"XML (JRXML Format)\", icon: \"xml\" },\n\t\t\ttxt: { label: \"TXT (Text Format)\", icon: \"txt\" },\n\t\t};\n\n\t\tconst valueMap = {};\n\t\tconst valueIcons = {};\n\t\tlet defaultValue = defaultFormats.length ? null : allowedFormats[0];\n\n\t\tallowedFormats.forEach((format) => {\n\t\t\tif (formatMappings[format]) {\n\t\t\t\tvalueMap[format] = formatMappings[format].label;\n\t\t\t\tvalueIcons[format] = formatMappings[format].icon;\n\t\t\t} else {\n\t\t\t\tvalueMap[format] = format;\n\t\t\t\tvalueIcons[format] = format;\n\t\t\t}\n\n\t\t\t// Set default value if it's one of the preferred defaults\n\t\t\tif (!defaultValue && defaultFormats.includes(format)) {\n\t\t\t\tdefaultValue = format;\n\t\t\t}\n\t\t});\n\n\t\treturn { valueMap, valueIcons, defaultValue };\n\t},\n\t/**\n\t * Creates a picklist for selecting Jasper report formats.\n\t *\n\t * @private\n\t * @param {number} colSpan - the column span for the picklist.\n\t * @param {Function} onChangeFunction - callback function triggered on change.\n\t * @returns {Object} - configuration object for the picklist.\n\t */\n\t_createJasperReportFormatPickList: function (colSpan, onChangeFunction) {\n\t\tconst { valueMap, valueIcons, defaultValue } =\n\t\t\tthis._generateReportFormatMappings(SKYVE.Util.allowedReportFormats);\n\n\t\treturn {\n\t\t\tname: \"reportFormat\",\n\t\t\tshowTitle: false,\n\t\t\ttype: \"select\",\n\t\t\twidth: 300,\n\t\t\trequired: true,\n\t\t\tvalueMap,\n\t\t\timageURLPrefix: \"reporting/\",\n\t\t\timageURLSuffix: \".png\",\n\t\t\tvalueIcons,\n\t\t\tdefaultValue,\n\t\t\tcolSpan,\n\t\t\tchange: onChangeFunction,\n\t\t};\n\t},\n});\n\nisc.ReportDialog.addClassProperties({\n\t/**\n\t * Layout for the column selector, including buttons to move columns between lists.\n\t * @type {HLayout}\n\t */\n\t_columnSelectorLayout: isc.HLayout.create({\n\t\tmembersMargin: 10,\n\t\theight: \"100%\", // Height is needed to center the arrow\n\t\tmembers: [\n\t\t\tisc.ReportDialog._columnList,\n\t\t\tisc.VLayout.create({\n\t\t\t\tlayoutAlign: \"center\",\n\t\t\t\tmembersMargin: 10,\n\t\t\t\theight: 100,\n\t\t\t\tmembers: [\n\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\ticon: \"reporting/arrow_right.png\",\n\t\t\t\t\t\ticonWidth: 24,\n\t\t\t\t\t\ticonHeight: 24,\n\t\t\t\t\t\ticonAlign: \"center\",\n\t\t\t\t\t\twidth: 36,\n\t\t\t\t\t\theight: 36,\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Handles the click event to move selected columns into the report.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\treturn isc.ReportDialog._selectedColumnList.transferSelectedData(\n\t\t\t\t\t\t\t\tisc.ReportDialog._columnList,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcanHover: true,\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Returns the hover tooltip text.\n\t\t\t\t\t\t * @returns {string} tooltip text.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tgetHoverHTML: function () {\n\t\t\t\t\t\t\treturn \"Move the selected columns into the report\";\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\ticon: \"reporting/arrow_left.png\",\n\t\t\t\t\t\ticonWidth: 24,\n\t\t\t\t\t\ticonHeight: 24,\n\t\t\t\t\t\ticonAlign: \"center\",\n\t\t\t\t\t\twidth: 36,\n\t\t\t\t\t\theight: 36,\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Handles the click event to move selected columns out of the report.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\tisc.ReportDialog._columnList.transferSelectedData(\n\t\t\t\t\t\t\t\tisc.ReportDialog._selectedColumnList,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcanHover: true,\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Returns the hover tooltip text.\n\t\t\t\t\t\t * @returns {string} tooltip text.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tgetHoverHTML: function () {\n\t\t\t\t\t\t\treturn \"Move the selected columns out of the report\";\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t}),\n\t\t\tisc.ReportDialog._selectedColumnList,\n\t\t],\n\t}),\n\n\t/**\n\t * Form for configuring the report format.\n\t * @type {DynamicForm|null}\n\t */\n\t_reportFormatForm: null,\n\n\t/**\n\t * Form for configuring the page format, including size and orientation.\n\t * @type {DynamicForm}\n\t */\n\t_pageFormatForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ReportDialog._valuesManager,\n\t\tnumCols: 10,\n\t\tpadding: 15,\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"format\",\n\t\t\t\ttitle: \"Format\",\n\t\t\t\ttype: \"select\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tvalueMap: [\n\t\t\t\t\t\"LETTER\",\n\t\t\t\t\t\"NOTE\",\n\t\t\t\t\t\"LEGAL\",\n\t\t\t\t\t\"A0\",\n\t\t\t\t\t\"A1\",\n\t\t\t\t\t\"A2\",\n\t\t\t\t\t\"A3\",\n\t\t\t\t\t\"A4\",\n\t\t\t\t\t\"A5\",\n\t\t\t\t\t\"A6\",\n\t\t\t\t\t\"A7\",\n\t\t\t\t\t\"A8\",\n\t\t\t\t\t\"A9\",\n\t\t\t\t\t\"A10\",\n\t\t\t\t\t\"B0\",\n\t\t\t\t\t\"B1\",\n\t\t\t\t\t\"B2\",\n\t\t\t\t\t\"B3\",\n\t\t\t\t\t\"B4\",\n\t\t\t\t\t\"B5\",\n\t\t\t\t\t\"ARCH_E\",\n\t\t\t\t\t\"ARCH_D\",\n\t\t\t\t\t\"ARCH_C\",\n\t\t\t\t\t\"ARCH_B\",\n\t\t\t\t\t\"ARCH_A\",\n\t\t\t\t\t\"FLSA\",\n\t\t\t\t\t\"FLSE\",\n\t\t\t\t\t\"HALFLETTER\",\n\t\t\t\t\t\"11x17\",\n\t\t\t\t\t\"LEDGER\",\n\t\t\t\t],\n\t\t\t\tdefaultValue: \"A4\",\n\t\t\t\t/**\n\t\t\t\t * Handles the change event for the format dropdown.\n\t\t\t\t * Updates the width and height fields based on the selected format and orientation.\n\t\t\t\t * @param {DynamicForm} form - the form instance.\n\t\t\t\t * @param {FormItem} item - the form item that triggered the change.\n\t\t\t\t * @param {string} value - the new value of the format dropdown.\n\t\t\t\t * @param {string} oldValue - the previous value of the format dropdown.\n\t\t\t\t */\n\t\t\t\tchange: function (form, item, value, oldValue) {\n\t\t\t\t\tconst orientation = form.getItem(\"orientation\").getValue();\n\t\t\t\t\tconst { width, height } = isc.ReportDialog._pageFormats[value];\n\t\t\t\t\tform\n\t\t\t\t\t\t.getItem(\"width\")\n\t\t\t\t\t\t.setValue(orientation === \"portrait\" ? width : height);\n\t\t\t\t\tform\n\t\t\t\t\t\t.getItem(\"height\")\n\t\t\t\t\t\t.setValue(orientation === \"portrait\" ? height : width);\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"orientation\",\n\t\t\t\ttitle: \"Orientation\",\n\t\t\t\ttype: \"radioGroup\",\n\t\t\t\trequired: true,\n\t\t\t\tvalueMap: { portrait: \"Portrait\", landscape: \"Landscape\" },\n\t\t\t\tdefaultValue: \"portrait\",\n\t\t\t\t/**\n\t\t\t\t * Handles the change event for the orientation radio group.\n\t\t\t\t * Swaps the width and height values when the orientation changes.\n\t\t\t\t * @param {DynamicForm} form - the form instance.\n\t\t\t\t * \t\t@param {FormItem} item - the form item that triggered the change.\n\t\t\t\t * @param {string} value - the new value of the format dropdown.\n\t\t\t\t * @param {string} oldValue - the previous value of the format dropdown.\n\t\t\t\t */\n\t\t\t\tchange: function (form, item, value, oldValue) {\n\t\t\t\t\tconst widthItem = form.getItem(\"width\");\n\t\t\t\t\tconst heightItem = form.getItem(\"height\");\n\t\t\t\t\tconst width = widthItem.getValue();\n\t\t\t\t\twidthItem.setValue(heightItem.getValue());\n\t\t\t\t\theightItem.setValue(width);\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"width\",\n\t\t\t\ttitle: \"Width\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: isc.ReportDialog._pageFormats[\"A4\"].width,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"height\",\n\t\t\t\ttitle: \"Height\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: isc.ReportDialog._pageFormats[\"A4\"].height,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t],\n\t}),\n\n\t/**\n\t * Form for configuring the page margins.\n\t * @type {DynamicForm}\n\t */\n\t_marginsForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ReportDialog._valuesManager,\n\t\tnumCols: 8,\n\t\tpadding: 15,\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"top\",\n\t\t\t\ttitle: \"Top\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 20,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"bottom\",\n\t\t\t\ttitle: \"Bottom\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 20,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"left\",\n\t\t\t\ttitle: \"Left\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 20,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"right\",\n\t\t\t\ttitle: \"Right\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\trequired: true,\n\t\t\t\twidth: 80,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 20,\n\t\t\t\tvalidators: [{ type: \"integerRange\", min: 1, max: 9999 }],\n\t\t\t},\n\t\t],\n\t}),\n\n\t/**\n\t * Form for submitting the report configuration.\n\t * @type {DynamicForm}\n\t */\n\t_submitForm: isc.DynamicForm.create({\n\t\tautoDraw: true,\n\t\tcanSubmit: true,\n\t\tmethod: \"POST\",\n\t\titems: [\n\t\t\t{ name: \"values\", type: \"hidden\" },\n\t\t\t{ name: \"_c\", type: \"hidden\" },\n\t\t],\n\t}),\n\n\t_layout: null, // The entire interface\n\t_criteria: null, // The extra criteria defined on the query or model\n\t_tagId: null, // The bizId of the selected tag (if any) in the listgrid\n\t_dataSourceID: null, // The data source representing the server-side query or model\n\n\t/**\n\t * Creates a report panel with a button and a form.\n\t * @param {IButton} buttonDefn - the button to include in the panel.\n\t * @param {DynamicForm} formDefn - the form to display on the right-hand side.\n\t * @returns {HLayout} the configured HLayout instance.\n\t */\n\t_createReportPanel: function (buttonDefn, formDefn) {\n\t\treturn isc.HLayout.create({\n\t\t\tbackgroundImage: \"background.png\",\n\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\tmembersMargin: 5,\n\t\t\tmargin: 5,\n\t\t\tlayoutAlign: \"center\",\n\t\t\tmembers: [\n\t\t\t\tisc.VLayout.create({\n\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\twidth: 134,\n\t\t\t\t\theight: 130,\n\t\t\t\t\tlayoutAlign: \"center\",\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tmembersMargin: 10,\n\t\t\t\t\tmembers: [\n\t\t\t\t\t\tisc.HLayout.create({\n\t\t\t\t\t\t\twidth: 134,\n\t\t\t\t\t\t\talign: \"center\",\n\t\t\t\t\t\t\tmembers: [\n\t\t\t\t\t\t\t\tisc.Img.create({\n\t\t\t\t\t\t\t\t\timageType: \"normal\",\n\t\t\t\t\t\t\t\t\tsrc: \"reporting/reporting.png\",\n\t\t\t\t\t\t\t\t\theight: 96,\n\t\t\t\t\t\t\t\t\tlayoutAlign: \"center\",\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tisc.HLayout.create({\n\t\t\t\t\t\t\twidth: 134,\n\t\t\t\t\t\t\talign: \"center\",\n\t\t\t\t\t\t\tmembers: [buttonDefn],\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t}),\n\t\t\t\tformDefn,\n\t\t\t],\n\t\t});\n\t},\n\n\t/**\n\t * Constructs the export interface.\n\t */\n\t_createExport: function () {\n\t\tif (isc.ReportDialog._exportLayout == null) {\n\t\t\t/**\n\t\t\t * Handles the change event for the report format dropdown.\n\t\t\t * Updates form fields based on the selected format.\n\t\t\t * @param {DynamicForm} form - the form instance.\n\t\t\t * @param {FormItem} item - the form item that triggered the change.\n\t\t\t * @param {string} value - the new value of the format dropdown.\n\t\t\t * @param {string} oldValue - the previous value of the format dropdown.\n\t\t\t */\n\t\t\tconst changeHandler = function (form, item, value, oldValue) {\n\t\t\t\tconst isDocumentFormat = [\"pdf\", \"docx\", \"pptx\", \"rtf\", \"odt\"].includes(\n\t\t\t\t\tvalue,\n\t\t\t\t);\n\t\t\t\tconst isHtmlFormat = value === \"html\";\n\n\t\t\t\tform.getItem(\"isPaginated\").setValue(isDocumentFormat);\n\t\t\t\tform.getItem(\"isPretty\").setValue(isDocumentFormat || isHtmlFormat);\n\t\t\t\tform.getItem(\"showSummary\").setValue(isDocumentFormat || isHtmlFormat);\n\t\t\t\tform.getItem(\"fileNameSuffix\").setValue(`.${value}`);\n\t\t\t};\n\n\t\t\tisc.ReportDialog._reportFormatForm = isc.DynamicForm.create({\n\t\t\t\tvaluesManager: isc.ReportDialog._valuesManager,\n\t\t\t\tnumCols: 7,\n\t\t\t\tcolWidths: [60, 200, 40, 30, \"*\", 60, \"*\"],\n\t\t\t\tpadding: 15,\n\t\t\t\titems: [\n\t\t\t\t\tisc.ReportDialog._createJasperReportFormatPickList(3, changeHandler),\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"isPaginated\",\n\t\t\t\t\t\ttitle: \"Paginated Report\",\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"style\",\n\t\t\t\t\t\ttitle: \"Style\",\n\t\t\t\t\t\ttype: \"radioGroup\",\n\t\t\t\t\t\tvertical: true,\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\trowSpan: 2,\n\t\t\t\t\t\tvalueMap: { tabular: \"Tabular\", columnar: \"Columnar\" },\n\t\t\t\t\t\tdefaultValue: \"tabular\",\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Handles the change event for the style radio group.\n\t\t\t\t\t\t * Shows or hides table columns based on the selected style.\n\t\t\t\t\t\t * @param {DynamicForm} form - the form instance.\n\t\t\t\t\t\t * @param {FormItem} item - the form item that triggered the change.\n\t\t\t\t\t\t * @param {string} value - the new value of the radio group.\n\t\t\t\t\t\t * @param {string} oldValue- the previous value of the radio group.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tchange: function (form, item, value, oldValue) {\n\t\t\t\t\t\t\tconst isColumnar = value === \"columnar\";\n\t\t\t\t\t\t\tisc.ReportDialog._columnList[\n\t\t\t\t\t\t\t\tisColumnar ? \"hideField\" : \"showField\"\n\t\t\t\t\t\t\t](\"line\");\n\t\t\t\t\t\t\tisc.ReportDialog._columnList[\n\t\t\t\t\t\t\t\tisColumnar ? \"hideField\" : \"showField\"\n\t\t\t\t\t\t\t](\"width\");\n\t\t\t\t\t\t\tisc.ReportDialog._selectedColumnList[\n\t\t\t\t\t\t\t\tisColumnar ? \"hideField\" : \"showField\"\n\t\t\t\t\t\t\t](\"line\");\n\t\t\t\t\t\t\tisc.ReportDialog._selectedColumnList[\n\t\t\t\t\t\t\t\tisColumnar ? \"hideField\" : \"showField\"\n\t\t\t\t\t\t\t](\"width\");\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"fileNameNoSuffix\",\n\t\t\t\t\t\ttitle: \"Filename\",\n\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\tdefaultValue: \"export\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"fileNameSuffix\",\n\t\t\t\t\t\tshowTitle: false,\n\t\t\t\t\t\ttype: \"staticText\",\n\t\t\t\t\t\tstartRow: false,\n\t\t\t\t\t\tendRow: false,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"isPretty\",\n\t\t\t\t\t\ttitle: \"Pixel Perfect\",\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t},\n\t\t\t\t\t{ type: \"spacer\" },\n\t\t\t\t\t{ type: \"spacer\" },\n\t\t\t\t\t{ type: \"spacer\" },\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"showSummary\",\n\t\t\t\t\t\ttitle: \"Show Summary\",\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\n\t\t\t// Initialize the form with the first allowed report format\n\t\t\tchangeHandler(\n\t\t\t\tisc.ReportDialog._reportFormatForm,\n\t\t\t\tnull,\n\t\t\t\tSKYVE.Util.allowedReportFormats[0],\n\t\t\t\tnull,\n\t\t\t);\n\n\t\t\tisc.ReportDialog._exportLayout = isc.VLayout.create({\n\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\theight: \"100%\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\tautoDraw: true,\n\t\t\t\tmargin: 5,\n\t\t\t\tmembersMargin: 5,\n\t\t\t\tmembers: [\n\t\t\t\t\tisc.ReportDialog._createReportPanel(\n\t\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\t\ttitle: \"Generate\",\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Handles the click event to generate the report.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\tif (isc.ReportDialog._valuesManager.validate()) {\n\t\t\t\t\t\t\t\t\tconst values = isc.ReportDialog._valuesManager.getValues();\n\t\t\t\t\t\t\t\t\tvalues.columns =\n\t\t\t\t\t\t\t\t\t\tisc.ReportDialog._selectedColumnList.getData();\n\t\t\t\t\t\t\t\t\tvalues.ds = isc.ReportDialog._dataSourceID;\n\n\t\t\t\t\t\t\t\t\tif (isc.ReportDialog._criteria) {\n\t\t\t\t\t\t\t\t\t\tvalues.criteria = isc.ReportDialog._criteria;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (isc.ReportDialog._tagId) {\n\t\t\t\t\t\t\t\t\t\tvalues.tagId = isc.ReportDialog._tagId;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Use a standard form POST, HTML targeted to a blank window\n\t\t\t\t\t\t\t\t\tconst format = isc.ReportDialog._reportFormatForm\n\t\t\t\t\t\t\t\t\t\t.getItem(\"reportFormat\")\n\t\t\t\t\t\t\t\t\t\t.getValue();\n\t\t\t\t\t\t\t\t\tconst fileNameNoSuffix = isc.ReportDialog._reportFormatForm\n\t\t\t\t\t\t\t\t\t\t.getItem(\"fileNameNoSuffix\")\n\t\t\t\t\t\t\t\t\t\t.getValue();\n\t\t\t\t\t\t\t\t\tisc.ReportDialog._submitForm.setValue(\n\t\t\t\t\t\t\t\t\t\t\"values\",\n\t\t\t\t\t\t\t\t\t\tisc.JSON.encode(values, { prettyPrint: false }),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (isc.ReportDialog._c) {\n\t\t\t\t\t\t\t\t\t\tisc.ReportDialog._submitForm.setValue(\n\t\t\t\t\t\t\t\t\t\t\t\"_c\",\n\t\t\t\t\t\t\t\t\t\t\tisc.ReportDialog._c,\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tisc.ReportDialog._submitForm.setAction(\n\t\t\t\t\t\t\t\t\t\t`export/${fileNameNoSuffix}.${format}`,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tisc.ReportDialog._submitForm.setTarget(\n\t\t\t\t\t\t\t\t\t\tformat === \"html\" ? \"_blank\" : \"_self\",\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tisc.ReportDialog._submitForm.submitForm();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tisc.VLayout.create({\n\t\t\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\t\t\tmargin: 0,\n\t\t\t\t\t\t\tmembersMargin: 5,\n\t\t\t\t\t\t\tmembers: [\n\t\t\t\t\t\t\t\tisc.VLayout.create({\n\t\t\t\t\t\t\t\t\tisGroup: true,\n\t\t\t\t\t\t\t\t\tgroupTitle: \"Report Format\",\n\t\t\t\t\t\t\t\t\tstyleName: \"bizhubRoundedBorder\",\n\t\t\t\t\t\t\t\t\tgroupBorderCSS: \"1px solid #bfbfbf\",\n\t\t\t\t\t\t\t\t\tmargin: 1,\n\t\t\t\t\t\t\t\t\tgroupLabelBackgroundColor: \"transparent\",\n\t\t\t\t\t\t\t\t\tgroupLabelStyleName: \"bizhubBorderLabel\",\n\t\t\t\t\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\t\t\t\t\tmembers: [isc.ReportDialog._reportFormatForm],\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tisc.VLayout.create({\n\t\t\t\t\t\t\t\t\tisGroup: true,\n\t\t\t\t\t\t\t\t\tgroupTitle: \"Page Format\",\n\t\t\t\t\t\t\t\t\tstyleName: \"bizhubRoundedBorder\",\n\t\t\t\t\t\t\t\t\tgroupBorderCSS: \"1px solid #bfbfbf\",\n\t\t\t\t\t\t\t\t\tmargin: 1,\n\t\t\t\t\t\t\t\t\tgroupLabelBackgroundColor: \"transparent\",\n\t\t\t\t\t\t\t\t\tgroupLabelStyleName: \"bizhubBorderLabel\",\n\t\t\t\t\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\t\t\t\t\tmembers: [isc.ReportDialog._pageFormatForm],\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tisc.VLayout.create({\n\t\t\t\t\t\t\t\t\tisGroup: true,\n\t\t\t\t\t\t\t\t\tgroupTitle: \"Margins\",\n\t\t\t\t\t\t\t\t\tstyleName: \"bizhubRoundedBorder\",\n\t\t\t\t\t\t\t\t\tgroupBorderCSS: \"1px solid #bfbfbf\",\n\t\t\t\t\t\t\t\t\tmargin: 1,\n\t\t\t\t\t\t\t\t\tgroupLabelBackgroundColor: \"transparent\",\n\t\t\t\t\t\t\t\t\tgroupLabelStyleName: \"bizhubBorderLabel\",\n\t\t\t\t\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\t\t\t\t\tmembers: [isc.ReportDialog._marginsForm],\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t\t\tisc.ReportDialog._columnSelectorLayout,\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Opens the export popup and sets up the necessary data for exporting.\n\t *\n\t * @param {string} dataSourceID - the ID of the data source (server-side query/model).\n\t * @param {string} _c - the web context identifier.\n\t * @param {Object} criteria - the criteria to apply to the server-side query or model.\n\t * @param {string} tagId - the tag ID of the selected tag from the list grid to apply server-side.\n\t * @param {Array} unselectedFields - data for the unselected fields in the field selection list grid.\n\t * @param {Array} selectedFields - data for the selected fields in the field selection list grid.\n\t */\n\tpopupExport: function (\n\t\tdataSourceID,\n\t\t_c,\n\t\tcriteria,\n\t\ttagId,\n\t\tunselectedFields,\n\t\tselectedFields,\n\t) {\n\t\tisc.ReportDialog._createExport();\n\t\tisc.ReportDialog._dataSourceID = dataSourceID;\n\t\tisc.ReportDialog._c = _c;\n\t\tisc.ReportDialog._criteria = criteria;\n\t\tisc.ReportDialog._tagId = tagId;\n\t\tisc.ReportDialog._columnList.setData(unselectedFields);\n\t\tisc.ReportDialog._selectedColumnList.setData(selectedFields);\n\t\tisc.WindowStack.popup(null, \"Reporting\", true, [\n\t\t\tisc.ReportDialog._exportLayout,\n\t\t]);\n\t},\n\n\t/**\n\t * Opens the report popup based on the view and parameters provided.\n\t *\n\t * @param {string} view - the view name.\n\t * @param {Object} params - the parameter map (name -> binding expression with {} if required).\n\t */\n\tpopupReport: function (view, params) {\n\t\tif (params && params._f) {\n\t\t\tconst { _f: format, ...paramsCopy } = params;\n\t\t\tisc.ReportDialog._redirectToReport(view, paramsCopy, format);\n\t\t} else if (params && params._e === \"Freemarker\") {\n\t\t\tif (!isc.ReportDialog._freemarkerReportLayout) {\n\t\t\t\tisc.ReportDialog._freemarkerReportLayout =\n\t\t\t\t\tisc.ReportDialog._createReportPanel(\n\t\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\t\ttitle: \"View\",\n\t\t\t\t\t\t\tID: \"_freemarkerReportViewButton\",\n\t\t\t\t\t\t\t_view: null,\n\t\t\t\t\t\t\t_params: null,\n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\tconst format = _freemarkerReportForm.getValue(\"reportFormat\");\n\t\t\t\t\t\t\t\tisc.ReportDialog._redirectToReport(\n\t\t\t\t\t\t\t\t\tthis._view,\n\t\t\t\t\t\t\t\t\tthis._params,\n\t\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tisc.DynamicForm.create({\n\t\t\t\t\t\t\tID: \"_freemarkerReportForm\",\n\t\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t\t{ type: \"rowSpacer\" },\n\t\t\t\t\t\t\t\t{ type: \"rowSpacer\" },\n\t\t\t\t\t\t\t\tisc.ReportDialog._createFreemarkerReportFormatPickList(),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\t_freemarkerReportViewButton._view = view;\n\t\t\t_freemarkerReportViewButton._params = params;\n\t\t\tisc.WindowStack.popup(\n\t\t\t\tnull,\n\t\t\t\t\"Report\",\n\t\t\t\ttrue,\n\t\t\t\t[isc.ReportDialog._freemarkerReportLayout],\n\t\t\t\t180,\n\t\t\t\t480,\n\t\t\t);\n\t\t} else {\n\t\t\tif (!isc.ReportDialog._jasperReportLayout) {\n\t\t\t\tisc.ReportDialog._jasperReportLayout =\n\t\t\t\t\tisc.ReportDialog._createReportPanel(\n\t\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\t\ttitle: \"View\",\n\t\t\t\t\t\t\tID: \"_jasperReportViewButton\",\n\t\t\t\t\t\t\t_view: null,\n\t\t\t\t\t\t\t_params: null,\n\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\tconst format = _jasperReportForm.getValue(\"reportFormat\");\n\t\t\t\t\t\t\t\tisc.ReportDialog._redirectToReport(\n\t\t\t\t\t\t\t\t\tthis._view,\n\t\t\t\t\t\t\t\t\tthis._params,\n\t\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tisc.DynamicForm.create({\n\t\t\t\t\t\t\tID: \"_jasperReportForm\",\n\t\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t\t{ type: \"rowSpacer\" },\n\t\t\t\t\t\t\t\t{ type: \"rowSpacer\" },\n\t\t\t\t\t\t\t\tisc.ReportDialog._createJasperReportFormatPickList(\n\t\t\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t\t\tfunction (form, item, value, oldValue) {\n\t\t\t\t\t\t\t\t\t\t// No operation needed\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\t_jasperReportViewButton._view = view;\n\t\t\t_jasperReportViewButton._params = params;\n\t\t\tisc.WindowStack.popup(\n\t\t\t\tnull,\n\t\t\t\t\"Report\",\n\t\t\t\ttrue,\n\t\t\t\t[isc.ReportDialog._jasperReportLayout],\n\t\t\t\t180,\n\t\t\t\t480,\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Redirects to the appropriate report URL based on the view, parameters, and format.\n\t *\n\t * @param {string} view - the view name.\n\t * @param {Object} params - the parameter map (name -> binding expression with {} if required).\n\t * @param {string} format - the format of the report (e.g., 'html', 'pdf').\n\t */\n\t_redirectToReport: function (view, params, format) {\n\t\tconst instance = view.gather(false); // Don't validate\n\t\tif (instance) {\n\t\t\tconst { _c: c, _b: b, bizId } = instance;\n\n\t\t\tlet src;\n\t\t\tif (params && params[\"_n\"]) {\n\t\t\t\tsrc = `report/${params[\"_n\"]}.${format}?_f=${format}${c ? `&_c=${c}` : \"\"}${b ? `&_b=${b}` : \"\"}${bizId ? `&_id=${bizId}` : \"\"}`;\n\t\t\t} else {\n\t\t\t\tsrc = `report/?_f=${format}${c ? `&_c=${c}` : \"\"}${b ? `&_b=${b}` : \"\"}${bizId ? `&_id=${bizId}` : \"\"}`;\n\t\t\t}\n\n\t\t\tif (params) {\n\t\t\t\tObject.keys(params).forEach((name) => {\n\t\t\t\t\tconst binding = params[name];\n\t\t\t\t\t// Encode URI and then encode '?' and '&' chars which are not encoded by encodeURI().\n\t\t\t\t\tsrc += `&${name}=${encodeURI(view.toDisplay(binding, instance)).replaceAll(\"?\", \"%3F\").replaceAll(\"&\", \"%26\")}`;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (format === \"html\") {\n\t\t\t\twindow.open(\n\t\t\t\t\tsrc,\n\t\t\t\t\t\"report\",\n\t\t\t\t\t\"location=0,status=0,scrollbars=1,resizable=1,width=800,height=600\",\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\twindow.location = src;\n\t\t\t}\n\t\t}\n\t},\n});\n","/**\n * Implements charting functionality.\n */\nisc.ClassFactory.defineClass(\"ChartDialog\");\n\nisc.ChartDialog.addClassProperties({\n\t_valuesManager: isc.ValuesManager.create(),\n});\n\nisc.ChartDialog.addClassProperties({\n\t_chartForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ChartDialog._valuesManager,\n\t\tnumCols: 6,\n\t\tcolWidths: [100, 120, 80, \"*\", 90, \"*\"],\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"type\",\n\t\t\t\ttype: \"enum\",\n\t\t\t\ttitle: \"Chart Type\",\n\t\t\t\twidth: \"*\",\n\t\t\t\tvalueMap: {\n\t\t\t\t\tline: \"Line\",\n\t\t\t\t\tlineArea: \"Line Area\",\n\t\t\t\t\tbar: \"Bar\",\n\t\t\t\t\thorizontalBar: \"Horizontal Bar\",\n\t\t\t\t\tradar: \"Radar\",\n\t\t\t\t\tpie: \"Pie\",\n\t\t\t\t\tdoughnut: \"Doughnut\",\n\t\t\t\t\tpolarArea: \"Polar Area\",\n\t\t\t\t},\n\t\t\t\trequired: true,\n\t\t\t},\n\t\t\t{ name: \"title\", type: \"text\", width: \"*\", title: \"Chart Title\" },\n\t\t\t{ name: \"label\", type: \"text\", width: \"*\", title: \"Data Label\" },\n\t\t],\n\t}),\n\n\t_categoryForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ChartDialog._valuesManager,\n\t\tnumCols: 7,\n\t\tcolWidths: [100, \"*\", 110, 160, 60, 60, 150],\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"categoryBinding\",\n\t\t\t\ttype: \"select\",\n\t\t\t\ttitle: \"Category Field\",\n\t\t\t\twidth: \"*\",\n\t\t\t\trequired: true,\n\t\t\t\tvalueMap: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"categoryBucket\",\n\t\t\t\ttype: \"enum\",\n\t\t\t\ttitle: \"Category Bucket\",\n\t\t\t\twidth: \"*\",\n\t\t\t\tallowEmptyValue: true,\n\t\t\t\tvalueMap: {\n\t\t\t\t\tNumericMultipleBucket: \"Numeric Multiple\",\n\t\t\t\t\tTextLengthBucket: \"Text Length\",\n\t\t\t\t\tTextStartsWithBucket: \"Text Starts With\",\n\t\t\t\t\tTemporalBucket: \"Temporal\",\n\t\t\t\t},\n\t\t\t\tredrawOnChange: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"numericMultiple\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\twidth: \"*\",\n\t\t\t\ttitle: \"Multiple\",\n\t\t\t\tmin: 1,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 100,\n\t\t\t\tvalidators: [{ type: \"requiredIf\", expression: \"item.isVisible()\" }],\n\t\t\t\tshowIf:\n\t\t\t\t\t\"form.getItem('categoryBucket').getValue() == 'NumericMultipleBucket'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"startsWithLength\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\twidth: \"*\",\n\t\t\t\ttitle: \"Length\",\n\t\t\t\tmin: 1,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 1,\n\t\t\t\tvalidators: [{ type: \"requiredIf\", expression: \"item.isVisible()\" }],\n\t\t\t\tshowIf:\n\t\t\t\t\t\"form.getItem('categoryBucket').getValue() == 'TextStartsWithBucket'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"startsWithCaseSensitive\",\n\t\t\t\ttype: \"checkbox\",\n\t\t\t\tallowEmptyValue: false,\n\t\t\t\ttitle: \"Case Sensitive\",\n\t\t\t\tshowTitle: false,\n\t\t\t\tdefaultValue: false,\n\t\t\t\tvalidators: [{ type: \"requiredIf\", expression: \"item.isVisible()\" }],\n\t\t\t\tshowIf:\n\t\t\t\t\t\"form.getItem('categoryBucket').getValue() == 'TextStartsWithBucket'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"temporalBucketType\",\n\t\t\t\ttype: \"enum\",\n\t\t\t\twidth: \"*\",\n\t\t\t\ttitle: \"Type\",\n\t\t\t\tcolSpan: 2,\n\t\t\t\tallowEmptyValue: false,\n\t\t\t\tvalueMap: {\n\t\t\t\t\tday: \"Day\",\n\t\t\t\t\tdayMonthYear: \"Day/Month/Year\",\n\t\t\t\t\thour: \"Hour\",\n\t\t\t\t\thourDay: \"Hour/Day\",\n\t\t\t\t\thourDayMonth: \"Hour/Day/Month\",\n\t\t\t\t\tminuteHour: \"Minute/Hour\",\n\t\t\t\t\tmonth: \"Month\",\n\t\t\t\t\tmonthYear: \"Month/Year\",\n\t\t\t\t\tsecondMinuteHour: \"Second/Minute/Hour\",\n\t\t\t\t\tyear: \"Year\",\n\t\t\t\t},\n\t\t\t\tvalidators: [{ type: \"requiredIf\", expression: \"item.isVisible()\" }],\n\t\t\t\tshowIf: \"form.getItem('categoryBucket').getValue() == 'TemporalBucket'\",\n\t\t\t},\n\t\t],\n\t}),\n\n\t_valueForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ChartDialog._valuesManager,\n\t\tnumCols: 4,\n\t\tcolWidths: [100, \"*\", 105, 100],\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"valueBinding\",\n\t\t\t\ttype: \"select\",\n\t\t\t\ttitle: \"Value Field\",\n\t\t\t\tstartRow: true,\n\t\t\t\twidth: \"*\",\n\t\t\t\trequired: true,\n\t\t\t\tvalueMap: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"valueFunction\",\n\t\t\t\ttype: \"enum\",\n\t\t\t\twidth: \"*\",\n\t\t\t\ttitle: \"Value Function\",\n\t\t\t\tvalueMap: [null, \"Count\", \"Avg\", \"Sum\", \"Min\", \"Max\"],\n\t\t\t},\n\t\t],\n\t}),\n\n\t_topForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ChartDialog._valuesManager,\n\t\tnumCols: 8,\n\t\tcolWidths: [30, 40, 60, 40, 130, 40, 100, 130],\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"topOn\",\n\t\t\t\ttype: \"checkbox\",\n\t\t\t\tallowEmptyValue: false,\n\t\t\t\tshowTitle: false,\n\t\t\t\tshowLabel: false,\n\t\t\t\tdefaultValue: false,\n\t\t\t\tredrawOnChange: true,\n\t\t\t\tchange: function (form, item, value, oldValue) {\n\t\t\t\t\tconst topItem = form.getItem(\"top\");\n\t\t\t\t\tconst topByItem = form.getItem(\"topBy\");\n\t\t\t\t\tconst topSortItem = form.getItem(\"topSort\");\n\t\t\t\t\tconst includeOthersItem = form.getItem(\"includeOthers\");\n\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\ttopItem.enable();\n\t\t\t\t\t\ttopByItem.enable();\n\t\t\t\t\t\ttopSortItem.enable();\n\t\t\t\t\t\tincludeOthersItem.enable();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!topItem.getValue()) {\n\t\t\t\t\t\t\ttopItem.setValue(\"10\");\n\t\t\t\t\t\t\ttopItem.clearErrors();\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttopItem.disable();\n\t\t\t\t\t\ttopByItem.disable();\n\t\t\t\t\t\ttopSortItem.disable();\n\t\t\t\t\t\tincludeOthersItem.disable();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"top\",\n\t\t\t\ttype: \"spinner\",\n\t\t\t\ttitle: \"Top\",\n\t\t\t\twidth: \"*\",\n\t\t\t\trequired: true,\n\t\t\t\tdisabled: true,\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 9999,\n\t\t\t\tstep: 1,\n\t\t\t\tdefaultValue: 10,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"topBy\",\n\t\t\t\ttype: \"radioGroup\",\n\t\t\t\ttitle: \"By\",\n\t\t\t\tvertical: false,\n\t\t\t\trequired: true,\n\t\t\t\tdisabled: true,\n\t\t\t\tdefaultValue: \"category\",\n\t\t\t\tvalueMap: { category: \"Category\", value: \"Value\" },\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"topSort\",\n\t\t\t\ttype: \"radioGroup\",\n\t\t\t\ttitle: \"Sort\",\n\t\t\t\tvertical: false,\n\t\t\t\trequired: true,\n\t\t\t\tdisabled: true,\n\t\t\t\tdefaultValue: \"ascending\",\n\t\t\t\tvalueMap: { ascending: \"Ascending\", descending: \"Descending\" },\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"includeOthers\",\n\t\t\t\ttype: \"checkbox\",\n\t\t\t\tallowEmptyValue: false,\n\t\t\t\ttitle: \"Include Others\",\n\t\t\t\tshowTitle: false,\n\t\t\t\tdisabled: true,\n\t\t\t\tdefaultValue: false,\n\t\t\t},\n\t\t],\n\t}),\n\n\t_orderForm: isc.DynamicForm.create({\n\t\tvaluesManager: isc.ChartDialog._valuesManager,\n\t\tnumCols: 5,\n\t\tcolWidths: [30, 40, 130, 40, \"*\"],\n\t\titems: [\n\t\t\t{\n\t\t\t\tname: \"orderOn\",\n\t\t\t\ttype: \"checkbox\",\n\t\t\t\tallowEmptyValue: false,\n\t\t\t\tshowTitle: false,\n\t\t\t\tshowLabel: false,\n\t\t\t\tdefaultValue: false,\n\t\t\t\tchange: function (form, item, value, oldValue) {\n\t\t\t\t\tconst orderByItem = form.getItem(\"orderBy\");\n\t\t\t\t\tconst orderSortItem = form.getItem(\"orderSort\");\n\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\torderByItem.enable();\n\t\t\t\t\t\torderSortItem.enable();\n\t\t\t\t\t} else {\n\t\t\t\t\t\torderByItem.disable();\n\t\t\t\t\t\torderSortItem.disable();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"orderBy\",\n\t\t\t\ttype: \"radioGroup\",\n\t\t\t\ttitle: \"By\",\n\t\t\t\tvertical: false,\n\t\t\t\trequired: true,\n\t\t\t\tdisabled: true,\n\t\t\t\tdefaultValue: \"category\",\n\t\t\t\tvalueMap: { category: \"Category\", value: \"Value\" },\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"orderSort\",\n\t\t\t\ttype: \"radioGroup\",\n\t\t\t\ttitle: \"Sort\",\n\t\t\t\tvertical: false,\n\t\t\t\tdisabled: true,\n\t\t\t\tdefaultValue: \"ascending\",\n\t\t\t\tvalueMap: { ascending: \"Ascending\", descending: \"Descending\" },\n\t\t\t},\n\t\t],\n\t}),\n\n\t_chart: null,\n\t_layout: null, // The entire interface\n\t_criteria: null, // The extra criteria defined on the query or model\n\t_tagId: null, // The bizId of the selected tag (if any) in the listgrid\n\t_dataSource: null, // The data source representing the server-side query or model\n\n\t/**\n\t * Creates a bordered layout with a title and members.\n\t * @param {string} title - the title of the border.\n\t * @param {Array} members - the layout members array.\n\t * @returns {isc.VLayout} the created layout.\n\t */\n\t_border: function (title, members) {\n\t\treturn isc.VLayout.create({\n\t\t\tisGroup: true,\n\t\t\tgroupTitle: title,\n\t\t\tstyleName: \"bizhubRoundedBorder\",\n\t\t\tgroupBorderCSS: \"1px solid #bfbfbf\",\n\t\t\tpadding: 5,\n\t\t\theight: 1,\n\t\t\tgroupLabelBackgroundColor: \"transparent\",\n\t\t\tgroupLabelStyleName: \"bizhubBorderLabel\",\n\t\t\tbackgroundImage: \"background.png\",\n\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\tmembers,\n\t\t});\n\t},\n\n\t/**\n\t * Creates a chart panel with a button and form.\n\t * @param {isc.IButton} buttonDefn - the button to include in the panel.\n\t * @param {isc.DynamicForm} formDefn - the RHS form.\n\t * @returns {isc.HLayout} the created panel.\n\t */\n\t_createChartPanel: function (buttonDefn, formDefn) {\n\t\treturn isc.HLayout.create({\n\t\t\tbackgroundImage: \"background.png\",\n\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\tmembersMargin: 5,\n\t\t\tmargin: 5,\n\t\t\theight: 1,\n\t\t\tlayoutAlign: \"center\",\n\t\t\tmembers: [\n\t\t\t\tisc.VLayout.create({\n\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\twidth: 134,\n\t\t\t\t\theight: 130,\n\t\t\t\t\tlayoutAlign: \"center\",\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tmembersMargin: 10,\n\t\t\t\t\tmembers: [\n\t\t\t\t\t\tisc.HLayout.create({\n\t\t\t\t\t\t\twidth: 134,\n\t\t\t\t\t\t\talign: \"center\",\n\t\t\t\t\t\t\tmembers: [\n\t\t\t\t\t\t\t\tisc.Img.create({\n\t\t\t\t\t\t\t\t\timageType: \"normal\",\n\t\t\t\t\t\t\t\t\tsrc: \"reporting/reporting.png\",\n\t\t\t\t\t\t\t\t\theight: 96,\n\t\t\t\t\t\t\t\t\tlayoutAlign: \"center\",\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tisc.HLayout.create({\n\t\t\t\t\t\t\twidth: 134,\n\t\t\t\t\t\t\talign: \"center\",\n\t\t\t\t\t\t\tmembers: [buttonDefn],\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t}),\n\t\t\t\tformDefn,\n\t\t\t],\n\t\t});\n\t},\n\n\t/**\n\t * Constructs the interface.\n\t */\n\t_create: function () {\n\t\tif (isc.ChartDialog._layout === null) {\n\t\t\tisc.ChartDialog._chart = isc.BizChart.create({});\n\t\t\tconst result = isc.ChartDialog._border(\"Result\", [\n\t\t\t\tisc.ChartDialog._chart,\n\t\t\t]);\n\t\t\tresult.setHeight(\"100%\");\n\t\t\tconst chart = isc.ChartDialog._border(\"Chart\", [\n\t\t\t\tisc.ChartDialog._chartForm,\n\t\t\t\tisc.ChartDialog._categoryForm,\n\t\t\t\tisc.ChartDialog._valueForm,\n\t\t\t]);\n\n\t\t\tisc.ChartDialog._layout = isc.VLayout.create({\n\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\theight: \"100%\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\tautoDraw: true,\n\t\t\t\tmargin: 5,\n\t\t\t\tmembersMargin: 5,\n\t\t\t\tmembers: [\n\t\t\t\t\tisc.ChartDialog._createChartPanel(\n\t\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\t\ttitle: \"Generate\",\n\t\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\t\tif (isc.ChartDialog._valuesManager.validate()) {\n\t\t\t\t\t\t\t\t\tconst params = {\n\t\t\t\t\t\t\t\t\t\tds: isc.ChartDialog._dataSource.ID,\n\t\t\t\t\t\t\t\t\t\tt: isc.ChartDialog._valuesManager.getValue(\"type\"),\n\t\t\t\t\t\t\t\t\t\tb: isc.ChartDialog._valuesManager.getValues(),\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tif (isc.ChartDialog._criteria) {\n\t\t\t\t\t\t\t\t\t\tparams.criteria = isc.ChartDialog._criteria;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (isc.ChartDialog._tagId) {\n\t\t\t\t\t\t\t\t\t\tparams.tagId = isc.ChartDialog._tagId;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvalidateCategoryBucket(params);\n\t\t\t\t\t\t\t\t\tvalidateValueFunction(params);\n\n\t\t\t\t\t\t\t\t\tif (!params.b.label) {\n\t\t\t\t\t\t\t\t\t\tparams.b.label = generateDataLabel(params);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tisc.ChartDialog._valuesManager.clearErrors(true);\n\n\t\t\t\t\t\t\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\t\t\t\t\t\t\tshowPrompt: true,\n\t\t\t\t\t\t\t\t\t\tevalResult: true,\n\t\t\t\t\t\t\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"chart\",\n\t\t\t\t\t\t\t\t\t\thttpMethod: \"POST\",\n\t\t\t\t\t\t\t\t\t\tparams,\n\t\t\t\t\t\t\t\t\t\tcallback(rpcResponse, data) {\n\t\t\t\t\t\t\t\t\t\t\tif (data.config) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst oldChartType =\n\t\t\t\t\t\t\t\t\t\t\t\t\tisc.ChartDialog._chart?.chartConfig?.type;\n\t\t\t\t\t\t\t\t\t\t\t\tconst newChartType = data.config.type;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (oldChartType !== newChartType) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tisc.ChartDialog._destroyAndRecreate();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tisc.ChartDialog._chart._update(data);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tisc.VLayout.create({\n\t\t\t\t\t\t\tbackgroundImage: \"background.png\",\n\t\t\t\t\t\t\tbackgroundRepeat: \"repeat\",\n\t\t\t\t\t\t\tmargin: 0,\n\t\t\t\t\t\t\theight: 1,\n\t\t\t\t\t\t\tmembersMargin: 5,\n\t\t\t\t\t\t\tmembers: [\n\t\t\t\t\t\t\t\tchart,\n\t\t\t\t\t\t\t\tisc.ChartDialog._border(\"Top\", [isc.ChartDialog._topForm]),\n\t\t\t\t\t\t\t\tisc.ChartDialog._border(\"Order\", [isc.ChartDialog._orderForm]),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t\t\tresult,\n\t\t\t\t],\n\t\t\t});\n\t\t} else {\n\t\t\tisc.ChartDialog._destroyAndRecreate();\n\t\t}\n\t},\n\n\t/**\n\t * Destroys and recreates the chart.\n\t */\n\t_destroyAndRecreate: function () {\n\t\tlet border = null;\n\t\tif (isc.ChartDialog._chart) {\n\t\t\tborder = isc.ChartDialog._layout.getMember(1);\n\t\t\tborder.removeMember(isc.ChartDialog._chart);\n\t\t\tif (isc.ChartDialog._chart.chart) {\n\t\t\t\tisc.ChartDialog._chart.chart.destroy();\n\t\t\t}\n\t\t\tisc.ChartDialog._chart.destroy();\n\t\t}\n\t\tisc.ChartDialog._chart = isc.BizChart.create({});\n\t\tif (border) {\n\t\t\tborder.addMember(isc.ChartDialog._chart);\n\t\t} else {\n\t\t\tisc.ChartDialog._layout.addMember(\n\t\t\t\tisc.ChartDialog._border(\"Result\", [isc.ChartDialog._chart]),\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Populates the chart dialog with data and displays it.\n\t * @param {Object} dataSource - the data source representing the server-side query or model.\n\t * @param {string} _c - the web context identifier.\n\t * @param {Object} criteria - the criteria to apply to the server-side query or model.\n\t * @param {string} tagId - the tagId of the selected tag from the listgrid to apply server-side.\n\t */\n\tpopupChart: function (dataSource, _c, criteria, tagId) {\n\t\tisc.ChartDialog._create();\n\n\t\tisc.ChartDialog._dataSource = dataSource;\n\t\tisc.ChartDialog._c = _c;\n\t\tisc.ChartDialog._criteria = criteria;\n\t\tisc.ChartDialog._tagId = tagId;\n\n\t\tconst valueMap = createValueMap(dataSource);\n\t\tconst categoryField =\n\t\t\tisc.ChartDialog._categoryForm.getItem(\"categoryBinding\");\n\t\tconst valueField = isc.ChartDialog._valueForm.getItem(\"valueBinding\");\n\n\t\tcategoryField.setValue(\"\");\n\t\tcategoryField.setValueMap(valueMap);\n\t\tvalueField.setValue(\"\");\n\t\tvalueField.setValueMap(valueMap);\n\n\t\tisc.WindowStack.popup(null, \"Charting\", true, [isc.ChartDialog._layout]);\n\t},\n});\n\n/**\n * Creates a value map from the data source fields.\n * @param {Object} dataSource - the data source.\n * @returns {Object} - the value map.\n */\ncreateValueMap = function (dataSource) {\n\tconst valueMap = {};\n\tconst fieldNames = dataSource.getFieldNames(true); // no hidden fields\n\tfieldNames.forEach((fieldName) => {\n\t\tif (fieldName !== \"bizTagged\" && fieldName !== \"bizFlagComment\") {\n\t\t\tconst field = dataSource.getField(fieldName);\n\t\t\tvalueMap[field.name] = field.title;\n\t\t}\n\t});\n\treturn valueMap;\n};\n\n/**\n * Validates the category bucket based on the field type.\n * @param {Object} params - the parameters object.\n */\nvalidateCategoryBucket = function (params) {\n\tconst { categoryBinding, categoryBucket } = params.b;\n\tif (categoryBucket) {\n\t\tconst field = isc.ChartDialog._dataSource.getField(categoryBinding);\n\t\tconst { type } = field;\n\n\t\tif (isc.BizUtil.isNumeric(type)) {\n\t\t\tif (categoryBucket !== \"NumericMultipleBucket\") {\n\t\t\t\tsetCategoryBucketErrors(\n\t\t\t\t\t\"Use a numeric bucket only with a number field\",\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (isc.BizUtil.isTemporal(type)) {\n\t\t\tif (categoryBucket !== \"TemporalBucket\") {\n\t\t\t\tsetCategoryBucketErrors(\n\t\t\t\t\t\"Use a temporal bucket only with a date or time field\",\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (\n\t\t\tcategoryBucket === \"TemporalBucket\" ||\n\t\t\tcategoryBucket === \"NumericMultipleBucket\"\n\t\t) {\n\t\t\tsetCategoryBucketErrors(\n\t\t\t\t\"Use a temporal bucket only with a date or time field\",\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t}\n};\n\n/**\n * Sets errors for the category bucket fields.\n * @param {string} errorMessage - the error message to set.\n */\nsetCategoryBucketErrors = function (errorMessage) {\n\tisc.ChartDialog._valuesManager.setErrors(\n\t\t{\n\t\t\tcategoryBinding: errorMessage,\n\t\t\tcategoryBucket: errorMessage,\n\t\t},\n\t\ttrue,\n\t);\n};\n\n/**\n * Validates the value function based on the field type.\n * @param {Object} params - the parameters object.\n */\nvalidateValueFunction = function (params) {\n\tconst { valueBinding, valueFunction } = params.b;\n\tconst field = isc.ChartDialog._dataSource.getField(valueBinding);\n\tconst { type } = field;\n\n\tif (type !== \"integer\" && type !== \"float\" && valueFunction !== \"Count\") {\n\t\tisc.ChartDialog._valuesManager.setErrors(\n\t\t\t{\n\t\t\t\tvalueBinding: \"Use the [Count] value function with a non-numeric field\",\n\t\t\t\tvalueFunction:\n\t\t\t\t\t\"Use the [Count] value function with a non-numeric field\",\n\t\t\t},\n\t\t\ttrue,\n\t\t);\n\t}\n};\n\n/**\n * Generates a data label if none is defined.\n * @param {Object} params - the parameters object.\n * @returns {string} the generated data label.\n */\ngenerateDataLabel = function (params) {\n\tconst { valueFunction } = params.b;\n\tconst valueFunctionDisplay = valueFunction\n\t\t? isc.ChartDialog._valueForm.getItem(\"valueFunction\").getDisplayValue()\n\t\t: \"\";\n\tconst valueBindingDisplay = isc.ChartDialog._valueForm\n\t\t.getItem(\"valueBinding\")\n\t\t.getDisplayValue();\n\tconst categoryBindingDisplay = isc.ChartDialog._categoryForm\n\t\t.getItem(\"categoryBinding\")\n\t\t.getDisplayValue();\n\n\treturn `${valueFunctionDisplay} ${valueBindingDisplay} by ${categoryBindingDisplay}`;\n};\n","/**\n * Manages advanced filtering logic in relevant UI components.\n * Extends VLayout from the SmartClient library.\n */\nisc.defineClass(\"AdvancedFilter\", \"VLayout\");\n\nisc.AdvancedFilter.addProperties({\n\t// VLayout properties\n\twidth: \"100%\",\n\theight: 1,\n\toverflow: \"visible\",\n\tmembersMargin: 2,\n\tmargin: 2,\n\n\t// Filter editor and filter builder configurations (e.g., BizListGrid, BizTreeGrid)\n\tfilterableComponent: null,\n\tfilterableComponentConfig: null,\n\ttoggleButton: null,\n\t_filterBuilder: null,\n\t_filterButtonDefaults: null,\n});\n\nisc.AdvancedFilter.addMethods({\n\t\n\tinitWidget: function () {\n\t\tthis._filterButtonDefaults = {\n\t\t\t_constructor: isc.IButton,\n\t\t\tautoFit: true,\n\t\t\ttitle: \"Filter\",\n\t\t\ticon: \"icons/filter_add.png\",\n\t\t};\n\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\tthis.toggleButton = isc.ToolStripButton.create({\n\t\t\ticon: \"icons/filter_add.png\",\n\t\t\tactionType: \"checkbox\",\n\t\t\tshowFocused: false,\n\t\t\tshowDown: false,\n\t\t\tshowSelectedIcon: false,\n\t\t\tselected: false,\n\t\t\tcanHover: true,\n\t\t\tgetHoverHTML: function () {\n\t\t\t\treturn this.selected\n\t\t\t\t\t? \"Use <b>simple</b> filtering\"\n\t\t\t\t\t: \"Use <b>advanced</b> filtering\";\n\t\t\t},\n\t\t});\n\n\t\tthis._styleForm = isc.DynamicForm.create({\n\t\t\tnumCols: 2,\n\t\t\twidth: 200,\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tname: \"style\",\n\t\t\t\t\ttitle: \"Style\",\n\t\t\t\t\ttype: \"radioGroup\",\n\t\t\t\t\tvertical: false,\n\t\t\t\t\trequired: true,\n\t\t\t\t\tvalueMap: { radio: \"Flat\", bracket: \"Nested\", inline: \"Inline\" },\n\t\t\t\t\tdefaultValue: \"radio\",\n\t\t\t\t\tchanged: (form, item, value) => {\n\t\t\t\t\t\tthis.setDataSource(this._filterBuilder.getDataSource());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tthis.addMember(this._styleForm);\n\t},\n\n\t/**\n\t * Gets the current filter style.\n\t * @returns {string} the current filter style.\n\t */\n\tgetStyle: function () {\n\t\treturn this._styleForm.getValue(\"style\");\n\t},\n\n\t/**\n\t * Sets the filter style.\n\t * @param {string} style - the new filter style to apply.\n\t */\n\tsetStyle: function (style) {\n\t\tthis._styleForm.setValue(\"style\", style);\n\t\tthis.setDataSource(this._filterBuilder.getDataSource());\n\t},\n\n\t/**\n\t * Handles the toggle button click event to switch between simple and advanced filtering modes.\n\t *\n\t * **Advanced Filtering:**\n\t *   - Suppresses automatic filtering by temporarily overriding `getFilterEditorCriteria`.\n\t *   - Applies advanced criteria from the filter builder.\n\t *   - Ensures the filter panel is visible.\n\t *\n\t * **Simple Filtering:**\n\t *   - Clears advanced criteria.\n\t *   - Resets the grid's filter editor.\n\t *   - Hides the advanced filter panel.\n\t */\n\ttoggleButtonClick: function () {\n\t\tconst { grid } = this.filterableComponent;\n\n\t\tif (this.toggleButton.selected) {\n\t\t\t// Suppress SmartClient's automatic filtering during filter editor toggle\n\t\t\tconst originalGetCriteria = grid.getFilterEditorCriteria;\n\t\t\tgrid.getFilterEditorCriteria = () => null;\n\t\t\tgrid.setFilterEditorCriteria(isc.emptyObject);\n\t\t\tgrid.setShowFilterEditor(false);\n\t\t\tgrid.getFilterEditorCriteria = originalGetCriteria;\n\n\t\t\t// Apply advanced filtering using criteria from the filter builder\n\t\t\tgrid.filterData(this._filterBuilder.getCriteria());\n\n\t\t\t// Ensure the panel is visible for proper interaction\n\t\t\tthis.show();\n\t\t} else {\n\t\t\t// Clear advanced criteria and reset the grid filter editor\n\t\t\tgrid.setShowFilterEditor(true);\n\t\t\tgrid.setFilterEditorCriteria({});\n\t\t\tgrid.filterData({});\n\n\t\t\t// Hide the advanced filter panel\n\t\t\tthis.hide();\n\t\t}\n\t},\n\n\t/**\n\t * Sets the data source for the filter builder.\n\t * @param {Object} dataSource - the data source for the filter.\n\t */\n\tsetDataSource: function (dataSource) {\n\t\tif (this._filterBuilder) {\n\t\t\t// Clear existing filter builder\n\t\t\tthis.removeMember(this._filterBuilder);\n\t\t\tthis._filterBuilder.destroy();\n\t\t\tthis._filterBuilder = null;\n\t\t} else {\n\t\t\t// Initialise the filter button button\n\t\t\tthis._filterButton = this.createAutoChild(\"_filterButton\", {\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.filterableComponent.grid.filterData(\n\t\t\t\t\t\tthis._filterBuilder.getCriteria(),\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t{ params: { _summary: this.filterableComponent.summaryType } },\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t});\n\t\t\tthis.addMember(this._filterButton);\n\t\t}\n\n\t\t// Get selected filter style (or default)\n\t\tconst style = this.getStyle() || \"radio\";\n\n\t\t// Create new filter builder with the provided data source and selected style\n\t\tthis._filterBuilder = isc.FilterBuilder.create({\n\t\t\tdataSource,\n\t\t\ttopOperatorAppearance: style,\n\t\t\tallowEmpty: true,\n\t\t});\n\n\t\t// Add the new filter builder to the layout and manage visibility\n\t\tthis.addMember(this._filterBuilder, 1);\n\t\tthis.toggleButton.selected ? this.show() : this.hide();\n\t},\n\n\t/**\n\t * Retrieves the filter criteria.\n\t * @param {boolean} includeEmptyValues - whether to include empty values.\n\t * @returns {Object|null} the filter criteria or null if not set.\n\t */\n\tgetCriteria: function (includeEmptyValues) {\n\t\treturn this._filterBuilder\n\t\t\t? this._filterBuilder.getCriteria(includeEmptyValues)\n\t\t\t: null;\n\t},\n\n\t/**\n\t * Clears all filter criteria.\n\t */\n\tclearCriteria: function () {\n\t\tif (this._filterBuilder) {\n\t\t\tthis._filterBuilder.clearCriteria();\n\t\t}\n\t},\n\n\t/**\n\t * Sets the filter criteria.\n\t * @param {Object} criteria - the criteria to set.\n\t */\n\tsetCriteria: function (criteria) {\n\t\tif (this._filterBuilder) {\n\t\t\tthis._filterBuilder.setCriteria(criteria);\n\t\t}\n\t},\n});\n","/**\n * Implements the BizGrid UI component.\n * Extends VLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizGrid\", \"VLayout\");\n\nisc.BizGrid.addProperties({\n\tgrid: null,\n\t_eventRowNum: null, // Row at which context menu was invoked\n\t_eventColumnNum: null, // Column at which context menu was invoked\n\t_eventRecord: null, // Record at which context menu was invoked\n\t_disabled: false, // Whether this widget is disabled or not\n\tdeleteSelectionItem: null, // Standard delete item for all grids\n\tdeleteSelectionButton: null, // Standard delete button for all grids\n\tclearSelectionItem: null, // Standard clear selection item for all grids\n\n\t// Document privileges granted\n\taggregate: false,\n\tcanCreate: false,\n\tcanUpdate: false,\n\tcanDelete: false,\n\n\t// Conditions to evaluate from the view widget definition\n\tcanAdd: true,\n\tcanEdit: true,\n\tcanZoom: true,\n\tcanRemove: true,\n\n\t// Repeater switches\n\tisRepeater: false,\n\tshowColumnHeaders: true,\n\tshowGrid: true,\n});\n\nisc.BizGrid.addMethods({\n\tinitWidget: function (config) {\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\t// Delete selection item\n\t\tthis.deleteSelectionItem = {\n\t\t\ttitle: \"Delete/Remove Selected\",\n\t\t\ticon: \"icons/delete.png\",\n\t\t\tenableIf: () =>\n\t\t\t\t!this._disabled &&\n\t\t\t\tthis.canDelete &&\n\t\t\t\tthis.canRemove &&\n\t\t\t\tthis.grid.anySelected(),\n\t\t\tclick: () => {\n\t\t\t\tisc.ask(\"Do you want to delete/remove the selected rows?\", (value) => {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\t// If a list grid, retrieve CSRF properties\n\t\t\t\t\t\tconst requestProperties = {\n\t\t\t\t\t\t\tparams: this._b ? {} : { _csrf: this._csrf },\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (this._view) {\n\t\t\t\t\t\t\tconst instance = this._view.gather(false);\n\t\t\t\t\t\t\trequestProperties.params._c = instance._c;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.grid.removeSelectedData((dsResponse, data, dsRequest) => {\n\t\t\t\t\t\t\t// If a list grid, assign the CSRF token from the response header\n\t\t\t\t\t\t\tif (dsResponse) {\n\t\t\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.grid.selectionChanged(null, false);\n\t\t\t\t\t\t\tthis._eventRowNum = null;\n\t\t\t\t\t\t\tthis._eventColumnNum = null;\n\t\t\t\t\t\t\tthis._eventRecord = null;\n\n\t\t\t\t\t\t\t// If a data grid or embedded list grid...\n\t\t\t\t\t\t\tif (this._view) {\n\t\t\t\t\t\t\t\t// If a data grid...\n\t\t\t\t\t\t\t\tif (this._b) {\n\t\t\t\t\t\t\t\t\tthis._view._vm.setValue(\"_changed\", true); // Make view dirty\n\t\t\t\t\t\t\t\t\tthis._view._vm.setValue(\"_apply\", true); // Post view changes before zoom\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Run any registered event callbacks\n\t\t\t\t\t\t\t\tif (this.bizRemoved) {\n\t\t\t\t\t\t\t\t\tthis.bizRemoved();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, requestProperties);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t};\n\n\t\t// Delete selection button\n\t\tthis.deleteSelectionButton = isc.BizUtil.createImageButton(\n\t\t\tthis.deleteSelectionItem.icon,\n\t\t\ttrue,\n\t\t\t\"<b>Delete/Remove</b> selected.\",\n\t\t\tthis.deleteSelectionItem.click,\n\t\t);\n\t\tthis.deleteSelectionButton.setDisabled(true);\n\n\t\t// Clear selection item\n\t\tthis.clearSelectionItem = {\n\t\t\ttitle: \"Deselect all\",\n\t\t\ticon: \"icons/clearSelection.png\",\n\t\t\tclick: () => {\n\t\t\t\tthis.grid.deselectAllRecords();\n\t\t\t\tthis._eventRowNum = null;\n\t\t\t\tthis._eventColumnNum = null;\n\t\t\t\tthis._eventRecord = null;\n\t\t\t},\n\t\t};\n\t},\n\n\t/**\n\t * Refreshes the grid.\n\t */\n\trefresh: function () {\n\t\tthis.grid.refresh();\n\t},\n});\n\n/**\n * Implements the BizDataGrid UI component.\n * Extends BizGrid implemented above.\n */\nisc.ClassFactory.defineClass(\"BizDataGrid\", \"BizGrid\");\n\nisc.BizDataGrid.addProperties({\n\t// Buttons that are enabled/disabled on grid row selection\n\t_newButton: null,\n\t_zoomButton: null,\n\t_popoutButton: null,\n\t_editButton: null,\n\n\t// Switches to turn off tool buttons / menu items\n\tshowAdd: true,\n\tshowZoom: true,\n\tshowEdit: true,\n\tshowRemove: true,\n\tshowDeselect: true,\n\n\t_mod: null, // Module name\n\t_doc: null, // Document name\n\t_b: null, // Binding\n\t_ordinal: null, // Field name to use for user ordering of the records\n});\n\nisc.BizDataGrid.addMethods({\n\tinitWidget(config) {\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\t// New item\n\t\tconst newItem = {\n\t\t\ttitle: \"New\",\n\t\t\ticon: \"icons/new.png\",\n\t\t\tenableIf: () => !this._disabled && this.canCreate && this.canAdd,\n\t\t\tclick: () => (config.inline ? this.add() : this.zoom(true)),\n\t\t};\n\n\t\t// Zoom item\n\t\tthis._zoomItem = {\n\t\t\ttitle: \"Zoom\",\n\t\t\ticon: \"icons/zoom.gif\",\n\t\t\tclick: () => this.zoom(false),\n\t\t\tenableIf: () => this.canZoom && this.grid.anySelected(),\n\t\t};\n\n\t\t// Edit item\n\t\tconst editItem = {\n\t\t\ttitle: \"Edit\",\n\t\t\ticon: \"icons/edit.png\",\n\t\t\tenableIf: () =>\n\t\t\t\t!this._disabled &&\n\t\t\t\tthis.canUpdate &&\n\t\t\t\tthis.canEdit &&\n\t\t\t\tthis.grid.anySelected(),\n\t\t\tclick: () => {\n\t\t\t\tif (this.grid.anySelected()) {\n\t\t\t\t\tthis.grid.startEditing(this._eventRowNum, this._eventColNum);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t// Create buttons\n\t\tthis._newButton = isc.BizUtil.createImageButton(\n\t\t\tnewItem.icon,\n\t\t\ttrue,\n\t\t\t\"<b>New</b> record.\",\n\t\t\tnewItem.click,\n\t\t);\n\n\t\tthis._zoomButton = isc.BizUtil.createImageButton(\n\t\t\tthis._zoomItem.icon,\n\t\t\ttrue,\n\t\t\t\"<b>Zoom</b> into record.\",\n\t\t\tthis._zoomItem.click,\n\t\t);\n\t\tthis._zoomButton.setDisabled(true);\n\n\t\tthis._editButton = isc.BizUtil.createImageButton(\n\t\t\teditItem.icon,\n\t\t\ttrue,\n\t\t\t\"<b>Edit</b> a record inline.\",\n\t\t\teditItem.click,\n\t\t);\n\t\tthis._editButton.setDisabled(true);\n\n\t\t// Context menu\n\t\tconst contextMenuData = [];\n\t\tif (config.editable) {\n\t\t\tif (this.showAdd) contextMenuData.push(newItem);\n\t\t\tif (this.showZoom) contextMenuData.push(this._zoomItem);\n\t\t\tif (this.showEdit) contextMenuData.push(editItem);\n\t\t\tif (this.showRemove) contextMenuData.push(this.deleteSelectionItem);\n\t\t\tif (this.showDeselect) {\n\t\t\t\tif (contextMenuData.length > 0) {\n\t\t\t\t\tcontextMenuData.push({ isSeparator: true });\n\t\t\t\t}\n\t\t\t\tcontextMenuData.push(this.clearSelectionItem);\n\t\t\t}\n\t\t}\n\n\t\tconst contextMenu = isc.Menu.create({\n\t\t\tshowShadow: true,\n\t\t\tshadowDepth: 10,\n\t\t\tdata: contextMenuData,\n\t\t});\n\n\t\t// Create the grid\n\t\tthis._createGrid(config, this._fields, contextMenu);\n\n\t\t// Assign the grid to the form grids\n\t\tif (!this._view._grids[this._b]) {\n\t\t\tthis._view._grids[this._b] = {};\n\t\t}\n\t\tthis._view._grids[this._b][this.getID()] = this;\n\n\t\t// Toolstrip\n\t\tif (config.editable && !config.isRepeater) {\n\t\t\tconst toolStripMembers = [];\n\t\t\tif (this.showAdd) toolStripMembers.push(this._newButton);\n\t\t\tif (this.showZoom) toolStripMembers.push(this._zoomButton);\n\t\t\tif (this.showEdit) toolStripMembers.push(this._editButton);\n\t\t\tif (this.showRemove) toolStripMembers.push(this.deleteSelectionButton);\n\t\t\tif (this.showDeselect) {\n\t\t\t\tif (toolStripMembers.length > 0) toolStripMembers.push(\"separator\");\n\t\t\t\ttoolStripMembers.push(\n\t\t\t\t\tisc.BizUtil.createImageButton(\n\t\t\t\t\t\tthis.clearSelectionItem.icon,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\"<b>Deselect</b> all.\",\n\t\t\t\t\t\tthis.clearSelectionItem.click,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (toolStripMembers.length > 0) {\n\t\t\t\tthis.addMember(\n\t\t\t\t\tisc.ToolStrip.create({\n\t\t\t\t\t\tmembersMargin: 2,\n\t\t\t\t\t\tlayoutMargin: 2,\n\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\tmembers: toolStripMembers,\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Set grid minHeight if no toolbar\n\t\tif (this.getMembersLength() === 0) {\n\t\t\tthis.grid.setMinHeight(this.minHeight);\n\t\t}\n\t\tthis.addMember(this.grid);\n\t},\n\n\t/**\n\t * Creates the grid.\n\t * @param {Object} config - the configuration object.\n\t * @param {Array} fields - the grid fields.\n\t * @param {isc.Menu} contextMenu - the context menu.\n\t */\n\t_createGrid: function (config, fields, contextMenu) {\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\tconst showHeader = !this.isRepeater || this.showColumnHeaders;\n\n\t\tconst gridConfig = {\n\t\t\theight: \"*\",\n\t\t\tminHeight: 100,\n\t\t\tautoFetchData: false,\n\t\t\tshowHeader,\n\t\t\theaderHeight: 30,\n\t\t\tshowFilterEditor: false,\n\t\t\tdefaultFilterOperator: \"iContains\",\n\t\t\tshowSelectedStyle: !this.isRepeater,\n\t\t\tshowEmptyMessage: !this.isRepeater,\n\t\t\tbaseStyle: this.isRepeater ? \"\" : null,\n\t\t\tborder: this.isRepeater ? (this.showGrid ? null : \"none\") : null,\n\t\t\tbodyBackgroundColor: this.isRepeater\n\t\t\t\t? this.showGrid\n\t\t\t\t\t? \"white\"\n\t\t\t\t\t: \"#F9F9F9\"\n\t\t\t\t: \"white\",\n\t\t\tfields,\n\t\t\tselectionType: \"single\",\n\t\t\talternateRecordStyles: true,\n\t\t\tcanEdit: this.canUpdate && this.canEdit,\n\t\t\teditEvent: \"none\",\n\t\t\tneverValidate: false,\n\t\t\tvalidateByCell: true,\n\t\t\tsaveByCell: false,\n\t\t\tvalidateOnChange: false,\n\t\t\trecordEnabledProperty: \"_enabled\",\n\t\t\tcanHover: !this.isRepeater,\n\t\t\twrapCells: !!this.wordWrap,\n\t\t\tfixedRecordHeights: !this.wordWrap,\n\t\t\tcanReorderFields: false,\n\t\t\tcanSort: !config._ordinal,\n\t\t\tcanGroupBy: !config._ordinal,\n\t\t\tcanReorderRecords: !!config._ordinal && this.canUpdate && this.canEdit,\n\t\t\trecordsDropped: function (dropRecords, index, destWidget, sourceWidget) {\n\t\t\t\tthis.reorderData();\n\t\t\t},\n\t\t\treorderData: function () {\n\t\t\t\tif (config._ordinal) {\n\t\t\t\t\tconst data = this.getData();\n\t\t\t\t\tdata.forEach((record, index) => {\n\t\t\t\t\t\trecord[config._ordinal] = index + 1;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tdragDataAction: \"move\",\n\t\t\tautoSaveEdits: true,\n\t\t\tmodalEditing: true,\n\t\t\tcanFreezeFields: false,\n\t\t\tcontextMenu: this.isRepeater ? null : contextMenu,\n\t\t\tshowRollOver: true,\n\t\t\trowClick: function (record, rowNum, colNum) {\n\t\t\t\tif (record?.bizId) {\n\t\t\t\t\tme._eventRecord = record;\n\t\t\t\t\tme._eventRowNum = rowNum;\n\t\t\t\t\tme._eventColNum = colNum;\n\t\t\t\t}\n\t\t\t\treturn this.Super(\"rowClick\", arguments);\n\t\t\t},\n\t\t\trowContextClick: function (record, rowNum, colNum) {\n\t\t\t\tif (record?.bizId) {\n\t\t\t\t\tthis.deselectAllRecords();\n\t\t\t\t\tme._eventRecord = record;\n\t\t\t\t\tme._eventRowNum = rowNum;\n\t\t\t\t\tme._eventColNum = colNum;\n\t\t\t\t\tthis.selectSingleRecord(record);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\trowDoubleClick: function (record) {\n\t\t\t\tif (config.editable && record && !record.isFolder) {\n\t\t\t\t\tme._eventRecord = record;\n\t\t\t\t\tif (config.inline) {\n\t\t\t\t\t\tif (me.canUpdate && me.canEdit && me.showEdit && !me._disabled) {\n\t\t\t\t\t\t\tthis.startEditing(me._eventRowNum, me._eventColNum, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (me.canZoom && me.showZoom) {\n\t\t\t\t\t\tif (me._view._blurry) {\n\t\t\t\t\t\t\tme._view._blurry = me._zoomItem;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tme._zoomItem.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.Super(\"rowDoubleClick\", arguments);\n\t\t\t},\n\t\t\tselectionChanged: function () {\n\t\t\t\tconst hasSelection = this.anySelected();\n\t\t\t\tme._zoomButton.setDisabled(!hasSelection || !me.canZoom);\n\t\t\t\tme._editButton.setDisabled(\n\t\t\t\t\t!hasSelection || me._disabled || !me.canUpdate || !me.canEdit,\n\t\t\t\t);\n\t\t\t\tme.deleteSelectionButton.setDisabled(\n\t\t\t\t\t!hasSelection || me._disabled || !me.canDelete || !me.canRemove,\n\t\t\t\t);\n\t\t\t\tme._newButton.setDisabled(me._disabled || !me.canCreate || !me.canAdd);\n\t\t\t},\n\t\t\tselectionUpdated: function (record) {\n\t\t\t\tif (me.selectedIdBinding) {\n\t\t\t\t\tconst changes = me._view._vm.valuesHaveChanged();\n\t\t\t\t\tme._view._vm.setValue(me.selectedIdBinding, record?.bizId || null);\n\t\t\t\t\tif (!changes) me._view._vm.rememberValues();\n\t\t\t\t}\n\t\t\t\tif (me.bizSelected) {\n\t\t\t\t\tif (me.showZoom && me.canZoom && config.editable) {\n\t\t\t\t\t\tif (isc.RPCManager.requestsArePending()) {\n\t\t\t\t\t\t\tme._view._blurry = null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tme._view._blurry = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tme.delayCall(\"bizSelected\", [], this.doubleClickDelay);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tme.bizSelected();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tcanEditCell: function (rowNum, colNum) {\n\t\t\t\treturn !me._disabled && this.Super(\"canEditCell\", arguments);\n\t\t\t},\n\t\t\teditComplete: (\n\t\t\t\trowNum,\n\t\t\t\tcolNum,\n\t\t\t\tnewValues,\n\t\t\t\toldValues,\n\t\t\t\teditCompletionEvent,\n\t\t\t) => {\n\t\t\t\tthis._view._vm.setValue(\"_changed\", true);\n\t\t\t\tthis._view._vm.setValue(\"_apply\", true);\n\t\t\t\tif (this.bizEdited) this.bizEdited();\n\t\t\t},\n\t\t};\n\n\t\tif (config.gridConfig) {\n\t\t\tisc.addProperties(gridConfig, config.gridConfig);\n\t\t}\n\n\t\tthis.grid = isc.ListGrid.create(gridConfig);\n\t},\n\n\t/**\n\t * Sets the disabled state of the grid.\n\t * @param {boolean} disabled - whether the grid is disabled.\n\t */\n\tsetDisabled: function (disabled) {\n\t\tthis._disabled = disabled;\n\t\tif (this.grid) {\n\t\t\tthis.grid.selectionChanged();\n\t\t}\n\t},\n\n\t/**\n\t * Zooms into a record.\n\t * @param {boolean} zoomToNew - whether to zoom into a new record.\n\t */\n\tzoom: function (zoomToNew) {\n\t\tconst mod = this._eventRecord?.bizModule || this._mod;\n\t\tconst doc = this._eventRecord?.bizDocument || this._doc;\n\n\t\tisc.BizUtil.getEditView(mod, doc, (view) => {\n\t\t\tconst viewBinding = this._view._b\n\t\t\t\t? `${this._view._b}.${this._b}`\n\t\t\t\t: this._b;\n\t\t\tconst zoomToBizId = zoomToNew ? null : this._eventRecord.bizId;\n\n\t\t\tconst instance = this._view.gather(true);\n\t\t\tif (instance) {\n\t\t\t\tconst gridRect = this.grid.body.getPageRect();\n\t\t\t\tconst rowTop = this.grid.body.getRowPageTop(this._eventRowNum);\n\t\t\t\tconst rowHeight = this.grid.body.getRowSize(this._eventRowNum);\n\n\t\t\t\tif (instance._apply || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\tdelete instance._apply;\n\t\t\t\t\tthis._view.saveInstance(true, null, () => {\n\t\t\t\t\t\tthis._zoom(\n\t\t\t\t\t\t\tzoomToNew,\n\t\t\t\t\t\t\tzoomToBizId,\n\t\t\t\t\t\t\tviewBinding,\n\t\t\t\t\t\t\tview,\n\t\t\t\t\t\t\tinstance._c,\n\t\t\t\t\t\t\tgridRect,\n\t\t\t\t\t\t\trowTop,\n\t\t\t\t\t\t\trowHeight,\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis._zoom(\n\t\t\t\t\t\tzoomToNew,\n\t\t\t\t\t\tzoomToBizId,\n\t\t\t\t\t\tviewBinding,\n\t\t\t\t\t\tview,\n\t\t\t\t\t\tinstance._c,\n\t\t\t\t\t\tgridRect,\n\t\t\t\t\t\trowTop,\n\t\t\t\t\t\trowHeight,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisc.warn(\"You cannot zoom in until you fix the problems found\");\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Handles the zoom logic.\n\t * @param {boolean} zoomToNew - whether to zoom into a new record.\n\t * @param {string} zoomToBizId - the business ID of the record to zoom into.\n\t * @param {string} viewBinding - the view binding.\n\t * @param {isc.View} view - the view to zoom into.\n\t * @param {string} _c - the context identifier.\n\t * @param {Array} gridRect - the grid rectangle.\n\t * @param {number} rowTop - the top position of the row.\n\t * @param {number} rowHeight - the height of the row.\n\t */\n\t_zoom: function (\n\t\tzoomToNew,\n\t\tzoomToBizId,\n\t\tviewBinding,\n\t\tview,\n\t\t_c,\n\t\tgridRect,\n\t\trowTop,\n\t\trowHeight,\n\t) {\n\t\tconst rowRect = [gridRect[0], rowTop, gridRect[2], rowHeight];\n\t\tisc.WindowStack.popup(\n\t\t\tzoomToNew ? gridRect : rowRect,\n\t\t\tzoomToNew ? \"New\" : \"Edit\",\n\t\t\tfalse,\n\t\t\t[view],\n\t\t);\n\n\t\tview.editInstance(zoomToBizId, viewBinding, _c, true);\n\t},\n\n\t/**\n\t * Adds a new record to the grid.\n\t */\n\tadd: function () {\n\t\tthis.grid.startEditingNew({ bizId: null });\n\t},\n\n\t/**\n\t * Removes a record from the grid.\n\t * @param {string} bizId - the ID of the record to remove.\n\t */\n\tremove: function (bizId) {\n\t\tconst data = this.grid.data;\n\t\tdata.removeAt(data.findIndex(\"bizId\", bizId));\n\t\tthis.grid.deselectAllRecords();\n\t\tthis._eventRowNum = null;\n\t\tthis._eventColumnNum = null;\n\t\tthis._eventRecord = null;\n\t},\n});\n","/**\n * Implements the BizListGrid UI component.\n * Extends BizGrid as defined in datagrid.js.\n */\nisc.ClassFactory.defineClass(\"BizListGrid\", \"BizGrid\");\n\nisc.BizListGrid.addProperties({\n\tsummaryType: \"\", // The type of aggregate function selected\n\ttagId: null, // The tag currently active\n\t_dataSource: null, // Current data source {with setDataSource()}\n\t_toolbar: null, // The toolbar\n\t_advancedFilter: null, // The filter builder\n\t_summaryGrid: null, // The summary grid\n\t_flagForm: null,\n\t_flagDialog: null,\n\n\t// Buttons that are enabled disabled on grid row selection\n\t_newButton: null,\n\t_zoomButton: null,\n\t_popoutButton: null,\n\t_editButton: null,\n\t_pickButton: null,\n\n\t// Buttons that are enable disabled based on other factors\n\t_chartButton: null,\n\n\t// Switches to turn off tool buttons or menu items\n\tshowAdd: true,\n\tshowZoom: true,\n\tshowEdit: true,\n\tshowRemove: true,\n\tshowDeselect: true,\n\tshowExport: true,\n\tshowChart: true,\n\tshowFilter: true,\n\tshowSummary: true,\n\tshowSnap: true,\n\tshowTag: true,\n\n\tautoPopulate: true, // Auto fetch from the data source\n\t_lookup: null, // Lookup control when this is used as a picklist\n});\n\nisc.BizListGrid.addMethods({\n\t/**\n\t * Initialises the widget.\n\t *\n\t * Configuration has 4 properties available:\n\t * 1. ListView\n\t * 2. PickList\n\t * 3. ListGrid\n\t * 4. TreeGrid\n\t *\n\t * @param {Object} config - the configuration object.\n\t */\n\tinitWidget: function (config) {\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\tthis._config = config;\n\n\t\t// Flag dialog configuration\n\t\tthis._flagDialog = isc.Window.create({\n\t\t\tautoCenter: true,\n\t\t\tautoSize: true,\n\t\t\tisModal: true,\n\t\t\tshowModalMask: true,\n\t\t\tcanDragReposition: true,\n\t\t\tcanDragResize: false,\n\t\t\tshowShadow: true,\n\t\t\tshadowSoftness: 10,\n\t\t\tshadowOffset: 0,\n\t\t\ttitle: \"Flag\",\n\t\t\theaderIconDefaults: { src: \"flag.gif\", width: 22, height: 22 },\n\t\t\tshowMaximizeButton: false,\n\t\t\tshowMinimizeButton: false,\n\t\t\tshowHeaderIcon: true,\n\t\t\titems: [\n\t\t\t\tisc.DynamicForm.create({\n\t\t\t\t\tpadding: 0,\n\t\t\t\t\tmargin: 5,\n\t\t\t\t\tuseAllDataSourceFields: false,\n\t\t\t\t\tnumCols: 2,\n\t\t\t\t\titems: [], // This form is built in ListGrid.setDataSource()\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\n\t\t/**\n\t\t * Retrieves the filter criteria based on the current state of the filter UI.\n\t\t * If an advanced filter is selected, it will get the criteria from the advanced filter.\n\t\t * Otherwise, it retrieves the basic filter criteria from the grid's filter editor.\n\t\t *\n\t\t * @returns {Object} - the complete filter criteria.\n\t\t */\n\t\tconst getAllCriteria = () => {\n\t\t\t// Get the list criteria for advanced or header filter as appropriate\n\t\t\tlet criteria = this._advancedFilter.toggleButton.selected\n\t\t\t\t? this._advancedFilter.getCriteria()\n\t\t\t\t: this.grid.getFilterEditorCriteria(true);\n\n\t\t\t// Remove _display_ prefix from any criteria\n\t\t\tisc.BizUtil.convertFilterCriteria(criteria);\n\n\t\t\t// If params are defined, ensure they are added to the filter criteria\n\t\t\tif (config?.params) {\n\t\t\t\tcriteria = isc.BizUtil.completeFilterCriteria(\n\t\t\t\t\tcriteria,\n\t\t\t\t\tconfig.params,\n\t\t\t\t\tthis._view,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn criteria;\n\t\t};\n\n\t\t/**\n\t\t * Creates a new menu item with specific properties.\n\t\t * @returns {Object} the new menu item configuration.\n\t\t */\n\t\tconst newItem = {\n\t\t\ttitle: \"New\",\n\t\t\ticon: \"icons/new.png\",\n\n\t\t\t/**\n\t\t\t * Determines if the menu item should be enabled based on certain conditions.\n\t\t\t * @param {Object} target - the target of the action.\n\t\t\t * @param {Object} menu - the menu containing the item.\n\t\t\t * @param {Object} item - the menu item.\n\t\t\t * @returns {boolean} true if the item should be enabled; false otherwise.\n\t\t\t */\n\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\treturn !this._disabled && this.canCreate && this.canAdd;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the click event for the menu item.\n\t\t\t * It checks for unsaved changes and, if no changes exist, initiates a zoom action.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tif (config) {\n\t\t\t\t\tlet contConv = config.contConv || false;\n\n\t\t\t\t\tif (contConv) {\n\t\t\t\t\t\tconst changedOnServer = this._view.gather(false)._changed;\n\t\t\t\t\t\tif (changedOnServer || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\t\tisc.say(\n\t\t\t\t\t\t\t\t`There are unsaved changes in the ${this._view._singular}. Save your changes to the ${this._view._singular} first.`,\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t{ title: \"Unsaved Changes!\" },\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst newParams = {};\n\t\t\t\t\tif (config.params) {\n\t\t\t\t\t\tisc.BizUtil.addFilterRequestParams(\n\t\t\t\t\t\t\tnewParams,\n\t\t\t\t\t\t\tconfig.params,\n\t\t\t\t\t\t\tthis._view,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.zoom(true, contConv, newParams);\n\t\t\t\t} else {\n\t\t\t\t\tthis.zoom(true, false);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t// The zoom item configuration, including the title, icon, and actions for enabling and clicking.\n\t\tthis._zoomItem = {\n\t\t\ttitle: \"Zoom\",\n\t\t\ticon: \"icons/zoom.gif\",\n\n\t\t\t/**\n\t\t\t * Determines if the \"Zoom\" menu item should be enabled based on certain conditions.\n\t\t\t * @param {Object} target - the target of the action.\n\t\t\t * @param {Object} menu - the menu containing the item.\n\t\t\t * @param {Object} item - the menu item.\n\t\t\t * @returns {boolean} true if the item should be enabled; false otherwise.\n\t\t\t */\n\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\treturn this.canZoom && !this.aggregate && this.grid.anySelected();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the click event for the \"Zoom\" menu item.\n\t\t\t * It checks for unsaved changes and, if no changes exist, initiates a zoom action.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tif (config && config.contConv) {\n\t\t\t\t\tconst changedOnServer = this._view.gather(false)._changed;\n\n\t\t\t\t\t// Check for unsaved changes\n\t\t\t\t\tif (changedOnServer || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\tisc.say(\n\t\t\t\t\t\t\t`There are unsaved changes in the ${this._view._singular}. Save your changes to the ${this._view._singular} first.`,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t{ title: \"Unsaved Changes!\" },\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.zoom(false, true); // Trigger zoom action\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.zoom(false, false); // Trigger zoom action without conditions\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t// The popout item configuration, including the title, icon, and actions for enabling and clicking.\n\t\tconst popoutItem = {\n\t\t\ttitle: \"Popout\",\n\t\t\ticon: \"icons/popout.png\",\n\n\t\t\t/**\n\t\t\t * Determines if the \"Popout\" menu item should be enabled based on certain conditions.\n\t\t\t * @param {Object} target - the target of the action.\n\t\t\t * @param {Object} menu - the menu containing the item.\n\t\t\t * @param {Object} item - the menu item.\n\t\t\t * @returns {boolean} true if the item should be enabled; false otherwise.\n\t\t\t */\n\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\treturn (\n\t\t\t\t\tthis.canZoom &&\n\t\t\t\t\t!this.aggregate &&\n\t\t\t\t\t!(config && config.contConv) &&\n\t\t\t\t\tthis.grid.anySelected()\n\t\t\t\t);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the click event for the \"Popout\" menu item.\n\t\t\t * It constructs a URL with event parameters and opens it in a new browser window.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tconst url = `?a=e&m=${this._eventRecord.bizModule}&d=${this._eventRecord.bizDocument}&i=${this._eventRecord.bizId}`;\n\t\t\t\twindow.open(url, \"_blank\").focus();\n\t\t\t},\n\t\t};\n\n\t\t// The edit item configuration, including the title, icon, and actions for enabling and clicking.\n\t\tconst editItem = {\n\t\t\ttitle: \"Edit\",\n\t\t\ticon: \"icons/edit.png\",\n\n\t\t\t/**\n\t\t\t * Determines if the \"Edit\" menu item should be enabled based on certain conditions.\n\t\t\t * @param {Object} target - the target of the action.\n\t\t\t * @param {Object} menu - the menu containing the item.\n\t\t\t * @param {Object} item - the menu item.\n\t\t\t * @returns {boolean} true if the item should be enabled; false otherwise.\n\t\t\t */\n\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\treturn (\n\t\t\t\t\t!this._disabled &&\n\t\t\t\t\tthis.canUpdate &&\n\t\t\t\t\tthis.canEdit &&\n\t\t\t\t\tthis.grid.anySelected()\n\t\t\t\t);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the click event for the \"Edit\" menu item.\n\t\t\t * It saves the grid request properties, checks for unsaved changes, and starts editing.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tif (this.grid.anySelected()) {\n\t\t\t\t\tthis.grid.saveRequestProperties =\n\t\t\t\t\t\tthis.grid.saveRequestProperties || {};\n\t\t\t\t\tthis.grid.saveRequestProperties.params =\n\t\t\t\t\t\tthis.grid.saveRequestProperties.params || {};\n\t\t\t\t\tthis.grid.saveRequestProperties.params._csrf = this._csrf;\n\n\t\t\t\t\t// Ensure that embedded list grids use their parent view's conversation to edit data\n\t\t\t\t\t// in the same way as when zooming in\n\t\t\t\t\tif (this._view) {\n\t\t\t\t\t\t// this is an embedded list grid\n\t\t\t\t\t\tconst instance = this._view.gather(false); // don't validate\n\t\t\t\t\t\tif (config && config.contConv) {\n\t\t\t\t\t\t\tif (instance._changed || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\t\t\tisc.say(\n\t\t\t\t\t\t\t\t\t`There are unsaved changes in the ${this._view._singular}. Save your changes to the ${this._view._singular} first.`,\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t{ title: \"Unsaved Changes!\" },\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.grid.saveRequestProperties.params._cc = \"\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.grid.saveRequestProperties.params._c = instance._c;\n\t\t\t\t\t\tthis.grid.startEditing(this._eventRowNum, this._eventColNum);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete this.grid.saveRequestProperties.params._c;\n\t\t\t\t\t\tthis.grid.startEditing(this._eventRowNum, this._eventColNum);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t// The pick item configuration, including the title, icon, and actions for enabling and clicking.\n\t\tconst pickItem = {\n\t\t\ttitle: \"Pick\",\n\t\t\ticon: \"icons/select.png\",\n\n\t\t\t/**\n\t\t\t * Determines if the \"Pick\" menu item should be enabled based on certain conditions.\n\t\t\t * @param {Object} target - the target of the action.\n\t\t\t * @param {Object} menu - the menu containing the item.\n\t\t\t * @param {Object} item - the menu item.\n\t\t\t * @returns {boolean} true if the item should be enabled; false otherwise.\n\t\t\t */\n\t\t\tenableIf: (target, menu, item) => !this._disabled,\n\n\t\t\t/**\n\t\t\t * Handles the click event for the \"Pick\" menu item.\n\t\t\t * It invokes the pick method with the lookup object.\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tthis.pick(this._lookup);\n\t\t\t},\n\t\t};\n\n\t\t/**\n\t\t * Creates a toolbar button with the specified properties and actions.\n\t\t *\n\t\t * @param {Object} item - the item configuration, which includes the icon, title, and click action.\n\t\t * @param {boolean} isEnabled - whether the button should be enabled initially.\n\t\t * @param {string} tooltip - the tooltip to display when the button is hovered.\n\t\t * @param {Function} onClick - the function to be invoked when the button is clicked.\n\t\t * @returns {Object} the created button object.\n\t\t */\n\t\tconst createToolbarButton = function (item, isEnabled, tooltip, onClick) {\n\t\t\tconst button = isc.BizUtil.createImageButton(\n\t\t\t\titem.icon,\n\t\t\t\tisEnabled,\n\t\t\t\ttooltip,\n\t\t\t\tonClick,\n\t\t\t);\n\t\t\tif (!isEnabled) {\n\t\t\t\tbutton.setDisabled(true);\n\t\t\t}\n\t\t\treturn button;\n\t\t};\n\n\t\t// Create toolbar buttons\n\t\tthis._newButton = createToolbarButton(\n\t\t\tnewItem,\n\t\t\ttrue,\n\t\t\t\"<b>New</b> record.\",\n\t\t\tnewItem.click,\n\t\t);\n\t\tthis._zoomButton = createToolbarButton(\n\t\t\tthis._zoomItem,\n\t\t\ttrue,\n\t\t\t\"<b>Zoom</b> into record.\",\n\t\t\tthis._zoomItem.click,\n\t\t);\n\t\tthis._popoutButton = createToolbarButton(\n\t\t\tpopoutItem,\n\t\t\ttrue,\n\t\t\t\"<b>Popout</b> record.\",\n\t\t\tpopoutItem.click,\n\t\t);\n\t\tthis._editButton = createToolbarButton(\n\t\t\teditItem,\n\t\t\ttrue,\n\t\t\t\"<b>Edit</b> a record inline.\",\n\t\t\teditItem.click,\n\t\t);\n\t\tthis._pickButton = createToolbarButton(\n\t\t\tpickItem,\n\t\t\ttrue,\n\t\t\t\"<b>Pick</b> this record.\",\n\t\t\tpickItem.click,\n\t\t);\n\n\t\t// Disable the zoom, popout, edit, and pick buttons initially\n\t\tthis._zoomButton.setDisabled(true);\n\t\tthis._popoutButton.setDisabled(true);\n\t\tthis._editButton.setDisabled(true);\n\t\tthis._pickButton.setDisabled(true);\n\n\t\t/**\n\t\t * Clears the filter criteria from the grid and the advanced filter.\n\t\t *\n\t\t * @function\n\t\t */\n\t\tconst clearFilter = () => {\n\t\t\tthis.grid.setFilterEditorCriteria({});\n\t\t\tthis._advancedFilter.clearCriteria();\n\t\t\tthis.refresh();\n\t\t};\n\n\t\t/**\n\t\t * Refreshes the current view or grid.\n\t\t *\n\t\t * @function\n\t\t */\n\t\tconst refresh = () => {\n\t\t\tthis.refresh();\n\t\t};\n\n\t\t/**\n\t\t * Configuration for the \"Clear Filter\" item.\n\t\t * @type {Object}\n\t\t */\n\t\tconst clearFilterItem = {\n\t\t\ttitle: \"Clear Filter\",\n\t\t\ticon: \"icons/filter_delete.png\",\n\t\t\tclick: () => {\n\t\t\t\tthis.clearFilter();\n\t\t\t},\n\t\t};\n\n\t\t/**\n\t\t * Configuration for the \"Refresh\" item.\n\t\t * @type {Object}\n\t\t */\n\t\tconst refreshItem = {\n\t\t\ttitle: \"Refresh\",\n\t\t\ticon: \"icons/refresh.png\",\n\t\t\tclick: () => {\n\t\t\t\tthis.refresh();\n\t\t\t},\n\t\t};\n\n\t\t/**\n\t\t * Exports data by organizing selected and unselected fields based on their visibility and field state.\n\t\t * It also applies the filter criteria and initiates the export process.\n\t\t *\n\t\t * @function\n\t\t */\n\t\tconst exportData = () => {\n\t\t\t// Get the field names, excluding hidden fields\n\t\t\tconst fieldNames = this._dataSource.getFieldNames(true);\n\t\t\tconst unselectedFields = [\n\t\t\t\t{ name: \"bizFlagComment\", title: \"Flag\", line: 1, width: 100 },\n\t\t\t];\n\t\t\tconst selectedFields = [];\n\n\t\t\t// Retrieve the field state from the grid\n\t\t\tconst fieldState = this.getFieldState();\n\n\t\t\t// Iterate over field names to classify them into selected and unselected fields\n\t\t\tfieldNames.forEach((fieldName, i) => {\n\t\t\t\tif (fieldName !== \"bizTagged\" && fieldName !== \"bizFlagComment\") {\n\t\t\t\t\tconst field = this._dataSource.getField(fieldName);\n\t\t\t\t\tconst dataGridField = this.grid.getField(fieldName);\n\t\t\t\t\tconst align = dataGridField ? dataGridField.align : \"center\";\n\n\t\t\t\t\t// Add field to selected or unselected based on its visibility\n\t\t\t\t\tif (\n\t\t\t\t\t\tfieldState[i] &&\n\t\t\t\t\t\t(fieldState[i].visible === undefined ||\n\t\t\t\t\t\t\tfieldState[i].visible === null ||\n\t\t\t\t\t\t\tfieldState[i].visible)\n\t\t\t\t\t) {\n\t\t\t\t\t\tselectedFields.push({\n\t\t\t\t\t\t\tname: fieldName,\n\t\t\t\t\t\t\ttitle: field.title,\n\t\t\t\t\t\t\tline: 1,\n\t\t\t\t\t\t\twidth: fieldState[i].width,\n\t\t\t\t\t\t\talign: align,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tunselectedFields.push({\n\t\t\t\t\t\t\tname: fieldName,\n\t\t\t\t\t\t\ttitle: field.title,\n\t\t\t\t\t\t\tline: 1,\n\t\t\t\t\t\t\twidth: 100,\n\t\t\t\t\t\t\talign: align,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Get all filter criteria\n\t\t\tconst allCriteria = getAllCriteria();\n\n\t\t\t// Initiate the export with the selected and unselected fields and filter criteria\n\t\t\tisc.ReportDialog.popupExport(\n\t\t\t\tthis._dataSource.ID,\n\t\t\t\tthis._view ? this._view.gather(false)._c : null,\n\t\t\t\tallCriteria,\n\t\t\t\tthis.tagId,\n\t\t\t\tunselectedFields,\n\t\t\t\tselectedFields,\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * Defines an item for exporting data with a conditional prompt based on the number of rows.\n\t\t * If the row count exceeds certain thresholds, a confirmation dialog is shown before proceeding with the export.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tconst exportItem = {\n\t\t\ttitle: \"Export Data...\",\n\t\t\ticon: \"icons/export.png\",\n\t\t\t/**\n\t\t\t * Handles the click event for the export item.\n\t\t\t * Displays a prompt based on the number of rows in the grid before triggering the data export.\n\t\t\t *\n\t\t\t * @function\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tconst count = this.grid.getTotalRows();\n\n\t\t\t\t// Check if row count exceeds thresholds and show confirmation prompt accordingly\n\t\t\t\tif (count > 10000) {\n\t\t\t\t\tisc.ask(\n\t\t\t\t\t\t`There are ${count} rows in this list to export which could take more than 1 minute! Do you want to continue?`,\n\t\t\t\t\t\t(value) => {\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\texportData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else if (count > 1000) {\n\t\t\t\t\tisc.ask(\n\t\t\t\t\t\t`There are ${count} rows to export which may take a few seconds. Do you want to continue?`,\n\t\t\t\t\t\t(value) => {\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\texportData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\texportData();\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t/**\n\t\t * Collects filter parameters and triggers a chart dialog popup with the specified data.\n\t\t *\n\t\t * @function\n\t\t */\n\t\tconst chartData = () => {\n\t\t\t// Get all filter criteria\n\t\t\tconst allCriteria = getAllCriteria();\n\n\t\t\t// Trigger the chart dialog popup with the necessary parameters\n\t\t\tisc.ChartDialog.popupChart(\n\t\t\t\tthis._dataSource, // Data source for the chart\n\t\t\t\tthis._view ? this._view.gather(false)._c : null, // View criteria, if available\n\t\t\t\tallCriteria, // Filter criteria\n\t\t\t\tthis.tagId, // Tag ID for the data\n\t\t\t\tthis._dataSource.fields, // Data source fields\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * Chart data item configuration for the toolbar.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tconst chartItem = {\n\t\t\ttitle: \"Chart Data...\",\n\t\t\ticon: \"icons/chart.png\",\n\n\t\t\t/**\n\t\t\t * Determines if the chart item should be enabled based on the data source and configuration.\n\t\t\t * It is enabled if the data source exists, is not a tree, and the data source ID does not contain '__'.\n\t\t\t *\n\t\t\t * @param {Object} target - the target of the menu item.\n\t\t\t * @param {Object} menu - the menu to which this item belongs.\n\t\t\t * @param {Object} item - the chart item itself.\n\t\t\t * @returns {boolean} - whether the item should be enabled.\n\t\t\t */\n\t\t\tenableIf: (target, menu, item) => {\n\t\t\t\treturn (\n\t\t\t\t\tthis._dataSource &&\n\t\t\t\t\t!this._config.isTree &&\n\t\t\t\t\t!this._dataSource.ID.includes(\"__\")\n\t\t\t\t);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the click event for the chart item. It shows a confirmation dialog based on the number of rows\n\t\t\t * to be charted, and if confirmed, triggers the charting functionality.\n\t\t\t *\n\t\t\t * @function\n\t\t\t */\n\t\t\tclick: () => {\n\t\t\t\tconst count = this.grid.getTotalRows();\n\n\t\t\t\t// Display a confirmation dialog based on the number of rows\n\t\t\t\tif (count > 10000) {\n\t\t\t\t\tisc.ask(\n\t\t\t\t\t\t`There are ${count} rows in this list to chart which could take more than 1 minute!  Do you want to continue?`,\n\t\t\t\t\t\t(value) => {\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\tchartData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else if (count > 1000) {\n\t\t\t\t\tisc.ask(\n\t\t\t\t\t\t`There are ${count} rows to chart which may take a few seconds.  Do you want to continue?`,\n\t\t\t\t\t\t(value) => {\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\tchartData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tchartData();\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t// Create chart button\n\t\tthis._chartButton = createToolbarButton(\n\t\t\tchartItem,\n\t\t\ttrue,\n\t\t\t\"<b>Chart</b> this data.\",\n\t\t\tchartItem.click,\n\t\t);\n\t\tthis._chartButton.setDisabled(true); // Disable initially\n\n\t\tlet contextMenuData = config && config.isPickList ? [pickItem] : [];\n\t\tif (this.showAdd) {\n\t\t\tcontextMenuData.add(newItem);\n\t\t}\n\t\tif (this.showZoom) {\n\t\t\tcontextMenuData.add(this._zoomItem);\n\t\t\tcontextMenuData.add(popoutItem);\n\t\t}\n\t\tif (this.showEdit) {\n\t\t\tcontextMenuData.add(editItem);\n\t\t}\n\t\tif (this.showRemove) {\n\t\t\tcontextMenuData.add(this.deleteSelectionItem);\n\t\t}\n\t\tif (contextMenuData.length > 0) {\n\t\t\tcontextMenuData.add({ isSeparator: true });\n\t\t}\n\t\tif (this.showDeselect) {\n\t\t\tcontextMenuData.add(this.clearSelectionItem);\n\t\t}\n\t\tif (this.showFilter) {\n\t\t\tif (!this._config.isTree) {\n\t\t\t\tcontextMenuData.add(clearFilterItem);\n\t\t\t}\n\t\t}\n\t\tcontextMenuData.add(refreshItem);\n\t\tif (this.showExport || this.showChart) {\n\t\t\tcontextMenuData.add({ isSeparator: true });\n\t\t\tif (this.showExport) {\n\t\t\t\tcontextMenuData.add(exportItem);\n\t\t\t}\n\t\t\tif (this.showChart) {\n\t\t\t\tcontextMenuData.add(chartItem);\n\t\t\t}\n\t\t}\n\n\t\t// Create the context menu of the BizListGrid\n\t\tthis._contextMenu = isc.Menu.create({\n\t\t\tshowShadow: true,\n\t\t\tshadowDepth: 10,\n\t\t\tdata: contextMenuData,\n\t\t});\n\n\t\t// Initialize the advanced filter with configuration\n\t\tthis._advancedFilter = isc.AdvancedFilter.create({\n\t\t\tfilterableComponent: this,\n\t\t\tfilterableComponentConfig: config,\n\t\t});\n\n\t\t/**\n\t\t * Binds the click event of the toggle button to trigger the `toggleButtonClick` method of the advanced filter instance.\n\t\t */\n\t\tthis._advancedFilter.toggleButton.click = () => {\n\t\t\tthis._advancedFilter.toggleButtonClick();\n\t\t};\n\n\t\t// Create and initialize the snap menu for the BizListGrid\n\t\tthis._snapMenu = isc.Menu.create({\n\t\t\tshowShadow: true,\n\t\t\tshadowDepth: 10,\n\t\t\tcanSelectParentItems: true,\n\t\t\tdata: [],\n\t\t});\n\n\t\t/**\n\t\t * Creates and initializes the Snap Menu button with associated functionality.\n\t\t */\n\t\tthis._snapMenuButton = isc.ToolStripMenuButton.create({\n\t\t\tautoFit: true, // Automatically adjusts the button size to fit the title and icon\n\t\t\tpadding: 3, // Padding around the content inside the button\n\t\t\ttitle: \"No Snapshot\", // The title displayed on the button\n\t\t\tmenu: this._snapMenu, // The associated menu for the button\n\n\t\t\t/**\n\t\t\t * Handler for the click event. Sends an RPC request to fetch snapshot data and populate the menu.\n\t\t\t *\n\t\t\t * @param {Object} args - arguments passed to the click handler.\n\t\t\t */\n\t\t\tclick: function () {\n\t\t\t\tconst params = {\n\t\t\t\t\ta: \"L\",\n\t\t\t\t\td: me._dataSource.ID,\n\t\t\t\t\tt: \"sc\",\n\t\t\t\t\t_csrf: me._csrf,\n\t\t\t\t};\n\t\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\t\tshowPrompt: false,\n\t\t\t\t\tevalResult: true,\n\t\t\t\t\tuseSimpleHttp: true,\n\t\t\t\t\thttpMethod: \"GET\",\n\t\t\t\t\tparams: params,\n\t\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smartsnap\",\n\t\t\t\t\tcallback: function (rpcResponse, data, rpcRequest) {\n\t\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t\t// success\n\t\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\t\tme._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t\t\t// Build the menu dynamically based on the fetched data\n\t\t\t\t\t\t\tconst menu = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: \"New Snapshot\",\n\t\t\t\t\t\t\t\t\ticon: \"icons/snap_add.png\",\n\t\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t\tme._snapMenuButton._newSnap();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{ isSeparator: true },\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: \"No Snapshot\",\n\t\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t\tme._snapMenuButton._setSnap(null);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\t// Populate menu with snapshots if data exists\n\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\tfor (let i = 0, l = data.length; i < l; i++) {\n\t\t\t\t\t\t\t\t\tmenu.add({ isSeparator: true });\n\t\t\t\t\t\t\t\t\tconst snap = data[i];\n\t\t\t\t\t\t\t\t\tconst enabled = me.snapId == snap.bizId;\n\t\t\t\t\t\t\t\t\tconst entry = {\n\t\t\t\t\t\t\t\t\t\ttitle: snap.name,\n\t\t\t\t\t\t\t\t\t\ticon: \"icons/snap.png\",\n\t\t\t\t\t\t\t\t\t\tclick:\n\t\t\t\t\t\t\t\t\t\t\tme._snapMenuButton.ID +\n\t\t\t\t\t\t\t\t\t\t\t\"._setSnap('\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.bizId +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.name +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(snap.snapshot.criteria) +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.snapshot.advancedCriteriaStyle +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.snapshot.fieldState +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.snapshot.sortState +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.snapshot.groupState +\n\t\t\t\t\t\t\t\t\t\t\t\"','\" +\n\t\t\t\t\t\t\t\t\t\t\tsnap.snapshot.summaryType +\n\t\t\t\t\t\t\t\t\t\t\t\"')\",\n\t\t\t\t\t\t\t\t\t\tsubmenu: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Update Snapshot\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t(enabled ? \"\" : \" (Select the Snapshot first)\"),\n\t\t\t\t\t\t\t\t\t\t\t\ticon: \"icons/snap_edit.png\",\n\t\t\t\t\t\t\t\t\t\t\t\tclick:\n\t\t\t\t\t\t\t\t\t\t\t\t\tme._snapMenuButton.ID +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"._updateSnap('\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\tsnap.bizId +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"')\",\n\t\t\t\t\t\t\t\t\t\t\t\tenabled: enabled,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Delete Snapshot\",\n\t\t\t\t\t\t\t\t\t\t\t\ticon: \"icons/snap_delete.png\",\n\t\t\t\t\t\t\t\t\t\t\t\tclick:\n\t\t\t\t\t\t\t\t\t\t\t\t\tme._snapMenuButton.ID +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"._deleteSnap('\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\tsnap.bizId +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"')\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tmenu.add(entry);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tme._snapMenu.setData(menu);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\t// Call the Super class click handler\n\t\t\t\tthis.Super(\"click\", arguments);\n\t\t\t},\n\t\t});\n\n\t\t/**\n\t\t * Creates a new Snapshot by prompting the user to enter a name.\n\t\t *\n\t\t * @function\n\t\t */\n\t\tthis._snapMenuButton._newSnap = () => {\n\t\t\t// Prompt the user to enter a snapshot name\n\t\t\tisc.askForValue(\n\t\t\t\t\"Enter the new Snapshot name\",\n\t\t\t\t(value) => {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\t// Prepare the parameters for the RPC request\n\t\t\t\t\t\tconst params = {\n\t\t\t\t\t\t\ta: \"N\",\n\t\t\t\t\t\t\tn: value,\n\t\t\t\t\t\t\td: this._dataSource.ID,\n\t\t\t\t\t\t\tt: \"sc\",\n\t\t\t\t\t\t\t_csrf: this._csrf,\n\t\t\t\t\t\t\ts: {\n\t\t\t\t\t\t\t\tcriteria: this._advancedFilter.toggleButton.selected\n\t\t\t\t\t\t\t\t\t? this._advancedFilter.getCriteria()\n\t\t\t\t\t\t\t\t\t: this.grid.getFilterEditorCriteria(true),\n\t\t\t\t\t\t\t\tadvancedCriteriaStyle: this._advancedFilter.getStyle(),\n\t\t\t\t\t\t\t\tfieldState: this.grid.getFieldState(),\n\t\t\t\t\t\t\t\tsortState: this.grid.getSortState(),\n\t\t\t\t\t\t\t\tgroupState: this.grid.getGroupState(),\n\t\t\t\t\t\t\t\tsummaryType: this.summaryType,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Send the RPC request to create the new snapshot\n\t\t\t\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\t\t\t\tshowPrompt: true,\n\t\t\t\t\t\t\tevalResult: true,\n\t\t\t\t\t\t\tuseSimpleHttp: true,\n\t\t\t\t\t\t\thttpMethod: \"POST\",\n\t\t\t\t\t\t\tparams: params,\n\t\t\t\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smartsnap\",\n\t\t\t\t\t\t\tcallback: (rpcResponse, data, rpcRequest) => {\n\t\t\t\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t\t\t\t// success\n\t\t\t\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\t\t\t\tthis._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t\t\t\t\t// Update the snapId and menu button title\n\t\t\t\t\t\t\t\t\tthis.snapId = data.bizId;\n\t\t\t\t\t\t\t\t\tthis._snapMenuButton.setTitle(value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ width: 300 },\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * Sets the snapshot configuration for the grid and updates the UI accordingly.\n\t\t *\n\t\t * @param {string} snapId - the ID of the snapshot to be applied.\n\t\t * @param {string} title - the title of the snapshot.\n\t\t * @param {string} criteria - the criteria in JSON format to be applied to the filter.\n\t\t * @param {string} advancedCriteriaStyle - the style for advanced criteria.\n\t\t * @param {object} fieldState - the field state to be applied to the grid.\n\t\t * @param {object} sortState - the sort state to be applied to the grid.\n\t\t * @param {object} groupState - the group state to be applied to the grid.\n\t\t * @param {string} summaryType - the summary type to be used in the grid.\n\t\t */\n\t\tthis._snapMenuButton._setSnap = (\n\t\t\tsnapId,\n\t\t\ttitle,\n\t\t\tcriteria,\n\t\t\tadvancedCriteriaStyle,\n\t\t\tfieldState,\n\t\t\tsortState,\n\t\t\tgroupState,\n\t\t\tsummaryType,\n\t\t) => {\n\t\t\t// Set the snapshot ID and update the title\n\t\t\tthis.snapId = snapId;\n\t\t\tthis._snapMenuButton.setTitle(title ? title : \"No Snapshot\");\n\n\t\t\t// Parse criteria if defined, or set as an empty object\n\t\t\tcriteria = criteria ? JSON.parse(criteria) : {};\n\n\t\t\t// Handle advanced criteria\n\t\t\tif (criteria.operator) {\n\t\t\t\tthis._advancedFilter.toggleButton.select();\n\t\t\t\tthis._advancedFilter.toggleButtonClick();\n\t\t\t\tthis._advancedFilter.setStyle(\n\t\t\t\t\tadvancedCriteriaStyle ? advancedCriteriaStyle : \"radio\",\n\t\t\t\t);\n\n\t\t\t\t// Clear the filter and apply advanced criteria\n\t\t\t\tthis.grid.setFilterEditorCriteria({});\n\t\t\t\tthis._advancedFilter.setCriteria(criteria);\n\t\t\t} else {\n\t\t\t\t// Clear the criteria for simple filtering\n\t\t\t\tthis._advancedFilter.clearCriteria();\n\t\t\t\tthis._advancedFilter.toggleButton.deselect();\n\t\t\t\tthis._advancedFilter.toggleButtonClick();\n\n\t\t\t\t// Apply simple filter criteria\n\t\t\t\tthis.grid.setFilterEditorCriteria({});\n\t\t\t\tthis.grid.setFilterEditorCriteria(criteria);\n\t\t\t\tthis.grid.setCriteria({});\n\t\t\t\tthis.grid.setFilterEditorCriteria(criteria);\n\t\t\t}\n\n\t\t\t// Apply field, sort, and group states (handling undefined cases)\n\t\t\tthis.grid.setFieldState(fieldState || null);\n\t\t\tthis.grid.setSortState(sortState || null);\n\t\t\tthis.grid.setGroupState(groupState || null);\n\n\t\t\t// Set the summary type and apply it to the summary grid\n\t\t\tthis.summaryType = summaryType || \"\";\n\t\t\tthis._summaryGrid.data[0].bizFlagComment = this.summaryType;\n\n\t\t\t// Refresh the grid to apply all changes\n\t\t\tthis.refresh();\n\t\t};\n\n\t\t/**\n\t\t * Updates the snapshot configuration for the grid based on the provided snapshot ID.\n\t\t * Sends an RPC request to update the snapshot and applies the associated settings.\n\t\t *\n\t\t * @param {string} snapId - the ID of the snapshot to be updated.\n\t\t */\n\t\tthis._snapMenuButton._updateSnap = (snapId) => {\n\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\tshowPrompt: true,\n\t\t\t\tevalResult: true,\n\t\t\t\tuseSimpleHttp: true,\n\t\t\t\thttpMethod: \"POST\",\n\t\t\t\tparams: {\n\t\t\t\t\ta: \"U\",\n\t\t\t\t\ti: snapId,\n\t\t\t\t\tt: \"sc\",\n\t\t\t\t\t_csrf: this._csrf,\n\t\t\t\t\ts: {\n\t\t\t\t\t\tcriteria: this._advancedFilter.toggleButton.selected\n\t\t\t\t\t\t\t? this._advancedFilter.getCriteria()\n\t\t\t\t\t\t\t: this.grid.getFilterEditorCriteria(true),\n\t\t\t\t\t\tadvancedCriteriaStyle: this._advancedFilter.getStyle(),\n\t\t\t\t\t\tfieldState: this.grid.getFieldState(),\n\t\t\t\t\t\tsortState: this.grid.getSortState(),\n\t\t\t\t\t\tgroupState: this.grid.getGroupState(),\n\t\t\t\t\t\tsummaryType: this.summaryType,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smartsnap\",\n\t\t\t\tcallback: (rpcResponse, data, rpcRequest) => {\n\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t// Success\n\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\tthis._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Deletes the snapshot identified by the given snapshot ID.\n\t\t *\n\t\t * @param {string} snapId - the ID of the snapshot to be deleted.\n\t\t */\n\t\tthis._snapMenuButton._deleteSnap = (snapId) => {\n\t\t\tisc.ask(\"Do you want to delete this Snapshot?\", (value) => {\n\t\t\t\tif (value) {\n\t\t\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\t\t\tshowPrompt: true,\n\t\t\t\t\t\tevalResult: true,\n\t\t\t\t\t\tuseSimpleHttp: true,\n\t\t\t\t\t\thttpMethod: \"POST\",\n\t\t\t\t\t\tparams: { a: \"D\", i: snapId, _csrf: this._csrf },\n\t\t\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smartsnap\",\n\t\t\t\t\t\tcallback: (rpcResponse, data, rpcRequest) => {\n\t\t\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t\t\t// success\n\t\t\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\t\t\tthis._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t\t\t\t// Reset selected snapshot (if it was selected before deletion)\n\t\t\t\t\t\t\t\tif (this.snapId === snapId) {\n\t\t\t\t\t\t\t\t\tthis._snapMenuButton._setSnap(null);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Clears the currently selected snapshot.\n\t\t */\n\t\tthis._clearSnap = () => {\n\t\t\tthis.snapId = null;\n\t\t\tthis._snapMenuButton.setTitle(\"No Snapshot\");\n\t\t};\n\n\t\t// Create and initialise the the tags menu in the BizListGrid\n\t\tthis._tagsMenu = isc.Menu.create({\n\t\t\tshowShadow: true,\n\t\t\tshadowDepth: 10,\n\t\t\tcanSelectParentItems: true,\n\t\t\tdata: [],\n\t\t});\n\n\t\t// Create and initialise the the tags menu button in the BizListGrid\n\t\tthis._tagsMenuButton = isc.ToolStripMenuButton.create({\n\t\t\tautoFit: true,\n\t\t\tpadding: 3,\n\t\t\ttitle: \"No Tag\",\n\t\t\tmenu: this._tagsMenu,\n\t\t\tclick: function () {\n\t\t\t\tconst params = {\n\t\t\t\t\ta: \"L\",\n\t\t\t\t\tID: me._tagsMenuButton.ID,\n\t\t\t\t\t_csrf: me._csrf,\n\t\t\t\t};\n\n\t\t\t\t// Add tagId to parameters if it exists\n\t\t\t\tif (me.tagId) {\n\t\t\t\t\tparams.t = me.tagId;\n\t\t\t\t}\n\n\t\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\t\tshowPrompt: false,\n\t\t\t\t\tevalResult: true,\n\t\t\t\t\tuseSimpleHttp: true,\n\t\t\t\t\thttpMethod: \"POST\",\n\t\t\t\t\tparams: params,\n\t\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smarttag\",\n\t\t\t\t\tcallback: function (rpcResponse, data, rpcRequest) {\n\t\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t\t// success\n\t\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\t\tme._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\t\tme._tagsMenu.setData(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\t// Call the superclass click method\n\t\t\t\tthis.Super(\"click\", arguments);\n\t\t\t},\n\t\t});\n\n\t\t/**\n\t\t * Prompts the user to enter a new tag name, and then sends a request to create the new tag.\n\t\t * On successful creation, updates the tag menu button title and refreshes the page.\n\t\t *\n\t\t * @function\n\t\t */\n\t\tthis._tagsMenuButton.newTag = () => {\n\t\t\t// Prompt the user to enter a new tag name\n\t\t\tisc.askForValue(\n\t\t\t\t\"Enter the new tag name\",\n\t\t\t\t(value) => {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\t\t\t\tshowPrompt: true,\n\t\t\t\t\t\t\tevalResult: true,\n\t\t\t\t\t\t\tuseSimpleHttp: true,\n\t\t\t\t\t\t\thttpMethod: \"POST\",\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\ta: \"N\",\n\t\t\t\t\t\t\t\tn: value,\n\t\t\t\t\t\t\t\tID: this._tagsMenuButton.ID,\n\t\t\t\t\t\t\t\t_csrf: this._csrf,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smarttag\",\n\t\t\t\t\t\t\tcallback: (rpcResponse, data) => {\n\t\t\t\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t\t\t\t// success\n\t\t\t\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\t\t\t\tthis._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t\t\t\t\tthis.tagId = data.bizId;\n\t\t\t\t\t\t\t\t\tthis._tagsMenuButton.setTitle(value);\n\t\t\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ width: 300 },\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * Sets the tag ID and title for the tag menu button, and refreshes the page.\n\t\t *\n\t\t * @function\n\t\t * @name _tagsMenuButton.setTag\n\t\t * @param {string} tagId - the ID of the tag to set.\n\t\t * @param {string} title - the title of the tag to set.\n\t\t */\n\t\tthis._tagsMenuButton.setTag = (tagId, title) => {\n\t\t\t// Set the tag ID and update the title of the tags menu button\n\t\t\tthis.tagId = tagId;\n\t\t\tthis._tagsMenuButton.setTitle(title);\n\n\t\t\t// Refresh the UI to reflect the changes\n\t\t\tthis.refresh();\n\t\t};\n\n\t\t/**\n\t\t * Performs various operations on tags, such as clearing, deleting, tagging, and untagging.\n\t\t *\n\t\t * @function\n\t\t * @name _tagsMenuButton.tagOp\n\t\t * @param {string} tagId - the ID of the tag to operate on.\n\t\t * @param {string} action - the action to perform on the tag. Possible actions:\n\t\t *   - 'L' for listing all tags.\n\t\t *   - 'T' for tagging all items in the list.\n\t\t *   - 'U' for untagging all items in the list.\n\t\t *   - 'C' for clearing all tagged data in the tag.\n\t\t *   - 'N' for creating a new tag.\n\t\t *   - 'D' for deleting an existing tag.\n\t\t */\n\t\tthis._tagsMenuButton.tagOp = (tagId, action) => {\n\t\t\tconst askConfirmation = (message, callback) => {\n\t\t\t\tisc.ask(message, (value) => {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tswitch (action) {\n\t\t\t\tcase \"C\": // Clear\n\t\t\t\t\taskConfirmation(\n\t\t\t\t\t\t\"Do you want to clear all tagged data from this tag?\",\n\t\t\t\t\t\t() => privateTagOp(tagId, action),\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"D\": // Delete\n\t\t\t\t\taskConfirmation(\"Do you want to delete this tag?\", () =>\n\t\t\t\t\t\tprivateTagOp(tagId, action),\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"T\":\n\t\t\t\tcase \"U\": {\n\t\t\t\t\t// Tag/Untag\n\t\t\t\t\tconst rowCount = this.grid.getTotalRows();\n\t\t\t\t\tlet confirmationMessage = `There are ${rowCount} rows to ${action === \"U\" ? \"un\" : \"\"}tag`;\n\n\t\t\t\t\tif (rowCount > 10000) {\n\t\t\t\t\t\tconfirmationMessage +=\n\t\t\t\t\t\t\t\" which could take more than 1 minute! Do you want to continue?\";\n\t\t\t\t\t} else if (rowCount > 1000) {\n\t\t\t\t\t\tconfirmationMessage +=\n\t\t\t\t\t\t\t\" which may take a few seconds. Do you want to continue?\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprivateTagOp(tagId, action);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\taskConfirmation(confirmationMessage, () =>\n\t\t\t\t\t\tprivateTagOp(tagId, action),\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tprivateTagOp(tagId, action);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Performs an operation on a tag, such as tagging, untagging, or deleting.\n\t\t *\n\t\t * @function\n\t\t * @name privateTagOp\n\t\t * @param {string} tagId - the ID of the tag to operate on.\n\t\t * @param {string} action - the action to perform on the tag. Possible actions:\n\t\t *   - 'T' for tagging.\n\t\t *   - 'U' for untagging.\n\t\t *   - 'D' for deleting the tag.\n\t\t */\n\t\tconst privateTagOp = (tagId, action) => {\n\t\t\tconst params = {\n\t\t\t\ta: action,\n\t\t\t\tt: tagId,\n\t\t\t\t_csrf: this._csrf,\n\t\t\t};\n\n\t\t\t// Add criteria for 'T' (tag) or 'U' (untag) actions\n\t\t\tif ([\"T\", \"U\"].includes(action)) {\n\t\t\t\tparams.d = this._dataSource.ID;\n\t\t\t\tconst criteria = getAllCriteria();\n\t\t\t\tparams.c = criteria;\n\n\t\t\t\t// Include view-specific criteria if available\n\t\t\t\tif (this._view) {\n\t\t\t\t\tparams._c = this._view.gather(false)._c;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tisc.RPCManager.sendRequest({\n\t\t\t\tshowPrompt: true,\n\t\t\t\tevalResult: true,\n\t\t\t\tuseSimpleHttp: true,\n\t\t\t\thttpMethod: \"POST\",\n\t\t\t\tparams: params,\n\t\t\t\tactionURL: SKYVE.Util.CONTEXT_URL + \"smarttag\",\n\t\t\t\tcallback: (rpcResponse, data) => {\n\t\t\t\t\tif (rpcResponse.status >= 0) {\n\t\t\t\t\t\t// Success\n\t\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\t\tthis._csrf = rpcResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t\t// If deleting the tag, reset the tag menu button title\n\t\t\t\t\t\tif (action === \"D\") {\n\t\t\t\t\t\t\tthis._tagsMenuButton.setTag(null, \"No Tag\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t};\n\n\t\t// Configure the toolbar with buttons based on visibility settings\n\t\tconst toolStripMembers =\n\t\t\tconfig && config.isPickList ? [me._pickButton] : [];\n\t\tif (this.showAdd) {\n\t\t\ttoolStripMembers.add(this._newButton);\n\t\t}\n\t\tif (this.showZoom) {\n\t\t\ttoolStripMembers.add(this._zoomButton);\n\t\t\ttoolStripMembers.add(this._popoutButton);\n\t\t}\n\t\tif (this.showEdit) {\n\t\t\ttoolStripMembers.add(this._editButton);\n\t\t}\n\t\tif (this.showRemove) {\n\t\t\ttoolStripMembers.add(this.deleteSelectionButton);\n\t\t}\n\t\tif (toolStripMembers.length > 0) {\n\t\t\ttoolStripMembers.add(\"separator\");\n\t\t}\n\t\tif (this.showDeselect) {\n\t\t\ttoolStripMembers.add(\n\t\t\t\tisc.BizUtil.createImageButton(\n\t\t\t\t\tthis.clearSelectionItem.icon,\n\t\t\t\t\tfalse,\n\t\t\t\t\t\"<b>Deselect</b> all.\",\n\t\t\t\t\tthis.clearSelectionItem.click,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t\tif (this.showFilter) {\n\t\t\tif (!this._config.isTree) {\n\t\t\t\ttoolStripMembers.add(\n\t\t\t\t\tisc.BizUtil.createImageButton(\n\t\t\t\t\t\tclearFilterItem.icon,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\"<b>Clear filter</b> criteria.\",\n\t\t\t\t\t\tclearFilterItem.click,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\ttoolStripMembers.add(\n\t\t\tisc.BizUtil.createImageButton(\n\t\t\t\trefreshItem.icon,\n\t\t\t\tfalse,\n\t\t\t\t\"<b>Refresh</b> table data.\",\n\t\t\t\trefreshItem.click,\n\t\t\t),\n\t\t);\n\t\tif (this.showFilter) {\n\t\t\tif (!this._config.isTree) {\n\t\t\t\ttoolStripMembers.addList([\n\t\t\t\t\t\"separator\",\n\t\t\t\t\tthis._advancedFilter.toggleButton,\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\t\tif (!config || !config.isPickList) {\n\t\t\tif (this.showExport || this.showChart) {\n\t\t\t\ttoolStripMembers.add(\"separator\");\n\t\t\t\tif (this.showExport) {\n\t\t\t\t\ttoolStripMembers.add(\n\t\t\t\t\t\tisc.BizUtil.createImageButton(\n\t\t\t\t\t\t\texportItem.icon,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\"<b>Export</b> table data.\",\n\t\t\t\t\t\t\texportItem.click,\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (this.showChart) {\n\t\t\t\t\ttoolStripMembers.add(this._chartButton);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.showSnap) {\n\t\t\t\ttoolStripMembers.addList([\n\t\t\t\t\t\"separator\",\n\t\t\t\t\tisc.Label.create({\n\t\t\t\t\t\twidth: 60,\n\t\t\t\t\t\tcontents: \"Snapshot:\",\n\t\t\t\t\t}),\n\t\t\t\t\tthis._snapMenuButton,\n\t\t\t\t]);\n\t\t\t}\n\t\t\tif (this.showTag) {\n\t\t\t\ttoolStripMembers.addList([\n\t\t\t\t\t\"separator\",\n\t\t\t\t\tisc.Label.create({\n\t\t\t\t\t\twidth: 30,\n\t\t\t\t\t\tcontents: \"Tag:\",\n\t\t\t\t\t}),\n\t\t\t\t\tthis._tagsMenuButton,\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\n\t\t// Create the toolbar with the configured members\n\t\tthis._toolbar = isc.ToolStrip.create({\n\t\t\tmembersMargin: 2,\n\t\t\tlayoutMargin: 2,\n\t\t\twidth: \"100%\",\n\t\t\toverflow: \"hidden\",\n\t\t\tmembers: toolStripMembers,\n\t\t});\n\n\t\t// Configure the summary grid for the toolbar\n\t\tthis._summaryGrid = isc.ListGrid.create({\n\t\t\teditByCell: true,\n\t\t\tcanEditCell: function (rowNum, colNum) {\n\t\t\t\treturn colNum === 0;\n\t\t\t},\n\t\t\trowClick: function () {\n\t\t\t\tthis.selectRecord(0, false);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\trowDoubleClick: function () {\n\t\t\t\tthis.selectRecord(0, false);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\trowContextClick: function () {\n\t\t\t\tthis.selectRecord(0, false);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\theight: 28,\n\t\t\tleaveScrollbarGap: true,\n\t\t\tautoFetchData: false,\n\t\t\tautoFitData: null,\n\t\t\tshowHeader: false,\n\t\t\tshowEmptyMessage: false,\n\t\t\tbodyOverflow: \"hidden\",\n\t\t});\n\n\t\t// Add grid and toolbar to view based on configuration\n\t\tif (!this._config.isRepeater) {\n\t\t\tthis.addMember(this._toolbar);\n\t\t\tthis.addMember(this._advancedFilter);\n\t\t}\n\n\t\tthis.addMember(this.grid);\n\n\t\tif (!this._config.isTree) {\n\t\t\tif (!this._config.isRepeater) {\n\t\t\t\tthis.addMember(this._summaryGrid);\n\t\t\t\tif (!this.showSummary) {\n\t\t\t\t\tthis.hideMember(this._summaryGrid);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Assign flag form after grid construction\n\t\tthis._flagForm = this._flagDialog.items[0];\n\n\t\t// Handle grid configuration for forms\n\t\tif (config && config.name) {\n\t\t\tlet grids = this._view._grids[config.name];\n\t\t\tif (!grids) {\n\t\t\t\tgrids = {};\n\t\t\t\tthis._view._grids[config.name] = grids;\n\t\t\t}\n\t\t\tgrids[this.getID()] = this;\n\t\t}\n\t},\n\n\t/**\n\t * Checks if the current object has a data source associated with it.\n\t * This is determined by checking if the grid object is not null.\n\t *\n\t * @function\n\t * @name hasDataSource\n\t * @returns {boolean} true if the grid object is not null, indicating a data source is available; false otherwise.\n\t */\n\thasDataSource: function () {\n\t\treturn this.grid !== null;\n\t},\n\n\t/**\n\t * Creates a grid with configuration and fields.\n\t * @param {Object} config - configuration object for the grid.\n\t * @param {Array} fields - fields to display in the grid.\n\t * @param {boolean} canExpandRecords - flag indicating if records can expand.\n\t */\n\t_createGrid: function (config, fields, canExpandRecords) {\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\tconst gridConfig = {\n\t\t\tautoDraw: true,\n\t\t\theight: \"*\",\n\t\t\tminHeight: 100,\n\t\t\tleaveScrollbarGap: true,\n\t\t\tautoFetchData: false,\n\t\t\tuseAllDataSourceFields: true,\n\t\t\tshowHeader: true,\n\t\t\theaderHeight: 30,\n\t\t\tshowFilterEditor:\n\t\t\t\tthis.showFilter &&\n\t\t\t\t!this._config.isTree &&\n\t\t\t\t!this._config.isRepeater &&\n\t\t\t\t!this.aggregate &&\n\t\t\t\t!this._advancedFilter.toggleButton.selected,\n\t\t\tcanShowFilterEditor: false, // remove header context menu to show/hide filter row\n\t\t\tallowFilterOperators: false, // Remove header context menu to allow selection of operators other than the default\n\t\t\tfilterByCell: false, // Ensure return/enter key or filter button click required to filter\n\t\t\tselectionType: \"single\",\n\t\t\talternateRecordStyles: true,\n\t\t\tcanEdit: true,\n\t\t\tdataSource: this._dataSource,\n\t\t\tfields: fields,\n\t\t\teditEvent: \"none\",\n\t\t\tneverValidate: false,\n\t\t\tvalidateByCell: true,\n\t\t\tsaveByCell: false,\n\t\t\tvalidateOnChange: false,\n\t\t\tcanHover: this._config.isRepeater ? false : true,\n\t\t\tcanReorderFields: false,\n\t\t\tautoSaveEdits: true,\n\t\t\tmodalEditing: true,\n\t\t\tcanFreezeFields: false,\n\t\t\tcontextMenu: this._config.isRepeater ? null : this._contextMenu,\n\t\t\tshowRollOver: true,\n\t\t\trecordEnabledProperty: \"_enabled\",\n\t\t\tcanExpandRecords: canExpandRecords,\n\t\t\texpansionMode: \"details\",\n\n\t\t\t/**\n\t\t\t * Handles row click event.\n\t\t\t * @param {Object} record - the record for the clicked row.\n\t\t\t * @param {number} rowNum - the row number of the clicked row.\n\t\t\t * @param {number} colNum - the column number of the clicked row.\n\t\t\t * @returns {boolean} - returns true to allow normal click processing.\n\t\t\t */\n\t\t\trowClick: function (record, rowNum, colNum) {\n\t\t\t\tif (me.isRepeater) return;\n\t\t\t\tif (record && record.bizId) {\n\t\t\t\t\tme._eventRecord = record;\n\t\t\t\t\tme._eventRowNum = rowNum;\n\t\t\t\t\tme._eventColNum = colNum;\n\t\t\t\t}\n\t\t\t\treturn this.Super(\"rowClick\", arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles row context click event.\n\t\t\t * @param {Object} record - the record for the clicked row.\n\t\t\t * @param {number} rowNum - the row number of the clicked row.\n\t\t\t * @param {number} colNum - the column number of the clicked row.\n\t\t\t * @returns {boolean} - returns true if the context menu should be shown.\n\t\t\t */\n\t\t\trowContextClick: function (record, rowNum, colNum) {\n\t\t\t\tif (me.isRepeater) return false;\n\t\t\t\tif (record && record.bizId) {\n\t\t\t\t\tthis.deselectAllRecords();\n\t\t\t\t\tme._eventRecord = record;\n\t\t\t\t\tme._eventRowNum = rowNum;\n\t\t\t\t\tme._eventColNum = colNum;\n\t\t\t\t\tthis.selectSingleRecord(record);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles row double-click event.\n\t\t\t * @param {Object} record - the record for the clicked row.\n\t\t\t * @param {number} rowNum - the row number of the clicked row.\n\t\t\t * @param {number} colNum - the column number of the clicked row.\n\t\t\t * @returns {boolean} - returns true to allow normal double-click processing.\n\t\t\t */\n\t\t\trowDoubleClick: (record, rowNum, colNum) => {\n\t\t\t\tif (this.isRepeater) return true;\n\t\t\t\tif (record && record.bizId) {\n\t\t\t\t\tthis._eventRecord = record;\n\t\t\t\t\tthis._eventRowNum = rowNum;\n\t\t\t\t\tthis._eventColNum = colNum;\n\n\t\t\t\t\tif (config && config.isPickList) {\n\t\t\t\t\t\tthis.pick(this._lookup);\n\t\t\t\t\t} else if (this.showZoom && this.canZoom && !this.aggregate) {\n\t\t\t\t\t\tif (this._view && this._view._blurry) {\n\t\t\t\t\t\t\tthis._view._blurry = this._zoomItem;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._zoomItem.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Determines whether a record can be selected.\n\t\t\t * @param {Object} record - the record to check for selection.\n\t\t\t * @returns {boolean} - returns true if the record can be selected.\n\t\t\t */\n\t\t\tcanSelectRecord: (record) => !this.isRepeater,\n\n\t\t\t/**\n\t\t\t * Handles the selection change event.\n\t\t\t * @param {Object} record - the selected or deselected record.\n\t\t\t * @param {boolean} state - the selection state (true for selected, false for deselected).\n\t\t\t */\n\t\t\tselectionChanged: function (record, state) {\n\t\t\t\tif (this.anySelected()) {\n\t\t\t\t\tconst zoomDisabled = me.aggregate || !me.canZoom;\n\t\t\t\t\tme._zoomButton.setDisabled(zoomDisabled);\n\t\t\t\t\tme._popoutButton.setDisabled(\n\t\t\t\t\t\tzoomDisabled || (config && config.contConv),\n\t\t\t\t\t);\n\t\t\t\t\tme._editButton.setDisabled(\n\t\t\t\t\t\tme._disabled || !me.canUpdate || !me.canEdit,\n\t\t\t\t\t);\n\t\t\t\t\tme._pickButton.setDisabled(me._disabled);\n\t\t\t\t\tme.deleteSelectionButton.setDisabled(\n\t\t\t\t\t\tme._disabled || !me.canDelete || !me.canRemove,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tme._zoomButton.setDisabled(true);\n\t\t\t\t\tme._popoutButton.setDisabled(true);\n\t\t\t\t\tme._editButton.setDisabled(true);\n\t\t\t\t\tme._pickButton.setDisabled(true);\n\t\t\t\t\tme.deleteSelectionButton.setDisabled(true);\n\t\t\t\t}\n\t\t\t\tme._newButton.setDisabled(me._disabled || !me.canCreate || !me.canAdd);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Updates the selected record binding.\n\t\t\t * @param {Object} record - the selected record.\n\t\t\t * @param {Array} recordList - list of selected records.\n\t\t\t */\n\t\t\tselectionUpdated: (record, recordList) => {\n\t\t\t\tif (this.selectedIdBinding) {\n\t\t\t\t\tif (this.selectedIdTrackChanges) {\n\t\t\t\t\t\tthis._view._vm.setValue(\n\t\t\t\t\t\t\tthis.selectedIdBinding,\n\t\t\t\t\t\t\trecord ? record.bizId : null,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst changes = this._view._vm.valuesHaveChanged();\n\t\t\t\t\t\tthis._view._vm.setValue(\n\t\t\t\t\t\t\tthis.selectedIdBinding,\n\t\t\t\t\t\t\trecord ? record.bizId : null,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (!changes) this._view._vm.rememberValues();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.bizSelected) {\n\t\t\t\t\tif (this.showZoom && this.canZoom && !this.aggregate) {\n\t\t\t\t\t\tif (isc.RPCManager.requestsArePending()) {\n\t\t\t\t\t\t\tif (this._view) {\n\t\t\t\t\t\t\t\tthis._view._blurry = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (this._view) {\n\t\t\t\t\t\t\t\tthis._view._blurry = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.delayCall(\"bizSelected\", [], this.doubleClickDelay);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.bizSelected();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the completion of an edit operation.\n\t\t\t * @param {number} rowNum - the row number of the edited row.\n\t\t\t * @param {number} colNum - the column number of the edited column.\n\t\t\t * @param {Object} newValues - the new values for the edited row.\n\t\t\t * @param {Object} oldValues - the old values for the edited row.\n\t\t\t * @param {Object} editCompletionEvent - the event for edit completion.\n\t\t\t * @param {Object} dsResponse - the response from the data source.\n\t\t\t */\n\t\t\teditComplete: (\n\t\t\t\trowNum,\n\t\t\t\tcolNum,\n\t\t\t\tnewValues,\n\t\t\t\toldValues,\n\t\t\t\teditCompletionEvent,\n\t\t\t\tdsResponse,\n\t\t\t) => {\n\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t// Success\n\t\t\t\t\t// Assign the CSRF Token from the response header\n\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\tif (this.bizEdited) {\n\t\t\t\t\t\tthis.bizEdited();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Customizes the filter data request parameters.\n\t\t\t * @param {Object} criteria - the filter criteria.\n\t\t\t * @param {Function} callback - the callback to call after filtering.\n\t\t\t * @param {Object} requestProperties - the properties for the request.\n\t\t\t */\n\t\t\tfilterData: function (criteria, callback, requestProperties) {\n\t\t\t\tlet result = criteria || {};\n\t\t\t\t\n\t\t\t\trequestProperties = requestProperties || {};\n\t\t\t\trequestProperties.params = requestProperties.params || {};\n\n\t\t\t\tif (me._csrf) requestProperties.params._csrf = me._csrf;\n\n\t\t\t\tif (!config.isTree) {\n\t\t\t\t\trequestProperties.params._summary = me.summaryType;\n\t\t\t\t}\n\n\t\t\t\tif (me.showTag) {\n\t\t\t\t\trequestProperties.params._tagId = me.tagId;\n\t\t\t\t}\n\n\t\t\t\tif (me._view) {\n\t\t\t\t\trequestProperties.params._c = me._view.gather(false)._c;\n\t\t\t\t\tif (me._view._b) {\n\t\t\t\t\t\trequestProperties.params._b = me._view._b;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (config && (config.contConv || config.isPickList)) {\n\t\t\t\t\trequestProperties.params._cc = \"\";\n\t\t\t\t}\n\n\t\t\t\tlet editorCriteria = me._advancedFilter.toggleButton.selected\n\t\t\t\t\t? me._advancedFilter.me()\n\t\t\t\t\t: me.grid.getFilterEditorCriteria(true);\n\t\t\t\tif (!editorCriteria) editorCriteria = {};\n\n\t\t\t\tisc.BizUtil.convertFilterCriteria(result);\n\n\t\t\t\tif (config && config.params) {\n\t\t\t\t\tresult = isc.BizUtil.completeFilterCriteria(\n\t\t\t\t\t\teditorCriteria,\n\t\t\t\t\t\tconfig.params,\n\t\t\t\t\t\tme._view,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.Super(\"filterData\", [result, callback, requestProperties]);\n\n\t\t\t\tif (!me._advancedFilter.toggleButton.selected) {\n\t\t\t\t\tme.grid.setFilterEditorCriteria(editorCriteria);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdataProperties: {\n\t\t\t\t/**\n\t\t\t\t * Transforms the data received from the data source.\n\t\t\t\t * @param {Array} newData - the new data to transform.\n\t\t\t\t * @returns {Array} - the transformed data.\n\t\t\t\t */\n\t\t\t\ttransformData: (newData, dsResponse) => {\n\t\t\t\t\t// Only process for fetch/filter operations with successful response\n\t\t\t\t\tif (\n\t\t\t\t\t\tdsResponse.context?.operationType === \"fetch\" &&\n\t\t\t\t\t\tdsResponse.status === isc.RPCResponse.STATUS_SUCCESS\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Update CSRF token\n\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t\t// Define summary fields configuration\n\t\t\t\t\t\tconst summaryFields = [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"bizFlagComment\",\n\t\t\t\t\t\t\t\ttype: \"enum\",\n\t\t\t\t\t\t\t\tvalueMap: [\"\", \"Count\", \"Avg\", \"Sum\", \"Min\", \"Max\"],\n\t\t\t\t\t\t\t\twidth: 70,\n\t\t\t\t\t\t\t\tchange: (form, item, value) => {\n\t\t\t\t\t\t\t\t\tthis.summaryType = value;\n\t\t\t\t\t\t\t\t\tthis.grid.invalidateCache();\n\t\t\t\t\t\t\t\t\tconst filterCriteria = this._advancedFilter.toggleButton\n\t\t\t\t\t\t\t\t\t\t.selected\n\t\t\t\t\t\t\t\t\t\t? this._advancedFilter.getCriteria()\n\t\t\t\t\t\t\t\t\t\t: this.grid.getFilterEditorCriteria(true);\n\t\t\t\t\t\t\t\t\tthis.grid.filterData(filterCriteria);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t];\n\n\t\t\t\t\t\t// Configure summary fields based on data source fields\n\t\t\t\t\t\tconst fieldNames = this._dataSource.getFieldNames(true);\n\t\t\t\t\t\tsummaryFields.length = fieldNames.length - 1;\n\n\t\t\t\t\t\tfieldNames.forEach((fieldName, i) => {\n\t\t\t\t\t\t\tif (fieldName !== \"bizTagged\" && fieldName !== \"bizFlagComment\") {\n\t\t\t\t\t\t\t\tconst field = this._dataSource.getField(fieldName);\n\t\t\t\t\t\t\t\tlet fieldType = \"float\";\n\t\t\t\t\t\t\t\tlet editorType = null;\n\n\t\t\t\t\t\t\t\tif (this.summaryType === \"Min\" || this.summaryType === \"Max\") {\n\t\t\t\t\t\t\t\t\tfieldType = field.type;\n\t\t\t\t\t\t\t\t\tconst excludedTypes = [\n\t\t\t\t\t\t\t\t\t\t\"comboBox\",\n\t\t\t\t\t\t\t\t\t\t\"enum\",\n\t\t\t\t\t\t\t\t\t\t\"select\",\n\t\t\t\t\t\t\t\t\t\t\"bizLookupDescription\",\n\t\t\t\t\t\t\t\t\t\t\"boolean\",\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\tif (!excludedTypes.includes(fieldType)) {\n\t\t\t\t\t\t\t\t\t\teditorType = field.editorType;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tsummaryFields[i - 1] = {\n\t\t\t\t\t\t\t\t\tname: fieldName,\n\t\t\t\t\t\t\t\t\ttype: fieldType,\n\t\t\t\t\t\t\t\t\teditorType,\n\t\t\t\t\t\t\t\t\tcanEdit: false,\n\t\t\t\t\t\t\t\t\t...(fieldType === \"float\" && {\n\t\t\t\t\t\t\t\t\t\tformatCellValue: (value) =>\n\t\t\t\t\t\t\t\t\t\t\tisc.isA.Boolean(value) ? null : value,\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis._summaryGrid.setFields(summaryFields);\n\n\t\t\t\t\t\t// Extract and set summary data\n\t\t\t\t\t\tconst summaryData = newData.pop();\n\t\t\t\t\t\tthis._summaryGrid.setData([summaryData]);\n\n\t\t\t\t\t\t// Update grid state\n\t\t\t\t\t\tthis.grid.fieldStateChanged();\n\t\t\t\t\t\tthis._summaryGrid.startEditing(0, 0, true);\n\t\t\t\t\t\tthis._summaryGrid.selectRecord(0, false);\n\t\t\t\t\t}\n\t\t\t\t\treturn newData;\n\t\t\t\t},\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Determines if a cell can be edited.\n\t\t\t */\n\t\t\tcanEditCell: function (rowNum, colNum) {\n\t\t\t\tconst baseColumnOffset = me.showTag ? 1 : 0;\n\t\t\t\treturn (\n\t\t\t\t\t!me._disabled &&\n\t\t\t\t\tcolNum > baseColumnOffset &&\n\t\t\t\t\tthis.Super(\"canEditCell\", arguments)\n\t\t\t\t);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Handles the change of a field.\n\t\t\t */\n\t\t\tfieldStateChanged: () => {\n\t\t\t\tconst fieldState = this.getFieldState();\n\n\t\t\t\tif (this.showTag) {\n\t\t\t\t\t// Combine widths for tag and flag columns\n\t\t\t\t\tconst expansionOffset = this.grid.canExpandRecords ? 32 : 0;\n\t\t\t\t\tfieldState[1] = {\n\t\t\t\t\t\tname: \"bizFlagComment\",\n\t\t\t\t\t\twidth: fieldState[0].width + fieldState[1].width + expansionOffset,\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tfieldState[1] = {\n\t\t\t\t\t\tname: \"bizFlagComment\",\n\t\t\t\t\t\twidth: fieldState[1].width + (this.grid.canExpandRecords ? 32 : 0),\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tfieldState.removeAt(0); // Remove bizTagged\n\t\t\t\tthis._summaryGrid.setFieldState(fieldState);\n\t\t\t},\n\n\t\t\tscrolled: () => {\n\t\t\t\tthis._summaryGrid.body?.scrollTo(this.grid.body.getScrollLeft(), 0);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the CSS text for a cell.\n\t\t\t */\n\t\t\tgetCellCSSText: function (record, rowNum, colNum) {\n\t\t\t\tif (record?.bizTagged) {\n\t\t\t\t\treturn \"font-weight:bold;background-color:#B8D1EA;\";\n\t\t\t\t}\n\t\t\t\treturn this.Super(\"getCellCSSText\", arguments);\n\t\t\t},\n\t\t};\n\n\t\t// Configure repeater-specific settings\n\t\tif (config.isRepeater) {\n\t\t\tObject.assign(gridConfig, {\n\t\t\t\tshowRollOver: false,\n\t\t\t\tshowSelectedStyle: false,\n\t\t\t\tshowEmptyMessage: false,\n\t\t\t\tbaseStyle: \"\",\n\t\t\t\tshowHeader: config.showColumnHeaders ?? true,\n\t\t\t\tbodyBackgroundColor: \"white\",\n\t\t\t\t...(!config.showGrid && {\n\t\t\t\t\tborder: \"none\",\n\t\t\t\t\tbodyBackgroundColor: \"#F9F9F9\",\n\t\t\t\t}),\n\t\t\t});\n\t\t}\n\n\t\t// Set empty message for non-auto-populate grids\n\t\tif (!this.autoPopulate) {\n\t\t\tgridConfig.emptyMessage = \"No items shown. Filter the grid.\";\n\t\t}\n\n\t\t// Apply custom cell height if specified\n\t\tif (this.cellHeight) {\n\t\t\tgridConfig.cellHeight = this.cellHeight;\n\t\t}\n\n\t\t// Merge additional grid configuration if provided\n\t\tif (config.gridConfig) {\n\t\t\tObject.assign(gridConfig, config.gridConfig);\n\t\t}\n\n\t\t// Create appropriate grid type based on configuration\n\t\tif (config.isTree) {\n\t\t\t// Configure tree-specific properties\n\t\t\tconst treeConfig = {\n\t\t\t\t...gridConfig,\n\t\t\t\tfolderIcon: null,\n\t\t\t\tloadOnDemand: true,\n\t\t\t\tdataProperties: {\n\t\t\t\t\topenProperty: \"_isOpen\",\n\t\t\t\t\tisFolderProperty: \"_isFolder\",\n\t\t\t\t\tchildrenProperty: \"_children\",\n\t\t\t\t},\n\t\t\t\tdataFetchMode: \"paged\",\n\t\t\t};\n\n\t\t\tthis.grid = isc.TreeGrid.create(treeConfig);\n\t\t} else {\n\t\t\tthis.grid = isc.ListGrid.create(gridConfig);\n\t\t}\n\t},\n\n\t/**\n\t * Disables or enables the component and triggers the selection change on the grid.\n\t * @param {boolean} disabled - flag indicating whether the component should be disabled (true) or enabled (false).\n\t */\n\tsetDisabled: function (disabled) {\n\t\tthis._disabled = disabled;\n\t\tif (this.grid) {\n\t\t\tthis.grid.selectionChanged();\n\t\t}\n\t},\n\n\t/**\n\t * Sets the BizListGrid into pick list mode by updating the lookup, filter parameters, and view.\n\t * @param {Object} lookup - the lookup object containing description and relevant details.\n\t * @param {Object} filterParams - the unprocessed filter parameters to be used for filtering the data.\n\t * @param {Object} view - the view used to process the filter parameters.\n\t */\n\tsetLookup: function (lookup, filterParams, view) {\n\t\tthis._lookup = lookup;\n\t\tthis._config.params = filterParams;\n\t\tthis._view = view;\n\t},\n\n\t/**\n\t * Refreshes the list view by deselecting all records, invalidating the cache,\n\t * applying the appropriate filter criteria, and scrolling to the top row.\n\t */\n\trefresh: function () {\n\t\tconst topRowNum = this.grid.getVisibleRows()[0];\n\n\t\tthis.grid.deselectAllRecords();\n\t\tthis._eventRowNum = null;\n\t\tthis._eventColumnNum = null;\n\t\tthis._eventRecord = null;\n\n\t\t// Invalidate the cache to trigger a refresh of the data\n\t\tthis.grid.invalidateCache();\n\n\t\t// Apply filter criteria, based on the advanced filter toggle state\n\t\tconst filterCriteria = this._advancedFilter.toggleButton.selected\n\t\t\t? this._advancedFilter.getCriteria()\n\t\t\t: this.grid.getFilterEditorCriteria(true);\n\t\tthis.grid.filterData(filterCriteria);\n\n\t\t// Scroll to the top row for the refreshed data\n\t\tthis.grid.scrollToRow(topRowNum, \"top\");\n\t},\n\n\t/**\n\t * Called when a new record is added to a pick list view.\n\t * The pick list view must be refreshed to display the newly added record.\n\t * For other list types, this method does not trigger a rerender as it is invoked by form scatter when the grid is not ready.\n\t */\n\trerender: function () {\n\t\tif (this.isPickList) {\n\t\t\tthis.refresh();\n\t\t}\n\t},\n\n\t/**\n\t * Sets the data source for the component and configures the related grid and form settings.\n\t *\n\t * @param {string} ID - the ID of the data source.\n\t * @param {Object} [menuConfig] - optional configuration passed from the menu. It may override certain defaults.\n\t * @returns {string} the title of the data source.\n\t */\n\tsetDataSource: function (ID, menuConfig) {\n\t\t// Switch off any snapshot selected before\n\t\tthis._clearSnap();\n\n\t\tthis._dataSource = isc.DataSource.get(ID);\n\n\t\tthis.canCreate = this._dataSource.canCreate;\n\t\tthis.canUpdate = this._dataSource.canUpdate;\n\t\tthis.canDelete = this._dataSource.canDelete;\n\t\tthis.aggregate = this._dataSource.aggregate;\n\n\t\tif (this.aggregate) {\n\t\t\tif (!this._config.isRepeater) {\n\t\t\t\tthis.hideMember(this._toolbar);\n\t\t\t\tif (!this._config.isTree) {\n\t\t\t\t\tthis.hideMember(this._summaryGrid);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.canCreate = false;\n\t\t\tthis.canUpdate = false;\n\t\t\tthis.canDelete = false;\n\t\t} else {\n\t\t\tif (!this._config.isRepeater) {\n\t\t\t\tthis.showMember(this._toolbar);\n\n\t\t\t\t// Disable chart if a tree or a model data source\n\t\t\t\tthis._chartButton.setDisabled(\n\t\t\t\t\tthis._config.isTree || this._dataSource.ID.contains(\"__\"),\n\t\t\t\t);\n\n\t\t\t\tif (!this._config.isTree) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.showSummary === undefined ||\n\t\t\t\t\t\tthis.showSummary === null ||\n\t\t\t\t\t\tthis.showSummary\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.showMember(this._summaryGrid);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.hideMember(this._summaryGrid);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (menuConfig) {\n\t\t\t// Set the menu defaults (remember that one instance of BizListGrid is shared for list view)\n\t\t\tthis.autoPopulate = true;\n\n\t\t\t// Override with menu config values if present\n\t\t\tif (menuConfig.autoPopulate !== undefined) {\n\t\t\t\tthis.autoPopulate = menuConfig.autoPopulate;\n\t\t\t}\n\t\t}\n\n\t\tthis.cellHeight = this._dataSource.cellHeight || null;\n\n\t\tconst fields = [];\n\t\tif (this.isRepeater || this.aggregate) {\n\t\t\tfields.add({ name: \"bizTagged\", hidden: true, canHide: false });\n\t\t} else if (this.showTag) {\n\t\t\tfields.add({\n\t\t\t\tname: \"bizTagged\",\n\t\t\t\twidth: 38,\n\t\t\t\talign: \"center\",\n\t\t\t\tcanHide: false,\n\t\t\t\tcanSort: false,\n\t\t\t\tcanToggle: false, // if true, this displays disabled\n\t\t\t\tcanGroupBy: false,\n\t\t\t\tshowHover: false,\n\t\t\t\tignoreKeyboardClicks: true,\n\t\t\t\trecordClick: (\n\t\t\t\t\tviewer,\n\t\t\t\t\trecord,\n\t\t\t\t\trecordNum,\n\t\t\t\t\tfield,\n\t\t\t\t\tfieldNum,\n\t\t\t\t\tvalue,\n\t\t\t\t\trawValue,\n\t\t\t\t\teditedRecord,\n\t\t\t\t) => {\n\t\t\t\t\tif (record && this.canUpdate && this.canEdit) {\n\t\t\t\t\t\tif (this.tagId) {\n\t\t\t\t\t\t\tthis._eventRecord = record;\n\t\t\t\t\t\t\tthis._eventRowNum = recordNum;\n\t\t\t\t\t\t\tthis._eventColNum = fieldNum;\n\t\t\t\t\t\t\trecord.bizTagged = record.bizTagged ? \"UNTAG\" : \"TAG\";\n\t\t\t\t\t\t\tthis.grid.updateData(\n\t\t\t\t\t\t\t\trecord,\n\t\t\t\t\t\t\t\t(dsResponse, data, dsRequest) => {\n\t\t\t\t\t\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tshowPrompt: false,\n\t\t\t\t\t\t\t\t\tparams: { _tagId: this.tagId, _csrf: this._csrf },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tisc.warn(\n\t\t\t\t\t\t\t\t\"Select or create a tag first from the tags menu in the list toolbar\",\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false; // do not allow list grid level record click event to fire\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tfields.add({ name: \"bizTagged\", hidden: true, canHide: false });\n\t\t}\n\n\t\tif (this.isRepeater || this.aggregate) {\n\t\t\tfields.add({ name: \"bizFlagComment\", hidden: true, canHide: false });\n\t\t} else {\n\t\t\tfields.add({\n\t\t\t\tname: \"bizFlagComment\",\n\t\t\t\twidth: !this.showTag && this.showSummary ? 80 : 40,\n\t\t\t\talign: \"center\",\n\t\t\t\tcanHide: false,\n\t\t\t\tignoreKeyboardClicks: true,\n\t\t\t\tformatCellValue: (value, record) =>\n\t\t\t\t\tvalue ? '<img src=\"images/flag.gif\">' : \"\",\n\t\t\t\trecordClick: (\n\t\t\t\t\tviewer,\n\t\t\t\t\trecord,\n\t\t\t\t\trecordNum,\n\t\t\t\t\tfield,\n\t\t\t\t\tfieldNum,\n\t\t\t\t\tvalue,\n\t\t\t\t\trawValue,\n\t\t\t\t\teditedRecord,\n\t\t\t\t) => {\n\t\t\t\t\tif (this.canUpdate && this.canEdit) {\n\t\t\t\t\t\tthis._eventRecord = record;\n\t\t\t\t\t\tthis._eventRowNum = recordNum;\n\t\t\t\t\t\tthis._eventColNum = fieldNum;\n\t\t\t\t\t\tthis._flagForm.editRecord(record);\n\t\t\t\t\t\tthis._flagDialog.show();\n\t\t\t\t\t}\n\t\t\t\t\treturn false; // do not allow list grid level record click event to fire\n\t\t\t\t},\n\t\t\t\thoverHTML: function (record, value, rowNum, colNum, grid) {\n\t\t\t\t\treturn record.bizFlagComment;\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst fieldNames = this._dataSource.getFieldNames(true);\n\t\tlet hasDetailFields = false;\n\t\tlet treeFieldNotSet = true;\n\n\t\tfieldNames.forEach((fieldName) => {\n\t\t\tif (fieldName !== \"bizTagged\" && fieldName !== \"bizFlagComment\") {\n\t\t\t\tconst dsField = this._dataSource.getField(fieldName);\n\t\t\t\tif (!dsField.foreignKey) {\n\t\t\t\t\t// Not the parent FK tree field\n\t\t\t\t\tconst gridField = {\n\t\t\t\t\t\tname: fieldName,\n\t\t\t\t\t\tautoFitWidth: false,\n\t\t\t\t\t\tcanToggle: false,\n\t\t\t\t\t};\n\t\t\t\t\tif (treeFieldNotSet) {\n\t\t\t\t\t\tgridField.treeField = true;\n\t\t\t\t\t\ttreeFieldNotSet = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (dsField.canSave === false) {\n\t\t\t\t\t\tgridField.canEdit = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (!hasDetailFields && dsField.detail) {\n\t\t\t\t\t\thasDetailFields = true;\n\t\t\t\t\t}\n\t\t\t\t\tfields.add(gridField);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._advancedFilter.setDataSource(this._dataSource);\n\n\t\tthis._flagForm.setDataSource(this._dataSource);\n\t\tthis._flagForm.setFields([\n\t\t\t{\n\t\t\t\tname: \"bizFlagComment\",\n\t\t\t\ttype: \"richText\",\n\t\t\t\tcolSpan: 2,\n\t\t\t\theight: 175,\n\t\t\t\tvalidators: [\n\t\t\t\t\t{ type: \"lengthRange\", min: 0, max: 1024, clientOnly: true },\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: \"button\",\n\t\t\t\ttitle: \"Clear\",\n\t\t\t\twidth: 100,\n\t\t\t\talign: \"right\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tclick: () => {\n\t\t\t\t\tconst commentField = this._flagForm.getField(\"bizFlagComment\");\n\t\t\t\t\tif (commentField.getValue() !== \"\") {\n\t\t\t\t\t\tcommentField.setValue(\"\");\n\t\t\t\t\t\tthis._flagForm.saveData(\n\t\t\t\t\t\t\t(dsResponse) => {\n\t\t\t\t\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\t\t\t\tthis._flagForm.reset();\n\t\t\t\t\t\t\t\t\tthis._flagDialog.hide();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ params: { _csrf: this._csrf } },\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: \"button\",\n\t\t\t\ttitle: \"Flag\",\n\t\t\t\twidth: 100,\n\t\t\t\talign: \"left\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: true,\n\t\t\t\tclick: () => {\n\t\t\t\t\tif (this._flagForm.validate(true)) {\n\t\t\t\t\t\tthis._flagForm.saveData(\n\t\t\t\t\t\t\t(dsResponse) => {\n\t\t\t\t\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\t\t\t\tthis._flagForm.reset();\n\t\t\t\t\t\t\t\t\tthis._flagDialog.hide();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ params: { _csrf: this._csrf } },\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t]);\n\n\t\tif (this.grid) {\n\t\t\tthis.removeMember(this.grid);\n\t\t\tthis.grid.destroy();\n\t\t}\n\t\tthis._createGrid(this._config, fields, hasDetailFields);\n\n\t\tif (this._config.isTree || this._config.isRepeater) {\n\t\t\tthis.addMember(this.grid); // Add to the end - no summary row\n\t\t} else {\n\t\t\tthis.addMember(this.grid, this.getMembers().length - 1); // Add before the summary row\n\t\t}\n\n\t\tif (this.rootIdBinding) {\n\t\t\tthis.grid.getDataSource().getField(\"bizParentId\").rootValue =\n\t\t\t\t\"_\" + this._view._vm.getValue(this.rootIdBinding);\n\t\t} else {\n\t\t\tconst bizParentIdField = this.grid\n\t\t\t\t.getDataSource()\n\t\t\t\t.getField(\"bizParentId\");\n\t\t\tif (bizParentIdField) {\n\t\t\t\tbizParentIdField.rootValue = null;\n\t\t\t}\n\t\t}\n\n\t\tif (this.autoPopulate) {\n\t\t\tthis.grid.filterData(\n\t\t\t\tthis._advancedFilter.toggleButton.selected\n\t\t\t\t\t? this._advancedFilter.getCriteria()\n\t\t\t\t\t: this.grid.getFilterEditorCriteria(),\n\t\t\t);\n\t\t}\n\n\t\tthis.grid.selectionChanged(null, false); // Ensure buttons are disabled\n\n\t\treturn this._dataSource.getTitle();\n\t},\n\n\t/**\n\t * Retrieves and sets the field state of the data grid, ensuring all fields have a width defined.\n\t * @returns {Array} the field state, including field names and their corresponding widths.\n\t */\n\tgetFieldState: function () {\n\t\t// Ensure the widths of all fields are set\n\t\tconst fieldState = eval(this.grid.getFieldState());\n\n\t\treturn fieldState.map((field) => {\n\t\t\t// Handle specific fields 'bizTagged' and 'bizFlagComment'\n\t\t\tif (field === \"bizTagged\") {\n\t\t\t\treturn { name: \"bizTagged\", width: 38 };\n\t\t\t}\n\t\t\tif (field === \"bizFlagComment\") {\n\t\t\t\treturn { name: \"bizFlagComment\", width: this.showTag ? 40 : 80 };\n\t\t\t}\n\n\t\t\t// Handle other fields\n\t\t\tif (!field.width) {\n\t\t\t\treturn {\n\t\t\t\t\t...field,\n\t\t\t\t\twidth: this.grid.getFieldWidth(field.name),\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn field;\n\t\t});\n\t},\n\n\t/**\n\t * Navigates to the edit view, either for a new or existing record, based on the specified parameters.\n\t * Handles the conversation continuation logic and ensures the proper context for zooming into the record.\n\t *\n\t * @param {boolean} zoomToNew - indicates whether to navigate to a new record (true) or an existing one (false).\n\t * @param {boolean} contConv - specifies whether to continue the owning view's conversation (true) or start a new one (false).\n\t * @param {Object|null|undefined} newParams - a map of parameter names to expressions to evaluate, can be null or undefined.\n\t */\n\tzoom: function (zoomToNew, contConv, newParams) {\n\t\tconst { grid, _eventRecord, _view, _dataSource } = this;\n\t\tlet module = null;\n\t\tlet document = null;\n\t\tlet bizId = null;\n\n\t\t// Determine module, document, and bizId based on context\n\t\tif (!zoomToNew && _eventRecord) {\n\t\t\tmodule = _eventRecord.bizModule;\n\t\t\tdocument = _eventRecord.bizDocument;\n\t\t\tbizId = _eventRecord.bizId;\n\t\t} else {\n\t\t\tconst dotIndex = grid.dataSource.modoc.indexOf(\".\");\n\t\t\tmodule = grid.dataSource.modoc.substring(0, dotIndex);\n\t\t\tdocument = grid.dataSource.modoc.substring(dotIndex + 1);\n\t\t}\n\n\t\tconst gridRect = grid.body.getPageRect();\n\n\t\tisc.BizUtil.getEditView(module, document, (view) => {\n\t\t\tif (_view) {\n\t\t\t\tconst instance = _view.gather(false); // Don't validate\n\n\t\t\t\t// If continuing the conversation\n\t\t\t\tif (contConv) {\n\t\t\t\t\t_view._source = _dataSource.ID.substring(\n\t\t\t\t\t\t_dataSource.ID.lastIndexOf(\"_\") + 1,\n\t\t\t\t\t);\n\t\t\t\t\tthis._zoom(zoomToNew, view, newParams, bizId, instance._c, gridRect);\n\t\t\t\t} else {\n\t\t\t\t\t// If changes need to be applied\n\t\t\t\t\tif (instance._apply || _view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\tdelete instance._apply;\n\t\t\t\t\t\t_view.saveInstance(true, null, () => {\n\t\t\t\t\t\t\t_view._source = _dataSource.ID.substring(\n\t\t\t\t\t\t\t\t_dataSource.ID.lastIndexOf(\"_\") + 1,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis._zoom(zoomToNew, view, newParams, bizId, null, gridRect);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// No changes - directly zoom in\n\t\t\t\t\t\t_view._source = _dataSource.ID.substring(\n\t\t\t\t\t\t\t_dataSource.ID.lastIndexOf(\"_\") + 1,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis._zoom(zoomToNew, view, newParams, bizId, null, gridRect);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._zoom(zoomToNew, view, newParams, bizId, null, gridRect);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Handles the zooming logic for either a new or existing record, and displays the appropriate view in a popup.\n\t *\n\t * @param {boolean} zoomToNew - indicates whether to navigate to a new record (true) or an existing one (false).\n\t * @param {Object} view - the view to display in the popup.\n\t * @param {Object|null|undefined} newParams - a map of parameter names to expressions to evaluate, can be null or undefined.\n\t * @param {string} bizId - the business ID of the document for editing (if not creating a new record).\n\t * @param {Object} _c - additional context or configuration passed to the view methods.\n\t * @param {Array} gridRect - the coordinates of the grid that will define the position of the popup.\n\t */\n\t_zoom: function (zoomToNew, view, newParams, bizId, _c, gridRect) {\n\t\tif (zoomToNew) {\n\t\t\tisc.WindowStack.popup(gridRect, \"New\", true, [view]);\n\t\t\tview.newInstance(newParams, null, _c);\n\t\t} else {\n\t\t\tconst rowRect = [\n\t\t\t\tgridRect[0],\n\t\t\t\tthis.grid.body.getRowPageTop(this._eventRowNum),\n\t\t\t\tgridRect[2],\n\t\t\t\tthis.grid.body.getRowSize(this._eventRowNum),\n\t\t\t];\n\t\t\tisc.WindowStack.popup(rowRect, \"Edit\", true, [view]);\n\t\t\tview.editInstance(bizId, null, _c);\n\t\t}\n\t},\n\n\t/**\n\t * Handles the selection of a record from a picklist, updating the lookup description and calling necessary functions.\n\t *\n\t * @param {Object} lookupDescription - the description object for the lookup field being populated.\n\t */\n\tpick: function (lookupDescription) {\n\t\tif (this._eventRecord) {\n\t\t\tlookupDescription.setValueMapFromPickList(this._eventRecord);\n\t\t\tlookupDescription.setValue(this._eventRecord.bizId);\n\t\t\tlookupDescription.bizPicked(\n\t\t\t\tlookupDescription.form,\n\t\t\t\tlookupDescription,\n\t\t\t\tthis._eventRecord.bizId,\n\t\t\t);\n\t\t}\n\n\t\tisc.WindowStack.popoff(false); // Remove the pick popup - no rerender of the parent edit view\n\n\t\tif (this._eventRecord) {\n\t\t\t// Only call changedForServer if it is defined\n\t\t\tif (lookupDescription.changedForServer) {\n\t\t\t\tlookupDescription.changedForServer(\n\t\t\t\t\tlookupDescription.form,\n\t\t\t\t\tlookupDescription,\n\t\t\t\t\tthis._eventRecord.bizId,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis._eventRecord = null;\n\t\t}\n\t},\n});\n","/**\n *  Defines the ListView UI.\n */\nisc.defineClass(\"ListView\");\n\nisc.ListView.addClassProperties({\n\t/**\n\t * The heading HTML at the top of the list.\n\t */\n\t_heading: isc.HTMLFlow.create(),\n\n\t/**\n\t * The contents (layout) of the entire list.\n\t * @type {isc.VLayout}\n\t */\n\tcontents: isc.VLayout.create({\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\toverflow: \"auto\",\n\t\tmembersMargin: 2,\n\t\tlayoutMargin: 2,\n\t\tmargin: 2,\n\n\t\t/**\n\t\t * Re-renders the currently visible view.\n\t\t */\n\t\trerender: function () {\n\t\t\tconst views = [\"_grid\", \"_calendar\", \"_tree\", \"_map\"];\n\t\t\tfor (const view of views) {\n\t\t\t\tif (isc.ListView[view]?.isVisible()) {\n\t\t\t\t\tisc.ListView[view].refresh?.();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Resumes auto-refresh for the visible view.\n\t\t */\n\t\tresume: function () {\n\t\t\t// const views = [\"_grid\", \"_calendar\", \"_tree\", \"_map\"];\n\t\t\tconst views = [\"_map\"];\n\t\t\tfor (const view of views) {\n\t\t\t\tif (isc.ListView[view]?.isVisible()) {\n\t\t\t\t\tisc.ListView[view].resume?.();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}),\n\n\t_grid: null,\n\t_calendar: null,\n\t_tree: null,\n\t_map: null,\n\n\t/**\n\t * Handles dropping a portlet into the layout.\n\t * @type {isc.PortalLayout}\n\t */\n\t_portal: isc.PortalLayout.create({\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\n\t\t/**\n\t\t * Determines the portlet to drop into the layout.\n\t\t * @param {Object} dragTarget - the dragged item.\n\t\t * @param {number} colNum - the column number.\n\t\t * @param {number} rowNum - the row number.\n\t\t * @param {number} rowOffset - the row offset.\n\t\t * @returns {isc.Portlet}\n\t\t */\n\t\tgetDropPortlet: function (dragTarget, colNum, rowNum, rowOffset) {\n\t\t\tif (dragTarget.isA(\"TreeGrid\") && dragTarget.getID().endsWith(\"Tree\")) {\n\t\t\t\tconst leaf = dragTarget.getDragData()[0];\n\t\t\t\tconst portlet = isc.Portlet.create({ title: leaf.desc, items: [] });\n\n\t\t\t\tconst componentMap = {\n\t\t\t\t\tgrid: isc.BizUtil.createListGrid,\n\t\t\t\t\tcal: isc.BizUtil.createCalendar,\n\t\t\t\t\ttree: isc.BizUtil.createTreeGrid,\n\t\t\t\t\tmap: isc.BizUtil.createMap,\n\t\t\t\t};\n\n\t\t\t\tif (leaf.ref === \"edit\") {\n\t\t\t\t\tisc.BizUtil.getEditView(\n\t\t\t\t\t\tdragTarget.data.root.name,\n\t\t\t\t\t\tleaf.name,\n\t\t\t\t\t\t(view) => {\n\t\t\t\t\t\t\tportlet.addItem(view);\n\t\t\t\t\t\t\tview.newInstance(null, null, null, null, () =>\n\t\t\t\t\t\t\t\tview.hideMember(view._heading),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else if (componentMap[leaf.ref]) {\n\t\t\t\t\tconst component = componentMap[leaf.ref]();\n\t\t\t\t\tportlet.addItem(component);\n\t\t\t\t\tcomponent.setDataSource(\n\t\t\t\t\t\t`${dragTarget.data.root.name}_${leaf.name}`,\n\t\t\t\t\t\tleaf.config,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\talert(`Menu ref of ${leaf.ref} is unknown`);\n\t\t\t\t}\n\t\t\t\treturn portlet;\n\t\t\t}\n\n\t\t\treturn this.Super(\"getDropPortlet\", arguments);\n\t\t},\n\t}),\n\n\t/**\n\t * Sets the heading of the list view.\n\t * @param {string} title - the title text.\n\t * @param {string} [icon] - the icon URL.\n\t * @param {string} [fontIcon] - the font icon class.\n\t * @param {string} modoc - the document module.\n\t */\n\t_setHeading: function (title, icon, fontIcon, modoc) {\n\t\tconst iconMarkup = icon\n\t\t\t? `<img style=\"width:32px;height:32px\" src=\"resources?_doc=${modoc}&_n=${icon}&v=${SKYVE.Util.v}\"/>`\n\t\t\t: fontIcon\n\t\t\t\t? `<i style=\"padding-left:5px;font-size:28px;width:32px !important\" class=\"titleBar bizhubFontIcon ${fontIcon}\"></i>`\n\t\t\t\t: \"\";\n\n\t\tconst header = isc.BizUtil.headerTemplate\n\t\t\t.replace(\"{icon}\", iconMarkup)\n\t\t\t.replace(\"{title}\", title)\n\t\t\t.replace(\"{link}\", \"\");\n\n\t\tisc.ListView._heading.setContents(header);\n\t},\n\n\t/**\n\t * Sets the data source for the list view grid.\n\t * @param {string} ID - the identifier for the data source.\n\t * @param {Object} menuConfig - the menu configuration options.\n\t */\n\tsetGridDataSource: function (ID, menuConfig) {\n\t\tif (!this._grid) {\n\t\t\tthis._grid = isc.BizUtil.createListGrid();\n\t\t\tthis.contents.addMember(this._grid);\n\t\t}\n\t\tif (this._calendar) {\n\t\t\tthis.contents.hideMember(this._calendar);\n\t\t}\n\t\tif (this._tree) {\n\t\t\tthis.contents.hideMember(this._tree);\n\t\t}\n\t\tif (this._map) {\n\t\t\tthis.contents.hideMember(this._map);\n\t\t}\n\n\t\tthis.contents.hideMember(this._portal);\n\t\tthis.contents.showMember(this._grid);\n\n\t\tconst ds = this._getDataSource(ID);\n\t\tconst title = this._grid.setDataSource(ds, menuConfig);\n\t\tthis._setHeading(title, ds.icon, ds.fontIcon, ds.modoc);\n\t},\n\n\t/**\n\t * Sets the data source for the list view calendar.\n\t * @param {string} ID - the identifier for the data source.\n\t * @param {Object} menuConfig - the menu configuration options.\n\t */\n\tsetCalendarDataSource: function (ID, menuConfig) {\n\t\tif (!this._calendar) {\n\t\t\tthis._calendar = isc.BizUtil.createCalendar();\n\t\t\tthis.contents.addMember(this._calendar);\n\t\t}\n\t\tif (this._grid) {\n\t\t\tthis.contents.hideMember(this._grid);\n\t\t}\n\t\tif (this._tree) {\n\t\t\tthis.contents.hideMember(this._tree);\n\t\t}\n\t\tif (this._map) {\n\t\t\tthis.contents.hideMember(this._map);\n\t\t}\n\t\tthis.contents.hideMember(this._portal);\n\t\tthis.contents.showMember(this._calendar);\n\n\t\tconst ds = this._getDataSource(ID);\n\t\tthis._calendar.setDataSource(ds);\n\t\tthis._setHeading(\"NOT IMPLEMENTED\", ds.icon, ds.fontIcon, ds.modoc);\n\t},\n\n\t/**\n\t * Sets the data source for the list view tree.\n\t * @param {string} ID - the identifier for the data source.\n\t * @param {Object} menuConfig - the menu configuration options.\n\t */\n\tsetTreeDataSource: function (ID, menuConfig) {\n\t\tif (!this._tree) {\n\t\t\tthis._tree = isc.BizUtil.createTreeGrid();\n\t\t\tthis.contents.addMember(this._tree);\n\t\t}\n\t\tif (this._grid) {\n\t\t\tthis.contents.hideMember(this._grid);\n\t\t}\n\t\tif (this._calendar) {\n\t\t\tthis.contents.hideMember(this._calendar);\n\t\t}\n\t\tif (this._map) {\n\t\t\tthis.contents.hideMember(this._map);\n\t\t}\n\t\tthis.contents.hideMember(this._portal);\n\t\tthis.contents.showMember(this._tree);\n\n\t\tconst ds = this._getDataSource(ID);\n\t\tconst title = this._tree.setDataSource(ds, menuConfig);\n\t\tthis._setHeading(title, ds.icon, ds.fontIcon, ds.modoc);\n\t},\n\n\t/**\n\t * Sets the data source for the list view map.\n\t * @param {string} ID - the identifier for the data source.\n\t * @param {Object} menuConfig - the menu configuration options.\n\t */\n\tsetMapDataSource: function (ID, menuConfig) {\n\t\tif (!this._map) {\n\t\t\tthis._map = isc.BizUtil.createMap();\n\t\t\tthis.contents.addMember(this._map);\n\t\t}\n\t\tif (this._grid) {\n\t\t\tthis.contents.hideMember(this._grid);\n\t\t}\n\t\tif (this._calendar) {\n\t\t\tthis.contents.hideMember(this._calendar);\n\t\t}\n\t\tif (this._tree) {\n\t\t\tthis.contents.hideMember(this._tree);\n\t\t}\n\t\tthis.contents.hideMember(this._portal);\n\t\tthis.contents.showMember(this._map);\n\n\t\tthis._map.setDataSource(ID);\n\t\tthis._setHeading(\n\t\t\t\"MAP\",\n\t\t\t\"shared/icons/Home.png\",\n\t\t\t\"fa-solid fa-globe fa-2x\",\n\t\t\t\"\",\n\t\t);\n\t},\n\n\t/**\n\t * Initializes a view if it doesn't exist and hides other views.\n\t * @param {string} viewName - the name of the view to initialize.\n\t * @param {Function} createFunction - a function that creates the view.\n\t * @private\n\t */\n\t_initializeView: function (viewName, createFunction) {\n\t\tif (!this[viewName]) {\n\t\t\tthis[viewName] = createFunction();\n\t\t\tthis.contents.addMember(this[viewName]);\n\t\t}\n\n\t\t// Ensure heading and portal are part of the contents\n\t\tif (!this.contents.hasMember(this._heading)) {\n\t\t\tthis.contents.addMember(this._heading);\n\t\t}\n\t\tif (!this.contents.hasMember(this._portal)) {\n\t\t\tthis.contents.addMember(this._portal);\n\t\t\tthis.contents.hideMember(this._portal);\n\t\t}\n\n\t\t// Hide other views\n\t\t[\"_grid\", \"_calendar\", \"_tree\", \"_map\", \"_portal\"].forEach((view) => {\n\t\t\tif (view !== viewName) {\n\t\t\t\tthis.contents.hideMember(this[view]);\n\t\t\t}\n\t\t});\n\n\t\tthis.contents.showMember(this[viewName]);\n\t},\n\n\t/**\n\t * Updates a view with a data source and sets the heading.\n\t * @param {string} ID - the identifier for the data source.\n\t * @param {Object} menuConfig - the menu configuration options.\n\t * @param {string} viewName - the name of the view being updated.\n\t * @param {string} [defaultTitle=\"\"] - the default title if none is provided.\n\t * @private\n\t */\n\t_updateView: function (ID, menuConfig, viewName, defaultTitle = \"\") {\n\t\tconst ds = this._getDataSource(ID);\n\t\tconst title = this[viewName].setDataSource(ds, menuConfig) || defaultTitle;\n\t\tthis._setHeading(title, ds.icon, ds.fontIcon, ds.modoc);\n\t},\n\n\t/**\n\t * Retrieves a data source safely.\n\t * @param {string} ID - the identifier for the data source.\n\t * @returns {Object|null} the data source object, or null if not found.\n\t * @private\n\t */\n\t_getDataSource: function (ID) {\n\t\treturn typeof window[ID] !== \"undefined\" ? window[ID] : null;\n\t},\n});\n\nisc.ListView.contents.addMember(isc.ListView._heading);\nisc.ListView.contents.addMember(isc.ListView._portal);\nisc.ListView.contents.hideMember(isc.ListView._portal);\n","/**\n * Implements the BizContainer UI component.\n * Extends VLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizContainer\", \"VLayout\");\n\nisc.BizContainer.addMethods({\n\tinitWidget: function () {\n\t\tthis.backgroundImage = \"background.png\";\n\t\tthis.backgroundRepeat = \"repeat\";\n\t\tthis.Super(\"initWidget\", arguments);\n\t\tthis.contained = [];\n\t},\n\n\t/**\n\t * Adds a widget to the container.\n\t * @param {isc.Widget} contained - the widget to be contained.\n\t */\n\taddContained: function (contained) {\n\t\tthis.contained.add(contained);\n\t\tthis.addMember(contained);\n\t},\n\n\t/**\n\t * Removes a widget from the container.\n\t * @param {isc.Widget} contained - the widget to remove.\n\t */\n\tremoveContained: function (contained) {\n\t\tthis.contained.remove(contained);\n\t\tthis.removeMember(contained);\n\t},\n});\n\n/**\n * Implements the EditView UI component.\n * Extends BizContainer implemented above.\n */\nisc.ClassFactory.defineClass(\"EditView\", \"BizContainer\");\n\nisc.EditView.addClassProperties({\n\t_DATA_SOURCE: isc.RestDataSource.create({\n\t\tdataFormat: \"json\",\n\t\tjsonPrefix: \"\",\n\t\tjsonSuffix: \"\",\n\t\tdataURL: \"smartedit\",\n\t\tsendExtraFields: false, // Ensure that only datasource defined fields are sent\n\t}),\n});\n\nisc.EditView.addMethods({\n\tinitWidget: function () {\n\t\tthis.overflow = \"hidden\";\n\t\tthis.membersMargin = 2;\n\t\tthis.layoutMargin = 2;\n\t\tthis.margin = 2;\n\t\tthis._grids = {}; // Map of binding -> (map of ID -> dataGrid/comparisonEditor/listMembership/map widget)\n\t\tthis._refreshedGrids = {}; // Map of dataGrid/comparisonEditor/listMembership ID -> boolean (true if refreshed)\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\tthis._heading = isc.HTMLFlow.create();\n\t\tthis.addMember(this._heading);\n\n\t\t// The action panel\n\t\tthis._actionPanel = isc.ToolStrip.create({\n\t\t\tlayoutMargin: 2,\n\t\t\tmembersMargin: 5,\n\t\t\twidth: \"100%\",\n\t\t});\n\t\tthis.addMember(this._actionPanel);\n\n\t\t// The edit panel\n\t\tthis._editPanel = isc.BizContainer.create({\n\t\t\tlayoutMargin: 2,\n\t\t\tmembersMargin: 10,\n\t\t\toverflow: \"auto\",\n\t\t});\n\t\tthis.addMember(this._editPanel);\n\n\t\t// Initialize the values manager\n\t\tthis._vm = isc.ValuesManager.create({\n\t\t\tdataSource: isc.EditView._DATA_SOURCE,\n\t\t\thandleHiddenValidationErrors: (errors) => {\n\t\t\t\tconst messages = [];\n\t\t\t\tfor (const binding in errors) {\n\t\t\t\t\tconst message = errors[binding];\n\t\t\t\t\tconst tokens = binding.split(\"__\");\n\t\t\t\t\tif (tokens.length === 2) {\n\t\t\t\t\t\tconst lastUnderscore = tokens[0].lastIndexOf(\"_\");\n\t\t\t\t\t\tif (lastUnderscore > -1) {\n\t\t\t\t\t\t\tconst gridBinding = tokens[0].substring(0, lastUnderscore);\n\t\t\t\t\t\t\tconst grids = this._grids[gridBinding];\n\t\t\t\t\t\t\tif (grids) {\n\t\t\t\t\t\t\t\tconst rowNum = parseInt(\n\t\t\t\t\t\t\t\t\ttokens[0].substring(lastUnderscore + 1),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (isc.isA.Number(rowNum)) {\n\t\t\t\t\t\t\t\t\tfor (const gridID in grids) {\n\t\t\t\t\t\t\t\t\t\tconst grid = grids[gridID];\n\t\t\t\t\t\t\t\t\t\tif (grid?.grid) {\n\t\t\t\t\t\t\t\t\t\t\tgrid.grid.setFieldError(rowNum, tokens[1], message);\n\t\t\t\t\t\t\t\t\t\t\tgrid.grid.markForRedraw();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!messages.contains(message)) {\n\t\t\t\t\t\tmessages.add(message);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (messages.length > 0) {\n\t\t\t\t\tlet warning = \"<ul>\";\n\t\t\t\t\tfor (const message of messages) {\n\t\t\t\t\t\twarning += `<li>${message}</li>`;\n\t\t\t\t\t}\n\t\t\t\t\twarning += \"</ul>\";\n\t\t\t\t\tisc.warn(warning, null, { title: \"Problems\" });\n\t\t\t\t}\n\n\t\t\t\treturn false; // Don't log to console\n\t\t\t},\n\n\t\t\t// Overload to remove oldValues from the request context\n\t\t\tsaveEditorValues: function (values, saveOperation, callback, context) {\n\t\t\t\tcontext.oldValues = null;\n\t\t\t\tthis.Super(\"saveEditorValues\", arguments);\n\t\t\t},\n\t\t});\n\t},\n\n\t/**\n\t * Adds a widget to the edit panel.\n\t * @param {isc.Widget} contained - the widget to be contained.\n\t */\n\taddContained: function (contained) {\n\t\tthis._editPanel.addContained(contained);\n\t},\n\n\t/**\n\t * Adds an edit action to the action panel.\n\t * @param {isc.IButton} button - the button to add.\n\t */\n\taddEditAction: function (button) {\n\t\tbutton.forCreate = false;\n\t\tthis._actionPanel.addMember(button);\n\t},\n\n\t/**\n\t * Adds a create action to the action panel.\n\t * @param {isc.IButton} button - the button to add.\n\t */\n\taddCreateAction: function (button) {\n\t\tbutton.forCreate = true;\n\t\tthis._actionPanel.addMember(button);\n\t},\n\n\t/**\n\t * Adds an action to the action panel.\n\t * @param {isc.IButton} button - the button to add.\n\t */\n\taddAction: function (button) {\n\t\tbutton.forCreate = null;\n\t\tthis._actionPanel.addMember(button);\n\t},\n\n\t/**\n\t * Replaces {bindings} in a string expression with values from the instance.\n\t * @param {string} expression - the expression to parse.\n\t * @param {Object} instance - the bean instance to get values from.\n\t * @returns {string} - the parsed expression.\n\t */\n\ttoDisplay: function (expression, instance) {\n\t\tif (expression) {\n\t\t\tconst tokens = expression.match(/\\{[A-Za-z0-9._]+\\}/g);\n\t\t\tif (tokens) {\n\t\t\t\tfor (const token of tokens) {\n\t\t\t\t\tconst binding = token.substring(1, token.length - 1);\n\t\t\t\t\tlet evaluation = binding\n\t\t\t\t\t\t.split(\".\")\n\t\t\t\t\t\t.reduce((obj, key) => obj?.[key], instance);\n\t\t\t\t\tif (typeof evaluation === \"undefined\") {\n\t\t\t\t\t\tevaluation = \"\";\n\t\t\t\t\t} else if (\n\t\t\t\t\t\tevaluation == null ||\n\t\t\t\t\t\tevaluation === \"null\" ||\n\t\t\t\t\t\tevaluation === \"undefined\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tevaluation = \"\";\n\t\t\t\t\t} else if (evaluation.toDateStamp) {\n\t\t\t\t\t\tevaluation = evaluation.toDateStamp();\n\t\t\t\t\t\tevaluation = `${evaluation.substring(0, 4)}-${evaluation.substring(\n\t\t\t\t\t\t\t4,\n\t\t\t\t\t\t\t6,\n\t\t\t\t\t\t)}-${evaluation.substring(6, 11)}:${evaluation.substring(\n\t\t\t\t\t\t\t11,\n\t\t\t\t\t\t\t13,\n\t\t\t\t\t\t)}:${evaluation.substring(13, 15)}.000`;\n\t\t\t\t\t} else if (evaluation.toString) {\n\t\t\t\t\t\tevaluation = evaluation.toString();\n\t\t\t\t\t}\n\t\t\t\t\texpression = expression.replace(token, evaluation);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn expression;\n\t},\n\n\t/**\n\t * Re-renders the edit view.\n\t */\n\trerender: function () {\n\t\tconst instance = this.gather(false); // No validation\n\t\tif (instance) {\n\t\t\tthis._editInstance(\n\t\t\t\t\"ZoomOut\",\n\t\t\t\tinstance.bizId,\n\t\t\t\tthis._b,\n\t\t\t\tinstance._c,\n\t\t\t\tthis._openedFromDataGrid,\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Resumes controls that get paused when they lose focus.\n\t */\n\tresume: function () {\n\t\tfor (const gridBinding in this._grids) {\n\t\t\tconst grids = this._grids[gridBinding];\n\t\t\tfor (const gridID in grids) {\n\t\t\t\tconst grid = grids[gridID];\n\t\t\t\tif (grid.webmap) {\n\t\t\t\t\tgrid.resume();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Creates a new instance.\n\t * @param {Object} newParams - parameters to seed the new instance.\n\t * @param {string} formBinding - the binding of the datagrid or lookup.\n\t * @param {string} parentContext - the parent web context.\n\t * @param {boolean} openedFromDataGrid - whether the view was opened from a data grid row.\n\t * @param {Function} successCallback - callback function on success.\n\t */\n\tnewInstance: function (\n\t\tnewParams,\n\t\tformBinding,\n\t\tparentContext,\n\t\topenedFromDataGrid,\n\t\tsuccessCallback,\n\t) {\n\t\tthis._openedFromDataGrid = openedFromDataGrid;\n\t\tif (this._vm.members) {\n\t\t\tthis.hide();\n\t\t\tthis._b = formBinding;\n\n\t\t\tconst params = {\n\t\t\t\t_mod: this._mod,\n\t\t\t\t_doc: this._doc,\n\t\t\t\t_ecnt: this._ecnt,\n\t\t\t\t_ccnt: this._ccnt,\n\t\t\t};\n\t\t\tif (this._csrf) {\n\t\t\t\tparams._csrf = this._csrf;\n\t\t\t}\n\t\t\tif (formBinding) {\n\t\t\t\tparams._b = formBinding;\n\t\t\t}\n\t\t\tif (parentContext) {\n\t\t\t\tparams._c = parentContext;\n\t\t\t}\n\t\t\tif (newParams) {\n\t\t\t\tfor (const binding in newParams) {\n\t\t\t\t\tparams[binding] = newParams[binding];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._vm.fetchData(\n\t\t\t\tnull, // No criteria required\n\t\t\t\t(dsResponse, data) => {\n\t\t\t\t\tlet values = {};\n\t\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\tthis._vm.setSaveOperationType(\"add\");\n\t\t\t\t\t\tvalues = data[0];\n\t\t\t\t\t\tthis.scatter(values);\n\n\t\t\t\t\t\tif (openedFromDataGrid) {\n\t\t\t\t\t\t\tthis._b += `ElementById(${values.bizId})`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (successCallback) {\n\t\t\t\t\t\t\tsuccessCallback(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (dsResponse.status === -1) {\n\t\t\t\t\t\tisc.warn(data, null, { title: \"Problems\" });\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.show();\n\t\t\t\t\tthis.refreshListGrids(true, true, values);\n\n\t\t\t\t\tif (this.opened) {\n\t\t\t\t\t\tthis.opened(data);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ httpMethod: \"POST\", params, willHandleError: true },\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Edits an instance.\n\t * @param {string} bizId - the ID of the bean to edit.\n\t * @param {string} formBinding - the binding of the datagrid or lookup.\n\t * @param {string} parentContext - the parent context.\n\t * @param {boolean} openedFromDataGrid - whether the view was opened from a data grid row.\n\t * @param {Function} successCallback - callback function on success.\n\t */\n\teditInstance: function (\n\t\tbizId,\n\t\tformBinding,\n\t\tparentContext,\n\t\topenedFromDataGrid,\n\t\tsuccessCallback,\n\t) {\n\t\tthis._saved = false;\n\t\tthis._editInstance(\n\t\t\tnull,\n\t\t\tbizId,\n\t\t\tformBinding,\n\t\t\tparentContext,\n\t\t\topenedFromDataGrid,\n\t\t\tsuccessCallback,\n\t\t);\n\t},\n\n\t/**\n\t * Handles editing an instance of a bean, including fetching data, scattering values, and refreshing the UI.\n\t * @param {string} action - the action name associated with this edit call (e.g., \"ZoomOut\").\n\t * @param {string} bizId - the ID of the bean to edit.\n\t * @param {string} formBinding - the binding of the data grid or lookup (can be null).\n\t * @param {string} parentContext - the parent context (can be null).\n\t * @param {boolean} openedFromDataGrid - indicates whether the view was opened from a data grid row.\n\t * @param {Function} successCallback - a function to call when the operation is successful.\n\t */\n\t_editInstance: function (\n\t\taction,\n\t\tbizId,\n\t\tformBinding,\n\t\tparentContext,\n\t\topenedFromDataGrid,\n\t\tsuccessCallback,\n\t) {\n\t\tthis._openedFromDataGrid = openedFromDataGrid;\n\n\t\t// Skip if the view model has no members (not data-bound)\n\t\tif (!this._vm.members) {\n\t\t\tthis._source = null;\n\t\t\treturn;\n\t\t}\n\n\t\t// Hide the view while fetching data\n\t\tthis.hide();\n\t\tthis._b = formBinding;\n\n\t\t// Prepare request parameters\n\t\tconst params = {\n\t\t\tbizId,\n\t\t\t_mod: this._mod,\n\t\t\t_doc: this._doc,\n\t\t\t_ecnt: this._ecnt,\n\t\t\t_ccnt: this._ccnt,\n\t\t};\n\n\t\t// Add optional parameters if they exist\n\t\tif (this._csrf) params._csrf = this._csrf;\n\t\tif (action) params._a = action;\n\t\tif (formBinding) params._b = formBinding;\n\t\tif (parentContext) params._c = parentContext;\n\t\tif (this._source) {\n\t\t\tparams._s = this._source;\n\t\t\tthis._source = null;\n\t\t}\n\n\t\t// Fetch data from the server\n\t\tthis._vm.fetchData(\n\t\t\tnull, // No criteria required\n\t\t\t(dsResponse, data, dsRequest) => {\n\t\t\t\tlet values = {};\n\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t// Success: Extract CSRF token and scatter values\n\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\tvalues = data[0];\n\n\t\t\t\t\t// Update form binding if opened from a data grid\n\t\t\t\t\tif (openedFromDataGrid && this._b && !this._b.endsWith(\")\")) {\n\t\t\t\t\t\tthis._b += `ElementById(${values.bizId})`;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Scatter the fetched values into the form\n\t\t\t\t\tthis.scatter(values);\n\n\t\t\t\t\t// Execute the success callback if provided\n\t\t\t\t\tif (successCallback) {\n\t\t\t\t\t\tsuccessCallback(data);\n\t\t\t\t\t}\n\t\t\t\t} else if (dsResponse.status === -1) {\n\t\t\t\t\t// Display a warning if there are issues\n\t\t\t\t\tisc.warn(data, null, { title: \"Problems\" });\n\t\t\t\t}\n\n\t\t\t\t// Handle ZoomOut or new document scenarios\n\t\t\t\tif (action === \"ZoomOut\" || !bizId) {\n\t\t\t\t\tconst changes = this._vm.valuesHaveChanged();\n\t\t\t\t\tthis._vm.setValue(\"_apply\", true);\n\t\t\t\t\tif (!changes) {\n\t\t\t\t\t\tthis._vm.rememberValues();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Show the view and refresh UI components\n\t\t\t\tthis.show();\n\t\t\t\tthis.refreshListGrids(true, !action, values);\n\n\t\t\t\t// Trigger the `opened` callback if defined\n\t\t\t\tif (this.opened) {\n\t\t\t\t\tthis.opened(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\thttpMethod: \"POST\",\n\t\t\t\tparams,\n\t\t\t\twillHandleError: true,\n\t\t\t},\n\t\t);\n\t},\n\n\t/**\n\t * Re-renders the edit view following an action.\n\t */\n\trerenderAction: function (validate, source) {\n\t\tthis._source = source;\n\t\tthis.saveInstance(validate, null);\n\t\tthis._saved = true;\n\t},\n\n\t/**\n\t * Re-renders the edit view following a blur event.\n\t */\n\trerenderBlurryAction: function (validate, source) {\n\t\tthis.delayCall(\"_rerenderBlurryAction\", [validate, source], 100);\n\t},\n\n\t/**\n\t * Re-renders the edit view following a blur action.\n\t */\n\t_rerenderBlurryAction: function (validate, source) {\n\t\tthis._source = source;\n\t\tthis.saveInstance(validate, null, () => {\n\t\t\tif (this._blurry) {\n\t\t\t\tconst blurry = this._blurry;\n\t\t\t\tthis._blurry = null;\n\n\t\t\t\t// If it's a BizButton, call its action as this was the lost click event\n\t\t\t\tif (blurry.action) {\n\t\t\t\t\tblurry.delayCall(\"action\");\n\t\t\t\t} else if (blurry.click) {\n\t\t\t\t\tblurry.click();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis._saved = true;\n\t},\n\n\t/**\n\t * Saves the instance.\n\t * @param {boolean} validate - whether to validate.\n\t * @param {string} action - the action name.\n\t * @param {Function} successCallback - callback function on success.\n\t */\n\tsaveInstance: function (validate, action, successCallback) {\n\t\tconst instance = this.gather(validate);\n\t\tif (instance) {\n\t\t\tconst context = instance._c;\n\t\t\tdelete instance._c;\n\n\t\t\tconst params = {\n\t\t\t\t_mod: this._mod,\n\t\t\t\t_doc: this._doc,\n\t\t\t\t_ecnt: this._ecnt,\n\t\t\t\t_ccnt: this._ccnt,\n\t\t\t\tbean: instance,\n\t\t\t\tbizId: instance.bizId,\n\t\t\t\t_c: context,\n\t\t\t};\n\t\t\tif (this._csrf) {\n\t\t\t\tparams._csrf = this._csrf;\n\t\t\t}\n\t\t\tif (action) {\n\t\t\t\tparams._a = action;\n\t\t\t\tif (action === \"_PUSH\") {\n\t\t\t\t\taction = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._b) {\n\t\t\t\tparams._b = this._b;\n\t\t\t}\n\t\t\tif (this._source) {\n\t\t\t\tparams._s = this._source;\n\t\t\t\tthis._source = null;\n\t\t\t}\n\n\t\t\tthis._vm.disableValidation = true;\n\t\t\tthis._vm.saveData(\n\t\t\t\t(dsResponse, data) => {\n\t\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\tif (action === \"ZoomOut\") {\n\t\t\t\t\t\t\tconst opener = isc.WindowStack.getOpener();\n\t\t\t\t\t\t\tconst openerValues = opener.gather(false);\n\t\t\t\t\t\t\topenerValues._c = data._c;\n\n\t\t\t\t\t\t\tconst childBinding = this._b;\n\t\t\t\t\t\t\tconst index = childBinding.lastIndexOf(\".\");\n\t\t\t\t\t\t\tconst parentBinding = opener._b;\n\n\t\t\t\t\t\t\tif (childBinding.endsWith(\")\")) {\n\t\t\t\t\t\t\t\tconst lastIndex = childBinding.lastIndexOf(\"ElementById\");\n\t\t\t\t\t\t\t\tif (lastIndex >= 0) {\n\t\t\t\t\t\t\t\t\tconst gridBinding = childBinding.substring(0, lastIndex);\n\t\t\t\t\t\t\t\t\tconst openerValue = openerValues[gridBinding];\n\t\t\t\t\t\t\t\t\tif (isc.isAn.Array(openerValue)) {\n\t\t\t\t\t\t\t\t\t\tisc.WindowStack.popoff(true);\n\t\t\t\t\t\t\t\t\t\topener._source = null;\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\topenerValues[gridBinding] = data.bizId;\n\t\t\t\t\t\t\t\t\t\tconst lookupDescription = opener._vm.getItem(gridBinding);\n\t\t\t\t\t\t\t\t\t\tif (lookupDescription) {\n\t\t\t\t\t\t\t\t\t\t\tif (instance.bizId) {\n\t\t\t\t\t\t\t\t\t\t\t\tlookupDescription.bizEdited(\n\t\t\t\t\t\t\t\t\t\t\t\t\tlookupDescription.form,\n\t\t\t\t\t\t\t\t\t\t\t\t\tlookupDescription,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata.bizId,\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tlookupDescription.bizAdded(\n\t\t\t\t\t\t\t\t\t\t\t\t\tlookupDescription.form,\n\t\t\t\t\t\t\t\t\t\t\t\t\tlookupDescription,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata.bizId,\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\topener._vm.setValues(openerValues);\n\t\t\t\t\t\t\tdelete data._c;\n\t\t\t\t\t\t\tdelete data._title;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (action === \"Save\") {\n\t\t\t\t\t\t\tthis._saved = true;\n\t\t\t\t\t\t\tthis.scatter(data);\n\t\t\t\t\t\t\tthis.refreshListGrids(true, false, data);\n\t\t\t\t\t\t} else if (action) {\n\t\t\t\t\t\t\tconst opener = isc.WindowStack.getOpener();\n\t\t\t\t\t\t\tif (opener) {\n\t\t\t\t\t\t\t\tisc.WindowStack.popoff(true);\n\t\t\t\t\t\t\t\topener._source = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.scatter(data);\n\t\t\t\t\t\t\tthis.refreshListGrids(true, false, data);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (successCallback) {\n\t\t\t\t\t\t\tsuccessCallback(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (dsResponse.status === -1) {\n\t\t\t\t\t\tisc.warn(data, null, { title: \"Problems\" });\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ params, willHandleError: true },\n\t\t\t);\n\t\t\tthis._vm.disableValidation = false;\n\t\t} else {\n\t\t\tthis._source = null;\n\t\t}\n\t},\n\n\t/**\n\t * Deletes the instance.\n\t * @param {boolean} validate - whether to validate.\n\t * @param {Function} successCallback - callback function on success.\n\t */\n\tdeleteInstance: function (validate, successCallback) {\n\t\tconst instance = this.gather(validate);\n\t\tif (instance) {\n\t\t\tconst context = instance._c;\n\t\t\tdelete instance._c;\n\n\t\t\tconst params = { _mod: this._mod, _doc: this._doc, _c: context };\n\t\t\tif (this._csrf) {\n\t\t\t\tparams._csrf = this._csrf;\n\t\t\t}\n\n\t\t\tisc.EditView._DATA_SOURCE.removeData(\n\t\t\t\tinstance,\n\t\t\t\t(dsResponse, data) => {\n\t\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\t\t\t\t\t\tisc.WindowStack.popoff(true);\n\t\t\t\t\t\tif (successCallback) {\n\t\t\t\t\t\t\tsuccessCallback(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (dsResponse.status === -1) {\n\t\t\t\t\t\tisc.warn(data, null, { title: \"Problems\" });\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ params, willHandleError: true },\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Executes a specified action, optionally validating and handling grid context.\n\t *\n\t * @param {string} action - the name of the action to execute.\n\t * @param {boolean} validate - whether to validate data before executing the action.\n\t * @param {string} gridBinding - grid binding relative to the current view.\n\t * @param {string} gridModule - the module name driving the grid.\n\t * @param {string} gridDocument - the document name driving the grid.\n\t * @param {string} gridRowBizId - the business ID of the grid row.\n\t * @param {Function} successCallback - callback function for a successful operation.\n\t */\n\tdoAction: function (\n\t\taction,\n\t\tvalidate,\n\t\tgridBinding,\n\t\tgridModule,\n\t\tgridDocument,\n\t\tgridRowBizId,\n\t\tsuccessCallback,\n\t) {\n\t\tconst instance = this.gather(validate);\n\t\tif (!instance) return;\n\n\t\t// Extract and remove context from instance for server reconstruction\n\t\tconst { _c: context, ...instanceWithoutContext } = instance;\n\n\t\t// Build request parameters using shorthand and default values\n\t\tconst params = {\n\t\t\t_mod: gridModule || this._mod,\n\t\t\t_doc: gridDocument || this._doc,\n\t\t\t_ecnt: this._ecnt,\n\t\t\t_ccnt: this._ccnt,\n\t\t\tbean: instanceWithoutContext,\n\t\t\tbizId: gridRowBizId || instance.bizId,\n\t\t\t_c: context,\n\t\t\t...(this._csrf && { _csrf: this._csrf }),\n\t\t\t...(action && { _a: action }),\n\t\t\t...(this._b && { _b: this._b }),\n\t\t\t...(gridBinding && { _g: gridBinding }),\n\t\t};\n\n\t\t// Disable validation temporarily, as it is handled during gathering\n\t\tthis._vm.disableValidation = true;\n\n\t\t// Save data and handle the response\n\t\tthis._vm.saveData(\n\t\t\t(dsResponse, data) => {\n\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t// Update CSRF token from response header\n\t\t\t\t\tthis._csrf = dsResponse.httpHeaders[\"x-csrf-token\"];\n\n\t\t\t\t\t// Handle successful response\n\t\t\t\t\tthis._saved = true;\n\t\t\t\t\tthis.scatter(data);\n\t\t\t\t\tthis.refreshListGrids(true, false, data);\n\n\t\t\t\t\tif (successCallback) {\n\t\t\t\t\t\tsuccessCallback(data);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Redirect if a download URL is provided\n\t\t\t\t\tif (data._redirectUrl) {\n\t\t\t\t\t\twindow.location.assign(data._redirectUrl);\n\t\t\t\t\t}\n\t\t\t\t} else if (dsResponse.status === -1) {\n\t\t\t\t\tisc.warn(data, null, { title: \"Problems\" });\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\t{ params, willHandleError: true },\n\t\t);\n\n\t\t// Re-enable validation immediately after the call\n\t\tthis._vm.disableValidation = false;\n\t},\n\n\t/**\n\t * Schedules a blurry action with a slight delay to prevent lost click events during blur.\n\t * Typically triggered from a blur event to handle server-side rerender actions.\n\t *\n\t * @param {string} action - the name of the action to execute.\n\t * @param {boolean} validate - whether validation should occur before executing the action.\n\t */\n\tdoBlurryAction: function (action, validate) {\n\t\tthis.delayCall(\"_doBlurryAction\", [action, validate], 100);\n\t},\n\n\t/**\n\t * Executes the blurry action and re-triggers any lost click or action events.\n\t *\n\t * @param {string} action - the name of the action to execute.\n\t * @param {boolean} validate - whether to validate before executing the action.\n\t */\n\t_doBlurryAction: function (action, validate) {\n\t\tthis.doAction(action, validate, null, null, null, null, () => {\n\t\t\tif (this._blurry) {\n\t\t\t\tconst blurryElement = this._blurry;\n\t\t\t\tthis._blurry = null;\n\n\t\t\t\t// If the blurred element has an action (likely a button), trigger it\n\t\t\t\tif (blurryElement.action) {\n\t\t\t\t\t// Delay call to ensure saveData callback has completed\n\t\t\t\t\tblurryElement.delayCall(\"action\");\n\t\t\t\t} else if (blurryElement.click) {\n\t\t\t\t\t// Fallback for generic click events\n\t\t\t\t\tblurryElement.click();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Scatter method for distributing values into corresponding UI components and grids.\n\t *\n\t * @param {Object} values - the values to be scattered into the UI components and grids.\n\t * @param {boolean} values.persisted - whether the data has been persisted.\n\t * @param {boolean} values.created - whether the data has been created.\n\t * @param {string} values._title - the title for the header.\n\t * @param {Object} values._valueMaps - a mapping of values for processing widgets.\n\t * @param {Array} values._growls - growl messages to be displayed.\n\t * @param {Array} values._messages - informational or warning messages to be displayed.\n\t * @param {string} values.bizId - business identifier associated with the values.\n\t */\n\tscatter: function (values) {\n\t\t// Clear any errors and reset values\n\t\tthis._vm.clearErrors(true);\n\t\tthis._vm.clearValues();\n\n\t\t// Prepare link and header template\n\t\tlet link = \"\";\n\t\tif (values.persisted) {\n\t\t\tlink = `<a target=\"_top\" href=\"?a=e&m=${this._mod}&d=${this._doc}&i=${values.bizId}\" title=\"Link\" class=\"dhtmlPageButton\"><i class=\"fa-solid fa-2x fa-thumbtack\"></i></a>`;\n\t\t}\n\n\t\tlet header = isc.BizUtil.headerTemplate;\n\t\tlet icon = \"\";\n\t\tlet help = \"\";\n\n\t\tif (values.created) {\n\t\t\ticon = this._createIconMarkup(this._editIcon, this._editFontIcon);\n\t\t\thelp = this._createHelpMarkup(this._editHelpFile, this._editHelpURL);\n\t\t} else {\n\t\t\ticon = this._createIconMarkup(this._createIcon, this._createFontIcon);\n\t\t\thelp = this._createHelpMarkup(this._createHelpFile, this._createHelpURL);\n\t\t}\n\n\t\theader = header\n\t\t\t.replace(\"{icon}\", icon)\n\t\t\t.replace(\"{title}\", values._title)\n\t\t\t.replace(\"{link}\", link)\n\t\t\t.replace(\"{help}\", help);\n\t\tthis._heading.setContents(header);\n\n\t\t// Remove sensitive data before submitting\n\t\tconst { _title, _valueMaps, _growls, _messages, ...cleanedValues } = values;\n\n\t\tconst valueMaps = _valueMaps;\n\t\tconst growls = _growls;\n\t\tconst messages = _messages;\n\n\t\t// Process widgets\n\t\tconst toRerender = [];\n\t\tthis._processWidgets(\n\t\t\tthis._editPanel,\n\t\t\tfalse,\n\t\t\tcleanedValues,\n\t\t\tvalueMaps,\n\t\t\ttoRerender,\n\t\t);\n\n\t\t// Set values\n\t\tthis._vm.setValues(cleanedValues);\n\n\t\t// Rerender components\n\t\ttoRerender.forEach((widget) => widget.rerender());\n\n\t\t// Scatter the list and membership values\n\t\tObject.entries(this._grids).forEach(([gridBinding, grids]) => {\n\t\t\tconst data = cleanedValues[gridBinding];\n\t\t\tObject.entries(grids).forEach(([gridID, grid]) => {\n\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\tif (grid._comparisonTree && grid._comparisonForm) {\n\t\t\t\t\t\tgrid.setData(data);\n\t\t\t\t\t} else if (grid._candidateList && grid._memberList) {\n\t\t\t\t\t\tthis._handleListMembership(data, valueMaps, gridBinding, grid);\n\t\t\t\t\t} else if (grid.grid) {\n\t\t\t\t\t\tthis._handleDataGrid(data, valueMaps, gridBinding, grid);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tconst onlyView = isc.BizUtil.getCurrentView() === this;\n\n\t\t// Manage action panel visibility and enable/disable controls\n\t\tthis._manageActionPanel(values, onlyView);\n\n\t\t// Display growls and messages\n\t\tthis._displayGrowlsAndMessages(growls, messages);\n\t},\n\n\t/**\n\t * Creates an icon markup based on the provided icon file or font icon class.\n\t *\n\t * @param {string} iconFile - the file name for the icon image.\n\t * @param {string} fontIconClass - the class name for a font icon.\n\t * @returns {string} the HTML markup for the icon.\n\t */\n\t_createIconMarkup: function (iconFile, fontIconClass) {\n\t\tif (iconFile) {\n\t\t\treturn `<img style=\"width:32px;height:32px\" src=\"resources?_doc=${this._mod}.${this._doc}&_n=${iconFile}&v=${SKYVE.Util.v}\"/>`;\n\t\t} else if (fontIconClass) {\n\t\t\treturn `<i style=\"padding-left:5px;font-size:28px;width:32px !important\" class=\"titleBar bizhubFontIcon ${fontIconClass}\"></i>`;\n\t\t}\n\t\treturn \"\";\n\t},\n\n\t/**\n\t * Creates a help markup based on the provided help file or URL.\n\t *\n\t * @param {string} helpFile - the help file name.\n\t * @param {string} helpURL - the URL for external help.\n\t * @returns {string} the HTML markup for the help link.\n\t */\n\t_createHelpMarkup: function (helpFile, helpURL) {\n\t\tif (helpFile) {\n\t\t\treturn `'resources?_doc=${this._mod}.${this._doc}&_n=${helpFile}&v=${SKYVE.Util.v}'`;\n\t\t} else if (helpURL) {\n\t\t\treturn `'${helpURL}'`;\n\t\t}\n\t\treturn \"\";\n\t},\n\n\t/**\n\t * Handles list membership by associating candidate data with existing value maps.\n\t *\n\t * @param {Array} data - the data to be processed for membership.\n\t * @param {Object} valueMaps - the value maps containing existing mappings.\n\t * @param {string} gridBinding - the binding name of the grid.\n\t * @param {Object} grid - the grid object to be updated.\n\t */\n\t_handleListMembership: function (data, valueMaps, gridBinding, grid) {\n\t\tconst candidates = [];\n\t\tconst valueMap = valueMaps && valueMaps[gridBinding];\n\t\tif (valueMap) {\n\t\t\tObject.entries(valueMap).forEach(([key, value]) => {\n\t\t\t\tconst element = data.find(\"bizId\", key);\n\t\t\t\tif (element) {\n\t\t\t\t\telement.bizKey = value;\n\t\t\t\t} else {\n\t\t\t\t\tcandidates.push({ bizId: key, bizKey: value });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tgrid.setData(candidates, data);\n\t},\n\n\t/**\n\t * Handles data grid processing by setting up necessary fields, value maps, and selection.\n\t *\n\t * @param {Array} data - the data to be set in the grid.\n\t * @param {Object} valueMaps - the value maps associated w\n\t * @param {Object} gridBinding - the binding name of the grid.\n\t * @param {Object} grid - the grid object to be updated.\n\t */\n\t_handleDataGrid: function (data, valueMaps, gridBinding, grid) {\n\t\tconst gridFields = grid.grid.fields;\n\t\tgridFields.forEach((gridField) => {\n\t\t\tconst { type, name } = gridField;\n\t\t\tconst isDate = type.includes(\"YYYY\");\n\t\t\tconst isTime = type.includes(\"HH\");\n\n\t\t\tif (isDate || isTime) {\n\t\t\t\tthis._processDateTimeFields(data, name, isDate, isTime);\n\t\t\t} else if (gridField.valueMap && valueMaps) {\n\t\t\t\tconst valueMap = valueMaps[`${gridBinding}_${gridField.name}`];\n\t\t\t\tif (valueMap) {\n\t\t\t\t\tgridField.valueMap = valueMap;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Handle selection from server\n\t\tif (grid.selectedIdBinding) {\n\t\t\tthis._handleGridSelection(data, grid);\n\t\t} else {\n\t\t\tgrid.grid.setData(data);\n\t\t}\n\t},\n\n\t/**\n\t * Processes date and time fields in the data for proper formatting.\n\t *\n\t * @param {Array} data - the data to be processed.\n\t * @param {string} name - the field name to be processed.\n\t * @param {boolean} isDate - flag indicating if the field is a date type.\n\t * @param {boolean} isTime - flag indicating if the field is a time type.\n\t */\n\t_processDateTimeFields: function (data, name, isDate, isTime) {\n\t\tdata.forEach((row) => {\n\t\t\tconst value = row[name];\n\t\t\tif (value) {\n\t\t\t\tif (isDate) {\n\t\t\t\t\trow[name] = isc.DateUtil.parseSchemaDate(value);\n\t\t\t\t} else if (isTime) {\n\t\t\t\t\trow[name] = isc.Time.parseInput(value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Handles grid selection based on the data provided.\n\t *\n\t * @param {Array} data - the data to be set in the grid.\n\t * @param {Object} grid - the grid object to be updated.\n\t */\n\t_handleGridSelection: function (data, grid) {\n\t\tconst method = grid.grid.selectionUpdated;\n\t\ttry {\n\t\t\tgrid.grid.selectionUpdated = null;\n\t\t\tgrid.grid.setData(data);\n\n\t\t\tconst selectedBizId = values[grid.selectedIdBinding];\n\t\t\tconst index = data.findIndex(\"bizId\", selectedBizId);\n\t\t\tif (index >= 0) {\n\t\t\t\tgrid.grid.selectSingleRecord(index);\n\t\t\t} else {\n\t\t\t\tgrid.grid.deselectAllRecords();\n\t\t\t}\n\t\t} finally {\n\t\t\tgrid.grid.selectionUpdated = method;\n\t\t}\n\t},\n\n\t/**\n\t * Manages the visibility and enabling/disabling of the action panel tools.\n\t *\n\t * @param {Object} values - the values that determine the action panel visibility.\n\t * @param {boolean} onlyView - flag indicating if the current view is read-only.\n\t */\n\t_manageActionPanel: function (values, onlyView) {\n\t\tconst members = this._actionPanel.getMembers();\n\t\tif (members.length === 0) {\n\t\t\tthis._actionPanel.hide();\n\t\t}\n\n\t\tmembers.forEach((tool) => {\n\t\t\tconst shouldHide =\n\t\t\t\t(values.created && tool.forCreate != null && tool.forCreate) ||\n\t\t\t\t(values.notCreated && tool.forCreate != null && !tool.forCreate);\n\n\t\t\tif (shouldHide) {\n\t\t\t\tthis._showHide(tool, this._actionPanel, values, true);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._enableDisable(tool, this._actionPanel, values);\n\n\t\t\tif (tool.actionName) {\n\t\t\t\tthis._handleToolVisibility(tool, values, onlyView);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Manages the visibility of action panel tools based on the current state and context.\n\t *\n\t * @param {Object} tool - the tool object from the action panel.\n\t * @param {Object} values - the current values object containing state information (e.g., `persisted`).\n\t * @param {boolean} onlyView - indicates if the current view is the only active view.\n\t */\n\t_handleToolVisibility: function (tool, values, onlyView) {\n\t\tif (this._b) {\n\t\t\tthis._showHide(\n\t\t\t\ttool,\n\t\t\t\tthis._actionPanel,\n\t\t\t\tvalues,\n\t\t\t\t[\"OK\", \"Save\", \"Cancel\", \"Delete\"].includes(tool.type) ||\n\t\t\t\t\t(tool.type === \"Remove\" &&\n\t\t\t\t\t\t(this._openedFromDataGrid === undefined ||\n\t\t\t\t\t\t\t!this._openedFromDataGrid ||\n\t\t\t\t\t\t\t(!tool._canDelete && values.persisted))),\n\t\t\t);\n\t\t} else {\n\t\t\tthis._showHide(\n\t\t\t\ttool,\n\t\t\t\tthis._actionPanel,\n\t\t\t\tvalues,\n\t\t\t\t[\"ZoomOut\", \"Remove\"].includes(tool.type) ||\n\t\t\t\t\t(!values[\"persisted\"] && tool.type === \"Delete\") ||\n\t\t\t\t\t(onlyView && [\"Delete\", \"OK\", \"Cancel\"].includes(tool.type)),\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Displays growls and messages based on the provided data.\n\t *\n\t * @param {Array} growls - the growl messages to be displayed.\n\t * @param {Array} messages - the informational or warning messages to be displayed.\n\t */\n\t_displayGrowlsAndMessages: function (growls, messages) {\n\t\tif (growls) {\n\t\t\tisc.BizUtil.growl(growls);\n\t\t}\n\n\t\tif (messages) {\n\t\t\tconst markup =\n\t\t\t\tmessages.length > 1\n\t\t\t\t\t? `<ul>${messages.map((message) => `<li>${message.summary}</li>`).join(\"\")}</ul>`\n\t\t\t\t\t: messages[0].summary;\n\t\t\tconst warn = messages.some((message) => message.severity !== \"info\");\n\t\t\twarn ? isc.warn(markup) : isc.say(markup);\n\t\t}\n\t},\n\n\t/**\n\t * Refreshes all visible list grids, with options for forced refresh and post-refresh conditions.\n\t *\n\t * @param {boolean} forceRefresh - if true, clears the list of already refreshed grids to force a full refresh.\n\t * @param {boolean} forcePostRefresh - if true, forces refresh even for grids that normally skip post-refresh.\n\t * @param {Object} values - the values used for evaluating grid refresh conditions.\n\t */\n\trefreshListGrids: function (forceRefresh, forcePostRefresh, values) {\n\t\tif (forceRefresh) {\n\t\t\tthis._refreshedGrids = {};\n\t\t}\n\n\t\t// Iterate through all grid bindings\n\t\tfor (const gridBinding in this._grids) {\n\t\t\tconst grids = this._grids[gridBinding];\n\n\t\t\tfor (const gridID in grids) {\n\t\t\t\tconst grid = grids[gridID];\n\n\t\t\t\tif (this._refreshedGrids[gridID]) {\n\t\t\t\t\tcontinue; // Skip already refreshed grids\n\t\t\t\t}\n\n\t\t\t\tif (grid.isVisible()) {\n\t\t\t\t\t// Only refresh visible grids\n\n\t\t\t\t\tconst shouldRefresh =\n\t\t\t\t\t\tforcePostRefresh ||\n\t\t\t\t\t\tgrid.postRefreshConditionName === undefined ||\n\t\t\t\t\t\tthis._evaluateConditionName(grid.postRefreshConditionName, values);\n\n\t\t\t\t\tif (!shouldRefresh) {\n\t\t\t\t\t\tcontinue; // Skip if the condition doesn't allow refresh\n\t\t\t\t\t}\n\n\t\t\t\t\tif (grid.webmap) {\n\t\t\t\t\t\t// Refresh map grids\n\t\t\t\t\t\tgrid.rerender();\n\t\t\t\t\t} else if (grid.rootIdBinding) {\n\t\t\t\t\t\t// Handle tree grids with root binding\n\t\t\t\t\t\tif (grid.hasDataSource()) {\n\t\t\t\t\t\t\tconst existingRootValue = grid.grid\n\t\t\t\t\t\t\t\t.getDataSource()\n\t\t\t\t\t\t\t\t.getField(\"bizParentId\").rootValue;\n\t\t\t\t\t\t\tconst newRootValue = `_${grid._view._vm.getValue(\n\t\t\t\t\t\t\t\tgrid.rootIdBinding,\n\t\t\t\t\t\t\t)}`;\n\n\t\t\t\t\t\t\tif (existingRootValue !== newRootValue) {\n\t\t\t\t\t\t\t\tgrid.setDataSource(grid.dataSource);\n\t\t\t\t\t\t\t} else if (grid.autoPopulate) {\n\t\t\t\t\t\t\t\tgrid.refresh();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tgrid.setDataSource(grid.dataSource);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (grid.dataSource) {\n\t\t\t\t\t\t// Handle list grids or tree grids\n\t\t\t\t\t\tif (grid.hasDataSource()) {\n\t\t\t\t\t\t\tif (grid.autoPopulate) {\n\t\t\t\t\t\t\t\tgrid.refresh();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tgrid.setDataSource(grid.dataSource);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._refreshedGrids[gridID] = true; // Mark grid as refreshed\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Extracts values from view controls into the instance.\n\t * If validation errors exist, returns null.\n\t *\n\t * @param {boolean} validate - determines whether to perform validation before gathering data.\n\t * @returns {Object|null} - the gathered data object or null if validation fails.\n\t */\n\tgather: function (validate) {\n\t\tif (validate && !this._vm.validate()) {\n\t\t\treturn null; // Return early if validation fails\n\t\t}\n\n\t\t// TODO: Add extra list validation here if necessary\n\n\t\treturn this._gather();\n\t},\n\n\t/**\n\t * Gathers and transforms scalar and list membership values from grids.\n\t * - Collects scalar values.\n\t * - Converts list memberships to arrays of bizIds.\n\t * - Transforms comparison trees into object hierarchies.\n\t * - Reorders data in grids for accurate representation.\n\t *\n\t * @returns {Object} - the gathered and transformed result object.\n\t */\n\t_gather: function () {\n\t\t// Collect all scalar values from the values manager\n\t\tconst result = this._vm.getValues();\n\n\t\t// Iterate through each grid binding and process the data\n\t\tfor (const gridBinding in this._grids) {\n\t\t\tlet data = result[gridBinding];\n\n\t\t\tif (Array.isArray(data) && data.length > 0) {\n\t\t\t\tif (data[0].properties) {\n\t\t\t\t\t// Handle comparison widgets\n\t\t\t\t\tconst comparisons = this._grids[gridBinding];\n\t\t\t\t\tfor (const comparisonID in comparisons) {\n\t\t\t\t\t\tresult[gridBinding] = comparisons[comparisonID].getData();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst grids = this._grids[gridBinding];\n\n\t\t\t\t\tfor (const gridID in grids) {\n\t\t\t\t\t\tconst grid = grids[gridID];\n\t\t\t\t\t\tconst smartClientGrid = grid.grid;\n\n\t\t\t\t\t\tif (smartClientGrid) {\n\t\t\t\t\t\t\t// Ensure correct ordering when user reorders data via drag-and-drop\n\t\t\t\t\t\t\tsmartClientGrid.reorderData();\n\t\t\t\t\t\t\tdata = data.sortByProperty(grid._ordinal, true);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Process list memberships or aggregated references in data grids\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t(grid._candidateList && grid._memberList) ||\n\t\t\t\t\t\t\t(smartClientGrid?.fields?.length === 1 &&\n\t\t\t\t\t\t\t\tsmartClientGrid.fields[0].name === \"bizId\" &&\n\t\t\t\t\t\t\t\tsmartClientGrid.fields[0].type === \"enum\")\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (grid._ordinal) {\n\t\t\t\t\t\t\t\tgrid._memberList.reorderData();\n\t\t\t\t\t\t\t\tdata = data.sortByProperty(grid._ordinal, true);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Extract bizIds from list memberships\n\t\t\t\t\t\t\tresult[gridBinding] = data.map((item) => item.bizId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n\n\t/**\n\t * Evaluates a condition name against provided values.\n\t * - Returns true if conditionName is \"true\".\n\t * - Returns false if conditionName is \"false\".\n\t * - Otherwise, looks up the conditionName in the values object.\n\t *\n\t * @param {string} conditionName - the name of the condition to evaluate.\n\t * @param {Object} values - the values object to evaluate the condition against.\n\t * @returns {boolean} - the result of the condition evaluation.\n\t */\n\t_evaluateConditionName: function (conditionName, values) {\n\t\tif (!conditionName) return false;\n\n\t\tswitch (conditionName) {\n\t\t\tcase \"true\":\n\t\t\t\treturn true;\n\t\t\tcase \"false\":\n\t\t\t\treturn false;\n\t\t\tdefault:\n\t\t\t\treturn Boolean(values[conditionName]);\n\t\t}\n\t},\n\n\t/**\n\t * Processes and updates widgets in a container based on visibility, conditions, and value mappings.\n\t *\n\t * @param {Object} container - the BizContainer containing widgets.\n\t * @param {boolean} invisible - whether the current container is invisible.\n\t * @param {Object} values - ViewModel values with evaluated conditions.\n\t * @param {Object} valueMaps - value maps for select inputs.\n\t * @param {Array} toRerender - list of items to rerender after processing.\n\t */\n\t_processWidgets: function (\n\t\tcontainer,\n\t\tinvisible,\n\t\tvalues,\n\t\tvalueMaps,\n\t\ttoRerender,\n\t) {\n\t\tfor (const contained of container.contained) {\n\t\t\tthis._enableDisable(contained, container, values);\n\t\t\tconst containedInvisible =\n\t\t\t\tinvisible || this._showHide(contained, container, values, false);\n\n\t\t\t// Recursively process nested containers\n\t\t\tif (isc.isA.Function(contained.addContained)) {\n\t\t\t\tthis._processWidgets(\n\t\t\t\t\tcontained,\n\t\t\t\t\tcontainedInvisible,\n\t\t\t\t\tvalues,\n\t\t\t\t\tvalueMaps,\n\t\t\t\t\ttoRerender,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Process tab panes\n\t\t\tif (isc.isA.Function(contained.addBizTab)) {\n\t\t\t\tlet selectedTabNumber = contained.getSelectedTabNumber();\n\n\t\t\t\tfor (const bizTab of contained.bizTabs) {\n\t\t\t\t\tconst tabInvisible =\n\t\t\t\t\t\tcontainedInvisible ||\n\t\t\t\t\t\tthis._showHide(bizTab, contained, values, false);\n\t\t\t\t\tthis._enableDisable(bizTab, contained, values);\n\t\t\t\t\tthis._processWidgets(\n\t\t\t\t\t\tbizTab.pane,\n\t\t\t\t\t\ttabInvisible,\n\t\t\t\t\t\tvalues,\n\t\t\t\t\t\tvalueMaps,\n\t\t\t\t\t\ttoRerender,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Restore selected tab if specified in values\n\t\t\t\tconst selectedTabIndex = values[contained.selectedTabIndexBinding];\n\t\t\t\tif (selectedTabIndex !== undefined && selectedTabIndex != null) {\n\t\t\t\t\tselectedTabNumber = selectedTabIndex;\n\t\t\t\t}\n\t\t\t\tif (selectedTabNumber != null) {\n\t\t\t\t\tcontained.selectTab(selectedTabNumber);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Process form widgets\n\t\t\tif (isc.isA.Function(contained.getItems)) {\n\t\t\t\t// Manage form membership based on visibility\n\t\t\t\tif (containedInvisible) {\n\t\t\t\t\tthis._vm.members?.contains(contained) &&\n\t\t\t\t\t\tthis._vm.removeMember(contained);\n\t\t\t\t} else {\n\t\t\t\t\t(!this._vm.members || !this._vm.members.contains(contained)) &&\n\t\t\t\t\t\tthis._vm.addMember(contained);\n\t\t\t\t}\n\n\t\t\t\t// Process each form item\n\t\t\t\tfor (const item of contained.items) {\n\t\t\t\t\tthis._enableDisable(item, contained, values);\n\t\t\t\t\tif (!this._showHide(item, contained, values, false)) {\n\t\t\t\t\t\t// Manage value maps for lookup and selection inputs\n\t\t\t\t\t\tif (item.type === \"bizLookupDescription\") {\n\t\t\t\t\t\t\titem.setValueMapFromEditView(values);\n\t\t\t\t\t\t} else if ([\"select\", \"enum\", \"comboBox\"].includes(item.type)) {\n\t\t\t\t\t\t\tthis._updateValueMap(item, values, valueMaps);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to rerender list if necessary\n\t\t\tif (isc.isA.Function(contained.rerender)) {\n\t\t\t\ttoRerender.add(contained);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Updates the value map for a form item.\n\t *\n\t * @param {Object} item - the form item to update.\n\t * @param {Object} values - the evaluated form values.\n\t * @param {Object} valueMaps - predefined value maps.\n\t */\n\t_updateValueMap: function (item, values, valueMaps) {\n\t\tlet valueMap = {};\n\n\t\t// If the item has an option data source, fetch the data\n\t\tif (item.optionDataSource) {\n\t\t\tif (item.optionDataSource === isc.BizUtil.COMPLETE_DATA_SOURCE) {\n\t\t\t\tvalueMap[values[item.name]] = values[item.name];\n\t\t\t\titem.setValueMap(valueMap);\n\t\t\t} else {\n\t\t\t\titem.fetchData();\n\t\t\t\tvalueMap[values[item.name]] =\n\t\t\t\t\tvalues[`${item.name}_${item.displayField}`];\n\t\t\t\titem.setValueMap(valueMap);\n\t\t\t}\n\t\t}\n\t\t// Domain values must be in the bean\n\t\telse if (valueMaps && valueMaps[item.name]) {\n\t\t\tvalueMap = valueMaps[item.name];\n\t\t\titem.setValueMap(valueMap);\n\t\t}\n\t},\n\n\t/**\n\t * Updates the enabled/disabled state of widget actions based on provided conditions.\n\t *\n\t * @param {Object} widget - the widget whose state needs updating.\n\t * @param {Object} parent - the parent container of the widget.\n\t * @param {Object} values - the values to evaluate against conditions.\n\t */\n\t_enableDisable: function (widget, parent, values) {\n\t\t// Helper function to update a widget's capability based on a condition name\n\t\tconst updateCapability = (capabilityKey, conditionName) => {\n\t\t\tif (widget[conditionName]) {\n\t\t\t\twidget[capabilityKey] = !this._evaluateConditionName(\n\t\t\t\t\twidget[conditionName],\n\t\t\t\t\tvalues,\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\tupdateCapability(\"canPick\", \"disablePickConditionName\");\n\t\tupdateCapability(\"canAdd\", \"disableAddConditionName\");\n\t\tupdateCapability(\"canZoom\", \"disableZoomConditionName\");\n\t\tupdateCapability(\"canEdit\", \"disableEditConditionName\");\n\t\tupdateCapability(\"canRemove\", \"disableRemoveConditionName\");\n\t\tupdateCapability(\"canClear\", \"disableClearConditionName\");\n\n\t\t// Set overall disabled state based on a specific condition\n\t\tthis._setDisabled(widget, parent, widget.disabledConditionName, values);\n\t},\n\n\t/**\n\t * Updates the disabled state of a widget and its related parent components based on a condition.\n\t *\n\t * @param {Object} widget - the widget to enable or disable.\n\t * @param {Object} parent - the parent container of the widget.\n\t * @param {string} disabledConditionName - the condition name used for evaluation.\n\t * @param {Object} values - the values to evaluate the condition against.\n\t */\n\t_setDisabled: function (widget, parent, disabledConditionName, values) {\n\t\t// Evaluate whether the widget should be disabled\n\t\tconst isDisabled = this._evaluateConditionName(\n\t\t\tdisabledConditionName,\n\t\t\tvalues,\n\t\t);\n\n\t\t// Set required state if applicable (visibility takes precedence)\n\t\tif (\n\t\t\twidget.bizRequired &&\n\t\t\twidget.setRequired &&\n\t\t\twidget.isVisible &&\n\t\t\twidget.isVisible()\n\t\t) {\n\t\t\twidget.setRequired(!isDisabled);\n\t\t}\n\n\t\t// Directly set disabled state if the method exists\n\t\tif (widget.setDisabled) {\n\t\t\twidget.setDisabled(isDisabled);\n\t\t}\n\t\t// Fallback to enable/disable methods if available\n\t\telse if (widget.enable && widget.disable) {\n\t\t\tisDisabled ? widget.disable() : widget.enable();\n\t\t}\n\t\t// Handle tab disabling in parent container if applicable\n\t\telse if (parent && parent.enableTab && parent.disableTab && widget.pane) {\n\t\t\tconst tab = parent.tabForPane(widget.pane);\n\t\t\tconst tabIndex = parent.getTabNumber(tab);\n\n\t\t\tif (tabIndex >= 0) {\n\t\t\t\tisDisabled ? parent.disableTab(tab) : parent.enableTab(tab);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Applies a disabled state to a widget based on the provided binding and condition.\n\t *\n\t * @param {string} binding - the binding key used to retrieve the widget.\n\t * @param {string} disabledConditionName - the condition name used to determine if the widget should be disabled.\n\t */\n\tsetDisabled: function (binding, disabledConditionName) {\n\t\tconst widget = this._vm.getItem(binding);\n\n\t\tif (!widget) {\n\t\t\treturn; // Early exit if widget is not found\n\t\t}\n\n\t\tconst values = this.gather(false);\n\t\tthis._updateDisabledState(widget, null, disabledConditionName, values);\n\t},\n\n\t/**\n\t * Toggles the disabled state of a widget based on its current state.\n\t * If the widget is disabled, it will be enabled, and vice versa.\n\t *\n\t * @param {string} binding - the binding key used to retrieve the widget.\n\t */\n\ttoggleDisabled: function (binding) {\n\t\tconst widget = this._vm.getItem(binding);\n\n\t\tif (!widget) {\n\t\t\treturn; // Early return if widget is not found\n\t\t}\n\n\t\tconst disabledState = widget.isDisabled() ? \"false\" : \"true\";\n\t\tthis._setDisabled(widget, null, disabledState, null);\n\t},\n\n\t/**\n\t * Toggles the visibility state of a widget based on its current state.\n\t * If the widget is visible, it will be hidden, and vice versa.\n\t *\n\t * @param {string} binding - the binding key used to retrieve the widget.\n\t */\n\ttoggleVisibility: function (binding) {\n\t\tconst widget = this._vm.getItem(binding);\n\n\t\tif (!widget) {\n\t\t\treturn; // Early return if widget is not found\n\t\t}\n\n\t\tconst visibilityState = widget.isVisible() ? \"true\" : \"false\";\n\t\tthis._setInvisible(widget, null, visibilityState, null);\n\t},\n\n\t/**\n\t * Determines whether a widget should be visible or not, and applies the visibility state.\n\t * If forced to be invisible, the widget will be hidden regardless of its condition.\n\t *\n\t * @param {Object} widget - the widget whose visibility will be updated.\n\t * @param {Object} parent - the parent container of the widget.\n\t * @param {Object} values - the values to evaluate against the widget's condition.\n\t * @param {boolean} forceInvisible - whether the widget should be forced to be invisible (optional).\n\t * @returns {boolean} - the result of the `_setInvisible` method, which determines the widget's visibility.\n\t */\n\t_showHide: function (widget, parent, values, forceInvisible) {\n\t\t// Apply forced invisibility if specified\n\t\treturn this._setInvisible(\n\t\t\twidget,\n\t\t\tparent,\n\t\t\twidget.invisibleConditionName,\n\t\t\tvalues,\n\t\t\tforceInvisible,\n\t\t);\n\t},\n\n\t/**\n\t * Determines whether a widget should be visible or invisible based on conditions and forced invisibility.\n\t * Applies the visibility state and updates the widget or parent container accordingly.\n\t *\n\t * @param {Object} widget - the widget whose visibility will be updated.\n\t * @param {Object} parent - the parent container of the widget.\n\t * @param {string} invisibleConditionName - the condition to evaluate for widget invisibility.\n\t * @param {Object} values - the values used to evaluate the invisibility condition.\n\t * @param {boolean} [forceInvisible=false] - if set to `true`, forces the widget to be invisible regardless of the condition.\n\t * @returns {boolean} - the final invisibility state (`true` if invisible, `false` otherwise).\n\t */\n\t_setInvisible: function (\n\t\twidget,\n\t\tparent,\n\t\tinvisibleConditionName,\n\t\tvalues,\n\t\tforceInvisible = false,\n\t) {\n\t\tlet invisible = forceInvisible;\n\n\t\tif (!invisible) {\n\t\t\tinvisible = this._evaluateConditionName(invisibleConditionName, values);\n\t\t}\n\n\t\t// Adjust 'required' state based on visibility\n\t\tif (widget.bizRequired && widget.setRequired) {\n\t\t\tif (invisible) {\n\t\t\t\twidget.setRequired(false);\n\t\t\t} else if (widget.isDisabled && !widget.isDisabled()) {\n\t\t\t\twidget.setRequired(true);\n\t\t\t}\n\t\t}\n\n\t\t// Apply visibility changes based on widget type and conditions\n\t\tif (widget.show && widget.hide) {\n\t\t\tinvisible ? widget.hide() : widget.show();\n\t\t} else if (parent) {\n\t\t\tinvisible ? parent.hideMember(widget) : parent.showMember(widget);\n\t\t}\n\n\t\treturn invisible;\n\t},\n\n\t/**\n\t * Sets the visibility of a widget based on a condition name. If the widget exists, it will evaluate the invisibility condition and apply the corresponding visibility state.\n\t *\n\t * @param {string} binding - the binding key used to retrieve the widget.\n\t * @param {string} invisibleConditionName - the condition to evaluate for widget invisibility.\n\t */\n\tsetInvisible: function (binding, invisibleConditionName) {\n\t\tconst widget = this._vm.getItem(binding);\n\n\t\tif (!widget) {\n\t\t\treturn; // Early return if widget is not found\n\t\t}\n\n\t\tconst values = this.gather(false);\n\t\tthis._setInvisible(widget, null, invisibleConditionName, values);\n\t},\n});\n\n/**\n * Implements the BizButton UI component.\n * Extends IButton from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizButton\", \"IButton\");\n\nisc.BizButton.addMethods({\n\tinitWidget: function () {\n\t\t// Determines whether the button should auto fit based on provided width and height arguments\n\t\tthis.autoFit = !(arguments[0].width || arguments[0].height);\n\t\tthis.hasDisabledIcon = false;\n\n\t\t// Sets the title of the button (display name)\n\t\tthis.title = this.displayName || null;\n\n\t\t// Sets up the tooltip if provided\n\t\tif (this.tooltip) {\n\t\t\tthis.canHover = true;\n\t\t\tthis.getHoverHTML = function () {\n\t\t\t\treturn this.tooltip;\n\t\t\t};\n\t\t}\n\n\t\t// Configures the disabled icon behavior if an icon is set\n\t\tif (this.icon) {\n\t\t\tthis.showDisabledIcon = this.hasDisabledIcon;\n\t\t}\n\n\t\t// Defines the action triggered on button click\n\t\tthis.action = function () {\n\t\t\tif (this._view && this._view._blurry) {\n\t\t\t\tthis._view._blurry = this;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.confirm) {\n\t\t\t\tisc.ask(\n\t\t\t\t\tthis.confirm,\n\t\t\t\t\t(value) => {\n\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\tthis._action();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ title: \"Confirm\" },\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis._action();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Executes the appropriate action based on the `type` property of the button.\n\t\t * Supports actions like 'OK', 'Save', 'Cancel', 'Delete', 'Export', 'Import', etc.\n\t\t *\n\t\t * @method _action\n\t\t * @private\n\t\t * @returns {void}\n\t\t */\n\t\tthis._action = function () {\n\t\t\tconst validate = this.validate === undefined ? true : this.validate;\n\n\t\t\t// Declare variables outside the switch to avoid redefinition\n\t\t\tlet instance, opener, gridBinding, bizId, url;\n\n\t\t\t// Handle different button types\n\t\t\tswitch (this.type) {\n\t\t\t\tcase \"OK\":\n\t\t\t\t\t// Save action on edit view\n\t\t\t\t\tthis._view.saveInstance(validate, this.actionName);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Save\":\n\t\t\t\t\t// Save action on edit view with success message\n\t\t\t\t\tthis._view.saveInstance(validate, this.actionName, () => {\n\t\t\t\t\t\tisc.BizUtil.growl(\n\t\t\t\t\t\t\t[{ severity: \"info\", summary: \"Saved\", detail: \"Changes Saved\" }],\n\t\t\t\t\t\t\t3000,\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Add\":\n\t\t\t\t\t// Add action on child edit view\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ZoomOut\": {\n\t\t\t\t\t// Handle ZoomOut action with changes validation\n\t\t\t\t\tinstance = this._view.gather(false);\n\t\t\t\t\tconst { _apply: apply, _changed: changedOnServer } = instance;\n\t\t\t\t\tif (apply || changedOnServer || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\tthis._view.saveInstance(validate, this.actionName);\n\t\t\t\t\t} else {\n\t\t\t\t\t\topener = isc.WindowStack.getOpener();\n\t\t\t\t\t\tisc.WindowStack.popoff(this._view._saved);\n\t\t\t\t\t\topener._source = null;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase \"Cancel\": {\n\t\t\t\t\t// Cancel action with unsaved changes check\n\t\t\t\t\tinstance = this._view.gather(false);\n\t\t\t\t\tconst { _changed: changedOnServerCancel } = instance;\n\t\t\t\t\topener = isc.WindowStack.getOpener();\n\n\t\t\t\t\tif (changedOnServerCancel || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\tisc.ask(\n\t\t\t\t\t\t\t`There are unsaved changes in the ${this._view._singular}. Do you wish to cancel?`,\n\t\t\t\t\t\t\t(value) => {\n\t\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\t\tisc.WindowStack.popoff(this._view._saved);\n\t\t\t\t\t\t\t\t\topener._source = null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ title: \"Discard Unsaved Changes?\" },\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tisc.WindowStack.popoff(this._view._saved);\n\t\t\t\t\t\topener._source = null;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase \"Delete\":\n\t\t\t\t\t// Delete action on edit view\n\t\t\t\t\tthis._view.deleteInstance(validate);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Remove\":\n\t\t\t\t\t// Remove action on child edit view\n\t\t\t\t\tinstance = this._view.gather(false);\n\t\t\t\t\tbizId = instance.bizId;\n\t\t\t\t\tgridBinding = this._view._b.substring(\n\t\t\t\t\t\tthis._view._b.lastIndexOf(\".\") + 1,\n\t\t\t\t\t\tthis._view._b.lastIndexOf(\"ElementById\"),\n\t\t\t\t\t);\n\t\t\t\t\topener = isc.WindowStack.getOpener();\n\n\t\t\t\t\tif (opener) {\n\t\t\t\t\t\tconst openerListGrids = opener._grids[gridBinding];\n\t\t\t\t\t\tif (openerListGrids) {\n\t\t\t\t\t\t\tfor (const openerListGridID in openerListGrids) {\n\t\t\t\t\t\t\t\tconst openerListGrid = openerListGrids[openerListGridID];\n\t\t\t\t\t\t\t\topenerListGrid.remove(bizId);\n\t\t\t\t\t\t\t\tif (openerListGrid.bizRemoved) {\n\t\t\t\t\t\t\t\t\topenerListGrid.bizRemoved();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\topener._vm.setValue(\"_apply\", true);\n\t\t\t\t\t}\n\t\t\t\t\tisc.WindowStack.popoff(false);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Report\":\n\t\t\t\t\t// Report action\n\t\t\t\t\tisc.ReportDialog.popupReport(this._view, this.params);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"BizExport\":\n\t\t\t\t\t// BizExport action\n\t\t\t\t\tinstance = this._view.gather(false);\n\t\t\t\t\tif (instance) {\n\t\t\t\t\t\tthis._view.saveInstance(validate, null, () => {\n\t\t\t\t\t\t\twindow.location.assign(\n\t\t\t\t\t\t\t\t`bizexport.xls?_n=${this.actionName}&_doc=${this._view._mod}.${\n\t\t\t\t\t\t\t\t\tthis._view._doc\n\t\t\t\t\t\t\t\t}&_c=${instance._c}&_ctim=${new Date().getTime()}`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"BizImport\":\n\t\t\t\t\t// BizImport action\n\t\t\t\t\tinstance = this._view.gather(false);\n\t\t\t\t\tif (instance) {\n\t\t\t\t\t\turl = `bizImport.xhtml?_a=${this.actionName}&_c=${instance._c}`;\n\t\t\t\t\t\tif (this._view._b) {\n\t\t\t\t\t\t\turl += `&_b=${this._view._b.replaceAll(\"_\", \".\")}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._view.saveInstance(validate, null, () => {\n\t\t\t\t\t\t\tisc.WindowStack.popup(null, \"BizPort Import\", true, [\n\t\t\t\t\t\t\t\tisc.HTMLPane.create({\n\t\t\t\t\t\t\t\t\tcontentsType: \"page\",\n\t\t\t\t\t\t\t\t\tcontents: \"Loading Page...\",\n\t\t\t\t\t\t\t\t\tcontentsURL: url,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Download\":\n\t\t\t\t\t// Download action\n\t\t\t\t\tthis._view.doAction(this.actionName, validate);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Upload\":\n\t\t\t\t\t// Upload action\n\t\t\t\t\tinstance = this._view.gather(false);\n\t\t\t\t\tif (instance) {\n\t\t\t\t\t\turl = `fileUpload.xhtml?_a=${this.actionName}&_c=${instance._c}`;\n\t\t\t\t\t\tif (this._view._b) {\n\t\t\t\t\t\t\turl += `&_b=${this._view._b.replaceAll(\"_\", \".\")}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._view.saveInstance(validate, null, () => {\n\t\t\t\t\t\t\tisc.WindowStack.popup(null, \"Upload\", true, [\n\t\t\t\t\t\t\t\tisc.HTMLPane.create({\n\t\t\t\t\t\t\t\t\tcontentsType: \"page\",\n\t\t\t\t\t\t\t\t\tcontents: \"Loading Page...\",\n\t\t\t\t\t\t\t\t\tcontentsURL: url,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Navigate\":\n\t\t\t\t\t// Navigate to a binding within a conversation\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Print\":\n\t\t\t\t\t// Print action\n\t\t\t\t\tisc.ReportDialog.popupReport(this._view, {\n\t\t\t\t\t\t_mod: this._view._mod,\n\t\t\t\t\t\t_doc: this._view._doc,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t// Default action\n\t\t\t\t\tthis._view.doAction(this.actionName, validate);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n});\n\n/**\n * Implements the BizZoomIn UI component.\n * Extends IButton from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizZoomIn\", \"IButton\");\n\nisc.BizZoomIn.addMethods({\n\tinitWidget: function () {\n\t\tthis.autoFit = !(arguments[0].width || arguments[0].height);\n\t\tthis.hasDisabledIcon = false;\n\n\t\tthis.title = this.displayName || null;\n\n\t\tif (this.tooltip) {\n\t\t\tthis.canHover = true;\n\t\t\tthis.getHoverHTML = function () {\n\t\t\t\treturn this.tooltip;\n\t\t\t};\n\t\t}\n\n\t\tif (this.icon) {\n\t\t\tthis.showDisabledIcon = this.hasDisabledIcon;\n\t\t}\n\n\t\t/**\n\t\t * Action triggered when the zoom in button is clicked.\n\t\t */\n\t\tthis.action = () => {\n\t\t\t// Validate here so we can show the zoom message if required\n\t\t\tconst instance = this._view.gather(true);\n\n\t\t\tif (instance) {\n\t\t\t\tconst bizId = instance[this.binding];\n\t\t\t\tif (bizId) {\n\t\t\t\t\t// Get the view polymorphically\n\t\t\t\t\tisc.BizUtil.getEditView(\n\t\t\t\t\t\tinstance[this.binding + \"_bizModule\"],\n\t\t\t\t\t\tinstance[this.binding + \"_bizDocument\"],\n\t\t\t\t\t\t(view) => {\n\t\t\t\t\t\t\t// Determine the view binding\n\t\t\t\t\t\t\tconst viewBinding = this._view._b\n\t\t\t\t\t\t\t\t? `${this._view._b}.${this.binding}`\n\t\t\t\t\t\t\t\t: this.binding;\n\n\t\t\t\t\t\t\tconst fromRect = this.getPageRect();\n\n\t\t\t\t\t\t\tif (instance._apply || this._view._vm.valuesHaveChanged()) {\n\t\t\t\t\t\t\t\tdelete instance._apply;\n\t\t\t\t\t\t\t\t// Apply changes to the current form before zooming in\n\t\t\t\t\t\t\t\tthis._view.saveInstance(true, null, () => {\n\t\t\t\t\t\t\t\t\tisc.WindowStack.popup(fromRect, \"Edit\", false, [view]);\n\t\t\t\t\t\t\t\t\tview.editInstance(bizId, viewBinding, instance._c, false);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tisc.WindowStack.popup(fromRect, \"Edit\", false, [view]);\n\t\t\t\t\t\t\t\tview.editInstance(bizId, viewBinding, instance._c, false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tisc.warn(\"You cannot zoom in to an empty reference\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisc.warn(\"You cannot zoom in until you fix the problems found\");\n\t\t\t}\n\t\t};\n\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n});\n\n// TODO: Dialog button\n\n/**\n * Implements the BizVBox UI component.\n * Extends VLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizVBox\", \"VLayout\");\n\nisc.BizVBox.addMethods({\n\tinitWidget: function () {\n\t\tthis.contained = [];\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n\n\t/**\n\t * Adds a widget to the contained array and to the layout's members.\n\t *\n\t * @function\n\t * @name BizVBox#addContained\n\t * @param {Widget} contained - the widget to add\n\t * @returns {void}\n\t */\n\taddContained: function (contained) {\n\t\tthis.contained.add(contained);\n\t\tthis.addMember(contained);\n\t},\n});\n\n/**\n * Implements the BizHBox UI component.\n * Extends HLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizHBox\", \"HLayout\");\n\nisc.BizHBox.addMethods({\n\tinitWidget: function () {\n\t\tthis.contained = [];\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n\n\t/**\n\t * Adds a widget to the contained array and to the layout's members.\n\t *\n\t * @function\n\t * @name BizHBox#addContained\n\t * @param {Widget} contained - the widget to add\n\t * @returns {void}\n\t */\n\taddContained: function (contained) {\n\t\tthis.contained.add(contained);\n\t\tthis.addMember(contained);\n\t},\n});\n\n/**\n * Implements the BizCollapsible UI component.\n * Extends VLayout fromthe SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizCollapsible\", \"VLayout\");\n\nisc.BizCollapsible.addMethods({\n\tinitWidget: function (config) {\n\t\tthis.contained = [];\n\t\tthis.minimized = config.minimized;\n\n\t\tthis.Super(\"initWidget\", { width: \"100%\", height: \"100%\" });\n\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\tthis.guts = isc.Window.create({\n\t\t\ttitle: config.title,\n\t\t\tautoDraw: true, // Required for render in tab panes\n\t\t\tautoSize: true, // Required for render in tab panes\n\t\t\theight: \"100%\", // Width set in draw method below\n\t\t\tcanDragReposition: false,\n\t\t\tcanDragResize: false,\n\t\t\tshowCloseButton: false,\n\t\t\tanimateMinimize: false,\n\t\t\theaderLabelProperties: {\n\t\t\t\twidth: \"100%\",\n\t\t\t\tclick: () => {\n\t\t\t\t\t// Toggle between minimized and restored state\n\t\t\t\t\tthis.guts.minimized ? this.guts.restore() : this.guts.minimize();\n\t\t\t\t},\n\t\t\t},\n\t\t\trestore: function () {\n\t\t\t\tif (me._view.isVisible()) {\n\t\t\t\t\tme._view.delayCall(\"refreshListGrids\", [\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tme._view.gather(false),\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t\t// reset max height to default\n\t\t\t\tme.setProperty(\"maxHeight\", 10000);\n\t\t\t\tthis.Super(\"restore\", arguments);\n\t\t\t},\n\t\t\tminimize: function () {\n\t\t\t\tme.setHeight(30);\n\t\t\t\tme.setProperty(\"maxHeight\", 30);\n\t\t\t\tthis.Super(\"minimize\", arguments);\n\t\t\t},\n\t\t});\n\t\tthis.addMember(this.guts);\n\n\t\t// Timer to throttle resize callbacks and prevent infinite loops\n\t\tthis._resizeTimer = null;\n\t},\n\n\t/**\n\t * Sets the width of the window to match the parent's width at draw time.\n\t *\n\t * @function\n\t * @name BizCollapsible#draw\n\t * @returns {void}\n\t */\n\tdraw: function () {\n\t\tif (this.guts) {\n\t\t\tthis.guts.setWidth(this.getWidth());\n\t\t}\n\t\treturn this.Super(\"draw\", arguments);\n\t},\n\n\t/**\n\t * Resizes the window and throttles resize events using a timer.\n\t *\n\t * @function\n\t * @name BizCollapsible#resized\n\t * @returns {void}\n\t */\n\tresized: function () {\n\t\tif (this.guts) {\n\t\t\tif (this._resizeTimer) {\n\t\t\t\tclearTimeout(this._resizeTimer);\n\t\t\t}\n\t\t\tthis._resizeTimer = setTimeout(() => {\n\t\t\t\tthis._resize();\n\t\t\t}, 100);\n\t\t}\n\t\tthis.Super(\"resized\", arguments);\n\t},\n\n\t/**\n\t * Resizes the window and resets the resize timer.\n\t *\n\t * @function\n\t * @name BizCollapsible#_resize\n\t * @returns {void}\n\t */\n\t_resize: function () {\n\t\tthis._resizeTimer = null;\n\t\tthis.guts.setWidth(this.getWidth());\n\t},\n\n\t/**\n\t * Adds a widget to the collapsible container.\n\t *\n\t * @function\n\t * @name BizCollapsible#addContained\n\t * @param {Widget} contained - the widget to add to the container\n\t * @returns {void}\n\t */\n\taddContained: function (contained) {\n\t\tthis.contained.add(contained);\n\t\tthis.guts.addItem(contained);\n\n\t\t// Minimize if required after contents are added (only 1 VBox, HBox, or Form)\n\t\tif (this.minimized) {\n\t\t\tthis.guts.minimize();\n\t\t}\n\t},\n});\n\n/**\n * Implements the BizTabPane UI component.\n * Extends TabSet from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizTabPane\", \"TabSet\");\n\nisc.BizTabPane.addMethods({\n\tinitWidget: function () {\n\t\tthis.tabs = [];\n\t\tthis.bizTabs = [];\n\t\tthis.destroyPanes = false; // Don't destroy the tab panes when removing, just show & hide\n\t\tthis.tabBarThickness = this.tabBarThickness || 30; // Default tab bar thickness (height)\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n\n\t/**\n\t * Handles the selection of a tab.\n\t *\n\t * @function\n\t * @param {number} tabNum - the tab number that was selected\n\t * @param {Object} tabPane - the tab pane object\n\t * @param {string} ID - the ID of the tab\n\t * @param {Object} tab - the selected tab object\n\t * @returns {void}\n\t */\n\ttabSelected: function (tabNum, tabPane, ID, tab) {\n\t\tif (this._view.isVisible()) {\n\t\t\tthis._view.delayCall(\"refreshListGrids\", [\n\t\t\t\tfalse,\n\t\t\t\tfalse,\n\t\t\t\tthis._view.gather(false),\n\t\t\t]);\n\t\t}\n\t},\n\n\t/**\n\t * Adds a custom tab definition to the BizTabPane and adds it to the visible tab set.\n\t *\n\t * @function\n\t * @param {BizTab} bizTab - the tab definition to add\n\t * @returns {void}\n\t */\n\taddBizTab: function (bizTab) {\n\t\tthis.bizTabs.add(bizTab);\n\t\tthis.addTab({\n\t\t\tname: bizTab.name,\n\t\t\ttitle: bizTab.title,\n\t\t\ticon: bizTab.icon,\n\t\t\tprompt: bizTab.prompt,\n\t\t\tpane: bizTab.pane,\n\t\t\tdisabledConditionName: bizTab.disabledConditionName,\n\t\t\tinvisibleConditionName: bizTab.invisibleConditionName,\n\t\t\tselectedConditionName: bizTab.selectedConditionName,\n\t\t});\n\t},\n\n\t/**\n\t * Shows a hidden member tab based on the provided bizTab definition.\n\t * If the tab is not already present, it attempts to find the correct position and adds it.\n\t *\n\t * @function\n\t * @name BizTabPane#showMember\n\t * @param {BizTab} bizTab - the bizTab definition to show\n\t * @returns {void}\n\t */\n\tshowMember: function (bizTab) {\n\t\tlet existingTabPosition = this.getTabNumber(bizTab.name);\n\t\tif (existingTabPosition < 0) {\n\t\t\t// Find the position to insert this tab\n\t\t\tlet tabPosition = 0; // Default position\n\t\t\tlet tabNumber = parseInt(bizTab.name, 10) - 1; // Start searching backwards\n\t\t\twhile (tabNumber >= 0) {\n\t\t\t\texistingTabPosition = this.getTabNumber(String(tabNumber));\n\t\t\t\tif (existingTabPosition >= 0) {\n\t\t\t\t\ttabPosition = existingTabPosition + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\ttabNumber--;\n\t\t\t}\n\t\t\tthis.addTab(\n\t\t\t\t{\n\t\t\t\t\tname: bizTab.name,\n\t\t\t\t\ttitle: bizTab.title,\n\t\t\t\t\tpane: bizTab.pane,\n\t\t\t\t\tdisabledConditionName: bizTab.disabledConditionName,\n\t\t\t\t\tinvisibleConditionName: bizTab.invisibleConditionName,\n\t\t\t\t\tselectedConditionName: bizTab.selectedConditionName,\n\t\t\t\t},\n\t\t\t\ttabPosition,\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t * Hides a member tab based on the provided bizTab definition.\n\t *\n\t * @function\n\t * @name BizTabPane#hideMember\n\t * @param {BizTab} bizTab - the bizTab definition to hide\n\t * @returns {void}\n\t */\n\thideMember: function (bizTab) {\n\t\tif (this.getTabNumber(bizTab.name) >= 0) {\n\t\t\tthis.removeTab(bizTab.name);\n\t\t}\n\t},\n});\n\n// TODO: HTML\n// TODO: Radio\n\n/**\n * Implements the BizListMembership UI component.\n * Extends HLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizListMembership\", \"HLayout\");\n\nisc.BizListMembership.addMethods({\n\tinitWidget: function (config) {\n\t\tthis.membersMargin = 10;\n\n\t\tconst me = this; // Required as parent and child scope is required\n\n\t\t// Create candidate list grid\n\t\tthis._candidateList = isc.ListGrid.create({\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tminHeight: 100,\n\t\t\tcanDragRecordsOut: true,\n\t\t\tcanAcceptDroppedRecords: true,\n\t\t\tdragDataAction: \"move\",\n\t\t\trecordDrop: function (dropRecords, targetRecord, index, sourceWidget) {\n\t\t\t\tthis.Super(\"recordDrop\", arguments);\n\n\t\t\t\tme._view._vm.setValue(\"_changed\", true); // mark the view as dirty\n\t\t\t\tme._view._vm.setValue(\"_apply\", true); // post view changes before zooming\n\t\t\t\tme.changed();\n\t\t\t},\n\t\t\talternateRecordStyles: true,\n\t\t\tautoFetchData: false,\n\t\t\tleaveScrollbarGap: false,\n\t\t\tshowHeaderContextMenu: false,\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tname: \"bizKey\",\n\t\t\t\t\ttitle: this.candidatesHeading ? this.candidatesHeading : \"Candidates\",\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\t// Create member list grid\n\t\tthis._memberList = isc.ListGrid.create({\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tminHeight: 100,\n\t\t\tcanDragRecordsOut: true,\n\t\t\tcanAcceptDroppedRecords: true,\n\t\t\tdragDataAction: \"move\",\n\t\t\tcanReorderRecords: config._ordinal ? true : false,\n\t\t\trecordDrop: function (dropRecords, targetRecord, index, sourceWidget) {\n\t\t\t\tthis.Super(\"recordDrop\", arguments);\n\n\t\t\t\tif (sourceWidget === this) {\n\t\t\t\t\t// Handle reorder drop\n\t\t\t\t\tthis.reorderData();\n\t\t\t\t}\n\n\t\t\t\tme._view._vm.setValue(\"_changed\", true); // mark the view as dirty\n\t\t\t\tme._view._vm.setValue(\"_apply\", true); // post view changes before zooming\n\t\t\t\tme.changed();\n\t\t\t},\n\t\t\t/**\n\t\t\t * Reorders the member list if the grid is orderable.\n\t\t\t */\n\t\t\treorderData: function () {\n\t\t\t\tif (config._ordinal) {\n\t\t\t\t\t// this grid is orderable\n\t\t\t\t\tconst data = this.getData();\n\t\t\t\t\tfor (let i = 0, l = data.length; i < l; i++) {\n\t\t\t\t\t\tdata[i][config._ordinal] = i + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\talternateRecordStyles: true,\n\t\t\tautoFetchData: false,\n\t\t\tleaveScrollbarGap: false,\n\t\t\tshowHeaderContextMenu: false,\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tname: \"bizKey\",\n\t\t\t\t\ttitle: this.membersHeading ? this.membersHeading : \"Members\",\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\t// Layout for BizListMembership widget\n\t\tthis.members = [\n\t\t\tthis._candidateList,\n\t\t\tisc.VLayout.create({\n\t\t\t\tlayoutAlign: \"center\",\n\t\t\t\tmembersMargin: 10,\n\t\t\t\theight: 75,\n\t\t\t\tmembers: [\n\t\t\t\t\t// Button for adding members\n\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\ticon: \"icons/memberAssign.png\",\n\t\t\t\t\t\ticonWidth: 24,\n\t\t\t\t\t\ticonHeight: 24,\n\t\t\t\t\t\ticonAlign: \"center\",\n\t\t\t\t\t\twidth: 36,\n\t\t\t\t\t\theight: 36,\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tthis._memberList.transferSelectedData(this._candidateList);\n\t\t\t\t\t\t\tthis._view._vm.setValue(\"_changed\", true); // mark the view as dirty\n\t\t\t\t\t\t\tthis._view._vm.setValue(\"_apply\", true); // post view changes before zooming\n\t\t\t\t\t\t\tthis.changed();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcanHover: true,\n\t\t\t\t\t\tgetHoverHTML: function () {\n\t\t\t\t\t\t\treturn \"Add the selected candidates.\";\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\t// Button for removing members\n\t\t\t\t\tisc.IButton.create({\n\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\ticon: \"icons/memberUnassign.png\",\n\t\t\t\t\t\ticonWidth: 24,\n\t\t\t\t\t\ticonHeight: 24,\n\t\t\t\t\t\ticonAlign: \"center\",\n\t\t\t\t\t\twidth: 36,\n\t\t\t\t\t\theight: 36,\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tthis._candidateList.transferSelectedData(this._memberList);\n\t\t\t\t\t\t\tthis._view._vm.setValue(\"_changed\", true); // mark the view as dirty\n\t\t\t\t\t\t\tthis._view._vm.setValue(\"_apply\", true); // post view changes before zooming\n\t\t\t\t\t\t\tthis.changed();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcanHover: true,\n\t\t\t\t\t\tgetHoverHTML: function () {\n\t\t\t\t\t\t\treturn \"Remove the selected members.\";\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t}),\n\t\t\tthis._memberList,\n\t\t];\n\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\t// Manage the grids in the view\n\t\tlet grids = this._view._grids[this._b];\n\t\tif (!grids) {\n\t\t\tgrids = {};\n\t\t\tthis._view._grids[this._b] = grids;\n\t\t}\n\t\tgrids[this.getID()] = this;\n\t},\n\n\t/**\n\t * Sets the data for the candidate and member lists.\n\t *\n\t * @param {Array} candidates - the data for the candidates.\n\t * @param {Array} members - the data for the members.\n\t */\n\tsetData: function (candidates, members) {\n\t\tthis._candidateList.setData(candidates);\n\t\tthis._memberList.setData(members);\n\t},\n\n\t/**\n\t * Handles changes to the lists. This method can be overridden during view generation.\n\t */\n\tchanged: function () {},\n});\n\n/**\n * Implements the BizComparison UI component.\n * Extends HLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizComparison\", \"HLayout\");\n\nisc.BizComparison.addMethods({\n\tinitWidget: function () {\n\t\tthis.canDragResize = true;\n\t\tthis.resizeFrom = [\"L\", \"R\"];\n\n\t\tthis._comparisonTree = isc.TreeGrid.create({\n\t\t\twidth: \"50%\",\n\t\t\theight: \"100%\",\n\t\t\tfields: [\n\t\t\t\t{ name: \"bizKey\", title: \"Document\" },\n\t\t\t\t{ name: \"relationship\", title: \"Relationship\" },\n\t\t\t],\n\t\t\tdata: isc.Tree.create({\n\t\t\t\tmodelType: \"parent\",\n\t\t\t\tidField: \"bizId\",\n\t\t\t\tparentIdField: \"parent\",\n\t\t\t\tdata: [],\n\t\t\t}),\n\t\t\tselectionUpdated: (record, recordList) => {\n\t\t\t\tif (record) {\n\t\t\t\t\tthis.setFormFields(record.properties);\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowOpenIcons: false,\n\t\t\tshowDropIcons: false,\n\t\t\tshowResizeBar: true,\n\t\t});\n\n\t\t/**\n\t\t * Generates hover HTML for diffing two items.\n\t\t * @param {Object} item - the item being hovered over.\n\t\t * @returns {string|null} the HTML diff if applicable.\n\t\t */\n\t\tconst hoverHTML = function (item) {\n\t\t\tif (item.type !== \"boolean\") {\n\t\t\t\tif (this.diff_match_patch) {\n\t\t\t\t\tlet newItem = item;\n\t\t\t\t\tlet oldItem = item;\n\t\t\t\t\tif (item.name.startsWith(\"_old_\")) {\n\t\t\t\t\t\tnewItem = this.getItem(item.name.substring(5));\n\t\t\t\t\t} else {\n\t\t\t\t\t\toldItem = this.getItem(\"_old_\" + item.name);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet newDisplayValue = newItem.getDisplayValue();\n\t\t\t\t\tlet oldDisplayValue = oldItem.getDisplayValue();\n\n\t\t\t\t\tif (newDisplayValue?.startsWith(\"<\")) {\n\t\t\t\t\t\tnewDisplayValue = \"\";\n\t\t\t\t\t}\n\t\t\t\t\tif (oldDisplayValue?.startsWith(\"<\")) {\n\t\t\t\t\t\toldDisplayValue = \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\tconst diffs = this.diff_match_patch.diff_main(\n\t\t\t\t\t\toldDisplayValue,\n\t\t\t\t\t\tnewDisplayValue,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t);\n\t\t\t\t\tthis.diff_match_patch.diff_cleanupEfficiency(diffs);\n\t\t\t\t\treturn this.diff_match_patch.diff_prettyHtml(diffs);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\n\t\tthis._comparisonForm = isc.PropertySheet.create({\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tnumCols: this.editable ? 5 : 4,\n\t\t\tcolWidths: this.editable ? [150, \"*\", 50, \"*\", 30] : [150, \"*\", \"*\", 30],\n\t\t\tborder: \"1px solid #A7ABB4\",\n\t\t\ttitleHoverHTML: hoverHTML,\n\t\t\tfields: [],\n\t\t});\n\n\t\tSKYVE.Util.loadJS(\n\t\t\t\"skyve/desktop/diff_match_patch.js?v=\" + SKYVE.Util.v,\n\t\t\t() => {\n\t\t\t\tthis._comparisonForm.diff_match_patch = new diff_match_patch();\n\t\t\t\tthis._comparisonForm.diff_match_patch.Diff_EditCost = 4;\n\t\t\t},\n\t\t);\n\n\t\tthis.members = [\n\t\t\tthis._comparisonTree,\n\t\t\tisc.VLayout.create({ overflow: \"auto\", members: [this._comparisonForm] }),\n\t\t];\n\n\t\tthis.Super(\"initWidget\", arguments);\n\n\t\tlet grids = this._view._grids[this._b];\n\t\tif (!grids) {\n\t\t\tgrids = {};\n\t\t\tthis._view._grids[this._b] = grids;\n\t\t}\n\t\tgrids[this.getID()] = this;\n\t},\n\n\t/**\n\t * Sets the data for the comparison tree.\n\t * @param {Array} data - the data to populate the tree with.\n\t */\n\tsetData: function (data) {\n\t\tthis._comparisonTree.setData(\n\t\t\tisc.Tree.create({\n\t\t\t\tmodelType: \"parent\",\n\t\t\t\tidField: \"bizId\",\n\t\t\t\tparentIdField: \"parent\",\n\t\t\t\tdata,\n\t\t\t}),\n\t\t);\n\t\tthis.setFormFields([]);\n\t},\n\n\t/**\n\t * Sets the fields for the form based on the given properties.\n\t * @param {Array} properties - the properties to populate the form with.\n\t */\n\tsetFormFields: function (properties) {\n\t\tconst fields = [\n\t\t\t{\n\t\t\t\ttype: \"blurb\",\n\t\t\t\talign: \"center\",\n\t\t\t\tcolSpan: 1,\n\t\t\t\tdefaultValue: \"Property\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tcellStyle: \"propSheetTitle\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: \"blurb\",\n\t\t\t\talign: \"center\",\n\t\t\t\tcolSpan: 1,\n\t\t\t\tdefaultValue: \"New\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tcellStyle: \"propSheetTitle\",\n\t\t\t},\n\t\t];\n\n\t\tif (this.editable) {\n\t\t\tfields.push({\n\t\t\t\ttitle: \"<<-\",\n\t\t\t\ttype: \"button\",\n\t\t\t\tclick() {\n\t\t\t\t\tfor (let i = 5; i < form.getFields().length - 4; i += 4) {\n\t\t\t\t\t\tconst old = form.getField(i + 2).getValue();\n\t\t\t\t\t\tform.getField(i).setValue(old ? old : \"\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\talign: \"center\",\n\t\t\t\tcellStyle: \"propSheetValue\",\n\t\t\t});\n\t\t}\n\n\t\tfields.push(\n\t\t\t{\n\t\t\t\ttype: \"blurb\",\n\t\t\t\talign: \"center\",\n\t\t\t\tcolSpan: 1,\n\t\t\t\tdefaultValue: \"Old\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tcellStyle: \"propSheetTitle\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: \"blurb\",\n\t\t\t\talign: \"center\",\n\t\t\t\tcolSpan: 1,\n\t\t\t\tdefaultValue: \"Diff\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tcellStyle: \"propSheetTitle\",\n\t\t\t},\n\t\t);\n\n\t\tproperties.forEach((prop) => {\n\t\t\tconst {\n\t\t\t\tname,\n\t\t\t\ttitle,\n\t\t\t\ttype,\n\t\t\t\teditorType,\n\t\t\t\tlength,\n\t\t\t\tvalueMap,\n\t\t\t\trequired,\n\t\t\t\tallowEmptyValue,\n\t\t\t} = prop;\n\n\t\t\tconst field = {\n\t\t\t\tname,\n\t\t\t\ttitle,\n\t\t\t\tshowTitle: true,\n\t\t\t\ttype,\n\t\t\t\twidth: \"*\",\n\t\t\t\tstartRow: true,\n\t\t\t\tendRow: false,\n\t\t\t\tcanEdit: this.editable,\n\t\t\t\tdefaultValue: prop.newValue,\n\t\t\t};\n\t\t\tconst oldField = {\n\t\t\t\tname: \"_old_\" + name,\n\t\t\t\tshowTitle: false,\n\t\t\t\ttype,\n\t\t\t\twidth: \"*\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tcanEdit: false,\n\t\t\t\tdefaultValue: prop.oldValue,\n\t\t\t};\n\n\t\t\tif (type === \"richText\" || editorType === \"richText\") {\n\t\t\t\tfield.controlGroups = [];\n\t\t\t\tfield.colSpan = 1;\n\t\t\t\toldField.controlGroups = [];\n\t\t\t\toldField.colSpan = 1;\n\t\t\t}\n\n\t\t\tif (editorType) {\n\t\t\t\tfield.editorType = editorType;\n\t\t\t\toldField.editorType = editorType;\n\t\t\t}\n\t\t\tif (length) {\n\t\t\t\tfield.length = length;\n\t\t\t\toldField.length = length;\n\t\t\t}\n\t\t\tif (valueMap) {\n\t\t\t\tfield.valueMap = valueMap;\n\t\t\t\toldField.valueMap = valueMap;\n\t\t\t}\n\t\t\tif (required) {\n\t\t\t\tfield.required = required;\n\t\t\t}\n\t\t\tif (allowEmptyValue) {\n\t\t\t\tfield.allowEmptyValue = allowEmptyValue;\n\t\t\t}\n\n\t\t\tfields.push(field);\n\n\t\t\tif (this.editable) {\n\t\t\t\tfields.push({\n\t\t\t\t\ttitle: \"<-\",\n\t\t\t\t\ttype: \"button\",\n\t\t\t\t\tclick() {\n\t\t\t\t\t\tconst old = form.getField(\"_old_\" + name).getValue();\n\t\t\t\t\t\tform.getField(name).setValue(old ? old : \"\");\n\t\t\t\t\t},\n\t\t\t\t\talign: \"center\",\n\t\t\t\t\tstartRow: false,\n\t\t\t\t\tendRow: false,\n\t\t\t\t\tcellStyle: \"propSheetValue\",\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfields.push(oldField);\n\n\t\t\tfields.push({\n\t\t\t\ttitle: \"...\",\n\t\t\t\ttype: \"button\",\n\t\t\t\tclick: function () {\n\t\t\t\t\tisc.say(this.form.titleHoverHTML(this.form.getField(name)), null, {\n\t\t\t\t\t\ttitle: \"Diff\",\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\talign: \"center\",\n\t\t\t\tstartRow: false,\n\t\t\t\tendRow: false,\n\t\t\t\tcellStyle: \"propSheetValue\",\n\t\t\t});\n\t\t});\n\n\t\tif (this.editable) {\n\t\t\tfields.push(\n\t\t\t\t{\n\t\t\t\t\ttype: \"spacer\",\n\t\t\t\t\tcolSpan: 5,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Apply Changes\",\n\t\t\t\t\ttype: \"button\",\n\t\t\t\t\tcolSpan: 4,\n\t\t\t\t\tstartRow: false,\n\t\t\t\t\tendRow: true,\n\t\t\t\t\talign: \"right\",\n\t\t\t\t\tclick: function (form, item) {\n\t\t\t\t\t\tconst values = form.getValues();\n\t\t\t\t\t\tconst properties =\n\t\t\t\t\t\t\tthis._comparisonTree.getSelectedRecord().properties;\n\n\t\t\t\t\t\tproperties.forEach((property) => {\n\t\t\t\t\t\t\tproperty.newValue = values[property.name];\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tisc.showPrompt(\n\t\t\t\t\t\t\t'<span style=\"font-size:medium\">Changes Applied</span>',\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tisc.clearPrompt();\n\t\t\t\t\t\t}, 500);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"spacer\",\n\t\t\t\t\tcolSpan: 5,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tthis._comparisonForm.setFields(fields);\n\t\tthis._comparisonForm.clearValues();\n\t},\n\n\t/**\n\t * Retrieves the JSON data from the comparison editor.\n\t * @returns {Object} the data in JSON format.\n\t * @memberof BizComparison\n\t */\n\tgetData: function () {\n\t\tconst result = this._getData(\n\t\t\tthis._comparisonTree.getData().getRoot().children[0],\n\t\t);\n\t\tdelete result._b;\n\t\tdelete result._t;\n\t\treturn result;\n\t},\n\n\t/**\n\t * Recursively builds the data structure from the tree node.\n\t * @param {Object} treeNode - the tree node to convert.\n\t * @returns {Object} the data structure for the node.\n\t * @private\n\t */\n\t_getData: function (treeNode) {\n\t\tconst result = {\n\t\t\tbizId: treeNode.bizId,\n\t\t\t_b: treeNode._b,\n\t\t\t_t: treeNode._t,\n\t\t};\n\n\t\ttreeNode.properties.forEach((property) => {\n\t\t\tresult[property.name] = property.newValue;\n\t\t});\n\n\t\tconst children = treeNode.children;\n\t\tif (children) {\n\t\t\tchildren.forEach((child) => {\n\t\t\t\tconst childResult = this._getData(child);\n\t\t\t\tconst binding = childResult._b;\n\t\t\t\tconst referenceType = childResult._t;\n\t\t\t\tdelete childResult._b;\n\t\t\t\tdelete childResult._t;\n\n\t\t\t\tconst existing = result[binding];\n\t\t\t\tif (existing) {\n\t\t\t\t\tif (!Array.isArray(existing)) {\n\t\t\t\t\t\tresult[binding] = [existing];\n\t\t\t\t\t}\n\t\t\t\t\tresult[binding].push(childResult);\n\t\t\t\t} else {\n\t\t\t\t\tresult[binding] = [childResult];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t},\n});\n\n// TODO: CheckMembership\n// TODO: PickView\n\n/**\n * Implements the BizDynamicImage UI component.\n * Extends VLayout from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizDynamicImage\", \"VLayout\");\n\nisc.BizDynamicImage.addMethods({\n\tinitWidget() {\n\t\tthis.overflow = \"hidden\";\n\t\tthis.wZoom = 100;\n\t\tthis.hZoom = 100;\n\n\t\t// TODO: Initialize parameters add properties dynamically based on parameters\n\n\t\tthis.members = [];\n\t\tthis.mouseWheelTimer = null;\n\n\t\t// Create context menu for image controls\n\t\tthis.contextMenu = isc.Menu.create({\n\t\t\tshowShadow: true,\n\t\t\tshadowDepth: 10,\n\t\t\tdata: this._createContextMenuData(),\n\t\t});\n\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n\n\t/**\n\t * Creates the context menu data for zoom and other actions.\n\t * @returns {Array} the context menu data structure.\n\t */\n\t_createContextMenuData: function () {\n\t\tconst zoomLevels = [50, 75, 100, 125, 150, 175, 200, 300, 400, 500];\n\t\tconst zoomMenuItems = zoomLevels.map((level) => ({\n\t\t\ttitle: `${level}%`,\n\t\t\tclick: () => this._zoom(level),\n\t\t}));\n\n\t\treturn [\n\t\t\t{\n\t\t\t\ttitle: \"Size\",\n\t\t\t\ticon: \"icons/mag.png\",\n\t\t\t\tsubmenu: zoomMenuItems,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Enlarge\",\n\t\t\t\ticon: \"icons/magIn.png\",\n\t\t\t\tclick: () => this._zoom(this.wZoom + 10),\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"Reduce\",\n\t\t\t\ticon: \"icons/magOut.png\",\n\t\t\t\tclick: () => this._zoom(this.wZoom - 10),\n\t\t\t},\n\t\t\t{ isSeparator: true },\n\t\t\t{\n\t\t\t\ttitle: \"Open\",\n\t\t\t\ticon: \"zoom.gif\",\n\t\t\t\tclick: () => this._open(),\n\t\t\t},\n\t\t\t{ isSeparator: true },\n\t\t\t{\n\t\t\t\ttitle: \"Refresh\",\n\t\t\t\ticon: \"refresh.png\",\n\t\t\t\tclick: () => this.rerender(),\n\t\t\t},\n\t\t];\n\t},\n\n\t/**\n\t * Adjusts the zoom level of the image.\n\t * @param {number} zoomLevel - the desired zoom level.\n\t * @param {boolean} [throttle=false] - whether to throttle the rerender call.\n\t */\n\t_zoom: function (zoomLevel, throttle = false) {\n\t\tif (zoomLevel > 0) {\n\t\t\tthis.wZoom = zoomLevel;\n\t\t\tthis.hZoom = zoomLevel;\n\n\t\t\tif (throttle) {\n\t\t\t\tif (this.mouseWheelTimer) {\n\t\t\t\t\tclearTimeout(this.mouseWheelTimer);\n\t\t\t\t}\n\t\t\t\tthis.mouseWheelTimer = setTimeout(() => {\n\t\t\t\t\tthis.rerender();\n\t\t\t\t}, 250);\n\t\t\t} else {\n\t\t\t\tthis.rerender();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Opens the image in a new window.\n\t */\n\t_open: function () {\n\t\tconst image = isc.BizDynamicImage.create({\n\t\t\tname: this.name,\n\t\t\tmoduleDotDocument: this.moduleDotDocument,\n\t\t\tformat: this.format,\n\t\t\t_view: this._view,\n\t\t});\n\t\tisc.WindowStack.popup(null, \"Image\", true, [image]);\n\t\timage.rerender();\n\t},\n\n\t/**\n\t * Handles resizing of the widget.\n\t */\n\tresized: function () {\n\t\tthis.rerender();\n\t},\n\n\t/**\n\t * Rerenders the image with updated dimensions and zoom level.\n\t */\n\trerender: function () {\n\t\tconst contextValue = this._view._vm.getValue(\"_c\");\n\t\tif (!contextValue) return; // Skip if no context value is available\n\n\t\tthis.mouseWheelTimer = null;\n\t\tthis._clearExistingImage();\n\n\t\tconst baseValue = this._view._b;\n\t\tconst { width, height } = this._calculateImageDimensions();\n\t\tconst imageSrc = this._generateImageSrc(\n\t\t\twidth,\n\t\t\theight,\n\t\t\tcontextValue,\n\t\t\tbaseValue,\n\t\t);\n\n\t\tthis._img = this._createImageElement(width, height, imageSrc);\n\t\tif (this.members) {\n\t\t\tthis.addMember(this._img);\n\t\t}\n\t},\n\n\t/**\n\t * Clears the existing image from the widget.\n\t */\n\t_clearExistingImage: function () {\n\t\tif (this.members && this.members.length === 1) {\n\t\t\tthis.removeMember(0);\n\t\t\tif (this._img) {\n\t\t\t\tthis._img.destroy();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Calculates the dimensions of the image.\n\t * @returns {Object} An object containing the calculated width and height.\n\t */\n\t_calculateImageDimensions: function () {\n\t\tconst width = this.imageWidth\n\t\t\t? this.imageWidth\n\t\t\t: this.getVisibleWidth() - 20; // -20 for padding\n\t\tconst height = this.imageHeight\n\t\t\t? this.imageHeight\n\t\t\t: this.getVisibleHeight() - 20; // -20 for padding\n\t\treturn { width, height };\n\t},\n\n\t/**\n\t * Generates the image source URL.\n\t * @param {number} width - the width of the image.\n\t * @param {number} height - the height of the image.\n\t * @param {string} contextValue - the context value.\n\t * @param {string} baseValue - the base value.\n\t * @returns {string} the generated image source URL.\n\t */\n\t_generateImageSrc: function (width, height, contextValue, baseValue) {\n\t\tlet src = `dynamic.${this.format}?_doc=${this.moduleDotDocument}&_n=${this.name}`;\n\t\tif (this.imageWidth) src += `&_w=${this.imageWidth}`;\n\t\tif (this.imageHeight) src += `&_h=${this.imageHeight}`;\n\t\tsrc += `&_w=${width}&_h=${height}&_wz=${this.wZoom}&_hz=${this.hZoom}`;\n\t\tif (contextValue) src += `&_c=${contextValue}`;\n\t\tif (baseValue) src += `&_b=${baseValue.replaceAll(\"_\", \".\")}`;\n\t\tsrc += `&_ts=${new Date().getTime()}`;\n\t\treturn src;\n\t},\n\n\t/**\n\t * Creates an image element with the specified dimensions and source.\n\t * @param {number} width - the width of the image.\n\t * @param {number} height - the height of the image.\n\t * @param {string} src - the image source URL.\n\t * @returns {Object} the created image element.\n\t */\n\t_createImageElement: function (width, height, src) {\n\t\treturn isc.Img.create({\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\toverflow: \"hidden\",\n\t\t\timageWidth: Math.round((width * this.wZoom) / 100.0),\n\t\t\timageHeight: Math.round((height * this.hZoom) / 100.0),\n\t\t\timageType: \"center\",\n\t\t\tcanDrag: true,\n\t\t\tcursor: \"all-scroll\",\n\t\t\tdragAppearance: \"none\",\n\t\t\tdragStart: function () {\n\t\t\t\tthis.startScrollLeft = this.getScrollLeft();\n\t\t\t\tthis.startScrollTop = this.getScrollTop();\n\t\t\t},\n\t\t\tdragMove: function () {\n\t\t\t\tthis.scrollTo(\n\t\t\t\t\tthis.startScrollLeft -\n\t\t\t\t\t\tisc.Event.lastEvent.x +\n\t\t\t\t\t\tisc.Event.mouseDownEvent.x,\n\t\t\t\t\tthis.startScrollTop -\n\t\t\t\t\t\tisc.Event.lastEvent.y +\n\t\t\t\t\t\tisc.Event.mouseDownEvent.y,\n\t\t\t\t);\n\t\t\t},\n\t\t\tmouseWheel: () => {\n\t\t\t\tconst wheelDelta = isc.EventHandler.getWheelDelta();\n\t\t\t\tthis._zoom(Math.round(this.wZoom - wheelDelta * 10.0), true); // Throttle this event\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tdoubleClick: () => this._open(),\n\t\t\tappImgDir: \"../\",\n\t\t\tsrc,\n\t\t});\n\t},\n});\n\n/**\n * Implements the BizImage UI component.\n * Extends Img from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizImage\", \"Img\");\n\nisc.BizImage.addMethods({\n\tinitWidget: function () {\n\t\tthis.imageType = \"stretch\";\n\n\t\t// Construct the image source URL using template literals\n\t\tthis.src = `resources?_n=${this.file}&_doc=${this.modoc}&_b=null`;\n\n\t\t// Call the parent class's initWidget method\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n});\n\n/**\n * Implements the BizLabel UI component.\n * Extends Label from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizLabel\", \"Label\");\n\nisc.BizLabel.addMethods({\n\tinitWidget: function () {\n\t\t// Determine if the label should auto-fit based on width and height arguments\n\t\tthis.autoFit = !(arguments[0].width || arguments[0].height);\n\n\t\t// Set the label's content if a value is provided\n\t\tif (this.value) {\n\t\t\tthis.setContents(this.value);\n\t\t}\n\n\t\t// Set the label's alignment if textAlign is provided\n\t\tif (this.textAlign) {\n\t\t\tthis.setAlign(this.textAlign);\n\t\t}\n\n\t\t// Call the parent class's initWidget method\n\t\tthis.Super(\"initWidget\", arguments);\n\t},\n});\n\n/**\n * Implements the BizChart UI component.\n * Extends VLayou from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizChart\", \"Canvas\");\n\nisc.BizChart.addClassMethods({\n\tloadingChartJS: false,\n\n\t/**\n\t * Loads Chart.js and its dependencies asynchronously.\n\t * If Chart.js is already loading, it retries after a short delay.\n\t */\n\tloadChartJS: function () {\n\t\tif (isc.BizChart.loadingChartJS) {\n\t\t\tsetTimeout(() => isc.BizChart.loadChartJS(), 100);\n\t\t} else if (!window.Chart) {\n\t\t\tisc.BizChart.loadingChartJS = true;\n\n\t\t\t// Load moment.js and then Chart.js\n\t\t\tSKYVE.Util.loadJS(\n\t\t\t\t`jakarta.faces.resource/moment/moment.js.xhtml?ln=primefaces&v=${SKYVE.Util.v}`,\n\t\t\t\t() => {\n\t\t\t\t\tSKYVE.Util.loadJS(\n\t\t\t\t\t\t`jakarta.faces.resource/chartjs/chartjs.js.xhtml?ln=primefaces&v=${SKYVE.Util.v}`,\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tisc.BizChart.loadingChartJS = false;\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t},\n\n\tv: 0,\n});\n\nisc.BizChart.addMethods({\n\tinit: function (config) {\n\t\tif (!window.Chart) {\n\t\t\tisc.BizChart.loadChartJS();\n\t\t}\n\n\t\t// Set default width and height if not provided\n\t\tif (!config.width) {\n\t\t\tthis.width = \"100%\";\n\t\t}\n\t\tif (!config.height) {\n\t\t\tthis.height = \"100%\";\n\t\t}\n\n\t\t// Generate a unique ID for the chart\n\t\tthis.ID = `bizChart${isc.BizChart.v++}`;\n\t\tthis.redrawOnResize = false;\n\t\tthis._refreshing = false; // Prevent multiple refreshes\n\t\tthis._resizeChartCalled = false; // Throttle resizing events\n\n\t\t// Call the parent class's init method\n\t\tthis.Super(\"init\", arguments);\n\t},\n\n\t/**\n\t * Returns the inner HTML for the chart canvas.\n\t * @returns {string} the HTML string for the canvas element.\n\t */\n\tgetInnerHTML: function () {\n\t\treturn `<canvas id=\"${this.ID}_chart\" />`;\n\t},\n\n\t/**\n\t * Handles the resized event with throttling to avoid excessive calls.\n\t */\n\tresized: function () {\n\t\tif (!this._resizeChartCalled) {\n\t\t\tthis.delayCall(\"_resizeChart\", arguments, 100);\n\t\t}\n\t\tthis._resizeChartCalled = true;\n\t},\n\n\t/**\n\t * Resizes the chart canvas to fit the widget's dimensions.\n\t */\n\t_resizeChart: function () {\n\t\tif (this.chart) {\n\t\t\tconst width = this.getWidth();\n\t\t\tconst height = this.getHeight();\n\t\t\tconst canvas = this.chart.canvas;\n\n\t\t\t// Update canvas dimensions\n\t\t\tcanvas.parentNode.style.width = `${width}px`;\n\t\t\tcanvas.parentNode.style.height = `${height}px`;\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\t\t\tcanvas.style.width = `${width}px`;\n\t\t\tcanvas.style.height = `${height}px`;\n\n\t\t\t// Update the chart\n\t\t\tthis.chart.update();\n\t\t\tthis._resizeChartCalled = false;\n\t\t} else {\n\t\t\tthis.delayCall(\"_resizeChart\", arguments, 100);\n\t\t}\n\t},\n\n\t/**\n\t * Sets the data source for the chart.\n\t * @param {string} modelName - the name of the model providing the data.\n\t */\n\tsetDataSource: function (modelName) {\n\t\tif (window.Chart && this.isDrawn()) {\n\t\t\tthis._modelName = modelName;\n\n\t\t\t// Assign this chart to the edit view's _grids property\n\t\t\tconst grids = this._view._grids[modelName] || {};\n\t\t\tthis._view._grids[modelName] = grids;\n\t\t\tgrids[this.getID()] = this;\n\n\t\t\tthis._refresh();\n\t\t} else {\n\t\t\tthis.delayCall(\"setDataSource\", arguments, 100);\n\t\t}\n\t},\n\n\t/**\n\t * Rerenders the chart by refreshing its data.\n\t */\n\trerender: function () {\n\t\tthis._refresh();\n\t},\n\n\t/**\n\t * Refreshes the chart data by making an XHR request to the server.\n\t */\n\t_refresh: function () {\n\t\tif (this._refreshing || !this.isDrawn() || !this.isVisible()) {\n\t\t\treturn; // Skip if already refreshing, not drawn, or invisible\n\t\t}\n\n\t\tconst url = `${SKYVE.Util.CONTEXT_URL}chart?`;\n\t\tif (!this._modelName) {\n\t\t\treturn; // Skip if no model name is set\n\t\t}\n\n\t\tconst instance = this._view.gather(false);\n\t\tconst requestUrl = `${url}_c=${instance._c}&t=${this.chartType}&_m=${this._modelName}`;\n\n\t\t// Ensure only one refresh occurs at a time\n\t\tthis._refreshing = true;\n\n\t\tisc.RPCManager.sendRequest({\n\t\t\tshowPrompt: true,\n\t\t\tevalResult: true,\n\t\t\tactionURL: requestUrl,\n\t\t\thttpMethod: \"GET\",\n\t\t\tcallback: (rpcResponse, data) => {\n\t\t\t\ttry {\n\t\t\t\t\tthis._update(data);\n\t\t\t\t} finally {\n\t\t\t\t\tthis._refreshing = false;\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t},\n\n\t/**\n\t * Updates the chart with new data.\n\t * @param {Object} data - the data received from the server.\n\t */\n\t_update: function (data) {\n\t\tif (data.config) {\n\t\t\t// Initialize chart config if not already set\n\t\t\tthis.chartConfig = this.chartConfig || {};\n\t\t\tthis.chartConfig.type = data.config.type;\n\t\t\tthis.chartConfig.data = data.config.data;\n\t\t\tthis.chartConfig.options = data.config.options || {};\n\n\t\t\t// Ensure responsive and aspect ratio settings\n\t\t\tthis.chartConfig.options.responsive = true;\n\t\t\tthis.chartConfig.options.maintainAspectRatio = false;\n\n\t\t\tif (this.chart) {\n\t\t\t\tthis.chart.update(); // Update existing chart\n\t\t\t} else {\n\t\t\t\tif (!this.isDrawn()) {\n\t\t\t\t\tthis.draw(); // Ensure the widget is drawn\n\t\t\t\t}\n\t\t\t\tconst chartCanvas = document.getElementById(`${this.ID}_chart`);\n\t\t\t\tthis.chart = new Chart(chartCanvas, this.chartConfig); // Create new chart\n\t\t\t}\n\t\t}\n\t},\n});\n\n/**\n * Implements the BizProgressBar UI component.\n * Extends ProgressBar from the SmartClient library.\n */\nisc.ClassFactory.defineClass(\"BizProgressBar\", \"ProgressBar\");\n","isc.BizUtil.addClassProperties({\n\theaderTemplate: null,\n\n\t/**\n\t * Initializes the layout and components for the application.\n\t * @param {string} headerTemplate - template HTML for view headers.\n\t * @param {string} logoSrc - source URL for the logo image.\n\t * @param {Array} menuConfig - configuration for the menu items.\n\t * @param {Array} dataSourceConfig - configuration for the data sources.\n\t */\n\tinit: function (headerTemplate, logoSrc, menuConfig, dataSourceConfig) {\n\t\tisc.BizUtil.headerTemplate = headerTemplate;\n\n\t\tthis.createBodyLayout(logoSrc);\n\t\tthis.createMenuSections(menuConfig);\n\t\tthis.createDataSources(dataSourceConfig);\n\t\tthis.addListViewToDetails();\n\n\t\tthis.createTextSearchComponents();\n\t},\n\n\t/**\n\t * Creates the main body layout with left-hand menu and right-hand details panel.\n\t * @param {string} logoSrc - source URL for the logo image.\n\t */\n\tcreateBodyLayout: function (logoSrc) {\n\t\tisc.HLayout.create({\n\t\t\tID: \"body\",\n\t\t\tautoDraw: true,\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tbackgroundColor: \"whitesmoke\",\n\t\t\tpadding: 10,\n\t\t\tmembers: [\n\t\t\t\tthis.createLeftMenuPanel(logoSrc),\n\t\t\t\tthis.createRightDetailsPanel(),\n\t\t\t],\n\t\t});\n\t},\n\n\t/**\n\t * Creates the left-hand menu panel with logo and accordion menu.\n\t * @param {string} logoSrc - source URL for the logo image.\n\t * @returns {isc.VLayout} the left-hand menu panel.\n\t */\n\tcreateLeftMenuPanel: function (logoSrc) {\n\t\treturn isc.VLayout.create({\n\t\t\tID: \"lhsmenu\",\n\t\t\twidth: \"30%\",\n\t\t\tshowResizeBar: true,\n\t\t\tbackgroundColor: \"white\",\n\t\t\tborder: \"1px solid #c0c0c0\",\n\t\t\tshowShadow: true,\n\t\t\tshadowSoftness: 10,\n\t\t\tshadowOffset: 0,\n\t\t\tmembers: [\n\t\t\t\tisc.Img.create({\n\t\t\t\t\timageType: \"center\",\n\t\t\t\t\tsrc: logoSrc,\n\t\t\t\t\toverflow: \"clip-h\",\n\t\t\t\t\tstyleName: \"logo\",\n\t\t\t\t\tshowDisabled: false,\n\t\t\t\t\tshowDown: false,\n\t\t\t\t\tshowFocus: false,\n\t\t\t\t\tshowFocused: false,\n\t\t\t\t\tshowFocusedAsOver: false,\n\t\t\t\t\tshowRollOver: false,\n\t\t\t\t}),\n\t\t\t\tisc.SectionStack.create({\n\t\t\t\t\tID: \"adminStack\",\n\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\tvisibilityMode: \"mutex\",\n\t\t\t\t\tanimateSections: false,\n\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\theaderHeight: 30,\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t},\n\n\t/**\n\t * Creates the right-hand details panel.\n\t * @returns {isc.VLayout} the right-hand details panel.\n\t */\n\tcreateRightDetailsPanel: function () {\n\t\treturn isc.VLayout.create({\n\t\t\tID: \"details\",\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tbackgroundColor: \"whitesmoke\",\n\t\t\tborder: \"1px solid #c0c0c0\",\n\t\t\tshowShadow: true,\n\t\t\tshadowSoftness: 10,\n\t\t\tshadowOffset: 0,\n\t\t});\n\t},\n\n\t/**\n\t * Creates menu sections based on the provided menu configuration.\n\t * @param {Array} menuConfig - configuration for the menu items.\n\t */\n\tcreateMenuSections: function (menuConfig) {\n\t\tconst adminStack = isc.Canvas.getById(\"adminStack\");\n\n\t\tmenuConfig.forEach((item) => {\n\t\t\tconst menu = this.createMenuTreeGrid(item);\n\t\t\tadminStack.addSection({\n\t\t\t\ttitle: item.title,\n\t\t\t\texpanded: item.open,\n\t\t\t\titems: [menu],\n\t\t\t});\n\t\t\tmenu.getData().openAll();\n\t\t});\n\t},\n\n\t/**\n\t * Creates a TreeGrid for a menu item.\n\t * @param {Object} item - configuration for the menu item.\n\t * @returns {isc.TreeGrid} the created TreeGrid.\n\t */\n\tcreateMenuTreeGrid: function (item) {\n\t\treturn isc.TreeGrid.create({\n\t\t\tID: `${item.name}Tree`,\n\t\t\tshowHeader: false,\n\t\t\tshowOpenIcons: false,\n\t\t\tshowDropIcons: false,\n\t\t\tshowConnectors: true,\n\t\t\tshowRollOver: false,\n\t\t\tleaveScrollbarGap: false,\n\t\t\tnodeIcon: null,\n\t\t\tfolderIcon: null,\n\t\t\tclosedIconSuffix: \"\",\n\t\t\tcanDragRecordsOut: true,\n\t\t\tdragDataAction: \"copy\",\n\t\t\tdata: isc.Tree.create({\n\t\t\t\tmodelType: \"children\",\n\t\t\t\tnameProperty: \"desc\",\n\t\t\t\tchildrenProperty: \"sub\",\n\t\t\t\troot: item.root,\n\t\t\t}),\n\t\t\tleafClick: (viewer, leaf, recordNum) =>\n\t\t\t\tthis.handleMenuItemClick(viewer, leaf, recordNum),\n\t\t});\n\t},\n\n\t/**\n\t * Handles click events on menu items.\n\t * @param {isc.TreeGrid} viewer - the TreeGrid that triggered the event.\n\t * @param {Object} leaf - the clicked leaf node.\n\t * @param {number} recordNum - the record number of the clicked leaf.\n\t */\n\thandleMenuItemClick: function (viewer, leaf, recordNum) {\n\t\tconst details = isc.Canvas.getById(\"details\");\n\t\tif (leaf.ref === \"link\") {\n\t\t\twindow.location = leaf.name;\n\t\t} else if (leaf.ref === \"edit\") {\n\t\t\tthis.handleEditView(leaf, viewer, details);\n\t\t} else {\n\t\t\tthis.handleListView(leaf, viewer, details);\n\t\t}\n\t},\n\n\t/**\n\t * Handles the display of edit views.\n\t * @param {Object} leaf - the clicked leaf node.\n\t * @param {isc.TreeGrid} viewer - the TreeGrid that triggered the event.\n\t * @param {isc.VLayout} details - the details panel.\n\t */\n\thandleEditView: function (leaf, viewer, details) {\n\t\tif (isc.BizUtil._currentView === isc.ListView.contents) {\n\t\t\tdetails.hideMember(isc.ListView.contents);\n\t\t} else if (isc.BizUtil._currentView) {\n\t\t\tif (details.hasMember(isc.BizUtil._currentView)) {\n\t\t\t\tdetails.hideMember(isc.BizUtil._currentView);\n\t\t\t}\n\t\t\tisc.BizUtil.relinquishEditView(isc.BizUtil._currentView);\n\t\t}\n\n\t\tisc.BizUtil.getEditView(\n\t\t\tleaf.module ? leaf.module : viewer.data.root.name,\n\t\t\tleaf.name,\n\t\t\t(view) => {\n\t\t\t\tdetails.addMember(view);\n\t\t\t\tisc.BizUtil._currentView = view;\n\t\t\t\tview.newInstance();\n\t\t\t},\n\t\t);\n\t},\n\n\t/**\n\t * Handles the display of list views.\n\t * @param {Object} leaf - the clicked leaf node.\n\t * @param {isc.TreeGrid} viewer - the TreeGrid that triggered the event.\n\t * @param {isc.VLayout} details - the details panel.\n\t */\n\thandleListView: function (leaf, viewer, details) {\n\t\tif (isc.BizUtil._currentView !== isc.ListView.contents) {\n\t\t\tif (isc.BizUtil._currentView) {\n\t\t\t\tif (details.hasMember(isc.BizUtil._currentView)) {\n\t\t\t\t\tdetails.hideMember(isc.BizUtil._currentView);\n\t\t\t\t}\n\t\t\t\tisc.BizUtil.relinquishEditView(isc.BizUtil._currentView);\n\t\t\t}\n\t\t\tisc.BizUtil._currentView = isc.ListView.contents;\n\t\t\tdetails.showMember(isc.ListView.contents);\n\t\t}\n\n\t\tconst dataSourceName = `${viewer.data.root.name}_${leaf.name}`;\n\t\tswitch (leaf.ref) {\n\t\t\tcase \"grid\":\n\t\t\t\tisc.ListView.setGridDataSource(dataSourceName, leaf.config);\n\t\t\t\tbreak;\n\t\t\tcase \"cal\":\n\t\t\t\tisc.ListView.setCalendarDataSource(dataSourceName, leaf.config);\n\t\t\t\tbreak;\n\t\t\tcase \"tree\":\n\t\t\t\tisc.ListView.setTreeDataSource(dataSourceName, leaf.config);\n\t\t\t\tbreak;\n\t\t\tcase \"map\":\n\t\t\t\tisc.ListView.setMapDataSource(dataSourceName, leaf.config);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\talert(`Menu ref of ${leaf.ref} is unknown`);\n\t\t}\n\t},\n\n\t/**\n\t * Creates data sources based on the provided configuration.\n\t * @param {Array} dataSourceConfig - configuration for the data sources.\n\t */\n\tcreateDataSources: function (dataSourceConfig) {\n\t\tdataSourceConfig.forEach((item) => {\n\t\t\titem.fields.add({ name: \"operator\", type: \"text\", hidden: true });\n\t\t\titem.fields.add({ name: \"criteria\", type: \"text\", hidden: true });\n\t\t\titem.fields.add({ name: \"bizId\", primaryKey: true, hidden: true });\n\t\t\titem.fields.add({ name: \"bizLock\", hidden: true });\n\t\t\titem.fields.addAt(\n\t\t\t\t{\n\t\t\t\t\tname: \"bizTagged\",\n\t\t\t\t\ttitle: \"Tag\",\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tvalidOperators: [\"equals\"],\n\t\t\t\t},\n\t\t\t\t0,\n\t\t\t);\n\t\t\titem.fields.addAt(\n\t\t\t\t{\n\t\t\t\t\tname: \"bizFlagComment\",\n\t\t\t\t\ttitle: \"Flag\",\n\t\t\t\t\tcanFilter: SKYVE.Util.canFlag,\n\t\t\t\t},\n\t\t\t\t1,\n\t\t\t);\n\n\t\t\tisc.RestDataSource.create({\n\t\t\t\tID: item.ID,\n\t\t\t\tdataFormat: \"json\",\n\t\t\t\tjsonPrefix: \"\",\n\t\t\t\tjsonSuffix: \"\",\n\t\t\t\tdataURL: \"smartlist\",\n\t\t\t\toperationBindings: [\n\t\t\t\t\t{ operationType: \"fetch\", dataProtocol: \"postParams\" },\n\t\t\t\t\t{ operationType: \"update\", dataProtocol: \"postParams\" },\n\t\t\t\t\t{ operationType: \"add\", dataProtocol: \"postParams\" },\n\t\t\t\t\t{ operationType: \"remove\", dataProtocol: \"postParams\" },\n\t\t\t\t],\n\t\t\t\tcriteriaPolicy: \"dropOnChange\",\n\t\t\t\ttitle: item.title,\n\t\t\t\tmodoc: item.modoc,\n\t\t\t\ticon: item.icon,\n\t\t\t\tfontIcon: item.fontIcon,\n\t\t\t\taggregate: item.aggregate,\n\t\t\t\tcanCreate: item.canCreate,\n\t\t\t\tcanUpdate: item.canUpdate,\n\t\t\t\tcanDelete: item.canDelete,\n\t\t\t\tcellHeight: item.cellHeight,\n\t\t\t\tfields: item.fields,\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Adds the list view to the details panel.\n\t */\n\taddListViewToDetails: function () {\n\t\tconst details = isc.Canvas.getById(\"details\");\n\t\tisc.BizUtil._currentView = isc.ListView.contents;\n\t\tdetails.addMember(isc.ListView.contents);\n\t\tdetails.hideMember(isc.ListView.contents);\n\t},\n\n\t/**\n\t * Creates and initializes the text search components.\n\t */\n\tcreateTextSearchComponents: function () {\n\t\tisc.RestDataSource.create({\n\t\t\tID: \"textSearch\",\n\t\t\tdataFormat: \"json\",\n\t\t\tdataURL: \"smartsearch\",\n\t\t\tcriteriaPolicy: \"dropOnChange\",\n\t\t\tfields: [\n\t\t\t\t{ name: \"icon\", title: \"Icon\" },\n\t\t\t\t{ name: \"doc\", title: \"Document\" },\n\t\t\t\t{ name: \"bizKey\", title: \"Description\" },\n\t\t\t\t{ name: \"excerpt\", title: \"Excerpt\" },\n\t\t\t\t{ name: \"score\", title: \"Score (%)\", type: \"integer\" },\n\t\t\t\t{ name: \"data\", type: \"link\", title: \"Data\", target: \"_self\" },\n\t\t\t\t{ name: \"content\", type: \"link\", title: \"Content\", target: \"_blank\" },\n\t\t\t],\n\t\t});\n\n\t\tisc.DynamicForm.create({\n\t\t\tID: \"textSearchForm\",\n\t\t\tmargin: 2,\n\t\t\twidth: 550,\n\t\t\theight: 40,\n\t\t\tnumCols: 3,\n\t\t\tcolWidths: [250, \"*\", 100],\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tname: \"query\",\n\t\t\t\t\ttitle: \"Type and press search or enter\",\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t\tkeyPress: function (item, form, keyName) {\n\t\t\t\t\t\tif (keyName === \"Enter\" && form.validate(false)) {\n\t\t\t\t\t\t\titem.form.doSearch();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: true,\n\t\t\t\t\tvalidators: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclientOnly: true,\n\t\t\t\t\t\t\ttype: \"lengthRange\",\n\t\t\t\t\t\t\tmin: 4,\n\t\t\t\t\t\t\terrorMessage: \"At least 4 characters are required for a search\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"searchBtn\",\n\t\t\t\t\tstartRow: false,\n\t\t\t\t\ttitle: \"Search\",\n\t\t\t\t\ttype: \"button\",\n\t\t\t\t\taccessKey: \"Enter\",\n\t\t\t\t\tclick: function () {\n\t\t\t\t\t\tthis.form.doSearch();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ name: \"message\", type: \"blurb\", startRow: true, colSpan: 3 },\n\t\t\t],\n\t\t\tdoSearch: function () {\n\t\t\t\tif (this.validate()) {\n\t\t\t\t\tconst message = this.getItem(\"message\");\n\t\t\t\t\tmessage.setValue(\"\");\n\t\t\t\t\ttextSearchResults.filterData(textSearchForm.getValuesAsCriteria());\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tisc.ListGrid.create({\n\t\t\tID: \"textSearchResults\",\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\talternateRecordStyles: true,\n\t\t\tdataSource: \"textSearch\",\n\t\t\tdataFetchMode: \"basic\", // no paging\n\t\t\twrapCells: true,\n\t\t\tfixedRecordHeights: false,\n\t\t\tcanEdit: false,\n\t\t\tcanFreezeFields: false,\n\t\t\tcanGroupBy: false,\n\t\t\tcanPickFields: false,\n\t\t\tcanSort: false,\n\t\t\tfields: [\n\t\t\t\t{ name: \"icon\", align: \"center\", width: 30 },\n\t\t\t\t{ name: \"doc\", width: \"15%\" },\n\t\t\t\t{ name: \"bizKey\", width: \"30%\" },\n\t\t\t\t{ name: \"excerpt\", width: \"55%\" },\n\t\t\t\t{ name: \"score\", width: 75 },\n\t\t\t\t{ name: \"data\", width: 40, align: \"center\", linkText: \"Data\" },\n\t\t\t\t{ name: \"content\", width: 60, align: \"center\", linkText: \"Content\" },\n\t\t\t],\n\t\t\tdataProperties: {\n\t\t\t\ttransformData: function (newData, dsResponse) {\n\t\t\t\t\tif (dsResponse.status >= 0) {\n\t\t\t\t\t\tconst summary = newData.pop();\n\t\t\t\t\t\tconst message = textSearchForm.getItem(\"message\");\n\t\t\t\t\t\tlet response = `Query took ${summary.time} seconds.`;\n\t\t\t\t\t\tif (summary.suggestion) {\n\t\t\t\t\t\t\tresponse += `  Did you mean <a href=\"#\" onclick=\"var q = textSearchForm.getItem('query'); q.setValue('${summary.suggestion}'); q.focusInItem(); return false;\">${summary.suggestion}</a>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmessage.setValue(response);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\n\t/**\n\t * Pops up the search window.\n\t */\n\tpopupSearch: function () {\n\t\tisc.WindowStack.popup(null, \"Text Search\", true, [\n\t\t\ttextSearchForm,\n\t\t\ttextSearchResults,\n\t\t]);\n\t\ttextSearchForm.focusInItem(\"query\");\n\t\ttextSearchForm.clearValues();\n\t},\n\n\t/**\n\t * Shows the portal view.\n\t */\n\tshowPortal: function () {\n\t\tconst details = isc.Canvas.getById(\"details\");\n\n\t\tif (isc.BizUtil._currentView !== isc.ListView.contents) {\n\t\t\tif (isc.BizUtil._currentView) {\n\t\t\t\tif (details.hasMember(isc.BizUtil._currentView)) {\n\t\t\t\t\tdetails.hideMember(isc.BizUtil._currentView);\n\t\t\t\t}\n\t\t\t\tisc.BizUtil.relinquishEditView(isc.BizUtil._currentView);\n\t\t\t}\n\t\t\tisc.BizUtil._currentView = isc.ListView.contents;\n\t\t\tdetails.showMember(isc.ListView.contents);\n\t\t}\n\n\t\tisc.ListView.showPortal();\n\t},\n\n\t/**\n\t * Shows the help window.\n\t * @param {string} url - the URL to the help documentation.\n\t */\n\tshowHelp: function (url) {\n\t\tconst helpUrl = url || \"https://skyvers.github.io/skyve-user-guide/\";\n\t\tisc.BizUtil.popupFrame(helpUrl, \"Skyve Help\", 1024, 768);\n\t},\n});\n"],
"names":["window","SKYVE","Util","load","node","callback","readyState","onreadystatechange","node.onreadystatechange","onload","headNode","document","getElementsByTagName","appendChild","customer","v","googleMapsV3ApiKey","ckEditorConfigFileUrl","mapCentre","mapZoom","CONTEXT_URL","location","substring","context","lastIndexOf","allowedReportFormats","loadJS","scriptPath","scriptNode","createElement","type","src","loadCSS","cssPath","cssNode","rel","href","geoLocate","navigator","geolocation","$","PrimeFaces","cw","id","widgetVar","msgs","summary","detail","severity","getCurrentPosition","position","coords","longitude","latitude","error","message","enableHighAccuracy","setTouchCookie","hasTouchScreen","maxTouchPoints","msMaxTouchPoints","mQ","matchMedia","media","matches","cookie","passwordStrength","progressBarPower","progressBarColour","GMap","wkt","drawingModes","drawingTools","result","google","maps","drawing","OverlayType","MARKER","POLYLINE","POLYGON","RECTANGLE","scatter","display","data","fit","delta","Wkt","items","bizId","_objects","Object","prototype","hasOwnProperty","call","found","i","l","length","deletedObject","overlays","setMap","item","object","same","features","j","m","geometry","feature","read","e","alert","props","editable","strokeColour","strokeColor","fillColour","fillColor","fillOpacity","iconRelativeFilePath","icon","url","_doc","iconAnchorX","iconAnchorY","anchor","Point","origin","overlay","toObject","push","webmap","zoomable","fromTimestamp","toTimestamp","mod","moduleName","doc","documentName","infoMarkup","event","addListener","click","bounds","LatLngBounds","someOverlays","getPath","path","getLength","extend","getAt","getPosition","getNorthEast","equals","getSouthWest","getZoom","setZoom","undefined","setCenter","fitBounds","centre","coord","components","LatLng","y","x","console","log","scatterValue","value","name","obj","defaults","setEditable","isArray","key","_overlays","getBounds","clear","drawingManager","DrawingManager","drawingControlOptions","ControlPosition","LEFT_BOTTOM","setDrawingMode","fromObject","wktValue","write","setFieldValue","geoLocator","control","assign","style","backgroundColor","border","borderRadius","boxShadow","cursor","margin","padding","textAlign","title","innerHTML","index","addEventListener","pos","lat","lng","marker","Marker","map","geolocator","controls","LEFT","setDisabled","disabled","setOptions","drawingControl","refreshControls","refreshTime","_refreshRequired","children","Number","_intervalId","clearInterval","setInterval","rerender","bind","checked","Leaflet","parse","input","re","match","wktString","white","multicoords","depth","rings","stack","pointer","elem","tuples","pop","split","some","isNaN","Array","apply","parseFloat","list","pt","point","c","coordinates","multipoint","indexOf","replace","newCoordsFormat","multilinestring","linestring","geometrycollection","geometries","root","parts","srid","shift","crs","properties","stringify","gj","pairWKT","join","ringWKT","r","ringsWKT","wrapParens","s","Error","numberRegexp","RegExp","source","removeLayer","getLayers","zoomData","itemFeature","color","iconUrl","iconAnchor","L","geoJson","pointToLayer","latlng","onEachFeature","layer","bindPopup","addLayer","latLngBounds","maxZoom","addTo","EditControl","Control","options","onAdd","container","DomUtil","create","markerLink","DomEvent","on","stop","LAYER","editTools","startMarker","polylineLink","startPolyline","rectangleLink","startRectangle","polygonLink","startPolygon","editControl","addControl","toggleEdit","toGeoJSON","GeoControl","link","commitDrawing","panTo","geoControl","getContainer","isc","Offline","isOffline","isc.Offline.isOffline","setAutoDraw","RPCManager","fetchDataPrompt","saveDataPrompt","removeDataPrompt","handleError","isc.RPCManager.handleError","response","request","warn","Super","arguments","addClassMethods","loginRequired","transactionNum","rpcRequest","rpcResponse","Date","setShortDisplayFormat","setNormalDisplayFormat","setInputFormat","ListGrid","addProperties","getFilterEditorType","field","filterEditorType","_$binary","_$file","_$imageFile","editorType","ds","getDataSource","filenameSuppressed","getFilenameField","filterEditorConfig","canEdit","canFilter","_constructor","filterEditorProperties","DynamicForm","getEditorType","ResultSet","addMethods","skyveSetCriteria","getPrototype","setCriteria","hasSpatialOperator","criteria","operator","startsWith","newCriteria","invalidateCache","resizeTimerEvent","Page","setEvent","WindowStack","clearTimeout","setTimeout","resize","spatialOperators","ID","fieldTypes","valueType","requiresServer","forEach","DataSource","addSearchOperator","condition","compareCriteria","defineClass","BizUtil","addClassProperties","_modules","_unusedPickLists","COMPLETE_DATA_SOURCE","RestDataSource","dataFormat","jsonPrefix","jsonSuffix","dataURL","fields","_currentView","getCurrentView","isNumeric","numericTypes","includes","isTemporal","temporalTypes","temporalType","addFilterRequestParams","requestParams","filterParams","view","instance","gather","filterParam","toDisplay","convertFilterCriteria","criterion","fieldName","keys","propertyName","completeFilterCriteria","convertCriteria","createImageButton","hasDisabledIcon","tooltip","ToolStripButton","iconAlign","showDisabledIcon","showDownIcon","canHover","getHoverHTML","createCodeMirror","scVar","binding","languageMimeType","loadResources","templates","getElementsByName","templateElement","nodeName","toLowerCase","setAttribute","editor","CodeMirror","fromTextArea","mode","lineNumbers","theme","setSize","save","createSplitButton","buttonTitle","buttonIcon","buttonHasDisabledIcon","buttonTooltip","buttonClick","splitTooltip","splitTarget","splitItems","HLayout","align","height","membersMargin","members","IButton","autoFit","MenuButton","width","alignMenuLeft","menu","Menu","autoDraw","showShadow","shadowDepth","target","createUploadButton","contentFormItem","image","showMarkup","setValue","enableIf","getValue","form","_view","replaceAll","_c","_b","popup","HTMLPane","contentsType","contents","contentsURL","getEditView","onViewCreated","documentEntry","_unused","eval","_moduleName","_documentName","_used","sendRequest","showPrompt","evalResult","httpMethod","actionURL","relinquishEditView","remove","getPickList","lookupDescription","BizListGrid","isPickList","setLookup","relinquishPickList","pickList","destroy","createListGrid","createCalendar","Calendar","scrollToWorkDay","createTreeGrid","isTree","createMap","BizMap","popupFrame","open","win","focus","growl","life","sticky","onPushMessage","pushMessage","growls","messages","method","argument","markup","msg","say","toHH24_MI","getHours","getMinutes","toHH_MI","hours","ampm","hoursString","toHH24_MI_SS","getSeconds","toHH_MI_SS","time","toDD_MM_YYYY","getDate","getMonth","getFullYear","toDD_MM_YYYY_HH24_MI","toDD_MM_YYYY_HH_MI","toDD_MM_YYYY_HH24_MI_SS","toDD_MM_YYYY_HH_MI_SS","toDD_MMM_YYYY","shortMonthNames","toDD_MMM_YYYY_HH24_MI","toDD_MMM_YYYY_HH_MI","toDD_MMM_YYYY_HH24_MI_SS","toDD_MMM_YYYY_HH_MI_SS","toMM_DD_YYYY","toMM_DD_YYYY_HH24_MI","toMM_DD_YYYY_HH_MI","toMM_DD_YYYY_HH24_MI_SS","toMM_DD_YYYY_HH_MI_SS","toMMM_DD_YYYY","toMMM_DD_YYYY_HH24_MI","toMMM_DD_YYYY_HH_MI","toMMM_DD_YYYY_HH24_MI_SS","toMMM_DD_YYYY_HH_MI_SS","toYYYY_MM_DD","toYYYY_MM_DD_HH24_MI","toYYYY_MM_DD_HH_MI","toYYYY_MM_DD_HH24_MI_SS","toYYYY_MM_DD_HH_MI_SS","ClassFactory","BizDateItem","_replaceMonthWithOrdinal","month","lowerMonth","monthMap","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec","ordinal","entries","parseInput","datePattern","isA","trim","exec","test","DateUtil","parseSchemaDate","format","currentYear","enforceDate","changeOnBlur","changeOnKeypress","useTextField","showHint","showHintInField","hint","textFieldProperties","selectOnFocus","showPickerTimeItem","dateFormatter","parseDate","mapValueToDisplay","emptyString","mapDisplayToValue","isAn","updateValue","setElementValue","newValue","SimpleType","inheritsFrom","editFormatter","internalValue","record","shortDisplayFormatter","normalDisplayFormatter","component","DD_MMM_YYYY_Item","MM_DD_YYYY_Item","MMM_DD_YYYY_Item","YYYY_MM_DD_Item","BizDateTimeItem","pickerTimeItemProperties","showSecondItem","use24HourTime","String","DD_MM_YYYY_HH24_MI_Item","DD_MM_YYYY_HH_MI_SS_Item","DD_MM_YYYY_HH24_MI_SS_Item","DD_MMM_YYYY_HH_MI_Item","DD_MMM_YYYY_HH24_MI_Item","DD_MMM_YYYY_HH_MI_SS_Item","DD_MMM_YYYY_HH24_MI_SS_Item","MM_DD_YYYY_HH_MI_Item","MM_DD_YYYY_HH24_MI_Item","MM_DD_YYYY_HH_MI_SS_Item","MM_DD_YYYY_HH24_MI_SS_Item","MMM_DD_YYYY_HH_MI_Item","MMM_DD_YYYY_HH24_MI_Item","MMM_DD_YYYY_HH_MI_SS_Item","MMM_DD_YYYY_HH24_MI_SS_Item","YYYY_MM_DD_HH_MI_Item","YYYY_MM_DD_HH24_MI_Item","YYYY_MM_DD_HH_MI_SS_Item","YYYY_MM_DD_HH24_MI_SS_Item","TimeItem","init","BizTimeItem","displayFormat","timeFormatter","Time","hasAdvancedCriteria","toShortTime","HH_MI_SS_Item","toTime","HH24_MI_Item","HH24_MI_SS_Item","BizDecimal2Item","toString","decimalPlaces","toLocalizedString","validators","clientOnly","BizDecimal5Item","BizDecimal10Item","BizDecimal0Item","BizDecimal1Item","BizDollarsAndCentsItem","BizIntegerPercentageItem","Math","round","BizSimplePercentageItem","BizIntegerSeparatorItem","BizTwoDecimalPlacesPercentageItem","BizTimeDurationItem","parseInt","minutes","min","floor","decimalMinutes","ceil","abs","stringMinutes","CanvasItem","BizContentLinkItem","rowSpan","endRow","startRow","canFocus","shouldSaveValue","config","_link","HTMLFlow","canvas","defaultLayoutAlign","LayoutSpacer","userSetValue","_mod","setContents","linkHTML","BizContentImageItem","_img","Img","imageType","overflow","isGroup","styleName","groupBorderCSS","groupLabelBackgroundColor","showDisabled","showDown","showFocus","showFocused","showFocusedAsOver","showRollOver","centredUploadButton","getWidth","getHeight","setSrc","BizLookupDescriptionItem","fetchMissingValues","autoFetchData","canCreate","canUpdate","canPick","canAdd","canClear","me","combo","showTitle","useClientFiltering","cachePickListResults","allowEmptyValue","optionDataSource","valueField","displayField","pickListFields","filterFields","pickListProperties","filterData","requestProperties","params","_cc","completeOnTab","textMatchStyle","getPickListFilterCriteria","showPicker","getOptionDataSource","_drop","changed","getDisplayValue","bizPicked","blur","itemValue","valueMap","_form","writeFormTag","numCols","colWidths","cellPadding","_splitButton","setDataSource","getPageRect","zoom","newParams","bizCleared","setItems","getItem","focusInItem","bizAdded","bizEdited","setValueMapFromEditView","values","_setValueMap","setValueMapFromPickList","setValueMap","enableDisablePick","getMember","zoomToNew","get","modoc","dotIndex","modName","viewBinding","fromRect","required","setRequired","_apply","_vm","valuesHaveChanged","saveInstance","newInstance","editInstance","ComboBoxItem","BizCompleteItem","showPickerIcon","_a","addUnknownValues","_attr","CKEDITOR","BizHTMLItem","_pane","_editButton","editEvent","_show","owningView","formValues","holder","Canvas","draw","holder.draw","filebrowserImageBrowseUrl","filebrowserBrowseUrl","resize_enabled","skin","autoUpdateElement","baseFloatZIndex","toolbar","mentionMarkers","feed","fetchData","query","markers","mentions","first","second","add","minChars","pattern","cache","throttle","coreStyles_bold","element","overrides","coreStyles_italic","_editor","customConfig","setData","applyEvent","getData","popoff","GeometryItem","validOperators","createCanvas","storeValue","icons","prompt","BizMapPicker","showValue","displayValue","dataValue","setHint","setValueFromPicker","defaultOperator","GeometryMapItem","_valueSetFromPicker","setMembers","_margin","_stack","showCloseButton","closeButtonRefreshes","sizeSet","windowWidth","windowHeight","setTitle","addItems","setWidth","setHeight","closeClick","result.closeClick","Window","headerIconDefaults","autoCenter","isModal","showModalMask","showMinimizeButton","modalMaskOpacity","canDragReposition","canDragResize","shadowSoftness","shadowOffset","setShowCloseButton","_fromRect","show","rerenderOpener","opener","getOpener","_animateClose","instances","_CKEditor","removeItems","resume","_wireframe","opacity","_animateClosedDuration","toLeft","getLeft","toTop","getTop","toWidth","getVisibleWidth","toHeight","getVisibleHeight","setRect","bringToFront","hide","animateRect","ReportDialog","_pageFormats","LETTER","NOTE","LEGAL","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","B0","B1","B2","B3","B4","B5","ARCH_E","ARCH_D","ARCH_C","ARCH_B","ARCH_A","FLSA","FLSE","HALFLETTER","LEDGER","_available","editorProperties","max","step","defaultValue","_selected","_valuesManager","ValuesManager","_columnList","canDragRecordsOut","canAcceptDroppedRecords","dragDataAction","alternateRecordStyles","leaveScrollbarGap","showHeaderContextMenu","_selectedColumnList","canReorderRecords","canRemoveRecords","editByCell","modalEditing","preventDuplicates","_generateReportFormatMappings","allowedFormats","defaultFormats","formatMappings","pdf","label","docx","xlsx","pptx","xls","rtf","ods","odt","html","csv","xml","txt","valueIcons","_createJasperReportFormatPickList","colSpan","onChangeFunction","imageURLPrefix","imageURLSuffix","change","_columnSelectorLayout","VLayout","layoutAlign","iconWidth","iconHeight","transferSelectedData","_reportFormatForm","_pageFormatForm","valuesManager","oldValue","orientation","portrait","landscape","widthItem","heightItem","_marginsForm","_submitForm","canSubmit","_layout","_criteria","_tagId","_dataSourceID","_createReportPanel","buttonDefn","formDefn","backgroundImage","backgroundRepeat","_createExport","_exportLayout","changeHandler","isDocumentFormat","isHtmlFormat","vertical","tabular","columnar","isColumnar","validate","getValues","columns","tagId","fileNameNoSuffix","JSON","encode","prettyPrint","setAction","setTarget","submitForm","groupTitle","groupLabelStyleName","popupExport","dataSourceID","unselectedFields","selectedFields","popupReport","_f","paramsCopy","_redirectToReport","_e","_freemarkerReportLayout","_params","_freemarkerReportForm","_createFreemarkerReportFormatPickList","_freemarkerReportViewButton","_jasperReportLayout","_jasperReportForm","_jasperReportViewButton","b","encodeURI","ChartDialog","_chartForm","line","lineArea","bar","horizontalBar","radar","pie","doughnut","polarArea","_categoryForm","NumericMultipleBucket","TextLengthBucket","TextStartsWithBucket","TemporalBucket","redrawOnChange","expression","showIf","day","dayMonthYear","hour","hourDay","hourDayMonth","minuteHour","monthYear","secondMinuteHour","year","_valueForm","_topForm","showLabel","topItem","topByItem","topSortItem","includeOthersItem","enable","clearErrors","disable","category","ascending","descending","_orderForm","orderByItem","orderSortItem","_chart","_dataSource","_border","_createChartPanel","_create","BizChart","chart","t","validateCategoryBucket","validateValueFunction","generateDataLabel","chartConfig","_destroyAndRecreate","_update","removeMember","addMember","popupChart","dataSource","createValueMap","categoryField","getFieldNames","fieldNames","getField","categoryBinding","categoryBucket","setCategoryBucketErrors","errorMessage","setErrors","valueBinding","valueFunction","valueFunctionDisplay","valueBindingDisplay","categoryBindingDisplay","AdvancedFilter","filterableComponent","filterableComponentConfig","toggleButton","_filterBuilder","_filterButtonDefaults","initWidget","actionType","showSelectedIcon","selected","_styleForm","radio","bracket","inline","getStyle","setStyle","toggleButtonClick","grid","originalGetCriteria","getFilterEditorCriteria","grid.getFilterEditorCriteria","setFilterEditorCriteria","emptyObject","setShowFilterEditor","getCriteria","_filterButton","createAutoChild","_summary","summaryType","FilterBuilder","topOperatorAppearance","allowEmpty","includeEmptyValues","clearCriteria","BizGrid","_eventRowNum","_eventColumnNum","_eventRecord","_disabled","deleteSelectionItem","deleteSelectionButton","clearSelectionItem","aggregate","canDelete","canZoom","canRemove","isRepeater","showColumnHeaders","showGrid","anySelected","ask","_csrf","removeSelectedData","dsResponse","dsRequest","httpHeaders","selectionChanged","bizRemoved","deselectAllRecords","refresh","BizDataGrid","_newButton","_zoomButton","_popoutButton","showAdd","showZoom","showEdit","showRemove","showDeselect","_ordinal","newItem","_zoomItem","editItem","startEditing","_eventColNum","contextMenuData","isSeparator","contextMenu","_createGrid","_fields","_grids","getID","toolStripMembers","ToolStrip","layoutMargin","getMembersLength","setMinHeight","minHeight","gridConfig","showHeader","headerHeight","showFilterEditor","defaultFilterOperator","showSelectedStyle","showEmptyMessage","baseStyle","bodyBackgroundColor","selectionType","neverValidate","validateByCell","saveByCell","validateOnChange","recordEnabledProperty","wrapCells","wordWrap","fixedRecordHeights","canReorderFields","canSort","canGroupBy","recordsDropped","dropRecords","destWidget","sourceWidget","reorderData","autoSaveEdits","canFreezeFields","rowClick","rowNum","colNum","rowContextClick","selectSingleRecord","rowDoubleClick","isFolder","_blurry","hasSelection","selectionUpdated","selectedIdBinding","changes","rememberValues","bizSelected","requestsArePending","delayCall","doubleClickDelay","canEditCell","editComplete","newValues","oldValues","editCompletionEvent","bizModule","bizDocument","zoomToBizId","gridRect","body","rowTop","getRowPageTop","rowHeight","getRowSize","_zoom","rowRect","startEditingNew","removeAt","findIndex","_toolbar","_advancedFilter","_summaryGrid","_flagForm","_flagDialog","_pickButton","_chartButton","showExport","showChart","showFilter","showSummary","showSnap","showTag","autoPopulate","_lookup","_config","autoSize","showMaximizeButton","showHeaderIcon","useAllDataSourceFields","getAllCriteria","contConv","_changed","_singular","popoutItem","saveRequestProperties","pickItem","pick","createToolbarButton","isEnabled","onClick","button","clearFilterItem","clearFilter","refreshItem","exportData","fieldState","getFieldState","dataGridField","visible","allCriteria","exportItem","count","getTotalRows","chartData","chartItem","_contextMenu","this._advancedFilter.toggleButton.click","_snapMenu","canSelectParentItems","_snapMenuButton","ToolStripMenuButton","useSimpleHttp","a","d","status","_newSnap","_setSnap","snap","enabled","snapId","entry","snapshot","advancedCriteriaStyle","sortState","groupState","submenu","this._snapMenuButton._newSnap","askForValue","n","getSortState","getGroupState","this._snapMenuButton._setSnap","select","deselect","setFieldState","setSortState","setGroupState","bizFlagComment","_updateSnap","this._snapMenuButton._updateSnap","_deleteSnap","this._snapMenuButton._deleteSnap","_clearSnap","this._clearSnap","_tagsMenu","_tagsMenuButton","newTag","this._tagsMenuButton.newTag","setTag","this._tagsMenuButton.setTag","tagOp","action","this._tagsMenuButton.tagOp","askConfirmation","privateTagOp","rowCount","confirmationMessage","addList","Label","selectRecord","autoFitData","bodyOverflow","hideMember","grids","hasDataSource","canExpandRecords","canShowFilterEditor","allowFilterOperators","filterByCell","expansionMode","canSelectRecord","state","zoomDisabled","recordList","selectedIdTrackChanges","editorCriteria","dataProperties","transformData","newData","operationType","RPCResponse","STATUS_SUCCESS","summaryFields","filterCriteria","fieldType","excludedTypes","formatCellValue","Boolean","setFields","summaryData","fieldStateChanged","baseColumnOffset","expansionOffset","scrolled","scrollTo","getScrollLeft","getCellCSSText","bizTagged","emptyMessage","cellHeight","TreeGrid","treeConfig","folderIcon","loadOnDemand","openProperty","isFolderProperty","childrenProperty","dataFetchMode","lookup","topRowNum","getVisibleRows","scrollToRow","menuConfig","showMember","contains","hidden","canHide","canToggle","showHover","ignoreKeyboardClicks","recordClick","viewer","recordNum","fieldNum","rawValue","editedRecord","updateData","editRecord","hoverHTML","hasDetailFields","treeFieldNotSet","dsField","foreignKey","gridField","autoFitWidth","treeField","canSave","commentField","saveData","reset","getMembers","rootIdBinding","rootValue","bizParentIdField","getTitle","getFieldWidth","module","_source","changedForServer","ListView","_heading","views","isVisible","_grid","_calendar","_tree","_map","_portal","PortalLayout","getDropPortlet","dragTarget","rowOffset","endsWith","leaf","getDragData","portlet","Portlet","desc","componentMap","cal","tree","ref","addItem","_setHeading","fontIcon","header","headerTemplate","iconMarkup","setGridDataSource","_getDataSource","setCalendarDataSource","setTreeDataSource","setMapDataSource","_initializeView","viewName","createFunction","hasMember","_updateView","defaultTitle","BizContainer","contained","addContained","removeContained","EditView","_DATA_SOURCE","sendExtraFields","_refreshedGrids","_actionPanel","_editPanel","handleHiddenValidationErrors","errors","tokens","lastUnderscore","gridBinding","gridID","setFieldError","markForRedraw","warning","saveEditorValues","saveOperation","addEditAction","forCreate","addCreateAction","addAction","token","evaluation","reduce","toDateStamp","_editInstance","_openedFromDataGrid","formBinding","parentContext","openedFromDataGrid","successCallback","_ecnt","_ccnt","setSaveOperationType","refreshListGrids","opened","willHandleError","_saved","_s","rerenderAction","rerenderBlurryAction","_rerenderBlurryAction","blurry","bean","disableValidation","openerValues","childBinding","lastIndex","openerValue","setValues","_title","deleteInstance","removeData","doAction","gridModule","gridDocument","gridRowBizId","instanceWithoutContext","_g","_redirectUrl","doBlurryAction","_doBlurryAction","blurryElement","clearValues","persisted","help","created","_createIconMarkup","_editIcon","_editFontIcon","_createHelpMarkup","_editHelpFile","_editHelpURL","_createIcon","_createFontIcon","_createHelpFile","_createHelpURL","_valueMaps","_growls","_messages","cleanedValues","toRerender","_processWidgets","widget","_comparisonTree","_comparisonForm","_candidateList","_memberList","_handleListMembership","_handleDataGrid","onlyView","_manageActionPanel","_displayGrowlsAndMessages","iconFile","fontIconClass","helpFile","helpURL","valueMaps","candidates","find","bizKey","isDate","isTime","_processDateTimeFields","_handleGridSelection","row","selectedBizId","tool","notCreated","_showHide","_enableDisable","actionName","_handleToolVisibility","_canDelete","forceRefresh","forcePostRefresh","postRefreshConditionName","_evaluateConditionName","existingRootValue","newRootValue","_gather","comparisons","comparisonID","smartClientGrid","sortByProperty","conditionName","invisible","containedInvisible","Function","addBizTab","selectedTabNumber","getSelectedTabNumber","bizTab","bizTabs","tabInvisible","pane","selectedTabIndex","selectedTabIndexBinding","selectTab","getItems","_updateValueMap","parent","updateCapability","capabilityKey","_setDisabled","disabledConditionName","isDisabled","bizRequired","enableTab","disableTab","tab","tabForPane","getTabNumber","tabIndex","_updateDisabledState","toggleDisabled","disabledState","toggleVisibility","visibilityState","_setInvisible","forceInvisible","invisibleConditionName","setInvisible","BizButton","displayName","this.getHoverHTML","this.action","confirm","_action","this._action","changedOnServer","changedOnServerCancel","openerListGrids","openerListGridID","openerListGrid","getTime","BizZoomIn","BizVBox","BizHBox","BizCollapsible","minimized","guts","animateMinimize","headerLabelProperties","restore","minimize","setProperty","_resizeTimer","resized","_resize","BizTabPane","tabs","destroyPanes","tabBarThickness","tabSelected","tabNum","tabPane","addTab","selectedConditionName","existingTabPosition","tabPosition","tabNumber","removeTab","BizListMembership","recordDrop","targetRecord","candidatesHeading","membersHeading","BizComparison","resizeFrom","Tree","modelType","idField","parentIdField","setFormFields","showOpenIcons","showDropIcons","showResizeBar","PropertySheet","titleHoverHTML","diff_match_patch","oldItem","newDisplayValue","oldDisplayValue","diffs","diff_main","diff_cleanupEfficiency","diff_prettyHtml","Diff_EditCost","cellStyle","getFields","old","prop","oldField","controlGroups","getSelectedRecord","property","clearPrompt","_getData","getRoot","_t","treeNode","child","childResult","existing","BizDynamicImage","hZoom","wZoom","mouseWheelTimer","_createContextMenuData","zoomLevels","zoomMenuItems","level","_open","zoomLevel","moduleDotDocument","contextValue","_clearExistingImage","baseValue","_calculateImageDimensions","imageSrc","_generateImageSrc","_createImageElement","imageWidth","imageHeight","canDrag","dragAppearance","dragStart","startScrollLeft","startScrollTop","getScrollTop","dragMove","Event","lastEvent","mouseDownEvent","mouseWheel","wheelDelta","EventHandler","getWheelDelta","doubleClick","appImgDir","BizImage","file","BizLabel","setAlign","loadingChartJS","loadChartJS","Chart","_resizeChartCalled","_refreshing","redrawOnResize","getInnerHTML","_resizeChart","parentNode","update","modelName","isDrawn","_modelName","_refresh","requestUrl","chartType","responsive","maintainAspectRatio","chartCanvas","getElementById","logoSrc","dataSourceConfig","createBodyLayout","createMenuSections","createDataSources","addListViewToDetails","createTextSearchComponents","createLeftMenuPanel","createRightDetailsPanel","SectionStack","visibilityMode","animateSections","adminStack","getById","createMenuTreeGrid","addSection","expanded","openAll","showConnectors","nodeIcon","closedIconSuffix","nameProperty","leafClick","handleMenuItemClick","details","handleEditView","handleListView","dataSourceName","primaryKey","addAt","canFlag","operationBindings","dataProtocol","criteriaPolicy","keyPress","keyName","doSearch","accessKey","textSearchResults","textSearchForm","getValuesAsCriteria","canPickFields","linkText","suggestion","popupSearch","showPortal","showHelp"]
}
